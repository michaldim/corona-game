/*! For license information please see main.66a84af28eca8720ee85.js.LICENSE.txt */
(()=>{"use strict";var e={16:(e,t,n)=>{e.exports=n.p+"favicon.ico"},52:(e,t,n)=>{e.exports=n.p+"figure1.svg"},660:(e,t,n)=>{e.exports=n.p+"figure10.svg"},101:(e,t,n)=>{e.exports=n.p+"figure11.svg"},389:(e,t,n)=>{e.exports=n.p+"figure12.svg"},36:(e,t,n)=>{e.exports=n.p+"figure13.svg"},304:(e,t,n)=>{e.exports=n.p+"figure14.svg"},803:(e,t,n)=>{e.exports=n.p+"figure15.svg"},103:(e,t,n)=>{e.exports=n.p+"figure16.svg"},834:(e,t,n)=>{e.exports=n.p+"figure17.svg"},648:(e,t,n)=>{e.exports=n.p+"figure18.svg"},787:(e,t,n)=>{e.exports=n.p+"figure19.svg"},74:(e,t,n)=>{e.exports=n.p+"figure2.svg"},411:(e,t,n)=>{e.exports=n.p+"figure20.svg"},691:(e,t,n)=>{e.exports=n.p+"figure3.svg"},559:(e,t,n)=>{e.exports=n.p+"figure4.svg"},863:(e,t,n)=>{e.exports=n.p+"figure5.svg"},571:(e,t,n)=>{e.exports=n.p+"figure6.svg"},982:(e,t,n)=>{e.exports=n.p+"figure7.svg"},290:(e,t,n)=>{e.exports=n.p+"figure8.svg"},840:(e,t,n)=>{e.exports=n.p+"figure9.svg"},51:(e,t,n)=>{e.exports=n.p+"stars.svg"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n(52),n(74),n(691),n(559),n(863),n(571),n(982),n(290),n(840),n(660),n(101),n(389),n(36),n(304),n(803),n(103),n(834),n(648),n(787),n(411),n(51),n(16);var e=document.querySelector("body"),t=document.querySelector("header"),i=document.querySelector(".cursor");document.addEventListener("mousemove",(function(e){i.setAttribute("style","top: "+(e.pageY+4)+"px; left: "+(e.pageX-5)+"px;")}));var s=document.querySelector("#circle"),r=0;[1,2,3,4,5,6].forEach((function(n){var i=document.createElement("div");i.classList.add("corona","axis"),i.setAttribute("id","axis"+n),e.insertBefore(i,s.nextSibling),i.style.transform="rotateZ(".concat(r,"deg)"),r+=30;var o=document.createElement("div");o.classList.add("corona","tinyCircleContainer"),o.setAttribute("id","tinyCircleContainer"+n),e.insertBefore(o,t),o.style.top="calc(30% - 110px)",o.style.bottom="calc(70% + 110px)",o.style.right="calc(50% + ".concat(10+22*(n-1),"px)"),o.style.left="calc(50% - ".concat(10+22*(n-1),"px)");var a=30*(n-1);o.style.transform="rotateZ(".concat(a,"deg)");var c=document.createElement("div"),l=document.createElement("div");c.classList.add("corona","tinyCircle"),c.setAttribute("id","tinyCircle"+n),c.style.top="0",c.style.right="0",l.classList.add("corona","tinyCircle"),l.setAttribute("id","tinyCircle"+(n+6)),l.style.top="calc(100% - 24px)",l.style.right="0";var u=document.querySelector("#tinyCircleContainer".concat(n));u.append(c),u.append(l)}));var o=document.createElement("div");o.classList.add("eyes","corona"),document.querySelector("#tinyCircleContainer1").append(o);var a=document.createElement("div"),c=document.createElement("div");a.classList.add("corona","eyeShades"),c.classList.add("corona","eyeShades"),a.setAttribute("id","topEyeshade"),c.setAttribute("id","bottomEyeshade"),document.querySelector("#tinyCircleContainer1").append(a),document.querySelector("#tinyCircleContainer1").append(c);const l=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,o=r?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],r=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==r||null==o||null==a)throw Error();const c=s<<2|r>>4;if(i.push(c),64!==o){const e=r<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){return function(e){const t=l(e);return u.encodeByteArray(t,!0)}(e).replace(/\./g,"")};class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){const e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}class v extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(b,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new v(i,o,n)}}const b=/\{\$([^}]+)}/g;function I(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(E(n)&&E(r)){if(!I(n,r))return!1}else if(n!==r)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function E(e){return null!==e&&"object"==typeof e}function T(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function S(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function _(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class k{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=C),void 0===i.error&&(i.error=C),void 0===i.complete&&(i.complete=C);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function C(){}function A(e){return e&&e._delegate?e._delegate:e}function N(e,t){return new Promise(((n,i)=>{e.onsuccess=e=>{n(e.target.result)},e.onerror=e=>{var n;i(`${t}: ${null===(n=e.target.error)||void 0===n?void 0:n.message}`)}}))}class R{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,t){return new D(this._db.transaction.call(this._db,e,t))}createObjectStore(e,t){return new L(this._db.createObjectStore(e,t))}close(){this._db.close()}}class D{constructor(e){this._transaction=e,this.complete=new Promise(((e,t)=>{this._transaction.oncomplete=function(){e()},this._transaction.onerror=()=>{t(this._transaction.error)},this._transaction.onabort=()=>{t(this._transaction.error)}}))}objectStore(e){return new L(this._transaction.objectStore(e))}}class L{constructor(e){this._store=e}index(e){return new O(this._store.index(e))}createIndex(e,t,n){return new O(this._store.createIndex(e,t,n))}get(e){return N(this._store.get(e),"Error reading from IndexedDB")}put(e,t){return N(this._store.put(e,t),"Error writing to IndexedDB")}delete(e){return N(this._store.delete(e),"Error deleting from IndexedDB")}clear(){return N(this._store.clear(),"Error clearing IndexedDB object store")}}class O{constructor(e){this._index=e}get(e){return N(this._index.get(e),"Error reading from IndexedDB")}}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const x="[DEFAULT]";class M{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new d;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:x})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===x?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:x:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new M(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const F=[];var V,q;(q=V||(V={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT";const j={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},B=V.INFO,$={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},z=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=$[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class H{constructor(e){this.name=e,this._logLevel=B,this._logHandler=z,this._userLogHandler=null,F.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in V))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...e),this._logHandler(this,V.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...e),this._logHandler(this,V.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,V.INFO,...e),this._logHandler(this,V.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,V.WARN,...e),this._logHandler(this,V.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...e),this._logHandler(this,V.ERROR,...e)}}class K{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const G="@firebase/app",W="0.7.20",X=new H("@firebase/app"),Y={[G]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},J=new Map,Q=new Map;function Z(e,t){try{e.container.addComponent(t)}catch(n){X.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ee(e){const t=e.name;if(Q.has(t))return X.debug(`There were multiple attempts to register component ${t}.`),!1;Q.set(t,e);for(const t of J.values())Z(t,e);return!0}function te(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ne=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ie{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ne.create("app-deleted",{appName:this._name})}}const se="9.6.10";function re(e="[DEFAULT]"){const t=J.get(e);if(!t)throw ne.create("no-app",{appName:e});return t}function oe(e,t,n){var i;let s=null!==(i=Y[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void X.warn(e.join(" "))}ee(new P(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const ae="firebase-heartbeat-store";let ce=null;function le(){var e;return ce||(ce=("firebase-heartbeat-database",1,e=(e,t)=>{0===t&&e.createObjectStore(ae)},new Promise(((t,n)=>{try{const i=indexedDB.open("firebase-heartbeat-database",1);i.onsuccess=e=>{t(new R(e.target.result))},i.onerror=e=>{var t;n(`Error opening indexedDB: ${null===(t=e.target.error)||void 0===t?void 0:t.message}`)},i.onupgradeneeded=t=>{e(new R(i.result),t.oldVersion,t.newVersion,new D(i.transaction))}}catch(e){n(`Error opening indexedDB: ${e.message}`)}}))).catch((e=>{throw ne.create("storage-open",{originalErrorMessage:e.message})}))),ce}async function ue(e,t){try{const n=(await le()).transaction(ae,"readwrite"),i=n.objectStore(ae);return await i.put(t,he(e)),n.complete}catch(e){throw ne.create("storage-set",{originalErrorMessage:e.message})}}function he(e){return`${e.name}!${e.options.appId}`}class de{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=fe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=fe(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),me(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),me(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=h(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function fe(){return(new Date).toISOString().substring(0,10)}class pe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return"object"==typeof indexedDB&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{return(await le()).transaction(ae).objectStore(ae).get(he(e))}catch(e){throw ne.create("storage-get",{originalErrorMessage:e.message})}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ue(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ue(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function me(e){return h(JSON.stringify({version:2,heartbeats:e})).length}ee(new P("platform-logger",(e=>new K(e)),"PRIVATE")),ee(new P("heartbeat",(e=>new de(e)),"PRIVATE")),oe(G,W,""),oe(G,W,"esm2017"),oe("fire-js",""),oe("firebase","9.6.10","app");var ge,ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},ve={},we=we||{},be=ye||self;function Ie(){}function Ee(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Te(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Se="closure_uid_"+(1e9*Math.random()>>>0),_e=0;function ke(e,t,n){return e.call.apply(e.bind,arguments)}function Ce(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ae(e,t,n){return(Ae=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ke:Ce).apply(null,arguments)}function Ne(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Re(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return t.prototype[n].apply(e,s)}}function De(){this.s=this.s,this.o=this.o}var Le={};De.prototype.s=!1,De.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Se)&&e[Se]||(e[Se]=++_e)}(this);delete Le[e]}},De.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Oe=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Pe=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,s="string"==typeof e?e.split(""):e;for(let r=0;r<i;r++)r in s&&t.call(n,s[r],r,e)};function xe(e){return Array.prototype.concat.apply([],arguments)}function Me(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Ue(e){return/^[\s\xa0]*$/.test(e)}var Fe,Ve=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function qe(e,t){return-1!=e.indexOf(t)}function je(e,t){return e<t?-1:e>t?1:0}e:{var Be=be.navigator;if(Be){var $e=Be.userAgent;if($e){Fe=$e;break e}}Fe=""}function ze(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function He(e){const t={};for(const n in e)t[n]=e[n];return t}var Ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<Ke.length;t++)n=Ke[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function We(e){return We[" "](e),e}We[" "]=Ie;var Xe,Ye,Je=qe(Fe,"Opera"),Qe=qe(Fe,"Trident")||qe(Fe,"MSIE"),Ze=qe(Fe,"Edge"),et=Ze||Qe,tt=qe(Fe,"Gecko")&&!(qe(Fe.toLowerCase(),"webkit")&&!qe(Fe,"Edge"))&&!(qe(Fe,"Trident")||qe(Fe,"MSIE"))&&!qe(Fe,"Edge"),nt=qe(Fe.toLowerCase(),"webkit")&&!qe(Fe,"Edge");function it(){var e=be.document;return e?e.documentMode:void 0}e:{var st="",rt=(Ye=Fe,tt?/rv:([^\);]+)(\)|;)/.exec(Ye):Ze?/Edge\/([\d\.]+)/.exec(Ye):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ye):nt?/WebKit\/(\S+)/.exec(Ye):Je?/(?:Version)[ \/]?(\S+)/.exec(Ye):void 0);if(rt&&(st=rt?rt[1]:""),Qe){var ot=it();if(null!=ot&&ot>parseFloat(st)){Xe=String(ot);break e}}Xe=st}var at,ct={};function lt(){return e=ct,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=Ve(String(Xe)).split("."),n=Ve("9").split("."),i=Math.max(t.length,n.length);for(let o=0;0==e&&o<i;o++){var s=t[o]||"",r=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;e=je(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||je(0==s[2].length,0==r[2].length)||je(s[2],r[2]),s=s[3],r=r[3]}while(0==e)}return 0<=e}();var e}be.document&&Qe?at=it()||parseInt(Xe,10)||void 0:at=void 0;var ut=at,ht=function(){if(!be.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{be.addEventListener("test",Ie,t),be.removeEventListener("test",Ie,t)}catch(e){}return e}();function dt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ft(e,t){if(dt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(tt){e:{try{We(t.nodeName);var s=!0;break e}catch(e){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:pt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ft.Z.h.call(this)}}dt.prototype.h=function(){this.defaultPrevented=!0},Re(ft,dt);var pt={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),gt=0;function yt(e,t,n,i,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=s,this.key=++gt,this.ca=this.fa=!1}function vt(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function wt(e){this.src=e,this.g={},this.h=0}function bt(e,t){var n=t.type;if(n in e.g){var i,s=e.g[n],r=Oe(s,t);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(vt(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function It(e,t,n,i){for(var s=0;s<e.length;++s){var r=e[s];if(!r.ca&&r.listener==t&&r.capture==!!n&&r.ia==i)return s}return-1}wt.prototype.add=function(e,t,n,i,s){var r=e.toString();(e=this.g[r])||(e=this.g[r]=[],this.h++);var o=It(e,t,i,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new yt(t,this.src,r,!!i,s)).fa=n,e.push(t)),t};var Et="closure_lm_"+(1e6*Math.random()|0),Tt={};function St(e,t,n,i,s){if(i&&i.once)return kt(e,t,n,i,s);if(Array.isArray(t)){for(var r=0;r<t.length;r++)St(e,t[r],n,i,s);return null}return n=Ot(n),e&&e[mt]?e.N(t,n,Te(i)?!!i.capture:!!i,s):_t(e,t,n,!1,i,s)}function _t(e,t,n,i,s,r){if(!t)throw Error("Invalid event type");var o=Te(s)?!!s.capture:!!s,a=Dt(e);if(a||(e[Et]=a=new wt(e)),(n=a.add(t,n,i,o,r)).proxy)return n;if(i=function(){var e=Rt;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)ht||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),i,s);else if(e.attachEvent)e.attachEvent(Nt(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function kt(e,t,n,i,s){if(Array.isArray(t)){for(var r=0;r<t.length;r++)kt(e,t[r],n,i,s);return null}return n=Ot(n),e&&e[mt]?e.O(t,n,Te(i)?!!i.capture:!!i,s):_t(e,t,n,!0,i,s)}function Ct(e,t,n,i,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)Ct(e,t[r],n,i,s);else i=Te(i)?!!i.capture:!!i,n=Ot(n),e&&e[mt]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=It(r=e.g[t],n,i,s))&&(vt(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete e.g[t],e.h--))):e&&(e=Dt(e))&&(t=e.g[t.toString()],e=-1,t&&(e=It(t,n,i,s)),(n=-1<e?t[e]:null)&&At(n))}function At(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[mt])bt(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Nt(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Dt(t))?(bt(n,e),0==n.h&&(n.src=null,t[Et]=null)):vt(e)}}}function Nt(e){return e in Tt?Tt[e]:Tt[e]="on"+e}function Rt(e,t){if(e.ca)e=!0;else{t=new ft(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&At(e),e=n.call(i,t)}return e}function Dt(e){return(e=e[Et])instanceof wt?e:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(e){return"function"==typeof e?e:(e[Lt]||(e[Lt]=function(t){return e.handleEvent(t)}),e[Lt])}function Pt(){De.call(this),this.i=new wt(this),this.P=this,this.I=null}function xt(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new dt(t,e);else if(t instanceof dt)t.target=t.target||e;else{var s=t;Ge(t=new dt(i,e),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=t.g=n[r];s=Mt(o,i,!0,t)&&s}if(s=Mt(o=t.g=e,i,!0,t)&&s,s=Mt(o,i,!1,t)&&s,n)for(r=0;r<n.length;r++)s=Mt(o=t.g=n[r],i,!1,t)&&s}function Mt(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&bt(e.i,o),s=!1!==a.call(c,i)&&s}}return s&&!i.defaultPrevented}Re(Pt,De),Pt.prototype[mt]=!0,Pt.prototype.removeEventListener=function(e,t,n,i){Ct(this,e,t,n,i)},Pt.prototype.M=function(){if(Pt.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)vt(n[i]);delete t.g[e],t.h--}}this.I=null},Pt.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Pt.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Ut=be.JSON.stringify;function Ft(){var e=Ht;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Vt,qt=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new jt),(e=>e.reset()));class jt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Bt(e){be.setTimeout((()=>{throw e}),0)}function $t(e,t){Vt||function(){var e=be.Promise.resolve(void 0);Vt=function(){e.then(Kt)}}(),zt||(Vt(),zt=!0),Ht.add(e,t)}var zt=!1,Ht=new class{constructor(){this.h=this.g=null}add(e,t){const n=qt.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Kt(){for(var e;e=Ft();){try{e.h.call(e.g)}catch(e){Bt(e)}var t=qt;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}zt=!1}function Gt(e,t){Pt.call(this),this.h=e||1,this.g=t||be,this.j=Ae(this.kb,this),this.l=Date.now()}function Wt(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Xt(e,t,n){if("function"==typeof e)n&&(e=Ae(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ae(e.handleEvent,e)}return 2147483647<Number(t)?-1:be.setTimeout(e,t||0)}function Yt(e){e.g=Xt((()=>{e.g=null,e.i&&(e.i=!1,Yt(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Re(Gt,Pt),(ge=Gt.prototype).da=!1,ge.S=null,ge.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xt(this,"tick"),this.da&&(Wt(this),this.start()))}},ge.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ge.M=function(){Gt.Z.M.call(this),Wt(this),delete this.g};class Jt extends De{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yt(this)}M(){super.M(),this.g&&(be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(e){De.call(this),this.h=e,this.g={}}Re(Qt,De);var Zt=[];function en(e,t,n,i){Array.isArray(n)||(n&&(Zt[0]=n.toString()),n=Zt);for(var s=0;s<n.length;s++){var r=St(t,n[s],i||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function tn(e){ze(e.g,(function(e,t){this.g.hasOwnProperty(t)&&At(e)}),e),e.g={}}function nn(){this.g=!0}function sn(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return Ut(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}Qt.prototype.M=function(){Qt.Z.M.call(this),tn(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nn.prototype.Aa=function(){this.g=!1},nn.prototype.info=function(){};var rn={},on=null;function an(){return on=on||new Pt}function cn(e){dt.call(this,rn.Ma,e)}function ln(e){const t=an();xt(t,new cn(t,e))}function un(e,t){dt.call(this,rn.STAT_EVENT,e),this.stat=t}function hn(e){const t=an();xt(t,new un(t,e))}function dn(e,t){dt.call(this,rn.Na,e),this.size=t}function fn(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return be.setTimeout((function(){e()}),t)}rn.Ma="serverreachability",Re(cn,dt),rn.STAT_EVENT="statevent",Re(un,dt),rn.Na="timingevent",Re(dn,dt);var pn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gn(){}function yn(e){return e.h||(e.h=e.i())}function vn(){}gn.prototype.h=null;var wn,bn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function In(){dt.call(this,"d")}function En(){dt.call(this,"c")}function Tn(){}function Sn(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new Qt(this),this.P=kn,e=et?125:void 0,this.W=new Gt(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _n}function _n(){this.i=null,this.g="",this.h=!1}Re(In,dt),Re(En,dt),Re(Tn,gn),Tn.prototype.g=function(){return new XMLHttpRequest},Tn.prototype.i=function(){return{}},wn=new Tn;var kn=45e3,Cn={},An={};function Nn(e,t,n){e.K=1,e.v=Qn(Kn(t)),e.s=n,e.U=!0,Rn(e,null)}function Rn(e,t){e.F=Date.now(),Pn(e),e.A=Kn(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),hi(n.h,"t",i),e.C=0,n=e.l.H,e.h=new _n,e.g=hs(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Jt(Ae(e.Ia,e,e.g),e.O)),en(e.V,e.g,"readystatechange",e.gb),t=e.H?He(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ln(1),function(e,t,n,i,s,r){e.info((function(){if(e.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Dn(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Ln(e,t,n){let i,s=!0;for(;!e.I&&e.C<n.length;){if(i=On(e,n),i==An){4==t&&(e.o=4,hn(14),s=!1),sn(e.j,e.m,null,"[Incomplete Response]");break}if(i==Cn){e.o=4,hn(15),sn(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}sn(e.j,e.m,i,null),Vn(e,i)}Dn(e)&&i!=An&&i!=Cn&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,hn(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),is(t),t.L=!0,hn(11))):(sn(e.j,e.m,n,"[Invalid Chunked Response]"),Fn(e),Un(e))}function On(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?An:(n=Number(t.substring(n,i)),isNaN(n)?Cn:(i+=1)+n>t.length?An:(t=t.substr(i,n),e.C=i+n,t))}function Pn(e){e.Y=Date.now()+e.P,xn(e,e.P)}function xn(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=fn(Ae(e.eb,e),t)}function Mn(e){e.B&&(be.clearTimeout(e.B),e.B=null)}function Un(e){0==e.l.G||e.I||os(e.l,e)}function Fn(e){Mn(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Wt(e.W),tn(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Vn(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||yi(n.i,e)))if(n.I=e.N,!e.J&&yi(n.i,e)&&3==n.G){try{var i=n.Ca.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rs(n),Wi(n)}ns(n),hn(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&0==n.A&&!n.v&&(n.v=fn(Ae(n.ab,n),6e3));if(1>=gi(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else cs(n,11)}else if((e.J||n.g==e)&&rs(n),!Ue(t))for(s=n.Ca.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const t=l[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const s=l[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=i.i;!r.g&&(qe(e,"spdy")||qe(e,"quic")||qe(e,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(vi(r,r.h),r.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.sa=e,Jn(i.F,i.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((i=n).oa=us(i,i.H?i.la:null,i.W),o.J){wi(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(Mn(a),Pn(a)),i.g=o}else ts(i);0<n.l.length&&Ji(n)}else"stop"!=l[0]&&"close"!=l[0]||cs(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?cs(n,7):Gi(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}ln(4)}catch(e){}}function qn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ee(e)||"string"==typeof e)Pe(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ee(e)||"string"==typeof e){n=[];for(var i=e.length,s=0;s<i;s++)n.push(s)}else for(s in n=[],i=0,e)n[i++]=s;i=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Ee(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),s=i.length;for(var r=0;r<s;r++)t.call(void 0,i[r],n&&n[r],e)}}function jn(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof jn)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function Bn(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];$n(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var s={};for(n=t=0;t<e.g.length;)$n(s,i=e.g[t])||(e.g[n++]=i,s[i]=1),t++;e.g.length=n}}function $n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ge=Sn.prototype).setTimeout=function(e){this.P=e},ge.gb=function(e){e=e.target;const t=this.L;t&&3==Bi(e)?t.l():this.Ia(e)},ge.Ia=function(e){try{if(e==this.g)e:{const u=Bi(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>u)&&(3!=u||et||this.g&&(this.h.h||this.g.ga()||$i(this.g)))){this.I||4!=u||7==t||ln(8==t||0>=h?3:2),Mn(this);var n=this.g.ba();this.N=n;t:if(Dn(this)){var i=$i(this.g);e="";var s=i.length,r=4==Bi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fn(this),Un(this);var o="";break t}this.h.i=new be.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:r&&t==s-1});i.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,i,s,r,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ue(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,hn(12),Fn(this),Un(this);break e}sn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Vn(this,n)}this.U?(Ln(this,u,o),et&&this.i&&3==u&&(en(this.V,this.W,"tick",this.fb),this.W.start())):(sn(this.j,this.m,o,null),Vn(this,o)),4==u&&Fn(this),this.i&&!this.I&&(4==u?os(this.l,this):(this.i=!1,Pn(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,hn(12)):(this.o=0,hn(13)),Fn(this),Un(this)}}}catch(e){}},ge.fb=function(){if(this.g){var e=Bi(this.g),t=this.g.ga();this.C<t.length&&(Mn(this),Ln(this,e,t),this.i&&4!=e&&Pn(this))}},ge.cancel=function(){this.I=!0,Fn(this)},ge.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ln(3),hn(17)),Fn(this),this.o=2,Un(this)):xn(this,this.Y-e)},(ge=jn.prototype).R=function(){Bn(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ge.T=function(){return Bn(this),this.g.concat()},ge.get=function(e,t){return $n(this.h,e)?this.h[e]:t},ge.set=function(e,t){$n(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ge.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var s=n[i],r=this.get(s);e.call(t,r,s,this)}};var zn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hn(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Hn){this.g=void 0!==t?t:e.g,Gn(this,e.j),this.s=e.s,Wn(this,e.i),Xn(this,e.m),this.l=e.l,t=e.h;var n=new ai;n.i=t.i,t.g&&(n.g=new jn(t.g),n.h=t.h),Yn(this,n),this.o=e.o}else e&&(n=String(e).match(zn))?(this.g=!!t,Gn(this,n[1]||"",!0),this.s=Zn(n[2]||""),Wn(this,n[3]||"",!0),Xn(this,n[4]),this.l=Zn(n[5]||"",!0),Yn(this,n[6]||"",!0),this.o=Zn(n[7]||"")):(this.g=!!t,this.h=new ai(null,this.g))}function Kn(e){return new Hn(e)}function Gn(e,t,n){e.j=n?Zn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Wn(e,t,n){e.i=n?Zn(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Yn(e,t,n){t instanceof ai?(e.h=t,function(e,t){t&&!e.j&&(ci(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(li(this,t),hi(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ei(t,ri)),e.h=new ai(t,e.g))}function Jn(e,t,n){e.h.set(t,n)}function Qn(e){return Jn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ei(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ti),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ti(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Hn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ei(t,ni,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ei(t,ni,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ei(n,"/"==n.charAt(0)?si:ii,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ei(n,oi)),e.join("")};var ni=/[#\/\?@]/g,ii=/[#\?:]/g,si=/[#\?]/g,ri=/[#\?@]/g,oi=/#/g;function ai(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ci(e){e.g||(e.g=new jn,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),s=null;if(0<=i){var r=e[n].substring(0,i);s=e[n].substring(i+1)}else r=e[n];t(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function li(e,t){ci(e),t=di(e,t),$n(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,$n((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Bn(e)))}function ui(e,t){return ci(e),t=di(e,t),$n(e.g.h,t)}function hi(e,t,n){li(e,t),0<n.length&&(e.i=null,e.g.set(di(e,t),Me(n)),e.h+=n.length)}function di(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function fi(e){this.l=e||pi,e=be.PerformanceNavigationTiming?0<(e=be.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(be.g&&be.g.Ea&&be.g.Ea()&&be.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ge=ai.prototype).add=function(e,t){ci(this),this.i=null,e=di(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ge.forEach=function(e,t){ci(this),this.g.forEach((function(n,i){Pe(n,(function(n){e.call(t,n,i,this)}),this)}),this)},ge.T=function(){ci(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var s=e[i],r=0;r<s.length;r++)n.push(t[i]);return n},ge.R=function(e){ci(this);var t=[];if("string"==typeof e)ui(this,e)&&(t=xe(t,this.g.get(di(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=xe(t,e[n])}return t},ge.set=function(e,t){return ci(this),this.i=null,ui(this,e=di(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ge.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],s=encodeURIComponent(String(i));i=this.R(i);for(var r=0;r<i.length;r++){var o=s;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}}return this.i=e.join("&")};var pi=10;function mi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function gi(e){return e.h?1:e.g?e.g.size:0}function yi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function vi(e,t){e.g?e.g.add(t):e.h=t}function wi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function bi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Me(e.i)}function Ii(){}function Ei(){this.g=new Ii}function Ti(e,t,n){const i=n||"";try{qn(e,(function(e,n){let s=e;Te(e)&&(s=Ut(e)),t.push(i+n+"="+encodeURIComponent(s))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function Si(e,t,n,i,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(i)}catch(e){}}function _i(e){this.l=e.$b||null,this.j=e.ib||!1}function ki(e,t){Pt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ci,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fi.prototype.cancel=function(){if(this.i=bi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Ii.prototype.stringify=function(e){return be.JSON.stringify(e,void 0)},Ii.prototype.parse=function(e){return be.JSON.parse(e,void 0)},Re(_i,gn),_i.prototype.g=function(){return new ki(this.l,this.j)},_i.prototype.i=function(e){return function(){return e}}({}),Re(ki,Pt);var Ci=0;function Ai(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ni(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ri(e)}function Ri(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ge=ki.prototype).open=function(e,t){if(this.readyState!=Ci)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ri(this)},ge.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||be).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ni(this)),this.readyState=Ci},ge.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==be.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ai(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ge.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ni(this):Ri(this),3==this.readyState&&Ai(this)}},ge.Ua=function(e){this.g&&(this.response=this.responseText=e,Ni(this))},ge.Ta=function(e){this.g&&(this.response=e,Ni(this))},ge.ha=function(){this.g&&Ni(this)},ge.setRequestHeader=function(e,t){this.v.append(e,t)},ge.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ge.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Di=be.JSON.parse;function Li(e){Pt.call(this),this.headers=new jn,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oi,this.K=this.L=!1}Re(Li,Pt);var Oi="",Pi=/^https?$/i,xi=["POST","PUT"];function Mi(e){return"content-type"==e.toLowerCase()}function Ui(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Fi(e),qi(e)}function Fi(e){e.D||(e.D=!0,xt(e,"complete"),xt(e,"error"))}function Vi(e){if(e.h&&void 0!==we&&(!e.C[1]||4!=Bi(e)||2!=e.ba()))if(e.v&&4==Bi(e))Xt(e.Fa,0,e);else if(xt(e,"readystatechange"),4==Bi(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var s=String(e.H).match(zn)[1]||null;if(!s&&be.self&&be.self.location){var r=be.self.location.protocol;s=r.substr(0,r.length-1)}i=!Pi.test(s?s.toLowerCase():"")}n=i}if(n)xt(e,"complete"),xt(e,"success");else{e.m=6;try{var o=2<Bi(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",Fi(e)}}finally{qi(e)}}}function qi(e,t){if(e.g){ji(e);const n=e.g,i=e.C[0]?Ie:null;e.g=null,e.C=null,t||xt(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function ji(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(be.clearTimeout(e.A),e.A=null)}function Bi(e){return e.g?e.g.readyState:0}function $i(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Oi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function zi(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=function(e){let t="";return ze(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Jn(e,t,n))}function Hi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ki(e){this.za=0,this.l=[],this.h=new nn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hi("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hi("baseRetryDelayMs",5e3,e),this.$a=Hi("retryDelaySeedMs",1e4,e),this.Ya=Hi("forwardChannelMaxRetries",2,e),this.ra=Hi("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new fi(e&&e.concurrentRequestLimit),this.Ca=new Ei,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Gi(e){if(Xi(e),3==e.G){var t=e.V++,n=Kn(e.F);Jn(n,"SID",e.J),Jn(n,"RID",t),Jn(n,"TYPE","terminate"),Zi(e,n),(t=new Sn(e,e.h,t,void 0)).K=2,t.v=Qn(Kn(n)),n=!1,be.navigator&&be.navigator.sendBeacon&&(n=be.navigator.sendBeacon(t.v.toString(),"")),!n&&be.Image&&((new Image).src=t.v,n=!0),n||(t.g=hs(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Pn(t)}ls(e)}function Wi(e){e.g&&(is(e),e.g.cancel(),e.g=null)}function Xi(e){Wi(e),e.u&&(be.clearTimeout(e.u),e.u=null),rs(e),e.i.cancel(),e.m&&("number"==typeof e.m&&be.clearTimeout(e.m),e.m=null)}function Yi(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&Ji(e)}function Ji(e){mi(e.i)||e.m||(e.m=!0,$t(e.Ha,e),e.C=0)}function Qi(e,t){var n;n=t?t.m:e.V++;const i=Kn(e.F);Jn(i,"SID",e.J),Jn(i,"RID",n),Jn(i,"AID",e.U),Zi(e,i),e.o&&e.s&&zi(i,e.o,e.s),n=new Sn(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=es(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),vi(e.i,n),Nn(n,i,t)}function Zi(e,t){e.j&&qn({},(function(e,n){Jn(t,n,e)}))}function es(e,t,n){n=Math.min(e.l.length,n);var i=e.j?Ae(e.j.Oa,e.j,e):null;e:{var s=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let r=!0;for(let o=0;o<n;o++){let n=s[o].h;const a=s[o].g;if(n-=t,0>n)t=Math.max(0,s[o].h-100),r=!1;else try{Ti(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(r){i=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function ts(e){e.g||e.u||(e.Y=1,$t(e.Ga,e),e.A=0)}function ns(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=fn(Ae(e.Ga,e),as(e,e.A)),e.A++,0))}function is(e){null!=e.B&&(be.clearTimeout(e.B),e.B=null)}function ss(e){e.g=new Sn(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Kn(e.oa);Jn(t,"RID","rpc"),Jn(t,"SID",e.J),Jn(t,"CI",e.N?"0":"1"),Jn(t,"AID",e.U),Zi(e,t),Jn(t,"TYPE","xmlhttp"),e.o&&e.s&&zi(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Qn(Kn(t)),n.s=null,n.U=!0,Rn(n,e)}function rs(e){null!=e.v&&(be.clearTimeout(e.v),e.v=null)}function os(e,t){var n=null;if(e.g==t){rs(e),is(e),e.g=null;var i=2}else{if(!yi(e.i,t))return;n=t.D,wi(e.i,t),i=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var s=e.C;xt(i=an(),new dn(i,n,t,s)),Ji(e)}else ts(e);else if(3==(s=t.o)||0==s&&0<e.I||!(1==i&&function(e,t){return!(gi(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=fn(Ae(e.Ha,e,t),as(e,e.C)),e.C++,0)))}(e,t)||2==i&&ns(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:cs(e,5);break;case 4:cs(e,10);break;case 3:cs(e,6);break;default:cs(e,2)}}function as(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function cs(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var i=Ae(e.jb,e);n||(n=new Hn("//www.google.com/images/cleardot.gif"),be.location&&"http"==be.location.protocol||Gn(n,"https"),Qn(n)),function(e,t){const n=new nn;if(be.Image){const i=new Image;i.onload=Ne(Si,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Ne(Si,n,i,"TestLoadImage: error",!1,t),i.onabort=Ne(Si,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Ne(Si,n,i,"TestLoadImage: timeout",!1,t),be.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else hn(2);e.G=0,e.j&&e.j.va(t),ls(e),Xi(e)}function ls(e){e.G=0,e.I=-1,e.j&&(0==bi(e.i).length&&0==e.l.length||(e.i.i.length=0,Me(e.l),e.l.length=0),e.j.ua())}function us(e,t,n){let i=function(e){return e instanceof Hn?Kn(e):new Hn(e,void 0)}(n);if(""!=i.i)t&&Wn(i,t+"."+i.i),Xn(i,i.m);else{const e=be.location;i=function(e,t,n,i){var s=new Hn(null,void 0);return e&&Gn(s,e),t&&Wn(s,t),n&&Xn(s,n),i&&(s.l=i),s}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&ze(e.aa,(function(e,t){Jn(i,t,e)})),t=e.D,n=e.sa,t&&n&&Jn(i,t,n),Jn(i,"VER",e.ma),Zi(e,i),i}function hs(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Li(new _i({ib:!0})):new Li(e.qa)).L=e.H,t}function ds(){}function fs(){if(Qe&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function ps(e,t){Pt.call(this),this.g=new Ki(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ue(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ue(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ys(this)}function ms(e){In.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gs(){En.call(this),this.status=1}function ys(e){this.g=e}(ge=Li.prototype).ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wn.g(),this.C=this.u?yn(this.u):yn(wn),this.g.onreadystatechange=Ae(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Ui(this,e)}e=n||"";const s=new jn(this.headers);i&&qn(i,(function(e,t){s.set(t,e)})),i=function(e){e:{var t=Mi;const n=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<n;s++)if(s in i&&t.call(void 0,i[s],s,e)){t=s;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(s.T()),n=be.FormData&&e instanceof be.FormData,!(0<=Oe(xi,t))||i||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ji(this),0<this.B&&((this.K=function(e){return Qe&&lt()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ae(this.pa,this)):this.A=Xt(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Ui(this,e)}},ge.pa=function(){void 0!==we&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xt(this,"timeout"),this.abort(8))},ge.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xt(this,"complete"),xt(this,"abort"),qi(this))},ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qi(this,!0)),Li.Z.M.call(this)},ge.Fa=function(){this.s||(this.F||this.v||this.l?Vi(this):this.cb())},ge.cb=function(){Vi(this)},ge.ba=function(){try{return 2<Bi(this)?this.g.status:-1}catch(e){return-1}},ge.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},ge.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Di(t)}},ge.Da=function(){return this.m},ge.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ge=Ki.prototype).ma=8,ge.G=1,ge.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},ge.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new Sn(this,this.h,e,void 0);let r=this.s;if(this.P&&(r?(r=He(r),Ge(r,this.P)):r=this.P),null===this.o&&(s.H=r),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=es(this,s,t),Jn(n=Kn(this.F),"RID",e),Jn(n,"CVER",22),this.D&&Jn(n,"X-HTTP-Session-Id",this.D),Zi(this,n),this.o&&r&&zi(n,this.o,r),vi(this.i,s),this.Ra&&Jn(n,"TYPE","init"),this.ja?(Jn(n,"$req",t),Jn(n,"SID","null"),s.$=!0,Nn(s,n,null)):Nn(s,n,t),this.G=2}}else 3==this.G&&(e?Qi(this,e):0==this.l.length||mi(this.i)||Qi(this))},ge.Ga=function(){if(this.u=null,ss(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=fn(Ae(this.bb,this),e)}},ge.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,hn(10),Wi(this),ss(this))},ge.ab=function(){null!=this.v&&(this.v=null,Wi(this),ns(this),hn(19))},ge.jb=function(e){e?(this.h.info("Successfully pinged google.com"),hn(2)):(this.h.info("Failed to ping google.com"),hn(1))},(ge=ds.prototype).xa=function(){},ge.wa=function(){},ge.va=function(){},ge.ua=function(){},ge.Oa=function(){},fs.prototype.g=function(e,t){return new ps(e,t)},Re(ps,Pt),ps.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),$t(Ae(e.hb,e,t))),hn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=us(e,null,e.W),Ji(e)},ps.prototype.close=function(){Gi(this.g)},ps.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Yi(this.g,t)}else this.v?((t={}).__data__=Ut(e),Yi(this.g,t)):Yi(this.g,e)},ps.prototype.M=function(){this.g.j=null,delete this.j,Gi(this.g),delete this.g,ps.Z.M.call(this)},Re(ms,In),Re(gs,En),Re(ys,ds),ys.prototype.xa=function(){xt(this.g,"a")},ys.prototype.wa=function(e){xt(this.g,new ms(e))},ys.prototype.va=function(e){xt(this.g,new gs(e))},ys.prototype.ua=function(){xt(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,mn.COMPLETE="complete",vn.EventType=bn,bn.OPEN="a",bn.CLOSE="b",bn.ERROR="c",bn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.N,Li.prototype.listenOnce=Li.prototype.O,Li.prototype.getLastError=Li.prototype.La,Li.prototype.getLastErrorCode=Li.prototype.Da,Li.prototype.getStatus=Li.prototype.ba,Li.prototype.getResponseJson=Li.prototype.Qa,Li.prototype.getResponseText=Li.prototype.ga,Li.prototype.send=Li.prototype.ea;var vs=ve.createWebChannelTransport=function(){return new fs},ws=ve.getStatEventTarget=function(){return an()},bs=ve.ErrorCode=pn,Is=ve.EventType=mn,Es=ve.Event=rn,Ts=ve.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ss=ve.FetchXmlHttpFactory=_i,_s=ve.WebChannel=vn,ks=ve.XhrIo=Li;const Cs="@firebase/firestore";class As{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let Ns="9.6.10";const Rs=new H("@firebase/firestore");function Ds(){return Rs.logLevel}function Ls(e,...t){if(Rs.logLevel<=V.DEBUG){const n=t.map(xs);Rs.debug(`Firestore (${Ns}): ${e}`,...n)}}function Os(e,...t){if(Rs.logLevel<=V.ERROR){const n=t.map(xs);Rs.error(`Firestore (${Ns}): ${e}`,...n)}}function Ps(e,...t){if(Rs.logLevel<=V.WARN){const n=t.map(xs);Rs.warn(`Firestore (${Ns}): ${e}`,...n)}}function xs(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ms(e="Unexpected state"){const t=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: `+e;throw Os(t),new Error(t)}function Us(e,t){e||Ms()}function Fs(e,t){return e}const Vs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qs extends v{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class js{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Bs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $s{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(As.UNAUTHENTICATED)))}shutdown(){}}class zs{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new js;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new js,e.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Ls("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ls("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new js)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ls("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Us("string"==typeof t.accessToken),new Bs(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Us(null===e||"string"==typeof e),new As(e)}}class Hs{constructor(e,t,n){this.type="FirstParty",this.user=As.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Ks{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Hs(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(As.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ws{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&Ls("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,Ls("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Ls("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?i(e):Ls("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Us("string"==typeof e.token),this.p=e.token,new Gs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Xs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Ys(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}Xs.A=-1;class Js{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Ys(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function Qs(e,t){return e<t?-1:e>t?1:0}function Zs(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return er.fromMillis(Date.now())}static fromDate(e){return er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new er(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qs(this.nanoseconds,e.nanoseconds):Qs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tr(e)}static min(){return new tr(new er(0,0))}static max(){return new tr(new er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function nr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ir(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class rr{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ms(),void 0===n?n=e.length-t:n>e.length-t&&Ms(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===rr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),s=t.get(i);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class or extends rr{construct(e,t,n){return new or(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new qs(Vs.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new or(t)}static emptyPath(){return new or([])}}const ar=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends rr{construct(e,t,n){return new cr(e,t,n)}static isValidIdentifier(e){return ar.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(0===n.length)throw new qs(Vs.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new qs(Vs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new qs(Vs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(r=!r,i++):"."!==t||r?(n+=t,i++):(s(),i++)}if(s(),r)throw new qs(Vs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class lr{constructor(e){this.fields=e,e.sort(cr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ur(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const hr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(e){if(Us(!!e),"string"==typeof e){let t=0;const n=hr.exec(e);if(Us(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fr(e.seconds),nanos:fr(e.nanos)}}function fr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function pr(e){return"string"==typeof e?ur.fromBase64String(e):ur.fromUint8Array(e)}function mr(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gr(e){const t=e.mapValue.fields.__previous_value__;return mr(t)?gr(t):t}function yr(e){const t=dr(e.mapValue.fields.__local_write_time__.timestampValue);return new er(t.seconds,t.nanos)}class vr{constructor(e,t,n,i,s,r,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class wr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wr&&e.projectId===this.projectId&&e.database===this.database}}function br(e){return null==e}function Ir(e){return 0===e&&1/e==-1/0}class Er{constructor(e){this.path=e}static fromPath(e){return new Er(or.fromString(e))}static fromName(e){return new Er(or.fromString(e).popFirst(5))}static empty(){return new Er(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===or.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return or.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Er(new or(e.slice()))}}function Tr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mr(e)?4:Mr(e)?9:10:Ms()}function Sr(e,t){if(e===t)return!0;const n=Tr(e);if(n!==Tr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return yr(e).isEqual(yr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=dr(e.timestampValue),i=dr(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return pr(e.bytesValue).isEqual(pr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fr(e.geoPointValue.latitude)===fr(t.geoPointValue.latitude)&&fr(e.geoPointValue.longitude)===fr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fr(e.integerValue)===fr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=fr(e.doubleValue),i=fr(t.doubleValue);return n===i?Ir(n)===Ir(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Zs(e.arrayValue.values||[],t.arrayValue.values||[],Sr);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(nr(n)!==nr(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!Sr(n[e],i[e])))return!1;return!0}(e,t);default:return Ms()}}function _r(e,t){return void 0!==(e.values||[]).find((e=>Sr(e,t)))}function kr(e,t){if(e===t)return 0;const n=Tr(e),i=Tr(t);if(n!==i)return Qs(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=fr(e.integerValue||e.doubleValue),i=fr(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Cr(e.timestampValue,t.timestampValue);case 4:return Cr(yr(e),yr(t));case 5:return Qs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=pr(e),i=pr(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=Qs(n[e],i[e]);if(0!==t)return t}return Qs(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qs(fr(e.latitude),fr(t.latitude));return 0!==n?n:Qs(fr(e.longitude),fr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=kr(n[e],i[e]);if(t)return t}return Qs(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},i=Object.keys(n),s=t.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let e=0;e<i.length&&e<r.length;++e){const t=Qs(i[e],r[e]);if(0!==t)return t;const o=kr(n[i[e]],s[r[e]]);if(0!==o)return o}return Qs(i.length,r.length)}(e.mapValue,t.mapValue);default:throw Ms()}}function Cr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qs(e,t);const n=dr(e),i=dr(t),s=Qs(n.seconds,i.seconds);return 0!==s?s:Qs(n.nanos,i.nanos)}function Ar(e){return Nr(e)}function Nr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=dr(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?pr(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Er.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Nr(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const s of t)i?i=!1:n+=",",n+=`${s}:${Nr(e.fields[s])}`;return n+"}"}(e.mapValue):Ms();var t,n}function Rr(e){return!!e&&"integerValue"in e}function Dr(e){return!!e&&"arrayValue"in e}function Lr(e){return!!e&&"nullValue"in e}function Or(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pr(e){return!!e&&"mapValue"in e}function xr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ir(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=xr(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Mr(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Pr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xr(t)}setAll(e){let t=cr.emptyPath(),n={},i=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=s.popLast()}e?n[s.lastSegment()]=xr(e):i.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());Pr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Pr(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){ir(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Ur(xr(this.value))}}function Fr(e){const t=[];return ir(e.fields,((e,n)=>{const i=new cr([e]);if(Pr(n)){const e=Fr(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new lr(t)}class Vr{constructor(e,t,n,i,s,r){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.data=s,this.documentState=r}static newInvalidDocument(e){return new Vr(e,0,tr.min(),tr.min(),Ur.empty(),0)}static newFoundDocument(e,t,n){return new Vr(e,1,t,tr.min(),n,0)}static newNoDocument(e,t){return new Vr(e,2,t,tr.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new Vr(e,3,t,tr.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function qr(e){return new jr(e.readTime,e.key,-1)}class jr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new jr(tr.min(),Er.empty(),-1)}static max(){return new jr(tr.max(),Er.empty(),-1)}}function Br(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Er.comparator(e.documentKey,t.documentKey),0!==n?n:Qs(e.largestBatchId,t.largestBatchId))}class $r{constructor(e,t=null,n=[],i=[],s=null,r=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.P=null}}function zr(e,t=null,n=[],i=[],s=null,r=null,o=null){return new $r(e,t,n,i,s,r,o)}function Hr(e){const t=Fs(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+Ar(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),br(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ar(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ar(e))).join(",")),t.P=e}return t.P}function Kr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ro(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let s=0;s<e.filters.length;s++)if(n=e.filters[s],i=t.filters[s],n.op!==i.op||!n.field.isEqual(i.field)||!Sr(n.value,i.value))return!1;var n,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ao(e.startAt,t.startAt)&&ao(e.endAt,t.endAt)}function Gr(e){return Er.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Wr extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new Xr(e,t,n):"array-contains"===t?new Zr(e,n):"in"===t?new eo(e,n):"not-in"===t?new to(e,n):"array-contains-any"===t?new no(e,n):new Wr(e,t,n)}static V(e,t,n){return"in"===t?new Yr(e,n):new Jr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(kr(t,this.value)):null!==t&&Tr(this.value)===Tr(t)&&this.v(kr(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ms()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Xr extends Wr{constructor(e,t,n){super(e,t,n),this.key=Er.fromName(n.referenceValue)}matches(e){const t=Er.comparator(e.key,this.key);return this.v(t)}}class Yr extends Wr{constructor(e,t){super(e,"in",t),this.keys=Qr(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Jr extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=Qr(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Er.fromName(e.referenceValue)))}class Zr extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dr(t)&&_r(t.arrayValue,this.value)}}class eo extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_r(this.value.arrayValue,t)}}class to extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(_r(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_r(this.value.arrayValue,t)}}class no extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dr(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_r(this.value.arrayValue,e)))}}class io{constructor(e,t){this.position=e,this.inclusive=t}}class so{constructor(e,t="asc"){this.field=e,this.dir=t}}function ro(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function oo(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],o=e.position[s];if(i=r.field.isKeyField()?Er.comparator(Er.fromName(o.referenceValue),n.key):kr(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function ao(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sr(e.position[n],t.position[n]))return!1;return!0}class co{constructor(e,t=null,n=[],i=[],s=null,r="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.D=null,this.C=null,this.startAt,this.endAt}}function lo(e){return new co(e)}function uo(e){return!br(e.limit)&&"F"===e.limitType}function ho(e){return!br(e.limit)&&"L"===e.limitType}function fo(e){const t=Fs(e);if(null===t.D){t.D=[];const e=function(e){for(const t of e.filters)if(t.S())return t.field;return null}(t),n=function(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new so(e)),t.D.push(new so(cr.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new so(cr.keyField(),e))}}}return t.D}function po(e){const t=Fs(e);if(!t.C)if("F"===t.limitType)t.C=zr(t.path,t.collectionGroup,fo(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of fo(t)){const t="desc"===n.dir?"asc":"desc";e.push(new so(n.field,t))}const n=t.endAt?new io(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new io(t.startAt.position,!t.startAt.inclusive):null;t.C=zr(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t.C}function mo(e,t){return Kr(po(e),po(t))&&e.limitType===t.limitType}function go(e){return`${Hr(po(e))}|lt:${e.limitType}`}function yo(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ar(t.value)}`;var t})).join(", ")}]`),br(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ar(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ar(e))).join(",")),`Target(${t})`}(po(e))}; limitType=${e.limitType})`}function vo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Er.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=oo(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,fo(e),t)||e.endAt&&!function(e,t,n){const i=oo(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,fo(e),t))}(e,t)}function wo(e){return(t,n)=>{let i=!1;for(const s of fo(e)){const e=bo(s,t,n);if(0!==e)return e;i=i||s.field.isKeyField()}return 0}}function bo(e,t,n){const i=e.field.isKeyField()?Er.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),s=n.data.field(e);return null!==i&&null!==s?kr(i,s):Ms()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ms()}}function Io(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ir(t)?"-0":t}}function Eo(e){return{integerValue:""+e}}function To(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Ir(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Eo(t):Io(e,t)}class So{constructor(){this._=void 0}}function _o(e,t,n){return e instanceof Ao?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof No?Ro(e,t):e instanceof Do?Lo(e,t):function(e,t){const n=Co(e,t),i=Po(n)+Po(e.k);return Rr(n)&&Rr(e.k)?Eo(i):Io(e.M,i)}(e,t)}function ko(e,t,n){return e instanceof No?Ro(e,t):e instanceof Do?Lo(e,t):n}function Co(e,t){return e instanceof Oo?Rr(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ao extends So{}class No extends So{constructor(e){super(),this.elements=e}}function Ro(e,t){const n=xo(t);for(const t of e.elements)n.some((e=>Sr(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Do extends So{constructor(e){super(),this.elements=e}}function Lo(e,t){let n=xo(t);for(const t of e.elements)n=n.filter((e=>!Sr(e,t)));return{arrayValue:{values:n}}}class Oo extends So{constructor(e,t){super(),this.M=e,this.k=t}}function Po(e){return fr(e.integerValue||e.doubleValue)}function xo(e){return Dr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Mo{constructor(e,t){this.version=e,this.transformResults=t}}class Uo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Uo}static exists(e){return new Uo(void 0,e)}static updateTime(e){return new Uo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vo{}function qo(e,t,n){e instanceof Ho?function(e,t,n){const i=e.value.clone(),s=Wo(e.fieldTransforms,t,n.transformResults);i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Ko?function(e,t,n){if(!Fo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Wo(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Go(e)),s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jo(e,t,n){e instanceof Ho?function(e,t,n){if(!Fo(e.precondition,t))return;const i=e.value.clone(),s=Xo(e.fieldTransforms,n,t);i.setAll(s),t.convertToFoundDocument(zo(t),i).setHasLocalMutations()}(e,t,n):e instanceof Ko?function(e,t,n){if(!Fo(e.precondition,t))return;const i=Xo(e.fieldTransforms,n,t),s=t.data;s.setAll(Go(e)),s.setAll(i),t.convertToFoundDocument(zo(t),s).setHasLocalMutations()}(e,t,n):function(e,t){Fo(e.precondition,t)&&t.convertToNoDocument(tr.min())}(e,t)}function Bo(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),s=Co(i.transform,e||null);null!=s&&(null==n&&(n=Ur.empty()),n.set(i.field,s))}return n||null}function $o(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof No&&t instanceof No||e instanceof Do&&t instanceof Do?Zs(e.elements,t.elements,Sr):e instanceof Oo&&t instanceof Oo?Sr(e.k,t.k):e instanceof Ao&&t instanceof Ao}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function zo(e){return e.isFoundDocument()?e.version:tr.min()}class Ho extends Vo{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}}class Ko extends Vo{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function Go(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Wo(e,t,n){const i=new Map;Us(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,ko(o,a,n[s]))}return i}function Xo(e,t,n){const i=new Map;for(const s of e){const e=s.transform,r=n.data.field(s.field);i.set(s.field,_o(e,r,t))}return i}class Yo extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Jo extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Qo{constructor(e){this.count=e}}var Zo,ea;function ta(e){if(void 0===e)return Os("GRPC error has no .code"),Vs.UNKNOWN;switch(e){case Zo.OK:return Vs.OK;case Zo.CANCELLED:return Vs.CANCELLED;case Zo.UNKNOWN:return Vs.UNKNOWN;case Zo.DEADLINE_EXCEEDED:return Vs.DEADLINE_EXCEEDED;case Zo.RESOURCE_EXHAUSTED:return Vs.RESOURCE_EXHAUSTED;case Zo.INTERNAL:return Vs.INTERNAL;case Zo.UNAVAILABLE:return Vs.UNAVAILABLE;case Zo.UNAUTHENTICATED:return Vs.UNAUTHENTICATED;case Zo.INVALID_ARGUMENT:return Vs.INVALID_ARGUMENT;case Zo.NOT_FOUND:return Vs.NOT_FOUND;case Zo.ALREADY_EXISTS:return Vs.ALREADY_EXISTS;case Zo.PERMISSION_DENIED:return Vs.PERMISSION_DENIED;case Zo.FAILED_PRECONDITION:return Vs.FAILED_PRECONDITION;case Zo.ABORTED:return Vs.ABORTED;case Zo.OUT_OF_RANGE:return Vs.OUT_OF_RANGE;case Zo.UNIMPLEMENTED:return Vs.UNIMPLEMENTED;case Zo.DATA_LOSS:return Vs.DATA_LOSS;default:return Ms()}}(ea=Zo||(Zo={}))[ea.OK=0]="OK",ea[ea.CANCELLED=1]="CANCELLED",ea[ea.UNKNOWN=2]="UNKNOWN",ea[ea.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ea[ea.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ea[ea.NOT_FOUND=5]="NOT_FOUND",ea[ea.ALREADY_EXISTS=6]="ALREADY_EXISTS",ea[ea.PERMISSION_DENIED=7]="PERMISSION_DENIED",ea[ea.UNAUTHENTICATED=16]="UNAUTHENTICATED",ea[ea.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ea[ea.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ea[ea.ABORTED=10]="ABORTED",ea[ea.OUT_OF_RANGE=11]="OUT_OF_RANGE",ea[ea.UNIMPLEMENTED=12]="UNIMPLEMENTED",ea[ea.INTERNAL=13]="INTERNAL",ea[ea.UNAVAILABLE=14]="UNAVAILABLE",ea[ea.DATA_LOSS=15]="DATA_LOSS";class na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ir(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return sr(this.inner)}size(){return this.innerSize}}class ia{constructor(e,t){this.comparator=e,this.root=t||ra.EMPTY}insert(e,t){return new ia(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ra.BLACK,null,null))}remove(e){return new ia(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ra.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sa(this.root,e,this.comparator,!0)}}class sa{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ra{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:ra.RED,this.left=null!=i?i:ra.EMPTY,this.right=null!=s?s:ra.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new ra(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ra.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ra.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ra.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ra.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ms();if(this.right.isRed())throw Ms();const e=this.left.check();if(e!==this.right.check())throw Ms();return e+(this.isRed()?0:1)}}ra.EMPTY=null,ra.RED=!0,ra.BLACK=!1,ra.EMPTY=new class{constructor(){this.size=0}get key(){throw Ms()}get value(){throw Ms()}get color(){throw Ms()}get left(){throw Ms()}get right(){throw Ms()}copy(e,t,n,i,s){return this}insert(e,t,n){return new ra(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oa{constructor(e){this.comparator=e,this.data=new ia(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aa(this.data.getIterator())}getIteratorFrom(e){return new aa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof oa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new oa(this.comparator);return t.data=e,t}}class aa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ca=new ia(Er.comparator);function la(){return ca}const ua=new ia(Er.comparator);function ha(){return ua}function da(){return new na((e=>e.toString()),((e,t)=>e.isEqual(t)))}const fa=new ia(Er.comparator),pa=new oa(Er.comparator);function ma(...e){let t=pa;for(const n of e)t=t.add(n);return t}const ga=new oa(Qs);function ya(){return ga}class va{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,wa.createSynthesizedTargetChangeForCurrentChange(e,t)),new va(tr.min(),n,ya(),la(),ma())}}class wa{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new wa(ur.EMPTY_BYTE_STRING,t,ma(),ma(),ma())}}class ba{constructor(e,t,n,i){this.O=e,this.removedTargetIds=t,this.key=n,this.F=i}}class Ia{constructor(e,t){this.targetId=e,this.$=t}}class Ea{constructor(e,t,n=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Ta{constructor(){this.B=0,this.L=ka(),this.U=ur.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=ma(),t=ma(),n=ma();return this.L.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ms()}})),new wa(this.U,this.q,e,t,n)}J(){this.G=!1,this.L=ka()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Sa{constructor(e){this.nt=e,this.st=new Map,this.it=la(),this.rt=_a(),this.ot=new oa(Qs)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,(t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.K||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.K||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:Ms()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(((e,n)=>{this.ft(n)&&t(n)}))}_t(e){const t=e.targetId,n=e.$.count,i=this.wt(t);if(i){const e=i.target;if(Gr(e))if(0===n){const n=new Er(e.path);this.ct(t,n,Vr.newNoDocument(n,tr.min()))}else Us(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach(((n,i)=>{const s=this.wt(i);if(s){if(n.current&&Gr(s.target)){const t=new Er(s.target.path);null!==this.it.get(t)||this.It(i,t)||this.ct(i,t,Vr.newNoDocument(t,e))}n.j&&(t.set(i,n.H()),n.J())}}));let n=ma();this.rt.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.it.forEach(((t,n)=>n.setReadTime(e)));const i=new va(e,t,this.ot,this.it,n);return this.it=la(),this.rt=_a(),this.ot=new oa(Qs),i}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ta,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new oa(Qs),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ls("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ta),this.nt.getRemoteKeysForTarget(e).forEach((t=>{this.ct(e,t,null)}))}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function _a(){return new ia(Er.comparator)}function ka(){return new ia(Er.comparator)}const Ca={asc:"ASCENDING",desc:"DESCENDING"},Aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Na{constructor(e,t){this.databaseId=e,this.N=t}}function Ra(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Da(e,t){return e.N?t.toBase64():t.toUint8Array()}function La(e,t){return Ra(e,t.toTimestamp())}function Oa(e){return Us(!!e),tr.fromTimestamp(function(e){const t=dr(e);return new er(t.seconds,t.nanos)}(e))}function Pa(e,t){return function(e){return new or(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xa(e){const t=or.fromString(e);return Us(Za(t)),t}function Ma(e,t){return Pa(e.databaseId,t.path)}function Ua(e,t){const n=xa(t);if(n.get(1)!==e.databaseId.projectId)throw new qs(Vs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new qs(Vs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Er(qa(n))}function Fa(e,t){return Pa(e.databaseId,t)}function Va(e){return new or(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qa(e){return Us(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ja(e,t,n){return{name:Ma(e,t),fields:n.value.mapValue.fields}}function Ba(e,t){return{documents:[Fa(e,t.path)]}}function $a(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=Fa(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Fa(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Or(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NAN"}};if(Lr(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Or(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NAN"}};if(Lr(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(e.field),op:Ga(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);s&&(n.structuredQuery.where=s);const r=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Wa(e.field),direction:Ka(e.dir)}}(e)))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(e,t){return e.N||br(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function za(e){let t=function(e){const t=xa(e);return 4===t.length?or.emptyPath():qa(t)}(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Us(1===i);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=Ha(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new so(Xa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,br(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new io(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new io(n,t)}(n.endAt)),function(e,t,n,i,s,r,o,a){return new co(e,t,n,i,s,r,o,a)}(t,s,o,r,a,"F",c,l)}function Ha(e){return e?void 0!==e.unaryFilter?[Ja(e)]:void 0!==e.fieldFilter?[Ya(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Ha(e))).reduce(((e,t)=>e.concat(t))):Ms():[]}function Ka(e){return Ca[e]}function Ga(e){return Aa[e]}function Wa(e){return{fieldPath:e.canonicalString()}}function Xa(e){return cr.fromServerFormat(e.fieldPath)}function Ya(e){return Wr.create(Xa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ms()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ja(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xa(e.unaryFilter.field);return Wr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Xa(e.unaryFilter.field);return Wr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xa(e.unaryFilter.field);return Wr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xa(e.unaryFilter.field);return Wr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ms()}}function Qa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Za(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ec{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ms(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ec(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ec?t:ec.resolve(t)}catch(e){return ec.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ec.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ec.reject(t)}static resolve(e){return new ec(((t,n)=>{t(e)}))}static reject(e){return new ec(((t,n)=>{n(e)}))}static waitFor(e){return new ec(((t,n)=>{let i=0,s=0,r=!1;e.forEach((e=>{++i,e.next((()=>{++s,r&&s===i&&t()}),(e=>n(e)))})),r=!0,s===i&&t()}))}static or(e){let t=ec.resolve(!1);for(const n of e)t=t.next((e=>e?ec.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}}function tc(e){return"IndexedDbTransactionError"===e.name}class nc{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&qo(i,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&jo(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&jo(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(tr.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ma())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,((e,t)=>$o(e,t)))&&Zs(this.baseMutations,e.baseMutations,((e,t)=>$o(e,t)))}}class ic{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Us(e.mutations.length===n.length);let i=fa;const s=e.mutations;for(let e=0;e<s.length;e++)i=i.insert(s[e].key,n[e].version);return new ic(e,t,n,i)}}class sc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rc{constructor(e,t,n,i,s=tr.min(),r=tr.min(),o=ur.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oc{constructor(e){this.Jt=e}}function ac(e){const t=za({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?function(e,t,n){return new co(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}(t,t.limit,"L"):t}class cc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(fr(e.integerValue));else if("doubleValue"in e){const n=fr(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Ir(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(pr(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?Mr(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ms()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const e of Object.keys(n))this.re(e,t),this.te(n[e],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const e of n)this.te(e,t)}ae(e,t){this.ne(t,37),Er.fromName(e).path.forEach((e=>{this.ne(t,60),this.le(e,t)}))}ne(e,t){e.se(t)}oe(e){e.se(2)}}cc.fe=new cc;class lc{constructor(){this.qe=new uc}addToCollectionParentIndex(e,t){return this.qe.add(t),ec.resolve()}getCollectionParents(e,t){return ec.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ec.resolve()}deleteFieldIndex(e,t){return ec.resolve()}getDocumentsMatchingTarget(e,t){return ec.resolve(null)}getFieldIndex(e,t){return ec.resolve(null)}getFieldIndexes(e,t){return ec.resolve([])}getNextCollectionGroupToUpdate(e){return ec.resolve(null)}updateCollectionGroup(e,t,n){return ec.resolve()}updateIndexEntries(e,t){return ec.resolve()}}class uc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new oa(or.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new oa(or.comparator)).toArray()}}new Uint8Array(0);class hc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new hc(e,hc.DEFAULT_COLLECTION_PERCENTILE,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}hc.DEFAULT_COLLECTION_PERCENTILE=10,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hc.DEFAULT=new hc(41943040,hc.DEFAULT_COLLECTION_PERCENTILE,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hc.DISABLED=new hc(-1,0,0);class dc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new dc(0)}static gn(){return new dc(-1)}}async function fc(e){if(e.code!==Vs.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Ls("LocalStore","Unexpectedly lost primary lease")}class pc{constructor(e,t,n){this.fs=e,this.$s=t,this.indexManager=n}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.Ls(e,t,n)))}Ls(e,t,n){return this.fs.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Us(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}qs(e,t){return this.fs.getEntries(e,t).next((t=>this.Gs(e,t).next((()=>t))))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Us(t,e)))}Ks(e,t,n){return function(e){return Er.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.js(e,t,n):this.Ws(e,t,n)}Qs(e,t){return this.Bs(e,new Er(t)).next((e=>{let t=ha();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}js(e,t,n){const i=t.collectionGroup;let s=ha();return this.indexManager.getCollectionParents(e,i).next((r=>ec.forEach(r,(r=>{const o=function(e,t){return new co(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,r.child(i));return this.Ws(e,o,n).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}Ws(e,t,n){let i;return this.fs.getAllFromCollection(e,t.path,n).next((n=>(i=n,this.$s.getAllMutationBatchesAffectingQuery(e,t)))).next((e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let s=i.get(n);null==s&&(s=Vr.newInvalidDocument(n),i=i.insert(n,s)),jo(e,s,t.localWriteTime),s.isFoundDocument()||(i=i.remove(n))}})).next((()=>(i.forEach(((e,n)=>{vo(t,n)||(i=i.remove(e))})),i)))}}class mc{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.zs=n,this.Hs=i}static Js(e,t){let n=ma(),i=ma();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new mc(e,t.fromCache,n,i)}}class gc{Ys(e){this.Xs=e}Ks(e,t,n,i){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(tr.min())?this.Zs(e,t):this.Xs.qs(e,i).next((s=>{const r=this.ti(t,s);return(uo(t)||ho(t))&&this.ei(t.limitType,r,i,n)?this.Zs(e,t):(Ds()<=V.DEBUG&&Ls("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yo(t)),this.Xs.Ks(e,t,function(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=tr.fromTimestamp(1e9===i?new er(n+1,0):new er(n,i));return new jr(s,Er.empty(),t)}(n,-1)).next((e=>(r.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}ti(e,t){let n=new oa(wo(e));return t.forEach(((t,i)=>{vo(e,i)&&(n=n.add(i))})),n}ei(e,t,n,i){if(n.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zs(e,t){return Ds()<=V.DEBUG&&Ls("QueryEngine","Using full collection scan to execute query:",yo(t)),this.Xs.Ks(e,t,jr.min())}}class yc{constructor(e,t,n,i){this.persistence=e,this.ni=t,this.M=i,this.si=new ia(Qs),this.ii=new na((e=>Hr(e)),Kr),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(n)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new pc(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.si)))}}async function vc(e,t){const n=Fs(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.$s.getAllMutationBatches(e).next((s=>(i=s,n.ui(t),n.$s.getAllMutationBatches(e)))).next((t=>{const s=[],r=[];let o=ma();for(const e of i){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.ai.qs(e,o).next((e=>({ci:e,removedBatchIds:s,addedBatchIds:r})))}))}))}function wc(e){const t=Fs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ls.getLastRemoteSnapshotVersion(e)))}function bc(e,t){const n=Fs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t))))}async function Ic(e,t,n){const i=Fs(e),s=i.si.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(e=>i.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!tc(e))throw e;Ls("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.si=i.si.remove(t),i.ii.delete(s.target)}function Ec(e,t,n){const i=Fs(e);let s=tr.min(),r=ma();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=Fs(e),s=i.ii.get(n);return void 0!==s?ec.resolve(i.si.get(s)):i.ls.getTargetData(t,n)}(i,e,po(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,i.ls.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>i.ni.Ks(e,t,n?s:tr.min(),n?r:ma()))).next((e=>(function(e,t,n){let i=tr.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.ri.set(t,i)}(i,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hi:r})))))}class Tc{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ec.resolve(this._i.get(t))}saveBundleMetadata(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:Oa(n.createTime)}),ec.resolve()}getNamedQuery(e,t){return ec.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:ac(e.bundledQuery),readTime:Oa(e.readTime)}}(t)),ec.resolve()}}class Sc{constructor(){this.overlays=new ia(Er.comparator),this.mi=new Map}getOverlay(e,t){return ec.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.Xt(e,t,i)})),ec.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.mi.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.mi.delete(n)),ec.resolve()}getOverlaysForCollection(e,t,n){const i=da(),s=t.length+1,r=new Er(t.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const e=o.getNext().value,r=e.getKey();if(!t.isPrefixOf(r.path))break;r.path.length===s&&e.largestBatchId>n&&i.set(e.getKey(),e)}return ec.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new ia(((e,t)=>e-t));const r=this.overlays.getIterator();for(;r.hasNext();){const e=r.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=da(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=da(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return ec.resolve(o)}Xt(e,t,n){if(null===n)return;const i=this.overlays.get(n.key);if(null!==i){const e=this.mi.get(i.largestBatchId).delete(n.key);this.mi.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new sc(t,n));let s=this.mi.get(t);void 0===s&&(s=ma(),this.mi.set(t,s)),this.mi.set(t,s.add(n.key))}}class _c{constructor(){this.gi=new oa(kc.yi),this.pi=new oa(kc.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const n=new kc(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}Ti(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ei(new kc(e,t))}Ai(e,t){e.forEach((e=>this.removeReference(e,t)))}Ri(e){const t=new Er(new or([])),n=new kc(t,e),i=new kc(t,e+1),s=[];return this.pi.forEachInRange([n,i],(e=>{this.Ei(e),s.push(e.key)})),s}bi(){this.gi.forEach((e=>this.Ei(e)))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Er(new or([])),n=new kc(t,e),i=new kc(t,e+1);let s=ma();return this.pi.forEachInRange([n,i],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new kc(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class kc{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Er.comparator(e.key,t.key)||Qs(e.Vi,t.Vi)}static Ii(e,t){return Qs(e.Vi,t.Vi)||Er.comparator(e.key,t.key)}}class Cc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new oa(kc.yi)}checkEmpty(e){return ec.resolve(0===this.$s.length)}addMutationBatch(e,t,n,i){const s=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];const r=new nc(s,t,n,i);this.$s.push(r);for(const t of i)this.Si=this.Si.add(new kc(t.key,s)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ec.resolve(r)}lookupMutationBatch(e,t){return ec.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Ci(n),s=i<0?0:i;return ec.resolve(this.$s.length>s?this.$s[s]:null)}getHighestUnacknowledgedBatchId(){return ec.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ec.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kc(t,0),i=new kc(t,Number.POSITIVE_INFINITY),s=[];return this.Si.forEachInRange([n,i],(e=>{const t=this.Di(e.Vi);s.push(t)})),ec.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new oa(Qs);return t.forEach((e=>{const t=new kc(e,0),i=new kc(e,Number.POSITIVE_INFINITY);this.Si.forEachInRange([t,i],(e=>{n=n.add(e.Vi)}))})),ec.resolve(this.xi(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;Er.isDocumentKey(s)||(s=s.child(""));const r=new kc(new Er(s),0);let o=new oa(Qs);return this.Si.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.Vi)),!0)}),r),ec.resolve(this.xi(o))}xi(e){const t=[];return e.forEach((e=>{const n=this.Di(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Us(0===this.Ni(t.batchId,"removed")),this.$s.shift();let n=this.Si;return ec.forEach(t.mutations,(i=>{const s=new kc(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Si=n}))}dn(e){}containsKey(e,t){const n=new kc(t,0),i=this.Si.firstAfterOrEqual(n);return ec.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.$s.length,ec.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Ac{constructor(e){this.ki=e,this.docs=new ia(Er.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,r=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ec.resolve(n?n.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let n=la();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vr.newInvalidDocument(e))})),ec.resolve(n)}getAllFromCollection(e,t,n){let i=la();const s=new Er(t.child("")),r=this.docs.getIteratorFrom(s);for(;r.hasNext();){const{key:e,value:{document:s}}=r.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||Br(qr(s),n)<=0||(i=i.insert(s.key,s.mutableCopy()))}return ec.resolve(i)}getAllFromCollectionGroup(e,t,n,i){Ms()}Mi(e,t){return ec.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Nc(this)}getSize(e){return ec.resolve(this.size)}}class Nc extends class{constructor(){this.changes=new na((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ec.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(n)})),ec.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Rc{constructor(e){this.persistence=e,this.Oi=new na((e=>Hr(e)),Kr),this.lastRemoteSnapshotVersion=tr.min(),this.highestTargetId=0,this.Fi=0,this.$i=new _c,this.targetCount=0,this.Bi=dc.mn()}forEachTarget(e,t){return this.Oi.forEach(((e,n)=>t(n))),ec.resolve()}getLastRemoteSnapshotVersion(e){return ec.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ec.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ec.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),ec.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new dc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ec.resolve()}updateTargetData(e,t){return this.In(t),ec.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ec.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Oi.forEach(((r,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Oi.delete(r),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),ec.waitFor(s).next((()=>i))}getTargetCount(e){return ec.resolve(this.targetCount)}getTargetData(e,t){const n=this.Oi.get(t)||null;return ec.resolve(n)}addMatchingKeys(e,t,n){return this.$i.Ti(t,n),ec.resolve()}removeMatchingKeys(e,t,n){this.$i.Ai(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((t=>{s.push(i.markPotentiallyOrphaned(e,t))})),ec.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ec.resolve()}getMatchingKeysForTargetId(e,t){const n=this.$i.Pi(t);return ec.resolve(n)}containsKey(e,t){return ec.resolve(this.$i.containsKey(t))}}class Dc{constructor(e,t){this.Li={},this.overlays={},this.ts=new Xs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Rc(this),this.indexManager=new lc,this.fs=function(e){return new Ac(e)}((e=>this.referenceDelegate.Ui(e))),this.M=new oc(t),this.ds=new Tc(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Li[e.toKey()];return n||(n=new Cc(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,n){Ls("MemoryPersistence","Starting transaction:",e);const i=new Lc(this.ts.next());return this.referenceDelegate.qi(),n(i).next((e=>this.referenceDelegate.Gi(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Ki(e,t){return ec.or(Object.values(this.Li).map((n=>()=>n.containsKey(e,t))))}}class Lc extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}{constructor(e){super(),this.currentSequenceNumber=e}}class Oc{constructor(e){this.persistence=e,this.Qi=new _c,this.ji=null}static Wi(e){return new Oc(e)}get zi(){if(this.ji)return this.ji;throw Ms()}addReference(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),ec.resolve()}removeReference(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),ec.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ec.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach((e=>this.zi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.zi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ec.forEach(this.zi,(n=>{const i=Er.fromPath(n);return this.Hi(e,i).next((e=>{e||t.removeEntry(i,tr.min())}))})).next((()=>(this.ji=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hi(e,t).next((e=>{e?this.zi.delete(t.toString()):this.zi.add(t.toString())}))}Ui(e){return 0}Hi(e,t){return ec.or([()=>ec.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}class Pc{constructor(){this.activeTargetIds=ya()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xc{constructor(){this.Fr=new Pc,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,n){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Pc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mc{Br(e){}shutdown(){}}class Uc{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ls("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ls("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Fc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Vc{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class qc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.so=t+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,n,i,s){const r=this.oo(e,t);Ls("RestConnection","Sending: ",r,n);const o={};return this.uo(o,i,s),this.ao(e,r,o,n).then((e=>(Ls("RestConnection","Received: ",e),e)),(t=>{throw Ps("RestConnection",`${e} failed with error: `,t,"url: ",r,"request:",n),t}))}co(e,t,n,i,s){return this.ro(e,t,n,i,s)}uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ns,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}oo(e,t){const n=Fc[e];return`${this.so}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,n,i){return new Promise(((s,r)=>{const o=new ks;o.listenOnce(Is.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case bs.NO_ERROR:const t=o.getResponseJson();Ls("Connection","XHR received:",JSON.stringify(t)),s(t);break;case bs.TIMEOUT:Ls("Connection",'RPC "'+e+'" timed out'),r(new qs(Vs.DEADLINE_EXCEEDED,"Request time out"));break;case bs.HTTP_ERROR:const n=o.getStatus();if(Ls("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Vs).indexOf(t)>=0?t:Vs.UNKNOWN}(e.status);r(new qs(t,e.message))}else r(new qs(Vs.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new qs(Vs.UNAVAILABLE,"Connection failed."));break;default:Ms()}}finally{Ls("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(i);o.send(t,"POST",a,n,15)}))}ho(e,t,n){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vs(),r=ws(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ss({})),this.uo(o.initMessageHeaders,t,n),p()||g()||f().indexOf("Electron/")>=0||y()||f().indexOf("MSAppHost/")>=0||m()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=i.join("");Ls("Connection","Creating WebChannel: "+a,o);const c=s.createWebChannel(a,o);let l=!1,u=!1;const h=new Vc({jr:e=>{u?Ls("Connection","Not sending because WebChannel is closed:",e):(l||(Ls("Connection","Opening WebChannel transport."),c.open(),l=!0),Ls("Connection","WebChannel sending:",e),c.send(e))},Wr:()=>c.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(c,_s.EventType.OPEN,(()=>{u||Ls("Connection","WebChannel transport opened.")})),d(c,_s.EventType.CLOSE,(()=>{u||(u=!0,Ls("Connection","WebChannel transport closed"),h.eo())})),d(c,_s.EventType.ERROR,(e=>{u||(u=!0,Ps("Connection","WebChannel transport errored:",e),h.eo(new qs(Vs.UNAVAILABLE,"The operation could not be completed")))})),d(c,_s.EventType.MESSAGE,(e=>{var t;if(!u){const n=e.data[0];Us(!!n);const i=n,s=i.error||(null===(t=i[0])||void 0===t?void 0:t.error);if(s){Ls("Connection","WebChannel received error:",s);const e=s.status;let t=function(e){const t=Zo[e];if(void 0!==t)return ta(t)}(e),n=s.message;void 0===t&&(t=Vs.INTERNAL,n="Unknown error status: "+e+" with message "+s.message),u=!0,h.eo(new qs(t,n)),c.close()}else Ls("Connection","WebChannel received:",n),h.no(n)}})),d(r,Es.STAT_EVENT,(e=>{e.stat===Ts.PROXY?Ls("Connection","Detected buffering proxy"):e.stat===Ts.NOPROXY&&Ls("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.Zr()}),0),h}}function jc(){return"undefined"!=typeof document?document:null}function Bc(e){return new Na(e,!0)}class $c{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Jn=e,this.timerId=t,this.lo=n,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-n);i>0&&Ls("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(()=>(this.yo=Date.now(),e()))),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class zc{constructor(e,t,n,i,s,r,o,a){this.Jn=e,this.Ao=n,this.Ro=i,this.bo=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new $c(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(()=>this.Mo())))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}async close(e,t){this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==e?this.So.reset():t&&t.code===Vs.RESOURCE_EXHAUSTED?(Os(t.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):t&&t.code===Vs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(t)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Po===t&&this.Uo(e,n)}),(t=>{e((()=>{const e=new qs(Vs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.qo(e)}))}))}Uo(e,t){const n=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((()=>{n((()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,(()=>(this.Co()&&(this.state=3),Promise.resolve()))),this.listener.zr())))})),this.stream.Jr((e=>{n((()=>this.qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}xo(){this.state=5,this.So.Io((async()=>{this.state=0,this.start()}))}qo(e){return Ls("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget((()=>this.Po===e?t():(Ls("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hc extends zc{constructor(e,t,n,i,s,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,r),this.M=s}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ms()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(e,t){return e.N?(Us(void 0===t||"string"==typeof t),ur.fromBase64String(t||"")):(Us(void 0===t||t instanceof Uint8Array),ur.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Vs.UNKNOWN:ta(e.code);return new qs(t,e.message||"")}(o);n=new Ea(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ua(e,i.document.name),r=Oa(i.document.updateTime),o=new Ur({mapValue:{fields:i.document.fields}}),a=Vr.newFoundDocument(s,r,o),c=i.targetIds||[],l=i.removedTargetIds||[];n=new ba(c,l,a.key,a)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Ua(e,i.document),r=i.readTime?Oa(i.readTime):tr.min(),o=Vr.newNoDocument(s,r),a=i.removedTargetIds||[];n=new ba([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Ua(e,i.document),r=i.removedTargetIds||[];n=new ba([],r,s,null)}else{if(!("filter"in t))return Ms();{t.filter;const e=t.filter;e.targetId;const i=e.count||0,s=new Qo(i),r=e.targetId;n=new Ia(r,s)}}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return tr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?tr.min():t.readTime?Oa(t.readTime):tr.min()}(e);return this.listener.Ko(t,n)}Qo(e){const t={};t.database=Va(this.M),t.addTarget=function(e,t){let n;const i=t.target;return n=Gr(i)?{documents:Ba(e,i)}:{query:$a(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Da(e,t.resumeToken):t.snapshotVersion.compareTo(tr.min())>0&&(n.readTime=Ra(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ms()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}jo(e){const t={};t.database=Va(this.M),t.removeTarget=e,this.Oo(t)}}class Kc extends zc{constructor(e,t,n,i,s,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,r),this.M=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Us(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(e,t){return e&&e.length>0?(Us(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Oa(e.updateTime):Oa(t);return n.isEqual(tr.min())&&(n=Oa(t)),new Mo(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Oa(e.commitTime);return this.listener.Jo(n,t)}return Us(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Va(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Ho)n={update:ja(e,t.key,t.value)};else if(t instanceof Yo)n={delete:Ma(e,t.key)};else if(t instanceof Ko)n={update:ja(e,t.key,t.data),updateMask:Qa(t.fieldMask)};else{if(!(t instanceof Jo))return Ms();n={verify:Ma(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ao)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof No)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Do)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Oo)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ms()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:La(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ms()}(e,t.precondition)),n}(this.M,e)))};this.Oo(t)}}class Gc extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new qs(Vs.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.bo.ro(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qs(Vs.UNKNOWN,e.toString())}))}co(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.bo.co(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qs(Vs.UNKNOWN,e.toString())}))}terminate(){this.Zo=!0}}class Wc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve()))))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Os(t),this.su=!1):Ls("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Xc{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br((e=>{n.enqueueAndForget((async()=>{sl(this)&&(Ls("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Fs(e);t.lu.add(4),await Jc(t),t._u.set("Unknown"),t.lu.delete(4),await Yc(t)}(this))}))})),this._u=new Wc(n,i)}}async function Yc(e){if(sl(e))for(const t of e.fu)await t(!0)}async function Jc(e){for(const t of e.fu)await t(!1)}function Qc(e,t){const n=Fs(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),il(n)?nl(n):Il(n).Co()&&el(n,t))}function Zc(e,t){const n=Fs(e),i=Il(n);n.hu.delete(t),i.Co()&&tl(n,t),0===n.hu.size&&(i.Co()?i.ko():sl(n)&&n._u.set("Unknown"))}function el(e,t){e.wu.Z(t.targetId),Il(e).Qo(t)}function tl(e,t){e.wu.Z(t),Il(e).jo(t)}function nl(e){e.wu=new Sa({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.hu.get(t)||null}),Il(e).start(),e._u.iu()}function il(e){return sl(e)&&!Il(e).Do()&&e.hu.size>0}function sl(e){return 0===Fs(e).lu.size}function rl(e){e.wu=void 0}async function ol(e){e.hu.forEach(((t,n)=>{el(e,t)}))}async function al(e,t){rl(e),il(e)?(e._u.uu(t),nl(e)):e._u.set("Unknown")}async function cl(e,t,n){if(e._u.set("Online"),t instanceof Ea&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.hu.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.hu.delete(i),e.wu.removeTarget(i))}(e,t)}catch(n){Ls("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ll(e,n)}else if(t instanceof ba?e.wu.ut(t):t instanceof Ia?e.wu._t(t):e.wu.ht(t),!n.isEqual(tr.min()))try{const t=await wc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.wu.yt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.hu.get(i);s&&e.hu.set(i,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.hu.get(t);if(!n)return;e.hu.set(t,n.withResumeToken(ur.EMPTY_BYTE_STRING,n.snapshotVersion)),tl(e,t);const i=new rc(n.target,t,1,n.sequenceNumber);el(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ls("RemoteStore","Failed to raise snapshot:",t),await ll(e,t)}}async function ll(e,t,n){if(!tc(t))throw t;e.lu.add(1),await Jc(e),e._u.set("Offline"),n||(n=()=>wc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ls("RemoteStore","Retrying IndexedDB access"),await n(),e.lu.delete(1),await Yc(e)}))}function ul(e,t){return t().catch((n=>ll(e,n,t)))}async function hl(e){const t=Fs(e),n=El(t);let i=t.cu.length>0?t.cu[t.cu.length-1].batchId:-1;for(;dl(t);)try{const e=await bc(t.localStore,i);if(null===e){0===t.cu.length&&n.ko();break}i=e.batchId,fl(t,e)}catch(e){await ll(t,e)}pl(t)&&ml(t)}function dl(e){return sl(e)&&e.cu.length<10}function fl(e,t){e.cu.push(t);const n=El(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function pl(e){return sl(e)&&!El(e).Do()&&e.cu.length>0}function ml(e){El(e).start()}async function gl(e){El(e).Xo()}async function yl(e){const t=El(e);for(const n of e.cu)t.Ho(n.mutations)}async function vl(e,t,n){const i=e.cu.shift(),s=ic.from(i,t,n);await ul(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await hl(e)}async function wl(e,t){t&&El(e).zo&&await async function(e,t){if(function(e){switch(e){default:return Ms();case Vs.CANCELLED:case Vs.UNKNOWN:case Vs.DEADLINE_EXCEEDED:case Vs.RESOURCE_EXHAUSTED:case Vs.INTERNAL:case Vs.UNAVAILABLE:case Vs.UNAUTHENTICATED:return!1;case Vs.INVALID_ARGUMENT:case Vs.NOT_FOUND:case Vs.ALREADY_EXISTS:case Vs.PERMISSION_DENIED:case Vs.FAILED_PRECONDITION:case Vs.ABORTED:case Vs.OUT_OF_RANGE:case Vs.UNIMPLEMENTED:case Vs.DATA_LOSS:return!0}}(n=t.code)&&n!==Vs.ABORTED){const n=e.cu.shift();El(e).No(),await ul(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await hl(e)}var n}(e,t),pl(e)&&ml(e)}async function bl(e,t){const n=Fs(e);n.asyncQueue.verifyOperationInProgress(),Ls("RemoteStore","RemoteStore received new credentials");const i=sl(n);n.lu.add(3),await Jc(n),i&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.lu.delete(3),await Yc(n)}function Il(e){return e.mu||(e.mu=function(e,t,n){const i=Fs(e);return i.tu(),new Hc(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(e.datastore,e.asyncQueue,{zr:ol.bind(null,e),Jr:al.bind(null,e),Ko:cl.bind(null,e)}),e.fu.push((async t=>{t?(e.mu.No(),il(e)?nl(e):e._u.set("Unknown")):(await e.mu.stop(),rl(e))}))),e.mu}function El(e){return e.gu||(e.gu=function(e,t,n){const i=Fs(e);return i.tu(),new Kc(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(e.datastore,e.asyncQueue,{zr:gl.bind(null,e),Jr:wl.bind(null,e),Yo:yl.bind(null,e),Jo:vl.bind(null,e)}),e.fu.push((async t=>{t?(e.gu.No(),await hl(e)):(await e.gu.stop(),e.cu.length>0&&(Ls("RemoteStore",`Stopping write stream with ${e.cu.length} pending writes`),e.cu=[]))}))),e.gu}class Tl{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,s){const r=Date.now()+n,o=new Tl(e,t,r,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qs(Vs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sl(e,t){if(Os("AsyncQueue",`${t}: ${e}`),tc(e))return new qs(Vs.UNAVAILABLE,`${t}: ${e}`);throw e}class _l{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Er.comparator(t.key,n.key):(e,t)=>Er.comparator(e.key,t.key),this.keyedMap=ha(),this.sortedSet=new ia(this.comparator)}static emptySet(e){return new _l(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _l))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new _l;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class kl{constructor(){this.yu=new ia(Er.comparator)}track(e){const t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ms():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Cl{constructor(e,t,n,i,s,r,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Cl(e,t,_l.emptySet(t),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Al{constructor(){this.Iu=void 0,this.listeners=[]}}class Nl{constructor(){this.queries=new na((e=>go(e)),mo),this.onlineState="Unknown",this.Tu=new Set}}function Rl(e,t){const n=Fs(e);let i=!1;for(const e of t){const t=e.query,s=n.queries.get(t);if(s){for(const t of s.listeners)t.Au(e)&&(i=!0);s.Iu=e}}i&&Ll(n)}function Dl(e,t,n){const i=Fs(e),s=i.queries.get(t);if(s)for(const e of s.listeners)e.onError(n);i.queries.delete(t)}function Ll(e){e.Tu.forEach((e=>{e.next()}))}class Ol{constructor(e,t,n){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Cl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.Du&&n||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){if(e.docChanges.length>0)return!0;const t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Su(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Pl{constructor(e){this.key=e}}class xl{constructor(e){this.key=e}}class Ml{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=ma(),this.mutatedKeys=ma(),this.Lu=wo(e),this.Uu=new _l(this.Lu)}get qu(){return this.Fu}Gu(e,t){const n=t?t.Ku:new kl,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,r=i,o=!1;const a=uo(this.query)&&i.size===this.query.limit?i.last():null,c=ho(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const l=i.get(e),u=vo(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Qu(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Lu(u,a)>0||c&&this.Lu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(r=r.add(u),s=d?s.add(e):s.delete(e)):(r=r.delete(e),s=s.delete(e)))})),uo(this.query)||ho(this.query))for(;r.size>this.query.limit;){const e=uo(this.query)?r.last():r.first();r=r.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Uu:r,Ku:n,ei:o,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Ku.pu();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ms()}};return n(e)-n(t)}(e.type,t.type)||this.Lu(e.doc,t.doc))),this.ju(n);const r=t?this.Wu():[],o=0===this.Bu.size&&this.current?1:0,a=o!==this.$u;return this.$u=o,0!==s.length||a?{snapshot:new Cl(this.query,e.Uu,i,s,e.mutatedKeys,0===o,a,!1),zu:r}:{zu:r}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new kl,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach((e=>this.Fu=this.Fu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Fu=this.Fu.delete(e))),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=ma(),this.Uu.forEach((e=>{this.Hu(e.key)&&(this.Bu=this.Bu.add(e.key))}));const t=[];return e.forEach((e=>{this.Bu.has(e)||t.push(new xl(e))})),this.Bu.forEach((n=>{e.has(n)||t.push(new Pl(n))})),t}Ju(e){this.Fu=e.hi,this.Bu=ma();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Cl.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Ul{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Fl{constructor(e){this.key=e,this.Xu=!1}}class Vl{constructor(e,t,n,i,s,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Zu={},this.ta=new na((e=>go(e)),mo),this.ea=new Map,this.na=new Set,this.sa=new ia(Er.comparator),this.ia=new Map,this.ra=new _c,this.oa={},this.ua=new Map,this.aa=dc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}async function ql(e,t){const n=function(e){const t=Fs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zl.bind(null,t),t.Zu.Ko=Rl.bind(null,t.eventManager),t.Zu.la=Dl.bind(null,t.eventManager),t}(e);let i,s;const r=n.ta.get(t);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.Yu();else{const e=await function(e,t){const n=Fs(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.ls.getTargetData(e,t).next((s=>s?(i=s,ec.resolve(i)):n.ls.allocateTargetId(e).next((s=>(i=new rc(t,s,0,e.currentSequenceNumber),n.ls.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.si.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}(n.localStore,po(t));n.isPrimaryClient&&Qc(n.remoteStore,e);const r=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,s=await async function(e,t,n,i){e.ha=(t,n,i)=>async function(e,t,n,i){let s=t.view.Gu(n);s.ei&&(s=await Ec(e.localStore,t.query,!1).then((({documents:e})=>t.view.Gu(e,s))));const r=i&&i.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,r);return Jl(e,t.targetId,o.zu),o.snapshot}(e,t,n,i);const s=await Ec(e.localStore,t,!0),r=new Ml(t,s.hi),o=r.Gu(s.documents),a=wa.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),c=r.applyChanges(o,e.isPrimaryClient,a);Jl(e,n,c.zu);const l=new Ul(t,n,r);return e.ta.set(t,l),e.ea.has(n)?e.ea.get(n).push(t):e.ea.set(n,[t]),c.snapshot}(n,t,i,"current"===r)}return s}async function jl(e,t){const n=Fs(e),i=n.ta.get(t),s=n.ea.get(i.targetId);if(s.length>1)return n.ea.set(i.targetId,s.filter((e=>!mo(e,t)))),void n.ta.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ic(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Zc(n.remoteStore,i.targetId),Xl(n,i.targetId)})).catch(fc)):(Xl(n,i.targetId),await Ic(n.localStore,i.targetId,!0))}async function Bl(e,t){const n=Fs(e);try{const e=await function(e,t){const n=Fs(e),i=t.snapshotVersion;let s=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.oi.newChangeBuffer({trackRemovals:!0});s=n.si;const o=[];t.targetChanges.forEach(((r,a)=>{const c=s.get(a);if(!c)return;o.push(n.ls.removeMatchingKeys(e,r.removedDocuments,a).next((()=>n.ls.addMatchingKeys(e,r.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?l=l.withResumeToken(ur.EMPTY_BYTE_STRING,tr.min()).withLastLimboFreeSnapshotVersion(tr.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,r)&&o.push(n.ls.updateTargetData(e,l))}));let a=la();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(function(e,t,n){let i=ma();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=la();return n.forEach(((n,s)=>{const r=e.get(n);s.isNoDocument()&&s.version.isEqual(tr.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!r.isValidDocument()||s.version.compareTo(r.version)>0||0===s.version.compareTo(r.version)&&r.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):Ls("LocalStore","Ignoring outdated watch update for ",n,". Current version:",r.version," Watch version:",s.version)})),i}))}(e,r,t.documentUpdates).next((e=>{a=e}))),!i.isEqual(tr.min())){const t=n.ls.getLastRemoteSnapshotVersion(e).next((t=>n.ls.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return ec.waitFor(o).next((()=>r.apply(e))).next((()=>n.ai.Gs(e,a))).next((()=>a))})).then((e=>(n.si=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.ia.get(t);i&&(Us(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.Xu=!0:e.modifiedDocuments.size>0?Us(i.Xu):e.removedDocuments.size>0&&(Us(i.Xu),i.Xu=!1))})),await eu(n,e,t)}catch(e){await fc(e)}}function $l(e,t,n){const i=Fs(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ta.forEach(((n,i)=>{const s=i.view.Eu(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=Fs(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Eu(t)&&(i=!0)})),i&&Ll(n)}(i.eventManager,t),e.length&&i.Zu.Ko(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function zl(e,t,n){const i=Fs(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.ia.get(t),r=s&&s.key;if(r){let e=new ia(Er.comparator);e=e.insert(r,Vr.newNoDocument(r,tr.min()));const n=ma().add(r),s=new va(tr.min(),new Map,new oa(Qs),e,n);await Bl(i,s),i.sa=i.sa.remove(r),i.ia.delete(t),Zl(i)}else await Ic(i.localStore,t,!1).then((()=>Xl(i,t,n))).catch(fc)}async function Hl(e,t){const n=Fs(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Fs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),s=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const s=n.batch,r=s.keys();let o=ec.resolve();return r.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);Us(null!==r),t.version.compareTo(r)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.$s.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.$s.performConsistencyCheck(e))).next((()=>n.ai.qs(e,i)))}))}(n.localStore,t);Wl(n,i,null),Gl(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await eu(n,e)}catch(e){await fc(e)}}async function Kl(e,t,n){const i=Fs(e);try{const e=await function(e,t){const n=Fs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.$s.lookupMutationBatch(e,t).next((t=>(Us(null!==t),i=t.keys(),n.$s.removeMutationBatch(e,t)))).next((()=>n.$s.performConsistencyCheck(e))).next((()=>n.ai.qs(e,i)))}))}(i.localStore,t);Wl(i,t,n),Gl(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await eu(i,e)}catch(n){await fc(n)}}function Gl(e,t){(e.ua.get(t)||[]).forEach((e=>{e.resolve()})),e.ua.delete(t)}function Wl(e,t,n){const i=Fs(e);let s=i.oa[i.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),i.oa[i.currentUser.toKey()]=s}}function Xl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.ea.get(t))e.ta.delete(i),n&&e.Zu.la(i,n);e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((t=>{e.ra.containsKey(t)||Yl(e,t)}))}function Yl(e,t){e.na.delete(t.path.canonicalString());const n=e.sa.get(t);null!==n&&(Zc(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Zl(e))}function Jl(e,t,n){for(const i of n)i instanceof Pl?(e.ra.addReference(i.key,t),Ql(e,i)):i instanceof xl?(Ls("SyncEngine","Document no longer in limbo: "+i.key),e.ra.removeReference(i.key,t),e.ra.containsKey(i.key)||Yl(e,i.key)):Ms()}function Ql(e,t){const n=t.key,i=n.path.canonicalString();e.sa.get(n)||e.na.has(i)||(Ls("SyncEngine","New document in limbo: "+n),e.na.add(i),Zl(e))}function Zl(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){const t=e.na.values().next().value;e.na.delete(t);const n=new Er(or.fromString(t)),i=e.aa.next();e.ia.set(i,new Fl(n)),e.sa=e.sa.insert(n,i),Qc(e.remoteStore,new rc(po(lo(n.path)),i,2,Xs.A))}}async function eu(e,t,n){const i=Fs(e),s=[],r=[],o=[];i.ta.isEmpty()||(i.ta.forEach(((e,a)=>{o.push(i.ha(a,t,n).then((e=>{if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),s.push(e);const t=mc.Js(a.targetId,e);r.push(t)}})))})),await Promise.all(o),i.Zu.Ko(s),await async function(e,t){const n=Fs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ec.forEach(t,(t=>ec.forEach(t.zs,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>ec.forEach(t.Hs,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!tc(e))throw e;Ls("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.si.get(t),i=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(i);n.si=n.si.insert(t,s)}}}(i.localStore,r))}async function tu(e,t){const n=Fs(e);if(!n.currentUser.isEqual(t)){Ls("SyncEngine","User change. New user:",t.toKey());const e=await vc(n.localStore,t);n.currentUser=t,function(e,t){e.ua.forEach((e=>{e.forEach((e=>{e.reject(new qs(Vs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await eu(n,e.ci)}}function nu(e,t){const n=Fs(e),i=n.ia.get(t);if(i&&i.Xu)return ma().add(i.key);{let e=ma();const i=n.ea.get(t);if(!i)return e;for(const t of i){const i=n.ta.get(t);e=e.unionWith(i.view.qu)}return e}}function iu(e){const t=Fs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kl.bind(null,t),t}class su{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.da(e),this.persistence=this._a(e),await this.persistence.start(),this.gcScheduler=this.wa(e),this.localStore=this.ma(e)}wa(e){return null}ma(e){return function(e,t,n,i){return new yc(e,t,n,i)}(this.persistence,new gc,e.initialUser,this.M)}_a(e){return new Dc(Oc.Wi,this.M)}da(e){return new xc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ru{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>$l(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=tu.bind(null,this.syncEngine),await async function(e,t){const n=Fs(e);t?(n.lu.delete(2),await Yc(n)):t||(n.lu.add(2),await Jc(n),n._u.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Nl}createDatastore(e){const t=Bc(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new qc(i));var i;return function(e,t,n,i){return new Gc(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,s=e=>$l(this.syncEngine,e,0),r=Uc.vt()?new Uc:new Mc,new Xc(t,n,i,s,r);var t,n,i,s,r}createSyncEngine(e,t){return function(e,t,n,i,s,r,o){const a=new Vl(e,t,n,i,s,r);return o&&(a.ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Fs(e);Ls("RemoteStore","RemoteStore shutting down."),t.lu.add(5),await Jc(t),t.du.shutdown(),t._u.set("Unknown")}(this.remoteStore)}}class ou{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class au{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=As.UNAUTHENTICATED,this.clientId=Js.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ls("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ls("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qs(Vs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Sl(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function cu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){return e.offlineComponents||(Ls("FirestoreClient","Using default OfflineComponentProvider"),await async function(e,t){e.asyncQueue.verifyOperationInProgress(),Ls("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await vc(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}(e,new su)),e.offlineComponents}(e);Ls("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>bl(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>bl(t.remoteStore,n))),e.onlineComponents=t}async function lu(e){return e.onlineComponents||(Ls("FirestoreClient","Using default OnlineComponentProvider"),await cu(e,new ru)),e.onlineComponents}async function uu(e){const t=await lu(e),n=t.eventManager;return n.onListen=ql.bind(null,t.syncEngine),n.onUnlisten=jl.bind(null,t.syncEngine),n}function hu(e,t,n={}){const i=new js;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,s){const r=new ou({next:r=>{t.enqueueAndForget((()=>async function(e,t){const n=Fs(e),i=t.query;let s=!1;const r=n.queries.get(i);if(r){const e=r.listeners.indexOf(t);e>=0&&(r.listeners.splice(e,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}(e,o)));const a=r.docs.has(n);!a&&r.fromCache?s.reject(new qs(Vs.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&i&&"server"===i.source?s.reject(new qs(Vs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(r)},error:e=>s.reject(e)}),o=new Ol(lo(n.path),r,{includeMetadataChanges:!0,Du:!0});return async function(e,t){const n=Fs(e),i=t.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new Al),s)try{r.Iu=await n.onListen(i)}catch(e){const n=Sl(e,`Initialization of query '${yo(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,r),r.listeners.push(t),t.Eu(n.onlineState),r.Iu&&t.Au(r.Iu)&&Ll(n)}(e,o)}(await uu(e),e.asyncQueue,t,n,i))),i.promise}const du=new Map;function fu(e,t,n){if(!n)throw new qs(Vs.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pu(e){if(!Er.isDocumentKey(e))throw new qs(Vs.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function mu(e){if(Er.isDocumentKey(e))throw new qs(Vs.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function gu(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ms()}function yu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qs(Vs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gu(e);throw new qs(Vs.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class vu{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new qs(Vs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qs(Vs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,i){if(!0===t&&!0===i)throw new qs(Vs.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wu{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vu({}),this._settingsFrozen=!1,e instanceof wr?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new qs(Vs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wr(e.options.projectId)}(e))}get app(){if(!this._app)throw new qs(Vs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qs(Vs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $s;switch(e.type){case"gapi":const t=e.client;return Us(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ks(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new qs(Vs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=du.get(e);t&&(Ls("ComponentProvider","Removing Datastore"),du.delete(e),t.terminate())}(this),Promise.resolve()}}class bu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bu(this.firestore,e,this._key)}}class Iu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Iu(this.firestore,e,this._query)}}class Eu extends Iu{constructor(e,t,n){super(e,t,lo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bu(this.firestore,null,new Er(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function Tu(e,t,...n){if(e=A(e),1===arguments.length&&(t=Js.R()),fu("doc","path",t),e instanceof wu){const i=or.fromString(t,...n);return pu(i),new bu(e,null,new Er(i))}{if(!(e instanceof bu||e instanceof Eu))throw new qs(Vs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(or.fromString(t,...n));return pu(i),new bu(e.firestore,e instanceof Eu?e.converter:null,new Er(i))}}class Su{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new $c(this,"async_queue_retry"),this.Ua=()=>{const e=jc();e&&Ls("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const e=jc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=jc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise((()=>{}));const t=new js;return this.Ga((()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ka.push(e),this.Ka())))}async Ka(){if(0!==this.ka.length){try{await this.ka[0](),this.ka.shift(),this.So.reset()}catch(e){if(!tc(e))throw e;Ls("AsyncQueue","Operation failed with retryable error: "+e)}this.ka.length>0&&this.So.Io((()=>this.Ka()))}}Ga(e){const t=this.Na.then((()=>(this.$a=!0,e().catch((e=>{this.Fa=e,this.$a=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Os("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.$a=!1,e))))));return this.Na=t,t}enqueueAfterDelay(e,t,n){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=Tl.createAndSchedule(this,e,t,n,(e=>this.Qa(e)));return this.Oa.push(i),i}qa(){this.Fa&&Ms()}verifyOperationInProgress(){}async ja(){let e;do{e=this.Na,await e}while(e!==this.Na)}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then((()=>{this.Oa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()}))}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}class _u extends wu{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Su,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Cu(this),this._firestoreClient.terminate()}}function ku(e){return e._firestoreClient||Cu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Cu(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new vr(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new au(e._authCredentials,e._appCheckCredentials,e._queue,i)}class Au{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new qs(Vs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nu(ur.fromBase64String(e))}catch(e){throw new qs(Vs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Nu(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ru{constructor(e){this._methodName=e}}class Du{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qs(Vs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qs(Vs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qs(this._lat,e._lat)||Qs(this._long,e._long)}}const Lu=/^__.*__$/;class Ou{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ho(e,this.data,t,this.fieldTransforms)}}class Pu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ms()}}class Mu{constructor(e,t,n,i,s,r){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=i,void 0===s&&this.Ja(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Mu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:n,tc:!1});return i.ec(e),i}nc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:n,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Wu(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(xu(this.Ya)&&Lu.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Uu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||Bc(e)}uc(e,t,n,i=!1){return new Mu({Ya:e,methodName:t,oc:n,path:cr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Fu(e){const t=e._freezeSettings(),n=Bc(e._databaseId);return new Uu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vu(e,t,n,i,s,r={}){const o=e.uc(r.merge||r.mergeFields?2:0,t,n,s);zu("Data must be an object, but it was:",o,i);const a=Bu(i,o);let c,l;if(r.merge)c=new lr(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const e=[];for(const i of r.mergeFields){const s=Hu(t,i,n);if(!o.contains(s))throw new qs(Vs.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Xu(e,s)||e.push(s)}c=new lr(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Ou(new Ur(a),c,l)}class qu extends Ru{_toFieldTransform(e){if(2!==e.Ya)throw 1===e.Ya?e.ic(`${this._methodName}() can only appear at the top level of your update data`):e.ic(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qu}}function ju(e,t){if($u(e=A(e)))return zu("Unsupported field value:",t,e),Bu(e,t);if(e instanceof Ru)return function(e,t){if(!xu(t.Ya))throw t.ic(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ic(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const s of e){let e=ju(s,t.sc(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=A(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return To(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=er.fromDate(e);return{timestampValue:Ra(t.M,n)}}if(e instanceof er){const n=new er(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ra(t.M,n)}}if(e instanceof Du)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Nu)return{bytesValue:Da(t.M,e._byteString)};if(e instanceof bu){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.ic(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Pa(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic(`Unsupported field value: ${gu(e)}`)}(e,t)}function Bu(e,t){const n={};return sr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ir(e,((e,i)=>{const s=ju(i,t.Za(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function $u(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof er||e instanceof Du||e instanceof Nu||e instanceof bu||e instanceof Ru)}function zu(e,t,n){if(!$u(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=gu(n);throw"an object"===i?t.ic(e+" a custom object"):t.ic(e+" "+i)}}function Hu(e,t,n){if((t=A(t))instanceof Au)return t._internalPath;if("string"==typeof t)return Gu(e,t);throw Wu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ku=new RegExp("[~\\*/\\[\\]]");function Gu(e,t,n){if(t.search(Ku)>=0)throw Wu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Au(...t.split("."))._internalPath}catch(i){throw Wu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Wu(e,t,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new qs(Vs.INVALID_ARGUMENT,a+e+c)}function Xu(e,t){return e.some((e=>e.isEqual(t)))}class Yu{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ju(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ju extends Yu{data(){return super.data()}}function Qu(e,t){return"string"==typeof t?Gu(e,t):t instanceof Au?t._internalPath:t._delegate._internalPath}class Zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eh extends Yu{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Qu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class th extends eh{data(e={}){return super.data(e)}}function nh(e){e=yu(e,bu);const t=yu(e.firestore,_u);return hu(ku(t),e._key).then((n=>function(e,t,n){const i=n.docs.get(t._key),s=new ih(e);return new eh(e,s,t._key,i,new Zu(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class ih extends class{convertValue(e,t="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ms()}}convertObject(e,t){const n={};return ir(e.fields,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Du(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=gr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(yr(e));default:return null}}convertTimestamp(e){const t=dr(e);return new er(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=or.fromString(e);Us(Za(n));const i=new wr(n.get(1),n.get(3)),s=new Er(n.popFirst(5));return i.isEqual(t)||Os(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bu(this.firestore,null,t)}}function sh(e,t,n){e=yu(e,bu);const i=yu(e.firestore,_u),s=function(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}(e.converter,t,n);return rh(i,[Vu(Fu(i),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Uo.none())])}function rh(e,t){return function(e,t){const n=new js;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=iu(e);try{const e=await function(e,t){const n=Fs(e),i=er.now(),s=t.reduce(((e,t)=>e.add(t.key)),ma());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.ai.qs(e,s).next((s=>{r=s;const o=[];for(const e of t){const t=Bo(e,r.get(e.key));null!=t&&o.push(new Ko(e.key,t,Fr(t.value.mapValue),Uo.exists(!0)))}return n.$s.addMutationBatch(e,i,o,t)})))).then((e=>(e.applyToLocalDocumentSet(r),{batchId:e.batchId,changes:r})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.oa[e.currentUser.toKey()];i||(i=new ia(Qs)),i=i.insert(t,n),e.oa[e.currentUser.toKey()]=i}(i,e.batchId,n),await eu(i,e.changes),await hl(i.remoteStore)}catch(e){const t=Sl(e,"Failed to persist write");n.reject(t)}}(await function(e){return lu(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(ku(e),t)}function oh(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}!function(e,t=!0){Ns="9.6.10",ee(new P("firestore",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=new _u(i,new zs(e.getProvider("auth-internal")),new Ws(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s}),"PUBLIC")),oe(Cs,"3.4.7",e),oe(Cs,"3.4.7","esm2017")}(),Object.create,Object.create;const ah=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ch=new w("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lh=new H("@firebase/auth");function uh(e,...t){lh.logLevel<=V.ERROR&&lh.error(`Auth (9.6.10): ${e}`,...t)}function hh(e,...t){throw fh(e,...t)}function dh(e,...t){return fh(e,...t)}function fh(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return ch.create(e,...t)}function ph(e,t,...n){if(!e)throw fh(t,...n)}function mh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw uh(t),new Error(t)}function gh(e,t){e||mh(t)}const yh=new Map;function vh(e){gh(e instanceof Function,"Expected a class definition");let t=yh.get(e);return t?(gh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yh.set(e,t),t)}function wh(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bh(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ih{constructor(e,t){this.shortDelay=e,this.longDelay=t,gh(t>e,"Short delay should be less than long delay!"),this.isMobile=p()||g()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===bh()||"https:"===bh()||m()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Eh(e,t){gh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Th{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void mh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void mh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void mh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_h=new Ih(3e4,6e4);function kh(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ch(e,t,n,i,s={}){return Ah(e,s,(async()=>{let s={},r={};i&&("GET"===t?r=i:s={body:JSON.stringify(i)});const o=T(Object.assign({key:e.config.apiKey},r)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Th.fetch()(Rh(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},s))}))}async function Ah(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Sh),t);try{const t=new Dh(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const r=await s.json();if("needConfirmation"in r)throw Lh(e,"account-exists-with-different-credential",r);if(s.ok&&!("errorMessage"in r))return r;{const t=s.ok?r.errorMessage:r.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Lh(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw Lh(e,"email-already-in-use",r);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const i=Object.assign(Object.assign({},ah()),{[t]:n});return new w("auth","Firebase",i).create(t,{appName:e.name})}(e,a,o);hh(e,a)}}catch(t){if(t instanceof v)throw t;hh(e,"network-request-failed")}}async function Nh(e,t,n,i,s={}){const r=await Ch(e,t,n,i,s);return"mfaPendingCredential"in r&&hh(e,"multi-factor-auth-required",{_serverResponse:r}),r}function Rh(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?Eh(e.config,s):`${e.config.apiScheme}://${s}`}class Dh{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(dh(this.auth,"network-request-failed"))),_h.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lh(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=dh(e,t,i);return s.customData._tokenResponse=n,s}function Oh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Ph(e){return 1e3*Number(e)}function xh(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return e?JSON.parse(e):(uh("Failed to decode base64 JWT payload"),null)}catch(e){return uh("Caught error parsing JWT payload as JSON",e),null}}async function Mh(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof v&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Uh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class Fh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oh(this.lastLoginAt),this.creationTime=Oh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vh(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Mh(e,async function(e,t){return Ch(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));ph(null==s?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const o=(null===(t=r.providerUserInfo)||void 0===t?void 0:t.length)?r.providerUserInfo.map((e=>{var{providerId:t}=e,n=oh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&r.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Fh(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class qh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ph(e.idToken,"internal-error"),ph(void 0!==e.idToken,"internal-error"),ph(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=xh(e);return ph(t,"internal-error"),ph(void 0!==t.exp,"internal-error"),ph(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return ph(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await Ah(e,{},(async()=>{const n=T({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,r=Rh(e,i,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Th.fetch()(r,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,r=new qh;return n&&(ph("string"==typeof n,"internal-error",{appName:e}),r.refreshToken=n),i&&(ph("string"==typeof i,"internal-error",{appName:e}),r.accessToken=i),s&&(ph("number"==typeof s,"internal-error",{appName:e}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qh,this.toJSON())}_performRefresh(){return mh("not implemented")}}function jh(e,t){ph("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Bh{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Mh(this,this.stsTokenManager.getToken(this.auth,e));return ph(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=A(e),i=await n.getIdToken(t),s=xh(i);ph(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r="object"==typeof s.firebase?s.firebase:void 0,o=null==r?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Oh(Ph(s.auth_time)),issuedAtTime:Oh(Ph(s.iat)),expirationTime:Oh(Ph(s.exp)),signInProvider:o||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=A(e);await Vh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ph(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Bh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ph(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Vh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Mh(this,async function(e,t){return Ch(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,r,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(r=t.photoURL)&&void 0!==r?r:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:E}=t;ph(v&&E,e,"internal-error");const T=qh.fromJSON(this.name,E);ph("string"==typeof v,e,"internal-error"),jh(u,e.name),jh(h,e.name),ph("boolean"==typeof w,e,"internal-error"),ph("boolean"==typeof b,e,"internal-error"),jh(d,e.name),jh(f,e.name),jh(p,e.name),jh(m,e.name),jh(g,e.name),jh(y,e.name);const S=new Bh({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&(S.providerData=I.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const i=new qh;i.updateFromServerResponse(t);const s=new Bh({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Vh(s),s}}class $h{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$h.type="NONE";const zh=$h;function Hh(e,t,n){return`firebase:${e}:${t}:${n}`}class Kh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Hh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Kh(vh(zh),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=i[0]||vh(zh);const r=Hh(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(r);if(t){const i=Bh._fromJSON(e,t);n!==s&&(o=i),s=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(r)}catch(e){}}))),new Kh(s,e,n)):new Kh(s,e,n)}}function Gh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zh(t))return"Blackberry";if(ed(t))return"Webos";if(Xh(t))return"Safari";if((t.includes("chrome/")||Yh(t))&&!t.includes("edge/"))return"Chrome";if(Qh(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Wh(e=f()){return/firefox\//i.test(e)}function Xh(e=f()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Yh(e=f()){return/crios\//i.test(e)}function Jh(e=f()){return/iemobile/i.test(e)}function Qh(e=f()){return/android/i.test(e)}function Zh(e=f()){return/blackberry/i.test(e)}function ed(e=f()){return/webos/i.test(e)}function td(e=f()){return/iphone|ipad|ipod/i.test(e)}function nd(e=f()){return td(e)||Qh(e)||ed(e)||Zh(e)||/windows phone/i.test(e)||Jh(e)}function id(e,t=[]){let n;switch(e){case"Browser":n=Gh(f());break;case"Worker":n=`${Gh(f())}-${e}`;break;default:n=e}return`${n}/JsCore/9.6.10/${t.length?t.join(","):"FirebaseCore-web"}`}class sd{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new od(this),this.idTokenSubscription=new od(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ch,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vh(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Kh.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,r=await this.tryRedirectSignIn(e);i&&i!==s||!(null==r?void 0:r.user)||(n=r.user)}return n?n._redirectEventId?(ph(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?A(e):null;return t&&ph(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&ph(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(vh(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new w("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vh(e)||this._popupRedirectResolver;ph(t,this,"argument-error"),this.redirectPersistenceManager=await Kh.create(this,[vh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),r=this._isInitialized?Promise.resolve():this._initializationPromise;return ph(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ph(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=id(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function rd(e){return A(e)}class od{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new k(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ph(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class ad{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mh("not implemented")}_getIdTokenResponse(e){return mh("not implemented")}_linkToIdToken(e,t){return mh("not implemented")}_getReauthenticationResolver(e){return mh("not implemented")}}class cd extends ad{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new cd(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new cd(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithPassword",kh(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithEmailLink",kh(e,t))}(e,{email:this._email,oobCode:this._password});default:hh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return Ch(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithEmailLink",kh(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:hh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ld(e,t){return Nh(e,"POST","/v1/accounts:signInWithIdp",kh(e,t))}class ud extends ad{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ud(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=oh(t,["providerId","signInMethod"]);if(!n||!i)return null;const r=new ud(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(e){return ld(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ld(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ld(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=T(t)}return e}}const hd={USER_NOT_FOUND:"user-not-found"};class dd extends ad{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new dd({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new dd({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithPhoneNumber",kh(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Nh(e,"POST","/v1/accounts:signInWithPhoneNumber",kh(e,t));if(n.temporaryProof)throw Lh(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithPhoneNumber",kh(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),hd)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||t||i||s?new dd({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class fd{constructor(e){var t,n,i,s,r,o;const a=S(_(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);ph(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(r=a.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=S(_(e)).link,n=t?S(_(t)).deep_link_id:null,i=S(_(e)).deep_link_id;return(i?S(_(i)).link:null)||i||n||t||e}(e);try{return new fd(t)}catch(e){return null}}}class pd{constructor(){this.providerId=pd.PROVIDER_ID}static credential(e,t){return cd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=fd.parseLink(t);return ph(n,"argument-error"),cd._fromEmailAndCode(e,n.code,n.tenantId)}}pd.PROVIDER_ID="password",pd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class md{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gd extends md{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yd extends gd{constructor(){super("facebook.com")}static credential(e){return ud._fromParams({providerId:yd.PROVIDER_ID,signInMethod:yd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yd.credentialFromTaggedObject(e)}static credentialFromError(e){return yd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return yd.credential(e.oauthAccessToken)}catch(e){return null}}}yd.FACEBOOK_SIGN_IN_METHOD="facebook.com",yd.PROVIDER_ID="facebook.com";class vd extends gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ud._fromParams({providerId:vd.PROVIDER_ID,signInMethod:vd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vd.credentialFromTaggedObject(e)}static credentialFromError(e){return vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return vd.credential(t,n)}catch(e){return null}}}vd.GOOGLE_SIGN_IN_METHOD="google.com",vd.PROVIDER_ID="google.com";class wd extends gd{constructor(){super("github.com")}static credential(e){return ud._fromParams({providerId:wd.PROVIDER_ID,signInMethod:wd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wd.credentialFromTaggedObject(e)}static credentialFromError(e){return wd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return wd.credential(e.oauthAccessToken)}catch(e){return null}}}wd.GITHUB_SIGN_IN_METHOD="github.com",wd.PROVIDER_ID="github.com";class bd extends gd{constructor(){super("twitter.com")}static credential(e,t){return ud._fromParams({providerId:bd.PROVIDER_ID,signInMethod:bd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bd.credentialFromTaggedObject(e)}static credentialFromError(e){return bd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return bd.credential(t,n)}catch(e){return null}}}bd.TWITTER_SIGN_IN_METHOD="twitter.com",bd.PROVIDER_ID="twitter.com";class Id{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Bh._fromIdTokenResponse(e,n,i),r=Ed(n);return new Id({user:s,providerId:r,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Ed(n);return new Id({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Ed(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Td extends v{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Td(e,t,n,i)}}function Sd(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Td._fromErrorAndOperation(e,n,t,i);throw n}))}async function _d(e,t,n=!1){const i="signIn",s=await Sd(e,i,t),r=await Id._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function kd(e,t,n){const i=A(e),s={requestType:"PASSWORD_RESET",email:t};n&&function(e,t,n){var i;ph((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),ph(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ph(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ph(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}(i,s,n),await async function(e,t){return async function(e,t){return Ch(e,"POST","/v1/accounts:sendOobCode",kh(e,t))}(e,t)}(i,s)}new WeakMap;const Cd="__sak";class Ad{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Nd extends Ad{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=f();return Xh(e)||td(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=nd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);y()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nd.type="LOCAL";const Rd=Nd;class Dd extends Ad{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dd.type="SESSION";const Ld=Dd;class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Od(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async e=>e(t.origin,s))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pd(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Od.receivers=[];class xd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=Pd("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function Md(){return window}function Ud(){return void 0!==Md().WorkerGlobalScope&&"function"==typeof Md().importScripts}const Fd="firebaseLocalStorageDb",Vd="firebaseLocalStorage",qd="fbase_key";class jd{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Bd(e,t){return e.transaction([Vd],t?"readwrite":"readonly").objectStore(Vd)}function $d(){const e=indexedDB.open(Fd,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Vd,{keyPath:qd})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Vd)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Fd);return new jd(e).toPromise()}(),t(await $d()))}))}))}async function zd(e,t,n){const i=Bd(e,!0).put({[qd]:t,value:n});return new jd(i).toPromise()}function Hd(e,t){const n=Bd(e,!0).delete(t);return new jd(n).toPromise()}class Kd{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await $d()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ud()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(Ud()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new xd(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}var t}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $d();return await zd(e,Cd,"1"),await Hd(e,Cd),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>zd(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Bd(e,!1).get(t),i=await new jd(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Hd(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Bd(e,!1).getAll();return new jd(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Kd.type="LOCAL";const Gd=Kd;function Wd(e){return`__${e}${Math.floor(1e6*Math.random())}`}Wd("rcb"),new Ih(3e4,6e4);class Xd{constructor(e){this.providerId=Xd.PROVIDER_ID,this.auth=rd(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const s=await n.verify();try{let r;if(ph("string"==typeof s,e,"argument-error"),ph("recaptcha"===n.type,e,"argument-error"),r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){ph("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ch(e,"POST","/v2/accounts/mfaEnrollment:start",kh(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{ph("signin"===t.type,e,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;ph(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ch(e,"POST","/v2/accounts/mfaSignIn:start",kh(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ch(e,"POST","/v1/accounts:sendVerificationCode",kh(e,t))}(e,{phoneNumber:r.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}(this.auth,e,A(t))}static credential(e,t){return dd._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xd.credentialFromTaggedObject(t)}static credentialFromError(e){return Xd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?dd._fromTokenResponse(t,n):null}}Xd.PROVIDER_ID="phone",Xd.PHONE_SIGN_IN_METHOD="phone";class Yd extends ad{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ld(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ld(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ld(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jd(e){return _d(e.auth,new Yd(e),e.bypassAuthState)}function Qd(e){const{auth:t,user:n}=e;return ph(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await Mh(e,Sd(i,s,t,e),n);ph(r.idToken,i,"internal-error");const o=xh(r.idToken);ph(o,i,"internal-error");const{sub:a}=o;return ph(e.uid===a,i,"user-mismatch"),Id._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&hh(i,"user-mismatch"),e}}(n,new Yd(e),e.bypassAuthState)}async function Zd(e){const{auth:t,user:n}=e;return ph(n,t,"internal-error"),async function(e,t,n=!1){const i=await Mh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Id._forOperation(e,"link",i)}(n,new Yd(e),e.bypassAuthState)}class ef{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=e;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jd;case"linkViaPopup":case"linkViaRedirect":return Zd;case"reauthViaPopup":case"reauthViaRedirect":return Qd;default:hh(this.auth,"internal-error")}}resolve(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tf=new Ih(2e3,1e4);class nf extends ef{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,nf.currentPopupAction&&nf.currentPopupAction.cancel(),nf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ph(e,this.auth,"internal-error"),e}async onExecution(){gh(1===this.filter.length,"Popup operations only handle one event");const e=Pd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(dh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(dh(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,tf.get())};e()}}nf.currentPopupAction=null;const sf=new Map;class rf extends ef{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=sf.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Hh("pendingRedirect",e.config.apiKey,e.name)}(t),i=function(e){return vh(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}sf.set(this.auth._key(),e)}return this.bypassAuthState||sf.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function of(e,t,n=!1){const i=rd(e),s=function(e,t){return t?vh(t):(ph(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),r=new rf(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class af{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!lf(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dh(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cf(e))}saveEventToCache(e){this.cachedEventUids.add(cf(e)),this.lastProcessedEventTime=Date.now()}}function cf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function lf({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const uf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hf=/^https?/;function df(e){const t=wh(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!hf.test(n))return!1;if(uf.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const ff=new Ih(3e4,6e4);function pf(){const e=Md().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let mf=null;function gf(e){return mf=mf||function(e){return new Promise(((t,n)=>{var i,s,r,o;function a(){pf(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pf(),n(dh(e,"network-request-failed"))},timeout:ff.get()})}if(null===(s=null===(i=Md().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(r=Md().gapi)||void 0===r?void 0:r.load)){const t=Wd("iframefcb");return Md()[t]=()=>{gapi.load?a():n(dh(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");var i,s;n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=dh("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(n)}))).catch((e=>n(e)))}a()}})).catch((e=>{throw mf=null,e}))}(e),mf}const yf=new Ih(5e3,15e3),vf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bf(e){const t=e.config;ph(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Eh(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:se},s=wf.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${T(i).slice(1)}`}const If={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ef{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Tf(e,t,n,i,s,r){ph(e.config.authDomain,e,"auth-domain-config-required"),ph(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:se,eventId:s};if(t instanceof md){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(r||{}))o[e]=t}if(t instanceof gd){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?Eh(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${T(a).slice(1)}`}const Sf="webStorageSupport",_f=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ld,this._completeRedirectFn=of}async _openPopup(e,t,n,i){var s;return gh(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},If),{width:i.toString(),height:s.toString(),top:r,left:o}),l=f().toLowerCase();n&&(a=Yh(l)?"_blank":n),Wh(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=f()){var t;return td(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Ef(null);const h=window.open(t||"",a,u);ph(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Ef(h)}(e,Tf(e,t,n,wh(),i),Pd())}async _openRedirect(e,t,n,i){var s;return await this._originValidation(e),s=Tf(e,t,n,wh(),i),Md().location.href=s,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await gf(e),n=Md().gapi;return ph(n,e,"internal-error"),t.open({where:document.body,url:bf(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vf,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const s=dh(e,"network-request-failed"),r=Md().setTimeout((()=>{i(s)}),yf.get());function o(){Md().clearTimeout(r),n(t)}t.ping(o).then(o,(()=>{i(s)}))}))))}(e),n=new af(e);return t.register("authEvent",(t=>(ph(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sf,{type:Sf},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==s&&t(!!s),hh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Ch(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(df(e))return}catch(e){}hh(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nd()||Xh()||td()}};var kf,Cf="@firebase/auth",Af="0.19.11";class Nf{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ph(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}kf="Browser",ee(new P("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:r}=n.options;return((e,n)=>{ph(s&&!s.includes(":"),"invalid-api-key",{appName:e.name}),ph(!(null==r?void 0:r.includes(":")),"argument-error",{appName:e.name});const i={apiKey:s,authDomain:r,clientPlatform:kf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:id(kf)},o=new sd(e,n,i);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(vh);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ee(new P("auth-internal",(e=>(e=>new Nf(e))(rd(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),oe(Cf,Af,void 0),oe(Cf,Af,"esm2017");var Rf=document.querySelector("#instructions p"),Df=[11,14,13,18,13,16,20,18],Lf=[7,10,10,14,10,20,20,20],Of=["vaccinate world's population and help fight the coronavirus disease. If you'll fail, a new variant will arrive...","you made it! But the population grew and you need to vaccinate more people now!","you made it again! Now lets see if you can do it even faster!","great job! But bats are camming. Can you vaccinate them too?","you are awesome! Now lets see if you can do it with people that are in a hurry!","amazing work! Can you also vaccinate each person in only one second?","the Corona can't beat you! Lets try it now with the bats and faster!","you're almost at the end of your journy, only one stage to go!","you did it! You saved humanity! You ended the coronavirus disease and made XXX point."],Pf=["Vaccinate world's population and help fight the coronavirus disease. If you'll fail, a new variant will arrive...","You made it! But the population grew and you need to vaccinate more people now!","You made it again! Now lets see if you can do it even faster!","Great job! But bats are camming. Can you vaccinate them too?","You are awesome! Now lets see if you can do it with people that are in a hurry!","Amazing work! Can you also vaccinate each person in only one second?","The Corona can't beat you! Lets try it now with the bats!","You're almost at the end of your journy, only one stage to go!","You did it! You saved humanity! You ended the coronavirus disease and made XXX point."],xf=document.querySelector("#instructions"),Mf=document.querySelector("#medal"),Uf=document.querySelector("#medal span"),Ff=localStorage.getItem("name");""!=Ff&&null!=Ff&&(document.forms.nicknameForm.nickname.setAttribute("value",localStorage.name),document.forms.nicknameForm.nickname.style.color="#555555",null!=localStorage.getItem("bestScore")&&""!=localStorage.getItem("bestScore")&&0!=localStorage.getItem("bestScore")&&(Uf.textContent=localStorage.getItem("bestScore"),Mf.style.display="block")),function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw ne.create("bad-app-name",{appName:String(i)});const s=J.get(i);if(s){if(I(e,s.options)&&I(n,s.config))return s;throw ne.create("duplicate-app",{appName:i})}const r=new U(i);for(const e of Q.values())r.addComponent(e);const o=new ie(e,n,r);J.set(i,o)}({apiKey:"AIzaSyAQ8bwV2MCpnsyTasXZLKns3os5dkR1de8",authDomain:"corona-game-fbf6d.firebaseapp.com",projectId:"corona-game-fbf6d",storageBucket:"corona-game-fbf6d.appspot.com",messagingSenderId:"26072350198",appId:"1:26072350198:web:09e9cc86fcf52eda1c1bd7"});var Vf=function(e=re()){const t=te(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=te(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(I(n.getOptions(),null!=t?t:{}))return e;hh(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:_f,persistence:[Gd,Rd,Ld]})}(),qf=function(e=re()){return te(e,"firestore").getImmediate()}(),jf=(function(e,t,...n){if(e=A(e),fu("collection","path",t),e instanceof wu){const i=or.fromString(t,...n);return mu(i),new Eu(e,null,i)}{if(!(e instanceof bu||e instanceof Eu))throw new qs(Vs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(or.fromString(t,...n));mu(i),new Eu(e.firestore,null,i)}}(qf,"nicknamesCollection"),0),Bf=document.querySelector("#register"),$f=document.querySelector("#registerFormContainer"),zf=document.querySelector("#registerForm"),Hf=document.querySelectorAll("#registerFormContainer #registerForm input"),Kf=document.querySelectorAll("#registerFormContainer #registerForm p"),Gf=document.querySelector("#registerFormContainer #registerForm #lastName"),Wf=document.querySelector("#registerFormContainer #registerForm #firstName"),Xf=document.querySelector("#registerFormContainer #registerForm #lastNameP"),Yf=document.querySelector("#registerFormContainer #registerForm #firstNameP"),Jf=document.querySelector("#signIn"),Qf=document.querySelector("#signInFormContainer"),Zf=document.querySelector("#signInForm"),ep=document.querySelector(".x"),tp=document.querySelector("#instructions p"),np=document.querySelector("#instructions form"),ip=document.querySelector("#instructions form label"),sp=document.querySelector("#instructions form #nickname"),rp=document.querySelector("#instructions form #startButton"),op=document.querySelector("#signOut"),ap=document.querySelector("#hourglass"),cp=document.querySelector("#signInFormContainer #signInForm p"),lp=document.querySelector("#forgotContainer"),up=document.querySelector("#forgotContainer #forgotForm"),hp=document.querySelector(".x2"),dp=document.querySelector("#backToGame"),fp=document.querySelector("#emailSent"),pp=document.querySelector("#emailSent p"),mp=document.querySelector("#quit"),gp=function(){$f.style.display="block",ep.style.display="block"};Bf.addEventListener("click",gp);var yp=function(){Qf.style.display="block",ep.style.display="block"};Jf.addEventListener("click",yp),ep.addEventListener("click",(function(){Qf.style.display="none",Zf.reset(),$f.style.display="none",zf.reset(),ep.style.display="none",dp.style.display="none",Hf.forEach((function(e){e.classList.remove("invalid")})),Kf.forEach((function(e){e.classList.remove("invalid")}))})),mp.addEventListener("click",(function(){location.reload()}));var vp={firstName:/^[a-zA-Z]+((( - )|( -)|(- )|-| )?[a-zA-Z]+)*$/,lastName:/^[a-zA-Z]+((( - )|( -)|(- )|-| )?[a-zA-Z]+)*$/,nicknameRegisteredUser:/^[a-zA-Z0-9]+( ?(_|-|\.)? ?[a-zA-Z0-9]+)*$/,email:/^([\w\d\.-]+)@([\w\d-]+)\.([a-zA-Z]{2,12})(\.[a-zA-Z]{2,8})?$/,password:/^[\w\d-@\.]{8,20}$/};Hf.forEach((function(e){var t=e.getAttribute("id");e.addEventListener("focusout",(function(n){"submitRegisterForm"!==e.getAttribute("id")&&(0==vp[n.target.name].test(n.target.value)?""!==n.target.value&&(e.classList.add("invalid"),Kf.forEach((function(n){"firstName"!=e.getAttribute("name")&&"lastName"!=e.getAttribute("name")||1!=Gf.classList.contains("invalid")||1!=Wf.classList.contains("invalid")?n.getAttribute("id")==t+"P"&&n.classList.add("invalid"):console.log("")}))):(e.classList.remove("invalid"),Kf.forEach((function(n){"firstName"!=e.getAttribute("name")&&"lastName"!=e.getAttribute("name")||1!=Gf.classList.contains("invalid")&&1!=Wf.classList.contains("invalid")?"firstName"!=e.getAttribute("name")&&"lastName"!=e.getAttribute("name")||0!=Gf.classList.contains("invalid")||0!=Wf.classList.contains("invalid")?n.getAttribute("id")==t+"P"&&n.classList.remove("invalid"):(Xf.classList.remove("invalid"),Yf.classList.remove("invalid")):console.log("")}))))}))})),zf.addEventListener("submit",(function(e){e.preventDefault();var t=function(e){return e.classList.contains("invalid")};if(Array.from(Hf).some(t)||Array.from(Kf).some(t))console.log("do nothing");else{ap.style.display="block";var n=zf.email.value,i=zf.password.value,s=zf.nicknameRegisteredUser.value,r=Tu(qf,"nicknamesCollection",s);nh(r).then((function(e){ap.style.display="none",null==e.data()?async function(e,t,n){const i=rd(e),s=await async function(e,t){return Nh(e,"POST","/v1/accounts:signUp",kh(e,t))}(i,{returnSecureToken:!0,email:t,password:n}),r=await Id._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(r.user),r}(Vf,n,i).then((function(e){console.log(" user registered: ",e.user),localStorage.setItem("name",s),localStorage.setItem("bestScore",0),localStorage.setItem("score",0),Mf.style.display="none"})).then((function(){return async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=A(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},r=await Mh(i,async function(e,t){return Ch(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=r.displayName||null,i.photoURL=r.photoUrl||null;const o=i.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(r)}(Vf.currentUser,{displayName:s})})).then((function(){document.forms.nicknameForm.nickname.setAttribute("value",Vf.currentUser.displayName),console.log("nickname: "+Vf.currentUser.displayName+" email: "+Vf.currentUser.email+" userID: "+Vf.currentUser.uid)})).then((function(){sh(r,{Nickname:s}).then((function(){console.log("We have set the new docs")})).catch((function(e){console.log(e.message),alert("There was a problem processing your request."),ap.style.display="none"}))})).then((function(){sh(Tu(qf,"usersScore",Vf.currentUser.displayName),{Score:0,Nickname:s}).then((function(){console.log("We have set the other docs"),zf.reset(),ap.style.display="none",$f.style.display="none",ip.style.display="none",sp.style.display="none",Bf.style.display="none",Jf.style.display="none",ep.style.display="none",Rf.textContent=s+", "+Of[jf],rp.style.fontSize="17px",rp.style.color="#555",op.style.display="block"})).catch((function(e){console.log(e.message),alert("There was a problem processing your request."),ap.style.display="none"}))})).catch((function(e){ap.style.display="none",console.log(e.message),e.message.includes("network-request-failed")?setTimeout((function(){alert("Network request failed, please check your internet connection or try again later.")}),300):e.message.includes("email-already-in-use")?setTimeout((function(){alert("Email already in use, please choose a different one.")}),300):e.message.includes("weak-password")?setTimeout((function(){alert("Password should be at least 6 characters.")}),300):setTimeout((function(){alert("There was a problem processing your request.")}),300)})):(console.log("Nickname already exists:",e.data()),alert("This nickname is already taken, please choose a different one"))})).catch((function(e){console.log("Error message for getDoc:",e.message),ap.style.display="none",setTimeout((function(){alert("There was a problem processing your request. Please try again later.")}),300)}))}})),Zf.addEventListener("submit",(function(e){e.preventDefault();var t=Zf.email.value,n=Zf.password.value;ap.style.display="block",function(e,t,n){return async function(e,t){return _d(rd(e),t)}(A(e),pd.credential(t,n))}(Vf,t,n).then((function(e){ap.style.display="none",Zf.reset(),console.log("user signed in: ",e.user,"nickname: ",Vf.currentUser.displayName),Rf.textContent=Vf.currentUser.displayName+", "+Of[jf],document.forms.nicknameForm.nickname.setAttribute("value",Vf.currentUser.displayName),Qf.style.display="none",ip.style.display="none",sp.style.display="none",Bf.style.display="none",Jf.style.display="none",op.style.display="block",ep.style.display="none",rp.style.fontSize="17px",rp.style.color="#555",dp.style.display="none",Mf.style.display="none",localStorage.clear(),localStorage.getItem("score"),localStorage.getItem("bestScore"),localStorage.setItem("name",Vf.currentUser.displayName),nh(Tu(qf,"usersScore",Vf.currentUser.displayName)).then((function(e){localStorage.setItem("bestScore",e.data().Score),null!=localStorage.getItem("bestScore")&&""!=localStorage.getItem("bestScore")&&0!=localStorage.getItem("bestScore")?(Uf.textContent=localStorage.getItem("bestScore"),Mf.style.display="block"):Mf.style.display="none"})).catch((function(e){console.log(e.message)}))})).catch((function(e){ap.style.display="none",console.log(e.message),e.message.includes("wrong-password")?setTimeout((function(){alert("Wrong password.")}),300):e.message.includes("user-not-found")?setTimeout((function(){alert("User not found.")}),300):e.message.includes("network-request-failed")?setTimeout((function(){alert("Network request failed.")}),300):setTimeout((function(){alert("Signing in error, please try again later.")}),300)}))})),cp.addEventListener("click",(function(){lp.style.display="block",Qf.style.display="none",ep.style.display="none",hp.style.display="block",dp.style.display="block"})),hp.addEventListener("click",(function(){lp.style.display="none",Qf.style.display="block",ep.style.display="block",hp.style.display="none",dp.style.display="block",up.reset()})),dp.addEventListener("click",(function(){lp.style.display="none",Qf.style.display="none",ep.style.display="none",hp.style.display="none",dp.style.display="none",up.reset()})),up.addEventListener("submit",(function(e){e.preventDefault();var t=up.email.value;console.log(t),ap.style.display="block",pp.classList.add("animationIsOn"),pp.classList.remove("animationRemoved"),kd(Vf,t).then((function(){ap.style.display="none",console.log("Email sent!"),fp.style.display="flex",pp.style.animation="emailSent 2.5s ease forwards normal",setTimeout((function(){fp.style.display="none",pp.classList.add("animationRemoved"),pp.classList.remove("animationIsOn")}),2500),up.reset(),lp.style.display="none",Qf.style.display="block",ep.style.display="block",hp.style.display="none",dp.style.display="block"})).catch((function(e){ap.style.display="none",e.message,console.log(e.message),e.message.includes("network-request-failed")?setTimeout((function(){alert("Network request failed, please check your internet connection or try again later.")}),300):e.message.includes("invalid-email")?setTimeout((function(){alert("Invalid email, please verify your email below and resend it.")}),300):e.message.includes("user-not-found")?setTimeout((function(){alert("Account does not exist.")}),300):setTimeout((function(){alert("There was a problem processing your request.")}),300)}))})),op.addEventListener("click",(function(){op.style.display="none",Bf.style.display="inline-block",Jf.style.display="inline-block",localStorage.clear(),localStorage.getItem("name"),localStorage.getItem("score"),function(e){return A(e).signOut()}(Vf).then((function(){console.log("the user logged out"),Rf.textContent=Pf[jf],Mf.style.display="none",ip.style.display="inline-block",ip.style.right="3px",sp.style.display="inline-block",rp.style.fontSize="14px",rp.style.color="buttontext",document.forms.nicknameForm.nickname.setAttribute("value","")})).catch((function(e){console.log(e.message)}))}));var wp=0;!function(e,t,n,i){A(e).onAuthStateChanged(t,void 0,void 0)}(Vf,(function(e){e?(wp=1,console.log(wp,e),Bf.style.display="none",Jf.style.display="none",op.style.display="block",Rf.textContent=Vf.currentUser.displayName+", "+Of[jf],ip.style.display="none",sp.style.display="none",rp.style.fontSize="17px",rp.style.color="#555"):(wp=0,console.log(wp,e))}));var bp=document.querySelectorAll(".trial"),Ip=0,Ep=function(e){return Ip=e},Tp=e.clientWidth;console.log("ourViewPortWidth: "+Tp+" ourViewPortHeight: "+e.clientHeight),window.addEventListener("resize",(function(){Tp=e.clientWidth}));var Sp=function(t,n){var i=Math.floor(5*Math.random())-2,s=Math.floor(5*Math.random())-2;0==i&&0==s&&(i=2);var r,o=function(n,i){1!=Ip?t.offsetTop<=1&&t.offsetLeft>=e.clientWidth-56-1?(t.style.top=e.clientHeight-56-2+"px",t.style.left="2px"):t.offsetTop<=1&&t.offsetLeft<=1?(t.style.top=e.clientHeight-56-2+"px",t.style.left=Tp-56-2+"px"):t.offsetTop>=e.clientHeight-56-1&&t.offsetLeft<=1?(t.style.top="2px",t.style.left=Tp-56-2+"px"):t.offsetTop>=e.clientHeight-56-1&&t.offsetLeft>=e.clientWidth-56-1?(t.style.top="2px",t.style.left="2px"):t.offsetTop<=1?(t.style.top=e.clientHeight-56-2+"px",t.style.left=e.clientWidth-56-parseInt(t.style.left)+"px"):t.offsetTop>=e.clientHeight-56-1?(t.style.top="2px",t.style.left=e.clientWidth-56-parseInt(t.style.left)+"px"):t.offsetLeft<=1?(t.style.left=Tp-56-2+"px",t.style.top=e.clientHeight-56-parseInt(t.style.top)+"px"):t.offsetLeft>=e.clientWidth-56-1?(t.style.left="2px",t.style.top=e.clientHeight-56-parseInt(t.style.top)+"px"):(t.style.top=parseInt(t.style.top)+i+"px",t.style.left=parseInt(t.style.left)+n+"px"):clearInterval(r)};[11,12,13,14].some((function(e){return t.style.background.includes(e)}))?r=setInterval((function(){return o(i,s)}),9):"fast"==n?(r=setInterval((function(){return o(i,s)}),12),console.log("going fast now")):r="slow"==n?setInterval((function(){return o(i,s)}),40):setInterval((function(){return o(i,s)}),20)};Array.from(bp).forEach((function(t){t.style.top=Math.random()*(e.clientHeight-56)+"px",t.style.left=Math.random()*(e.clientWidth-56)+"px",Sp(t,"slow")}));var _p=document.querySelector("#instructions h4"),kp=document.querySelector("#trial3"),Cp=document.createElement("div"),Ap=function(){Bf.removeEventListener("click",gp),Jf.removeEventListener("click",yp),Mf.style.display="none",Cp.classList.add("trial","trial4"),e.insertBefore(Cp,kp),Cp.style.zIndex="11",Cp.style.top=Math.random()*(e.clientHeight-56)+"px",Cp.style.left=Math.random()*(e.clientWidth-56)+"px",Sp(Cp,"regular")},Np=window.matchMedia("(orientation: portrait)");Np.matches&&Ap(),Np.addEventListener("change",(function(e){e.matches&&Ap()})),(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substring(0,5)))&&(tp.style.display="none",np.style.display="none",_p.style.display="block",Ap());var Rp,Dp=document.querySelector("footer"),Lp=document.querySelector("#topEyeshade"),Op=document.querySelector("#bottomEyeshade"),Pp=document.querySelectorAll(".tinyCircle"),xp=document.querySelectorAll(".corona"),Mp=document.querySelectorAll(".tinyCircleContainer"),Up=document.querySelector("#sign"),Fp=document.querySelector("#headline"),Vp=0,qp=[],jp=[],Bp=[],$p=0,zp=document.querySelector("header #bonusArrow"),Hp=0;rp.addEventListener("click",(function(n){n.preventDefault(),op.style.display="none",Mf.style.display="none",mp.style.display="none",Fp.style.opacity="0",Array.from(bp).forEach((function(e){console.log(e),e.style.display="none",Ep(1)})),Ep(0);for(var i=1;i<=Lf[Vp];i++)5!=Vp||11!=i&&12!=i&&13!=i&&14!=i?Bp.push(i):console.log("");Bp.forEach((function(t){qp.push("figure"+t);var n=document.createElement("div");n.classList.add("figures"),n.setAttribute("id","figure"+t),e.insertBefore(n,Dp),jp.push(n)})),qp.forEach((function(t){var n=document.querySelector("#"+t);n.style.background="url('./".concat(t,".svg')"),n.style.top=Math.random()*(e.clientHeight-56)+"px",n.style.left=Math.random()*(e.clientWidth-56)+"px",n.style.display="block",Sp(n,4==Vp||6==Vp||7==Vp?"fast":"regular");var i=function e(){n.removeEventListener("click",e),n.style.background="url(./stars.svg)",n.style.animation="fireworks 0.75s ease forwards normal",$p+=10,Hp+=1,console.log(Hp),s.textContent=$p,localStorage.score=$p,setTimeout((function(){n.remove()}),751)};n.addEventListener("click",i),setTimeout((function(){n.removeEventListener("click",i)}),1e3*Df[Vp])})),""!=(Rp=document.forms.nicknameForm.nickname.value)&&null!=Rp?localStorage.getItem("name")!=Rp?(localStorage.removeItem("bestScore"),localStorage.getItem("bestScore"),localStorage.removeItem("score"),localStorage.getItem("score"),localStorage.setItem("name",Rp)):localStorage.setItem("name",Rp):""!=Rp&&null!=Rp||0==Vp&&(localStorage.clear(),localStorage.getItem("name"),localStorage.getItem("score"),localStorage.getItem("bestScore")),ip.style.display="none",sp.style.display="none",Up.style.display="none",mp.style.display="none",rp.style.fontSize="17px",rp.style.color="#555",xp.forEach((function(e){e.style.display="block"})),Mp.forEach((function(e){e.style.display="inline-block"})),xf.style.display="none",Lp.style.animation="shutTopEyeshade 2.5s 0.65s ease infinite normal",Op.style.animation="shutBottomEyeshade 2.5s 0.65s ease infinite normal",o.style.animation="turnEyes 5s 0.925s ease infinite normal",t.style.opacity="0",t.style.display="flex";var s=document.querySelector("header #score span");s.textContent=$p;var r=0;window.requestAnimationFrame((function e(){r+=.03,t.style.opacity="".concat(r),t.style.opacity<"1"&&requestAnimationFrame(e)}));var a=document.querySelector("#timer");a.style.animation="none",a.classList.add("animationIsOn"),a.classList.remove("animationRemoved");var c=Df[Vp];a.textContent=c,a.style.animation="timerGrows 1s ".concat(c+1," ease normal"),document.querySelector("header #level span").textContent=Vp+1,zp.style.animation="none",zp.classList.remove("animationRemoved"),zp.classList.add("animationIsOn");var l=function(e){return e.style.background.includes("stars.svg")},u=setInterval((function(){c-=1,a.textContent=c}),1e3),h=localStorage.getItem("name"),d=setInterval((function(){if(jp.every(l)){if(clearInterval(d),Ep(1),function(e){jf=e}(Vp+=1),clearInterval(u),a.style.animation="none",a.classList.add("animationRemoved"),a.classList.remove("animationIsOn"),0!=c){a.style.animation="timerGrowsAgain 1s ".concat(c," ease normal"),zp.style.opacity="1",zp.style.animation="arrowGrows 1s ".concat(c," ease normal"),zp.classList.add("animationRemoved"),zp.classList.remove("animationIsOn"),setTimeout((function(){zp.style.opacity="0"}),1e3*c);var t=10*c,n=0;setInterval((function(){(n+=1)<=t&&($p+=1,s.textContent=$p,localStorage.score=$p,localStorage.bestScore<$p&&(localStorage.bestScore=$p,1==wp&&function(e,t,n,...i){e=yu(e,bu);const s=yu(e.firestore,_u),r=Fu(s);let o;return o="string"==typeof(t=A(t))||t instanceof Au?function(e,t,n,i,s,r){const o=e.uc(1,t,n),a=[Hu(t,i,n)],c=[s];if(r.length%2!=0)throw new qs(Vs.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<r.length;e+=2)a.push(Hu(t,r[e])),c.push(r[e+1]);const l=[],u=Ur.empty();for(let e=a.length-1;e>=0;--e)if(!Xu(l,a[e])){const t=a[e];let n=c[e];n=A(n);const i=o.nc(t);if(n instanceof qu)l.push(t);else{const e=ju(n,i);null!=e&&(l.push(t),u.set(t,e))}}const h=new lr(l);return new Pu(u,h,o.fieldTransforms)}(r,"updateDoc",e._key,t,n,i):function(e,t,n,i){const s=e.uc(1,t,n);zu("Data must be an object, but it was:",s,i);const r=[],o=Ur.empty();ir(i,((e,i)=>{const a=Gu(t,e,n);i=A(i);const c=s.nc(a);if(i instanceof qu)r.push(a);else{const e=ju(i,c);null!=e&&(r.push(a),o.set(a,e))}}));const a=new lr(r);return new Pu(o,a,s.fieldTransforms)}(r,"updateDoc",e._key,t),rh(s,[o.toMutation(e._key,Uo.exists(!0))])}(Tu(qf,"usersScore",Vf.currentUser.displayName),{Score:localStorage.getItem("bestScore")}).then((function(){console.log("Score updated")})).catch((function(e){console.log(e.message)}))))}),100)}setTimeout((function(){qp=[],jp=[],Bp=[]}),751),xp.forEach((function(e){e.style.display="none"})),Rf.textContent=""==h||null==h?Pf[Vp]:h+", "+Of[Vp],xf.style.opacity="0",xf.style.display="block",xf.style.animation="instructionsAppears 2s ease forwards normal",mp.style.display="block",mp.style.animation="instructionsAppears 2s ease forwards normal",(""==localStorage.bestScore||null==localStorage.bestScore||localStorage.bestScore<$p)&&(localStorage.bestScore=$p),Hp=0}else 0==c&&0==jp.every(l)&&(clearInterval(d),clearInterval(u),function(){Ep(1);var t=359*Math.random(),n=Math.floor(55*Math.random()+26),i=Math.floor(41*Math.random()+35);Pp.forEach((function(e){e.style.background="hsl(".concat(t,", ").concat(n,"%, ").concat(i,"%)")})),setTimeout((function(){a.style.animation="none",a.classList.add("animationRemoved"),a.classList.remove("animationIsOn")}),1e3),jp.forEach((function(t){if(t.style.background.includes("figure")){t.style.top=parseInt(t.style.top)+"px",t.style.left=parseInt(t.style.left)+"px";var n=document.createElement("div");n.classList.add("ambulance"),e.insertBefore(n,Dp),n.style.position="absolute",n.style.top=t.style.top,n.style.left=parseInt(t.style.left)-80+"px";var i=function(){n.style.left=parseInt(n.style.left)+1+"px"};setTimeout((function(){var e=0;setInterval((function(){e<20&&(t.style.top=parseInt(t.style.top)+1+"px",e+=1)}),5)}),1200),t.style.animation="figureBecomesMini 0.5s 1.2s ease forwards normal",setInterval((function(){parseInt(n.style.left)<parseInt(t.style.left)&&(n.style.left=parseInt(n.style.left)+1+"px")}),15),setTimeout((function(){if(parseInt(n.style.left)<Tp){var e=setInterval(i,10);n.style.animation="disappears 3s ease forwards normal",setInterval((function(){return clearInterval(e)}),3e3)}}),1700),setTimeout((function(){jp.forEach((function(e){e.remove()})),qp=[],jp=[],Bp=[]}),1700),setTimeout((function(){document.querySelectorAll(".ambulance").forEach((function(e){e.remove()}))}),4700)}})),setTimeout((function(){Rf.textContent=""==h||null==h?"You failed and a new variant is spreading now, but don't worry, you can try again and prevent a world catastrophe.":h+", you failed and a new variant is spreading now, but don't worry, you can try again and prevent a world catastrophe.",xf.style.opacity="0",xf.style.display="block",xf.style.top="calc(30% + 4px)",xf.style.animation="instructionsAppears 2.5s ease forwards normal",mp.style.display="block",mp.style.animation="instructionsAppears 2.5s ease forwards normal"}),2e3),$p-=10*Hp,console.log("userScore"+$p),Hp=0,localStorage.score=$p}())}),1)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FBaUJXLFlBREosSUFBYnVILEdBQWtDLE1BQWJBLEVBQ1UscUhBRUFBLEVBQUFBLHVIQUduQzlILEdBQWFsOEUsTUFBTXNqRixRQUFVLElBQzdCcEgsR0FBYWw4RSxNQUFNMDhFLFFBQVUsUUFDN0JSLEdBQWFsOEUsTUFBTUcsSUFBTSxrQkFDekIrN0UsR0FBYWw4RSxNQUFNK2dGLFVBQVksZ0RBQy9CL0IsR0FBS2gvRSxNQUFNMDhFLFFBQVUsUUFDckJzQyxHQUFLaC9FLE1BQU0rZ0YsVUFBWSxrREFHVSxLQUdyQ29DLElBQXFELEdBQTVCRSxHQUN6Qjk0RSxRQUFRa0ksSUFBSSxZQUFjMHdFLElBQzFCRSxHQUE0QixFQUU1QmphLGFBQWFzYSxNQUFRUCxHQStGakJ5QixNQUtvQyIsInNvdXJjZXMiOlsid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vc3JjL3NjcmlwdHMvY3Vyc29yQW5kQ29yb25hLmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvdXRpbC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2xvZ2dlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vbm9kZV9tb2R1bGVzL2ZpcmViYXNlL2FwcC9kaXN0L2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9maXJlc3RvcmUvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoL2Rpc3QvZXNtMjAxNy9pbmRleC02ZGU0Y2JiOS5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9zcmMvc2NyaXB0cy9zdG9yeUxpbmUuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vc3JjL3NjcmlwdHMvbG9jYWxTdG9yYWdlLmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL3NyYy9zY3JpcHRzL3NpZ25JbkFuZFJlZ2lzdGVyRm9ybXMuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vc3JjL3NjcmlwdHMvZmlndXJlc01vdmVtZW50LmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL3NyYy9zY3JpcHRzL21vYmlsZS5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9zcmMvc2NyaXB0cy9zdGFydEdhbWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18uZyA9IChmdW5jdGlvbigpIHtcblx0aWYgKHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0JykgcmV0dXJuIGdsb2JhbFRoaXM7XG5cdHRyeSB7XG5cdFx0cmV0dXJuIHRoaXMgfHwgbmV3IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdH0gY2F0Y2ggKGUpIHtcblx0XHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcpIHJldHVybiB3aW5kb3c7XG5cdH1cbn0pKCk7IiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjXG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkgc2NyaXB0VXJsID0gc2NyaXB0c1tzY3JpcHRzLmxlbmd0aCAtIDFdLnNyY1xuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJjb25zdCBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuY29uc3QgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyJyk7XG5jb25zdCBjdXJzb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY3Vyc29yJyk7XG5cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgZSA9PiB7XG4gICAgLy90aGUgbG9jYXRpb24gb2YgdGhlIHN5cmluZ2UgY3Vyc29yXG4gICAgY3Vyc29yLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsIFwidG9wOiBcIiArIChlLnBhZ2VZICsgNCkgKyBcInB4OyBsZWZ0OiBcIiArIChlLnBhZ2VYIC0gNSkgKyBcInB4O1wiKTtcbn0pO1xuXG5cblxuY29uc3QgYXhpcyA9IFsxLCAyLCAzLCA0LCA1LCA2XTsgLy9mb3IgdGhlIGxpbmVzIHRoYXQgZ28gb3V0IG9mIHRoZSBjb3JvbmEncyBjZW50ZXJcbi8vY29uc3QgYXhpc0RpdnMgPSBbXTsgLy9jb250YWlucyBhbGwgdGhlIGF4aXNEaXZzIG9mIHRoZSBjb3JvbmFcbi8vY29uc3QgdGlueUNpcmNsZXNDb250YWluZXJzRGl2cyA9IFtdO1xuY29uc3QgY29yb25hQ2lyY2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NpcmNsZScpO1xubGV0IGFuZ2xlID0gMDtcblxuXG5heGlzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgLy9jcmVhdGluZyBkaXYgZm9yIGVhY2ggY29yb25hIGF4aXNcbiAgICBjb25zdCBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpLmNsYXNzTGlzdC5hZGQoJ2Nvcm9uYScsICdheGlzJyk7IC8vYWRkaW5nIGNsYXNzIG5hbWVzIGZvciBvdXIgZGl2XG4gICAgaS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ2F4aXMnK2VsZW1lbnQpOyAvL2FkZGluZyBpZCBmb3Igb3VyIGRpdlxuICAgIGJvZHkuaW5zZXJ0QmVmb3JlKGksIGNvcm9uYUNpcmNsZS5uZXh0U2libGluZyk7Ly9wdXR0aW5nIFwiaVwiIGFmdGVyIGNvcm9uYUNpcmNsZVxuICAgIC8vYXhpc0RpdnMucHVzaChpKTsgLy9wdXR0aW5nIG91ciBkaXYgaW5zaWRlIGF4aXNEaXZzIGFycmF5XG4gICAgaS5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlWigke2FuZ2xlfWRlZylgO1xuICAgIGFuZ2xlICs9IDMwO1xuXG4gICAgLy9jcmVhdGluZyBkaXYgZm9yIGVhY2ggY29udGFpbmVyIChjb250YWluZXJzIGZvciB0aGUgdGlueSBjaXJjbGVzKVxuICAgIC8vdGhlc2UgY29udGFpbmVycyB3aWxsIGhhdmUgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIGNvbnN0IG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG4uY2xhc3NMaXN0LmFkZCgnY29yb25hJywgJ3RpbnlDaXJjbGVDb250YWluZXInKTsgLy9hZGRpbmcgY2xhc3MgbmFtZXMgZm9yIG91ciBkaXZcbiAgICBuLnNldEF0dHJpYnV0ZSgnaWQnLCAndGlueUNpcmNsZUNvbnRhaW5lcicrZWxlbWVudCk7IC8vYWRkaW5nIGlkIGZvciBvdXIgZGl2XG4gICAgYm9keS5pbnNlcnRCZWZvcmUobiwgaGVhZGVyKTsvL3B1dHRpbmcgXCJuXCIgYXQgdGhlIHRvcCBvZiB0aGUgcGFnZSwgc28gaXQgd2lsbCBiZSBlYXNpZXIgdG8gcHV0IGl0IG9uIHRoZSBiaWcgY2lyY2xlXG4gICAgLy90aW55Q2lyY2xlc0NvbnRhaW5lcnNEaXZzLnB1c2gobik7IC8vcHV0dGluZyBvdXIgZGl2IGluc2lkZSB0aW55Q2lyY2xlc0NvbnRhaW5lcnNEaXZzIGFycmF5XG4gICAgbi5zdHlsZS50b3AgPSBcImNhbGMoMzAlIC0gMTEwcHgpXCI7IC8vbG9jYXRpbmcgaXQgYXQgdGhlIGNlbnRlciBvZiB0aGUgY29yb25hJ3MgYmlnIGNpcmNsZVxuICAgIG4uc3R5bGUuYm90dG9tID0gXCJjYWxjKDcwJSArIDExMHB4KVwiOyBcbiAgICBuLnN0eWxlLnJpZ2h0ID0gYGNhbGMoNTAlICsgJHsxMCArIDIyKihlbGVtZW50IC0xKX1weClgOyAgIC8vbG9jYXRpbmcgZWFjaCBjb250YWluZXIgYXQgdGhlIGxvY2F0aW9uIG9mIHRoZSBmaXJzdCBjb250YWluZXJcbiAgICBuLnN0eWxlLmxlZnQgPSBgY2FsYyg1MCUgLSAkezEwICsgMjIqKGVsZW1lbnQgLTEpfXB4KWA7ICBcbiAgICBjb25zdCBjb250YWluZXJBbmdsZSA9IDMwICogKGVsZW1lbnQgLSAxKTsgXG4gICAgbi5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlWigke2NvbnRhaW5lckFuZ2xlfWRlZylgOyAvL2NoYW5naW5nIHRoZSBhbmdsZSBvZiBlYWNoIGNvbnRhaW5lciwgc28gZWFjaCBjb250YWluZXIgd2lsbCBiZSBsb2NhdGVkIGJlaGluZCBvZiBlYWNoIGF4aXNcbiAgICBcblxuICAgIC8vY3JlYXRpbmcgZGl2IGZvciBlYWNoIGNvcm9uYSdzIHRpbnkgY2lyY2xlXG4gICAgLy90aGVzZSBjaXJjbGVzIHdpbGwgaGF2ZSBwb3NpdGlvbjogYWJzb2x1dGU7IG9uIHRoZWlyIGZhdGhlciAodGhlIGNvbnRhaW5lcilcbiAgICBjb25zdCBtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBjb25zdCBsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTsvL3dlIG5lZWQgMTIgdGlueSBjaXJjbGVzIGFuZCB3ZSBoYXZlIG9ubHkgNiBjb250YWluZXJzXG4gICAgbS5jbGFzc0xpc3QuYWRkKCdjb3JvbmEnLCAndGlueUNpcmNsZScpO1xuICAgIG0uc2V0QXR0cmlidXRlKCdpZCcsICd0aW55Q2lyY2xlJytlbGVtZW50KTtcbiAgICBtLnN0eWxlLnRvcCA9ICcwJztcbiAgICBtLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgIGwuY2xhc3NMaXN0LmFkZCgnY29yb25hJywgJ3RpbnlDaXJjbGUnKTtcbiAgICBsLnNldEF0dHJpYnV0ZSgnaWQnLCAndGlueUNpcmNsZScrKGVsZW1lbnQrNikpO1xuICAgIGwuc3R5bGUudG9wID0gJ2NhbGMoMTAwJSAtIDI0cHgpJztcbiAgICBsLnN0eWxlLnJpZ2h0ID0gJzAnO1xuICAgIGNvbnN0IGN1cnJlbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAjdGlueUNpcmNsZUNvbnRhaW5lciR7ZWxlbWVudH1gKTtcbiAgICBjdXJyZW50Q29udGFpbmVyLmFwcGVuZChtKTsgLy9wdXRpbmcgZWFjaCB0aW55Q2lyY2xlIGluc2lkZSBpdHMgcmlnaHQgY29udGFpbmVyXG4gICAgY3VycmVudENvbnRhaW5lci5hcHBlbmQobCk7IC8vcHV0aW5nIGVhY2ggdGlueUNpcmNsZSBpbnNpZGUgaXRzIHJpZ2h0IGNvbnRhaW5lclxuXG59KTtcblxuXG4vL2NyZWF0aW5nIGRpdiBmb3IgdGhlIGNvcm9uYSdzIGV5ZXNcbmNvbnN0IGV5ZXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuZXllcy5jbGFzc0xpc3QuYWRkKCdleWVzJywgJ2Nvcm9uYScpO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbnlDaXJjbGVDb250YWluZXIxJykuYXBwZW5kKGV5ZXMpO1xuXG4vLy8vY3JlYXRpbmcgZGl2cyBmb3IgdGhlIGNvcm9uYSdzIGV5ZSBzaGFkZXNcbmNvbnN0IHogPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuY29uc3QgeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG56LmNsYXNzTGlzdC5hZGQoJ2Nvcm9uYScsICdleWVTaGFkZXMnKTtcbnkuY2xhc3NMaXN0LmFkZCgnY29yb25hJywgJ2V5ZVNoYWRlcycpO1xuei5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RvcEV5ZXNoYWRlJyk7XG55LnNldEF0dHJpYnV0ZSgnaWQnLCAnYm90dG9tRXllc2hhZGUnKTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW55Q2lyY2xlQ29udGFpbmVyMScpLmFwcGVuZCh6KTtcbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW55Q2lyY2xlQ29udGFpbmVyMScpLmFwcGVuZCh5KTtcblxuXG5leHBvcnQgeyBib2R5LCBoZWFkZXIsIGN1cnNvciwgY29yb25hQ2lyY2xlLCBleWVzIH07XG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBGaXJlYmFzZSBjb25zdGFudHMuICBTb21lIG9mIHRoZXNlIChAZGVmaW5lcykgY2FuIGJlIG92ZXJyaWRkZW4gYXQgY29tcGlsZS10aW1lLlxyXG4gKi9cclxuY29uc3QgQ09OU1RBTlRTID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIGNsaWVudCBOb2RlLmpzIFNESy5cclxuICAgICAqL1xyXG4gICAgTk9ERV9DTElFTlQ6IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVmaW5lIHtib29sZWFufSBXaGV0aGVyIHRoaXMgaXMgdGhlIEFkbWluIE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0FETUlOOiBmYWxzZSxcclxuICAgIC8qKlxyXG4gICAgICogRmlyZWJhc2UgU0RLIFZlcnNpb25cclxuICAgICAqL1xyXG4gICAgU0RLX1ZFUlNJT046ICcke0pTQ09SRV9WRVJTSU9OfSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiB0aGUgcHJvdmlkZWQgYXNzZXJ0aW9uIGlzIGZhbHN5XHJcbiAqL1xyXG5jb25zdCBhc3NlcnQgPSBmdW5jdGlvbiAoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGFzc2VydGlvbkVycm9yKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBhbiBFcnJvciBvYmplY3Qgc3VpdGFibGUgZm9yIHRocm93aW5nLlxyXG4gKi9cclxuY29uc3QgYXNzZXJ0aW9uRXJyb3IgPSBmdW5jdGlvbiAobWVzc2FnZSkge1xyXG4gICAgcmV0dXJuIG5ldyBFcnJvcignRmlyZWJhc2UgRGF0YWJhc2UgKCcgK1xyXG4gICAgICAgIENPTlNUQU5UUy5TREtfVkVSU0lPTiArXHJcbiAgICAgICAgJykgSU5URVJOQUwgQVNTRVJUIEZBSUxFRDogJyArXHJcbiAgICAgICAgbWVzc2FnZSk7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5JDEgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxyXG4gICAgICAgICAgICBpICsgMSA8IHN0ci5sZW5ndGggJiZcclxuICAgICAgICAgICAgKHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xyXG4gICAgICAgICAgICAvLyBTdXJyb2dhdGUgUGFpclxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArICgoYyAmIDB4MDNmZikgPDwgMTApICsgKHN0ci5jaGFyQ29kZUF0KCsraSkgJiAweDAzZmYpO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogVHVybnMgYW4gYXJyYXkgb2YgbnVtYmVycyBpbnRvIHRoZSBzdHJpbmcgZ2l2ZW4gYnkgdGhlIGNvbmNhdGVuYXRpb24gb2YgdGhlXHJcbiAqIGNoYXJhY3RlcnMgdG8gd2hpY2ggdGhlIG51bWJlcnMgY29ycmVzcG9uZC5cclxuICogQHBhcmFtIGJ5dGVzIEFycmF5IG9mIG51bWJlcnMgcmVwcmVzZW50aW5nIGNoYXJhY3RlcnMuXHJcbiAqIEByZXR1cm4gU3RyaW5naWZpY2F0aW9uIG9mIHRoZSBhcnJheS5cclxuICovXHJcbmNvbnN0IGJ5dGVBcnJheVRvU3RyaW5nID0gZnVuY3Rpb24gKGJ5dGVzKSB7XHJcbiAgICAvLyBUT0RPKHVzZXIpOiBVc2UgbmF0aXZlIGltcGxlbWVudGF0aW9ucyBpZi93aGVuIGF2YWlsYWJsZVxyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcG9zID0gMCwgYyA9IDA7XHJcbiAgICB3aGlsZSAocG9zIDwgYnl0ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgY29uc3QgYzEgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgaWYgKGMxIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMTkxICYmIGMxIDwgMjI0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDMxKSA8PCA2KSB8IChjMiAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMxID4gMjM5ICYmIGMxIDwgMzY1KSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgYzQgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoKChjMSAmIDcpIDw8IDE4KSB8ICgoYzIgJiA2MykgPDwgMTIpIHwgKChjMyAmIDYzKSA8PCA2KSB8IChjNCAmIDYzKSkgLVxyXG4gICAgICAgICAgICAgICAgMHgxMDAwMDtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZDgwMCArICh1ID4+IDEwKSk7XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgweGRjMDAgKyAodSAmIDEwMjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGMyID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjMyA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoYzEgJiAxNSkgPDwgMTIpIHwgKChjMiAmIDYzKSA8PCA2KSB8IChjMyAmIDYzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcclxufTtcclxuLy8gV2UgZGVmaW5lIGl0IGFzIGFuIG9iamVjdCBsaXRlcmFsIGluc3RlYWQgb2YgYSBjbGFzcyBiZWNhdXNlIGEgY2xhc3MgY29tcGlsZWQgZG93biB0byBlczUgY2FuJ3RcclxuLy8gYmUgdHJlZXNoYWtlZC4gaHR0cHM6Ly9naXRodWIuY29tL3JvbGx1cC9yb2xsdXAvaXNzdWVzLzE2OTFcclxuLy8gU3RhdGljIGxvb2t1cCBtYXBzLCBsYXppbHkgcG9wdWxhdGVkIGJ5IGluaXRfKClcclxuY29uc3QgYmFzZTY0ID0ge1xyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIGNoYXJhY3RlcnMuXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIGJ5dGVzIHRvIHdlYnNhZmUgY2hhcmFjdGVycy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGJ5dGVUb0NoYXJNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogTWFwcyB3ZWJzYWZlIGNoYXJhY3RlcnMgdG8gYnl0ZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjaGFyVG9CeXRlTWFwV2ViU2FmZV86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LCBzaGFyZWQgYmV0d2VlblxyXG4gICAgICogRU5DT0RFRF9WQUxTIGFuZCBFTkNPREVEX1ZBTFNfV0VCU0FGRVxyXG4gICAgICovXHJcbiAgICBFTkNPREVEX1ZBTFNfQkFTRTogJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJyArICdhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5eicgKyAnMDEyMzQ1Njc4OScsXHJcbiAgICAvKipcclxuICAgICAqIE91ciBkZWZhdWx0IGFscGhhYmV0LiBWYWx1ZSA2NCAoPSkgaXMgc3BlY2lhbDsgaXQgbWVhbnMgXCJub3RoaW5nLlwiXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnKy89JztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIE91ciB3ZWJzYWZlIGFscGhhYmV0LlxyXG4gICAgICovXHJcbiAgICBnZXQgRU5DT0RFRF9WQUxTX1dFQlNBRkUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuRU5DT0RFRF9WQUxTX0JBU0UgKyAnLV8uJztcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIFdoZXRoZXIgdGhpcyBicm93c2VyIHN1cHBvcnRzIHRoZSBhdG9iIGFuZCBidG9hIGZ1bmN0aW9ucy4gVGhpcyBleHRlbnNpb25cclxuICAgICAqIHN0YXJ0ZWQgYXQgTW96aWxsYSBidXQgaXMgbm93IGltcGxlbWVudGVkIGJ5IG1hbnkgYnJvd3NlcnMuIFdlIHVzZSB0aGVcclxuICAgICAqIEFTU1VNRV8qIHZhcmlhYmxlcyB0byBhdm9pZCBwdWxsaW5nIGluIHRoZSBmdWxsIHVzZXJhZ2VudCBkZXRlY3Rpb24gbGlicmFyeVxyXG4gICAgICogYnV0IHN0aWxsIGFsbG93aW5nIHRoZSBzdGFuZGFyZCBwZXItYnJvd3NlciBjb21waWxhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBIQVNfTkFUSVZFX1NVUFBPUlQ6IHR5cGVvZiBhdG9iID09PSAnZnVuY3Rpb24nLFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZW5jb2RlIGFuIGFycmF5IG9mIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBBbiBhcnJheSBvZiBieXRlcyAobnVtYmVycyB3aXRoXHJcbiAgICAgKiAgICAgdmFsdWUgaW4gWzAsIDI1NV0pIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIEJvb2xlYW4gaW5kaWNhdGluZyB3ZSBzaG91bGQgdXNlIHRoZVxyXG4gICAgICogICAgIGFsdGVybmF0aXZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBUaGUgYmFzZTY0IGVuY29kZWQgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBlbmNvZGVCeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpIHtcclxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKCdlbmNvZGVCeXRlQXJyYXkgdGFrZXMgYW4gYXJyYXkgYXMgYSBwYXJhbWV0ZXInKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGJ5dGVUb0NoYXJNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmJ5dGVUb0NoYXJNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpICs9IDMpIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBpbnB1dFtpXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSArIDEgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUyID0gaGF2ZUJ5dGUyID8gaW5wdXRbaSArIDFdIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSArIDIgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gaW5wdXRbaSArIDJdIDogMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0Qnl0ZTEgPSBieXRlMSA+PiAyO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTEgJiAweDAzKSA8PCA0KSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgbGV0IG91dEJ5dGUzID0gKChieXRlMiAmIDB4MGYpIDw8IDIpIHwgKGJ5dGUzID4+IDYpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTQgPSBieXRlMyAmIDB4M2Y7XHJcbiAgICAgICAgICAgIGlmICghaGF2ZUJ5dGUzKSB7XHJcbiAgICAgICAgICAgICAgICBvdXRCeXRlNCA9IDY0O1xyXG4gICAgICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTIpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRCeXRlMyA9IDY0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG91dHB1dC5wdXNoKGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTFdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUyXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlM10sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTRdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG91dHB1dC5qb2luKCcnKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEEgc3RyaW5nIHRvIGVuY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIElmIHRydWUsIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYnRvYShpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmVuY29kZUJ5dGVBcnJheShzdHJpbmdUb0J5dGVBcnJheSQxKGlucHV0KSwgd2ViU2FmZSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZyhpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIC8vIFNob3J0Y3V0IGZvciBNb3ppbGxhIGJyb3dzZXJzIHRoYXQgaW1wbGVtZW50XHJcbiAgICAgICAgLy8gYSBuYXRpdmUgYmFzZTY0IGVuY29kZXIgaW4gdGhlIGZvcm0gb2YgXCJidG9hL2F0b2JcIlxyXG4gICAgICAgIGlmICh0aGlzLkhBU19OQVRJVkVfU1VQUE9SVCAmJiAhd2ViU2FmZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXRvYihpbnB1dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBieXRlQXJyYXlUb1N0cmluZyh0aGlzLmRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSk7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBCYXNlNjQtZGVjb2RlIGEgc3RyaW5nLlxyXG4gICAgICpcclxuICAgICAqIEluIGJhc2UtNjQgZGVjb2RpbmcsIGdyb3VwcyBvZiBmb3VyIGNoYXJhY3RlcnMgYXJlIGNvbnZlcnRlZCBpbnRvIHRocmVlXHJcbiAgICAgKiBieXRlcy4gIElmIHRoZSBlbmNvZGVyIGRpZCBub3QgYXBwbHkgcGFkZGluZywgdGhlIGlucHV0IGxlbmd0aCBtYXkgbm90XHJcbiAgICAgKiBiZSBhIG11bHRpcGxlIG9mIDQuXHJcbiAgICAgKlxyXG4gICAgICogSW4gdGhpcyBjYXNlLCB0aGUgbGFzdCBncm91cCB3aWxsIGhhdmUgZmV3ZXIgdGhhbiA0IGNoYXJhY3RlcnMsIGFuZFxyXG4gICAgICogcGFkZGluZyB3aWxsIGJlIGluZmVycmVkLiAgSWYgdGhlIGdyb3VwIGhhcyBvbmUgb3IgdHdvIGNoYXJhY3RlcnMsIGl0IGRlY29kZXNcclxuICAgICAqIHRvIG9uZSBieXRlLiAgSWYgdGhlIGdyb3VwIGhhcyB0aHJlZSBjaGFyYWN0ZXJzLCBpdCBkZWNvZGVzIHRvIHR3byBieXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgSW5wdXQgdG8gZGVjb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgVHJ1ZSBpZiB3ZSBzaG91bGQgdXNlIHRoZSB3ZWItc2FmZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSBkZWNvZGVkIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBkZWNvZGVTdHJpbmdUb0J5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIHRoaXMuaW5pdF8oKTtcclxuICAgICAgICBjb25zdCBjaGFyVG9CeXRlTWFwID0gd2ViU2FmZVxyXG4gICAgICAgICAgICA/IHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfXHJcbiAgICAgICAgICAgIDogdGhpcy5jaGFyVG9CeXRlTWFwXztcclxuICAgICAgICBjb25zdCBvdXRwdXQgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDspIHtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTEgPSBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKyspXTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUyID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiAwO1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGNvbnN0IGhhdmVCeXRlMyA9IGkgPCBpbnB1dC5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ5dGUzID0gaGF2ZUJ5dGUzID8gY2hhclRvQnl0ZU1hcFtpbnB1dC5jaGFyQXQoaSldIDogNjQ7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGU0ID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTQgPSBoYXZlQnl0ZTQgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTEgPT0gbnVsbCB8fCBieXRlMiA9PSBudWxsIHx8IGJ5dGUzID09IG51bGwgfHwgYnl0ZTQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmdcclxuICovXHJcbmNvbnN0IGJhc2U2NEVuY29kZSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IHV0ZjhCeXRlcyA9IHN0cmluZ1RvQnl0ZUFycmF5JDEoc3RyKTtcclxuICAgIHJldHVybiBiYXNlNjQuZW5jb2RlQnl0ZUFycmF5KHV0ZjhCeXRlcywgdHJ1ZSk7XHJcbn07XHJcbi8qKlxyXG4gKiBVUkwtc2FmZSBiYXNlNjQgZW5jb2RpbmcgKHdpdGhvdXQgXCIuXCIgcGFkZGluZyBpbiB0aGUgZW5kKS5cclxuICogZS5nLiBVc2VkIGluIEpTT04gV2ViIFRva2VuIChKV1QpIHBhcnRzLlxyXG4gKi9cclxuY29uc3QgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICAvLyBVc2UgYmFzZTY0dXJsIGVuY29kaW5nIGFuZCByZW1vdmUgcGFkZGluZyBpbiB0aGUgZW5kIChkb3QgY2hhcmFjdGVycykuXHJcbiAgICByZXR1cm4gYmFzZTY0RW5jb2RlKHN0cikucmVwbGFjZSgvXFwuL2csICcnKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBkZWNvZGluZ1xyXG4gKlxyXG4gKiBOT1RFOiBETyBOT1QgdXNlIHRoZSBnbG9iYWwgYXRvYigpIGZ1bmN0aW9uIC0gaXQgZG9lcyBOT1Qgc3VwcG9ydCB0aGVcclxuICogYmFzZTY0VXJsIHZhcmlhbnQgZW5jb2RpbmcuXHJcbiAqXHJcbiAqIEBwYXJhbSBzdHIgVG8gYmUgZGVjb2RlZFxyXG4gKiBAcmV0dXJuIERlY29kZWQgcmVzdWx0LCBpZiBwb3NzaWJsZVxyXG4gKi9cclxuY29uc3QgYmFzZTY0RGVjb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmRlY29kZVN0cmluZyhzdHIsIHRydWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdiYXNlNjREZWNvZGUgZmFpbGVkOiAnLCBlKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRG8gYSBkZWVwLWNvcHkgb2YgYmFzaWMgSmF2YVNjcmlwdCBPYmplY3RzIG9yIEFycmF5cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBDb3B5KHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZGVlcEV4dGVuZCh1bmRlZmluZWQsIHZhbHVlKTtcclxufVxyXG4vKipcclxuICogQ29weSBwcm9wZXJ0aWVzIGZyb20gc291cmNlIHRvIHRhcmdldCAocmVjdXJzaXZlbHkgYWxsb3dzIGV4dGVuc2lvblxyXG4gKiBvZiBPYmplY3RzIGFuZCBBcnJheXMpLiAgU2NhbGFyIHZhbHVlcyBpbiB0aGUgdGFyZ2V0IGFyZSBvdmVyLXdyaXR0ZW4uXHJcbiAqIElmIHRhcmdldCBpcyB1bmRlZmluZWQsIGFuIG9iamVjdCBvZiB0aGUgYXBwcm9wcmlhdGUgdHlwZSB3aWxsIGJlIGNyZWF0ZWRcclxuICogKGFuZCByZXR1cm5lZCkuXHJcbiAqXHJcbiAqIFdlIHJlY3Vyc2l2ZWx5IGNvcHkgYWxsIGNoaWxkIHByb3BlcnRpZXMgb2YgcGxhaW4gT2JqZWN0cyBpbiB0aGUgc291cmNlLSBzb1xyXG4gKiB0aGF0IG5hbWVzcGFjZS0gbGlrZSBkaWN0aW9uYXJpZXMgYXJlIG1lcmdlZC5cclxuICpcclxuICogTm90ZSB0aGF0IHRoZSB0YXJnZXQgY2FuIGJlIGEgZnVuY3Rpb24sIGluIHdoaWNoIGNhc2UgdGhlIHByb3BlcnRpZXMgaW5cclxuICogdGhlIHNvdXJjZSBPYmplY3QgYXJlIGNvcGllZCBvbnRvIGl0IGFzIHN0YXRpYyBwcm9wZXJ0aWVzIG9mIHRoZSBGdW5jdGlvbi5cclxuICpcclxuICogTm90ZTogd2UgZG9uJ3QgbWVyZ2UgX19wcm90b19fIHRvIHByZXZlbnQgcHJvdG90eXBlIHBvbGx1dGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcEV4dGVuZCh0YXJnZXQsIHNvdXJjZSkge1xyXG4gICAgaWYgKCEoc291cmNlIGluc3RhbmNlb2YgT2JqZWN0KSkge1xyXG4gICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHNvdXJjZS5jb25zdHJ1Y3Rvcikge1xyXG4gICAgICAgIGNhc2UgRGF0ZTpcclxuICAgICAgICAgICAgLy8gVHJlYXQgRGF0ZXMgbGlrZSBzY2FsYXJzOyBpZiB0aGUgdGFyZ2V0IGRhdGUgb2JqZWN0IGhhZCBhbnkgY2hpbGRcclxuICAgICAgICAgICAgLy8gcHJvcGVydGllcyAtIHRoZXkgd2lsbCBiZSBsb3N0IVxyXG4gICAgICAgICAgICBjb25zdCBkYXRlVmFsdWUgPSBzb3VyY2U7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlVmFsdWUuZ2V0VGltZSgpKTtcclxuICAgICAgICBjYXNlIE9iamVjdDpcclxuICAgICAgICAgICAgaWYgKHRhcmdldCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQgPSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIEFycmF5OlxyXG4gICAgICAgICAgICAvLyBBbHdheXMgY29weSB0aGUgYXJyYXkgc291cmNlIGFuZCBvdmVyd3JpdGUgdGhlIHRhcmdldC5cclxuICAgICAgICAgICAgdGFyZ2V0ID0gW107XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIC8vIE5vdCBhIHBsYWluIE9iamVjdCAtIHRyZWF0IGl0IGFzIGEgc2NhbGFyLlxyXG4gICAgICAgICAgICByZXR1cm4gc291cmNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBwcm9wIGluIHNvdXJjZSkge1xyXG4gICAgICAgIC8vIHVzZSBpc1ZhbGlkS2V5IHRvIGd1YXJkIGFnYWluc3QgcHJvdG90eXBlIHBvbGx1dGlvbi4gU2VlIGh0dHBzOi8vc255ay5pby92dWxuL1NOWUstSlMtTE9EQVNILTQ1MDIwMlxyXG4gICAgICAgIGlmICghc291cmNlLmhhc093blByb3BlcnR5KHByb3ApIHx8ICFpc1ZhbGlkS2V5KHByb3ApKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0YXJnZXRbcHJvcF0gPSBkZWVwRXh0ZW5kKHRhcmdldFtwcm9wXSwgc291cmNlW3Byb3BdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0YXJnZXQ7XHJcbn1cclxuZnVuY3Rpb24gaXNWYWxpZEtleShrZXkpIHtcclxuICAgIHJldHVybiBrZXkgIT09ICdfX3Byb3RvX18nO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbi8vIE5vZGUgZGV0ZWN0aW9uIGxvZ2ljIGZyb206IGh0dHBzOi8vZ2l0aHViLmNvbS9pbGlha2FuL2RldGVjdC1ub2RlL1xyXG5mdW5jdGlvbiBpc05vZGUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGdsb2JhbC5wcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQnJvd3NlciBFbnZpcm9ubWVudFxyXG4gKi9cclxuZnVuY3Rpb24gaXNCcm93c2VyKCkge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzZWxmID09PSAnb2JqZWN0JyAmJiBzZWxmLnNlbGYgPT09IHNlbGY7XHJcbn1cclxuZnVuY3Rpb24gaXNCcm93c2VyRXh0ZW5zaW9uKCkge1xyXG4gICAgY29uc3QgcnVudGltZSA9IHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyBjaHJvbWUucnVudGltZVxyXG4gICAgICAgIDogdHlwZW9mIGJyb3dzZXIgPT09ICdvYmplY3QnXHJcbiAgICAgICAgICAgID8gYnJvd3Nlci5ydW50aW1lXHJcbiAgICAgICAgICAgIDogdW5kZWZpbmVkO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBydW50aW1lID09PSAnb2JqZWN0JyAmJiBydW50aW1lLmlkICE9PSB1bmRlZmluZWQ7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBSZWFjdCBOYXRpdmUuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBSZWFjdE5hdGl2ZSBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzUmVhY3ROYXRpdmUoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmIG5hdmlnYXRvclsncHJvZHVjdCddID09PSAnUmVhY3ROYXRpdmUnKTtcclxufVxyXG4vKiogRGV0ZWN0cyBFbGVjdHJvbiBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc0VsZWN0cm9uKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignRWxlY3Ryb24vJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBJbnRlcm5ldCBFeHBsb3Jlci4gKi9cclxuZnVuY3Rpb24gaXNJRSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiB1YS5pbmRleE9mKCdNU0lFICcpID49IDAgfHwgdWEuaW5kZXhPZignVHJpZGVudC8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIFVuaXZlcnNhbCBXaW5kb3dzIFBsYXRmb3JtIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzVVdQKCkge1xyXG4gICAgcmV0dXJuIGdldFVBKCkuaW5kZXhPZignTVNBcHBIb3N0LycpID49IDA7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCB3aGV0aGVyIHRoZSBjdXJyZW50IFNESyBidWlsZCBpcyB0aGUgTm9kZSB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaXQncyB0aGUgTm9kZSBTREsgYnVpbGQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc05vZGVTZGsoKSB7XHJcbiAgICByZXR1cm4gQ09OU1RBTlRTLk5PREVfQ0xJRU5UID09PSB0cnVlIHx8IENPTlNUQU5UUy5OT0RFX0FETUlOID09PSB0cnVlO1xyXG59XHJcbi8qKiBSZXR1cm5zIHRydWUgaWYgd2UgYXJlIHJ1bm5pbmcgaW4gU2FmYXJpLiAqL1xyXG5mdW5jdGlvbiBpc1NhZmFyaSgpIHtcclxuICAgIHJldHVybiAoIWlzTm9kZSgpICYmXHJcbiAgICAgICAgbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiZcclxuICAgICAgICAhbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnQ2hyb21lJykpO1xyXG59XHJcbi8qKlxyXG4gKiBUaGlzIG1ldGhvZCBjaGVja3MgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKiBAcmV0dXJuIHRydWUgaWYgaW5kZXhlZERCIGlzIHN1cHBvcnRlZCBieSBjdXJyZW50IGJyb3dzZXIvc2VydmljZSB3b3JrZXIgY29udGV4dFxyXG4gKi9cclxuZnVuY3Rpb24gaXNJbmRleGVkREJBdmFpbGFibGUoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIHZhbGlkYXRlcyBicm93c2VyL3N3IGNvbnRleHQgZm9yIGluZGV4ZWREQiBieSBvcGVuaW5nIGEgZHVtbXkgaW5kZXhlZERCIGRhdGFiYXNlIGFuZCByZWplY3RcclxuICogaWYgZXJyb3JzIG9jY3VyIGR1cmluZyB0aGUgZGF0YWJhc2Ugb3BlbiBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEB0aHJvd3MgZXhjZXB0aW9uIGlmIGN1cnJlbnQgYnJvd3Nlci9zdyBjb250ZXh0IGNhbid0IHJ1biBpZGIub3BlbiAoZXg6IFNhZmFyaSBpZnJhbWUsIEZpcmVmb3hcclxuICogcHJpdmF0ZSBicm93c2luZylcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxldCBwcmVFeGlzdCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNvbnN0IERCX0NIRUNLX05BTUUgPSAndmFsaWRhdGUtYnJvd3Nlci1jb250ZXh0LWZvci1pbmRleGVkZGItYW5hbHl0aWNzLW1vZHVsZSc7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBzZWxmLmluZGV4ZWREQi5vcGVuKERCX0NIRUNLX05BTUUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3QucmVzdWx0LmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAvLyBkZWxldGUgZGF0YWJhc2Ugb25seSB3aGVuIGl0IGRvZXNuJ3QgcHJlLWV4aXN0XHJcbiAgICAgICAgICAgICAgICBpZiAoIXByZUV4aXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9udXBncmFkZW5lZWRlZCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZUV4aXN0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdCgoKF9hID0gcmVxdWVzdC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2UpIHx8ICcnKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyB3aGV0aGVyIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICogQHJldHVybiB0cnVlIGlmIGNvb2tpZSBpcyBlbmFibGVkIHdpdGhpbiBjdXJyZW50IGJyb3dzZXJcclxuICovXHJcbmZ1bmN0aW9uIGFyZUNvb2tpZXNFbmFibGVkKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8qKlxyXG4gKiBQb2x5ZmlsbCBmb3IgYGdsb2JhbFRoaXNgIG9iamVjdC5cclxuICogQHJldHVybnMgdGhlIGBnbG9iYWxUaGlzYCBvYmplY3QgZm9yIHRoZSBnaXZlbiBlbnZpcm9ubWVudC5cclxuICovXHJcbmZ1bmN0aW9uIGdldEdsb2JhbCgpIHtcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gc2VsZjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gZ2xvYmFsO1xyXG4gICAgfVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3QuJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoZS5jb2RlID09PSAnc2VydmljZS9maWxlLW5vdC1mb3VuZCcpIHtcclxuICogICAgICAgY29uc29sZS5sb2coXCJDb3VsZCBub3QgcmVhZCBmaWxlOiBcIiArIGVbJ2ZpbGUnXSk7XHJcbiAqICAgICB9XHJcbiAqICAgfVxyXG4gKi9cclxuY29uc3QgRVJST1JfTkFNRSA9ICdGaXJlYmFzZUVycm9yJztcclxuLy8gQmFzZWQgb24gY29kZSBmcm9tOlxyXG4vLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9FcnJvciNDdXN0b21fRXJyb3JfVHlwZXNcclxuY2xhc3MgRmlyZWJhc2VFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIFRoZSBlcnJvciBjb2RlIGZvciB0aGlzIGVycm9yLiAqL1xyXG4gICAgY29kZSwgbWVzc2FnZSwgXHJcbiAgICAvKiogQ3VzdG9tIGRhdGEgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjdXN0b21EYXRhKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSBjdXN0b21EYXRhO1xyXG4gICAgICAgIC8qKiBUaGUgY3VzdG9tIG5hbWUgZm9yIGFsbCBGaXJlYmFzZUVycm9ycy4gKi9cclxuICAgICAgICB0aGlzLm5hbWUgPSBFUlJPUl9OQU1FO1xyXG4gICAgICAgIC8vIEZpeCBGb3IgRVM1XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgRmlyZWJhc2VFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIC8vIE1haW50YWlucyBwcm9wZXIgc3RhY2sgdHJhY2UgZm9yIHdoZXJlIG91ciBlcnJvciB3YXMgdGhyb3duLlxyXG4gICAgICAgIC8vIE9ubHkgYXZhaWxhYmxlIG9uIFY4LlxyXG4gICAgICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xyXG4gICAgICAgICAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCBFcnJvckZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNsYXNzIEVycm9yRmFjdG9yeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2aWNlLCBzZXJ2aWNlTmFtZSwgZXJyb3JzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZTtcclxuICAgICAgICB0aGlzLnNlcnZpY2VOYW1lID0gc2VydmljZU5hbWU7XHJcbiAgICAgICAgdGhpcy5lcnJvcnMgPSBlcnJvcnM7XHJcbiAgICB9XHJcbiAgICBjcmVhdGUoY29kZSwgLi4uZGF0YSkge1xyXG4gICAgICAgIGNvbnN0IGN1c3RvbURhdGEgPSBkYXRhWzBdIHx8IHt9O1xyXG4gICAgICAgIGNvbnN0IGZ1bGxDb2RlID0gYCR7dGhpcy5zZXJ2aWNlfS8ke2NvZGV9YDtcclxuICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IHRoaXMuZXJyb3JzW2NvZGVdO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0ZW1wbGF0ZSA/IHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgY3VzdG9tRGF0YSkgOiAnRXJyb3InO1xyXG4gICAgICAgIC8vIFNlcnZpY2UgTmFtZTogRXJyb3IgbWVzc2FnZSAoc2VydmljZS9jb2RlKS5cclxuICAgICAgICBjb25zdCBmdWxsTWVzc2FnZSA9IGAke3RoaXMuc2VydmljZU5hbWV9OiAke21lc3NhZ2V9ICgke2Z1bGxDb2RlfSkuYDtcclxuICAgICAgICBjb25zdCBlcnJvciA9IG5ldyBGaXJlYmFzZUVycm9yKGZ1bGxDb2RlLCBmdWxsTWVzc2FnZSwgY3VzdG9tRGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHJlcGxhY2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgZGF0YSkge1xyXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoUEFUVEVSTiwgKF8sIGtleSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gZGF0YVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSAhPSBudWxsID8gU3RyaW5nKHZhbHVlKSA6IGA8JHtrZXl9Pz5gO1xyXG4gICAgfSk7XHJcbn1cclxuY29uc3QgUEFUVEVSTiA9IC9cXHtcXCQoW159XSspfS9nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRXZhbHVhdGVzIGEgSlNPTiBzdHJpbmcgaW50byBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyIEEgc3RyaW5nIGNvbnRhaW5pbmcgSlNPTi5cclxuICogQHJldHVybiB7Kn0gVGhlIGphdmFzY3JpcHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3BlY2lmaWVkIEpTT04uXHJcbiAqL1xyXG5mdW5jdGlvbiBqc29uRXZhbChzdHIpIHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKHN0cik7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgSlNPTiByZXByZXNlbnRpbmcgYSBqYXZhc2NyaXB0IG9iamVjdC5cclxuICogQHBhcmFtIHsqfSBkYXRhIEphdmFzY3JpcHQgb2JqZWN0IHRvIGJlIHN0cmluZ2lmaWVkLlxyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBKU09OIGNvbnRlbnRzIG9mIHRoZSBvYmplY3QuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkge1xyXG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGRhdGEpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gaW50byBjb25zdGl0dWVudCBwYXJ0cy5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiB3aXRoIGludmFsaWQgLyBpbmNvbXBsZXRlIGNsYWltcyBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGRlY29kZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgbGV0IGhlYWRlciA9IHt9LCBjbGFpbXMgPSB7fSwgZGF0YSA9IHt9LCBzaWduYXR1cmUgPSAnJztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcGFydHMgPSB0b2tlbi5zcGxpdCgnLicpO1xyXG4gICAgICAgIGhlYWRlciA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1swXSkgfHwgJycpO1xyXG4gICAgICAgIGNsYWltcyA9IGpzb25FdmFsKGJhc2U2NERlY29kZShwYXJ0c1sxXSkgfHwgJycpO1xyXG4gICAgICAgIHNpZ25hdHVyZSA9IHBhcnRzWzJdO1xyXG4gICAgICAgIGRhdGEgPSBjbGFpbXNbJ2QnXSB8fCB7fTtcclxuICAgICAgICBkZWxldGUgY2xhaW1zWydkJ107XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYWRlcixcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgZGF0YSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIH07XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIHRpbWUtYmFzZWQgY2xhaW1zLiBXaWxsIHJldHVybiB0cnVlIGlmIHRoZVxyXG4gKiB0b2tlbiBpcyB3aXRoaW4gdGhlIHRpbWUgd2luZG93IGF1dGhvcml6ZWQgYnkgdGhlICduYmYnIChub3QtYmVmb3JlKSBhbmQgJ2lhdCcgKGlzc3VlZC1hdCkgY2xhaW1zLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkVGltZXN0YW1wID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIGNvbnN0IG5vdyA9IE1hdGguZmxvb3IobmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwKTtcclxuICAgIGxldCB2YWxpZFNpbmNlID0gMCwgdmFsaWRVbnRpbCA9IDA7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCduYmYnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWyduYmYnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFNpbmNlID0gY2xhaW1zWydpYXQnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnZXhwJykpIHtcclxuICAgICAgICAgICAgdmFsaWRVbnRpbCA9IGNsYWltc1snZXhwJ107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyB0b2tlbiB3aWxsIGV4cGlyZSBhZnRlciAyNGggYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gdmFsaWRTaW5jZSArIDg2NDAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiAoISFub3cgJiZcclxuICAgICAgICAhIXZhbGlkU2luY2UgJiZcclxuICAgICAgICAhIXZhbGlkVW50aWwgJiZcclxuICAgICAgICBub3cgPj0gdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgIG5vdyA8PSB2YWxpZFVudGlsKTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgcmV0dXJucyBpdHMgaXNzdWVkIGF0IHRpbWUgaWYgdmFsaWQsIG51bGwgb3RoZXJ3aXNlLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIG51bGwgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc3N1ZWRBdFRpbWUgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgaWYgKHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0JykpIHtcclxuICAgICAgICByZXR1cm4gY2xhaW1zWydpYXQnXTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCBjaGVja3MgdGhlIHZhbGlkaXR5IG9mIGl0cyBmb3JtYXQuIEV4cGVjdHMgYSB2YWxpZCBpc3N1ZWQtYXQgdGltZS5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNWYWxpZEZvcm1hdCA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgZGVjb2RlZCA9IGRlY29kZSh0b2tlbiksIGNsYWltcyA9IGRlY29kZWQuY2xhaW1zO1xyXG4gICAgcmV0dXJuICEhY2xhaW1zICYmIHR5cGVvZiBjbGFpbXMgPT09ICdvYmplY3QnICYmIGNsYWltcy5oYXNPd25Qcm9wZXJ0eSgnaWF0Jyk7XHJcbn07XHJcbi8qKlxyXG4gKiBBdHRlbXB0cyB0byBwZWVyIGludG8gYW4gYXV0aCB0b2tlbiBhbmQgZGV0ZXJtaW5lIGlmIGl0J3MgYW4gYWRtaW4gYXV0aCB0b2tlbiBieSBsb29raW5nIGF0IHRoZSBjbGFpbXMgcG9ydGlvbi5cclxuICpcclxuICogTm90ZXM6XHJcbiAqIC0gTWF5IHJldHVybiBhIGZhbHNlIG5lZ2F0aXZlIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgaXNBZG1pbiA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICByZXR1cm4gdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zWydhZG1pbiddID09PSB0cnVlO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb250YWlucyhvYmosIGtleSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XHJcbn1cclxuZnVuY3Rpb24gc2FmZUdldChvYmosIGtleSkge1xyXG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICByZXR1cm4gb2JqW2tleV07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzRW1wdHkob2JqKSB7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gbWFwKG9iaiwgZm4sIGNvbnRleHRPYmopIHtcclxuICAgIGNvbnN0IHJlcyA9IHt9O1xyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcclxuICAgICAgICAgICAgcmVzW2tleV0gPSBmbi5jYWxsKGNvbnRleHRPYmosIG9ialtrZXldLCBrZXksIG9iaik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlcztcclxufVxyXG4vKipcclxuICogRGVlcCBlcXVhbCB0d28gb2JqZWN0cy4gU3VwcG9ydCBBcnJheXMgYW5kIE9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXF1YWwoYSwgYikge1xyXG4gICAgaWYgKGEgPT09IGIpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGFLZXlzID0gT2JqZWN0LmtleXMoYSk7XHJcbiAgICBjb25zdCBiS2V5cyA9IE9iamVjdC5rZXlzKGIpO1xyXG4gICAgZm9yIChjb25zdCBrIG9mIGFLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFiS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFQcm9wID0gYVtrXTtcclxuICAgICAgICBjb25zdCBiUHJvcCA9IGJba107XHJcbiAgICAgICAgaWYgKGlzT2JqZWN0KGFQcm9wKSAmJiBpc09iamVjdChiUHJvcCkpIHtcclxuICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVByb3AsIGJQcm9wKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGFQcm9wICE9PSBiUHJvcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBrIG9mIGJLZXlzKSB7XHJcbiAgICAgICAgaWYgKCFhS2V5cy5pbmNsdWRlcyhrKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodGhpbmcpIHtcclxuICAgIHJldHVybiB0aGluZyAhPT0gbnVsbCAmJiB0eXBlb2YgdGhpbmcgPT09ICdvYmplY3QnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgcXVlcnlzdHJpbmctZm9ybWF0dGVkIHN0cmluZyAoZS5nLiAmYXJnPXZhbCZhcmcyPXZhbDIpIGZyb20gYVxyXG4gKiBwYXJhbXMgb2JqZWN0IChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKiBOb3RlOiBZb3UgbXVzdCBwcmVwZW5kIGl0IHdpdGggPyB3aGVuIGFkZGluZyBpdCB0byBhIFVSTC5cclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nUGFyYW1zKSB7XHJcbiAgICBjb25zdCBwYXJhbXMgPSBbXTtcclxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHF1ZXJ5c3RyaW5nUGFyYW1zKSkge1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKGFycmF5VmFsID0+IHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KGFycmF5VmFsKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGFyYW1zLmxlbmd0aCA/ICcmJyArIHBhcmFtcy5qb2luKCcmJykgOiAnJztcclxufVxyXG4vKipcclxuICogRGVjb2RlcyBhIHF1ZXJ5c3RyaW5nIChlLmcuID9hcmc9dmFsJmFyZzI9dmFsMikgaW50byBhIHBhcmFtcyBvYmplY3RcclxuICogKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZ0RlY29kZShxdWVyeXN0cmluZykge1xyXG4gICAgY29uc3Qgb2JqID0ge307XHJcbiAgICBjb25zdCB0b2tlbnMgPSBxdWVyeXN0cmluZy5yZXBsYWNlKC9eXFw/LywgJycpLnNwbGl0KCcmJyk7XHJcbiAgICB0b2tlbnMuZm9yRWFjaCh0b2tlbiA9PiB7XHJcbiAgICAgICAgaWYgKHRva2VuKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IHRva2VuLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgICAgIG9ialtkZWNvZGVVUklDb21wb25lbnQoa2V5KV0gPSBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG9iajtcclxufVxyXG4vKipcclxuICogRXh0cmFjdCB0aGUgcXVlcnkgc3RyaW5nIHBhcnQgb2YgYSBVUkwsIGluY2x1ZGluZyB0aGUgbGVhZGluZyBxdWVzdGlvbiBtYXJrIChpZiBwcmVzZW50KS5cclxuICovXHJcbmZ1bmN0aW9uIGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpIHtcclxuICAgIGNvbnN0IHF1ZXJ5U3RhcnQgPSB1cmwuaW5kZXhPZignPycpO1xyXG4gICAgaWYgKCFxdWVyeVN0YXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhZ21lbnRTdGFydCA9IHVybC5pbmRleE9mKCcjJywgcXVlcnlTdGFydCk7XHJcbiAgICByZXR1cm4gdXJsLnN1YnN0cmluZyhxdWVyeVN0YXJ0LCBmcmFnbWVudFN0YXJ0ID4gMCA/IGZyYWdtZW50U3RhcnQgOiB1bmRlZmluZWQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaC5cclxuICogVmFyaWFibGUgbmFtZXMgZm9sbG93IHRoZSBub3RhdGlvbiBpbiBGSVBTIFBVQiAxODAtMzpcclxuICogaHR0cDovL2NzcmMubmlzdC5nb3YvcHVibGljYXRpb25zL2ZpcHMvZmlwczE4MC0zL2ZpcHMxODAtM19maW5hbC5wZGYuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKiAgIHZhciBzaGExID0gbmV3IHNoYTEoKTtcclxuICogICBzaGExLnVwZGF0ZShieXRlcyk7XHJcbiAqICAgdmFyIGhhc2ggPSBzaGExLmRpZ2VzdCgpO1xyXG4gKlxyXG4gKiBQZXJmb3JtYW5jZTpcclxuICogICBDaHJvbWUgMjM6ICAgfjQwMCBNYml0L3NcclxuICogICBGaXJlZm94IDE2OiAgfjI1MCBNYml0L3NcclxuICpcclxuICovXHJcbi8qKlxyXG4gKiBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2ggY29uc3RydWN0b3IuXHJcbiAqXHJcbiAqIFRoZSBwcm9wZXJ0aWVzIGRlY2xhcmVkIGhlcmUgYXJlIGRpc2N1c3NlZCBpbiB0aGUgYWJvdmUgYWxnb3JpdGhtIGRvY3VtZW50LlxyXG4gKiBAY29uc3RydWN0b3JcclxuICogQGZpbmFsXHJcbiAqIEBzdHJ1Y3RcclxuICovXHJcbmNsYXNzIFNoYTEge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSG9sZHMgdGhlIHByZXZpb3VzIHZhbHVlcyBvZiBhY2N1bXVsYXRlZCB2YXJpYWJsZXMgYS1lIGluIHRoZSBjb21wcmVzc19cclxuICAgICAgICAgKiBmdW5jdGlvbi5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuY2hhaW5fID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQSBidWZmZXIgaG9sZGluZyB0aGUgcGFydGlhbGx5IGNvbXB1dGVkIGhhc2ggcmVzdWx0LlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5idWZfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQW4gYXJyYXkgb2YgODAgYnl0ZXMsIGVhY2ggYSBwYXJ0IG9mIHRoZSBtZXNzYWdlIHRvIGJlIGhhc2hlZC4gIFJlZmVycmVkIHRvXHJcbiAgICAgICAgICogYXMgdGhlIG1lc3NhZ2Ugc2NoZWR1bGUgaW4gdGhlIGRvY3MuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLldfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29udGFpbnMgZGF0YSBuZWVkZWQgdG8gcGFkIG1lc3NhZ2VzIGxlc3MgdGhhbiA2NCBieXRlcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucGFkXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEBwcml2YXRlIHtudW1iZXJ9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgICAgIHRoaXMuYmxvY2tTaXplID0gNTEyIC8gODtcclxuICAgICAgICB0aGlzLnBhZF9bMF0gPSAxMjg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmJsb2NrU2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFkX1tpXSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVzZXQoKTtcclxuICAgIH1cclxuICAgIHJlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gMHg2NzQ1MjMwMTtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9IDB4ZWZjZGFiODk7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAweDk4YmFkY2ZlO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gMHgxMDMyNTQ3NjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9IDB4YzNkMmUxZjA7XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSAwO1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW50ZXJuYWwgY29tcHJlc3MgaGVscGVyIGZ1bmN0aW9uLlxyXG4gICAgICogQHBhcmFtIGJ1ZiBCbG9jayB0byBjb21wcmVzcy5cclxuICAgICAqIEBwYXJhbSBvZmZzZXQgT2Zmc2V0IG9mIHRoZSBibG9jayBpbiB0aGUgYnVmZmVyLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29tcHJlc3NfKGJ1Ziwgb2Zmc2V0KSB7XHJcbiAgICAgICAgaWYgKCFvZmZzZXQpIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgVyA9IHRoaXMuV187XHJcbiAgICAgICAgLy8gZ2V0IDE2IGJpZyBlbmRpYW4gd29yZHNcclxuICAgICAgICBpZiAodHlwZW9mIGJ1ZiA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHVzZXIpOiBbYnVnIDgxNDAxMjJdIFJlY2VudCB2ZXJzaW9ucyBvZiBTYWZhcmkgZm9yIE1hYyBPUyBhbmQgaU9TXHJcbiAgICAgICAgICAgICAgICAvLyBoYXZlIGEgYnVnIHRoYXQgdHVybnMgdGhlIHBvc3QtaW5jcmVtZW50ICsrIG9wZXJhdG9yIGludG8gcHJlLWluY3JlbWVudFxyXG4gICAgICAgICAgICAgICAgLy8gZHVyaW5nIEpJVCBjb21waWxhdGlvbi4gIFdlIGhhdmUgY29kZSB0aGF0IGRlcGVuZHMgaGVhdmlseSBvbiBTSEEtMSBmb3JcclxuICAgICAgICAgICAgICAgIC8vIGNvcnJlY3RuZXNzIGFuZCB3aGljaCBpcyBhZmZlY3RlZCBieSB0aGlzIGJ1Zywgc28gSSd2ZSByZW1vdmVkIGFsbCB1c2VzXHJcbiAgICAgICAgICAgICAgICAvLyBvZiBwb3N0LWluY3JlbWVudCArKyBpbiB3aGljaCB0aGUgcmVzdWx0IHZhbHVlIGlzIHVzZWQuICBXZSBjYW4gcmV2ZXJ0XHJcbiAgICAgICAgICAgICAgICAvLyB0aGlzIGNoYW5nZSBvbmNlIHRoZSBTYWZhcmkgYnVnXHJcbiAgICAgICAgICAgICAgICAvLyAoaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEwOTAzNikgaGFzIGJlZW4gZml4ZWQgYW5kXHJcbiAgICAgICAgICAgICAgICAvLyBtb3N0IGNsaWVudHMgaGF2ZSBiZWVuIHVwZGF0ZWQuXHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0KSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMSkgPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDIpIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMyk7XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxNjsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBXW2ldID1cclxuICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVmW29mZnNldCArIDNdO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZXhwYW5kIHRvIDgwIHdvcmRzXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE2OyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCB0ID0gV1tpIC0gM10gXiBXW2kgLSA4XSBeIFdbaSAtIDE0XSBeIFdbaSAtIDE2XTtcclxuICAgICAgICAgICAgV1tpXSA9ICgodCA8PCAxKSB8ICh0ID4+PiAzMSkpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGEgPSB0aGlzLmNoYWluX1swXTtcclxuICAgICAgICBsZXQgYiA9IHRoaXMuY2hhaW5fWzFdO1xyXG4gICAgICAgIGxldCBjID0gdGhpcy5jaGFpbl9bMl07XHJcbiAgICAgICAgbGV0IGQgPSB0aGlzLmNoYWluX1szXTtcclxuICAgICAgICBsZXQgZSA9IHRoaXMuY2hhaW5fWzRdO1xyXG4gICAgICAgIGxldCBmLCBrO1xyXG4gICAgICAgIC8vIFRPRE8odXNlcik6IFRyeSB0byB1bnJvbGwgdGhpcyBsb29wIHRvIHNwZWVkIHVwIHRoZSBjb21wdXRhdGlvbi5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGkgPCA0MCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBkIF4gKGIgJiAoYyBeIGQpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg1YTgyNzk5OTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NmVkOWViYTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDYwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IChiICYgYykgfCAoZCAmIChiIHwgYykpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDhmMWJiY2RjO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHhjYTYyYzFkNjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCB0ID0gKCgoYSA8PCA1KSB8IChhID4+PiAyNykpICsgZiArIGUgKyBrICsgV1tpXSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBlID0gZDtcclxuICAgICAgICAgICAgZCA9IGM7XHJcbiAgICAgICAgICAgIGMgPSAoKGIgPDwgMzApIHwgKGIgPj4+IDIpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGIgPSBhO1xyXG4gICAgICAgICAgICBhID0gdDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAodGhpcy5jaGFpbl9bMF0gKyBhKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAodGhpcy5jaGFpbl9bMV0gKyBiKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMl0gPSAodGhpcy5jaGFpbl9bMl0gKyBjKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAodGhpcy5jaGFpbl9bM10gKyBkKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAodGhpcy5jaGFpbl9bNF0gKyBlKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoYnl0ZXMsIGxlbmd0aCkge1xyXG4gICAgICAgIC8vIFRPRE8oam9obmxlbnopOiB0aWdodGVuIHRoZSBmdW5jdGlvbiBzaWduYXR1cmUgYW5kIHJlbW92ZSB0aGlzIGNoZWNrXHJcbiAgICAgICAgaWYgKGJ5dGVzID09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBsZW5ndGhNaW51c0Jsb2NrID0gbGVuZ3RoIC0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIC8vIFVzaW5nIGxvY2FsIGluc3RlYWQgb2YgbWVtYmVyIHZhcmlhYmxlcyBnaXZlcyB+NSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LlxyXG4gICAgICAgIGNvbnN0IGJ1ZiA9IHRoaXMuYnVmXztcclxuICAgICAgICBsZXQgaW5idWYgPSB0aGlzLmluYnVmXztcclxuICAgICAgICAvLyBUaGUgb3V0ZXIgd2hpbGUgbG9vcCBzaG91bGQgZXhlY3V0ZSBhdCBtb3N0IHR3aWNlLlxyXG4gICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgaGF2ZSBubyBkYXRhIGluIHRoZSBibG9jayB0byB0b3AgdXAsIHdlIGNhbiBkaXJlY3RseSBwcm9jZXNzIHRoZVxyXG4gICAgICAgICAgICAvLyBpbnB1dCBidWZmZXIgKGFzc3VtaW5nIGl0IGNvbnRhaW5zIHN1ZmZpY2llbnQgZGF0YSkuIFRoaXMgZ2l2ZXMgfjI1JVxyXG4gICAgICAgICAgICAvLyBzcGVlZHVwIG9uIENocm9tZSAyMyBhbmQgfjE1JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYsIGJ1dCByZXF1aXJlcyB0aGF0XHJcbiAgICAgICAgICAgIC8vIHRoZSBkYXRhIGlzIHByb3ZpZGVkIGluIGxhcmdlIGNodW5rcyAob3IgaW4gbXVsdGlwbGVzIG9mIDY0IGJ5dGVzKS5cclxuICAgICAgICAgICAgaWYgKGluYnVmID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8PSBsZW5ndGhNaW51c0Jsb2NrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnl0ZXMsIG4pO1xyXG4gICAgICAgICAgICAgICAgICAgIG4gKz0gdGhpcy5ibG9ja1NpemU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzLmNoYXJDb2RlQXQobik7XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXNbbl07XHJcbiAgICAgICAgICAgICAgICAgICAgKytpbmJ1ZjtcclxuICAgICAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluYnVmID09PSB0aGlzLmJsb2NrU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhidWYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmJ1ZiA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEp1bXAgdG8gdGhlIG91dGVyIGxvb3Agc28gd2UgdXNlIHRoZSBmdWxsLWJsb2NrIG9wdGltaXphdGlvbi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW5idWZfID0gaW5idWY7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gKz0gbGVuZ3RoO1xyXG4gICAgfVxyXG4gICAgLyoqIEBvdmVycmlkZSAqL1xyXG4gICAgZGlnZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IGRpZ2VzdCA9IFtdO1xyXG4gICAgICAgIGxldCB0b3RhbEJpdHMgPSB0aGlzLnRvdGFsXyAqIDg7XHJcbiAgICAgICAgLy8gQWRkIHBhZCAweDgwIDB4MDAqLlxyXG4gICAgICAgIGlmICh0aGlzLmluYnVmXyA8IDU2KSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgNTYgLSB0aGlzLmluYnVmXyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIHRoaXMuYmxvY2tTaXplIC0gKHRoaXMuaW5idWZfIC0gNTYpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWRkICMgYml0cy5cclxuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5ibG9ja1NpemUgLSAxOyBpID49IDU2OyBpLS0pIHtcclxuICAgICAgICAgICAgdGhpcy5idWZfW2ldID0gdG90YWxCaXRzICYgMjU1O1xyXG4gICAgICAgICAgICB0b3RhbEJpdHMgLz0gMjU2OyAvLyBEb24ndCB1c2UgYml0LXNoaWZ0aW5nIGhlcmUhXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29tcHJlc3NfKHRoaXMuYnVmXyk7XHJcbiAgICAgICAgbGV0IG4gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAyNDsgaiA+PSAwOyBqIC09IDgpIHtcclxuICAgICAgICAgICAgICAgIGRpZ2VzdFtuXSA9ICh0aGlzLmNoYWluX1tpXSA+PiBqKSAmIDI1NTtcclxuICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlnZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBIZWxwZXIgdG8gbWFrZSBhIFN1YnNjcmliZSBmdW5jdGlvbiAoanVzdCBsaWtlIFByb21pc2UgaGVscHMgbWFrZSBhXHJcbiAqIFRoZW5hYmxlKS5cclxuICpcclxuICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAqICAgICBhcyBhIHByb3h5LlxyXG4gKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWJzY3JpYmUoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgIGNvbnN0IHByb3h5ID0gbmV3IE9ic2VydmVyUHJveHkoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpO1xyXG4gICAgcmV0dXJuIHByb3h5LnN1YnNjcmliZS5iaW5kKHByb3h5KTtcclxufVxyXG4vKipcclxuICogSW1wbGVtZW50IGZhbi1vdXQgZm9yIGFueSBudW1iZXIgb2YgT2JzZXJ2ZXJzIGF0dGFjaGVkIHZpYSBhIHN1YnNjcmliZVxyXG4gKiBmdW5jdGlvbi5cclxuICovXHJcbmNsYXNzIE9ic2VydmVyUHJveHkge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICAgICAqICAgICBhcyBhIHByb3h5LlxyXG4gICAgICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gW107XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZXMgPSBbXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgPSAwO1xyXG4gICAgICAgIC8vIE1pY3JvLXRhc2sgc2NoZWR1bGluZyBieSBjYWxsaW5nIHRhc2sudGhlbigpLlxyXG4gICAgICAgIHRoaXMudGFzayA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gb25Ob09ic2VydmVycztcclxuICAgICAgICAvLyBDYWxsIHRoZSBleGVjdXRvciBhc3luY2hyb25vdXNseSBzbyBzdWJzY3JpYmVycyB0aGF0IGFyZSBjYWxsZWRcclxuICAgICAgICAvLyBzeW5jaHJvbm91c2x5IGFmdGVyIHRoZSBjcmVhdGlvbiBvZiB0aGUgc3Vic2NyaWJlIGZ1bmN0aW9uXHJcbiAgICAgICAgLy8gY2FuIHN0aWxsIHJlY2VpdmUgdGhlIHZlcnkgZmlyc3QgdmFsdWUgZ2VuZXJhdGVkIGluIHRoZSBleGVjdXRvci5cclxuICAgICAgICB0aGlzLnRhc2tcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBleGVjdXRvcih0aGlzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuZXh0KHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoZXJyb3IpO1xyXG4gICAgfVxyXG4gICAgY29tcGxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdWJzY3JpYmUgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgYW4gT2JzZXJ2ZXIgdG8gdGhlIGZhbi1vdXQgbGlzdC5cclxuICAgICAqXHJcbiAgICAgKiAtIFdlIHJlcXVpcmUgdGhhdCBubyBldmVudCBpcyBzZW50IHRvIGEgc3Vic2NyaWJlciBzeWNocm9ub3VzbHkgdG8gdGhlaXJcclxuICAgICAqICAgY2FsbCB0byBzdWJzY3JpYmUoKS5cclxuICAgICAqL1xyXG4gICAgc3Vic2NyaWJlKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGUpIHtcclxuICAgICAgICBsZXQgb2JzZXJ2ZXI7XHJcbiAgICAgICAgaWYgKG5leHRPck9ic2VydmVyID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgZXJyb3IgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBjb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBPYnNlcnZlci4nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQXNzZW1ibGUgYW4gT2JzZXJ2ZXIgb2JqZWN0IHdoZW4gcGFzc2VkIGFzIGNhbGxiYWNrIGZ1bmN0aW9ucy5cclxuICAgICAgICBpZiAoaW1wbGVtZW50c0FueU1ldGhvZHMobmV4dE9yT2JzZXJ2ZXIsIFtcclxuICAgICAgICAgICAgJ25leHQnLFxyXG4gICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAnY29tcGxldGUnXHJcbiAgICAgICAgXSkpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0ge1xyXG4gICAgICAgICAgICAgICAgbmV4dDogbmV4dE9yT2JzZXJ2ZXIsXHJcbiAgICAgICAgICAgICAgICBlcnJvcixcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5uZXh0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5lcnJvciA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YiA9IHRoaXMudW5zdWJzY3JpYmVPbmUuYmluZCh0aGlzLCB0aGlzLm9ic2VydmVycy5sZW5ndGgpO1xyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gc3Vic2NyaWJlIHRvIGEgdGVybWluYXRlZCBPYnNlcnZhYmxlIC0gd2VcclxuICAgICAgICAvLyBqdXN0IHJlc3BvbmQgdG8gdGhlIE9ic2VydmVyIHdpdGggdGhlIGZpbmFsIGVycm9yIG9yIGNvbXBsZXRlXHJcbiAgICAgICAgLy8gZXZlbnQuXHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5maW5hbEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKHRoaXMuZmluYWxFcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbm90aGluZ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMucHVzaChvYnNlcnZlcik7XHJcbiAgICAgICAgcmV0dXJuIHVuc3ViO1xyXG4gICAgfVxyXG4gICAgLy8gVW5zdWJzY3JpYmUgaXMgc3luY2hyb25vdXMgLSB3ZSBndWFyYW50ZWUgdGhhdCBubyBldmVudHMgYXJlIHNlbnQgdG9cclxuICAgIC8vIGFueSB1bnN1YnNjcmliZWQgT2JzZXJ2ZXIuXHJcbiAgICB1bnN1YnNjcmliZU9uZShpKSB7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzID09PSB1bmRlZmluZWQgfHwgdGhpcy5vYnNlcnZlcnNbaV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlbGV0ZSB0aGlzLm9ic2VydmVyc1tpXTtcclxuICAgICAgICB0aGlzLm9ic2VydmVyQ291bnQgLT0gMTtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlckNvdW50ID09PSAwICYmIHRoaXMub25Ob09ic2VydmVycyAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3JFYWNoT2JzZXJ2ZXIoZm4pIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gQWxyZWFkeSBjbG9zZWQgYnkgcHJldmlvdXMgZXZlbnQuLi4uanVzdCBlYXQgdGhlIGFkZGl0aW9uYWwgdmFsdWVzLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNpbmNlIHNlbmRPbmUgY2FsbHMgYXN5bmNocm9ub3VzbHkgLSB0aGVyZSBpcyBubyBjaGFuY2UgdGhhdFxyXG4gICAgICAgIC8vIHRoaXMub2JzZXJ2ZXJzIHdpbGwgYmVjb21lIHVuZGVmaW5lZC5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMub2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZE9uZShpLCBmbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQ2FsbCB0aGUgT2JzZXJ2ZXIgdmlhIG9uZSBvZiBpdCdzIGNhbGxiYWNrIGZ1bmN0aW9uLiBXZSBhcmUgY2FyZWZ1bCB0b1xyXG4gICAgLy8gY29uZmlybSB0aGF0IHRoZSBvYnNlcnZlIGhhcyBub3QgYmVlbiB1bnN1YnNjcmliZWQgc2luY2UgdGhpcyBhc3luY2hyb25vdXNcclxuICAgIC8vIGZ1bmN0aW9uIGhhZCBiZWVuIHF1ZXVlZC5cclxuICAgIHNlbmRPbmUoaSwgZm4pIHtcclxuICAgICAgICAvLyBFeGVjdXRlIHRoZSBjYWxsYmFjayBhc3luY2hyb25vdXNseVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm9ic2VydmVycyAhPT0gdW5kZWZpbmVkICYmIHRoaXMub2JzZXJ2ZXJzW2ldICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm4odGhpcy5vYnNlcnZlcnNbaV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgZXhjZXB0aW9ucyByYWlzZWQgaW4gT2JzZXJ2ZXJzIG9yIG1pc3NpbmcgbWV0aG9kcyBvZiBhblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIE9ic2VydmVyLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIExvZyBlcnJvciB0byBjb25zb2xlLiBiLzMxNDA0ODA2XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiBjb25zb2xlLmVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZShlcnIpIHtcclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKGVyciAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZmluYWxFcnJvciA9IGVycjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUHJveHkgaXMgbm8gbG9uZ2VyIG5lZWRlZCAtIGdhcmJhZ2UgY29sbGVjdCByZWZlcmVuY2VzXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKiogVHVybiBzeW5jaHJvbm91cyBmdW5jdGlvbiBpbnRvIG9uZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkuICovXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmZ1bmN0aW9uIGFzeW5jKGZuLCBvbkVycm9yKSB7XHJcbiAgICByZXR1cm4gKC4uLmFyZ3MpID0+IHtcclxuICAgICAgICBQcm9taXNlLnJlc29sdmUodHJ1ZSlcclxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBmbiguLi5hcmdzKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChvbkVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBvbkVycm9yKGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogUmV0dXJuIHRydWUgaWYgdGhlIG9iamVjdCBwYXNzZWQgaW4gaW1wbGVtZW50cyBhbnkgb2YgdGhlIG5hbWVkIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmogJiYgdHlwZW9mIG9ialttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxyXG5mdW5jdGlvbiBub29wKCkge1xyXG4gICAgLy8gZG8gbm90aGluZ1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaGVjayB0byBtYWtlIHN1cmUgdGhlIGFwcHJvcHJpYXRlIG51bWJlciBvZiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIGZvciBhIHB1YmxpYyBmdW5jdGlvbi5cclxuICogVGhyb3dzIGFuIGVycm9yIGlmIGl0IGZhaWxzLlxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBtaW5Db3VudCBUaGUgbWluaW11bSBudW1iZXIgb2YgYXJndW1lbnRzIHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gbWF4Q291bnQgVGhlIG1heGltdW0gbnVtYmVyIG9mIGFyZ3VtZW50IHRvIGFsbG93IGZvciB0aGUgZnVuY3Rpb24gY2FsbFxyXG4gKiBAcGFyYW0gYXJnQ291bnQgVGhlIGFjdHVhbCBudW1iZXIgb2YgYXJndW1lbnRzIHByb3ZpZGVkLlxyXG4gKi9cclxuY29uc3QgdmFsaWRhdGVBcmdDb3VudCA9IGZ1bmN0aW9uIChmbk5hbWUsIG1pbkNvdW50LCBtYXhDb3VudCwgYXJnQ291bnQpIHtcclxuICAgIGxldCBhcmdFcnJvcjtcclxuICAgIGlmIChhcmdDb3VudCA8IG1pbkNvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSAnYXQgbGVhc3QgJyArIG1pbkNvdW50O1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoYXJnQ291bnQgPiBtYXhDb3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gbWF4Q291bnQgPT09IDAgPyAnbm9uZScgOiAnbm8gbW9yZSB0aGFuICcgKyBtYXhDb3VudDtcclxuICAgIH1cclxuICAgIGlmIChhcmdFcnJvcikge1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gZm5OYW1lICtcclxuICAgICAgICAgICAgJyBmYWlsZWQ6IFdhcyBjYWxsZWQgd2l0aCAnICtcclxuICAgICAgICAgICAgYXJnQ291bnQgK1xyXG4gICAgICAgICAgICAoYXJnQ291bnQgPT09IDEgPyAnIGFyZ3VtZW50LicgOiAnIGFyZ3VtZW50cy4nKSArXHJcbiAgICAgICAgICAgICcgRXhwZWN0cyAnICtcclxuICAgICAgICAgICAgYXJnRXJyb3IgK1xyXG4gICAgICAgICAgICAnLic7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yKTtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB0byBwcmVmaXggYW4gZXJyb3IgbWVzc2FnZSBhYm91dCBmYWlsZWQgYXJndW1lbnQgdmFsaWRhdGlvblxyXG4gKlxyXG4gKiBAcGFyYW0gZm5OYW1lIFRoZSBmdW5jdGlvbiBuYW1lXHJcbiAqIEBwYXJhbSBhcmdOYW1lIFRoZSBuYW1lIG9mIHRoZSBhcmd1bWVudFxyXG4gKiBAcmV0dXJuIFRoZSBwcmVmaXggdG8gYWRkIHRvIHRoZSBlcnJvciB0aHJvd24gZm9yIHZhbGlkYXRpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBlcnJvclByZWZpeChmbk5hbWUsIGFyZ05hbWUpIHtcclxuICAgIHJldHVybiBgJHtmbk5hbWV9IGZhaWxlZDogJHthcmdOYW1lfSBhcmd1bWVudCBgO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gZm5OYW1lXHJcbiAqIEBwYXJhbSBhcmd1bWVudE51bWJlclxyXG4gKiBAcGFyYW0gbmFtZXNwYWNlXHJcbiAqIEBwYXJhbSBvcHRpb25hbFxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVOYW1lc3BhY2UoZm5OYW1lLCBuYW1lc3BhY2UsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIW5hbWVzcGFjZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgbmFtZXNwYWNlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIC8vVE9ETzogSSBzaG91bGQgZG8gbW9yZSB2YWxpZGF0aW9uIGhlcmUuIFdlIG9ubHkgYWxsb3cgY2VydGFpbiBjaGFycyBpbiBuYW1lc3BhY2VzLlxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsICduYW1lc3BhY2UnKSArICdtdXN0IGJlIGEgdmFsaWQgZmlyZWJhc2UgbmFtZXNwYWNlLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ2FsbGJhY2soZm5OYW1lLCBhcmd1bWVudE5hbWUsIFxyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5jYWxsYmFjaywgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY2FsbGJhY2spIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgZnVuY3Rpb24uJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDb250ZXh0T2JqZWN0KGZuTmFtZSwgYXJndW1lbnROYW1lLCBjb250ZXh0LCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb250ZXh0ICE9PSAnb2JqZWN0JyB8fCBjb250ZXh0ID09PSBudWxsKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgYXJndW1lbnROYW1lKSArICdtdXN0IGJlIGEgdmFsaWQgY29udGV4dCBvYmplY3QuJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gQ29kZSBvcmlnaW5hbGx5IGNhbWUgZnJvbSBnb29nLmNyeXB0LnN0cmluZ1RvVXRmOEJ5dGVBcnJheSwgYnV0IGZvciBzb21lIHJlYXNvbiB0aGV5XHJcbi8vIGF1dG9tYXRpY2FsbHkgcmVwbGFjZWQgJ1xcclxcbicgd2l0aCAnXFxuJywgYW5kIHRoZXkgZGlkbid0IGhhbmRsZSBzdXJyb2dhdGUgcGFpcnMsXHJcbi8vIHNvIGl0J3MgYmVlbiBtb2RpZmllZC5cclxuLy8gTm90ZSB0aGF0IG5vdCBhbGwgVW5pY29kZSBjaGFyYWN0ZXJzIGFwcGVhciBhcyBzaW5nbGUgY2hhcmFjdGVycyBpbiBKYXZhU2NyaXB0IHN0cmluZ3MuXHJcbi8vIGZyb21DaGFyQ29kZSByZXR1cm5zIHRoZSBVVEYtMTYgZW5jb2Rpbmcgb2YgYSBjaGFyYWN0ZXIgLSBzbyBzb21lIFVuaWNvZGUgY2hhcmFjdGVyc1xyXG4vLyB1c2UgMiBjaGFyYWN0ZXJzIGluIEphdmFzY3JpcHQuICBBbGwgNC1ieXRlIFVURi04IGNoYXJhY3RlcnMgYmVnaW4gd2l0aCBhIGZpcnN0XHJcbi8vIGNoYXJhY3RlciBpbiB0aGUgcmFuZ2UgMHhEODAwIC0gMHhEQkZGICh0aGUgZmlyc3QgY2hhcmFjdGVyIG9mIGEgc28tY2FsbGVkIHN1cnJvZ2F0ZVxyXG4vLyBwYWlyKS5cclxuLy8gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi81LjEvI3NlYy0xNS4xLjNcclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7QXJyYXl9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdUb0J5dGVBcnJheSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGNvbnN0IG91dCA9IFtdO1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBsZXQgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIC8vIElzIHRoaXMgdGhlIGxlYWQgc3Vycm9nYXRlIGluIGEgc3Vycm9nYXRlIHBhaXI/XHJcbiAgICAgICAgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhpZ2ggPSBjIC0gMHhkODAwOyAvLyB0aGUgaGlnaCAxMCBiaXRzLlxyXG4gICAgICAgICAgICBpKys7XHJcbiAgICAgICAgICAgIGFzc2VydChpIDwgc3RyLmxlbmd0aCwgJ1N1cnJvZ2F0ZSBwYWlyIG1pc3NpbmcgdHJhaWwgc3Vycm9nYXRlLicpO1xyXG4gICAgICAgICAgICBjb25zdCBsb3cgPSBzdHIuY2hhckNvZGVBdChpKSAtIDB4ZGMwMDsgLy8gdGhlIGxvdyAxMCBiaXRzLlxyXG4gICAgICAgICAgICBjID0gMHgxMDAwMCArIChoaWdoIDw8IDEwKSArIGxvdztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSBjO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDYpIHwgMTkyO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgNjU1MzYpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxOCkgfCAyNDA7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDEyKSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG91dDtcclxufTtcclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBsZW5ndGggd2l0aG91dCBhY3R1YWxseSBjb252ZXJ0aW5nOyB1c2VmdWwgZm9yIGRvaW5nIGNoZWFwZXIgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtudW1iZXJ9XHJcbiAqL1xyXG5jb25zdCBzdHJpbmdMZW5ndGggPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBwKys7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIHAgKz0gMjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgLy8gTGVhZCBzdXJyb2dhdGUgb2YgYSBzdXJyb2dhdGUgcGFpci4gIFRoZSBwYWlyIHRvZ2V0aGVyIHdpbGwgdGFrZSA0IGJ5dGVzIHRvIHJlcHJlc2VudC5cclxuICAgICAgICAgICAgcCArPSA0O1xyXG4gICAgICAgICAgICBpKys7IC8vIHNraXAgdHJhaWwgc3Vycm9nYXRlLlxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcCArPSAzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwO1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGFtb3VudCBvZiBtaWxsaXNlY29uZHMgdG8gZXhwb25lbnRpYWxseSBpbmNyZWFzZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfSU5URVJWQUxfTUlMTElTID0gMTAwMDtcclxuLyoqXHJcbiAqIFRoZSBmYWN0b3IgdG8gYmFja29mZiBieS5cclxuICogU2hvdWxkIGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAxLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUiA9IDI7XHJcbi8qKlxyXG4gKiBUaGUgbWF4aW11bSBtaWxsaXNlY29uZHMgdG8gaW5jcmVhc2UgdG8uXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IE1BWF9WQUxVRV9NSUxMSVMgPSA0ICogNjAgKiA2MCAqIDEwMDA7IC8vIEZvdXIgaG91cnMsIGxpa2UgaU9TIGFuZCBBbmRyb2lkLlxyXG4vKipcclxuICogVGhlIHBlcmNlbnRhZ2Ugb2YgYmFja29mZiB0aW1lIHRvIHJhbmRvbWl6ZSBieS5cclxuICogU2VlXHJcbiAqIGh0dHA6Ly9nby9zYWZlLWNsaWVudC1iZWhhdmlvciNzdGVwLTEtZGV0ZXJtaW5lLXRoZS1hcHByb3ByaWF0ZS1yZXRyeS1pbnRlcnZhbC10by1oYW5kbGUtc3Bpa2UtdHJhZmZpY1xyXG4gKiBmb3IgY29udGV4dC5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgUkFORE9NX0ZBQ1RPUiA9IDAuNTtcclxuLyoqXHJcbiAqIEJhc2VkIG9uIHRoZSBiYWNrb2ZmIG1ldGhvZCBmcm9tXHJcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvbWFzdGVyL2Nsb3N1cmUvZ29vZy9tYXRoL2V4cG9uZW50aWFsYmFja29mZi5qcy5cclxuICogRXh0cmFjdGVkIGhlcmUgc28gd2UgZG9uJ3QgbmVlZCB0byBwYXNzIG1ldGFkYXRhIGFuZCBhIHN0YXRlZnVsIEV4cG9uZW50aWFsQmFja29mZiBvYmplY3QgYXJvdW5kLlxyXG4gKi9cclxuZnVuY3Rpb24gY2FsY3VsYXRlQmFja29mZk1pbGxpcyhiYWNrb2ZmQ291bnQsIGludGVydmFsTWlsbGlzID0gREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMsIGJhY2tvZmZGYWN0b3IgPSBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SKSB7XHJcbiAgICAvLyBDYWxjdWxhdGVzIGFuIGV4cG9uZW50aWFsbHkgaW5jcmVhc2luZyB2YWx1ZS5cclxuICAgIC8vIERldmlhdGlvbjogY2FsY3VsYXRlcyB2YWx1ZSBmcm9tIGNvdW50IGFuZCBhIGNvbnN0YW50IGludGVydmFsLCBzbyB3ZSBvbmx5IG5lZWQgdG8gc2F2ZSB2YWx1ZVxyXG4gICAgLy8gYW5kIGNvdW50IHRvIHJlc3RvcmUgc3RhdGUuXHJcbiAgICBjb25zdCBjdXJyQmFzZVZhbHVlID0gaW50ZXJ2YWxNaWxsaXMgKiBNYXRoLnBvdyhiYWNrb2ZmRmFjdG9yLCBiYWNrb2ZmQ291bnQpO1xyXG4gICAgLy8gQSByYW5kb20gXCJmdXp6XCIgdG8gYXZvaWQgd2F2ZXMgb2YgcmV0cmllcy5cclxuICAgIC8vIERldmlhdGlvbjogcmFuZG9tRmFjdG9yIGlzIHJlcXVpcmVkLlxyXG4gICAgY29uc3QgcmFuZG9tV2FpdCA9IE1hdGgucm91bmQoXHJcbiAgICAvLyBBIGZyYWN0aW9uIG9mIHRoZSBiYWNrb2ZmIHZhbHVlIHRvIGFkZC9zdWJ0cmFjdC5cclxuICAgIC8vIERldmlhdGlvbjogY2hhbmdlcyBtdWx0aXBsaWNhdGlvbiBvcmRlciB0byBpbXByb3ZlIHJlYWRhYmlsaXR5LlxyXG4gICAgUkFORE9NX0ZBQ1RPUiAqXHJcbiAgICAgICAgY3VyckJhc2VWYWx1ZSAqXHJcbiAgICAgICAgLy8gQSByYW5kb20gZmxvYXQgKHJvdW5kZWQgdG8gaW50IGJ5IE1hdGgucm91bmQgYWJvdmUpIGluIHRoZSByYW5nZSBbLTEsIDFdLiBEZXRlcm1pbmVzXHJcbiAgICAgICAgLy8gaWYgd2UgYWRkIG9yIHN1YnRyYWN0LlxyXG4gICAgICAgIChNYXRoLnJhbmRvbSgpIC0gMC41KSAqXHJcbiAgICAgICAgMik7XHJcbiAgICAvLyBMaW1pdHMgYmFja29mZiB0byBtYXggdG8gYXZvaWQgZWZmZWN0aXZlbHkgcGVybWFuZW50IGJhY2tvZmYuXHJcbiAgICByZXR1cm4gTWF0aC5taW4oTUFYX1ZBTFVFX01JTExJUywgY3VyckJhc2VWYWx1ZSArIHJhbmRvbVdhaXQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlIEVuZ2xpc2ggb3JkaW5hbCBsZXR0ZXJzIGFmdGVyIGEgbnVtYmVyXHJcbiAqL1xyXG5mdW5jdGlvbiBvcmRpbmFsKGkpIHtcclxuICAgIGlmICghTnVtYmVyLmlzRmluaXRlKGkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2l9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBpICsgaW5kaWNhdG9yKGkpO1xyXG59XHJcbmZ1bmN0aW9uIGluZGljYXRvcihpKSB7XHJcbiAgICBpID0gTWF0aC5hYnMoaSk7XHJcbiAgICBjb25zdCBjZW50ID0gaSAlIDEwMDtcclxuICAgIGlmIChjZW50ID49IDEwICYmIGNlbnQgPD0gMjApIHtcclxuICAgICAgICByZXR1cm4gJ3RoJztcclxuICAgIH1cclxuICAgIGNvbnN0IGRlYyA9IGkgJSAxMDtcclxuICAgIGlmIChkZWMgPT09IDEpIHtcclxuICAgICAgICByZXR1cm4gJ3N0JztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDIpIHtcclxuICAgICAgICByZXR1cm4gJ25kJztcclxuICAgIH1cclxuICAgIGlmIChkZWMgPT09IDMpIHtcclxuICAgICAgICByZXR1cm4gJ3JkJztcclxuICAgIH1cclxuICAgIHJldHVybiAndGgnO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldE1vZHVsYXJJbnN0YW5jZShzZXJ2aWNlKSB7XHJcbiAgICBpZiAoc2VydmljZSAmJiBzZXJ2aWNlLl9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBzZXJ2aWNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCwgZXJyb3JNZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICByZXNvbHZlKGV2ZW50LnRhcmdldC5yZXN1bHQpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIHJlamVjdChgJHtlcnJvck1lc3NhZ2V9OiAkeyhfYSA9IGV2ZW50LnRhcmdldC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIERCV3JhcHBlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGIpIHtcclxuICAgICAgICB0aGlzLl9kYiA9IF9kYjtcclxuICAgICAgICB0aGlzLm9iamVjdFN0b3JlTmFtZXMgPSB0aGlzLl9kYi5vYmplY3RTdG9yZU5hbWVzO1xyXG4gICAgfVxyXG4gICAgdHJhbnNhY3Rpb24oc3RvcmVOYW1lcywgbW9kZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVHJhbnNhY3Rpb25XcmFwcGVyKHRoaXMuX2RiLnRyYW5zYWN0aW9uLmNhbGwodGhpcy5fZGIsIHN0b3JlTmFtZXMsIG1vZGUpKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZU9iamVjdFN0b3JlKHN0b3JlTmFtZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBuZXcgT2JqZWN0U3RvcmVXcmFwcGVyKHRoaXMuX2RiLmNyZWF0ZU9iamVjdFN0b3JlKHN0b3JlTmFtZSwgb3B0aW9ucykpO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZGIuY2xvc2UoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jbGFzcyBUcmFuc2FjdGlvbldyYXBwZXIge1xyXG4gICAgY29uc3RydWN0b3IoX3RyYW5zYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24gPSBfdHJhbnNhY3Rpb247XHJcbiAgICAgICAgdGhpcy5jb21wbGV0ZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24ub25lcnJvciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLl90cmFuc2FjdGlvbi5lcnJvcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLm9uYWJvcnQgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QodGhpcy5fdHJhbnNhY3Rpb24uZXJyb3IpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb2JqZWN0U3RvcmUoc3RvcmVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZVdyYXBwZXIodGhpcy5fdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc3RvcmVOYW1lKSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgT2JqZWN0U3RvcmVXcmFwcGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKF9zdG9yZSkge1xyXG4gICAgICAgIHRoaXMuX3N0b3JlID0gX3N0b3JlO1xyXG4gICAgfVxyXG4gICAgaW5kZXgobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhXcmFwcGVyKHRoaXMuX3N0b3JlLmluZGV4KG5hbWUpKTtcclxuICAgIH1cclxuICAgIGNyZWF0ZUluZGV4KG5hbWUsIGtleXBhdGgsIG9wdGlvbnMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEluZGV4V3JhcHBlcih0aGlzLl9zdG9yZS5jcmVhdGVJbmRleChuYW1lLCBrZXlwYXRoLCBvcHRpb25zKSk7XHJcbiAgICB9XHJcbiAgICBnZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuX3N0b3JlLmdldChrZXkpO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QsICdFcnJvciByZWFkaW5nIGZyb20gSW5kZXhlZERCJyk7XHJcbiAgICB9XHJcbiAgICBwdXQodmFsdWUsIGtleSkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLl9zdG9yZS5wdXQodmFsdWUsIGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCwgJ0Vycm9yIHdyaXRpbmcgdG8gSW5kZXhlZERCJyk7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuX3N0b3JlLmRlbGV0ZShrZXkpO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QsICdFcnJvciBkZWxldGluZyBmcm9tIEluZGV4ZWREQicpO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuX3N0b3JlLmNsZWFyKCk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCwgJ0Vycm9yIGNsZWFyaW5nIEluZGV4ZWREQiBvYmplY3Qgc3RvcmUnKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jbGFzcyBJbmRleFdyYXBwZXIge1xyXG4gICAgY29uc3RydWN0b3IoX2luZGV4KSB7XHJcbiAgICAgICAgdGhpcy5faW5kZXggPSBfaW5kZXg7XHJcbiAgICB9XHJcbiAgICBnZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuX2luZGV4LmdldChrZXkpO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHJlcXVlc3QsICdFcnJvciByZWFkaW5nIGZyb20gSW5kZXhlZERCJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gb3BlbkRCKGRiTmFtZSwgZGJWZXJzaW9uLCB1cGdyYWRlQ2FsbGJhY2spIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKGRiTmFtZSwgZGJWZXJzaW9uKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBEQldyYXBwZXIoZXZlbnQudGFyZ2V0LnJlc3VsdCkpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoYEVycm9yIG9wZW5pbmcgaW5kZXhlZERCOiAkeyhfYSA9IGV2ZW50LnRhcmdldC5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdXBncmFkZUNhbGxiYWNrKG5ldyBEQldyYXBwZXIocmVxdWVzdC5yZXN1bHQpLCBldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBuZXcgVHJhbnNhY3Rpb25XcmFwcGVyKHJlcXVlc3QudHJhbnNhY3Rpb24pKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGBFcnJvciBvcGVuaW5nIGluZGV4ZWREQjogJHtlLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlREIoZGJOYW1lKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoZGJOYW1lKTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChgRXJyb3IgZGVsZXRpbmcgaW5kZXhlZERCIGRhdGFiYXNlIFwiJHtkYk5hbWV9XCI6ICR7KF9hID0gZXZlbnQudGFyZ2V0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGBFcnJvciBkZWxldGluZyBpbmRleGVkREIgZGF0YWJhc2UgXCIke2RiTmFtZX1cIjogJHtlLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cblxuZXhwb3J0IHsgQ09OU1RBTlRTLCBEQldyYXBwZXIsIERlZmVycmVkLCBFcnJvckZhY3RvcnksIEZpcmViYXNlRXJyb3IsIE1BWF9WQUxVRV9NSUxMSVMsIFJBTkRPTV9GQUNUT1IsIFNoYTEsIGFyZUNvb2tpZXNFbmFibGVkLCBhc3NlcnQsIGFzc2VydGlvbkVycm9yLCBhc3luYywgYmFzZTY0LCBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMsIGNvbnRhaW5zLCBjcmVhdGVNb2NrVXNlclRva2VuLCBjcmVhdGVTdWJzY3JpYmUsIGRlY29kZSwgZGVlcENvcHksIGRlZXBFcXVhbCwgZGVlcEV4dGVuZCwgZGVsZXRlREIsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3BlbkRCLCBvcmRpbmFsLCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdmFsaWRhdGVBcmdDb3VudCwgdmFsaWRhdGVDYWxsYmFjaywgdmFsaWRhdGVDb250ZXh0T2JqZWN0LCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlLCB2YWxpZGF0ZU5hbWVzcGFjZSB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IERlZmVycmVkIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQ29tcG9uZW50IGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiBgYXV0aGAsIGBhdXRoLWludGVybmFsYFxyXG4gKi9cclxuY2xhc3MgQ29tcG9uZW50IHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBwdWJsaWMgc2VydmljZSBuYW1lLCBlLmcuIGFwcCwgYXV0aCwgZmlyZXN0b3JlLCBkYXRhYmFzZVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlRmFjdG9yeSBTZXJ2aWNlIGZhY3RvcnkgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZSBwdWJsaWMgaW50ZXJmYWNlXHJcbiAgICAgKiBAcGFyYW0gdHlwZSB3aGV0aGVyIHRoZSBzZXJ2aWNlIHByb3ZpZGVkIGJ5IHRoZSBjb21wb25lbnQgaXMgcHVibGljIG9yIHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgaW5zdGFuY2VGYWN0b3J5LCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlRmFjdG9yeSA9IGluc3RhbmNlRmFjdG9yeTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQcm9wZXJ0aWVzIHRvIGJlIGFkZGVkIHRvIHRoZSBzZXJ2aWNlIG5hbWVzcGFjZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0ge307XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IFwiTEFaWVwiIC8qIExBWlkgKi87XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW50aWF0aW9uTW9kZShtb2RlKSB7XHJcbiAgICAgICAgdGhpcy5pbnN0YW50aWF0aW9uTW9kZSA9IG1vZGU7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRNdWx0aXBsZUluc3RhbmNlcyhtdWx0aXBsZUluc3RhbmNlcykge1xyXG4gICAgICAgIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgPSBtdWx0aXBsZUluc3RhbmNlcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldFNlcnZpY2VQcm9wcyhwcm9wcykge1xyXG4gICAgICAgIHRoaXMuc2VydmljZVByb3BzID0gcHJvcHM7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHRoaXMub25JbnN0YW5jZUNyZWF0ZWQgPSBjYWxsYmFjaztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBpbnN0YW5jZSBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gJ2F1dGgnLCAnYXV0aC1pbnRlcm5hbCdcclxuICogTmFtZVNlcnZpY2VNYXBwaW5nW1RdIGlzIGFuIGFsaWFzIGZvciB0aGUgdHlwZSBvZiB0aGUgaW5zdGFuY2VcclxuICovXHJcbmNsYXNzIFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKG5hbWUsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMub25Jbml0Q2FsbGJhY2tzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBIHByb3ZpZGVyIGNhbiBwcm92aWRlIG11bGl0cGxlIGluc3RhbmNlcyBvZiBhIHNlcnZpY2VcclxuICAgICAqIGlmIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzIGlzIHRydWUuXHJcbiAgICAgKi9cclxuICAgIGdldChpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5oYXMobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlZmVycmVkID0gbmV3IERlZmVycmVkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBkZWZlcnJlZCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNob3VsZEF1dG9Jbml0aWFsaXplKCkpIHtcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemUgdGhlIHNlcnZpY2UgaWYgaXQgY2FuIGJlIGF1dG8taW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyBnZXQoKSwgaXQgc2hvdWxkIG5vdCBjYXVzZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgcmV0dXJuIHRoZSB1bnJlc29sdmVkIHByb21pc2UgaW4gdGhpcyBjYXNlLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmdldChub3JtYWxpemVkSWRlbnRpZmllcikucHJvbWlzZTtcclxuICAgIH1cclxuICAgIGdldEltbWVkaWF0ZShvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIGlmIG11bHRpcGxlSW5zdGFuY2VzIGlzIG5vdCBzdXBwb3J0ZWQsIHVzZSB0aGUgZGVmYXVsdCBuYW1lXHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uYWwgPSAoX2EgPSBvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMub3B0aW9uYWwpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpIHx8XHJcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSW4gY2FzZSBhIGNvbXBvbmVudCBpcyBub3QgaW5pdGlhbGl6ZWQgYW5kIHNob3VsZC9jYW4gbm90IGJlIGF1dG8taW5pdGlhbGl6ZWQgYXQgdGhlIG1vbWVudCwgcmV0dXJuIG51bGwgaWYgdGhlIG9wdGlvbmFsIGZsYWcgaXMgc2V0LCBvciB0aHJvd1xyXG4gICAgICAgICAgICBpZiAob3B0aW9uYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoYFNlcnZpY2UgJHt0aGlzLm5hbWV9IGlzIG5vdCBhdmFpbGFibGVgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldENvbXBvbmVudCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQ7XHJcbiAgICB9XHJcbiAgICBzZXRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgaWYgKGNvbXBvbmVudC5uYW1lICE9PSB0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYE1pc21hdGNoaW5nIENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmb3IgUHJvdmlkZXIgJHt0aGlzLm5hbWV9LmApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCBmb3IgJHt0aGlzLm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcHJvdmlkZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wb25lbnQgPSBjb21wb25lbnQ7XHJcbiAgICAgICAgLy8gcmV0dXJuIGVhcmx5IHdpdGhvdXQgYXR0ZW1wdGluZyB0byBpbml0aWFsaXplIHRoZSBjb21wb25lbnQgaWYgdGhlIGNvbXBvbmVudCByZXF1aXJlcyBleHBsaWNpdCBpbml0aWFsaXphdGlvbiAoY2FsbGluZyBgUHJvdmlkZXIuaW5pdGlhbGl6ZSgpYClcclxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmIHRoZSBzZXJ2aWNlIGlzIGVhZ2VyLCBpbml0aWFsaXplIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbiAgICAgICAgaWYgKGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyOiBERUZBVUxUX0VOVFJZX05BTUUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIGluc3RhbmNlIGZhY3RvcnkgZm9yIGFuIGVhZ2VyIENvbXBvbmVudCB0aHJvd3MgYW4gZXhjZXB0aW9uIGR1cmluZyB0aGUgZWFnZXJcclxuICAgICAgICAgICAgICAgIC8vIGluaXRpYWxpemF0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlIGEgZmF0YWwgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBJbnZlc3RpZ2F0ZSBpZiB3ZSBuZWVkIHRvIG1ha2UgaXQgY29uZmlndXJhYmxlLCBiZWNhdXNlIHNvbWUgY29tcG9uZW50IG1heSB3YW50IHRvIGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yIGluIHRoaXMgY2FzZT9cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBDcmVhdGUgc2VydmljZSBpbnN0YW5jZXMgZm9yIHRoZSBwZW5kaW5nIHByb21pc2VzIGFuZCByZXNvbHZlIHRoZW1cclxuICAgICAgICAvLyBOT1RFOiBpZiB0aGlzLm11bHRpcGxlSW5zdGFuY2VzIGlzIGZhbHNlLCBvbmx5IHRoZSBkZWZhdWx0IGluc3RhbmNlIHdpbGwgYmUgY3JlYXRlZFxyXG4gICAgICAgIC8vIGFuZCBhbGwgcHJvbWlzZXMgd2l0aCByZXNvbHZlIHdpdGggaXQgcmVnYXJkbGVzcyBvZiB0aGUgaWRlbnRpZmllci5cclxuICAgICAgICBmb3IgKGNvbnN0IFtpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlRGVmZXJyZWRdIG9mIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZW50cmllcygpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIGBnZXRPckluaXRpYWxpemVTZXJ2aWNlKClgIHNob3VsZCBhbHdheXMgcmV0dXJuIGEgdmFsaWQgaW5zdGFuY2Ugc2luY2UgYSBjb21wb25lbnQgaXMgZ3VhcmFudGVlZC4gdXNlICEgdG8gbWFrZSB0eXBlc2NyaXB0IGhhcHB5LlxyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSB0aHJvd3MgYW4gZXhjZXB0aW9uLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAvLyBhIGZhdGFsIGVycm9yLiBXZSBqdXN0IGxlYXZlIHRoZSBwcm9taXNlIHVucmVzb2x2ZWQuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbGVhckluc3RhbmNlKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzLmRlbGV0ZShpZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8vIGFwcC5kZWxldGUoKSB3aWxsIGNhbGwgdGhpcyBtZXRob2Qgb24gZXZlcnkgcHJvdmlkZXIgdG8gZGVsZXRlIHRoZSBzZXJ2aWNlc1xyXG4gICAgLy8gVE9ETzogc2hvdWxkIHdlIG1hcmsgdGhlIHByb3ZpZGVyIGFzIGRlbGV0ZWQ/XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3Qgc2VydmljZXMgPSBBcnJheS5mcm9tKHRoaXMuaW5zdGFuY2VzLnZhbHVlcygpKTtcclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ0lOVEVSTkFMJyBpbiBzZXJ2aWNlKSAvLyBsZWdhY3kgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5JTlRFUk5BTC5kZWxldGUoKSksXHJcbiAgICAgICAgICAgIC4uLnNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKHNlcnZpY2UgPT4gJ19kZWxldGUnIGluIHNlcnZpY2UpIC8vIG1vZHVsYXJpemVkIHNlcnZpY2VzXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAgICAgLm1hcChzZXJ2aWNlID0+IHNlcnZpY2UuX2RlbGV0ZSgpKVxyXG4gICAgICAgIF0pO1xyXG4gICAgfVxyXG4gICAgaXNDb21wb25lbnRTZXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50ICE9IG51bGw7XHJcbiAgICB9XHJcbiAgICBpc0luaXRpYWxpemVkKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXMuaGFzKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgZ2V0T3B0aW9ucyhpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5nZXQoaWRlbnRpZmllcikgfHwge307XHJcbiAgICB9XHJcbiAgICBpbml0aWFsaXplKG9wdHMgPSB7fSkge1xyXG4gICAgICAgIGNvbnN0IHsgb3B0aW9ucyA9IHt9IH0gPSBvcHRzO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIob3B0cy5pbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLmlzSW5pdGlhbGl6ZWQobm9ybWFsaXplZElkZW50aWZpZXIpKSB7XHJcbiAgICAgICAgICAgIHRocm93IEVycm9yKGAke3RoaXMubmFtZX0oJHtub3JtYWxpemVkSWRlbnRpZmllcn0pIGhhcyBhbHJlYWR5IGJlZW4gaW5pdGlhbGl6ZWRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYENvbXBvbmVudCAke3RoaXMubmFtZX0gaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQgeWV0YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGluc3RhbmNlID0gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllcixcclxuICAgICAgICAgICAgb3B0aW9uc1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJlc29sdmUgYW55IHBlbmRpbmcgcHJvbWlzZSB3YWl0aW5nIGZvciB0aGUgc2VydmljZSBpbnN0YW5jZVxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIGlmIChub3JtYWxpemVkSWRlbnRpZmllciA9PT0gbm9ybWFsaXplZERlZmVycmVkSWRlbnRpZmllcikge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2VEZWZlcnJlZC5yZXNvbHZlKGluc3RhbmNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBpbnZva2VkICBhZnRlciB0aGUgcHJvdmlkZXIgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgYnkgY2FsbGluZyBwcm92aWRlci5pbml0aWFsaXplKCkuXHJcbiAgICAgKiBUaGUgZnVuY3Rpb24gaXMgaW52b2tlZCBTWU5DSFJPTk9VU0xZLCBzbyBpdCBzaG91bGQgbm90IGV4ZWN1dGUgYW55IGxvbmdydW5uaW5nIHRhc2tzIGluIG9yZGVyIHRvIG5vdCBibG9jayB0aGUgcHJvZ3JhbS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRlbnRpZmllciBBbiBvcHRpb25hbCBpbnN0YW5jZSBpZGVudGlmaWVyXHJcbiAgICAgKiBAcmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVucmVnaXN0ZXIgdGhlIGNhbGxiYWNrXHJcbiAgICAgKi9cclxuICAgIG9uSW5pdChjYWxsYmFjaywgaWRlbnRpZmllcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ2FsbGJhY2tzID0gKF9hID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbmV3IFNldCgpO1xyXG4gICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmFkZChjYWxsYmFjayk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3Muc2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyLCBleGlzdGluZ0NhbGxiYWNrcyk7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgY2FsbGJhY2soZXhpc3RpbmdJbnN0YW5jZSwgbm9ybWFsaXplZElkZW50aWZpZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgICAgICBleGlzdGluZ0NhbGxiYWNrcy5kZWxldGUoY2FsbGJhY2spO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludm9rZSBvbkluaXQgY2FsbGJhY2tzIHN5bmNocm9ub3VzbHlcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZSB0aGUgc2VydmljZSBpbnN0YW5jZWBcclxuICAgICAqL1xyXG4gICAgaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgY29uc3QgY2FsbGJhY2tzID0gdGhpcy5vbkluaXRDYWxsYmFja3MuZ2V0KGlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghY2FsbGJhY2tzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGluc3RhbmNlLCBpZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5pdCBjYWxsYmFja1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0T3JJbml0aWFsaXplU2VydmljZSh7IGluc3RhbmNlSWRlbnRpZmllciwgb3B0aW9ucyA9IHt9IH0pIHtcclxuICAgICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLmluc3RhbmNlcy5nZXQoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlICYmIHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gdGhpcy5jb21wb25lbnQuaW5zdGFuY2VGYWN0b3J5KHRoaXMuY29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGluc3RhbmNlSWRlbnRpZmllciksXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zKTtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIEludm9rZSBvbkluaXQgbGlzdGVuZXJzLlxyXG4gICAgICAgICAgICAgKiBOb3RlIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkIGlzIGRpZmZlcmVudCwgd2hpY2ggaXMgdXNlZCBieSB0aGUgY29tcG9uZW50IGNyZWF0b3IsXHJcbiAgICAgICAgICAgICAqIHdoaWxlIG9uSW5pdCBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQgYnkgY29uc3VtZXJzIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIHRoaXMuaW52b2tlT25Jbml0Q2FsbGJhY2tzKGluc3RhbmNlLCBpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogT3JkZXIgaXMgaW1wb3J0YW50XHJcbiAgICAgICAgICAgICAqIG9uSW5zdGFuY2VDcmVhdGVkKCkgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciB0aGlzLmluc3RhbmNlcy5zZXQoaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZSk7IHdoaWNoXHJcbiAgICAgICAgICAgICAqIG1ha2VzIGBpc0luaXRpYWxpemVkKClgIHJldHVybiB0cnVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lm9uSW5zdGFuY2VDcmVhdGVkKHRoaXMuY29udGFpbmVyLCBpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBlcnJvcnMgaW4gdGhlIG9uSW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIG5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudC5tdWx0aXBsZUluc3RhbmNlcyA/IGlkZW50aWZpZXIgOiBERUZBVUxUX0VOVFJZX05BTUU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gaWRlbnRpZmllcjsgLy8gYXNzdW1lIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgc3VwcG9ydGVkIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIHByb3ZpZGVkLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3VsZEF1dG9Jbml0aWFsaXplKCkge1xyXG4gICAgICAgIHJldHVybiAoISF0aGlzLmNvbXBvbmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSAhPT0gXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKTtcclxuICAgIH1cclxufVxyXG4vLyB1bmRlZmluZWQgc2hvdWxkIGJlIHBhc3NlZCB0byB0aGUgc2VydmljZSBmYWN0b3J5IGZvciB0aGUgZGVmYXVsdCBpbnN0YW5jZVxyXG5mdW5jdGlvbiBub3JtYWxpemVJZGVudGlmaWVyRm9yRmFjdG9yeShpZGVudGlmaWVyKSB7XHJcbiAgICByZXR1cm4gaWRlbnRpZmllciA9PT0gREVGQVVMVF9FTlRSWV9OQU1FID8gdW5kZWZpbmVkIDogaWRlbnRpZmllcjtcclxufVxyXG5mdW5jdGlvbiBpc0NvbXBvbmVudEVhZ2VyKGNvbXBvbmVudCkge1xyXG4gICAgcmV0dXJuIGNvbXBvbmVudC5pbnN0YW50aWF0aW9uTW9kZSA9PT0gXCJFQUdFUlwiIC8qIEVBR0VSICovO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21wb25lbnRDb250YWluZXIgdGhhdCBwcm92aWRlcyBQcm92aWRlcnMgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnRDb250YWluZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29tcG9uZW50IENvbXBvbmVudCBiZWluZyBhZGRlZFxyXG4gICAgICogQHBhcmFtIG92ZXJ3cml0ZSBXaGVuIGEgY29tcG9uZW50IHdpdGggdGhlIHNhbWUgbmFtZSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQsXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgdHJ1ZTogb3ZlcndyaXRlIHRoZSBleGlzdGluZyBjb21wb25lbnQgd2l0aCB0aGUgbmV3IGNvbXBvbmVudCBhbmQgY3JlYXRlIGEgbmV3XHJcbiAgICAgKiBwcm92aWRlciB3aXRoIHRoZSBuZXcgY29tcG9uZW50LiBJdCBjYW4gYmUgdXNlZnVsIGluIHRlc3RzIHdoZXJlIHlvdSB3YW50IHRvIHVzZSBkaWZmZXJlbnQgbW9ja3NcclxuICAgICAqIGZvciBkaWZmZXJlbnQgdGVzdHMuXHJcbiAgICAgKiBpZiBvdmVyd3JpdGUgaXMgZmFsc2U6IHRocm93IGFuIGV4Y2VwdGlvblxyXG4gICAgICovXHJcbiAgICBhZGRDb21wb25lbnQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLmdldFByb3ZpZGVyKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICBpZiAocHJvdmlkZXIuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQgd2l0aCAke3RoaXMubmFtZX1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0Q29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBhZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgZXhpc3RpbmcgcHJvdmlkZXIgZnJvbSB0aGUgY29udGFpbmVyLCBzbyB3ZSBjYW4gcmVnaXN0ZXIgdGhlIG5ldyBjb21wb25lbnRcclxuICAgICAgICAgICAgdGhpcy5wcm92aWRlcnMuZGVsZXRlKGNvbXBvbmVudC5uYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogZ2V0UHJvdmlkZXIgcHJvdmlkZXMgYSB0eXBlIHNhZmUgaW50ZXJmYWNlIHdoZXJlIGl0IGNhbiBvbmx5IGJlIGNhbGxlZCB3aXRoIGEgZmllbGQgbmFtZVxyXG4gICAgICogcHJlc2VudCBpbiBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlLlxyXG4gICAgICpcclxuICAgICAqIEZpcmViYXNlIFNES3MgcHJvdmlkaW5nIHNlcnZpY2VzIHNob3VsZCBleHRlbmQgTmFtZVNlcnZpY2VNYXBwaW5nIGludGVyZmFjZSB0byByZWdpc3RlclxyXG4gICAgICogdGhlbXNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgZ2V0UHJvdmlkZXIobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLnByb3ZpZGVycy5oYXMobmFtZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzLmdldChuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gY3JlYXRlIGEgUHJvdmlkZXIgZm9yIGEgc2VydmljZSB0aGF0IGhhc24ndCByZWdpc3RlcmVkIHdpdGggRmlyZWJhc2VcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IG5ldyBQcm92aWRlcihuYW1lLCB0aGlzKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycy5zZXQobmFtZSwgcHJvdmlkZXIpO1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgIH1cclxuICAgIGdldFByb3ZpZGVycygpIHtcclxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbSh0aGlzLnByb3ZpZGVycy52YWx1ZXMoKSk7XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIsIFByb3ZpZGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgY29udGFpbmVyIGZvciBhbGwgb2YgdGhlIExvZ2dlciBpbnN0YW5jZXNcclxuICovXHJcbmNvbnN0IGluc3RhbmNlcyA9IFtdO1xyXG4vKipcclxuICogVGhlIEpTIFNESyBzdXBwb3J0cyA1IGxvZyBsZXZlbHMgYW5kIGFsc28gYWxsb3dzIGEgdXNlciB0aGUgYWJpbGl0eSB0b1xyXG4gKiBzaWxlbmNlIHRoZSBsb2dzIGFsdG9nZXRoZXIuXHJcbiAqXHJcbiAqIFRoZSBvcmRlciBpcyBhIGZvbGxvd3M6XHJcbiAqIERFQlVHIDwgVkVSQk9TRSA8IElORk8gPCBXQVJOIDwgRVJST1JcclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIHdpbGwgYmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBJTkZPYCwgZXJyb3JzIHdpbGwgc3RpbGwgYmUgbG9nZ2VkLCBidXQgYERFQlVHYCBhbmRcclxuICogYFZFUkJPU0VgIGxvZ3Mgd2lsbCBub3QpXHJcbiAqL1xyXG52YXIgTG9nTGV2ZWw7XHJcbihmdW5jdGlvbiAoTG9nTGV2ZWwpIHtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiREVCVUdcIl0gPSAwXSA9IFwiREVCVUdcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiVkVSQk9TRVwiXSA9IDFdID0gXCJWRVJCT1NFXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIklORk9cIl0gPSAyXSA9IFwiSU5GT1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJXQVJOXCJdID0gM10gPSBcIldBUk5cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiRVJST1JcIl0gPSA0XSA9IFwiRVJST1JcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiU0lMRU5UXCJdID0gNV0gPSBcIlNJTEVOVFwiO1xyXG59KShMb2dMZXZlbCB8fCAoTG9nTGV2ZWwgPSB7fSkpO1xyXG5jb25zdCBsZXZlbFN0cmluZ1RvRW51bSA9IHtcclxuICAgICdkZWJ1Zyc6IExvZ0xldmVsLkRFQlVHLFxyXG4gICAgJ3ZlcmJvc2UnOiBMb2dMZXZlbC5WRVJCT1NFLFxyXG4gICAgJ2luZm8nOiBMb2dMZXZlbC5JTkZPLFxyXG4gICAgJ3dhcm4nOiBMb2dMZXZlbC5XQVJOLFxyXG4gICAgJ2Vycm9yJzogTG9nTGV2ZWwuRVJST1IsXHJcbiAgICAnc2lsZW50JzogTG9nTGV2ZWwuU0lMRU5UXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgbGV2ZWxcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dMZXZlbCA9IExvZ0xldmVsLklORk87XHJcbi8qKlxyXG4gKiBCeSBkZWZhdWx0LCBgY29uc29sZS5kZWJ1Z2AgaXMgbm90IGRpc3BsYXllZCBpbiB0aGUgZGV2ZWxvcGVyIGNvbnNvbGUgKGluXHJcbiAqIGNocm9tZSkuIFRvIGF2b2lkIGZvcmNpbmcgdXNlcnMgdG8gaGF2ZSB0byBvcHQtaW4gdG8gdGhlc2UgbG9ncyB0d2ljZVxyXG4gKiAoaS5lLiBvbmNlIGZvciBmaXJlYmFzZSwgYW5kIG9uY2UgaW4gdGhlIGNvbnNvbGUpLCB3ZSBhcmUgc2VuZGluZyBgREVCVUdgXHJcbiAqIGxvZ3MgdG8gdGhlIGBjb25zb2xlLmxvZ2AgZnVuY3Rpb24uXHJcbiAqL1xyXG5jb25zdCBDb25zb2xlTWV0aG9kID0ge1xyXG4gICAgW0xvZ0xldmVsLkRFQlVHXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuVkVSQk9TRV06ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLklORk9dOiAnaW5mbycsXHJcbiAgICBbTG9nTGV2ZWwuV0FSTl06ICd3YXJuJyxcclxuICAgIFtMb2dMZXZlbC5FUlJPUl06ICdlcnJvcidcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBoYW5kbGVyIHdpbGwgZm9yd2FyZCBERUJVRywgVkVSQk9TRSwgSU5GTywgV0FSTiwgYW5kIEVSUk9SXHJcbiAqIG1lc3NhZ2VzIG9uIHRvIHRoZWlyIGNvcnJlc3BvbmRpbmcgY29uc29sZSBjb3VudGVycGFydHMgKGlmIHRoZSBsb2cgbWV0aG9kXHJcbiAqIGlzIHN1cHBvcnRlZCBieSB0aGUgY3VycmVudCBsb2cgbGV2ZWwpXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbG9nVHlwZSwgLi4uYXJncykgPT4ge1xyXG4gICAgaWYgKGxvZ1R5cGUgPCBpbnN0YW5jZS5sb2dMZXZlbCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIGNvbnN0IG1ldGhvZCA9IENvbnNvbGVNZXRob2RbbG9nVHlwZV07XHJcbiAgICBpZiAobWV0aG9kKSB7XHJcbiAgICAgICAgY29uc29sZVttZXRob2RdKGBbJHtub3d9XSAgJHtpbnN0YW5jZS5uYW1lfTpgLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGxvZyBhIG1lc3NhZ2Ugd2l0aCBhbiBpbnZhbGlkIGxvZ1R5cGUgKHZhbHVlOiAke2xvZ1R5cGV9KWApO1xyXG4gICAgfVxyXG59O1xyXG5jbGFzcyBMb2dnZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHaXZlcyB5b3UgYW4gaW5zdGFuY2Ugb2YgYSBMb2dnZXIgdG8gY2FwdHVyZSBtZXNzYWdlcyBhY2NvcmRpbmcgdG9cclxuICAgICAqIEZpcmViYXNlJ3MgbG9nZ2luZyBzY2hlbWUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgdGhhdCB0aGUgbG9ncyB3aWxsIGJlIGFzc29jaWF0ZWQgd2l0aFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbG9nIGxldmVsIG9mIHRoZSBnaXZlbiBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSBkZWZhdWx0TG9nTGV2ZWw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG1haW4gKGludGVybmFsKSBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKiBDYW4gYmUgc2V0IHRvIGEgbmV3IGZ1bmN0aW9uIGluIGludGVybmFsIHBhY2thZ2UgY29kZSBidXQgbm90IGJ5IHVzZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IGRlZmF1bHRMb2dIYW5kbGVyO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvcHRpb25hbCwgYWRkaXRpb25hbCwgdXNlci1kZWZpbmVkIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXB0dXJlIHRoZSBjdXJyZW50IGluc3RhbmNlIGZvciBsYXRlciB1c2VcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnN0YW5jZXMucHVzaCh0aGlzKTtcclxuICAgIH1cclxuICAgIGdldCBsb2dMZXZlbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nTGV2ZWw7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgaWYgKCEodmFsIGluIExvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKGBJbnZhbGlkIHZhbHVlIFwiJHt2YWx9XCIgYXNzaWduZWQgdG8gXFxgbG9nTGV2ZWxcXGBgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvLyBXb3JrYXJvdW5kIGZvciBzZXR0ZXIvZ2V0dGVyIGhhdmluZyB0byBiZSB0aGUgc2FtZSB0eXBlLlxyXG4gICAgc2V0TG9nTGV2ZWwodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fbG9nTGV2ZWwgPSB0eXBlb2YgdmFsID09PSAnc3RyaW5nJyA/IGxldmVsU3RyaW5nVG9FbnVtW3ZhbF0gOiB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCBsb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1ZhbHVlIGFzc2lnbmVkIHRvIGBsb2dIYW5kbGVyYCBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCB1c2VyTG9nSGFuZGxlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckxvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgdXNlckxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFRoZSBmdW5jdGlvbnMgYmVsb3cgYXJlIGFsbCBiYXNlZCBvbiB0aGUgYGNvbnNvbGVgIGludGVyZmFjZVxyXG4gICAgICovXHJcbiAgICBkZWJ1ZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuREVCVUcsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgbG9nKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJlxyXG4gICAgICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgaW5mbyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIHdhcm4oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlcnJvciguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuRVJST1IsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBpbnN0YW5jZXMuZm9yRWFjaChpbnN0ID0+IHtcclxuICAgICAgICBpbnN0LnNldExvZ0xldmVsKGxldmVsKTtcclxuICAgIH0pO1xyXG59XHJcbmZ1bmN0aW9uIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBmb3IgKGNvbnN0IGluc3RhbmNlIG9mIGluc3RhbmNlcykge1xyXG4gICAgICAgIGxldCBjdXN0b21Mb2dMZXZlbCA9IG51bGw7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5sZXZlbCkge1xyXG4gICAgICAgICAgICBjdXN0b21Mb2dMZXZlbCA9IGxldmVsU3RyaW5nVG9FbnVtW29wdGlvbnMubGV2ZWxdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobG9nQ2FsbGJhY2sgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UudXNlckxvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxldmVsLCAuLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gYXJnc1xyXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYXJnID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYXJnID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBhcmcgPT09ICdudW1iZXInIHx8IHR5cGVvZiBhcmcgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLnRvU3RyaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFyZyBpbnN0YW5jZW9mIEVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcubWVzc2FnZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoYXJnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoaWdub3JlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYXJnID0+IGFyZylcclxuICAgICAgICAgICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGxldmVsID49IChjdXN0b21Mb2dMZXZlbCAhPT0gbnVsbCAmJiBjdXN0b21Mb2dMZXZlbCAhPT0gdm9pZCAwID8gY3VzdG9tTG9nTGV2ZWwgOiBpbnN0YW5jZS5sb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2dDYWxsYmFjayh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBMb2dMZXZlbFtsZXZlbF0udG9Mb3dlckNhc2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogaW5zdGFuY2UubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBMb2dMZXZlbCwgTG9nZ2VyLCBzZXRMb2dMZXZlbCwgc2V0VXNlckxvZ0hhbmRsZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBzZXRVc2VyTG9nSGFuZGxlciwgc2V0TG9nTGV2ZWwgYXMgc2V0TG9nTGV2ZWwkMSB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBkZWVwRXF1YWwsIG9wZW5EQiwgYmFzZTY0dXJsRW5jb2RlV2l0aG91dFBhZGRpbmcsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCB2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuZXhwb3J0IHsgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIFZFUlNJT04gKi87XHJcbn1cblxuY29uc3QgbmFtZSRvID0gXCJAZmlyZWJhc2UvYXBwXCI7XG5jb25zdCB2ZXJzaW9uJDEgPSBcIjAuNy4yMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBsb2dnZXIgPSBuZXcgTG9nZ2VyKCdAZmlyZWJhc2UvYXBwJyk7XG5cbmNvbnN0IG5hbWUkbiA9IFwiQGZpcmViYXNlL2FwcC1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRtID0gXCJAZmlyZWJhc2UvYW5hbHl0aWNzLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGwgPSBcIkBmaXJlYmFzZS9hbmFseXRpY3NcIjtcblxuY29uc3QgbmFtZSRrID0gXCJAZmlyZWJhc2UvYXBwLWNoZWNrLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGogPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2tcIjtcblxuY29uc3QgbmFtZSRpID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xuXG5jb25zdCBuYW1lJGggPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGcgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZVwiO1xuXG5jb25zdCBuYW1lJGYgPSBcIkBmaXJlYmFzZS9kYXRhYmFzZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRlID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zXCI7XG5cbmNvbnN0IG5hbWUkZCA9IFwiQGZpcmViYXNlL2Z1bmN0aW9ucy1jb21wYXRcIjtcblxuY29uc3QgbmFtZSRjID0gXCJAZmlyZWJhc2UvaW5zdGFsbGF0aW9uc1wiO1xuXG5jb25zdCBuYW1lJGIgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGEgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmdcIjtcblxuY29uc3QgbmFtZSQ5ID0gXCJAZmlyZWJhc2UvbWVzc2FnaW5nLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDggPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZVwiO1xuXG5jb25zdCBuYW1lJDcgPSBcIkBmaXJlYmFzZS9wZXJmb3JtYW5jZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQ2ID0gXCJAZmlyZWJhc2UvcmVtb3RlLWNvbmZpZ1wiO1xuXG5jb25zdCBuYW1lJDUgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDQgPSBcIkBmaXJlYmFzZS9zdG9yYWdlXCI7XG5cbmNvbnN0IG5hbWUkMyA9IFwiQGZpcmViYXNlL3N0b3JhZ2UtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkMiA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5jb25zdCBuYW1lJDEgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUgPSBcImZpcmViYXNlXCI7XG5jb25zdCB2ZXJzaW9uID0gXCI5LjYuMTBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGFwcCBuYW1lXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9FTlRSWV9OQU1FID0gJ1tERUZBVUxUXSc7XHJcbmNvbnN0IFBMQVRGT1JNX0xPR19TVFJJTkcgPSB7XHJcbiAgICBbbmFtZSRvXTogJ2ZpcmUtY29yZScsXHJcbiAgICBbbmFtZSRuXTogJ2ZpcmUtY29yZS1jb21wYXQnLFxyXG4gICAgW25hbWUkbF06ICdmaXJlLWFuYWx5dGljcycsXHJcbiAgICBbbmFtZSRtXTogJ2ZpcmUtYW5hbHl0aWNzLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRqXTogJ2ZpcmUtYXBwLWNoZWNrJyxcclxuICAgIFtuYW1lJGtdOiAnZmlyZS1hcHAtY2hlY2stY29tcGF0JyxcclxuICAgIFtuYW1lJGldOiAnZmlyZS1hdXRoJyxcclxuICAgIFtuYW1lJGhdOiAnZmlyZS1hdXRoLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRnXTogJ2ZpcmUtcnRkYicsXHJcbiAgICBbbmFtZSRmXTogJ2ZpcmUtcnRkYi1jb21wYXQnLFxyXG4gICAgW25hbWUkZV06ICdmaXJlLWZuJyxcclxuICAgIFtuYW1lJGRdOiAnZmlyZS1mbi1jb21wYXQnLFxyXG4gICAgW25hbWUkY106ICdmaXJlLWlpZCcsXHJcbiAgICBbbmFtZSRiXTogJ2ZpcmUtaWlkLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRhXTogJ2ZpcmUtZmNtJyxcclxuICAgIFtuYW1lJDldOiAnZmlyZS1mY20tY29tcGF0JyxcclxuICAgIFtuYW1lJDhdOiAnZmlyZS1wZXJmJyxcclxuICAgIFtuYW1lJDddOiAnZmlyZS1wZXJmLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ2XTogJ2ZpcmUtcmMnLFxyXG4gICAgW25hbWUkNV06ICdmaXJlLXJjLWNvbXBhdCcsXHJcbiAgICBbbmFtZSQ0XTogJ2ZpcmUtZ2NzJyxcclxuICAgIFtuYW1lJDNdOiAnZmlyZS1nY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJDJdOiAnZmlyZS1mc3QnLFxyXG4gICAgW25hbWUkMV06ICdmaXJlLWZzdC1jb21wYXQnLFxyXG4gICAgJ2ZpcmUtanMnOiAnZmlyZS1qcycsXHJcbiAgICBbbmFtZV06ICdmaXJlLWpzLWFsbCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgX2FwcHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBSZWdpc3RlcmVkIGNvbXBvbmVudHMuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuY29uc3QgX2NvbXBvbmVudHMgPSBuZXcgTWFwKCk7XHJcbi8qKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCBiZWluZyBhZGRlZCB0byB0aGlzIGFwcCdzIGNvbnRhaW5lclxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXBwLmNvbnRhaW5lci5hZGRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgbG9nZ2VyLmRlYnVnKGBDb21wb25lbnQgJHtjb21wb25lbnQubmFtZX0gZmFpbGVkIHRvIHJlZ2lzdGVyIHdpdGggRmlyZWJhc2VBcHAgJHthcHAubmFtZX1gLCBlKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoYXBwLCBjb21wb25lbnQpIHtcclxuICAgIGFwcC5jb250YWluZXIuYWRkT3JPdmVyd3JpdGVDb21wb25lbnQoY29tcG9uZW50KTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGNvbXBvbmVudCAtIHRoZSBjb21wb25lbnQgdG8gcmVnaXN0ZXJcclxuICogQHJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGNvbXBvbmVudCBpcyByZWdpc3RlcmVkIHN1Y2Nlc3NmdWxseVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZWdpc3RlckNvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBjb21wb25lbnQubmFtZTtcclxuICAgIGlmIChfY29tcG9uZW50cy5oYXMoY29tcG9uZW50TmFtZSkpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYFRoZXJlIHdlcmUgbXVsdGlwbGUgYXR0ZW1wdHMgdG8gcmVnaXN0ZXIgY29tcG9uZW50ICR7Y29tcG9uZW50TmFtZX0uYCk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgX2NvbXBvbmVudHMuc2V0KGNvbXBvbmVudE5hbWUsIGNvbXBvbmVudCk7XHJcbiAgICAvLyBhZGQgdGhlIGNvbXBvbmVudCB0byBleGlzdGluZyBhcHAgaW5zdGFuY2VzXHJcbiAgICBmb3IgKGNvbnN0IGFwcCBvZiBfYXBwcy52YWx1ZXMoKSkge1xyXG4gICAgICAgIF9hZGRDb21wb25lbnQoYXBwLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBGaXJlYmFzZUFwcCBpbnN0YW5jZVxyXG4gKiBAcGFyYW0gbmFtZSAtIHNlcnZpY2UgbmFtZVxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgcHJvdmlkZXIgZm9yIHRoZSBzZXJ2aWNlIHdpdGggdGhlIG1hdGNoaW5nIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKSB7XHJcbiAgICBjb25zdCBoZWFydGJlYXRDb250cm9sbGVyID0gYXBwLmNvbnRhaW5lclxyXG4gICAgICAgIC5nZXRQcm92aWRlcignaGVhcnRiZWF0JylcclxuICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSk7XHJcbiAgICBpZiAoaGVhcnRiZWF0Q29udHJvbGxlcikge1xyXG4gICAgICAgIHZvaWQgaGVhcnRiZWF0Q29udHJvbGxlci50cmlnZ2VySGVhcnRiZWF0KCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgLSBzZXJ2aWNlIGluc3RhbmNlIGlkZW50aWZpZXIgaW4gY2FzZSB0aGUgc2VydmljZSBzdXBwb3J0cyBtdWx0aXBsZSBpbnN0YW5jZXNcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKGFwcCwgbmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBfZ2V0UHJvdmlkZXIoYXBwLCBuYW1lKS5jbGVhckluc3RhbmNlKGluc3RhbmNlSWRlbnRpZmllcik7XHJcbn1cclxuLyoqXHJcbiAqIFRlc3Qgb25seVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9jbGVhckNvbXBvbmVudHMoKSB7XHJcbiAgICBfY29tcG9uZW50cy5jbGVhcigpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIE5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovXTogXCJJbGxlZ2FsIEFwcCBuYW1lOiAneyRhcHBOYW1lfVwiLFxyXG4gICAgW1wiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBleGlzdHMgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBvciBjb25maWdcIixcclxuICAgIFtcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi9dOiBcIkZpcmViYXNlIEFwcCBuYW1lZCAneyRhcHBOYW1lfScgYWxyZWFkeSBkZWxldGVkXCIsXHJcbiAgICBbXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIElOVkFMSURfQVBQX0FSR1VNRU5UICovXTogJ2ZpcmViYXNlLnskYXBwTmFtZX0oKSB0YWtlcyBlaXRoZXIgbm8gYXJndW1lbnQgb3IgYSAnICtcclxuICAgICAgICAnRmlyZWJhc2UgQXBwIGluc3RhbmNlLicsXHJcbiAgICBbXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovXTogJ0ZpcnN0IGFyZ3VtZW50IHRvIGBvbkxvZ2AgbXVzdCBiZSBudWxsIG9yIGEgZnVuY3Rpb24uJyxcclxuICAgIFtcInN0b3JhZ2Utb3BlblwiIC8qIFNUT1JBR0VfT1BFTiAqL106ICdFcnJvciB0aHJvd24gd2hlbiBvcGVuaW5nIHN0b3JhZ2UuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wic3RvcmFnZS1nZXRcIiAvKiBTVE9SQUdFX0dFVCAqL106ICdFcnJvciB0aHJvd24gd2hlbiByZWFkaW5nIGZyb20gc3RvcmFnZS4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJzdG9yYWdlLXNldFwiIC8qIFNUT1JBR0VfV1JJVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gd3JpdGluZyB0byBzdG9yYWdlLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcInN0b3JhZ2UtZGVsZXRlXCIgLyogU1RPUkFHRV9ERUxFVEUgKi9dOiAnRXJyb3IgdGhyb3duIHdoZW4gZGVsZXRpbmcgZnJvbSBzdG9yYWdlLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJ1xyXG59O1xyXG5jb25zdCBFUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXBwJywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmlyZWJhc2VBcHBJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpO1xyXG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyk7XHJcbiAgICAgICAgdGhpcy5fbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9XHJcbiAgICAgICAgICAgIGNvbmZpZy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ7XHJcbiAgICAgICAgdGhpcy5fY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZENvbXBvbmVudChuZXcgQ29tcG9uZW50KCdhcHAnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLykpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBjb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNEZWxldGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlbGV0ZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaXNEZWxldGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBjaGVja0Rlc3Ryb3llZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgY3VycmVudCBTREsgdmVyc2lvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgU0RLX1ZFUlNJT04gPSB2ZXJzaW9uO1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKG9wdGlvbnMsIHJhd0NvbmZpZyA9IHt9KSB7XHJcbiAgICBpZiAodHlwZW9mIHJhd0NvbmZpZyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICBjb25zdCBuYW1lID0gcmF3Q29uZmlnO1xyXG4gICAgICAgIHJhd0NvbmZpZyA9IHsgbmFtZSB9O1xyXG4gICAgfVxyXG4gICAgY29uc3QgY29uZmlnID0gT2JqZWN0LmFzc2lnbih7IG5hbWU6IERFRkFVTFRfRU5UUllfTkFNRSwgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkOiBmYWxzZSB9LCByYXdDb25maWcpO1xyXG4gICAgY29uc3QgbmFtZSA9IGNvbmZpZy5uYW1lO1xyXG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJyB8fCAhbmFtZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiYmFkLWFwcC1uYW1lXCIgLyogQkFEX0FQUF9OQU1FICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IFN0cmluZyhuYW1lKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcclxuICAgICAgICAvLyByZXR1cm4gdGhlIGV4aXN0aW5nIGFwcCBpZiBvcHRpb25zIGFuZCBjb25maWcgZGVlcCBlcXVhbCB0aGUgb25lcyBpbiB0aGUgZXhpc3RpbmcgYXBwLlxyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgZXhpc3RpbmdBcHAub3B0aW9ucykgJiZcclxuICAgICAgICAgICAgZGVlcEVxdWFsKGNvbmZpZywgZXhpc3RpbmdBcHAuY29uZmlnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBEVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lKTtcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICBfYXBwcy5zZXQobmFtZSwgbmV3QXBwKTtcclxuICAgIHJldHVybiBuZXdBcHA7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogV2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC4gV2hlbiBhbiBhcHAgbmFtZVxyXG4gKiBpcyBwcm92aWRlZCwgdGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cclxuICpcclxuICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgYXBwIGJlaW5nIHJldHJpZXZlZCBoYXMgbm90IHlldCBiZWVuXHJcbiAqIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcclxuICogY29uc3QgYXBwID0gZ2V0QXBwKCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxyXG4gKiBjb25zdCBvdGhlckFwcCA9IGdldEFwcChcIm90aGVyQXBwXCIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuLiBJZiBubyBuYW1lIGlzXHJcbiAqICAgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGlzIGBcIltERUZBVUxUXVwiYC5cclxuICpcclxuICogQHJldHVybnMgVGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBhcHAgbmFtZS5cclxuICogICBJZiBubyBhcHAgbmFtZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHAobmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKCFhcHApIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcIm5vLWFwcFwiIC8qIE5PX0FQUCAqLywgeyBhcHBOYW1lOiBuYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFwcDtcclxufVxyXG4vKipcclxuICogQSAocmVhZC1vbmx5KSBhcnJheSBvZiBhbGwgaW5pdGlhbGl6ZWQgYXBwcy5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXBwcygpIHtcclxuICAgIHJldHVybiBBcnJheS5mcm9tKF9hcHBzLnZhbHVlcygpKTtcclxufVxyXG4vKipcclxuICogUmVuZGVycyB0aGlzIGFwcCB1bnVzYWJsZSBhbmQgZnJlZXMgdGhlIHJlc291cmNlcyBvZiBhbGwgYXNzb2NpYXRlZFxyXG4gKiBzZXJ2aWNlcy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBkZWxldGVBcHAoYXBwKVxyXG4gKiAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJBcHAgZGVsZXRlZCBzdWNjZXNzZnVsbHlcIik7XHJcbiAqICAgfSlcclxuICogICAuY2F0Y2goZnVuY3Rpb24oZXJyb3IpIHtcclxuICogICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgZGVsZXRpbmcgYXBwOlwiLCBlcnJvcik7XHJcbiAqICAgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBcHAoYXBwKSB7XHJcbiAgICBjb25zdCBuYW1lID0gYXBwLm5hbWU7XHJcbiAgICBpZiAoX2FwcHMuaGFzKG5hbWUpKSB7XHJcbiAgICAgICAgX2FwcHMuZGVsZXRlKG5hbWUpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGFwcC5jb250YWluZXJcclxuICAgICAgICAgICAgLmdldFByb3ZpZGVycygpXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4gcHJvdmlkZXIuZGVsZXRlKCkpKTtcclxuICAgICAgICBhcHAuaXNEZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUmVnaXN0ZXJzIGEgbGlicmFyeSdzIG5hbWUgYW5kIHZlcnNpb24gZm9yIHBsYXRmb3JtIGxvZ2dpbmcgcHVycG9zZXMuXHJcbiAqIEBwYXJhbSBsaWJyYXJ5IC0gTmFtZSBvZiAxcCBvciAzcCBsaWJyYXJ5IChlLmcuIGZpcmVzdG9yZSwgYW5ndWxhcmZpcmUpXHJcbiAqIEBwYXJhbSB2ZXJzaW9uIC0gQ3VycmVudCB2ZXJzaW9uIG9mIHRoYXQgbGlicmFyeS5cclxuICogQHBhcmFtIHZhcmlhbnQgLSBCdW5kbGUgdmFyaWFudCwgZS5nLiwgbm9kZSwgcm4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJWZXJzaW9uKGxpYnJhcnlLZXlPck5hbWUsIHZlcnNpb24sIHZhcmlhbnQpIHtcclxuICAgIHZhciBfYTtcclxuICAgIC8vIFRPRE86IFdlIGNhbiB1c2UgdGhpcyBjaGVjayB0byB3aGl0ZWxpc3Qgc3RyaW5ncyB3aGVuL2lmIHdlIHNldCB1cFxyXG4gICAgLy8gYSBnb29kIHdoaXRlbGlzdCBzeXN0ZW0uXHJcbiAgICBsZXQgbGlicmFyeSA9IChfYSA9IFBMQVRGT1JNX0xPR19TVFJJTkdbbGlicmFyeUtleU9yTmFtZV0pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGxpYnJhcnlLZXlPck5hbWU7XHJcbiAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgIGxpYnJhcnkgKz0gYC0ke3ZhcmlhbnR9YDtcclxuICAgIH1cclxuICAgIGNvbnN0IGxpYnJhcnlNaXNtYXRjaCA9IGxpYnJhcnkubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGNvbnN0IHZlcnNpb25NaXNtYXRjaCA9IHZlcnNpb24ubWF0Y2goL1xcc3xcXC8vKTtcclxuICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2ggfHwgdmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgY29uc3Qgd2FybmluZyA9IFtcclxuICAgICAgICAgICAgYFVuYWJsZSB0byByZWdpc3RlciBsaWJyYXJ5IFwiJHtsaWJyYXJ5fVwiIHdpdGggdmVyc2lvbiBcIiR7dmVyc2lvbn1cIjpgXHJcbiAgICAgICAgXTtcclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgbGlicmFyeSBuYW1lIFwiJHtsaWJyYXJ5fVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxpYnJhcnlNaXNtYXRjaCAmJiB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKCdhbmQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goYHZlcnNpb24gbmFtZSBcIiR7dmVyc2lvbn1cIiBjb250YWlucyBpbGxlZ2FsIGNoYXJhY3RlcnMgKHdoaXRlc3BhY2Ugb3IgXCIvXCIpYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxvZ2dlci53YXJuKHdhcm5pbmcuam9pbignICcpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChgJHtsaWJyYXJ5fS12ZXJzaW9uYCwgKCkgPT4gKHsgbGlicmFyeSwgdmVyc2lvbiB9KSwgXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLykpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBoYW5kbGVyIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICogQHBhcmFtIGxvZ0NhbGxiYWNrIC0gQW4gb3B0aW9uYWwgY3VzdG9tIGxvZyBoYW5kbGVyIHRoYXQgZXhlY3V0ZXMgdXNlciBjb2RlIHdoZW5ldmVyXHJcbiAqIHRoZSBGaXJlYmFzZSBTREsgbWFrZXMgYSBsb2dnaW5nIGNhbGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uTG9nKGxvZ0NhbGxiYWNrLCBvcHRpb25zKSB7XHJcbiAgICBpZiAobG9nQ2FsbGJhY2sgIT09IG51bGwgJiYgdHlwZW9mIGxvZ0NhbGxiYWNrICE9PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWxvZy1hcmd1bWVudFwiIC8qIElOVkFMSURfTE9HX0FSR1VNRU5UICovKTtcclxuICAgIH1cclxuICAgIHNldFVzZXJMb2dIYW5kbGVyKGxvZ0NhbGxiYWNrLCBvcHRpb25zKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgbGV2ZWwgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgYXJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgaW5mb2AsIGVycm9ycyBhcmUgbG9nZ2VkLCBidXQgYGRlYnVnYCBhbmRcclxuICogYHZlcmJvc2VgIGxvZ3MgYXJlIG5vdCkuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxvZ0xldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxvZ0xldmVsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1kYXRhYmFzZSc7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBTVE9SRV9OQU1FID0gJ2ZpcmViYXNlLWhlYXJ0YmVhdC1zdG9yZSc7XHJcbmxldCBkYlByb21pc2UgPSBudWxsO1xyXG5mdW5jdGlvbiBnZXREYlByb21pc2UoKSB7XHJcbiAgICBpZiAoIWRiUHJvbWlzZSkge1xyXG4gICAgICAgIGRiUHJvbWlzZSA9IG9wZW5EQihEQl9OQU1FLCBEQl9WRVJTSU9OLCAoZGIsIG9sZFZlcnNpb24pID0+IHtcclxuICAgICAgICAgICAgLy8gV2UgZG9uJ3QgdXNlICdicmVhaycgaW4gdGhpcyBzd2l0Y2ggc3RhdGVtZW50LCB0aGUgZmFsbC10aHJvdWdoXHJcbiAgICAgICAgICAgIC8vIGJlaGF2aW9yIGlzIHdoYXQgd2Ugd2FudCwgYmVjYXVzZSBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgdmVyc2lvbnMgYmV0d2VlblxyXG4gICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgIC8vIHRoYXQgY29ycmVzcG9uZCB0byB0aG9zZSB2ZXJzaW9ucyB0byBydW4sIG5vdCBvbmx5IHRoZSBsYXN0IG9uZS5cclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlZmF1bHQtY2FzZVxyXG4gICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDpcclxuICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInN0b3JhZ2Utb3BlblwiIC8qIFNUT1JBR0VfT1BFTiAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKGFwcCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIHJldHVybiBkYlxyXG4gICAgICAgICAgICAudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLm9iamVjdFN0b3JlKFNUT1JFX05BTUUpXHJcbiAgICAgICAgICAgIC5nZXQoY29tcHV0ZUtleShhcHApKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJzdG9yYWdlLWdldFwiIC8qIFNUT1JBR0VfR0VUICovLCB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQihhcHAsIGhlYXJ0YmVhdE9iamVjdCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KGhlYXJ0YmVhdE9iamVjdCwgY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICByZXR1cm4gdHguY29tcGxldGU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwic3RvcmFnZS1zZXRcIiAvKiBTVE9SQUdFX1dSSVRFICovLCB7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsRXJyb3JNZXNzYWdlOiBlLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjb21wdXRlS2V5KGFwcCkge1xyXG4gICAgcmV0dXJuIGAke2FwcC5uYW1lfSEke2FwcC5vcHRpb25zLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgTUFYX0hFQURFUl9CWVRFUyA9IDEwMjQ7XHJcbi8vIDMwIGRheXNcclxuY29uc3QgU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUyA9IDMwICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuY2xhc3MgSGVhcnRiZWF0U2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW4tbWVtb3J5IGNhY2hlIGZvciBoZWFydGJlYXRzLCB1c2VkIGJ5IGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB0byBnZW5lcmF0ZVxyXG4gICAgICAgICAqIHRoZSBoZWFkZXIgc3RyaW5nLlxyXG4gICAgICAgICAqIFN0b3JlcyBvbmUgcmVjb3JkIHBlciBkYXRlLiBUaGlzIHdpbGwgYmUgY29uc29saWRhdGVkIGludG8gdGhlIHN0YW5kYXJkXHJcbiAgICAgICAgICogZm9ybWF0IG9mIG9uZSByZWNvcmQgcGVyIHVzZXIgYWdlbnQgc3RyaW5nIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgaGVhZGVyLlxyXG4gICAgICAgICAqIFBvcHVsYXRlZCBmcm9tIGluZGV4ZWREQiB3aGVuIHRoZSBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZCBhbmQgc2hvdWxkXHJcbiAgICAgICAgICogYmUga2VwdCBpbiBzeW5jIHdpdGggaW5kZXhlZERCLlxyXG4gICAgICAgICAqIExlYXZlIHB1YmxpYyBmb3IgZWFzaWVyIHRlc3RpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gbnVsbDtcclxuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmFnZSA9IG5ldyBIZWFydGJlYXRTdG9yYWdlSW1wbChhcHApO1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UgPSB0aGlzLl9zdG9yYWdlLnJlYWQoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHRvIHJlcG9ydCBhIGhlYXJ0YmVhdC4gVGhlIGZ1bmN0aW9uIHdpbGwgZ2VuZXJhdGVcclxuICAgICAqIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IG9iamVjdCwgdXBkYXRlIGhlYXJ0YmVhdHNDYWNoZSwgYW5kIHBlcnNpc3QgaXRcclxuICAgICAqIHRvIEluZGV4ZWREQi5cclxuICAgICAqIE5vdGUgdGhhdCB3ZSBvbmx5IHN0b3JlIG9uZSBoZWFydGJlYXQgcGVyIGRheS4gU28gaWYgYSBoZWFydGJlYXQgZm9yIHRvZGF5IGlzXHJcbiAgICAgKiBhbHJlYWR5IGxvZ2dlZCwgc3Vic2VxdWVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGluIHRoZSBzYW1lIGRheSB3aWxsIGJlIGlnbm9yZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRyaWdnZXJIZWFydGJlYXQoKSB7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG8gbm90IHN0b3JlIGEgaGVhcnRiZWF0IGlmIG9uZSBpcyBhbHJlYWR5IHN0b3JlZCBmb3IgdGhpcyBkYXlcclxuICAgICAgICAvLyBvciBpZiBhIGhlYWRlciBoYXMgYWxyZWFkeSBiZWVuIHNlbnQgdG9kYXkuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPT09IGRhdGUgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc29tZShzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSA9PT0gZGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gZW50cnkgZm9yIHRoaXMgZGF0ZS4gQ3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMucHVzaCh7IGRhdGUsIGFnZW50IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmUgZW50cmllcyBvbGRlciB0aGFuIDMwIGRheXMuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5maWx0ZXIoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhiVGltZXN0YW1wID0gbmV3IERhdGUoc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBub3cgLSBoYlRpbWVzdGFtcCA8PSBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgaGVhcnRiZWF0LXNwZWNpZmljIGhlYWRlciBkaXJlY3RseS5cclxuICAgICAqIEl0IGFsc28gY2xlYXJzIGFsbCBoZWFydGJlYXRzIGZyb20gbWVtb3J5IGFzIHdlbGwgYXMgaW4gSW5kZXhlZERCLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IENvbnN1bWluZyBwcm9kdWN0IFNES3Mgc2hvdWxkIG5vdCBzZW5kIHRoZSBoZWFkZXIgaWYgdGhpcyBtZXRob2RcclxuICAgICAqIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRIZWFydGJlYXRzSGVhZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgaXQncyBzdGlsbCBudWxsIG9yIHRoZSBhcnJheSBpcyBlbXB0eSwgdGhlcmUgaXMgbm8gZGF0YSB0byBzZW5kLlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAvLyBFeHRyYWN0IGFzIG1hbnkgaGVhcnRiZWF0cyBmcm9tIHRoZSBjYWNoZSBhcyB3aWxsIGZpdCB1bmRlciB0aGUgc2l6ZSBsaW1pdC5cclxuICAgICAgICBjb25zdCB7IGhlYXJ0YmVhdHNUb1NlbmQsIHVuc2VudEVudHJpZXMgfSA9IGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNUb1NlbmQgfSkpO1xyXG4gICAgICAgIC8vIFN0b3JlIGxhc3Qgc2VudCBkYXRlIHRvIHByZXZlbnQgYW5vdGhlciBiZWluZyBsb2dnZWQvc2VudCBmb3IgdGhlIHNhbWUgZGF5LlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPSBkYXRlO1xyXG4gICAgICAgIGlmICh1bnNlbnRFbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gU3RvcmUgYW55IHVuc2VudCBlbnRyaWVzIGlmIHRoZXkgZXhpc3QuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdW5zZW50RW50cmllcztcclxuICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyBtb3JlIGxpa2VseSB0aGFuIGVtcHR5aW5nIHRoZSBhcnJheSAoYmVsb3cpIHRvIGxlYWQgdG8gc29tZSBvZGQgc3RhdGVcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNhY2hlIGlzbid0IGVtcHR5IGFuZCB0aGlzIHdpbGwgYmUgY2FsbGVkIGFnYWluIG9uIHRoZSBuZXh0IHJlcXVlc3QsXHJcbiAgICAgICAgICAgIC8vIGFuZCBpcyBwcm9iYWJseSBzYWZlc3QgaWYgd2UgYXdhaXQgaXQuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBEbyBub3Qgd2FpdCBmb3IgdGhpcywgdG8gcmVkdWNlIGxhdGVuY3kuXHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlclN0cmluZztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRVVENEYXRlU3RyaW5nKCkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgLy8gUmV0dXJucyBkYXRlIGZvcm1hdCAnWVlZWS1NTS1ERCdcclxuICAgIHJldHVybiB0b2RheS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIoaGVhcnRiZWF0c0NhY2hlLCBtYXhTaXplID0gTUFYX0hFQURFUl9CWVRFUykge1xyXG4gICAgLy8gSGVhcnRiZWF0cyBncm91cGVkIGJ5IHVzZXIgYWdlbnQgaW4gdGhlIHN0YW5kYXJkIGZvcm1hdCB0byBiZSBzZW50IGluXHJcbiAgICAvLyB0aGUgaGVhZGVyLlxyXG4gICAgY29uc3QgaGVhcnRiZWF0c1RvU2VuZCA9IFtdO1xyXG4gICAgLy8gU2luZ2xlIGRhdGUgZm9ybWF0IGhlYXJ0YmVhdHMgdGhhdCBhcmUgbm90IHNlbnQuXHJcbiAgICBsZXQgdW5zZW50RW50cmllcyA9IGhlYXJ0YmVhdHNDYWNoZS5zbGljZSgpO1xyXG4gICAgZm9yIChjb25zdCBzaW5nbGVEYXRlSGVhcnRiZWF0IG9mIGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgICAgIC8vIExvb2sgZm9yIGFuIGV4aXN0aW5nIGVudHJ5IHdpdGggdGhlIHNhbWUgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBoZWFydGJlYXRFbnRyeSA9IGhlYXJ0YmVhdHNUb1NlbmQuZmluZChoYiA9PiBoYi5hZ2VudCA9PT0gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCk7XHJcbiAgICAgICAgaWYgKCFoZWFydGJlYXRFbnRyeSkge1xyXG4gICAgICAgICAgICAvLyBJZiBubyBlbnRyeSBmb3IgdGhpcyB1c2VyIGFnZW50IGV4aXN0cywgY3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGFnZW50OiBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50LFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGhlYXJ0YmVhdFxyXG4gICAgICAgICAgICAgICAgLy8gZW50cnkgYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnB1c2goc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgZGF0ZVxyXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvcCB1bnNlbnQgZW50cnkgZnJvbSBxdWV1ZS4gKFNraXBwZWQgaWYgYWRkaW5nIHRoZSBlbnRyeSBleGNlZWRlZFxyXG4gICAgICAgIC8vIHF1b3RhIGFuZCB0aGUgbG9vcCBicmVha3MgZWFybHkuKVxyXG4gICAgICAgIHVuc2VudEVudHJpZXMgPSB1bnNlbnRFbnRyaWVzLnNsaWNlKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFydGJlYXRzVG9TZW5kLFxyXG4gICAgICAgIHVuc2VudEVudHJpZXNcclxuICAgIH07XHJcbn1cclxuY2xhc3MgSGVhcnRiZWF0U3RvcmFnZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZSA9IHRoaXMucnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpIHtcclxuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIGFsbCBoZWFydGJlYXRzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyByZWFkKCkge1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkhlYXJ0YmVhdE9iamVjdCA9IGF3YWl0IHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQih0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3QgfHwgeyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG92ZXJ3cml0ZSB0aGUgc3RvcmFnZSB3aXRoIHRoZSBwcm92aWRlZCBoZWFydGJlYXRzXHJcbiAgICBhc3luYyBvdmVyd3JpdGUoaGVhcnRiZWF0c09iamVjdCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBoZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIGFkZChoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0cyxcclxuICAgICAgICAgICAgICAgICAgICAuLi5oZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgYnl0ZXMgb2YgYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgYXJyYXkgYWZ0ZXIgYmVpbmcgd3JhcHBlZFxyXG4gKiBpbiBhIHBsYXRmb3JtIGxvZ2dpbmcgaGVhZGVyIEpTT04gb2JqZWN0LCBzdHJpbmdpZmllZCwgYW5kIGNvbnZlcnRlZFxyXG4gKiB0byBiYXNlIDY0LlxyXG4gKi9cclxuZnVuY3Rpb24gY291bnRCeXRlcyhoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgIC8vIGJhc2U2NCBoYXMgYSByZXN0cmljdGVkIHNldCBvZiBjaGFyYWN0ZXJzLCBhbGwgb2Ygd2hpY2ggc2hvdWxkIGJlIDEgYnl0ZS5cclxuICAgIHJldHVybiBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhcclxuICAgIC8vIGhlYXJ0YmVhdHNDYWNoZSB3cmFwcGVyIHByb3BlcnRpZXNcclxuICAgIEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c0NhY2hlIH0pKS5sZW5ndGg7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdoZWFydGJlYXQnLCBjb250YWluZXIgPT4gbmV3IEhlYXJ0YmVhdFNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIFBSSVZBVEUgKi8pKTtcclxuICAgIC8vIFJlZ2lzdGVyIGBhcHBgIHBhY2thZ2UuXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsIHZhcmlhbnQpO1xyXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgJ2VzbTIwMTcnKTtcclxuICAgIC8vIFJlZ2lzdGVyIHBsYXRmb3JtIFNESyBpZGVudGlmaWVyIChubyB2ZXJzaW9uKS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbignZmlyZS1qcycsICcnKTtcclxufVxuXG4vKipcclxuICogRmlyZWJhc2UgQXBwXHJcbiAqXHJcbiAqIEByZW1hcmtzIFRoaXMgcGFja2FnZSBjb29yZGluYXRlcyB0aGUgY29tbXVuaWNhdGlvbiBiZXR3ZWVuIHRoZSBkaWZmZXJlbnQgRmlyZWJhc2UgY29tcG9uZW50c1xyXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cclxuICovXHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoJycpO1xuXG5leHBvcnQgeyBTREtfVkVSU0lPTiwgREVGQVVMVF9FTlRSWV9OQU1FIGFzIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRDb21wb25lbnQsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgX2FwcHMsIF9jbGVhckNvbXBvbmVudHMsIF9jb21wb25lbnRzLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgZGVsZXRlQXBwLCBnZXRBcHAsIGdldEFwcHMsIGluaXRpYWxpemVBcHAsIG9uTG9nLCByZWdpc3RlclZlcnNpb24sIHNldExvZ0xldmVsIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5leHBvcnQgKiBmcm9tICdAZmlyZWJhc2UvYXBwJztcblxudmFyIG5hbWUgPSBcImZpcmViYXNlXCI7XG52YXIgdmVyc2lvbiA9IFwiOS42LjEwXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbnJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCAnYXBwJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJ2YXIgY29tbW9uanNHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWxUaGlzIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB7fTtcblxudmFyIGVzbSA9IHt9O1xuXG4vKlxuXG4gQ29weXJpZ2h0IFRoZSBDbG9zdXJlIExpYnJhcnkgQXV0aG9ycy5cbiBTUERYLUxpY2Vuc2UtSWRlbnRpZmllcjogQXBhY2hlLTIuMFxuKi9cbnZhciBrLGdvb2c9Z29vZ3x8e30sbD1jb21tb25qc0dsb2JhbHx8c2VsZjtmdW5jdGlvbiBhYSgpe31mdW5jdGlvbiBiYShhKXt2YXIgYj10eXBlb2YgYTtiPVwib2JqZWN0XCIhPWI/YjphP0FycmF5LmlzQXJyYXkoYSk/XCJhcnJheVwiOmI6XCJudWxsXCI7cmV0dXJuIFwiYXJyYXlcIj09Ynx8XCJvYmplY3RcIj09YiYmXCJudW1iZXJcIj09dHlwZW9mIGEubGVuZ3RofWZ1bmN0aW9uIHAoYSl7dmFyIGI9dHlwZW9mIGE7cmV0dXJuIFwib2JqZWN0XCI9PWImJm51bGwhPWF8fFwiZnVuY3Rpb25cIj09Yn1mdW5jdGlvbiBkYShhKXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGEsZWEpJiZhW2VhXXx8KGFbZWFdPSsrZmEpfXZhciBlYT1cImNsb3N1cmVfdWlkX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApLGZhPTA7ZnVuY3Rpb24gaGEoYSxiLGMpe3JldHVybiBhLmNhbGwuYXBwbHkoYS5iaW5kLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBpYShhLGIsYyl7aWYoIWEpdGhyb3cgRXJyb3IoKTtpZigyPGFyZ3VtZW50cy5sZW5ndGgpe3ZhciBkPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpO0FycmF5LnByb3RvdHlwZS51bnNoaWZ0LmFwcGx5KGUsZCk7cmV0dXJuIGEuYXBwbHkoYixlKX19cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGEuYXBwbHkoYixhcmd1bWVudHMpfX1mdW5jdGlvbiBxKGEsYixjKXtGdW5jdGlvbi5wcm90b3R5cGUuYmluZCYmLTEhPUZ1bmN0aW9uLnByb3RvdHlwZS5iaW5kLnRvU3RyaW5nKCkuaW5kZXhPZihcIm5hdGl2ZSBjb2RlXCIpP3E9aGE6cT1pYTtyZXR1cm4gcS5hcHBseShudWxsLGFyZ3VtZW50cyl9XG5mdW5jdGlvbiBqYShhLGIpe3ZhciBjPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgZD1jLnNsaWNlKCk7ZC5wdXNoLmFwcGx5KGQsYXJndW1lbnRzKTtyZXR1cm4gYS5hcHBseSh0aGlzLGQpfX1mdW5jdGlvbiB0KGEsYil7ZnVuY3Rpb24gYygpe31jLnByb3RvdHlwZT1iLnByb3RvdHlwZTthLlo9Yi5wcm90b3R5cGU7YS5wcm90b3R5cGU9bmV3IGM7YS5wcm90b3R5cGUuY29uc3RydWN0b3I9YTthLlZiPWZ1bmN0aW9uKGQsZSxmKXtmb3IodmFyIGg9QXJyYXkoYXJndW1lbnRzLmxlbmd0aC0yKSxuPTI7bjxhcmd1bWVudHMubGVuZ3RoO24rKyloW24tMl09YXJndW1lbnRzW25dO3JldHVybiBiLnByb3RvdHlwZVtlXS5hcHBseShkLGgpfTt9ZnVuY3Rpb24gdigpe3RoaXMucz10aGlzLnM7dGhpcy5vPXRoaXMubzt9dmFyIGthPTAsbGE9e307di5wcm90b3R5cGUucz0hMTt2LnByb3RvdHlwZS5uYT1mdW5jdGlvbigpe2lmKCF0aGlzLnMmJih0aGlzLnM9ITAsdGhpcy5NKCksMCE9a2EpKXt2YXIgYT1kYSh0aGlzKTtkZWxldGUgbGFbYV07fX07di5wcm90b3R5cGUuTT1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBtYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX0sbmE9QXJyYXkucHJvdG90eXBlLmZvckVhY2g/ZnVuY3Rpb24oYSxiLGMpe0FycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLGMpO306ZnVuY3Rpb24oYSxiLGMpe2NvbnN0IGQ9YS5sZW5ndGgsZT1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZj0wO2Y8ZDtmKyspZiBpbiBlJiZiLmNhbGwoYyxlW2ZdLGYsYSk7fTtcbmZ1bmN0aW9uIG9hKGEpe2E6e3ZhciBiPXBhO2NvbnN0IGM9YS5sZW5ndGgsZD1cInN0cmluZ1wiPT09dHlwZW9mIGE/YS5zcGxpdChcIlwiKTphO2ZvcihsZXQgZT0wO2U8YztlKyspaWYoZSBpbiBkJiZiLmNhbGwodm9pZCAwLGRbZV0sZSxhKSl7Yj1lO2JyZWFrIGF9Yj0tMTt9cmV0dXJuIDA+Yj9udWxsOlwic3RyaW5nXCI9PT10eXBlb2YgYT9hLmNoYXJBdChiKTphW2JdfWZ1bmN0aW9uIHFhKGEpe3JldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLGFyZ3VtZW50cyl9ZnVuY3Rpb24gcmEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfWZ1bmN0aW9uIHNhKGEpe3JldHVybiAvXltcXHNcXHhhMF0qJC8udGVzdChhKX12YXIgdGE9U3RyaW5nLnByb3RvdHlwZS50cmltP2Z1bmN0aW9uKGEpe3JldHVybiBhLnRyaW0oKX06ZnVuY3Rpb24oYSl7cmV0dXJuIC9eW1xcc1xceGEwXSooW1xcc1xcU10qPylbXFxzXFx4YTBdKiQvLmV4ZWMoYSlbMV19O2Z1bmN0aW9uIHcoYSxiKXtyZXR1cm4gLTEhPWEuaW5kZXhPZihiKX1mdW5jdGlvbiB1YShhLGIpe3JldHVybiBhPGI/LTE6YT5iPzE6MH12YXIgeDthOnt2YXIgdmE9bC5uYXZpZ2F0b3I7aWYodmEpe3ZhciB3YT12YS51c2VyQWdlbnQ7aWYod2Epe3g9d2E7YnJlYWsgYX19eD1cIlwiO31mdW5jdGlvbiB4YShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIHlhKGEpe2NvbnN0IGI9e307Zm9yKGNvbnN0IGMgaW4gYSliW2NdPWFbY107cmV0dXJuIGJ9dmFyIHphPVwiY29uc3RydWN0b3IgaGFzT3duUHJvcGVydHkgaXNQcm90b3R5cGVPZiBwcm9wZXJ0eUlzRW51bWVyYWJsZSB0b0xvY2FsZVN0cmluZyB0b1N0cmluZyB2YWx1ZU9mXCIuc3BsaXQoXCIgXCIpO2Z1bmN0aW9uIEFhKGEsYil7bGV0IGMsZDtmb3IobGV0IGU9MTtlPGFyZ3VtZW50cy5sZW5ndGg7ZSsrKXtkPWFyZ3VtZW50c1tlXTtmb3IoYyBpbiBkKWFbY109ZFtjXTtmb3IobGV0IGY9MDtmPHphLmxlbmd0aDtmKyspYz16YVtmXSxPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZCxjKSYmKGFbY109ZFtjXSk7fX1mdW5jdGlvbiBDYShhKXtDYVtcIiBcIl0oYSk7cmV0dXJuIGF9Q2FbXCIgXCJdPWFhO2Z1bmN0aW9uIEZhKGEpe3ZhciBiPUdhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiw5KT9iWzldOmJbOV09YSg5KX12YXIgSGE9dyh4LFwiT3BlcmFcIikseT13KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpLElhPXcoeCxcIkVkZ2VcIiksSmE9SWF8fHksS2E9dyh4LFwiR2Vja29cIikmJiEodyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpKSYmISh3KHgsXCJUcmlkZW50XCIpfHx3KHgsXCJNU0lFXCIpKSYmIXcoeCxcIkVkZ2VcIiksTGE9dyh4LnRvTG93ZXJDYXNlKCksXCJ3ZWJraXRcIikmJiF3KHgsXCJFZGdlXCIpO2Z1bmN0aW9uIE1hKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIE5hO1xuYTp7dmFyIE9hPVwiXCIsUGE9ZnVuY3Rpb24oKXt2YXIgYT14O2lmKEthKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoSWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeSlyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKExhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKEhhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO1BhJiYoT2E9UGE/UGFbMV06XCJcIik7aWYoeSl7dmFyIFFhPU1hKCk7aWYobnVsbCE9UWEmJlFhPnBhcnNlRmxvYXQoT2EpKXtOYT1TdHJpbmcoUWEpO2JyZWFrIGF9fU5hPU9hO312YXIgR2E9e307XG5mdW5jdGlvbiBSYSgpe3JldHVybiBGYShmdW5jdGlvbigpe2xldCBhPTA7Y29uc3QgYj10YShTdHJpbmcoTmEpKS5zcGxpdChcIi5cIiksYz10YShcIjlcIikuc3BsaXQoXCIuXCIpLGQ9TWF0aC5tYXgoYi5sZW5ndGgsYy5sZW5ndGgpO2ZvcihsZXQgaD0wOzA9PWEmJmg8ZDtoKyspe3ZhciBlPWJbaF18fFwiXCIsZj1jW2hdfHxcIlwiO2Rve2U9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZSl8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtmPS8oXFxkKikoXFxEKikoLiopLy5leGVjKGYpfHxbXCJcIixcIlwiLFwiXCIsXCJcIl07aWYoMD09ZVswXS5sZW5ndGgmJjA9PWZbMF0ubGVuZ3RoKWJyZWFrO2E9dWEoMD09ZVsxXS5sZW5ndGg/MDpwYXJzZUludChlWzFdLDEwKSwwPT1mWzFdLmxlbmd0aD8wOnBhcnNlSW50KGZbMV0sMTApKXx8dWEoMD09ZVsyXS5sZW5ndGgsMD09ZlsyXS5sZW5ndGgpfHx1YShlWzJdLGZbMl0pO2U9ZVszXTtmPWZbM107fXdoaWxlKDA9PWEpfXJldHVybiAwPD1hfSl9dmFyIFNhO1xuaWYobC5kb2N1bWVudCYmeSl7dmFyIFRhPU1hKCk7U2E9VGE/VGE6cGFyc2VJbnQoTmEsMTApfHx2b2lkIDA7fWVsc2UgU2E9dm9pZCAwO3ZhciBVYT1TYTt2YXIgVmE9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKSxsLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0ZXN0XCIsYWEsYik7fWNhdGNoKGMpe31yZXR1cm4gYX0oKTtmdW5jdGlvbiB6KGEsYil7dGhpcy50eXBlPWE7dGhpcy5nPXRoaXMudGFyZ2V0PWI7dGhpcy5kZWZhdWx0UHJldmVudGVkPSExO316LnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7dGhpcy5kZWZhdWx0UHJldmVudGVkPSEwO307ZnVuY3Rpb24gQShhLGIpe3ouY2FsbCh0aGlzLGE/YS50eXBlOlwiXCIpO3RoaXMucmVsYXRlZFRhcmdldD10aGlzLmc9dGhpcy50YXJnZXQ9bnVsbDt0aGlzLmJ1dHRvbj10aGlzLnNjcmVlblk9dGhpcy5zY3JlZW5YPXRoaXMuY2xpZW50WT10aGlzLmNsaWVudFg9MDt0aGlzLmtleT1cIlwiO3RoaXMubWV0YUtleT10aGlzLnNoaWZ0S2V5PXRoaXMuYWx0S2V5PXRoaXMuY3RybEtleT0hMTt0aGlzLnN0YXRlPW51bGw7dGhpcy5wb2ludGVySWQ9MDt0aGlzLnBvaW50ZXJUeXBlPVwiXCI7dGhpcy5pPW51bGw7aWYoYSl7dmFyIGM9dGhpcy50eXBlPWEudHlwZSxkPWEuY2hhbmdlZFRvdWNoZXMmJmEuY2hhbmdlZFRvdWNoZXMubGVuZ3RoP2EuY2hhbmdlZFRvdWNoZXNbMF06bnVsbDt0aGlzLnRhcmdldD1hLnRhcmdldHx8YS5zcmNFbGVtZW50O3RoaXMuZz1iO2lmKGI9YS5yZWxhdGVkVGFyZ2V0KXtpZihLYSl7YTp7dHJ5e0NhKGIubm9kZU5hbWUpO3ZhciBlPSEwO2JyZWFrIGF9Y2F0Y2goZil7fWU9XG4hMTt9ZXx8KGI9bnVsbCk7fX1lbHNlIFwibW91c2VvdmVyXCI9PWM/Yj1hLmZyb21FbGVtZW50OlwibW91c2VvdXRcIj09YyYmKGI9YS50b0VsZW1lbnQpO3RoaXMucmVsYXRlZFRhcmdldD1iO2Q/KHRoaXMuY2xpZW50WD12b2lkIDAhPT1kLmNsaWVudFg/ZC5jbGllbnRYOmQucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWQuY2xpZW50WT9kLmNsaWVudFk6ZC5wYWdlWSx0aGlzLnNjcmVlblg9ZC5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1kLnNjcmVlbll8fDApOih0aGlzLmNsaWVudFg9dm9pZCAwIT09YS5jbGllbnRYP2EuY2xpZW50WDphLnBhZ2VYLHRoaXMuY2xpZW50WT12b2lkIDAhPT1hLmNsaWVudFk/YS5jbGllbnRZOmEucGFnZVksdGhpcy5zY3JlZW5YPWEuc2NyZWVuWHx8MCx0aGlzLnNjcmVlblk9YS5zY3JlZW5ZfHwwKTt0aGlzLmJ1dHRvbj1hLmJ1dHRvbjt0aGlzLmtleT1hLmtleXx8XCJcIjt0aGlzLmN0cmxLZXk9YS5jdHJsS2V5O3RoaXMuYWx0S2V5PWEuYWx0S2V5O3RoaXMuc2hpZnRLZXk9XG5hLnNoaWZ0S2V5O3RoaXMubWV0YUtleT1hLm1ldGFLZXk7dGhpcy5wb2ludGVySWQ9YS5wb2ludGVySWR8fDA7dGhpcy5wb2ludGVyVHlwZT1cInN0cmluZ1wiPT09dHlwZW9mIGEucG9pbnRlclR5cGU/YS5wb2ludGVyVHlwZTpXYVthLnBvaW50ZXJUeXBlXXx8XCJcIjt0aGlzLnN0YXRlPWEuc3RhdGU7dGhpcy5pPWE7YS5kZWZhdWx0UHJldmVudGVkJiZBLlouaC5jYWxsKHRoaXMpO319dChBLHopO3ZhciBXYT17MjpcInRvdWNoXCIsMzpcInBlblwiLDQ6XCJtb3VzZVwifTtBLnByb3RvdHlwZS5oPWZ1bmN0aW9uKCl7QS5aLmguY2FsbCh0aGlzKTt2YXIgYT10aGlzLmk7YS5wcmV2ZW50RGVmYXVsdD9hLnByZXZlbnREZWZhdWx0KCk6YS5yZXR1cm5WYWx1ZT0hMTt9O3ZhciBCPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgWGE9MDtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMuaWE9ZTt0aGlzLmtleT0rK1hhO3RoaXMuY2E9dGhpcy5mYT0hMTt9ZnVuY3Rpb24gWmEoYSl7YS5jYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5pYT1udWxsO31mdW5jdGlvbiAkYShhKXt0aGlzLnNyYz1hO3RoaXMuZz17fTt0aGlzLmg9MDt9JGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbihhLGIsYyxkLGUpe3ZhciBmPWEudG9TdHJpbmcoKTthPXRoaXMuZ1tmXTthfHwoYT10aGlzLmdbZl09W10sdGhpcy5oKyspO3ZhciBoPWFiKGEsYixkLGUpOy0xPGg/KGI9YVtoXSxjfHwoYi5mYT0hMSkpOihiPW5ldyBZYShiLHRoaXMuc3JjLGYsISFkLGUpLGIuZmE9YyxhLnB1c2goYikpO3JldHVybiBifTtmdW5jdGlvbiBiYihhLGIpe3ZhciBjPWIudHlwZTtpZihjIGluIGEuZyl7dmFyIGQ9YS5nW2NdLGU9bWEoZCxiKSxmOyhmPTA8PWUpJiZBcnJheS5wcm90b3R5cGUuc3BsaWNlLmNhbGwoZCxlLDEpO2YmJihaYShiKSwwPT1hLmdbY10ubGVuZ3RoJiYoZGVsZXRlIGEuZ1tjXSxhLmgtLSkpO319XG5mdW5jdGlvbiBhYihhLGIsYyxkKXtmb3IodmFyIGU9MDtlPGEubGVuZ3RoOysrZSl7dmFyIGY9YVtlXTtpZighZi5jYSYmZi5saXN0ZW5lcj09YiYmZi5jYXB0dXJlPT0hIWMmJmYuaWE9PWQpcmV0dXJuIGV9cmV0dXJuIC0xfXZhciBjYj1cImNsb3N1cmVfbG1fXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApLGRiPXt9O2Z1bmN0aW9uIGZiKGEsYixjLGQsZSl7aWYoZCYmZC5vbmNlKXJldHVybiBnYihhLGIsYyxkLGUpO2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz1oYihjKTtyZXR1cm4gYSYmYVtCXT9hLk4oYixjLHAoZCk/ISFkLmNhcHR1cmU6ISFkLGUpOmliKGEsYixjLCExLGQsZSl9XG5mdW5jdGlvbiBpYihhLGIsYyxkLGUsZil7aWYoIWIpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGV2ZW50IHR5cGVcIik7dmFyIGg9cChlKT8hIWUuY2FwdHVyZTohIWUsbj1qYihhKTtufHwoYVtjYl09bj1uZXcgJGEoYSkpO2M9bi5hZGQoYixjLGQsaCxmKTtpZihjLnByb3h5KXJldHVybiBjO2Q9a2IoKTtjLnByb3h5PWQ7ZC5zcmM9YTtkLmxpc3RlbmVyPWM7aWYoYS5hZGRFdmVudExpc3RlbmVyKVZhfHwoZT1oKSx2b2lkIDA9PT1lJiYoZT0hMSksYS5hZGRFdmVudExpc3RlbmVyKGIudG9TdHJpbmcoKSxkLGUpO2Vsc2UgaWYoYS5hdHRhY2hFdmVudClhLmF0dGFjaEV2ZW50KGxiKGIudG9TdHJpbmcoKSksZCk7ZWxzZSBpZihhLmFkZExpc3RlbmVyJiZhLnJlbW92ZUxpc3RlbmVyKWEuYWRkTGlzdGVuZXIoZCk7ZWxzZSB0aHJvdyBFcnJvcihcImFkZEV2ZW50TGlzdGVuZXIgYW5kIGF0dGFjaEV2ZW50IGFyZSB1bmF2YWlsYWJsZS5cIik7cmV0dXJuIGN9XG5mdW5jdGlvbiBrYigpe2Z1bmN0aW9uIGEoYyl7cmV0dXJuIGIuY2FsbChhLnNyYyxhLmxpc3RlbmVyLGMpfXZhciBiPW1iO3JldHVybiBhfWZ1bmN0aW9uIGdiKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZ2IoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITAsZCxlKX1cbmZ1bmN0aW9uIG5iKGEsYixjLGQsZSl7aWYoQXJyYXkuaXNBcnJheShiKSlmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKyluYihhLGJbZl0sYyxkLGUpO2Vsc2UgKGQ9cChkKT8hIWQuY2FwdHVyZTohIWQsYz1oYihjKSxhJiZhW0JdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9YWIoZixjLGQsZSksLTE8YyYmKFphKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1qYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9YWIoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmb2IoYykpO31cbmZ1bmN0aW9uIG9iKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuY2Epe3ZhciBiPWEuc3JjO2lmKGImJmJbQl0pYmIoYi5pLGEpO2Vsc2Uge3ZhciBjPWEudHlwZSxkPWEucHJveHk7Yi5yZW1vdmVFdmVudExpc3RlbmVyP2IucmVtb3ZlRXZlbnRMaXN0ZW5lcihjLGQsYS5jYXB0dXJlKTpiLmRldGFjaEV2ZW50P2IuZGV0YWNoRXZlbnQobGIoYyksZCk6Yi5hZGRMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lciYmYi5yZW1vdmVMaXN0ZW5lcihkKTsoYz1qYihiKSk/KGJiKGMsYSksMD09Yy5oJiYoYy5zcmM9bnVsbCxiW2NiXT1udWxsKSk6WmEoYSk7fX19ZnVuY3Rpb24gbGIoYSl7cmV0dXJuIGEgaW4gZGI/ZGJbYV06ZGJbYV09XCJvblwiK2F9ZnVuY3Rpb24gbWIoYSxiKXtpZihhLmNhKWE9ITA7ZWxzZSB7Yj1uZXcgQShiLHRoaXMpO3ZhciBjPWEubGlzdGVuZXIsZD1hLmlhfHxhLnNyYzthLmZhJiZvYihhKTthPWMuY2FsbChkLGIpO31yZXR1cm4gYX1cbmZ1bmN0aW9uIGpiKGEpe2E9YVtjYl07cmV0dXJuIGEgaW5zdGFuY2VvZiAkYT9hOm51bGx9dmFyIHBiPVwiX19jbG9zdXJlX2V2ZW50c19mbl9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKTtmdW5jdGlvbiBoYihhKXtpZihcImZ1bmN0aW9uXCI9PT10eXBlb2YgYSlyZXR1cm4gYTthW3BiXXx8KGFbcGJdPWZ1bmN0aW9uKGIpe3JldHVybiBhLmhhbmRsZUV2ZW50KGIpfSk7cmV0dXJuIGFbcGJdfWZ1bmN0aW9uIEMoKXt2LmNhbGwodGhpcyk7dGhpcy5pPW5ldyAkYSh0aGlzKTt0aGlzLlA9dGhpczt0aGlzLkk9bnVsbDt9dChDLHYpO0MucHJvdG90eXBlW0JdPSEwO0MucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24oYSxiLGMsZCl7bmIodGhpcyxhLGIsYyxkKTt9O1xuZnVuY3Rpb24gRChhLGIpe3ZhciBjLGQ9YS5JO2lmKGQpZm9yKGM9W107ZDtkPWQuSSljLnB1c2goZCk7YT1hLlA7ZD1iLnR5cGV8fGI7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBiKWI9bmV3IHooYixhKTtlbHNlIGlmKGIgaW5zdGFuY2VvZiB6KWIudGFyZ2V0PWIudGFyZ2V0fHxhO2Vsc2Uge3ZhciBlPWI7Yj1uZXcgeihkLGEpO0FhKGIsZSk7fWU9ITA7aWYoYylmb3IodmFyIGY9Yy5sZW5ndGgtMTswPD1mO2YtLSl7dmFyIGg9Yi5nPWNbZl07ZT1xYihoLGQsITAsYikmJmU7fWg9Yi5nPWE7ZT1xYihoLGQsITAsYikmJmU7ZT1xYihoLGQsITEsYikmJmU7aWYoYylmb3IoZj0wO2Y8Yy5sZW5ndGg7ZisrKWg9Yi5nPWNbZl0sZT1xYihoLGQsITEsYikmJmU7fVxuQy5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0MuWi5NLmNhbGwodGhpcyk7aWYodGhpcy5pKXt2YXIgYT10aGlzLmksYztmb3IoYyBpbiBhLmcpe2Zvcih2YXIgZD1hLmdbY10sZT0wO2U8ZC5sZW5ndGg7ZSsrKVphKGRbZV0pO2RlbGV0ZSBhLmdbY107YS5oLS07fX10aGlzLkk9bnVsbDt9O0MucHJvdG90eXBlLk49ZnVuY3Rpb24oYSxiLGMsZCl7cmV0dXJuIHRoaXMuaS5hZGQoU3RyaW5nKGEpLGIsITEsYyxkKX07Qy5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMCxjLGQpfTtcbmZ1bmN0aW9uIHFiKGEsYixjLGQpe2I9YS5pLmdbU3RyaW5nKGIpXTtpZighYilyZXR1cm4gITA7Yj1iLmNvbmNhdCgpO2Zvcih2YXIgZT0hMCxmPTA7ZjxiLmxlbmd0aDsrK2Ype3ZhciBoPWJbZl07aWYoaCYmIWguY2EmJmguY2FwdHVyZT09Yyl7dmFyIG49aC5saXN0ZW5lcix1PWguaWF8fGguc3JjO2guZmEmJmJiKGEuaSxoKTtlPSExIT09bi5jYWxsKHUsZCkmJmU7fX1yZXR1cm4gZSYmIWQuZGVmYXVsdFByZXZlbnRlZH12YXIgcmI9bC5KU09OLnN0cmluZ2lmeTtmdW5jdGlvbiBzYigpe3ZhciBhPXRiO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgdWJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9dmIuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciB2Yj1uZXcgY2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmk9YTt0aGlzLmo9Yjt0aGlzLmg9MDt0aGlzLmc9bnVsbDt9Z2V0KCl7bGV0IGE7MDx0aGlzLmg/KHRoaXMuaC0tLGE9dGhpcy5nLHRoaXMuZz1hLm5leHQsYS5uZXh0PW51bGwpOmE9dGhpcy5pKCk7cmV0dXJuIGF9fSgoKT0+bmV3IHdiLGE9PmEucmVzZXQoKSk7XG5jbGFzcyB3Yntjb25zdHJ1Y3Rvcigpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fXNldChhLGIpe3RoaXMuaD1hO3RoaXMuZz1iO3RoaXMubmV4dD1udWxsO31yZXNldCgpe3RoaXMubmV4dD10aGlzLmc9dGhpcy5oPW51bGw7fX1mdW5jdGlvbiB5YihhKXtsLnNldFRpbWVvdXQoKCk9Pnt0aHJvdyBhO30sMCk7fWZ1bmN0aW9uIHpiKGEsYil7QWJ8fEJiKCk7Q2J8fChBYigpLENiPSEwKTt0Yi5hZGQoYSxiKTt9dmFyIEFiO2Z1bmN0aW9uIEJiKCl7dmFyIGE9bC5Qcm9taXNlLnJlc29sdmUodm9pZCAwKTtBYj1mdW5jdGlvbigpe2EudGhlbihEYik7fTt9dmFyIENiPSExLHRiPW5ldyB1YjtmdW5jdGlvbiBEYigpe2Zvcih2YXIgYTthPXNiKCk7KXt0cnl7YS5oLmNhbGwoYS5nKTt9Y2F0Y2goYyl7eWIoYyk7fXZhciBiPXZiO2IuaihhKTsxMDA+Yi5oJiYoYi5oKyssYS5uZXh0PWIuZyxiLmc9YSk7fUNiPSExO31mdW5jdGlvbiBFYihhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLmtiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO310KEViLEMpO2s9RWIucHJvdG90eXBlO2suZGE9ITE7ay5TPW51bGw7ay5rYj1mdW5jdGlvbigpe2lmKHRoaXMuZGEpe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuUyYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5TKSx0aGlzLlM9bnVsbCksRCh0aGlzLFwidGlja1wiKSx0aGlzLmRhJiYoRmIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZGE9ITA7dGhpcy5TfHwodGhpcy5TPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24gRmIoYSl7YS5kYT0hMTthLlMmJihhLmcuY2xlYXJUaW1lb3V0KGEuUyksYS5TPW51bGwpO31rLk09ZnVuY3Rpb24oKXtFYi5aLk0uY2FsbCh0aGlzKTtGYih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24gR2IoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiBIYihhKXthLmc9R2IoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsSGIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgSWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOkhiKHRoaXMpO31NKCl7c3VwZXIuTSgpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEUoYSl7di5jYWxsKHRoaXMpO3RoaXMuaD1hO3RoaXMuZz17fTt9dChFLHYpO3ZhciBKYj1bXTtmdW5jdGlvbiBLYihhLGIsYyxkKXtBcnJheS5pc0FycmF5KGMpfHwoYyYmKEpiWzBdPWMudG9TdHJpbmcoKSksYz1KYik7Zm9yKHZhciBlPTA7ZTxjLmxlbmd0aDtlKyspe3ZhciBmPWZiKGIsY1tlXSxkfHxhLmhhbmRsZUV2ZW50LCExLGEuaHx8YSk7aWYoIWYpYnJlYWs7YS5nW2Yua2V5XT1mO319ZnVuY3Rpb24gTGIoYSl7eGEoYS5nLGZ1bmN0aW9uKGIsYyl7dGhpcy5nLmhhc093blByb3BlcnR5KGMpJiZvYihiKTt9LGEpO2EuZz17fTt9RS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe0UuWi5NLmNhbGwodGhpcyk7TGIodGhpcyk7fTtFLnByb3RvdHlwZS5oYW5kbGVFdmVudD1mdW5jdGlvbigpe3Rocm93IEVycm9yKFwiRXZlbnRIYW5kbGVyLmhhbmRsZUV2ZW50IG5vdCBpbXBsZW1lbnRlZFwiKTt9O2Z1bmN0aW9uIE1iKCl7dGhpcy5nPSEwO31NYi5wcm90b3R5cGUuQWE9ZnVuY3Rpb24oKXt0aGlzLmc9ITE7fTtmdW5jdGlvbiBOYihhLGIsYyxkLGUsZil7YS5pbmZvKGZ1bmN0aW9uKCl7aWYoYS5nKWlmKGYpe3ZhciBoPVwiXCI7Zm9yKHZhciBuPWYuc3BsaXQoXCImXCIpLHU9MDt1PG4ubGVuZ3RoO3UrKyl7dmFyIG09blt1XS5zcGxpdChcIj1cIik7aWYoMTxtLmxlbmd0aCl7dmFyIHI9bVswXTttPW1bMV07dmFyIEc9ci5zcGxpdChcIl9cIik7aD0yPD1HLmxlbmd0aCYmXCJ0eXBlXCI9PUdbMV0/aCsocitcIj1cIittK1wiJlwiKTpoKyhyK1wiPXJlZGFjdGVkJlwiKTt9fX1lbHNlIGg9bnVsbDtlbHNlIGg9ZjtyZXR1cm4gXCJYTUxIVFRQIFJFUSAoXCIrZCtcIikgW2F0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIraH0pO31cbmZ1bmN0aW9uIE9iKGEsYixjLGQsZSxmLGgpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgUkVTUCAoXCIrZCtcIikgWyBhdHRlbXB0IFwiK2UrXCJdOiBcIitiK1wiXFxuXCIrYytcIlxcblwiK2YrXCIgXCIraH0pO31mdW5jdGlvbiBGKGEsYixjLGQpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlhNTEhUVFAgVEVYVCAoXCIrYitcIik6IFwiK1BiKGEsYykrKGQ/XCIgXCIrZDpcIlwiKX0pO31mdW5jdGlvbiBRYihhLGIpe2EuaW5mbyhmdW5jdGlvbigpe3JldHVybiBcIlRJTUVPVVQ6IFwiK2J9KTt9TWIucHJvdG90eXBlLmluZm89ZnVuY3Rpb24oKXt9O1xuZnVuY3Rpb24gUGIoYSxiKXtpZighYS5nKXJldHVybiBiO2lmKCFiKXJldHVybiBudWxsO3RyeXt2YXIgYz1KU09OLnBhcnNlKGIpO2lmKGMpZm9yKGE9MDthPGMubGVuZ3RoO2ErKylpZihBcnJheS5pc0FycmF5KGNbYV0pKXt2YXIgZD1jW2FdO2lmKCEoMj5kLmxlbmd0aCkpe3ZhciBlPWRbMV07aWYoQXJyYXkuaXNBcnJheShlKSYmISgxPmUubGVuZ3RoKSl7dmFyIGY9ZVswXTtpZihcIm5vb3BcIiE9ZiYmXCJzdG9wXCIhPWYmJlwiY2xvc2VcIiE9Zilmb3IodmFyIGg9MTtoPGUubGVuZ3RoO2grKyllW2hdPVwiXCI7fX19cmV0dXJuIHJiKGMpfWNhdGNoKG4pe3JldHVybiBifX12YXIgSD17fSxSYj1udWxsO2Z1bmN0aW9uIFNiKCl7cmV0dXJuIFJiPVJifHxuZXcgQ31ILk1hPVwic2VydmVycmVhY2hhYmlsaXR5XCI7ZnVuY3Rpb24gVGIoYSl7ei5jYWxsKHRoaXMsSC5NYSxhKTt9dChUYix6KTtmdW5jdGlvbiBJKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFRiKGIsYSkpO31ILlNUQVRfRVZFTlQ9XCJzdGF0ZXZlbnRcIjtmdW5jdGlvbiBVYihhLGIpe3ouY2FsbCh0aGlzLEguU1RBVF9FVkVOVCxhKTt0aGlzLnN0YXQ9Yjt9dChVYix6KTtmdW5jdGlvbiBKKGEpe2NvbnN0IGI9U2IoKTtEKGIsbmV3IFViKGIsYSkpO31ILk5hPVwidGltaW5nZXZlbnRcIjtmdW5jdGlvbiBWYihhLGIpe3ouY2FsbCh0aGlzLEguTmEsYSk7dGhpcy5zaXplPWI7fXQoVmIseik7XG5mdW5jdGlvbiBLKGEsYil7aWYoXCJmdW5jdGlvblwiIT09dHlwZW9mIGEpdGhyb3cgRXJyb3IoXCJGbiBtdXN0IG5vdCBiZSBudWxsIGFuZCBtdXN0IGJlIGEgZnVuY3Rpb25cIik7cmV0dXJuIGwuc2V0VGltZW91dChmdW5jdGlvbigpe2EoKTt9LGIpfXZhciBXYj17Tk9fRVJST1I6MCxsYjoxLHliOjIseGI6MyxzYjo0LHdiOjUsemI6NixKYTo3LFRJTUVPVVQ6OCxDYjo5fTt2YXIgWGI9e3FiOlwiY29tcGxldGVcIixNYjpcInN1Y2Nlc3NcIixLYTpcImVycm9yXCIsSmE6XCJhYm9ydFwiLEViOlwicmVhZHlcIixGYjpcInJlYWR5c3RhdGVjaGFuZ2VcIixUSU1FT1VUOlwidGltZW91dFwiLEFiOlwiaW5jcmVtZW50YWxkYXRhXCIsRGI6XCJwcm9ncmVzc1wiLHRiOlwiZG93bmxvYWRwcm9ncmVzc1wiLFViOlwidXBsb2FkcHJvZ3Jlc3NcIn07ZnVuY3Rpb24gWWIoKXt9WWIucHJvdG90eXBlLmg9bnVsbDtmdW5jdGlvbiBaYihhKXtyZXR1cm4gYS5ofHwoYS5oPWEuaSgpKX1mdW5jdGlvbiAkYigpe312YXIgTD17T1BFTjpcImFcIixwYjpcImJcIixLYTpcImNcIixCYjpcImRcIn07ZnVuY3Rpb24gYWMoKXt6LmNhbGwodGhpcyxcImRcIik7fXQoYWMseik7ZnVuY3Rpb24gYmMoKXt6LmNhbGwodGhpcyxcImNcIik7fXQoYmMseik7dmFyIGNjO2Z1bmN0aW9uIGRjKCl7fXQoZGMsWWIpO2RjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07ZGMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319O2NjPW5ldyBkYztmdW5jdGlvbiBNKGEsYixjLGQpe3RoaXMubD1hO3RoaXMuaj1iO3RoaXMubT1jO3RoaXMuWD1kfHwxO3RoaXMuVj1uZXcgRSh0aGlzKTt0aGlzLlA9ZWM7YT1KYT8xMjU6dm9pZCAwO3RoaXMuVz1uZXcgRWIoYSk7dGhpcy5IPW51bGw7dGhpcy5pPSExO3RoaXMucz10aGlzLkE9dGhpcy52PXRoaXMuSz10aGlzLkY9dGhpcy5ZPXRoaXMuQj1udWxsO3RoaXMuRD1bXTt0aGlzLmc9bnVsbDt0aGlzLkM9MDt0aGlzLm89dGhpcy51PW51bGw7dGhpcy5OPS0xO3RoaXMuST0hMTt0aGlzLk89MDt0aGlzLkw9bnVsbDt0aGlzLmFhPXRoaXMuSj10aGlzLiQ9dGhpcy5VPSExO3RoaXMuaD1uZXcgZmM7fWZ1bmN0aW9uIGZjKCl7dGhpcy5pPW51bGw7dGhpcy5nPVwiXCI7dGhpcy5oPSExO312YXIgZWM9NDVFMyxnYz17fSxoYz17fTtrPU0ucHJvdG90eXBlO2suc2V0VGltZW91dD1mdW5jdGlvbihhKXt0aGlzLlA9YTt9O1xuZnVuY3Rpb24gaWMoYSxiLGMpe2EuSz0xO2Eudj1qYyhOKGIpKTthLnM9YzthLlU9ITA7a2MoYSxudWxsKTt9ZnVuY3Rpb24ga2MoYSxiKXthLkY9RGF0ZS5ub3coKTtsYyhhKTthLkE9TihhLnYpO3ZhciBjPWEuQSxkPWEuWDtBcnJheS5pc0FycmF5KGQpfHwoZD1bU3RyaW5nKGQpXSk7bWMoYy5oLFwidFwiLGQpO2EuQz0wO2M9YS5sLkg7YS5oPW5ldyBmYzthLmc9bmMoYS5sLGM/YjpudWxsLCFhLnMpOzA8YS5PJiYoYS5MPW5ldyBJYihxKGEuSWEsYSxhLmcpLGEuTykpO0tiKGEuVixhLmcsXCJyZWFkeXN0YXRlY2hhbmdlXCIsYS5nYik7Yj1hLkg/eWEoYS5IKTp7fTthLnM/KGEudXx8KGEudT1cIlBPU1RcIiksYltcIkNvbnRlbnQtVHlwZVwiXT1cImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiLGEuZy5lYShhLkEsYS51LGEucyxiKSk6KGEudT1cIkdFVFwiLGEuZy5lYShhLkEsYS51LG51bGwsYikpO0koMSk7TmIoYS5qLGEudSxhLkEsYS5tLGEuWCxhLnMpO31cbmsuZ2I9ZnVuY3Rpb24oYSl7YT1hLnRhcmdldDtjb25zdCBiPXRoaXMuTDtiJiYzPT1PKGEpP2IubCgpOnRoaXMuSWEoYSk7fTtcbmsuSWE9ZnVuY3Rpb24oYSl7dHJ5e2lmKGE9PXRoaXMuZylhOntjb25zdCByPU8odGhpcy5nKTt2YXIgYj10aGlzLmcuRGEoKTtjb25zdCBHPXRoaXMuZy5iYSgpO2lmKCEoMz5yKSYmKDMhPXJ8fEphfHx0aGlzLmcmJih0aGlzLmguaHx8dGhpcy5nLmdhKCl8fG9jKHRoaXMuZykpKSl7dGhpcy5JfHw0IT1yfHw3PT1ifHwoOD09Ynx8MD49Rz9JKDMpOkkoMikpO3BjKHRoaXMpO3ZhciBjPXRoaXMuZy5iYSgpO3RoaXMuTj1jO2I6aWYocWModGhpcykpe3ZhciBkPW9jKHRoaXMuZyk7YT1cIlwiO3ZhciBlPWQubGVuZ3RoLGY9ND09Tyh0aGlzLmcpO2lmKCF0aGlzLmguaSl7aWYoXCJ1bmRlZmluZWRcIj09PXR5cGVvZiBUZXh0RGVjb2Rlcil7UCh0aGlzKTtyYyh0aGlzKTt2YXIgaD1cIlwiO2JyZWFrIGJ9dGhpcy5oLmk9bmV3IGwuVGV4dERlY29kZXI7fWZvcihiPTA7YjxlO2IrKyl0aGlzLmguaD0hMCxhKz10aGlzLmguaS5kZWNvZGUoZFtiXSx7c3RyZWFtOmYmJmI9PWUtMX0pO2Quc3BsaWNlKDAsXG5lKTt0aGlzLmguZys9YTt0aGlzLkM9MDtoPXRoaXMuaC5nO31lbHNlIGg9dGhpcy5nLmdhKCk7dGhpcy5pPTIwMD09YztPYih0aGlzLmosdGhpcy51LHRoaXMuQSx0aGlzLm0sdGhpcy5YLHIsYyk7aWYodGhpcy5pKXtpZih0aGlzLiQmJiF0aGlzLkope2I6e2lmKHRoaXMuZyl7dmFyIG4sdT10aGlzLmc7aWYoKG49dS5nP3UuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYhc2Eobikpe3ZhciBtPW47YnJlYWsgYn19bT1udWxsO31pZihjPW0pRih0aGlzLmosdGhpcy5tLGMsXCJJbml0aWFsIGhhbmRzaGFrZSByZXNwb25zZSB2aWEgWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIiksdGhpcy5KPSEwLHNjKHRoaXMsYyk7ZWxzZSB7dGhpcy5pPSExO3RoaXMubz0zO0ooMTIpO1AodGhpcyk7cmModGhpcyk7YnJlYWsgYX19dGhpcy5VPyh0Yyh0aGlzLHIsaCksSmEmJnRoaXMuaSYmMz09ciYmKEtiKHRoaXMuVix0aGlzLlcsXCJ0aWNrXCIsdGhpcy5mYiksXG50aGlzLlcuc3RhcnQoKSkpOihGKHRoaXMuaix0aGlzLm0saCxudWxsKSxzYyh0aGlzLGgpKTs0PT1yJiZQKHRoaXMpO3RoaXMuaSYmIXRoaXMuSSYmKDQ9PXI/dWModGhpcy5sLHRoaXMpOih0aGlzLmk9ITEsbGModGhpcykpKTt9ZWxzZSA0MDA9PWMmJjA8aC5pbmRleE9mKFwiVW5rbm93biBTSURcIik/KHRoaXMubz0zLEooMTIpKToodGhpcy5vPTAsSigxMykpLFAodGhpcykscmModGhpcyk7fX19Y2F0Y2gocil7fWZpbmFsbHl7fX07ZnVuY3Rpb24gcWMoYSl7cmV0dXJuIGEuZz9cIkdFVFwiPT1hLnUmJjIhPWEuSyYmYS5sLkJhOiExfVxuZnVuY3Rpb24gdGMoYSxiLGMpe2xldCBkPSEwLGU7Zm9yKDshYS5JJiZhLkM8Yy5sZW5ndGg7KWlmKGU9dmMoYSxjKSxlPT1oYyl7ND09YiYmKGEubz00LEooMTQpLGQ9ITEpO0YoYS5qLGEubSxudWxsLFwiW0luY29tcGxldGUgUmVzcG9uc2VdXCIpO2JyZWFrfWVsc2UgaWYoZT09Z2Mpe2Eubz00O0ooMTUpO0YoYS5qLGEubSxjLFwiW0ludmFsaWQgQ2h1bmtdXCIpO2Q9ITE7YnJlYWt9ZWxzZSBGKGEuaixhLm0sZSxudWxsKSxzYyhhLGUpO3FjKGEpJiZlIT1oYyYmZSE9Z2MmJihhLmguZz1cIlwiLGEuQz0wKTs0IT1ifHwwIT1jLmxlbmd0aHx8YS5oLmh8fChhLm89MSxKKDE2KSxkPSExKTthLmk9YS5pJiZkO2Q/MDxjLmxlbmd0aCYmIWEuYWEmJihhLmFhPSEwLGI9YS5sLGIuZz09YSYmYi4kJiYhYi5MJiYoYi5oLmluZm8oXCJHcmVhdCwgbm8gYnVmZmVyaW5nIHByb3h5IGRldGVjdGVkLiBCeXRlcyByZWNlaXZlZDogXCIrYy5sZW5ndGgpLHdjKGIpLGIuTD0hMCxKKDExKSkpOihGKGEuaixhLm0sXG5jLFwiW0ludmFsaWQgQ2h1bmtlZCBSZXNwb25zZV1cIiksUChhKSxyYyhhKSk7fWsuZmI9ZnVuY3Rpb24oKXtpZih0aGlzLmcpe3ZhciBhPU8odGhpcy5nKSxiPXRoaXMuZy5nYSgpO3RoaXMuQzxiLmxlbmd0aCYmKHBjKHRoaXMpLHRjKHRoaXMsYSxiKSx0aGlzLmkmJjQhPWEmJmxjKHRoaXMpKTt9fTtmdW5jdGlvbiB2YyhhLGIpe3ZhciBjPWEuQyxkPWIuaW5kZXhPZihcIlxcblwiLGMpO2lmKC0xPT1kKXJldHVybiBoYztjPU51bWJlcihiLnN1YnN0cmluZyhjLGQpKTtpZihpc05hTihjKSlyZXR1cm4gZ2M7ZCs9MTtpZihkK2M+Yi5sZW5ndGgpcmV0dXJuIGhjO2I9Yi5zdWJzdHIoZCxjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5JPSEwO1AodGhpcyk7fTtmdW5jdGlvbiBsYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7eGMoYSxhLlApO31cbmZ1bmN0aW9uIHhjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPUsocShhLmViLGEpLGIpO31mdW5jdGlvbiBwYyhhKXthLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ay5lYj1mdW5jdGlvbigpe3RoaXMuQj1udWxsO2NvbnN0IGE9RGF0ZS5ub3coKTswPD1hLXRoaXMuWT8oUWIodGhpcy5qLHRoaXMuQSksMiE9dGhpcy5LJiYoSSgzKSxKKDE3KSksUCh0aGlzKSx0aGlzLm89MixyYyh0aGlzKSk6eGModGhpcyx0aGlzLlktYSk7fTtmdW5jdGlvbiByYyhhKXswPT1hLmwuR3x8YS5JfHx1YyhhLmwsYSk7fWZ1bmN0aW9uIFAoYSl7cGMoYSk7dmFyIGI9YS5MO2ImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGIubmEmJmIubmEoKTthLkw9bnVsbDtGYihhLlcpO0xiKGEuVik7YS5nJiYoYj1hLmcsYS5nPW51bGwsYi5hYm9ydCgpLGIubmEoKSk7fVxuZnVuY3Rpb24gc2MoYSxiKXt0cnl7dmFyIGM9YS5sO2lmKDAhPWMuRyYmKGMuZz09YXx8eWMoYy5pLGEpKSlpZihjLkk9YS5OLCFhLkomJnljKGMuaSxhKSYmMz09Yy5HKXt0cnl7dmFyIGQ9Yy5DYS5nLnBhcnNlKGIpO31jYXRjaChtKXtkPW51bGw7fWlmKEFycmF5LmlzQXJyYXkoZCkmJjM9PWQubGVuZ3RoKXt2YXIgZT1kO2lmKDA9PWVbMF0pYTp7aWYoIWMudSl7aWYoYy5nKWlmKGMuZy5GKzNFMzxhLkYpemMoYyksQWMoYyk7ZWxzZSBicmVhayBhO0JjKGMpO0ooMTgpO319ZWxzZSBjLnRhPWVbMV0sMDxjLnRhLWMuVSYmMzc1MDA+ZVsyXSYmYy5OJiYwPT1jLkEmJiFjLnYmJihjLnY9SyhxKGMuYWIsYyksNkUzKSk7aWYoMT49Q2MoYy5pKSYmYy5rYSl7dHJ5e2Mua2EoKTt9Y2F0Y2gobSl7fWMua2E9dm9pZCAwO319ZWxzZSBRKGMsMTEpO31lbHNlIGlmKChhLkp8fGMuZz09YSkmJnpjKGMpLCFzYShiKSlmb3IoZT1jLkNhLmcucGFyc2UoYiksYj0wO2I8ZS5sZW5ndGg7YisrKXtsZXQgbT1lW2JdO1xuYy5VPW1bMF07bT1tWzFdO2lmKDI9PWMuRylpZihcImNcIj09bVswXSl7Yy5KPW1bMV07Yy5sYT1tWzJdO2NvbnN0IHI9bVszXTtudWxsIT1yJiYoYy5tYT1yLGMuaC5pbmZvKFwiVkVSPVwiK2MubWEpKTtjb25zdCBHPW1bNF07bnVsbCE9RyYmKGMuemE9RyxjLmguaW5mbyhcIlNWRVI9XCIrYy56YSkpO2NvbnN0IERhPW1bNV07bnVsbCE9RGEmJlwibnVtYmVyXCI9PT10eXBlb2YgRGEmJjA8RGEmJihkPTEuNSpEYSxjLks9ZCxjLmguaW5mbyhcImJhY2tDaGFubmVsUmVxdWVzdFRpbWVvdXRNc189XCIrZCkpO2Q9Yztjb25zdCBjYT1hLmc7aWYoY2Epe2NvbnN0IEVhPWNhLmc/Y2EuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtQ2xpZW50LVdpcmUtUHJvdG9jb2xcIik6bnVsbDtpZihFYSl7dmFyIGY9ZC5pOyFmLmcmJih3KEVhLFwic3BkeVwiKXx8dyhFYSxcInF1aWNcIil8fHcoRWEsXCJoMlwiKSkmJihmLmo9Zi5sLGYuZz1uZXcgU2V0LGYuaCYmKERjKGYsZi5oKSxmLmg9bnVsbCkpO31pZihkLkQpe2NvbnN0IHhiPVxuY2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLVNlc3Npb24tSWRcIik6bnVsbDt4YiYmKGQuc2E9eGIsUihkLkYsZC5ELHhiKSk7fX1jLkc9MztjLmomJmMuai54YSgpO2MuJCYmKGMuTz1EYXRlLm5vdygpLWEuRixjLmguaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuTytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLm9hPUVjKGQsZC5IP2QubGE6bnVsbCxkLlcpO2lmKGguSil7RmMoZC5pLGgpO3ZhciBuPWgsdT1kLks7dSYmbi5zZXRUaW1lb3V0KHUpO24uQiYmKHBjKG4pLGxjKG4pKTtkLmc9aDt9ZWxzZSBHYyhkKTswPGMubC5sZW5ndGgmJkhjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fFEoYyw3KTtlbHNlIDM9PWMuRyYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/UShjLDcpOkljKGMpOlwibm9vcFwiIT1tWzBdJiZjLmomJmMuai53YShtKSxjLkE9MCk7fUkoNCk7fWNhdGNoKG0pe319ZnVuY3Rpb24gSmMoYSl7aWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpcmV0dXJuIGEuUigpO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gYS5zcGxpdChcIlwiKTtpZihiYShhKSl7Zm9yKHZhciBiPVtdLGM9YS5sZW5ndGgsZD0wO2Q8YztkKyspYi5wdXNoKGFbZF0pO3JldHVybiBifWI9W107Yz0wO2ZvcihkIGluIGEpYltjKytdPWFbZF07cmV0dXJuIGJ9XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKW5hKGEsYix2b2lkIDApO2Vsc2Uge2lmKGEuVCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5UKXZhciBjPWEuVCgpO2Vsc2UgaWYoYS5SJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlIpYz12b2lkIDA7ZWxzZSBpZihiYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKXtjPVtdO2Zvcih2YXIgZD1hLmxlbmd0aCxlPTA7ZTxkO2UrKyljLnB1c2goZSk7fWVsc2UgZm9yKGUgaW4gYz1bXSxkPTAsYSljW2QrK109ZTtkPUpjKGEpO2U9ZC5sZW5ndGg7Zm9yKHZhciBmPTA7ZjxlO2YrKyliLmNhbGwodm9pZCAwLGRbZl0sYyYmY1tmXSxhKTt9fWZ1bmN0aW9uIFMoYSxiKXt0aGlzLmg9e307dGhpcy5nPVtdO3RoaXMuaT0wO3ZhciBjPWFyZ3VtZW50cy5sZW5ndGg7aWYoMTxjKXtpZihjJTIpdGhyb3cgRXJyb3IoXCJVbmV2ZW4gbnVtYmVyIG9mIGFyZ3VtZW50c1wiKTtmb3IodmFyIGQ9MDtkPGM7ZCs9Mil0aGlzLnNldChhcmd1bWVudHNbZF0sYXJndW1lbnRzW2QrMV0pO31lbHNlIGlmKGEpaWYoYSBpbnN0YW5jZW9mIFMpZm9yKGM9YS5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXRoaXMuc2V0KGNbZF0sYS5nZXQoY1tkXSkpO2Vsc2UgZm9yKGQgaW4gYSl0aGlzLnNldChkLGFbZF0pO31rPVMucHJvdG90eXBlO2suUj1mdW5jdGlvbigpe0xjKHRoaXMpO2Zvcih2YXIgYT1bXSxiPTA7Yjx0aGlzLmcubGVuZ3RoO2IrKylhLnB1c2godGhpcy5oW3RoaXMuZ1tiXV0pO3JldHVybiBhfTtrLlQ9ZnVuY3Rpb24oKXtMYyh0aGlzKTtyZXR1cm4gdGhpcy5nLmNvbmNhdCgpfTtcbmZ1bmN0aW9uIExjKGEpe2lmKGEuaSE9YS5nLmxlbmd0aCl7Zm9yKHZhciBiPTAsYz0wO2I8YS5nLmxlbmd0aDspe3ZhciBkPWEuZ1tiXTtUKGEuaCxkKSYmKGEuZ1tjKytdPWQpO2IrKzt9YS5nLmxlbmd0aD1jO31pZihhLmkhPWEuZy5sZW5ndGgpe3ZhciBlPXt9O2ZvcihjPWI9MDtiPGEuZy5sZW5ndGg7KWQ9YS5nW2JdLFQoZSxkKXx8KGEuZ1tjKytdPWQsZVtkXT0xKSxiKys7YS5nLmxlbmd0aD1jO319ay5nZXQ9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gVCh0aGlzLmgsYSk/dGhpcy5oW2FdOmJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7VCh0aGlzLmgsYSl8fCh0aGlzLmkrKyx0aGlzLmcucHVzaChhKSk7dGhpcy5oW2FdPWI7fTtrLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9dGhpcy5UKCksZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgZT1jW2RdLGY9dGhpcy5nZXQoZSk7YS5jYWxsKGIsZixlLHRoaXMpO319O1xuZnVuY3Rpb24gVChhLGIpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxiKX12YXIgTWM9L14oPzooW146Lz8jLl0rKTopPyg/OlxcL1xcLyg/OihbXlxcXFwvPyNdKilAKT8oW15cXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFwvPyNdfCQpKT8oW14/I10rKT8oPzpcXD8oW14jXSopKT8oPzojKFtcXHNcXFNdKikpPyQvO2Z1bmN0aW9uIE5jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gVShhLGIpe3RoaXMuaT10aGlzLnM9dGhpcy5qPVwiXCI7dGhpcy5tPW51bGw7dGhpcy5vPXRoaXMubD1cIlwiO3RoaXMuZz0hMTtpZihhIGluc3RhbmNlb2YgVSl7dGhpcy5nPXZvaWQgMCE9PWI/YjphLmc7T2ModGhpcyxhLmopO3RoaXMucz1hLnM7UGModGhpcyxhLmkpO1FjKHRoaXMsYS5tKTt0aGlzLmw9YS5sO2I9YS5oO3ZhciBjPW5ldyBSYztjLmk9Yi5pO2IuZyYmKGMuZz1uZXcgUyhiLmcpLGMuaD1iLmgpO1NjKHRoaXMsYyk7dGhpcy5vPWEubzt9ZWxzZSBhJiYoYz1TdHJpbmcoYSkubWF0Y2goTWMpKT8odGhpcy5nPSEhYixPYyh0aGlzLGNbMV18fFwiXCIsITApLHRoaXMucz1UYyhjWzJdfHxcIlwiKSxQYyh0aGlzLGNbM118fFwiXCIsITApLFFjKHRoaXMsY1s0XSksdGhpcy5sPVRjKGNbNV18fFwiXCIsITApLFNjKHRoaXMsY1s2XXx8XCJcIiwhMCksdGhpcy5vPVRjKGNbN118fFwiXCIpKToodGhpcy5nPSEhYix0aGlzLmg9bmV3IFJjKG51bGwsdGhpcy5nKSk7fVxuVS5wcm90b3R5cGUudG9TdHJpbmc9ZnVuY3Rpb24oKXt2YXIgYT1bXSxiPXRoaXMuajtiJiZhLnB1c2goVWMoYixWYywhMCksXCI6XCIpO3ZhciBjPXRoaXMuaTtpZihjfHxcImZpbGVcIj09YilhLnB1c2goXCIvL1wiKSwoYj10aGlzLnMpJiZhLnB1c2goVWMoYixWYywhMCksXCJAXCIpLGEucHVzaChlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGMpKS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGM9dGhpcy5tLG51bGwhPWMmJmEucHVzaChcIjpcIixTdHJpbmcoYykpO2lmKGM9dGhpcy5sKXRoaXMuaSYmXCIvXCIhPWMuY2hhckF0KDApJiZhLnB1c2goXCIvXCIpLGEucHVzaChVYyhjLFwiL1wiPT1jLmNoYXJBdCgwKT9XYzpYYywhMCkpOyhjPXRoaXMuaC50b1N0cmluZygpKSYmYS5wdXNoKFwiP1wiLGMpOyhjPXRoaXMubykmJmEucHVzaChcIiNcIixVYyhjLFljKSk7cmV0dXJuIGEuam9pbihcIlwiKX07ZnVuY3Rpb24gTihhKXtyZXR1cm4gbmV3IFUoYSl9XG5mdW5jdGlvbiBPYyhhLGIsYyl7YS5qPWM/VGMoYiwhMCk6YjthLmomJihhLmo9YS5qLnJlcGxhY2UoLzokLyxcIlwiKSk7fWZ1bmN0aW9uIFBjKGEsYixjKXthLmk9Yz9UYyhiLCEwKTpiO31mdW5jdGlvbiBRYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFNjKGEsYixjKXtiIGluc3RhbmNlb2YgUmM/KGEuaD1iLFpjKGEuaCxhLmcpKTooY3x8KGI9VWMoYiwkYykpLGEuaD1uZXcgUmMoYixhLmcpKTt9ZnVuY3Rpb24gUihhLGIsYyl7YS5oLnNldChiLGMpO31mdW5jdGlvbiBqYyhhKXtSKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBhZChhKXtyZXR1cm4gYSBpbnN0YW5jZW9mIFU/TihhKTpuZXcgVShhLHZvaWQgMCl9ZnVuY3Rpb24gYmQoYSxiLGMsZCl7dmFyIGU9bmV3IFUobnVsbCx2b2lkIDApO2EmJk9jKGUsYSk7YiYmUGMoZSxiKTtjJiZRYyhlLGMpO2QmJihlLmw9ZCk7cmV0dXJuIGV9ZnVuY3Rpb24gVGMoYSxiKXtyZXR1cm4gYT9iP2RlY29kZVVSSShhLnJlcGxhY2UoLyUyNS9nLFwiJTI1MjVcIikpOmRlY29kZVVSSUNvbXBvbmVudChhKTpcIlwifWZ1bmN0aW9uIFVjKGEsYixjKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiBhPyhhPWVuY29kZVVSSShhKS5yZXBsYWNlKGIsY2QpLGMmJihhPWEucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxhKTpudWxsfWZ1bmN0aW9uIGNkKGEpe2E9YS5jaGFyQ29kZUF0KDApO3JldHVybiBcIiVcIisoYT4+NCYxNSkudG9TdHJpbmcoMTYpKyhhJjE1KS50b1N0cmluZygxNil9XG52YXIgVmM9L1sjXFwvXFw/QF0vZyxYYz0vWyNcXD86XS9nLFdjPS9bI1xcP10vZywkYz0vWyNcXD9AXS9nLFljPS8jL2c7ZnVuY3Rpb24gUmMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9ZnVuY3Rpb24gVihhKXthLmd8fChhLmc9bmV3IFMsYS5oPTAsYS5pJiZOYyhhLmksZnVuY3Rpb24oYixjKXthLmFkZChkZWNvZGVVUklDb21wb25lbnQoYi5yZXBsYWNlKC9cXCsvZyxcIiBcIikpLGMpO30pKTt9az1SYy5wcm90b3R5cGU7ay5hZGQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO3ZhciBjPXRoaXMuZy5nZXQoYSk7Y3x8dGhpcy5nLnNldChhLGM9W10pO2MucHVzaChiKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O1xuZnVuY3Rpb24gZGQoYSxiKXtWKGEpO2I9VyhhLGIpO1QoYS5nLmgsYikmJihhLmk9bnVsbCxhLmgtPWEuZy5nZXQoYikubGVuZ3RoLGE9YS5nLFQoYS5oLGIpJiYoZGVsZXRlIGEuaFtiXSxhLmktLSxhLmcubGVuZ3RoPjIqYS5pJiZMYyhhKSkpO31mdW5jdGlvbiBlZChhLGIpe1YoYSk7Yj1XKGEsYik7cmV0dXJuIFQoYS5nLmgsYil9ay5mb3JFYWNoPWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe25hKGMsZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2suVD1mdW5jdGlvbigpe1YodGhpcyk7Zm9yKHZhciBhPXRoaXMuZy5SKCksYj10aGlzLmcuVCgpLGM9W10sZD0wO2Q8Yi5sZW5ndGg7ZCsrKWZvcih2YXIgZT1hW2RdLGY9MDtmPGUubGVuZ3RoO2YrKyljLnB1c2goYltkXSk7cmV0dXJuIGN9O1xuay5SPWZ1bmN0aW9uKGEpe1YodGhpcyk7dmFyIGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWVkKHRoaXMsYSkmJihiPXFhKGIsdGhpcy5nLmdldChXKHRoaXMsYSkpKSk7ZWxzZSB7YT10aGlzLmcuUigpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKWI9cWEoYixhW2NdKTt9cmV0dXJuIGJ9O2suc2V0PWZ1bmN0aW9uKGEsYil7Vih0aGlzKTt0aGlzLmk9bnVsbDthPVcodGhpcyxhKTtlZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5SKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBtYyhhLGIsYyl7ZGQoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChXKGEsYikscmEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2Zvcih2YXIgYT1bXSxiPXRoaXMuZy5UKCksYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdLGU9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSk7ZD10aGlzLlIoZCk7Zm9yKHZhciBmPTA7ZjxkLmxlbmd0aDtmKyspe3ZhciBoPWU7XCJcIiE9PWRbZl0mJihoKz1cIj1cIitlbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGRbZl0pKSk7YS5wdXNoKGgpO319cmV0dXJuIHRoaXMuaT1hLmpvaW4oXCImXCIpfTtmdW5jdGlvbiBXKGEsYil7Yj1TdHJpbmcoYik7YS5qJiYoYj1iLnRvTG93ZXJDYXNlKCkpO3JldHVybiBifWZ1bmN0aW9uIFpjKGEsYil7YiYmIWEuaiYmKFYoYSksYS5pPW51bGwsYS5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXt2YXIgZT1kLnRvTG93ZXJDYXNlKCk7ZCE9ZSYmKGRkKHRoaXMsZCksbWModGhpcyxlLGMpKTt9LGEpKTthLmo9Yjt9dmFyIGZkPWNsYXNze2NvbnN0cnVjdG9yKGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7fX07ZnVuY3Rpb24gZ2QoYSl7dGhpcy5sPWF8fGhkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuRWEmJmwuZy5FYSgpJiZsLmcuRWEoKS5aYik7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgaGQ9MTA7ZnVuY3Rpb24gaWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBDYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geWMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBEYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEZjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31nZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWpkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gamQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5EKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRCk7cmV0dXJuIGJ9cmV0dXJuIHJhKGEuaSl9ZnVuY3Rpb24ga2QoKXt9a2QucHJvdG90eXBlLnN0cmluZ2lmeT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9O2tkLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihhKXtyZXR1cm4gbC5KU09OLnBhcnNlKGEsdm9pZCAwKX07ZnVuY3Rpb24gbGQoKXt0aGlzLmc9bmV3IGtkO31mdW5jdGlvbiBtZChhLGIsYyl7Y29uc3QgZD1jfHxcIlwiO3RyeXtLYyhhLGZ1bmN0aW9uKGUsZil7bGV0IGg9ZTtwKGUpJiYoaD1yYihlKSk7Yi5wdXNoKGQrZitcIj1cIitlbmNvZGVVUklDb21wb25lbnQoaCkpO30pO31jYXRjaChlKXt0aHJvdyBiLnB1c2goZCtcInR5cGU9XCIrZW5jb2RlVVJJQ29tcG9uZW50KFwiX2JhZG1hcFwiKSksZTt9fWZ1bmN0aW9uIG5kKGEsYil7Y29uc3QgYz1uZXcgTWI7aWYobC5JbWFnZSl7Y29uc3QgZD1uZXcgSW1hZ2U7ZC5vbmxvYWQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogbG9hZGVkXCIsITAsYik7ZC5vbmVycm9yPWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGVycm9yXCIsITEsYik7ZC5vbmFib3J0PWphKG9kLGMsZCxcIlRlc3RMb2FkSW1hZ2U6IGFib3J0XCIsITEsYik7ZC5vbnRpbWVvdXQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogdGltZW91dFwiLCExLGIpO2wuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGQub250aW1lb3V0KWQub250aW1lb3V0KCk7fSwxRTQpO2Quc3JjPWE7fWVsc2UgYighMSk7fWZ1bmN0aW9uIG9kKGEsYixjLGQsZSl7dHJ5e2Iub25sb2FkPW51bGwsYi5vbmVycm9yPW51bGwsYi5vbmFib3J0PW51bGwsYi5vbnRpbWVvdXQ9bnVsbCxlKGQpO31jYXRjaChmKXt9fWZ1bmN0aW9uIHBkKGEpe3RoaXMubD1hLiRifHxudWxsO3RoaXMuaj1hLmlifHwhMTt9dChwZCxZYik7cGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHFkKHRoaXMubCx0aGlzLmopfTtwZC5wcm90b3R5cGUuaT1mdW5jdGlvbihhKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYX19KHt9KTtmdW5jdGlvbiBxZChhLGIpe0MuY2FsbCh0aGlzKTt0aGlzLkQ9YTt0aGlzLnU9Yjt0aGlzLm09dm9pZCAwO3RoaXMucmVhZHlTdGF0ZT1yZDt0aGlzLnN0YXR1cz0wO3RoaXMucmVzcG9uc2VUeXBlPXRoaXMucmVzcG9uc2VUZXh0PXRoaXMucmVzcG9uc2U9dGhpcy5zdGF0dXNUZXh0PVwiXCI7dGhpcy5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5oPW51bGw7dGhpcy5DPVwiR0VUXCI7dGhpcy5CPVwiXCI7dGhpcy5nPSExO3RoaXMuQT10aGlzLmo9dGhpcy5sPW51bGw7fXQocWQsQyk7dmFyIHJkPTA7az1xZC5wcm90b3R5cGU7XG5rLm9wZW49ZnVuY3Rpb24oYSxiKXtpZih0aGlzLnJlYWR5U3RhdGUhPXJkKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIkVycm9yIHJlb3BlbmluZyBhIGNvbm5lY3Rpb25cIik7dGhpcy5DPWE7dGhpcy5CPWI7dGhpcy5yZWFkeVN0YXRlPTE7c2QodGhpcyk7fTtrLnNlbmQ9ZnVuY3Rpb24oYSl7aWYoMSE9dGhpcy5yZWFkeVN0YXRlKXRocm93IHRoaXMuYWJvcnQoKSxFcnJvcihcIm5lZWQgdG8gY2FsbCBvcGVuKCkgZmlyc3QuIFwiKTt0aGlzLmc9ITA7Y29uc3QgYj17aGVhZGVyczp0aGlzLnYsbWV0aG9kOnRoaXMuQyxjcmVkZW50aWFsczp0aGlzLm0sY2FjaGU6dm9pZCAwfTthJiYoYi5ib2R5PWEpOyh0aGlzLkR8fGwpLmZldGNoKG5ldyBSZXF1ZXN0KHRoaXMuQixiKSkudGhlbih0aGlzLlZhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O1xuay5hYm9ydD1mdW5jdGlvbigpe3RoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIjt0aGlzLnY9bmV3IEhlYWRlcnM7dGhpcy5zdGF0dXM9MDt0aGlzLmomJnRoaXMuai5jYW5jZWwoXCJSZXF1ZXN0IHdhcyBhYm9ydGVkLlwiKTsxPD10aGlzLnJlYWR5U3RhdGUmJnRoaXMuZyYmNCE9dGhpcy5yZWFkeVN0YXRlJiYodGhpcy5nPSExLHRkKHRoaXMpKTt0aGlzLnJlYWR5U3RhdGU9cmQ7fTtcbmsuVmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5nJiYodGhpcy5sPWEsdGhpcy5ofHwodGhpcy5zdGF0dXM9dGhpcy5sLnN0YXR1cyx0aGlzLnN0YXR1c1RleHQ9dGhpcy5sLnN0YXR1c1RleHQsdGhpcy5oPWEuaGVhZGVycyx0aGlzLnJlYWR5U3RhdGU9MixzZCh0aGlzKSksdGhpcy5nJiYodGhpcy5yZWFkeVN0YXRlPTMsc2QodGhpcyksdGhpcy5nKSkpaWYoXCJhcnJheWJ1ZmZlclwiPT09dGhpcy5yZXNwb25zZVR5cGUpYS5hcnJheUJ1ZmZlcigpLnRoZW4odGhpcy5UYS5iaW5kKHRoaXMpLHRoaXMuaGEuYmluZCh0aGlzKSk7ZWxzZSBpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIGwuUmVhZGFibGVTdHJlYW0mJlwiYm9keVwiaW4gYSl7dGhpcy5qPWEuYm9keS5nZXRSZWFkZXIoKTtpZih0aGlzLnUpe2lmKHRoaXMucmVzcG9uc2VUeXBlKXRocm93IEVycm9yKCdyZXNwb25zZVR5cGUgbXVzdCBiZSBlbXB0eSBmb3IgXCJzdHJlYW1CaW5hcnlDaHVua3NcIiBtb2RlIHJlc3BvbnNlcy4nKTt0aGlzLnJlc3BvbnNlPVxuW107fWVsc2UgdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiLHRoaXMuQT1uZXcgVGV4dERlY29kZXI7dWQodGhpcyk7fWVsc2UgYS50ZXh0KCkudGhlbih0aGlzLlVhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTt9O2Z1bmN0aW9uIHVkKGEpe2Euai5yZWFkKCkudGhlbihhLlNhLmJpbmQoYSkpLmNhdGNoKGEuaGEuYmluZChhKSk7fWsuU2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXtpZih0aGlzLnUmJmEudmFsdWUpdGhpcy5yZXNwb25zZS5wdXNoKGEudmFsdWUpO2Vsc2UgaWYoIXRoaXMudSl7dmFyIGI9YS52YWx1ZT9hLnZhbHVlOm5ldyBVaW50OEFycmF5KDApO2lmKGI9dGhpcy5BLmRlY29kZShiLHtzdHJlYW06IWEuZG9uZX0pKXRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQrPWI7fWEuZG9uZT90ZCh0aGlzKTpzZCh0aGlzKTszPT10aGlzLnJlYWR5U3RhdGUmJnVkKHRoaXMpO319O1xuay5VYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PWEsdGQodGhpcykpO307ay5UYT1mdW5jdGlvbihhKXt0aGlzLmcmJih0aGlzLnJlc3BvbnNlPWEsdGQodGhpcykpO307ay5oYT1mdW5jdGlvbigpe3RoaXMuZyYmdGQodGhpcyk7fTtmdW5jdGlvbiB0ZChhKXthLnJlYWR5U3RhdGU9NDthLmw9bnVsbDthLmo9bnVsbDthLkE9bnVsbDtzZChhKTt9ay5zZXRSZXF1ZXN0SGVhZGVyPWZ1bmN0aW9uKGEsYil7dGhpcy52LmFwcGVuZChhLGIpO307ay5nZXRSZXNwb25zZUhlYWRlcj1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5oP3RoaXMuaC5nZXQoYS50b0xvd2VyQ2FzZSgpKXx8XCJcIjpcIlwifTtcbmsuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzPWZ1bmN0aW9uKCl7aWYoIXRoaXMuaClyZXR1cm4gXCJcIjtjb25zdCBhPVtdLGI9dGhpcy5oLmVudHJpZXMoKTtmb3IodmFyIGM9Yi5uZXh0KCk7IWMuZG9uZTspYz1jLnZhbHVlLGEucHVzaChjWzBdK1wiOiBcIitjWzFdKSxjPWIubmV4dCgpO3JldHVybiBhLmpvaW4oXCJcXHJcXG5cIil9O2Z1bmN0aW9uIHNkKGEpe2Eub25yZWFkeXN0YXRlY2hhbmdlJiZhLm9ucmVhZHlzdGF0ZWNoYW5nZS5jYWxsKGEpO31PYmplY3QuZGVmaW5lUHJvcGVydHkocWQucHJvdG90eXBlLFwid2l0aENyZWRlbnRpYWxzXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBcImluY2x1ZGVcIj09PXRoaXMubX0sc2V0OmZ1bmN0aW9uKGEpe3RoaXMubT1hP1wiaW5jbHVkZVwiOlwic2FtZS1vcmlnaW5cIjt9fSk7dmFyIHZkPWwuSlNPTi5wYXJzZTtmdW5jdGlvbiBYKGEpe0MuY2FsbCh0aGlzKTt0aGlzLmhlYWRlcnM9bmV3IFM7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkg9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5GPXRoaXMudj10aGlzLkQ9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5KPXdkO3RoaXMuSz10aGlzLkw9ITE7fXQoWCxDKTt2YXIgd2Q9XCJcIix4ZD0vXmh0dHBzPyQvaSx5ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1YLnByb3RvdHlwZTtcbmsuZWE9ZnVuY3Rpb24oYSxiLGMsZCl7aWYodGhpcy5nKXRocm93IEVycm9yKFwiW2dvb2cubmV0LlhocklvXSBPYmplY3QgaXMgYWN0aXZlIHdpdGggYW5vdGhlciByZXF1ZXN0PVwiK3RoaXMuSCtcIjsgbmV3VXJpPVwiK2EpO2I9Yj9iLnRvVXBwZXJDYXNlKCk6XCJHRVRcIjt0aGlzLkg9YTt0aGlzLmo9XCJcIjt0aGlzLm09MDt0aGlzLkQ9ITE7dGhpcy5oPSEwO3RoaXMuZz10aGlzLnU/dGhpcy51LmcoKTpjYy5nKCk7dGhpcy5DPXRoaXMudT9aYih0aGlzLnUpOlpiKGNjKTt0aGlzLmcub25yZWFkeXN0YXRlY2hhbmdlPXEodGhpcy5GYSx0aGlzKTt0cnl7dGhpcy5GPSEwLHRoaXMuZy5vcGVuKGIsU3RyaW5nKGEpLCEwKSx0aGlzLkY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7cmV0dXJufWE9Y3x8XCJcIjtjb25zdCBlPW5ldyBTKHRoaXMuaGVhZGVycyk7ZCYmS2MoZCxmdW5jdGlvbihmLGgpe2Uuc2V0KGgsZik7fSk7ZD1vYShlLlQoKSk7Yz1sLkZvcm1EYXRhJiZhIGluc3RhbmNlb2YgbC5Gb3JtRGF0YTtcbiEoMDw9bWEoeWQsYikpfHxkfHxjfHxlLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7ZS5mb3JFYWNoKGZ1bmN0aW9uKGYsaCl7dGhpcy5nLnNldFJlcXVlc3RIZWFkZXIoaCxmKTt9LHRoaXMpO3RoaXMuSiYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5KKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5MJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz10aGlzLkwpO3RyeXtBZCh0aGlzKSwwPHRoaXMuQiYmKCh0aGlzLks9QmQodGhpcy5nKSk/KHRoaXMuZy50aW1lb3V0PXRoaXMuQix0aGlzLmcub250aW1lb3V0PXEodGhpcy5wYSx0aGlzKSk6dGhpcy5BPUdiKHRoaXMucGEsdGhpcy5CLHRoaXMpKSx0aGlzLnY9ITAsdGhpcy5nLnNlbmQoYSksdGhpcy52PSExO31jYXRjaChmKXt6ZCh0aGlzLGYpO319O1xuZnVuY3Rpb24gQmQoYSl7cmV0dXJuIHkmJlJhKCkmJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1mdW5jdGlvbiBwYShhKXtyZXR1cm4gXCJjb250ZW50LXR5cGVcIj09YS50b0xvd2VyQ2FzZSgpfWsucGE9ZnVuY3Rpb24oKXtcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmdGhpcy5nJiYodGhpcy5qPVwiVGltZWQgb3V0IGFmdGVyIFwiK3RoaXMuQitcIm1zLCBhYm9ydGluZ1wiLHRoaXMubT04LEQodGhpcyxcInRpbWVvdXRcIiksdGhpcy5hYm9ydCg4KSk7fTtmdW5jdGlvbiB6ZChhLGIpe2EuaD0hMTthLmcmJihhLmw9ITAsYS5nLmFib3J0KCksYS5sPSExKTthLmo9YjthLm09NTtDZChhKTtEZChhKTt9ZnVuY3Rpb24gQ2QoYSl7YS5EfHwoYS5EPSEwLEQoYSxcImNvbXBsZXRlXCIpLEQoYSxcImVycm9yXCIpKTt9XG5rLmFib3J0PWZ1bmN0aW9uKGEpe3RoaXMuZyYmdGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEsdGhpcy5tPWF8fDcsRCh0aGlzLFwiY29tcGxldGVcIiksRCh0aGlzLFwiYWJvcnRcIiksRGQodGhpcykpO307ay5NPWZ1bmN0aW9uKCl7dGhpcy5nJiYodGhpcy5oJiYodGhpcy5oPSExLHRoaXMubD0hMCx0aGlzLmcuYWJvcnQoKSx0aGlzLmw9ITEpLERkKHRoaXMsITApKTtYLlouTS5jYWxsKHRoaXMpO307ay5GYT1mdW5jdGlvbigpe3RoaXMuc3x8KHRoaXMuRnx8dGhpcy52fHx0aGlzLmw/RWQodGhpcyk6dGhpcy5jYigpKTt9O2suY2I9ZnVuY3Rpb24oKXtFZCh0aGlzKTt9O1xuZnVuY3Rpb24gRWQoYSl7aWYoYS5oJiZcInVuZGVmaW5lZFwiIT10eXBlb2YgZ29vZyYmKCFhLkNbMV18fDQhPU8oYSl8fDIhPWEuYmEoKSkpaWYoYS52JiY0PT1PKGEpKUdiKGEuRmEsMCxhKTtlbHNlIGlmKEQoYSxcInJlYWR5c3RhdGVjaGFuZ2VcIiksND09TyhhKSl7YS5oPSExO3RyeXtjb25zdCBuPWEuYmEoKTthOnN3aXRjaChuKXtjYXNlIDIwMDpjYXNlIDIwMTpjYXNlIDIwMjpjYXNlIDIwNDpjYXNlIDIwNjpjYXNlIDMwNDpjYXNlIDEyMjM6dmFyIGI9ITA7YnJlYWsgYTtkZWZhdWx0OmI9ITE7fXZhciBjO2lmKCEoYz1iKSl7dmFyIGQ7aWYoZD0wPT09bil7dmFyIGU9U3RyaW5nKGEuSCkubWF0Y2goTWMpWzFdfHxudWxsO2lmKCFlJiZsLnNlbGYmJmwuc2VsZi5sb2NhdGlvbil7dmFyIGY9bC5zZWxmLmxvY2F0aW9uLnByb3RvY29sO2U9Zi5zdWJzdHIoMCxmLmxlbmd0aC0xKTt9ZD0heGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUQoYSxcImNvbXBsZXRlXCIpLEQoYSxcblwic3VjY2Vzc1wiKTtlbHNlIHthLm09Njt0cnl7dmFyIGg9MjxPKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKHUpe2g9XCJcIjt9YS5qPWgrXCIgW1wiK2EuYmEoKStcIl1cIjtDZChhKTt9fWZpbmFsbHl7RGQoYSk7fX19ZnVuY3Rpb24gRGQoYSxiKXtpZihhLmcpe0FkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdP2FhOm51bGw7YS5nPW51bGw7YS5DPW51bGw7Ynx8RChhLFwicmVhZHlcIik7dHJ5e2Mub25yZWFkeXN0YXRlY2hhbmdlPWQ7fWNhdGNoKGUpe319fWZ1bmN0aW9uIEFkKGEpe2EuZyYmYS5LJiYoYS5nLm9udGltZW91dD1udWxsKTthLkEmJihsLmNsZWFyVGltZW91dChhLkEpLGEuQT1udWxsKTt9ZnVuY3Rpb24gTyhhKXtyZXR1cm4gYS5nP2EuZy5yZWFkeVN0YXRlOjB9ay5iYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gMjxPKHRoaXMpP3RoaXMuZy5zdGF0dXM6LTF9Y2F0Y2goYSl7cmV0dXJuIC0xfX07XG5rLmdhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiB0aGlzLmc/dGhpcy5nLnJlc3BvbnNlVGV4dDpcIlwifWNhdGNoKGEpe3JldHVybiBcIlwifX07ay5RYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe3ZhciBiPXRoaXMuZy5yZXNwb25zZVRleHQ7YSYmMD09Yi5pbmRleE9mKGEpJiYoYj1iLnN1YnN0cmluZyhhLmxlbmd0aCkpO3JldHVybiB2ZChiKX19O2Z1bmN0aW9uIG9jKGEpe3RyeXtpZighYS5nKXJldHVybiBudWxsO2lmKFwicmVzcG9uc2VcImluIGEuZylyZXR1cm4gYS5nLnJlc3BvbnNlO3N3aXRjaChhLkope2Nhc2Ugd2Q6Y2FzZSBcInRleHRcIjpyZXR1cm4gYS5nLnJlc3BvbnNlVGV4dDtjYXNlIFwiYXJyYXlidWZmZXJcIjppZihcIm1velJlc3BvbnNlQXJyYXlCdWZmZXJcImluIGEuZylyZXR1cm4gYS5nLm1velJlc3BvbnNlQXJyYXlCdWZmZXJ9cmV0dXJuIG51bGx9Y2F0Y2goYil7cmV0dXJuIG51bGx9fWsuRGE9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tfTtcbmsuTGE9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBGZChhKXtsZXQgYj1cIlwiO3hhKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBHZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1GZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpSKGEsYixjKSk7fWZ1bmN0aW9uIEhkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIElkKGEpe3RoaXMuemE9MDt0aGlzLmw9W107dGhpcy5oPW5ldyBNYjt0aGlzLmxhPXRoaXMub2E9dGhpcy5GPXRoaXMuVz10aGlzLmc9dGhpcy5zYT10aGlzLkQ9dGhpcy5hYT10aGlzLm89dGhpcy5QPXRoaXMucz1udWxsO3RoaXMuWmE9dGhpcy5WPTA7dGhpcy5YYT1IZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5OPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaj1udWxsO3RoaXMuWD0hMDt0aGlzLkk9dGhpcy50YT10aGlzLlU9LTE7dGhpcy5ZPXRoaXMuQT10aGlzLkM9MDt0aGlzLlBhPUhkKFwiYmFzZVJldHJ5RGVsYXlNc1wiLDVFMyxhKTt0aGlzLiRhPUhkKFwicmV0cnlEZWxheVNlZWRNc1wiLDFFNCxhKTt0aGlzLllhPUhkKFwiZm9yd2FyZENoYW5uZWxNYXhSZXRyaWVzXCIsMixhKTt0aGlzLnJhPUhkKFwiZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zXCIsMkU0LGEpO3RoaXMucWE9YSYmYS54bWxIdHRwRmFjdG9yeXx8dm9pZCAwO3RoaXMuQmE9YSYmYS5ZYnx8ITE7XG50aGlzLks9dm9pZCAwO3RoaXMuSD1hJiZhLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMuSj1cIlwiO3RoaXMuaT1uZXcgZ2QoYSYmYS5jb25jdXJyZW50UmVxdWVzdExpbWl0KTt0aGlzLkNhPW5ldyBsZDt0aGlzLmphPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5SYT1hJiZhLldifHwhMTthJiZhLkFhJiZ0aGlzLmguQWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLlg9ITEpO3RoaXMuJD0hdGhpcy5qYSYmdGhpcy5YJiZhJiZhLmRldGVjdEJ1ZmZlcmluZ1Byb3h5fHwhMTt0aGlzLmthPXZvaWQgMDt0aGlzLk89MDt0aGlzLkw9ITE7dGhpcy5CPW51bGw7dGhpcy5XYT0hYXx8ITEhPT1hLlhiO31rPUlkLnByb3RvdHlwZTtrLm1hPTg7ay5HPTE7XG5mdW5jdGlvbiBJYyhhKXtKZChhKTtpZigzPT1hLkcpe3ZhciBiPWEuVisrLGM9TihhLkYpO1IoYyxcIlNJRFwiLGEuSik7UihjLFwiUklEXCIsYik7UihjLFwiVFlQRVwiLFwidGVybWluYXRlXCIpO0tkKGEsYyk7Yj1uZXcgTShhLGEuaCxiLHZvaWQgMCk7Yi5LPTI7Yi52PWpjKE4oYykpO2M9ITE7bC5uYXZpZ2F0b3ImJmwubmF2aWdhdG9yLnNlbmRCZWFjb24mJihjPWwubmF2aWdhdG9yLnNlbmRCZWFjb24oYi52LnRvU3RyaW5nKCksXCJcIikpOyFjJiZsLkltYWdlJiYoKG5ldyBJbWFnZSkuc3JjPWIudixjPSEwKTtjfHwoYi5nPW5jKGIubCxudWxsKSxiLmcuZWEoYi52KSk7Yi5GPURhdGUubm93KCk7bGMoYik7fUxkKGEpO31rLmhiPWZ1bmN0aW9uKGEpe3RyeXt0aGlzLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgaW52b2tlZDogXCIrYSk7fWNhdGNoKGIpe319O2Z1bmN0aW9uIEFjKGEpe2EuZyYmKHdjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gSmQoYSl7QWMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7emMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gTWQoYSxiKXthLmwucHVzaChuZXcgZmQoYS5aYSsrLGIpKTszPT1hLkcmJkhjKGEpO31mdW5jdGlvbiBIYyhhKXtpZChhLmkpfHxhLm18fChhLm09ITAsemIoYS5IYSxhKSxhLkM9MCk7fWZ1bmN0aW9uIE5kKGEsYil7aWYoQ2MoYS5pKT49YS5pLmotKGEubT8xOjApKXJldHVybiAhMTtpZihhLm0pcmV0dXJuIGEubD1iLkQuY29uY2F0KGEubCksITA7aWYoMT09YS5HfHwyPT1hLkd8fGEuQz49KGEuWGE/MDphLllhKSlyZXR1cm4gITE7YS5tPUsocShhLkhhLGEsYiksT2QoYSxhLkMpKTthLkMrKztyZXR1cm4gITB9XG5rLkhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMubSlpZih0aGlzLm09bnVsbCwxPT10aGlzLkcpe2lmKCFhKXt0aGlzLlY9TWF0aC5mbG9vcigxRTUqTWF0aC5yYW5kb20oKSk7YT10aGlzLlYrKztjb25zdCBlPW5ldyBNKHRoaXMsdGhpcy5oLGEsdm9pZCAwKTtsZXQgZj10aGlzLnM7dGhpcy5QJiYoZj8oZj15YShmKSxBYShmLHRoaXMuUCkpOmY9dGhpcy5QKTtudWxsPT09dGhpcy5vJiYoZS5IPWYpO2lmKHRoaXMuamEpYTp7dmFyIGI9MDtmb3IodmFyIGM9MDtjPHRoaXMubC5sZW5ndGg7YysrKXtiOnt2YXIgZD10aGlzLmxbY107aWYoXCJfX2RhdGFfX1wiaW4gZC5nJiYoZD1kLmcuX19kYXRhX18sXCJzdHJpbmdcIj09PXR5cGVvZiBkKSl7ZD1kLmxlbmd0aDticmVhayBifWQ9dm9pZCAwO31pZih2b2lkIDA9PT1kKWJyZWFrO2IrPWQ7aWYoNDA5NjxiKXtiPWM7YnJlYWsgYX1pZig0MDk2PT09Ynx8Yz09PXRoaXMubC5sZW5ndGgtMSl7Yj1jKzE7YnJlYWsgYX19Yj0xRTM7fWVsc2UgYj0xRTM7Yj1cblBkKHRoaXMsZSxiKTtjPU4odGhpcy5GKTtSKGMsXCJSSURcIixhKTtSKGMsXCJDVkVSXCIsMjIpO3RoaXMuRCYmUihjLFwiWC1IVFRQLVNlc3Npb24tSWRcIix0aGlzLkQpO0tkKHRoaXMsYyk7dGhpcy5vJiZmJiZHZChjLHRoaXMubyxmKTtEYyh0aGlzLmksZSk7dGhpcy5SYSYmUihjLFwiVFlQRVwiLFwiaW5pdFwiKTt0aGlzLmphPyhSKGMsXCIkcmVxXCIsYiksUihjLFwiU0lEXCIsXCJudWxsXCIpLGUuJD0hMCxpYyhlLGMsbnVsbCkpOmljKGUsYyxiKTt0aGlzLkc9Mjt9fWVsc2UgMz09dGhpcy5HJiYoYT9RZCh0aGlzLGEpOjA9PXRoaXMubC5sZW5ndGh8fGlkKHRoaXMuaSl8fFFkKHRoaXMpKTt9O1xuZnVuY3Rpb24gUWQoYSxiKXt2YXIgYztiP2M9Yi5tOmM9YS5WKys7Y29uc3QgZD1OKGEuRik7UihkLFwiU0lEXCIsYS5KKTtSKGQsXCJSSURcIixjKTtSKGQsXCJBSURcIixhLlUpO0tkKGEsZCk7YS5vJiZhLnMmJkdkKGQsYS5vLGEucyk7Yz1uZXcgTShhLGEuaCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5IPWEucyk7YiYmKGEubD1iLkQuY29uY2F0KGEubCkpO2I9UGQoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS5yYSkrTWF0aC5yb3VuZCguNSphLnJhKk1hdGgucmFuZG9tKCkpKTtEYyhhLmksYyk7aWMoYyxkLGIpO31mdW5jdGlvbiBLZChhLGIpe2EuaiYmS2Moe30sZnVuY3Rpb24oYyxkKXtSKGIsZCxjKTt9KTt9XG5mdW5jdGlvbiBQZChhLGIsYyl7Yz1NYXRoLm1pbihhLmwubGVuZ3RoLGMpO3ZhciBkPWEuaj9xKGEuai5PYSxhLmosYSk6bnVsbDthOnt2YXIgZT1hLmw7bGV0IGY9LTE7Zm9yKDs7KXtjb25zdCBoPVtcImNvdW50PVwiK2NdOy0xPT1mPzA8Yz8oZj1lWzBdLmgsaC5wdXNoKFwib2ZzPVwiK2YpKTpmPTA6aC5wdXNoKFwib2ZzPVwiK2YpO2xldCBuPSEwO2ZvcihsZXQgdT0wO3U8Yzt1Kyspe2xldCBtPWVbdV0uaDtjb25zdCByPWVbdV0uZzttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt1XS5oLTEwMCksbj0hMTtlbHNlIHRyeXttZChyLGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goRyl7ZCYmZChyKTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmwuc3BsaWNlKDAsYyk7Yi5EPWE7cmV0dXJuIGR9ZnVuY3Rpb24gR2MoYSl7YS5nfHxhLnV8fChhLlk9MSx6YihhLkdhLGEpLGEuQT0wKTt9XG5mdW5jdGlvbiBCYyhhKXtpZihhLmd8fGEudXx8Mzw9YS5BKXJldHVybiAhMTthLlkrKzthLnU9SyhxKGEuR2EsYSksT2QoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5HYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO1JkKHRoaXMpO2lmKHRoaXMuJCYmISh0aGlzLkx8fG51bGw9PXRoaXMuZ3x8MD49dGhpcy5PKSl7dmFyIGE9Mip0aGlzLk87dGhpcy5oLmluZm8oXCJCUCBkZXRlY3Rpb24gdGltZXIgZW5hYmxlZDogXCIrYSk7dGhpcy5CPUsocSh0aGlzLmJiLHRoaXMpLGEpO319O2suYmI9ZnVuY3Rpb24oKXt0aGlzLkImJih0aGlzLkI9bnVsbCx0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lb3V0IHJlYWNoZWQuXCIpLHRoaXMuaC5pbmZvKFwiQnVmZmVyaW5nIHByb3h5IGRldGVjdGVkIGFuZCBzd2l0Y2ggdG8gbG9uZy1wb2xsaW5nIVwiKSx0aGlzLk49ITEsdGhpcy5MPSEwLEooMTApLEFjKHRoaXMpLFJkKHRoaXMpKTt9O1xuZnVuY3Rpb24gd2MoYSl7bnVsbCE9YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWZ1bmN0aW9uIFJkKGEpe2EuZz1uZXcgTShhLGEuaCxcInJwY1wiLGEuWSk7bnVsbD09PWEubyYmKGEuZy5IPWEucyk7YS5nLk89MDt2YXIgYj1OKGEub2EpO1IoYixcIlJJRFwiLFwicnBjXCIpO1IoYixcIlNJRFwiLGEuSik7UihiLFwiQ0lcIixhLk4/XCIwXCI6XCIxXCIpO1IoYixcIkFJRFwiLGEuVSk7S2QoYSxiKTtSKGIsXCJUWVBFXCIsXCJ4bWxodHRwXCIpO2EubyYmYS5zJiZHZChiLGEubyxhLnMpO2EuSyYmYS5nLnNldFRpbWVvdXQoYS5LKTt2YXIgYz1hLmc7YT1hLmxhO2MuSz0xO2Mudj1qYyhOKGIpKTtjLnM9bnVsbDtjLlU9ITA7a2MoYyxhKTt9ay5hYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLEFjKHRoaXMpLEJjKHRoaXMpLEooMTkpKTt9O2Z1bmN0aW9uIHpjKGEpe251bGwhPWEudiYmKGwuY2xlYXJUaW1lb3V0KGEudiksYS52PW51bGwpO31cbmZ1bmN0aW9uIHVjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3pjKGEpO3djKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeWMoYS5pLGIpKWM9Yi5ELEZjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47YS5JPWIuTjtpZigwIT1hLkcpaWYoYi5pKWlmKDE9PWQpe2M9Yi5zP2Iucy5sZW5ndGg6MDtiPURhdGUubm93KCktYi5GO3ZhciBlPWEuQztkPVNiKCk7RChkLG5ldyBWYihkLGMsYixlKSk7SGMoYSk7fWVsc2UgR2MoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGEuSXx8ISgxPT1kJiZOZChhLGIpfHwyPT1kJiZCYyhhKSkpc3dpdGNoKGMmJjA8Yy5sZW5ndGgmJihiPWEuaSxiLmk9Yi5pLmNvbmNhdChjKSksZSl7Y2FzZSAxOlEoYSw1KTticmVhaztjYXNlIDQ6UShhLDEwKTticmVhaztjYXNlIDM6UShhLDYpO2JyZWFrO2RlZmF1bHQ6UShhLDIpO319XG5mdW5jdGlvbiBPZChhLGIpe2xldCBjPWEuUGErTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKmEuJGEpO2Euanx8KGMqPTIpO3JldHVybiBjKmJ9ZnVuY3Rpb24gUShhLGIpe2EuaC5pbmZvKFwiRXJyb3IgY29kZSBcIitiKTtpZigyPT1iKXt2YXIgYz1udWxsO2EuaiYmKGM9bnVsbCk7dmFyIGQ9cShhLmpiLGEpO2N8fChjPW5ldyBVKFwiLy93d3cuZ29vZ2xlLmNvbS9pbWFnZXMvY2xlYXJkb3QuZ2lmXCIpLGwubG9jYXRpb24mJlwiaHR0cFwiPT1sLmxvY2F0aW9uLnByb3RvY29sfHxPYyhjLFwiaHR0cHNcIiksamMoYykpO25kKGMudG9TdHJpbmcoKSxkKTt9ZWxzZSBKKDIpO2EuRz0wO2EuaiYmYS5qLnZhKGIpO0xkKGEpO0pkKGEpO31rLmpiPWZ1bmN0aW9uKGEpe2E/KHRoaXMuaC5pbmZvKFwiU3VjY2Vzc2Z1bGx5IHBpbmdlZCBnb29nbGUuY29tXCIpLEooMikpOih0aGlzLmguaW5mbyhcIkZhaWxlZCB0byBwaW5nIGdvb2dsZS5jb21cIiksSigxKSk7fTtcbmZ1bmN0aW9uIExkKGEpe2EuRz0wO2EuST0tMTtpZihhLmope2lmKDAhPWpkKGEuaSkubGVuZ3RofHwwIT1hLmwubGVuZ3RoKWEuaS5pLmxlbmd0aD0wLHJhKGEubCksYS5sLmxlbmd0aD0wO2Euai51YSgpO319ZnVuY3Rpb24gRWMoYSxiLGMpe2xldCBkPWFkKGMpO2lmKFwiXCIhPWQuaSliJiZQYyhkLGIrXCIuXCIrZC5pKSxRYyhkLGQubSk7ZWxzZSB7Y29uc3QgZT1sLmxvY2F0aW9uO2Q9YmQoZS5wcm90b2NvbCxiP2IrXCIuXCIrZS5ob3N0bmFtZTplLmhvc3RuYW1lLCtlLnBvcnQsYyk7fWEuYWEmJnhhKGEuYWEsZnVuY3Rpb24oZSxmKXtSKGQsZixlKTt9KTtiPWEuRDtjPWEuc2E7YiYmYyYmUihkLGIsYyk7UihkLFwiVkVSXCIsYS5tYSk7S2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIG5jKGEsYixjKXtpZihiJiYhYS5IKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5CYSYmIWEucWE/bmV3IFgobmV3IHBkKHtpYjohMH0pKTpuZXcgWChhLnFhKTtiLkw9YS5IO3JldHVybiBifWZ1bmN0aW9uIFNkKCl7fWs9U2QucHJvdG90eXBlO2sueGE9ZnVuY3Rpb24oKXt9O2sud2E9ZnVuY3Rpb24oKXt9O2sudmE9ZnVuY3Rpb24oKXt9O2sudWE9ZnVuY3Rpb24oKXt9O2suT2E9ZnVuY3Rpb24oKXt9O2Z1bmN0aW9uIFRkKCl7aWYoeSYmISgxMDw9TnVtYmVyKFVhKSkpdGhyb3cgRXJyb3IoXCJFbnZpcm9ubWVudGFsIGVycm9yOiBubyBhdmFpbGFibGUgdHJhbnNwb3J0LlwiKTt9VGQucHJvdG90eXBlLmc9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gbmV3IFkoYSxiKX07XG5mdW5jdGlvbiBZKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuZz1uZXcgSWQoYik7dGhpcy5sPWE7dGhpcy5oPWImJmIubWVzc2FnZVVybFBhcmFtc3x8bnVsbDthPWImJmIubWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5jbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkJiYoYT9hW1wiWC1DbGllbnQtUHJvdG9jb2xcIl09XCJ3ZWJjaGFubmVsXCI6YT17XCJYLUNsaWVudC1Qcm90b2NvbFwiOlwid2ViY2hhbm5lbFwifSk7dGhpcy5nLnM9YTthPWImJmIuaW5pdE1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIubWVzc2FnZUNvbnRlbnRUeXBlJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiXT1iLm1lc3NhZ2VDb250ZW50VHlwZTphPXtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIjpiLm1lc3NhZ2VDb250ZW50VHlwZX0pO2ImJmIueWEmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIl09Yi55YTphPXtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiOmIueWF9KTt0aGlzLmcuUD1cbmE7KGE9YiYmYi5odHRwSGVhZGVyc092ZXJ3cml0ZVBhcmFtKSYmIXNhKGEpJiYodGhpcy5nLm89YSk7dGhpcy5BPWImJmIuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy52PWImJmIuc2VuZFJhd0pzb258fCExOyhiPWImJmIuaHR0cFNlc3Npb25JZFBhcmFtKSYmIXNhKGIpJiYodGhpcy5nLkQ9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgWih0aGlzKTt9dChZLEMpO1kucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaj10aGlzLmo7dGhpcy5BJiYodGhpcy5nLkg9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO2EuV2EmJihhLmguaW5mbyhcIk9yaWdpbiBUcmlhbHMgZW5hYmxlZC5cIiksemIocShhLmhiLGEsYikpKTtKKDApO2EuVz1iO2EuYWE9Y3x8e307YS5OPWEuWDthLkY9RWMoYSxudWxsLGEuVyk7SGMoYSk7fTtZLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0ljKHRoaXMuZyk7fTtcblkucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXt2YXIgYj17fTtiLl9fZGF0YV9fPWE7TWQodGhpcy5nLGIpO31lbHNlIHRoaXMudj8oYj17fSxiLl9fZGF0YV9fPXJiKGEpLE1kKHRoaXMuZyxiKSk6TWQodGhpcy5nLGEpO307WS5wcm90b3R5cGUuTT1mdW5jdGlvbigpe3RoaXMuZy5qPW51bGw7ZGVsZXRlIHRoaXMuajtJYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7WS5aLk0uY2FsbCh0aGlzKTt9O2Z1bmN0aW9uIFVkKGEpe2FjLmNhbGwodGhpcyk7dmFyIGI9YS5fX3NtX187aWYoYil7YTp7Zm9yKGNvbnN0IGMgaW4gYil7YT1jO2JyZWFrIGF9YT12b2lkIDA7fWlmKHRoaXMuaT1hKWE9dGhpcy5pLGI9bnVsbCE9PWImJmEgaW4gYj9iW2FdOnZvaWQgMDt0aGlzLmRhdGE9Yjt9ZWxzZSB0aGlzLmRhdGE9YTt9dChVZCxhYyk7ZnVuY3Rpb24gVmQoKXtiYy5jYWxsKHRoaXMpO3RoaXMuc3RhdHVzPTE7fXQoVmQsYmMpO2Z1bmN0aW9uIFooYSl7dGhpcy5nPWE7fVxudChaLFNkKTtaLnByb3RvdHlwZS54YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYVwiKTt9O1oucHJvdG90eXBlLndhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBVZChhKSk7fTtaLnByb3RvdHlwZS52YT1mdW5jdGlvbihhKXtEKHRoaXMuZyxuZXcgVmQoYSkpO307Wi5wcm90b3R5cGUudWE9ZnVuY3Rpb24oKXtEKHRoaXMuZyxcImJcIik7fTsvKlxuXG4gQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuXG4gTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG5cbiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuXG4gVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4qL1xuVGQucHJvdG90eXBlLmNyZWF0ZVdlYkNoYW5uZWw9VGQucHJvdG90eXBlLmc7WS5wcm90b3R5cGUuc2VuZD1ZLnByb3RvdHlwZS51O1kucHJvdG90eXBlLm9wZW49WS5wcm90b3R5cGUubTtZLnByb3RvdHlwZS5jbG9zZT1ZLnByb3RvdHlwZS5jbG9zZTtXYi5OT19FUlJPUj0wO1diLlRJTUVPVVQ9ODtXYi5IVFRQX0VSUk9SPTY7WGIuQ09NUExFVEU9XCJjb21wbGV0ZVwiOyRiLkV2ZW50VHlwZT1MO0wuT1BFTj1cImFcIjtMLkNMT1NFPVwiYlwiO0wuRVJST1I9XCJjXCI7TC5NRVNTQUdFPVwiZFwiO0MucHJvdG90eXBlLmxpc3Rlbj1DLnByb3RvdHlwZS5OO1gucHJvdG90eXBlLmxpc3Rlbk9uY2U9WC5wcm90b3R5cGUuTztYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9WC5wcm90b3R5cGUuTGE7WC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1YLnByb3RvdHlwZS5EYTtYLnByb3RvdHlwZS5nZXRTdGF0dXM9WC5wcm90b3R5cGUuYmE7WC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVgucHJvdG90eXBlLlFhO1xuWC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVgucHJvdG90eXBlLmdhO1gucHJvdG90eXBlLnNlbmQ9WC5wcm90b3R5cGUuZWE7dmFyIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQgPSBlc20uY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydD1mdW5jdGlvbigpe3JldHVybiBuZXcgVGR9O3ZhciBnZXRTdGF0RXZlbnRUYXJnZXQgPSBlc20uZ2V0U3RhdEV2ZW50VGFyZ2V0PWZ1bmN0aW9uKCl7cmV0dXJuIFNiKCl9O3ZhciBFcnJvckNvZGUgPSBlc20uRXJyb3JDb2RlPVdiO3ZhciBFdmVudFR5cGUgPSBlc20uRXZlbnRUeXBlPVhiO3ZhciBFdmVudCA9IGVzbS5FdmVudD1IO3ZhciBTdGF0ID0gZXNtLlN0YXQ9e3JiOjAsdWI6MSx2YjoyLE9iOjMsVGI6NCxRYjo1LFJiOjYsUGI6NyxOYjo4LFNiOjksUFJPWFk6MTAsTk9QUk9YWToxMSxMYjoxMixIYjoxMyxJYjoxNCxHYjoxNSxKYjoxNixLYjoxNyxuYjoxOCxtYjoxOSxvYjoyMH07dmFyIEZldGNoWG1sSHR0cEZhY3RvcnkgPSBlc20uRmV0Y2hYbWxIdHRwRmFjdG9yeT1wZDt2YXIgV2ViQ2hhbm5lbCA9IGVzbS5XZWJDaGFubmVsPSRiO1xudmFyIFhocklvID0gZXNtLlhocklvPVg7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgU3RhdCwgV2ViQ2hhbm5lbCwgWGhySW8sIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGVzbSBhcyBkZWZhdWx0LCBnZXRTdGF0RXZlbnRUYXJnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXRVQSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzU2FmYXJpLCBpc01vYmlsZUNvcmRvdmEsIGlzUmVhY3ROYXRpdmUsIGlzRWxlY3Ryb24sIGlzSUUsIGlzVVdQLCBpc0Jyb3dzZXJFeHRlbnNpb24gfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQgfSBmcm9tICdAZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyJztcblxuY29uc3QgRCA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTaW1wbGUgd3JhcHBlciBhcm91bmQgYSBudWxsYWJsZSBVSUQuIE1vc3RseSBleGlzdHMgdG8gbWFrZSBjb2RlIG1vcmVcbiAqIHJlYWRhYmxlLlxuICovXG5jbGFzcyBDIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudWlkID0gdDtcbiAgICB9XG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPSB0aGlzLnVpZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGtleSByZXByZXNlbnRpbmcgdGhpcyB1c2VyLCBzdWl0YWJsZSBmb3IgaW5jbHVzaW9uIGluIGFcbiAgICAgKiBkaWN0aW9uYXJ5LlxuICAgICAqLyAgICB0b0tleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBdXRoZW50aWNhdGVkKCkgPyBcInVpZDpcIiArIHRoaXMudWlkIDogXCJhbm9ueW1vdXMtdXNlclwiO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQudWlkID09PSB0aGlzLnVpZDtcbiAgICB9XG59XG5cbi8qKiBBIHVzZXIgd2l0aCBhIG51bGwgVUlELiAqLyBDLlVOQVVUSEVOVElDQVRFRCA9IG5ldyBDKG51bGwpLCBcbi8vIFRPRE8obWlrZWxlaGVuKTogTG9vayBpbnRvIGdldHRpbmcgYSBwcm9wZXIgdWlkLWVxdWl2YWxlbnQgZm9yXG4vLyBub24tRmlyZWJhc2VBdXRoIHByb3ZpZGVycy5cbkMuR09PR0xFX0NSRURFTlRJQUxTID0gbmV3IEMoXCJnb29nbGUtY3JlZGVudGlhbHMtdWlkXCIpLCBDLkZJUlNUX1BBUlRZID0gbmV3IEMoXCJmaXJzdC1wYXJ0eS11aWRcIiksIFxuQy5NT0NLX1VTRVIgPSBuZXcgQyhcIm1vY2stdXNlclwiKTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmxldCB4ID0gXCI5LjYuMTBcIjtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IE4gPSBuZXcgTG9nZ2VyKFwiQGZpcmViYXNlL2ZpcmVzdG9yZVwiKTtcblxuLy8gSGVscGVyIG1ldGhvZHMgYXJlIG5lZWRlZCBiZWNhdXNlIHZhcmlhYmxlcyBjYW4ndCBiZSBleHBvcnRlZCBhcyByZWFkL3dyaXRlXG5mdW5jdGlvbiBrKCkge1xuICAgIHJldHVybiBOLmxvZ0xldmVsO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIHZlcmJvc2l0eSBvZiBDbG91ZCBGaXJlc3RvcmUgbG9ncyAoZGVidWcsIGVycm9yLCBvciBzaWxlbnQpLlxuICpcbiAqIEBwYXJhbSBsb2dMZXZlbCAtIFRoZSB2ZXJib3NpdHkgeW91IHNldCBmb3IgYWN0aXZpdHkgYW5kIGVycm9yIGxvZ2dpbmcuIENhblxuICogICBiZSBhbnkgb2YgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gKlxuICogICA8dWw+XG4gKiAgICAgPGxpPmBkZWJ1Z2AgZm9yIHRoZSBtb3N0IHZlcmJvc2UgbG9nZ2luZyBsZXZlbCwgcHJpbWFyaWx5IGZvclxuICogICAgIGRlYnVnZ2luZy48L2xpPlxuICogICAgIDxsaT5gZXJyb3JgIHRvIGxvZyBlcnJvcnMgb25seS48L2xpPlxuICogICAgIDxsaT48Y29kZT5gc2lsZW50YCB0byB0dXJuIG9mZiBsb2dnaW5nLjwvbGk+XG4gKiAgIDwvdWw+XG4gKi8gZnVuY3Rpb24gTSh0KSB7XG4gICAgTi5zZXRMb2dMZXZlbCh0KTtcbn1cblxuZnVuY3Rpb24gTyh0LCAuLi5lKSB7XG4gICAgaWYgKE4ubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubWFwKEIpO1xuICAgICAgICBOLmRlYnVnKGBGaXJlc3RvcmUgKCR7eH0pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBGKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoQik7XG4gICAgICAgIE4uZXJyb3IoYEZpcmVzdG9yZSAoJHt4fSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gJCh0LCAuLi5lKSB7XG4gICAgaWYgKE4ubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuV0FSTikge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoQik7XG4gICAgICAgIE4ud2FybihgRmlyZXN0b3JlICgke3h9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBhZGRpdGlvbmFsIGxvZyBwYXJhbWV0ZXIgdG8gYSBzdHJpbmcgcmVwcmVzZW50YXRpb24uXG4gKi8gZnVuY3Rpb24gQih0KSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0O1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBlID0gdCwgSlNPTi5zdHJpbmdpZnkoZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBDb252ZXJ0aW5nIHRvIEpTT04gZmFpbGVkLCBqdXN0IGxvZyB0aGUgb2JqZWN0IGRpcmVjdGx5XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKiBGb3JtYXRzIGFuIG9iamVjdCBhcyBhIEpTT04gc3RyaW5nLCBzdWl0YWJsZSBmb3IgbG9nZ2luZy4gKi9cbiAgICB2YXIgZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxuICogTWVzc2FnZXMgYXJlIHN0cmlwcGVkIGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuICpcbiAqIFJldHVybnMgYG5ldmVyYCBhbmQgY2FuIGJlIHVzZWQgaW4gZXhwcmVzc2lvbnM6XG4gKiBAZXhhbXBsZVxuICogbGV0IGZ1dHVyZVZhciA9IGZhaWwoJ25vdCBpbXBsZW1lbnRlZCB5ZXQnKTtcbiAqLyBmdW5jdGlvbiBMKHQgPSBcIlVuZXhwZWN0ZWQgc3RhdGVcIikge1xuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxuICAgIGNvbnN0IGUgPSBgRklSRVNUT1JFICgke3h9KSBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgdDtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZXN0b3JlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcbiAgICB0aHJvdyBGKGUpLCBuZXcgRXJyb3IoZSk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKi8gZnVuY3Rpb24gVSh0LCBlKSB7XG4gICAgdCB8fCBMKCk7XG59XG5cbi8qKlxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cbiAqXG4gKiBUaGUgY29kZSBvZiBjYWxsc2l0ZXMgaW52b2tpbmcgdGhpcyBmdW5jdGlvbiBhcmUgc3RyaXBwZWQgb3V0IGluIHByb2R1Y3Rpb25cbiAqIGJ1aWxkcy4gQW55IHNpZGUtZWZmZWN0cyBvZiBjb2RlIHdpdGhpbiB0aGUgZGVidWdBc3NlcnQoKSBpbnZvY2F0aW9uIHdpbGwgbm90XG4gKiBoYXBwZW4gaW4gdGhpcyBjYXNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIHEodCwgZSkge1xuICAgIHQgfHwgTCgpO1xufVxuXG4vKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYC4gSW4gbm9uLXByb2R1Y3Rpb24gYnVpbGRzLCB2ZXJpZmllcyB0aGF0IGBvYmpgIGlzIGFuXG4gKiBpbnN0YW5jZSBvZiBgVGAgYmVmb3JlIGNhc3RpbmcuXG4gKi8gZnVuY3Rpb24gRyh0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5lKSB7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IEsgPSB7XG4gICAgLy8gQ2F1c2VzIGFyZSBjb3BpZWQgZnJvbTpcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ3JwYy9ncnBjL2Jsb2IvYmNlZWM5NGVhNGZjNWYwMDg1ZDgxMjM1ZDhlMWMwNjc5OGRjMzQxYS9pbmNsdWRlL2dycGMlMkIlMkIvaW1wbC9jb2RlZ2VuL3N0YXR1c19jb2RlX2VudW0uaFxuICAgIC8qKiBOb3QgYW4gZXJyb3I7IHJldHVybmVkIG9uIHN1Y2Nlc3MuICovXG4gICAgT0s6IFwib2tcIixcbiAgICAvKiogVGhlIG9wZXJhdGlvbiB3YXMgY2FuY2VsbGVkICh0eXBpY2FsbHkgYnkgdGhlIGNhbGxlcikuICovXG4gICAgQ0FOQ0VMTEVEOiBcImNhbmNlbGxlZFwiLFxuICAgIC8qKiBVbmtub3duIGVycm9yIG9yIGFuIGVycm9yIGZyb20gYSBkaWZmZXJlbnQgZXJyb3IgZG9tYWluLiAqL1xuICAgIFVOS05PV046IFwidW5rbm93blwiLFxuICAgIC8qKlxuICAgICAqIENsaWVudCBzcGVjaWZpZWQgYW4gaW52YWxpZCBhcmd1bWVudC4gTm90ZSB0aGF0IHRoaXMgZGlmZmVycyBmcm9tXG4gICAgICogRkFJTEVEX1BSRUNPTkRJVElPTi4gSU5WQUxJRF9BUkdVTUVOVCBpbmRpY2F0ZXMgYXJndW1lbnRzIHRoYXQgYXJlXG4gICAgICogcHJvYmxlbWF0aWMgcmVnYXJkbGVzcyBvZiB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSAoZS5nLiwgYSBtYWxmb3JtZWQgZmlsZVxuICAgICAqIG5hbWUpLlxuICAgICAqL1xuICAgIElOVkFMSURfQVJHVU1FTlQ6IFwiaW52YWxpZC1hcmd1bWVudFwiLFxuICAgIC8qKlxuICAgICAqIERlYWRsaW5lIGV4cGlyZWQgYmVmb3JlIG9wZXJhdGlvbiBjb3VsZCBjb21wbGV0ZS4gRm9yIG9wZXJhdGlvbnMgdGhhdFxuICAgICAqIGNoYW5nZSB0aGUgc3RhdGUgb2YgdGhlIHN5c3RlbSwgdGhpcyBlcnJvciBtYXkgYmUgcmV0dXJuZWQgZXZlbiBpZiB0aGVcbiAgICAgKiBvcGVyYXRpb24gaGFzIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuIEZvciBleGFtcGxlLCBhIHN1Y2Nlc3NmdWwgcmVzcG9uc2VcbiAgICAgKiBmcm9tIGEgc2VydmVyIGNvdWxkIGhhdmUgYmVlbiBkZWxheWVkIGxvbmcgZW5vdWdoIGZvciB0aGUgZGVhZGxpbmUgdG9cbiAgICAgKiBleHBpcmUuXG4gICAgICovXG4gICAgREVBRExJTkVfRVhDRUVERUQ6IFwiZGVhZGxpbmUtZXhjZWVkZWRcIixcbiAgICAvKiogU29tZSByZXF1ZXN0ZWQgZW50aXR5IChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgd2FzIG5vdCBmb3VuZC4gKi9cbiAgICBOT1RfRk9VTkQ6IFwibm90LWZvdW5kXCIsXG4gICAgLyoqXG4gICAgICogU29tZSBlbnRpdHkgdGhhdCB3ZSBhdHRlbXB0ZWQgdG8gY3JlYXRlIChlLmcuLCBmaWxlIG9yIGRpcmVjdG9yeSkgYWxyZWFkeVxuICAgICAqIGV4aXN0cy5cbiAgICAgKi9cbiAgICBBTFJFQURZX0VYSVNUUzogXCJhbHJlYWR5LWV4aXN0c1wiLFxuICAgIC8qKlxuICAgICAqIFRoZSBjYWxsZXIgZG9lcyBub3QgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgdGhlIHNwZWNpZmllZCBvcGVyYXRpb24uXG4gICAgICogUEVSTUlTU0lPTl9ERU5JRUQgbXVzdCBub3QgYmUgdXNlZCBmb3IgcmVqZWN0aW9ucyBjYXVzZWQgYnkgZXhoYXVzdGluZ1xuICAgICAqIHNvbWUgcmVzb3VyY2UgKHVzZSBSRVNPVVJDRV9FWEhBVVNURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGlmIHRoZSBjYWxsZXIgY2FuIG5vdCBiZSBpZGVudGlmaWVkXG4gICAgICogKHVzZSBVTkFVVEhFTlRJQ0FURUQgaW5zdGVhZCBmb3IgdGhvc2UgZXJyb3JzKS5cbiAgICAgKi9cbiAgICBQRVJNSVNTSU9OX0RFTklFRDogXCJwZXJtaXNzaW9uLWRlbmllZFwiLFxuICAgIC8qKlxuICAgICAqIFRoZSByZXF1ZXN0IGRvZXMgbm90IGhhdmUgdmFsaWQgYXV0aGVudGljYXRpb24gY3JlZGVudGlhbHMgZm9yIHRoZVxuICAgICAqIG9wZXJhdGlvbi5cbiAgICAgKi9cbiAgICBVTkFVVEhFTlRJQ0FURUQ6IFwidW5hdXRoZW50aWNhdGVkXCIsXG4gICAgLyoqXG4gICAgICogU29tZSByZXNvdXJjZSBoYXMgYmVlbiBleGhhdXN0ZWQsIHBlcmhhcHMgYSBwZXItdXNlciBxdW90YSwgb3IgcGVyaGFwcyB0aGVcbiAgICAgKiBlbnRpcmUgZmlsZSBzeXN0ZW0gaXMgb3V0IG9mIHNwYWNlLlxuICAgICAqL1xuICAgIFJFU09VUkNFX0VYSEFVU1RFRDogXCJyZXNvdXJjZS1leGhhdXN0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIHJlamVjdGVkIGJlY2F1c2UgdGhlIHN5c3RlbSBpcyBub3QgaW4gYSBzdGF0ZSByZXF1aXJlZCBmb3JcbiAgICAgKiB0aGUgb3BlcmF0aW9uJ3MgZXhlY3V0aW9uLiBGb3IgZXhhbXBsZSwgZGlyZWN0b3J5IHRvIGJlIGRlbGV0ZWQgbWF5IGJlXG4gICAgICogbm9uLWVtcHR5LCBhbiBybWRpciBvcGVyYXRpb24gaXMgYXBwbGllZCB0byBhIG5vbi1kaXJlY3RvcnksIGV0Yy5cbiAgICAgKlxuICAgICAqIEEgbGl0bXVzIHRlc3QgdGhhdCBtYXkgaGVscCBhIHNlcnZpY2UgaW1wbGVtZW50b3IgaW4gZGVjaWRpbmdcbiAgICAgKiBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04sIEFCT1JURUQsIGFuZCBVTkFWQUlMQUJMRTpcbiAgICAgKiAgKGEpIFVzZSBVTkFWQUlMQUJMRSBpZiB0aGUgY2xpZW50IGNhbiByZXRyeSBqdXN0IHRoZSBmYWlsaW5nIGNhbGwuXG4gICAgICogIChiKSBVc2UgQUJPUlRFRCBpZiB0aGUgY2xpZW50IHNob3VsZCByZXRyeSBhdCBhIGhpZ2hlci1sZXZlbFxuICAgICAqICAgICAgKGUuZy4sIHJlc3RhcnRpbmcgYSByZWFkLW1vZGlmeS13cml0ZSBzZXF1ZW5jZSkuXG4gICAgICogIChjKSBVc2UgRkFJTEVEX1BSRUNPTkRJVElPTiBpZiB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW50aWxcbiAgICAgKiAgICAgIHRoZSBzeXN0ZW0gc3RhdGUgaGFzIGJlZW4gZXhwbGljaXRseSBmaXhlZC4gRS5nLiwgaWYgYW4gXCJybWRpclwiXG4gICAgICogICAgICBmYWlscyBiZWNhdXNlIHRoZSBkaXJlY3RvcnkgaXMgbm9uLWVtcHR5LCBGQUlMRURfUFJFQ09ORElUSU9OXG4gICAgICogICAgICBzaG91bGQgYmUgcmV0dXJuZWQgc2luY2UgdGhlIGNsaWVudCBzaG91bGQgbm90IHJldHJ5IHVubGVzc1xuICAgICAqICAgICAgdGhleSBoYXZlIGZpcnN0IGZpeGVkIHVwIHRoZSBkaXJlY3RvcnkgYnkgZGVsZXRpbmcgZmlsZXMgZnJvbSBpdC5cbiAgICAgKiAgKGQpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgcGVyZm9ybXMgY29uZGl0aW9uYWxcbiAgICAgKiAgICAgIFJFU1QgR2V0L1VwZGF0ZS9EZWxldGUgb24gYSByZXNvdXJjZSBhbmQgdGhlIHJlc291cmNlIG9uIHRoZVxuICAgICAqICAgICAgc2VydmVyIGRvZXMgbm90IG1hdGNoIHRoZSBjb25kaXRpb24uIEUuZy4sIGNvbmZsaWN0aW5nXG4gICAgICogICAgICByZWFkLW1vZGlmeS13cml0ZSBvbiB0aGUgc2FtZSByZXNvdXJjZS5cbiAgICAgKi9cbiAgICBGQUlMRURfUFJFQ09ORElUSU9OOiBcImZhaWxlZC1wcmVjb25kaXRpb25cIixcbiAgICAvKipcbiAgICAgKiBUaGUgb3BlcmF0aW9uIHdhcyBhYm9ydGVkLCB0eXBpY2FsbHkgZHVlIHRvIGEgY29uY3VycmVuY3kgaXNzdWUgbGlrZVxuICAgICAqIHNlcXVlbmNlciBjaGVjayBmYWlsdXJlcywgdHJhbnNhY3Rpb24gYWJvcnRzLCBldGMuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgQUJPUlRFRDogXCJhYm9ydGVkXCIsXG4gICAgLyoqXG4gICAgICogT3BlcmF0aW9uIHdhcyBhdHRlbXB0ZWQgcGFzdCB0aGUgdmFsaWQgcmFuZ2UuIEUuZy4sIHNlZWtpbmcgb3IgcmVhZGluZ1xuICAgICAqIHBhc3QgZW5kIG9mIGZpbGUuXG4gICAgICpcbiAgICAgKiBVbmxpa2UgSU5WQUxJRF9BUkdVTUVOVCwgdGhpcyBlcnJvciBpbmRpY2F0ZXMgYSBwcm9ibGVtIHRoYXQgbWF5IGJlIGZpeGVkXG4gICAgICogaWYgdGhlIHN5c3RlbSBzdGF0ZSBjaGFuZ2VzLiBGb3IgZXhhbXBsZSwgYSAzMi1iaXQgZmlsZSBzeXN0ZW0gd2lsbFxuICAgICAqIGdlbmVyYXRlIElOVkFMSURfQVJHVU1FTlQgaWYgYXNrZWQgdG8gcmVhZCBhdCBhbiBvZmZzZXQgdGhhdCBpcyBub3QgaW4gdGhlXG4gICAgICogcmFuZ2UgWzAsMl4zMi0xXSwgYnV0IGl0IHdpbGwgZ2VuZXJhdGUgT1VUX09GX1JBTkdFIGlmIGFza2VkIHRvIHJlYWQgZnJvbVxuICAgICAqIGFuIG9mZnNldCBwYXN0IHRoZSBjdXJyZW50IGZpbGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIFRoZXJlIGlzIGEgZmFpciBiaXQgb2Ygb3ZlcmxhcCBiZXR3ZWVuIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICogT1VUX09GX1JBTkdFLiBXZSByZWNvbW1lbmQgdXNpbmcgT1VUX09GX1JBTkdFICh0aGUgbW9yZSBzcGVjaWZpYyBlcnJvcilcbiAgICAgKiB3aGVuIGl0IGFwcGxpZXMgc28gdGhhdCBjYWxsZXJzIHdobyBhcmUgaXRlcmF0aW5nIHRocm91Z2ggYSBzcGFjZSBjYW5cbiAgICAgKiBlYXNpbHkgbG9vayBmb3IgYW4gT1VUX09GX1JBTkdFIGVycm9yIHRvIGRldGVjdCB3aGVuIHRoZXkgYXJlIGRvbmUuXG4gICAgICovXG4gICAgT1VUX09GX1JBTkdFOiBcIm91dC1vZi1yYW5nZVwiLFxuICAgIC8qKiBPcGVyYXRpb24gaXMgbm90IGltcGxlbWVudGVkIG9yIG5vdCBzdXBwb3J0ZWQvZW5hYmxlZCBpbiB0aGlzIHNlcnZpY2UuICovXG4gICAgVU5JTVBMRU1FTlRFRDogXCJ1bmltcGxlbWVudGVkXCIsXG4gICAgLyoqXG4gICAgICogSW50ZXJuYWwgZXJyb3JzLiBNZWFucyBzb21lIGludmFyaWFudHMgZXhwZWN0ZWQgYnkgdW5kZXJseWluZyBTeXN0ZW0gaGFzXG4gICAgICogYmVlbiBicm9rZW4uIElmIHlvdSBzZWUgb25lIG9mIHRoZXNlIGVycm9ycywgU29tZXRoaW5nIGlzIHZlcnkgYnJva2VuLlxuICAgICAqL1xuICAgIElOVEVSTkFMOiBcImludGVybmFsXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHNlcnZpY2UgaXMgY3VycmVudGx5IHVuYXZhaWxhYmxlLiBUaGlzIGlzIGEgbW9zdCBsaWtlbHkgYSB0cmFuc2llbnRcbiAgICAgKiBjb25kaXRpb24gYW5kIG1heSBiZSBjb3JyZWN0ZWQgYnkgcmV0cnlpbmcgd2l0aCBhIGJhY2tvZmYuXG4gICAgICpcbiAgICAgKiBTZWUgbGl0bXVzIHRlc3QgYWJvdmUgZm9yIGRlY2lkaW5nIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCxcbiAgICAgKiBhbmQgVU5BVkFJTEFCTEUuXG4gICAgICovXG4gICAgVU5BVkFJTEFCTEU6IFwidW5hdmFpbGFibGVcIixcbiAgICAvKiogVW5yZWNvdmVyYWJsZSBkYXRhIGxvc3Mgb3IgY29ycnVwdGlvbi4gKi9cbiAgICBEQVRBX0xPU1M6IFwiZGF0YS1sb3NzXCJcbn07XG5cbi8qKiBBbiBlcnJvciByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBvcGVyYXRpb24uICovIGNsYXNzIFEgZXh0ZW5kcyBGaXJlYmFzZUVycm9yIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBiYWNrZW5kIGVycm9yIGNvZGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZXJyb3IuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogQSBjdXN0b20gZXJyb3IgZGVzY3JpcHRpb24uXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgdGhpcy5jb2RlID0gdCwgdGhpcy5tZXNzYWdlID0gZSwgXG4gICAgICAgIC8vIEhBQ0s6IFdlIHdyaXRlIGEgdG9TdHJpbmcgcHJvcGVydHkgZGlyZWN0bHkgYmVjYXVzZSBFcnJvciBpcyBub3QgYSByZWFsXG4gICAgICAgIC8vIGNsYXNzIGFuZCBzbyBpbmhlcml0YW5jZSBkb2VzIG5vdCB3b3JrIGNvcnJlY3RseS4gV2UgY291bGQgYWx0ZXJuYXRpdmVseVxuICAgICAgICAvLyBkbyB0aGUgc2FtZSBcImJhY2stZG9vciBpbmhlcml0YW5jZVwiIHRyaWNrIHRoYXQgRmlyZWJhc2VFcnJvciBkb2VzLlxuICAgICAgICB0aGlzLnRvU3RyaW5nID0gKCkgPT4gYCR7dGhpcy5uYW1lfTogW2NvZGU9JHt0aGlzLmNvZGV9XTogJHt0aGlzLm1lc3NhZ2V9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGoge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHQsIHRoaXMucmVqZWN0ID0gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgVyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnVzZXIgPSBlLCB0aGlzLnR5cGUgPSBcIk9BdXRoXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJBdXRob3JpemF0aW9uXCIsIGBCZWFyZXIgJHt0fWApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgeWllbGRzIGFuIGVtcHR5IHRva2VuLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgeiB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUoQy5VTkFVVEhFTlRJQ0FURUQpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBBIENyZWRlbnRpYWxzUHJvdmlkZXIgdGhhdCBhbHdheXMgcmV0dXJucyBhIGNvbnN0YW50IHRva2VuLiBVc2VkIGZvclxuICogZW11bGF0b3IgdG9rZW4gbW9ja2luZy5cbiAqLyBjbGFzcyBIIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0b3JlcyB0aGUgbGlzdGVuZXIgcmVnaXN0ZXJlZCB3aXRoIHNldENoYW5nZUxpc3RlbmVyKClcbiAgICAgICAgICogVGhpcyBpc24ndCBhY3R1YWxseSBuZWNlc3Nhcnkgc2luY2UgdGhlIFVJRCBuZXZlciBjaGFuZ2VzLCBidXQgd2UgdXNlIHRoaXNcbiAgICAgICAgICogdG8gdmVyaWZ5IHRoZSBsaXN0ZW4gY29udHJhY3QgaXMgYWRoZXJlZCB0byBpbiB0ZXN0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLnRva2VuKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBlLCBcbiAgICAgICAgLy8gRmlyZSB3aXRoIGluaXRpYWwgdXNlci5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKHRoaXMudG9rZW4udXNlcikpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlTGlzdGVuZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgSiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnQgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyB0aGUgY3VycmVudCBVc2VyLiAqL1xuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gQy5VTkFVVEhFTlRJQ0FURUQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ291bnRlciB1c2VkIHRvIGRldGVjdCBpZiB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSBhIGdldFRva2VuIHJlcXVlc3Qgd2FzXG4gICAgICAgICAqIG91dHN0YW5kaW5nLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pID0gMCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID0gbnVsbDtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuaTtcbiAgICAgICAgLy8gQSBjaGFuZ2UgbGlzdGVuZXIgdGhhdCBwcmV2ZW50cyBkb3VibGUtZmlyaW5nIGZvciB0aGUgc2FtZSB0b2tlbiBjaGFuZ2UuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQgPT4gdGhpcy5pICE9PSBuID8gKG4gPSB0aGlzLmksIGUodCkpIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIC8vIEEgcHJvbWlzZSB0aGF0IGNhbiBiZSB3YWl0ZWQgb24gdG8gYmxvY2sgb24gdGhlIG5leHQgdG9rZW4gY2hhbmdlLlxuICAgICAgICAvLyBUaGlzIHByb21pc2UgaXMgcmUtY3JlYXRlZCBhZnRlciBlYWNoIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBsZXQgaSA9IG5ldyBqO1xuICAgICAgICB0aGlzLm8gPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmkrKywgdGhpcy5jdXJyZW50VXNlciA9IHRoaXMudSgpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBqLCB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IHModGhpcy5jdXJyZW50VXNlcikpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgciA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBpO1xuICAgICAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgYXdhaXQgZS5wcm9taXNlLCBhd2FpdCBzKHRoaXMuY3VycmVudFVzZXIpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9LCBvID0gdCA9PiB7XG4gICAgICAgICAgICBPKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggZGV0ZWN0ZWRcIiksIHRoaXMuYXV0aCA9IHQsIHRoaXMuYXV0aC5hZGRBdXRoVG9rZW5MaXN0ZW5lcih0aGlzLm8pLCBcbiAgICAgICAgICAgIHIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50Lm9uSW5pdCgodCA9PiBvKHQpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXV0aCByaWdodCBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsgYmVmb3JlIHdlXG4gICAgICAgIC8vIGRldGVybWluZSB3aGV0aGVyIHRvIHN0YXJ0IHVwIGluIHVuYXV0aGVudGljYXRlZCBtb2RlLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXV0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnQuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IG8odCkgOiAoXG4gICAgICAgICAgICAgICAgLy8gSWYgYXV0aCBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGggYG51bGxgIHVzZXJcbiAgICAgICAgICAgICAgICBPKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcIkF1dGggbm90IHlldCBkZXRlY3RlZFwiKSwgaS5yZXNvbHZlKCksIGkgPSBuZXcgaik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKSwgcigpO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgLy8gVGFrZSBub3RlIG9mIHRoZSBjdXJyZW50IHZhbHVlIG9mIHRoZSB0b2tlbkNvdW50ZXIgc28gdGhhdCB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBjYW4gZmFpbCAod2l0aCBhbiBBQk9SVEVEIGVycm9yKSBpZiB0aGVyZSBpcyBhIHRva2VuIGNoYW5nZSB3aGlsZSB0aGVcbiAgICAgICAgLy8gcmVxdWVzdCBpcyBvdXRzdGFuZGluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuaSwgZSA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hdXRoID8gdGhpcy5hdXRoLmdldFRva2VuKGUpLnRoZW4oKGUgPT4gXG4gICAgICAgIC8vIENhbmNlbCB0aGUgcmVxdWVzdCBzaW5jZSB0aGUgdG9rZW4gY2hhbmdlZCB3aGlsZSB0aGUgcmVxdWVzdCB3YXNcbiAgICAgICAgLy8gb3V0c3RhbmRpbmcgc28gdGhlIHJlc3BvbnNlIGlzIHBvdGVudGlhbGx5IGZvciBhIHByZXZpb3VzIHVzZXIgKHdoaWNoXG4gICAgICAgIC8vIHVzZXIsIHdlIGNhbid0IGJlIHN1cmUpLlxuICAgICAgICB0aGlzLmkgIT09IHQgPyAoTyhcIkZpcmViYXNlQXV0aENyZWRlbnRpYWxzUHJvdmlkZXJcIiwgXCJnZXRUb2tlbiBhYm9ydGVkIGR1ZSB0byB0b2tlbiBjaGFuZ2UuXCIpLCBcbiAgICAgICAgdGhpcy5nZXRUb2tlbigpKSA6IGUgPyAoVShcInN0cmluZ1wiID09IHR5cGVvZiBlLmFjY2Vzc1Rva2VuKSwgbmV3IFcoZS5hY2Nlc3NUb2tlbiwgdGhpcy5jdXJyZW50VXNlcikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmF1dGggJiYgdGhpcy5hdXRoLnJlbW92ZUF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxuICAgIC8vIEF1dGguZ2V0VWlkKCkgY2FuIHJldHVybiBudWxsIGV2ZW4gd2l0aCBhIHVzZXIgbG9nZ2VkIGluLiBJdCBpcyBiZWNhdXNlXG4gICAgLy8gZ2V0VWlkKCkgaXMgc3luY2hyb25vdXMsIGJ1dCB0aGUgYXV0aCBjb2RlIHBvcHVsYXRpbmcgVWlkIGlzIGFzeW5jaHJvbm91cy5cbiAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgaW4gdGhlIEF1dGhUb2tlbkxpc3RlbmVyIGNhbGxiYWNrXG4gICAgLy8gdG8gZ3VhcmFudGVlIHRvIGdldCB0aGUgYWN0dWFsIHVzZXIuXG4gICAgdSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuYXV0aCAmJiB0aGlzLmF1dGguZ2V0VWlkKCk7XG4gICAgICAgIHJldHVybiBVKG51bGwgPT09IHQgfHwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCksIG5ldyBDKHQpO1xuICAgIH1cbn1cblxuLypcbiAqIEZpcnN0UGFydHlUb2tlbiBwcm92aWRlcyBhIGZyZXNoIHRva2VuIGVhY2ggdGltZSBpdHMgdmFsdWVcbiAqIGlzIHJlcXVlc3RlZCwgYmVjYXVzZSBpZiB0aGUgdG9rZW4gaXMgdG9vIG9sZCwgcmVxdWVzdHMgd2lsbCBiZSByZWplY3RlZC5cbiAqIFRlY2huaWNhbGx5IHRoaXMgbWF5IG5vIGxvbmdlciBiZSBuZWNlc3Nhcnkgc2luY2UgdGhlIFNESyBzaG91bGQgZ3JhY2VmdWxseVxuICogcmVjb3ZlciBmcm9tIHVuYXV0aGVudGljYXRlZCBlcnJvcnMgKHNlZSBiLzMzMTQ3ODE4IGZvciBjb250ZXh0KSwgYnV0IGl0J3NcbiAqIHNhZmVyIHRvIGtlZXAgdGhlIGltcGxlbWVudGF0aW9uIGFzLWlzLlxuICovIGNsYXNzIFkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy50eXBlID0gXCJGaXJzdFBhcnR5XCIsIHRoaXMudXNlciA9IEMuRklSU1RfUEFSVFksIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHRoaXMuaGVhZGVycy5zZXQoXCJYLUdvb2ctQXV0aFVzZXJcIiwgZSk7XG4gICAgICAgIGNvbnN0IHMgPSB0LmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eShbXSk7XG4gICAgICAgIHMgJiYgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgcyksIG4gJiYgdGhpcy5oZWFkZXJzLnNldChcIlgtR29vZy1JYW0tQXV0aG9yaXphdGlvbi1Ub2tlblwiLCBuKTtcbiAgICB9XG59XG5cbi8qXG4gKiBQcm92aWRlcyB1c2VyIGNyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciB0aGUgRmlyZXN0b3JlIEphdmFTY3JpcHQgU0RLXG4gKiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIsIHVzaW5nIHRlY2huaXF1ZSB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cbiAqLyBjbGFzcyBYIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaCA9IHQsIHRoaXMubCA9IGUsIHRoaXMubSA9IG47XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBZKHRoaXMuaCwgdGhpcy5sLCB0aGlzLm0pKTtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShDLkZJUlNUX1BBUlRZKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbn1cblxuY2xhc3MgWiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdCwgdGhpcy50eXBlID0gXCJBcHBDaGVja1wiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0ICYmIHQubGVuZ3RoID4gMCAmJiB0aGlzLmhlYWRlcnMuc2V0KFwieC1maXJlYmFzZS1hcHBjaGVja1wiLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbmNsYXNzIHR0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZyA9IHQsIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPSBudWxsLCB0aGlzLnAgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgIG51bGwgIT0gdC5lcnJvciAmJiBPKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgYEVycm9yIGdldHRpbmcgQXBwIENoZWNrIHRva2VuOyB1c2luZyBwbGFjZWhvbGRlciB0b2tlbiBpbnN0ZWFkLiBFcnJvcjogJHt0LmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgICAgICBjb25zdCBuID0gdC50b2tlbiAhPT0gdGhpcy5wO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucCA9IHQudG9rZW4sIE8oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgUmVjZWl2ZWQgJHtuID8gXCJuZXdcIiA6IFwiZXhpc3RpbmdcIn0gdG9rZW4uYCksIFxuICAgICAgICAgICAgbiA/IGUodC50b2tlbikgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vID0gZSA9PiB7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IG4oZSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgcyA9IHQgPT4ge1xuICAgICAgICAgICAgTyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgZGV0ZWN0ZWRcIiksIHRoaXMuYXBwQ2hlY2sgPSB0LCB0aGlzLmFwcENoZWNrLmFkZFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nLm9uSW5pdCgodCA9PiBzKHQpKSksIFxuICAgICAgICAvLyBPdXIgdXNlcnMgY2FuIGluaXRpYWxpemUgQXBwQ2hlY2sgYWZ0ZXIgRmlyZXN0b3JlLCBzbyB3ZSBnaXZlIGl0XG4gICAgICAgIC8vIGEgY2hhbmNlIHRvIHJlZ2lzdGVyIGl0c2VsZiB3aXRoIHRoZSBjb21wb25lbnQgZnJhbWV3b3JrLlxuICAgICAgICBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwQ2hlY2spIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nLmdldEltbWVkaWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbmFsOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQgPyBzKHQpIDogXG4gICAgICAgICAgICAgICAgLy8gSWYgQXBwQ2hlY2sgaXMgc3RpbGwgbm90IGF2YWlsYWJsZSwgcHJvY2VlZCB3aXRob3V0IGl0LlxuICAgICAgICAgICAgICAgIE8oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBcIkFwcENoZWNrIG5vdCB5ZXQgZGV0ZWN0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZvcmNlUmVmcmVzaDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yY2VSZWZyZXNoID0gITEsIHRoaXMuYXBwQ2hlY2sgPyB0aGlzLmFwcENoZWNrLmdldFRva2VuKHQpLnRoZW4oKHQgPT4gdCA/IChVKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudG9rZW4pLCBcbiAgICAgICAgdGhpcy5wID0gdC50b2tlbiwgbmV3IFoodC50b2tlbikpIDogbnVsbCkpIDogUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7XG4gICAgICAgIHRoaXMuZm9yY2VSZWZyZXNoID0gITA7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrICYmIHRoaXMuYXBwQ2hlY2sucmVtb3ZlVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBBcHBDaGVjayB0b2tlbiBwcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBldCB7XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFooXCJcIikpO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHt9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEJ1aWxkcyBhIENyZWRlbnRpYWxzUHJvdmlkZXIgZGVwZW5kaW5nIG9uIHRoZSB0eXBlIG9mXG4gKiB0aGUgY3JlZGVudGlhbHMgcGFzc2VkIGluLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBgTGlzdGVuU2VxdWVuY2VgIGlzIGEgbW9ub3RvbmljIHNlcXVlbmNlLiBJdCBpcyBpbml0aWFsaXplZCB3aXRoIGEgbWluaW11bSB2YWx1ZSB0b1xuICogZXhjZWVkLiBBbGwgc3Vic2VxdWVudCBjYWxscyB0byBuZXh0IHdpbGwgcmV0dXJuIGluY3JlYXNpbmcgdmFsdWVzLiBJZiBwcm92aWRlZCB3aXRoIGFcbiAqIGBTZXF1ZW5jZU51bWJlclN5bmNlcmAsIGl0IHdpbGwgYWRkaXRpb25hbGx5IGJ1bXAgaXRzIG5leHQgdmFsdWUgd2hlbiB0b2xkIG9mIGEgbmV3IHZhbHVlLCBhc1xuICogd2VsbCBhcyB3cml0ZSBvdXQgc2VxdWVuY2UgbnVtYmVycyB0aGF0IGl0IHByb2R1Y2VzIHZpYSBgbmV4dCgpYC5cbiAqL1xuY2xhc3MgbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c1ZhbHVlID0gdCwgZSAmJiAoZS5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSB0ID0+IHRoaXMuSSh0KSwgdGhpcy5UID0gdCA9PiBlLndyaXRlU2VxdWVuY2VOdW1iZXIodCkpO1xuICAgIH1cbiAgICBJKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJldmlvdXNWYWx1ZSA9IE1hdGgubWF4KHQsIHRoaXMucHJldmlvdXNWYWx1ZSksIHRoaXMucHJldmlvdXNWYWx1ZTtcbiAgICB9XG4gICAgbmV4dCgpIHtcbiAgICAgICAgY29uc3QgdCA9ICsrdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgICAgICByZXR1cm4gdGhpcy5UICYmIHRoaXMuVCh0KSwgdDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEdlbmVyYXRlcyBgbkJ5dGVzYCBvZiByYW5kb20gYnl0ZXMuXG4gKlxuICogSWYgYG5CeXRlcyA8IDBgICwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gKi9cbmZ1bmN0aW9uIHN0KHQpIHtcbiAgICAvLyBQb2x5ZmlsbHMgZm9yIElFIGFuZCBXZWJXb3JrZXIgYnkgdXNpbmcgYHNlbGZgIGFuZCBgbXNDcnlwdG9gIHdoZW4gYGNyeXB0b2AgaXMgbm90IGF2YWlsYWJsZS5cbiAgICBjb25zdCBlID0gXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBzZWxmICYmIChzZWxmLmNyeXB0byB8fCBzZWxmLm1zQ3J5cHRvKSwgbiA9IG5ldyBVaW50OEFycmF5KHQpO1xuICAgIGlmIChlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5nZXRSYW5kb21WYWx1ZXMpIGUuZ2V0UmFuZG9tVmFsdWVzKG4pOyBlbHNlIFxuICAgIC8vIEZhbGxzIGJhY2sgdG8gTWF0aC5yYW5kb21cbiAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQ7IGUrKykgbltlXSA9IE1hdGguZmxvb3IoMjU2ICogTWF0aC5yYW5kb20oKSk7XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIG50LkEgPSAtMTtcblxuY2xhc3MgaXQge1xuICAgIHN0YXRpYyBSKCkge1xuICAgICAgICAvLyBBbHBoYW51bWVyaWMgY2hhcmFjdGVyc1xuICAgICAgICBjb25zdCB0ID0gXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiLCBlID0gTWF0aC5mbG9vcigyNTYgLyB0Lmxlbmd0aCkgKiB0Lmxlbmd0aDtcbiAgICAgICAgLy8gVGhlIGxhcmdlc3QgYnl0ZSB2YWx1ZSB0aGF0IGlzIGEgbXVsdGlwbGUgb2YgYGNoYXIubGVuZ3RoYC5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IFwiXCI7XG4gICAgICAgIGZvciAoO24ubGVuZ3RoIDwgMjA7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHN0KDQwKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcy5sZW5ndGg7ICsraSkgXG4gICAgICAgICAgICAvLyBPbmx5IGFjY2VwdCB2YWx1ZXMgdGhhdCBhcmUgWzAsIG1heE11bHRpcGxlKSwgdGhpcyBlbnN1cmVzIHRoZXkgY2FuXG4gICAgICAgICAgICAvLyBiZSBldmVubHkgbWFwcGVkIHRvIGluZGljZXMgb2YgYGNoYXJzYCB2aWEgYSBtb2R1bG8gb3BlcmF0aW9uLlxuICAgICAgICAgICAgbi5sZW5ndGggPCAyMCAmJiBzW2ldIDwgZSAmJiAobiArPSB0LmNoYXJBdChzW2ldICUgdC5sZW5ndGgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJ0KHQsIGUpIHtcbiAgICByZXR1cm4gdCA8IGUgPyAtMSA6IHQgPiBlID8gMSA6IDA7XG59XG5cbi8qKiBIZWxwZXIgdG8gY29tcGFyZSBhcnJheXMgdXNpbmcgaXNFcXVhbCgpLiAqLyBmdW5jdGlvbiBvdCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHQubGVuZ3RoID09PSBlLmxlbmd0aCAmJiB0LmV2ZXJ5KCgodCwgcykgPT4gbih0LCBlW3NdKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltbWVkaWF0ZSBsZXhpY29ncmFwaGljYWxseS1mb2xsb3dpbmcgc3RyaW5nLiBUaGlzIGlzIHVzZWZ1bCB0b1xuICogY29uc3RydWN0IGFuIGluY2x1c2l2ZSByYW5nZSBmb3IgaW5kZXhlZGRiIGl0ZXJhdG9ycy5cbiAqLyBmdW5jdGlvbiB1dCh0KSB7XG4gICAgLy8gUmV0dXJuIHRoZSBpbnB1dCBzdHJpbmcsIHdpdGggYW4gYWRkaXRpb25hbCBOVUwgYnl0ZSBhcHBlbmRlZC5cbiAgICByZXR1cm4gdCArIFwiXFwwXCI7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZWFybGllc3QgZGF0ZSBzdXBwb3J0ZWQgYnkgRmlyZXN0b3JlIHRpbWVzdGFtcHMgKDAwMDEtMDEtMDFUMDA6MDA6MDBaKS5cbi8qKlxuICogQSBgVGltZXN0YW1wYCByZXByZXNlbnRzIGEgcG9pbnQgaW4gdGltZSBpbmRlcGVuZGVudCBvZiBhbnkgdGltZSB6b25lIG9yXG4gKiBjYWxlbmRhciwgcmVwcmVzZW50ZWQgYXMgc2Vjb25kcyBhbmQgZnJhY3Rpb25zIG9mIHNlY29uZHMgYXQgbmFub3NlY29uZFxuICogcmVzb2x1dGlvbiBpbiBVVEMgRXBvY2ggdGltZS5cbiAqXG4gKiBJdCBpcyBlbmNvZGVkIHVzaW5nIHRoZSBQcm9sZXB0aWMgR3JlZ29yaWFuIENhbGVuZGFyIHdoaWNoIGV4dGVuZHMgdGhlXG4gKiBHcmVnb3JpYW4gY2FsZW5kYXIgYmFja3dhcmRzIHRvIHllYXIgb25lLiBJdCBpcyBlbmNvZGVkIGFzc3VtaW5nIGFsbCBtaW51dGVzXG4gKiBhcmUgNjAgc2Vjb25kcyBsb25nLCBpLmUuIGxlYXAgc2Vjb25kcyBhcmUgXCJzbWVhcmVkXCIgc28gdGhhdCBubyBsZWFwIHNlY29uZFxuICogdGFibGUgaXMgbmVlZGVkIGZvciBpbnRlcnByZXRhdGlvbi4gUmFuZ2UgaXMgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICogOTk5OS0xMi0zMVQyMzo1OTo1OS45OTk5OTk5OTlaLlxuICpcbiAqIEZvciBleGFtcGxlcyBhbmQgZnVydGhlciBzcGVjaWZpY2F0aW9ucywgcmVmZXIgdG8gdGhlXG4gKiB7QGxpbmsgaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9wcm90b2J1Zi9ibG9iL21hc3Rlci9zcmMvZ29vZ2xlL3Byb3RvYnVmL3RpbWVzdGFtcC5wcm90byB8IFRpbWVzdGFtcCBkZWZpbml0aW9ufS5cbiAqL1xuY2xhc3MgYXQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNlY29uZHMgLSBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi4gTXVzdCBiZSBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gICAgICogICAgIDk5OTktMTItMzFUMjM6NTk6NTlaIGluY2x1c2l2ZS5cbiAgICAgKiBAcGFyYW0gbmFub3NlY29uZHMgLSBUaGUgbm9uLW5lZ2F0aXZlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kXG4gICAgICogICAgIHJlc29sdXRpb24uIE5lZ2F0aXZlIHNlY29uZCB2YWx1ZXMgd2l0aCBmcmFjdGlvbnMgbXVzdCBzdGlsbCBoYXZlXG4gICAgICogICAgIG5vbi1uZWdhdGl2ZSBuYW5vc2Vjb25kcyB2YWx1ZXMgdGhhdCBjb3VudCBmb3J3YXJkIGluIHRpbWUuIE11c3QgYmVcbiAgICAgKiAgICAgZnJvbSAwIHRvIDk5OSw5OTksOTk5IGluY2x1c2l2ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIG9mIHNlY29uZHMgb2YgVVRDIHRpbWUgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmQgcmVzb2x1dGlvbi4qXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICBpZiAodGhpcy5zZWNvbmRzID0gdCwgdGhpcy5uYW5vc2Vjb25kcyA9IGUsIGUgPCAwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKGUgPj0gMWU5KSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIG5hbm9zZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyBlKTtcbiAgICAgICAgaWYgKHQgPCAtNjIxMzU1OTY4MDApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgICAgIC8vIFRoaXMgd2lsbCBicmVhayBpbiB0aGUgeWVhciAxMCwwMDAuXG4gICAgICAgICAgICAgICAgaWYgKHQgPj0gMjUzNDAyMzAwODAwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCB3aXRoIHRoZSBjdXJyZW50IGRhdGUsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgYSBuZXcgdGltZXN0YW1wIHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgbm93KCkge1xuICAgICAgICByZXR1cm4gYXQuZnJvbU1pbGxpcyhEYXRlLm5vdygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gZGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRlIC0gVGhlIGRhdGUgdG8gaW5pdGlhbGl6ZSB0aGUgYFRpbWVzdGFtcGAgZnJvbS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIGZyb21EYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIGF0LmZyb21NaWxsaXModC5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG1pbGxpc2Vjb25kcyAtIE51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaFxuICAgICAqICAgICAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBgVGltZXN0YW1wYCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhcyB0aGUgZ2l2ZW5cbiAgICAgKiAgICAgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKi8gICAgc3RhdGljIGZyb21NaWxsaXModCkge1xuICAgICAgICBjb25zdCBlID0gTWF0aC5mbG9vcih0IC8gMWUzKSwgbiA9IE1hdGguZmxvb3IoMWU2ICogKHQgLSAxZTMgKiBlKSk7XG4gICAgICAgIHJldHVybiBuZXcgYXQoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QuIFRoaXMgY29udmVyc2lvblxuICAgICAqIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uIHNpbmNlIGBEYXRlYCBvYmplY3RzIG9ubHkgc3VwcG9ydCBtaWxsaXNlY29uZFxuICAgICAqIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIHNhbWUgcG9pbnQgaW4gdGltZSBhc1xuICAgICAqICAgICB0aGlzIGBUaW1lc3RhbXBgLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKi8gICAgdG9EYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUodGhpcy50b01pbGxpcygpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIG51bWVyaWMgdGltZXN0YW1wIChpbiBtaWxsaXNlY29uZHMgc2luY2VcbiAgICAgKiBlcG9jaCkuIFRoaXMgb3BlcmF0aW9uIGNhdXNlcyBhIGxvc3Mgb2YgcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHBvaW50IGluIHRpbWUgY29ycmVzcG9uZGluZyB0byB0aGlzIHRpbWVzdGFtcCwgcmVwcmVzZW50ZWQgYXNcbiAgICAgKiAgICAgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgVW5peCBlcG9jaCAxOTcwLTAxLTAxVDAwOjAwOjAwWi5cbiAgICAgKi8gICAgdG9NaWxsaXMoKSB7XG4gICAgICAgIHJldHVybiAxZTMgKiB0aGlzLnNlY29uZHMgKyB0aGlzLm5hbm9zZWNvbmRzIC8gMWU2O1xuICAgIH1cbiAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Vjb25kcyA9PT0gdC5zZWNvbmRzID8gcnQodGhpcy5uYW5vc2Vjb25kcywgdC5uYW5vc2Vjb25kcykgOiBydCh0aGlzLnNlY29uZHMsIHQuc2Vjb25kcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFRpbWVzdGFtcGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQuc2Vjb25kcyA9PT0gdGhpcy5zZWNvbmRzICYmIHQubmFub3NlY29uZHMgPT09IHRoaXMubmFub3NlY29uZHM7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdGV4dHVhbCByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiVGltZXN0YW1wKHNlY29uZHM9XCIgKyB0aGlzLnNlY29uZHMgKyBcIiwgbmFub3NlY29uZHM9XCIgKyB0aGlzLm5hbm9zZWNvbmRzICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgc2Vjb25kczogdGhpcy5zZWNvbmRzLFxuICAgICAgICAgICAgbmFub3NlY29uZHM6IHRoaXMubmFub3NlY29uZHNcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhpcyBvYmplY3QgdG8gYSBwcmltaXRpdmUgc3RyaW5nLCB3aGljaCBhbGxvd3MgYFRpbWVzdGFtcGAgb2JqZWN0c1xuICAgICAqIHRvIGJlIGNvbXBhcmVkIHVzaW5nIHRoZSBgPmAsIGA8PWAsIGA+PWAgYW5kIGA+YCBvcGVyYXRvcnMuXG4gICAgICovICAgIHZhbHVlT2YoKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHJldHVybnMgYSBzdHJpbmcgb2YgdGhlIGZvcm0gPHNlY29uZHM+LjxuYW5vc2Vjb25kcz4gd2hlcmVcbiAgICAgICAgLy8gPHNlY29uZHM+IGlzIHRyYW5zbGF0ZWQgdG8gaGF2ZSBhIG5vbi1uZWdhdGl2ZSB2YWx1ZSBhbmQgYm90aCA8c2Vjb25kcz5cbiAgICAgICAgLy8gYW5kIDxuYW5vc2Vjb25kcz4gYXJlIGxlZnQtcGFkZGVkIHdpdGggemVyb2VzIHRvIGJlIGEgY29uc2lzdGVudCBsZW5ndGguXG4gICAgICAgIC8vIFN0cmluZ3Mgd2l0aCB0aGlzIGZvcm1hdCB0aGVuIGhhdmUgYSBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZyB0aGF0IG1hdGNoZXNcbiAgICAgICAgLy8gdGhlIGV4cGVjdGVkIG9yZGVyaW5nLiBUaGUgPHNlY29uZHM+IHRyYW5zbGF0aW9uIGlzIGRvbmUgdG8gYXZvaWQgaGF2aW5nXG4gICAgICAgIC8vIGEgbGVhZGluZyBuZWdhdGl2ZSBzaWduIChpLmUuIGEgbGVhZGluZyAnLScgY2hhcmFjdGVyKSBpbiBpdHMgc3RyaW5nXG4gICAgICAgIC8vIHJlcHJlc2VudGF0aW9uLCB3aGljaCB3b3VsZCBhZmZlY3QgaXRzIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5zZWNvbmRzIC0gLTYyMTM1NTk2ODAwO1xuICAgICAgICAvLyBOb3RlOiBVcCB0byAxMiBkZWNpbWFsIGRpZ2l0cyBhcmUgcmVxdWlyZWQgdG8gcmVwcmVzZW50IGFsbCB2YWxpZFxuICAgICAgICAvLyAnc2Vjb25kcycgdmFsdWVzLlxuICAgICAgICAgICAgICAgIHJldHVybiBTdHJpbmcodCkucGFkU3RhcnQoMTIsIFwiMFwiKSArIFwiLlwiICsgU3RyaW5nKHRoaXMubmFub3NlY29uZHMpLnBhZFN0YXJ0KDksIFwiMFwiKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgdmVyc2lvbiBvZiBhIGRvY3VtZW50IGluIEZpcmVzdG9yZS4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgdmVyc2lvblxuICogdGltZXN0YW1wLCBzdWNoIGFzIHVwZGF0ZV90aW1lIG9yIHJlYWRfdGltZS5cbiAqLyBjbGFzcyBjdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tVGltZXN0YW1wKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjdCh0KTtcbiAgICB9XG4gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBjdChuZXcgYXQoMCwgMCkpO1xuICAgIH1cbiAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IGN0KG5ldyBhdCgyNTM0MDIzMDA3OTksIDk5OTk5OTk5OSkpO1xuICAgIH1cbiAgICBjb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuX2NvbXBhcmVUbyh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXAuaXNFcXVhbCh0LnRpbWVzdGFtcCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgbnVtYmVyIHJlcHJlc2VudGF0aW9uIG9mIHRoZSB2ZXJzaW9uIGZvciB1c2UgaW4gc3BlYyB0ZXN0cy4gKi8gICAgdG9NaWNyb3NlY29uZHMoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdG8gbWljcm9zZWNvbmRzLlxuICAgICAgICByZXR1cm4gMWU2ICogdGhpcy50aW1lc3RhbXAuc2Vjb25kcyArIHRoaXMudGltZXN0YW1wLm5hbm9zZWNvbmRzIC8gMWUzO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiU25hcHNob3RWZXJzaW9uKFwiICsgdGhpcy50aW1lc3RhbXAudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICB0b1RpbWVzdGFtcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gaHQodCkge1xuICAgIGxldCBlID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUrKztcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gbHQodCwgZSkge1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZShuLCB0W25dKTtcbn1cblxuZnVuY3Rpb24gZnQodCkge1xuICAgIGZvciAoY29uc3QgZSBpbiB0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQYXRoIHJlcHJlc2VudHMgYW4gb3JkZXJlZCBzZXF1ZW5jZSBvZiBzdHJpbmcgc2VnbWVudHMuXG4gKi9cbmNsYXNzIGR0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHZvaWQgMCA9PT0gZSA/IGUgPSAwIDogZSA+IHQubGVuZ3RoICYmIEwoKSwgdm9pZCAwID09PSBuID8gbiA9IHQubGVuZ3RoIC0gZSA6IG4gPiB0Lmxlbmd0aCAtIGUgJiYgTCgpLCBcbiAgICAgICAgdGhpcy5zZWdtZW50cyA9IHQsIHRoaXMub2Zmc2V0ID0gZSwgdGhpcy5sZW4gPSBuO1xuICAgIH1cbiAgICBnZXQgbGVuZ3RoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZW47XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gZHQuY29tcGFyYXRvcih0aGlzLCB0KTtcbiAgICB9XG4gICAgY2hpbGQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBkdCA/IHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlLnB1c2godCk7XG4gICAgICAgIH0pKSA6IGUucHVzaCh0KSwgdGhpcy5jb25zdHJ1Y3QoZSk7XG4gICAgfVxuICAgIC8qKiBUaGUgaW5kZXggb2Ygb25lIHBhc3QgdGhlIGxhc3Qgc2VnbWVudCBvZiB0aGUgcGF0aC4gKi8gICAgbGltaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9mZnNldCArIHRoaXMubGVuZ3RoO1xuICAgIH1cbiAgICBwb3BGaXJzdCh0KSB7XG4gICAgICAgIHJldHVybiB0ID0gdm9pZCAwID09PSB0ID8gMSA6IHQsIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0ICsgdCwgdGhpcy5sZW5ndGggLSB0KTtcbiAgICB9XG4gICAgcG9wTGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0KHRoaXMuc2VnbWVudHMsIHRoaXMub2Zmc2V0LCB0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBmaXJzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0XTtcbiAgICB9XG4gICAgbGFzdFNlZ21lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50c1t0aGlzLm9mZnNldCArIHRdO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIGlzUHJlZml4T2YodCkge1xuICAgICAgICBpZiAodC5sZW5ndGggPCB0aGlzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpc0ltbWVkaWF0ZVBhcmVudE9mKHQpIHtcbiAgICAgICAgaWYgKHRoaXMubGVuZ3RoICsgMSAhPT0gdC5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLmxlbmd0aDsgZSsrKSBpZiAodGhpcy5nZXQoZSkgIT09IHQuZ2V0KGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGZvciAobGV0IGUgPSB0aGlzLm9mZnNldCwgbiA9IHRoaXMubGltaXQoKTsgZSA8IG47IGUrKykgdCh0aGlzLnNlZ21lbnRzW2VdKTtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHMuc2xpY2UodGhpcy5vZmZzZXQsIHRoaXMubGltaXQoKSk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IE1hdGgubWluKHQubGVuZ3RoLCBlLmxlbmd0aCk7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgbjsgcysrKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5nZXQocyksIGkgPSBlLmdldChzKTtcbiAgICAgICAgICAgIGlmIChuIDwgaSkgcmV0dXJuIC0xO1xuICAgICAgICAgICAgaWYgKG4gPiBpKSByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5sZW5ndGggPCBlLmxlbmd0aCA/IC0xIDogdC5sZW5ndGggPiBlLmxlbmd0aCA/IDEgOiAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIHNsYXNoLXNlcGFyYXRlZCBwYXRoIGZvciBuYXZpZ2F0aW5nIHJlc291cmNlcyAoZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucylcbiAqIHdpdGhpbiBGaXJlc3RvcmUuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgX3QgZXh0ZW5kcyBkdCB7XG4gICAgY29uc3RydWN0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfdCh0LCBlLCBuKTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICAvLyBOT1RFOiBUaGUgY2xpZW50IGlzIGlnbm9yYW50IG9mIGFueSBwYXRoIHNlZ21lbnRzIGNvbnRhaW5pbmcgZXNjYXBlXG4gICAgICAgIC8vIHNlcXVlbmNlcyAoZS5nLiBfX2lkMTIzX18pIGFuZCBqdXN0IHBhc3NlcyB0aGVtIHRocm91Z2ggcmF3ICh0aGV5IGV4aXN0XG4gICAgICAgIC8vIGZvciBsZWdhY3kgcmVhc29ucyBhbmQgc2hvdWxkIG5vdCBiZSB1c2VkIGZyZXF1ZW50bHkpLlxuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkuam9pbihcIi9cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHJlc291cmNlIHBhdGggZnJvbSB0aGUgZ2l2ZW4gc2xhc2gtZGVsaW1pdGVkIHN0cmluZy4gSWYgbXVsdGlwbGVcbiAgICAgKiBhcmd1bWVudHMgYXJlIHByb3ZpZGVkLCBhbGwgY29tcG9uZW50cyBhcmUgY29tYmluZWQuIExlYWRpbmcgYW5kIHRyYWlsaW5nXG4gICAgICogc2xhc2hlcyBmcm9tIGFsbCBjb21wb25lbnRzIGFyZSBpZ25vcmVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVN0cmluZyguLi50KSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIHtcbiAgICAgICAgICAgIGlmIChuLmluZGV4T2YoXCIvL1wiKSA+PSAwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHNlZ21lbnQgKCR7bn0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluIC8vIGluIHRoZW0uYCk7XG4gICAgICAgICAgICAvLyBTdHJpcCBsZWFkaW5nIGFuZCB0cmFsaW5nIHNsYXNoZWQuXG4gICAgICAgICAgICAgICAgICAgICAgICBlLnB1c2goLi4ubi5zcGxpdChcIi9cIikuZmlsdGVyKCh0ID0+IHQubGVuZ3RoID4gMCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IF90KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHlQYXRoKCkge1xuICAgICAgICByZXR1cm4gbmV3IF90KFtdKTtcbiAgICB9XG59XG5cbmNvbnN0IHd0ID0gL15bX2EtekEtWl1bX2EtekEtWjAtOV0qJC87XG5cbi8qKlxuICogQSBkb3Qtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgc3ViLW9iamVjdHMgd2l0aGluIGEgZG9jdW1lbnQuXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBtdCBleHRlbmRzIGR0IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IG10KHQsIGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHN0cmluZyBjb3VsZCBiZSB1c2VkIGFzIGEgc2VnbWVudCBpbiBhIGZpZWxkIHBhdGhcbiAgICAgKiB3aXRob3V0IGVzY2FwaW5nLlxuICAgICAqLyAgICBzdGF0aWMgaXNWYWxpZElkZW50aWZpZXIodCkge1xuICAgICAgICByZXR1cm4gd3QudGVzdCh0KTtcbiAgICB9XG4gICAgY2Fub25pY2FsU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b0FycmF5KCkubWFwKCh0ID0+ICh0ID0gdC5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXFxcXFxcIikucmVwbGFjZSgvYC9nLCBcIlxcXFxgXCIpLCBcbiAgICAgICAgbXQuaXNWYWxpZElkZW50aWZpZXIodCkgfHwgKHQgPSBcImBcIiArIHQgKyBcImBcIiksIHQpKSkuam9pbihcIi5cIik7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgZmllbGQgcmVmZXJlbmNlcyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIGlzS2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiAxID09PSB0aGlzLmxlbmd0aCAmJiBcIl9fbmFtZV9fXCIgPT09IHRoaXMuZ2V0KDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgZmllbGQgZGVzaWduYXRpbmcgdGhlIGtleSBvZiBhIGRvY3VtZW50LlxuICAgICAqLyAgICBzdGF0aWMga2V5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgbXQoWyBcIl9fbmFtZV9fXCIgXSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGZpZWxkIHN0cmluZyBmcm9tIHRoZSBnaXZlbiBzZXJ2ZXItZm9ybWF0dGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIC0gU3BsaXR0aW5nIHRoZSBlbXB0eSBzdHJpbmcgaXMgbm90IGFsbG93ZWQgKGZvciBub3cgYXQgbGVhc3QpLlxuICAgICAqIC0gRW1wdHkgc2VnbWVudHMgd2l0aGluIHRoZSBzdHJpbmcgKGUuZy4gaWYgdGhlcmUgYXJlIHR3byBjb25zZWN1dGl2ZVxuICAgICAqICAgc2VwYXJhdG9ycykgYXJlIG5vdCBhbGxvd2VkLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM3MjQ0MTU3KTogd2Ugc2hvdWxkIG1ha2UgdGhpcyBtb3JlIHN0cmljdC4gUmlnaHQgbm93LCBpdCBhbGxvd3NcbiAgICAgKiBub24taWRlbnRpZmllciBwYXRoIGNvbXBvbmVudHMsIGV2ZW4gaWYgdGhleSBhcmVuJ3QgZXNjYXBlZC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21TZXJ2ZXJGb3JtYXQodCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGxldCBuID0gXCJcIiwgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZmllbGQgcGF0aCAoJHt0fSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgKTtcbiAgICAgICAgICAgIGUucHVzaChuKSwgbiA9IFwiXCI7XG4gICAgICAgIH07XG4gICAgICAgIGxldCByID0gITE7XG4gICAgICAgIGZvciAoO3MgPCB0Lmxlbmd0aDsgKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdFtzXTtcbiAgICAgICAgICAgIGlmIChcIlxcXFxcIiA9PT0gZSkge1xuICAgICAgICAgICAgICAgIGlmIChzICsgMSA9PT0gdC5sZW5ndGgpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyB0cmFpbGluZyBlc2NhcGUgY2hhcmFjdGVyOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0W3MgKyAxXTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcXFxcXCIgIT09IGUgJiYgXCIuXCIgIT09IGUgJiYgXCJgXCIgIT09IGUpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJQYXRoIGhhcyBpbnZhbGlkIGVzY2FwZSBzZXF1ZW5jZTogXCIgKyB0KTtcbiAgICAgICAgICAgICAgICBuICs9IGUsIHMgKz0gMjtcbiAgICAgICAgICAgIH0gZWxzZSBcImBcIiA9PT0gZSA/IChyID0gIXIsIHMrKykgOiBcIi5cIiAhPT0gZSB8fCByID8gKG4gKz0gZSwgcysrKSA6IChpKCksIHMrKyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGkoKSwgcikgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIlVudGVybWluYXRlZCBgIGluIHBhdGg6IFwiICsgdCk7XG4gICAgICAgIHJldHVybiBuZXcgbXQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgbXQoW10pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgZ3Qge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5maWVsZHMgPSB0LCBcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0aW9uIG9mIEZpZWxkTWFza1xuICAgICAgICAvLyBTb3J0IHRoZSBmaWVsZCBtYXNrIHRvIHN1cHBvcnQgYEZpZWxkTWFzay5pc0VxdWFsKClgIGFuZCBhc3NlcnQgYmVsb3cuXG4gICAgICAgIHQuc29ydChtdC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCBgZmllbGRQYXRoYCBpcyBpbmNsdWRlZCBieSBhdCBsZWFzdCBvbmUgZmllbGQgaW4gdGhpcyBmaWVsZFxuICAgICAqIG1hc2suXG4gICAgICpcbiAgICAgKiBUaGlzIGlzIGFuIE8obikgb3BlcmF0aW9uLCB3aGVyZSBgbmAgaXMgdGhlIHNpemUgb2YgdGhlIGZpZWxkIG1hc2suXG4gICAgICovICAgIGNvdmVycyh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmZpZWxkcykgaWYgKGUuaXNQcmVmaXhPZih0KSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gb3QodGhpcy5maWVsZHMsIHQuZmllbGRzLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBDb252ZXJ0cyBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZyB0byBhIGJpbmFyeSBzdHJpbmcuICovXG4vKiogVHJ1ZSBpZiBhbmQgb25seSBpZiB0aGUgQmFzZTY0IGNvbnZlcnNpb24gZnVuY3Rpb25zIGFyZSBhdmFpbGFibGUuICovXG5mdW5jdGlvbiB5dCgpIHtcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgYXRvYjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW1tdXRhYmxlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIFwicHJvdG9cIiBieXRlIHN0cmluZy5cbiAqXG4gKiBQcm90byBieXRlIHN0cmluZ3MgY2FuIGVpdGhlciBiZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmdzIG9yIFVpbnQ4QXJyYXlzIHdoZW5cbiAqIHNlbnQgb24gdGhlIHdpcmUuIFRoaXMgY2xhc3MgYWJzdHJhY3RzIGF3YXkgdGhpcyBkaWZmZXJlbnRpYXRpb24gYnkgaG9sZGluZ1xuICogdGhlIHByb3RvIGJ5dGUgc3RyaW5nIGluIGEgY29tbW9uIGNsYXNzIHRoYXQgbXVzdCBiZSBjb252ZXJ0ZWQgaW50byBhIHN0cmluZ1xuICogYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBwcm90by5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIHB0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYmluYXJ5U3RyaW5nID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcodCkge1xuICAgICAgICBjb25zdCBlID0gYXRvYih0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBwdChlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk7IFJlbW92ZSB0aGUgY29weSBvZiB0aGUgYnl0ZSBzdHJpbmcgaGVyZSBhcyB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBpcyBmcmVxdWVudGx5IGNhbGxlZCBkdXJpbmcgaW5kZXhpbmcuXG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHB0KGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogKCkgPT4gdCA8IHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iaW5hcnlTdHJpbmcuY2hhckNvZGVBdCh0KyspLFxuICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0ID0gdGhpcy5iaW5hcnlTdHJpbmcsIGJ0b2EodCk7XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovXG4gICAgICAgIHZhciB0O1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlW25dID0gdC5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLy8gQSBSZWdFeHAgbWF0Y2hpbmcgSVNPIDg2MDEgVVRDIHRpbWVzdGFtcHMgd2l0aCBvcHRpb25hbCBmcmFjdGlvbi5cbiAgICAgICAgKHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgYXBwcm94aW1hdGVCeXRlU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBydCh0aGlzLmJpbmFyeVN0cmluZywgdC5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5U3RyaW5nID09PSB0LmJpbmFyeVN0cmluZztcbiAgICB9XG59XG5cbnB0LkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IHB0KFwiXCIpO1xuXG5jb25zdCBJdCA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdmFsdWVzIGZvciBhIHRpbWVzdGFtcCB2YWx1ZSBpbnRvIGEgXCJzZWNvbmRzIGFuZFxuICogbmFub3NcIiByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBUdCh0KSB7XG4gICAgLy8gVGhlIGpzb24gaW50ZXJmYWNlIChmb3IgdGhlIGJyb3dzZXIpIHdpbGwgcmV0dXJuIGFuIGlzbyB0aW1lc3RhbXAgc3RyaW5nLFxuICAgIC8vIHdoaWxlIHRoZSBwcm90byBqcyBsaWJyYXJ5IChmb3Igbm9kZSkgd2lsbCByZXR1cm4gYVxuICAgIC8vIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgaW5zdGFuY2UuXG4gICAgaWYgKFUoISF0KSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBJdC5leGVjKHQpO1xuICAgICAgICBpZiAoVSghIW4pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IHQgPSBuWzFdO1xuICAgICAgICAgICAgdCA9ICh0ICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCBlID0gTnVtYmVyKHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IERhdGUodCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHMuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IEV0KHQuc2Vjb25kcyksXG4gICAgICAgIG5hbm9zOiBFdCh0Lm5hbm9zKVxuICAgIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBudW1iZXJzIGludG8gYSBKYXZhU2NyaXB0IG51bWJlci5cbiAqIFJldHVybnMgMCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bWVyaWMuXG4gKi8gZnVuY3Rpb24gRXQodCkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgPyB0IDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IE51bWJlcih0KSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiBBdCh0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBwdC5mcm9tQmFzZTY0U3RyaW5nKHQpIDogcHQuZnJvbVVpbnQ4QXJyYXkodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxuICpcbiAqIFNlcnZlciBUaW1lc3RhbXBzIGFyZSBiYWNrZWQgYnkgTWFwVmFsdWVzIHRoYXQgY29udGFpbiBhbiBpbnRlcm5hbCBmaWVsZFxuICogYF9fdHlwZV9fYCB3aXRoIGEgdmFsdWUgb2YgYHNlcnZlcl90aW1lc3RhbXBgLiBUaGUgcHJldmlvdXMgdmFsdWUgYW5kIGxvY2FsXG4gKiB3cml0ZSB0aW1lIGFyZSBzdG9yZWQgaW4gaXRzIGBfX3ByZXZpb3VzX3ZhbHVlX19gIGFuZCBgX19sb2NhbF93cml0ZV90aW1lX19gXG4gKiBmaWVsZHMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIE5vdGVzOlxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXG4gKiAgIHRyYW5zZm9ybS4gVGhleSBjYW4gb25seSBleGlzdCBpbiB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBUaGVyZWZvcmVcbiAqICAgdGhleSBkbyBub3QgbmVlZCB0byBiZSBwYXJzZWQgb3Igc2VyaWFsaXplZC5cbiAqIC0gV2hlbiBldmFsdWF0ZWQgbG9jYWxseSAoZS5nLiBmb3Igc25hcHNob3QuZGF0YSgpKSwgdGhleSBieSBkZWZhdWx0XG4gKiAgIGV2YWx1YXRlIHRvIGBudWxsYC4gVGhpcyBiZWhhdmlvciBjYW4gYmUgY29uZmlndXJlZCBieSBwYXNzaW5nIGN1c3RvbVxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxuICogLSBXaXRoIHJlc3BlY3QgdG8gb3RoZXIgU2VydmVyVGltZXN0YW1wVmFsdWVzLCB0aGV5IHNvcnQgYnkgdGhlaXJcbiAqICAgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gUnQodCkge1xuICAgIHZhciBlLCBuO1xuICAgIHJldHVybiBcInNlcnZlcl90aW1lc3RhbXBcIiA9PT0gKG51bGwgPT09IChuID0gKChudWxsID09PSAoZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQubWFwVmFsdWUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZmllbGRzKSB8fCB7fSkuX190eXBlX18pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uc3RyaW5nVmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU2VydmVyVGltZXN0YW1wIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYmVmb3JlIHRoaXMgU2VydmVyVGltZXN0YW1wIHdhcyBzZXQuXG4gKlxuICogUHJlc2VydmluZyB0aGUgcHJldmlvdXMgdmFsdWVzIGFsbG93cyB0aGUgdXNlciB0byBkaXNwbGF5IHRoZSBsYXN0IHJlc29sZWRcbiAqIHZhbHVlIHVudGlsIHRoZSBiYWNrZW5kIHJlc3BvbmRzIHdpdGggdGhlIHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24gYnQodCkge1xuICAgIGNvbnN0IGUgPSB0Lm1hcFZhbHVlLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX187XG4gICAgcmV0dXJuIFJ0KGUpID8gYnQoZSkgOiBlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBQdCh0KSB7XG4gICAgY29uc3QgZSA9IFR0KHQubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtcbiAgICByZXR1cm4gbmV3IGF0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFZ0IHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIHVzZUZldGNoU3RyZWFtcyBXaGV0aGVyIHRvIHVzZSB0aGUgRmV0Y2ggQVBJIGluc3RlYWQgb2ZcbiAgICAgKiBYTUxIVFRQUmVxdWVzdFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5hcHBJZCA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLmhvc3QgPSBzLCB0aGlzLnNzbCA9IGksIFxuICAgICAgICB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSByLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IG8sIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdTtcbiAgICB9XG59XG5cbi8qKiBUaGUgZGVmYXVsdCBkYXRhYmFzZSBuYW1lIGZvciBhIHByb2plY3QuICovXG4vKipcbiAqIFJlcHJlc2VudHMgdGhlIGRhdGFiYXNlIElEIGEgRmlyZXN0b3JlIGNsaWVudCBpcyBhc3NvY2lhdGVkIHdpdGguXG4gKiBAaW50ZXJuYWxcbiAqL1xuY2xhc3MgdnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0SWQgPSB0LCB0aGlzLmRhdGFiYXNlID0gZSB8fCBcIihkZWZhdWx0KVwiO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdnQoXCJcIiwgXCJcIik7XG4gICAgfVxuICAgIGdldCBpc0RlZmF1bHREYXRhYmFzZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiKGRlZmF1bHQpXCIgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHZ0ICYmIHQucHJvamVjdElkID09PSB0aGlzLnByb2plY3RJZCAmJiB0LmRhdGFiYXNlID09PSB0aGlzLmRhdGFiYXNlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZW50aW5lbCB2YWx1ZSB0aGF0IHNvcnRzIGJlZm9yZSBhbnkgTXV0YXRpb24gQmF0Y2ggSUQuICovXG4vKipcbiAqIFJldHVybnMgd2hldGhlciBhIHZhcmlhYmxlIGlzIGVpdGhlciB1bmRlZmluZWQgb3IgbnVsbC5cbiAqL1xuZnVuY3Rpb24gU3QodCkge1xuICAgIHJldHVybiBudWxsID09IHQ7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHZhbHVlIHJlcHJlc2VudHMgLTAuICovIGZ1bmN0aW9uIER0KHQpIHtcbiAgICAvLyBEZXRlY3QgaWYgdGhlIHZhbHVlIGlzIC0wLjAuIEJhc2VkIG9uIHBvbHlmaWxsIGZyb21cbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvaXNcbiAgICByZXR1cm4gMCA9PT0gdCAmJiAxIC8gdCA9PSAtMSAvIDA7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgaXMgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgaW50ZWdlciByYW5nZVxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHRlc3QgZm9yIGJlaW5nIGFuIGludGVnZXIgYW5kIGluIHRoZSBzYWZlIHJhbmdlXG4gKi8gZnVuY3Rpb24gQ3QodCkge1xuICAgIHJldHVybiBcIm51bWJlclwiID09IHR5cGVvZiB0ICYmIE51bWJlci5pc0ludGVnZXIodCkgJiYgIUR0KHQpICYmIHQgPD0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgJiYgdCA+PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgeHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21QYXRoKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB4dChfdC5mcm9tU3RyaW5nKHQpKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21OYW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB4dChfdC5mcm9tU3RyaW5nKHQpLnBvcEZpcnN0KDUpKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IHh0KF90LmVtcHR5UGF0aCgpKTtcbiAgICB9XG4gICAgZ2V0IGNvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCkubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgaXMgaW4gdGhlIHNwZWNpZmllZCBjb2xsZWN0aW9uSWQuICovICAgIGhhc0NvbGxlY3Rpb25JZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgubGVuZ3RoID49IDIgJiYgdGhpcy5wYXRoLmdldCh0aGlzLnBhdGgubGVuZ3RoIC0gMikgPT09IHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIGdyb3VwIChpLmUuIHRoZSBuYW1lIG9mIHRoZSBwYXJlbnQgY29sbGVjdGlvbikgZm9yIHRoaXMga2V5LiAqLyAgICBnZXRDb2xsZWN0aW9uR3JvdXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGZ1bGx5IHF1YWxpZmllZCBwYXRoIHRvIHRoZSBwYXJlbnQgY29sbGVjdGlvbi4gKi8gICAgZ2V0Q29sbGVjdGlvblBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgucG9wTGFzdCgpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgJiYgMCA9PT0gX3QuY29tcGFyYXRvcih0aGlzLnBhdGgsIHQucGF0aCk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHN0YXRpYyBjb21wYXJhdG9yKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIF90LmNvbXBhcmF0b3IodC5wYXRoLCBlLnBhdGgpO1xuICAgIH1cbiAgICBzdGF0aWMgaXNEb2N1bWVudEtleSh0KSB7XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCAlIDIgPT0gMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBkb2N1bWVudCBrZXkgd2l0aCB0aGUgZ2l2ZW4gc2VnbWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2VnbWVudHMgLSBUaGUgc2VnbWVudHMgb2YgdGhlIHBhdGggdG8gdGhlIGRvY3VtZW50XG4gICAgICogQHJldHVybnMgQSBuZXcgaW5zdGFuY2Ugb2YgRG9jdW1lbnRLZXlcbiAgICAgKi8gICAgc3RhdGljIGZyb21TZWdtZW50cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgeHQobmV3IF90KHQuc2xpY2UoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgTnQgPSB7XG4gICAgbWFwVmFsdWU6IHtcbiAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcIl9fbWF4X19cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwga3QgPSB7XG4gICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxufTtcblxuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqL1xuZnVuY3Rpb24gTXQodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyAwIC8qIE51bGxWYWx1ZSAqLyA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IDEgLyogQm9vbGVhblZhbHVlICovIDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0IHx8IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gMiAvKiBOdW1iZXJWYWx1ZSAqLyA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gNSAvKiBTdHJpbmdWYWx1ZSAqLyA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyA2IC8qIEJsb2JWYWx1ZSAqLyA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gNyAvKiBSZWZWYWx1ZSAqLyA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gOSAvKiBBcnJheVZhbHVlICovIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBSdCh0KSA/IDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOiBIdCh0KSA/IDkgLyogQXJyYXlWYWx1ZSAqLyA6IDEwIC8qIE9iamVjdFZhbHVlICovIDogTCgpO1xufVxuXG4vKiogVGVzdHMgYGxlZnRgIGFuZCBgcmlnaHRgIGZvciBlcXVhbGl0eSBiYXNlZCBvbiB0aGUgYmFja2VuZCBzZW1hbnRpY3MuICovIGZ1bmN0aW9uIE90KHQsIGUpIHtcbiAgICBpZiAodCA9PT0gZSkgcmV0dXJuICEwO1xuICAgIGNvbnN0IG4gPSBNdCh0KTtcbiAgICBpZiAobiAhPT0gTXQoZSkpIHJldHVybiAhMTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIE1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlID09PSBlLmJvb2xlYW5WYWx1ZTtcblxuICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIFB0KHQpLmlzRXF1YWwoUHQoZSkpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIHQudGltZXN0YW1wVmFsdWUgPT09IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gVHQodC50aW1lc3RhbXBWYWx1ZSksIHMgPSBUdChlLnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHMuc2Vjb25kcyAmJiBuLm5hbm9zID09PSBzLm5hbm9zO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5zdHJpbmdWYWx1ZSA9PT0gZS5zdHJpbmdWYWx1ZTtcblxuICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gQXQodC5ieXRlc1ZhbHVlKS5pc0VxdWFsKEF0KGUuYnl0ZXNWYWx1ZSkpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZSA9PT0gZS5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIEV0KHQuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgPT09IEV0KGUuZ2VvUG9pbnRWYWx1ZS5sYXRpdHVkZSkgJiYgRXQodC5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSkgPT09IEV0KGUuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDIgLyogTnVtYmVyVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIGUpIHJldHVybiBFdCh0LmludGVnZXJWYWx1ZSkgPT09IEV0KGUuaW50ZWdlclZhbHVlKTtcbiAgICAgICAgICAgIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBFdCh0LmRvdWJsZVZhbHVlKSwgcyA9IEV0KGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuID09PSBzID8gRHQobikgPT09IER0KHMpIDogaXNOYU4obikgJiYgaXNOYU4ocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgOSAvKiBBcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIG90KHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIE90KTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5tYXBWYWx1ZS5maWVsZHMgfHwge30sIHMgPSBlLm1hcFZhbHVlLmZpZWxkcyB8fCB7fTtcbiAgICAgICAgICAgIGlmIChodChuKSAhPT0gaHQocykpIHJldHVybiAhMTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBpbiBuKSBpZiAobi5oYXNPd25Qcm9wZXJ0eSh0KSAmJiAodm9pZCAwID09PSBzW3RdIHx8ICFPdChuW3RdLCBzW3RdKSkpIHJldHVybiAhMTtcbiAgICAgICAgICAgIHJldHVybiAhMDtcbiAgICAgICAgfVxuICAgICAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBBcnJheVZhbHVlIGNvbnRhaW5zIHRoZSBzcGVjaWZpZWQgZWxlbWVudC4gKi8gKHQsIGUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRnQodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09ICh0LnZhbHVlcyB8fCBbXSkuZmluZCgodCA9PiBPdCh0LCBlKSkpO1xufVxuXG5mdW5jdGlvbiAkdCh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAwO1xuICAgIGNvbnN0IG4gPSBNdCh0KSwgcyA9IE10KGUpO1xuICAgIGlmIChuICE9PSBzKSByZXR1cm4gcnQobiwgcyk7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogTnVsbFZhbHVlICovIDpcbiAgICAgIGNhc2UgOTAwNzE5OTI1NDc0MDk5MSAvKiBNYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHJ0KHQuYm9vbGVhblZhbHVlLCBlLmJvb2xlYW5WYWx1ZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gRXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSksIHMgPSBFdChlLmludGVnZXJWYWx1ZSB8fCBlLmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuIDwgcyA/IC0xIDogbiA+IHMgPyAxIDogbiA9PT0gcyA/IDAgOiBcbiAgICAgICAgICAgIC8vIG9uZSBvciBib3RoIGFyZSBOYU4uXG4gICAgICAgICAgICBpc05hTihuKSA/IGlzTmFOKHMpID8gMCA6IC0xIDogMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEJ0KHQudGltZXN0YW1wVmFsdWUsIGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gQnQoUHQodCksIFB0KGUpKTtcblxuICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHJ0KHQuc3RyaW5nVmFsdWUsIGUuc3RyaW5nVmFsdWUpO1xuXG4gICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBBdCh0KSwgcyA9IEF0KGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uY29tcGFyZVRvKHMpO1xuICAgICAgICB9KHQuYnl0ZXNWYWx1ZSwgZS5ieXRlc1ZhbHVlKTtcblxuICAgICAgY2FzZSA3IC8qIFJlZlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnNwbGl0KFwiL1wiKSwgcyA9IGUuc3BsaXQoXCIvXCIpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAmJiB0IDwgcy5sZW5ndGg7IHQrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBydChuW3RdLCBzW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnQobi5sZW5ndGgsIHMubGVuZ3RoKTtcbiAgICAgICAgfSh0LnJlZmVyZW5jZVZhbHVlLCBlLnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHJ0KEV0KHQubGF0aXR1ZGUpLCBFdChlLmxhdGl0dWRlKSk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgICAgICAgICByZXR1cm4gcnQoRXQodC5sb25naXR1ZGUpLCBFdChlLmxvbmdpdHVkZSkpO1xuICAgICAgICB9KHQuZ2VvUG9pbnRWYWx1ZSwgZS5nZW9Qb2ludFZhbHVlKTtcblxuICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudmFsdWVzIHx8IFtdLCBzID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9ICR0KG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQuYXJyYXlWYWx1ZSwgZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBPYmplY3RWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5maWVsZHMgfHwge30sIHMgPSBPYmplY3Qua2V5cyhuKSwgaSA9IGUuZmllbGRzIHx8IHt9LCByID0gT2JqZWN0LmtleXMoaSk7XG4gICAgICAgICAgICAvLyBFdmVuIHRob3VnaCBNYXBWYWx1ZXMgYXJlIGxpa2VseSBzb3J0ZWQgY29ycmVjdGx5IGJhc2VkIG9uIHRoZWlyIGluc2VydGlvblxuICAgICAgICAgICAgLy8gb3JkZXIgKGUuZy4gd2hlbiByZWNlaXZlZCBmcm9tIHRoZSBiYWNrZW5kKSwgbG9jYWwgbW9kaWZpY2F0aW9ucyBjYW4gYnJpbmdcbiAgICAgICAgICAgIC8vIGVsZW1lbnRzIG91dCBvZiBvcmRlci4gV2UgbmVlZCB0byByZS1zb3J0IHRoZSBlbGVtZW50cyB0byBlbnN1cmUgdGhhdFxuICAgICAgICAgICAgLy8gY2Fub25pY2FsIElEcyBhcmUgaW5kZXBlbmRlbnQgb2YgaW5zZXJ0aW9uIG9yZGVyLlxuICAgICAgICAgICAgcy5zb3J0KCksIHIuc29ydCgpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBzLmxlbmd0aCAmJiB0IDwgci5sZW5ndGg7ICsrdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBydChzW3RdLCByW3RdKTtcbiAgICAgICAgICAgICAgICBpZiAoMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgY29uc3QgbyA9ICR0KG5bc1t0XV0sIGlbclt0XV0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBvKSByZXR1cm4gbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydChzLmxlbmd0aCwgci5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogR2VuZXJhdGVzIHRoZSBjYW5vbmljYWwgSUQgZm9yIHRoZSBwcm92aWRlZCBmaWVsZCB2YWx1ZSAoYXMgdXNlZCBpbiBUYXJnZXRcbiAqIHNlcmlhbGl6YXRpb24pLlxuICovICh0Lm1hcFZhbHVlLCBlLm1hcFZhbHVlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQnQodCwgZSkge1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgJiYgdC5sZW5ndGggPT09IGUubGVuZ3RoKSByZXR1cm4gcnQodCwgZSk7XG4gICAgY29uc3QgbiA9IFR0KHQpLCBzID0gVHQoZSksIGkgPSBydChuLnNlY29uZHMsIHMuc2Vjb25kcyk7XG4gICAgcmV0dXJuIDAgIT09IGkgPyBpIDogcnQobi5uYW5vcywgcy5uYW5vcyk7XG59XG5cbmZ1bmN0aW9uIEx0KHQpIHtcbiAgICByZXR1cm4gVXQodCk7XG59XG5cbmZ1bmN0aW9uIFV0KHQpIHtcbiAgICByZXR1cm4gXCJudWxsVmFsdWVcIiBpbiB0ID8gXCJudWxsXCIgOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5ib29sZWFuVmFsdWUgOiBcImludGVnZXJWYWx1ZVwiIGluIHQgPyBcIlwiICsgdC5pbnRlZ2VyVmFsdWUgOiBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmRvdWJsZVZhbHVlIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBUdCh0KTtcbiAgICAgICAgcmV0dXJuIGB0aW1lKCR7ZS5zZWNvbmRzfSwke2UubmFub3N9KWA7XG4gICAgfSh0LnRpbWVzdGFtcFZhbHVlKSA6IFwic3RyaW5nVmFsdWVcIiBpbiB0ID8gdC5zdHJpbmdWYWx1ZSA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyBBdCh0LmJ5dGVzVmFsdWUpLnRvQmFzZTY0KCkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCA/IChuID0gdC5yZWZlcmVuY2VWYWx1ZSwgXG4gICAgeHQuZnJvbU5hbWUobikudG9TdHJpbmcoKSkgOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gYGdlbygkeyhlID0gdC5nZW9Qb2ludFZhbHVlKS5sYXRpdHVkZX0sJHtlLmxvbmdpdHVkZX0pYCA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlID0gXCJbXCIsIG4gPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHQudmFsdWVzIHx8IFtdKSBuID8gbiA9ICExIDogZSArPSBcIixcIiwgZSArPSBVdChzKTtcbiAgICAgICAgcmV0dXJuIGUgKyBcIl1cIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByZWZlcmVuY2UgdmFsdWUgZm9yIHRoZSBwcm92aWRlZCBkYXRhYmFzZSBhbmQga2V5LiAqLyAodC5hcnJheVZhbHVlKSA6IFwibWFwVmFsdWVcIiBpbiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdGVyYXRpb24gb3JkZXIgaW4gSmF2YVNjcmlwdCBpcyBub3QgZ3VhcmFudGVlZC4gVG8gZW5zdXJlIHRoYXQgd2UgZ2VuZXJhdGVcbiAgICAgICAgLy8gbWF0Y2hpbmcgY2Fub25pY2FsIElEcyBmb3IgaWRlbnRpY2FsIG1hcHMsIHdlIG5lZWQgdG8gc29ydCB0aGUga2V5cy5cbiAgICAgICAgY29uc3QgZSA9IE9iamVjdC5rZXlzKHQuZmllbGRzIHx8IHt9KS5zb3J0KCk7XG4gICAgICAgIGxldCBuID0gXCJ7XCIsIHMgPSAhMDtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIGUpIHMgPyBzID0gITEgOiBuICs9IFwiLFwiLCBuICs9IGAke2l9OiR7VXQodC5maWVsZHNbaV0pfWA7XG4gICAgICAgIHJldHVybiBuICsgXCJ9XCI7XG4gICAgfSh0Lm1hcFZhbHVlKSA6IEwoKTtcbiAgICB2YXIgZSwgbjtcbn1cblxuZnVuY3Rpb24gcXQodCwgZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlZmVyZW5jZVZhbHVlOiBgcHJvamVjdHMvJHt0LnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dC5kYXRhYmFzZX0vZG9jdW1lbnRzLyR7ZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpfWBcbiAgICB9O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYW4gSW50ZWdlclZhbHVlIC4gKi8gZnVuY3Rpb24gR3QodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJpbnRlZ2VyVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBEb3VibGVWYWx1ZS4gKi9cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBBcnJheVZhbHVlLiAqL1xuZnVuY3Rpb24gS3QodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJhcnJheVZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTnVsbFZhbHVlLiAqLyBmdW5jdGlvbiBRdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm51bGxWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBOYU4uICovIGZ1bmN0aW9uIGp0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIGlzTmFOKE51bWJlcih0LmRvdWJsZVZhbHVlKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIE1hcFZhbHVlLiAqLyBmdW5jdGlvbiBXdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcIm1hcFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIENyZWF0ZXMgYSBkZWVwIGNvcHkgb2YgYHNvdXJjZWAuICovIGZ1bmN0aW9uIHp0KHQpIHtcbiAgICBpZiAodC5nZW9Qb2ludFZhbHVlKSByZXR1cm4ge1xuICAgICAgICBnZW9Qb2ludFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0Lmdlb1BvaW50VmFsdWUpXG4gICAgfTtcbiAgICBpZiAodC50aW1lc3RhbXBWYWx1ZSAmJiBcIm9iamVjdFwiID09IHR5cGVvZiB0LnRpbWVzdGFtcFZhbHVlKSByZXR1cm4ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdC50aW1lc3RhbXBWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0Lm1hcFZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGx0KHQubWFwVmFsdWUuZmllbGRzLCAoKHQsIG4pID0+IGUubWFwVmFsdWUuZmllbGRzW3RdID0genQobikpKSwgZTtcbiAgICB9XG4gICAgaWYgKHQuYXJyYXlWYWx1ZSkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkubGVuZ3RoOyArK24pIGUuYXJyYXlWYWx1ZS52YWx1ZXNbbl0gPSB6dCh0LmFycmF5VmFsdWUudmFsdWVzW25dKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJldHVybiBPYmplY3QuYXNzaWduKHt9LCB0KTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgVmFsdWUgcmVwcmVzZW50cyB0aGUgY2Fub25pY2FsIHtAbGluayAjTUFYX1ZBTFVFfSAuICovIGZ1bmN0aW9uIEh0KHQpIHtcbiAgICByZXR1cm4gXCJfX21heF9fXCIgPT09ICgoKHQubWFwVmFsdWUgfHwge30pLmZpZWxkcyB8fCB7fSkuX190eXBlX18gfHwge30pLnN0cmluZ1ZhbHVlO1xufVxuXG4vKiogUmV0dXJucyB0aGUgbG93ZXN0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgdHlwZSAoaW5jbHVzaXZlKS4gKi8gZnVuY3Rpb24gSnQodCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgPT09IHQgPyBlIDogdm9pZCAwID09PSBlIHx8ICR0KHQsIGUpID4gMCA/IHQgOiBlO1xufVxuXG5mdW5jdGlvbiBZdCh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IGUgOiB2b2lkIDAgPT09IGUgfHwgJHQodCwgZSkgPCAwID8gdCA6IGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIFh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgWHQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZCh0KSB7XG4gICAgICAgIGlmICh0LmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggLSAxOyArK24pIGlmIChlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0LmdldChuKV0sIFxuICAgICAgICAgICAgIVd0KGUpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0Lmxhc3RTZWdtZW50KCldLCBlIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAodC5wb3BMYXN0KCkpW3QubGFzdFNlZ21lbnQoKV0gPSB6dChlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwodCkge1xuICAgICAgICBsZXQgZSA9IG10LmVtcHR5UGF0aCgpLCBuID0ge30sIHMgPSBbXTtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXModCwgbiwgcyksIG4gPSB7fSwgcyA9IFtdLCBlID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID8gbltpLmxhc3RTZWdtZW50KCldID0genQodCkgOiBzLnB1c2goaS5sYXN0U2VnbWVudCgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGksIG4sIHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWVsZCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIG5vIGZpZWxkIGF0IHRoZVxuICAgICAqIHNwZWNpZmllZCBwYXRoLCBub3RoaW5nIGlzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHJlbW92ZS5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZmllbGQodC5wb3BMYXN0KCkpO1xuICAgICAgICBXdChlKSAmJiBlLm1hcFZhbHVlLmZpZWxkcyAmJiBkZWxldGUgZS5tYXBWYWx1ZS5maWVsZHNbdC5sYXN0U2VnbWVudCgpXTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBPdCh0aGlzLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBlLm1hcFZhbHVlLmZpZWxkcyB8fCAoZS5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHMgPSBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV07XG4gICAgICAgICAgICBXdChzKSAmJiBzLm1hcFZhbHVlLmZpZWxkcyB8fCAocyA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildID0gcyksIGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGx0KGUsICgoZSwgbikgPT4gdFtlXSA9IG4pKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGRlbGV0ZSB0W2VdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYdCh6dCh0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gWnQodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gbHQodC5maWVsZHMsICgodCwgbikgPT4ge1xuICAgICAgICBjb25zdCBzID0gbmV3IG10KFsgdCBdKTtcbiAgICAgICAgaWYgKFd0KG4pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gWnQobi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICBlLnB1c2gocyk7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZS5wdXNoKHMuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICBlLnB1c2gocyk7XG4gICAgfSkpLCBuZXcgZ3QoZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyB0ZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gZSwgdGhpcy52ZXJzaW9uID0gbiwgdGhpcy5yZWFkVGltZSA9IHMsIHRoaXMuZGF0YSA9IGksIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSByO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZG9jdW1lbnQgd2l0aCBubyBrbm93biB2ZXJzaW9uIG9yIGRhdGEsIGJ1dCB3aGljaCBjYW4gc2VydmUgYXNcbiAgICAgKiBiYXNlIGRvY3VtZW50IGZvciBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBuZXdJbnZhbGlkRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IHRlKHQsIDAgLyogSU5WQUxJRCAqLyAsIGN0Lm1pbigpLCBjdC5taW4oKSwgWHQuZW1wdHkoKSwgMCAvKiBTWU5DRUQgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gZXhpc3Qgd2l0aCB0aGUgZ2l2ZW4gZGF0YSBhdCB0aGVcbiAgICAgKiBnaXZlbiB2ZXJzaW9uLlxuICAgICAqLyAgICBzdGF0aWMgbmV3Rm91bmREb2N1bWVudCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGUodCwgMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIGUsIGN0Lm1pbigpLCBuLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gbm90IGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uLiAqLyAgICBzdGF0aWMgbmV3Tm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGUodCwgMiAvKiBOT19ET0NVTUVOVCAqLyAsIGUsIGN0Lm1pbigpLCBYdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCBhdCB0aGUgZ2l2ZW4gdmVyc2lvbiBidXRcbiAgICAgKiB3aG9zZSBkYXRhIGlzIG5vdCBrbm93biAoZS5nLiBhIGRvY3VtZW50IHRoYXQgd2FzIHVwZGF0ZWQgd2l0aG91dCBhIGtub3duXG4gICAgICogYmFzZSBkb2N1bWVudCkuXG4gICAgICovICAgIHN0YXRpYyBuZXdVbmtub3duRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IHRlKHQsIDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyAsIGUsIGN0Lm1pbigpLCBYdC5lbXB0eSgpLCAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhbmQgdGhhdCBpdHMgdmVyc2lvblxuICAgICAqIGFuZCBkYXRhIGFyZSBrbm93bi5cbiAgICAgKi8gICAgY29udmVydFRvRm91bmREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRk9VTkRfRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBlLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBTWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBOT19ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IFh0LmVtcHR5KCksIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gWHQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRSZWFkVGltZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlYWRUaW1lID0gdCwgdGhpcztcbiAgICB9XG4gICAgZ2V0IGhhc0xvY2FsTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBIQVNfTE9DQUxfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIEhBU19DT01NSVRURURfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNMb2NhbE11dGF0aW9ucyB8fCB0aGlzLmhhc0NvbW1pdHRlZE11dGF0aW9ucztcbiAgICB9XG4gICAgaXNWYWxpZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMCAvKiBJTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNGb3VuZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMSAvKiBGT1VORF9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzTm9Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogTk9fRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc1Vua25vd25Eb2N1bWVudCgpIHtcbiAgICAgICAgcmV0dXJuIDMgLyogVU5LTk9XTl9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHRlICYmIHRoaXMua2V5LmlzRXF1YWwodC5rZXkpICYmIHRoaXMudmVyc2lvbi5pc0VxdWFsKHQudmVyc2lvbikgJiYgdGhpcy5kb2N1bWVudFR5cGUgPT09IHQuZG9jdW1lbnRUeXBlICYmIHRoaXMuZG9jdW1lbnRTdGF0ZSA9PT0gdC5kb2N1bWVudFN0YXRlICYmIHRoaXMuZGF0YS5pc0VxdWFsKHQuZGF0YSk7XG4gICAgfVxuICAgIG11dGFibGVDb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IHRlKHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLnJlYWRUaW1lLCB0aGlzLmRhdGEuY2xvbmUoKSwgdGhpcy5kb2N1bWVudFN0YXRlKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBgRG9jdW1lbnQoJHt0aGlzLmtleX0sICR7dGhpcy52ZXJzaW9ufSwgJHtKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEudmFsdWUpfSwge2RvY3VtZW50VHlwZTogJHt0aGlzLmRvY3VtZW50VHlwZX19KSwge2RvY3VtZW50U3RhdGU6ICR7dGhpcy5kb2N1bWVudFN0YXRlfX0pYDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdGhlIHZhbHVlIGZvciBmaWVsZCBgZmllbGRgIGluIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuIFRocm93cyBpZlxuICogdGhlIGZpZWxkIGRvZXMgbm90IGV4aXN0IGluIGJvdGggZG9jdW1lbnRzLlxuICovXG4vKipcbiAqIEFuIGluZGV4IGRlZmluaXRpb24gZm9yIGZpZWxkIGluZGV4ZXMgaW4gRmlyZXN0b3JlLlxuICpcbiAqIEV2ZXJ5IGluZGV4IGlzIGFzc29jaWF0ZWQgd2l0aCBhIGNvbGxlY3Rpb24uIFRoZSBkZWZpbml0aW9uIGNvbnRhaW5zIGEgbGlzdFxuICogb2YgZmllbGRzIGFuZCB0aGVpciBpbmRleCBraW5kICh3aGljaCBjYW4gYmUgYEFTQ0VORElOR2AsIGBERVNDRU5ESU5HYCBvclxuICogYENPTlRBSU5TYCBmb3IgQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55IHF1ZXJpZXMpLlxuICpcbiAqIFVubGlrZSB0aGUgYmFja2VuZCwgdGhlIFNESyBkb2VzIG5vdCBkaWZmZXJlbnRpYXRlIGJldHdlZW4gY29sbGVjdGlvbiBvclxuICogY29sbGVjdGlvbiBncm91cC1zY29wZWQgaW5kaWNlcy4gRXZlcnkgaW5kZXggY2FuIGJlIHVzZWQgZm9yIGJvdGggc2luZ2xlXG4gKiBjb2xsZWN0aW9uIGFuZCBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMuXG4gKi9cbmNsYXNzIGVlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgaW5kZXggSUQuIFJldHVybnMgLTEgaWYgdGhlIGluZGV4IElEIGlzIG5vdCBhdmFpbGFibGUgKGUuZy4gdGhlIGluZGV4XG4gICAgICogaGFzIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQpLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgY29sbGVjdGlvbiBJRCB0aGlzIGluZGV4IGFwcGxpZXMgdG8uICovXG4gICAgZSwgXG4gICAgLyoqIFRoZSBmaWVsZCBzZWdtZW50cyBmb3IgdGhpcyBpbmRleC4gKi9cbiAgICBuLCBcbiAgICAvKiogU2hvd3MgaG93IHVwLXRvLWRhdGUgdGhlIGluZGV4IGlzIGZvciB0aGUgY3VycmVudCB1c2VyLiAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5pbmRleElkID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLmZpZWxkcyA9IG4sIHRoaXMuaW5kZXhTdGF0ZSA9IHM7XG4gICAgfVxufVxuXG4vKiogQW4gSUQgZm9yIGFuIGluZGV4IHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBhZGRlZCB0byBwZXJzaXN0ZW5jZS4gICovXG4vKiogUmV0dXJucyB0aGUgQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55IHNlZ21lbnQgZm9yIHRoaXMgaW5kZXguICovXG5mdW5jdGlvbiBuZSh0KSB7XG4gICAgcmV0dXJuIHQuZmllbGRzLmZpbmQoKHQgPT4gMiAvKiBDT05UQUlOUyAqLyA9PT0gdC5raW5kKSk7XG59XG5cbi8qKiBSZXR1cm5zIGFsbCBkaXJlY3Rpb25hbCAoYXNjZW5kaW5nL2Rlc2NlbmRpbmcpIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqLyBmdW5jdGlvbiBzZSh0KSB7XG4gICAgcmV0dXJuIHQuZmllbGRzLmZpbHRlcigodCA9PiAyIC8qIENPTlRBSU5TICovICE9PSB0LmtpbmQpKTtcbn1cblxuLyoqIFJldHVybnMgYSBkZWJ1ZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgZmllbGQgaW5kZXggKi8gZWUuVU5LTk9XTl9JRCA9IC0xO1xuXG4vKiogQW4gaW5kZXggY29tcG9uZW50IGNvbnNpc3Rpbmcgb2YgZmllbGQgcGF0aCBhbmQgaW5kZXggdHlwZS4gICovXG5jbGFzcyBpZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSBmaWVsZCBwYXRoIG9mIHRoZSBjb21wb25lbnQuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBmaWVsZHMgc29ydGluZyBvcmRlci4gKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMuZmllbGRQYXRoID0gdCwgdGhpcy5raW5kID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBcImhpZ2ggd2F0ZXIgbWFya1wiIHRoYXQgaW5kaWNhdGVzIGhvdyB1cGRhdGVkIHRoZSBJbmRleCBpcyBmb3IgdGhlXG4gKiBjdXJyZW50IHVzZXIuXG4gKi8gY2xhc3MgcmUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEluZGljYXRlcyB3aGVuIHRoZSBpbmRleCB3YXMgbGFzdCB1cGRhdGVkIChyZWxhdGl2ZSB0byBvdGhlciBpbmRleGVzKS5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHRoZSBsYXRlc3QgaW5kZXhlZCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBpZC4gKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSB0LCB0aGlzLm9mZnNldCA9IGU7XG4gICAgfVxuICAgIC8qKiBUaGUgc3RhdGUgb2YgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGJhY2tmaWxsZWQuICovICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyByZSgwLCBhZS5taW4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gb2Zmc2V0IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIHdpdGggYSByZWFkIHRpbWUgaGlnaGVyIHRoYW5cbiAqIGByZWFkVGltZWAuXG4gKi8gZnVuY3Rpb24gb2UodCwgZSkge1xuICAgIC8vIFdlIHdhbnQgdG8gY3JlYXRlIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lXG4gICAgLy8gZ3JlYXRlciB0aGFuIHRoZSBwcm92aWRlZCByZWFkIHRpbWUuIFRvIGRvIHNvLCB3ZSB0ZWNobmljYWxseSBuZWVkIHRvXG4gICAgLy8gY3JlYXRlIGFuIG9mZnNldCBmb3IgYChyZWFkVGltZSwgTUFYX0RPQ1VNRU5UX0tFWSlgLiBXaGlsZSB3ZSBjb3VsZCB1c2VcbiAgICAvLyBVbmljb2RlIGNvZGVwb2ludHMgdG8gZ2VuZXJhdGUgTUFYX0RPQ1VNRU5UX0tFWSwgaXQgaXMgbXVjaCBlYXNpZXIgdG8gdXNlXG4gICAgLy8gYChyZWFkVGltZSArIDEsIERvY3VtZW50S2V5LmVtcHR5KCkpYCBzaW5jZSBgPiBEb2N1bWVudEtleS5lbXB0eSgpYCBtYXRjaGVzXG4gICAgLy8gYWxsIHZhbGlkIGRvY3VtZW50IElEcy5cbiAgICBjb25zdCBuID0gdC50b1RpbWVzdGFtcCgpLnNlY29uZHMsIHMgPSB0LnRvVGltZXN0YW1wKCkubmFub3NlY29uZHMgKyAxLCBpID0gY3QuZnJvbVRpbWVzdGFtcCgxZTkgPT09IHMgPyBuZXcgYXQobiArIDEsIDApIDogbmV3IGF0KG4sIHMpKTtcbiAgICByZXR1cm4gbmV3IGFlKGksIHh0LmVtcHR5KCksIGUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50LiAqLyBmdW5jdGlvbiB1ZSh0KSB7XG4gICAgcmV0dXJuIG5ldyBhZSh0LnJlYWRUaW1lLCB0LmtleSwgLTEpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgbGF0ZXN0IHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIElEIHRoYXQgd2VyZSBwcm9jZXNzZWQgZm9yIGFuXG4gKiBpbmRleC5cbiAqLyBjbGFzcyBhZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGxhdGVzdCByZWFkIHRpbWUgdmVyc2lvbiB0aGF0IGhhcyBiZWVuIGluZGV4ZWQgYnkgRmlyZXN0b3JlIGZvciB0aGlzXG4gICAgICogZmllbGQgaW5kZXguXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGtleSBvZiB0aGUgbGFzdCBkb2N1bWVudCB0aGF0IHdhcyBpbmRleGVkIGZvciB0aGlzIHF1ZXJ5LiBVc2VcbiAgICAgKiBgRG9jdW1lbnRLZXkuZW1wdHkoKWAgaWYgbm8gZG9jdW1lbnQgaGFzIGJlZW4gaW5kZXhlZC5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKlxuICAgICAqIFRoZSBsYXJnZXN0IG11dGF0aW9uIGJhdGNoIGlkIHRoYXQncyBiZWVuIHByb2Nlc3NlZCBieSBGaXJlc3RvcmUuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnJlYWRUaW1lID0gdCwgdGhpcy5kb2N1bWVudEtleSA9IGUsIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSBuO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBiZWZvcmUgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhZShjdC5taW4oKSwgeHQuZW1wdHkoKSwgLTEpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbiBvZmZzZXQgdGhhdCBzb3J0cyBhZnRlciBhbGwgcmVndWxhciBvZmZzZXRzLiAqLyAgICBzdGF0aWMgbWF4KCkge1xuICAgICAgICByZXR1cm4gbmV3IGFlKGN0Lm1heCgpLCB4dC5lbXB0eSgpLCAtMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjZSh0LCBlKSB7XG4gICAgbGV0IG4gPSB0LnJlYWRUaW1lLmNvbXBhcmVUbyhlLnJlYWRUaW1lKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiAobiA9IHh0LmNvbXBhcmF0b3IodC5kb2N1bWVudEtleSwgZS5kb2N1bWVudEtleSksIDAgIT09IG4gPyBuIDogcnQodC5sYXJnZXN0QmF0Y2hJZCwgZS5sYXJnZXN0QmF0Y2hJZCkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3MgaGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMub3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIHRoaXMubGltaXQgPSBpLCBcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gciwgdGhpcy5lbmRBdCA9IG8sIHRoaXMuUCA9IG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgVGFyZ2V0IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAqXG4gKiBOT1RFOiB5b3Ugc2hvdWxkIGFsd2F5cyBjb25zdHJ1Y3QgYFRhcmdldGAgZnJvbSBgUXVlcnkudG9UYXJnZXRgIGluc3RlYWQgb2ZcbiAqIHVzaW5nIHRoaXMgZmFjdG9yeSBtZXRob2QsIGJlY2F1c2UgYFF1ZXJ5YCBwcm92aWRlcyBhbiBpbXBsaWNpdCBgb3JkZXJCeWBcbiAqIHByb3BlcnR5LlxuICovIGZ1bmN0aW9uIGxlKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgIHJldHVybiBuZXcgaGUodCwgZSwgbiwgcywgaSwgciwgbyk7XG59XG5cbmZ1bmN0aW9uIGZlKHQpIHtcbiAgICBjb25zdCBlID0gRyh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5QKSB7XG4gICAgICAgIGxldCB0ID0gZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICBudWxsICE9PSBlLmNvbGxlY3Rpb25Hcm91cCAmJiAodCArPSBcInxjZzpcIiArIGUuY29sbGVjdGlvbkdyb3VwKSwgdCArPSBcInxmOlwiLCB0ICs9IGUuZmlsdGVycy5tYXAoKHQgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIChlID0gdCkuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyBlLm9wLnRvU3RyaW5nKCkgKyBMdChlLnZhbHVlKTtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICB9KSkuam9pbihcIixcIiksIHQgKz0gXCJ8b2I6XCIsIHQgKz0gZS5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBUT0RPKGIvMjkxODMxNjUpOiBNYWtlIHRoaXMgY29sbGlzaW9uIHJvYnVzdC5cbiAgICAgICAgICAgIHJldHVybiB0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpICsgdC5kaXI7XG4gICAgICAgIH0odCkpKS5qb2luKFwiLFwiKSwgU3QoZS5saW1pdCkgfHwgKHQgKz0gXCJ8bDpcIiwgdCArPSBlLmxpbWl0KSwgZS5zdGFydEF0ICYmICh0ICs9IFwifGxiOlwiLCBcbiAgICAgICAgdCArPSBlLnN0YXJ0QXQuaW5jbHVzaXZlID8gXCJiOlwiIDogXCJhOlwiLCB0ICs9IGUuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gTHQodCkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBlLmVuZEF0ICYmICh0ICs9IFwifHViOlwiLCB0ICs9IGUuZW5kQXQuaW5jbHVzaXZlID8gXCJhOlwiIDogXCJiOlwiLCB0ICs9IGUuZW5kQXQucG9zaXRpb24ubWFwKCh0ID0+IEx0KHQpKSkuam9pbihcIixcIikpLCBcbiAgICAgICAgZS5QID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIGUuUDtcbn1cblxuZnVuY3Rpb24gZGUodCkge1xuICAgIGxldCBlID0gdC5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoZSArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIFxuICAgIHQuZmlsdGVycy5sZW5ndGggPiAwICYmIChlICs9IGAsIGZpbHRlcnM6IFske3QuZmlsdGVycy5tYXAoKHQgPT4ge1xuICAgICAgICByZXR1cm4gYCR7KGUgPSB0KS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gJHtlLm9wfSAke0x0KGUudmFsdWUpfWA7XG4gICAgICAgIC8qKiBSZXR1cm5zIGEgZGVidWcgZGVzY3JpcHRpb24gZm9yIGBmaWx0ZXJgLiAqL1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyAoaS5lLiAnX19uYW1lX18nKS4gKi8gICAgfSkpLmpvaW4oXCIsIFwiKX1dYCksIFxuICAgIFN0KHQubGltaXQpIHx8IChlICs9IFwiLCBsaW1pdDogXCIgKyB0LmxpbWl0KSwgdC5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgb3JkZXJCeTogWyR7dC5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBgJHt0LmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAoJHt0LmRpcn0pYDtcbiAgICB9KHQpKSkuam9pbihcIiwgXCIpfV1gKSwgdC5zdGFydEF0ICYmIChlICs9IFwiLCBzdGFydEF0OiBcIiwgZSArPSB0LnN0YXJ0QXQuaW5jbHVzaXZlID8gXCJiOlwiIDogXCJhOlwiLCBcbiAgICBlICs9IHQuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gTHQodCkpKS5qb2luKFwiLFwiKSksIHQuZW5kQXQgJiYgKGUgKz0gXCIsIGVuZEF0OiBcIiwgXG4gICAgZSArPSB0LmVuZEF0LmluY2x1c2l2ZSA/IFwiYTpcIiA6IFwiYjpcIiwgZSArPSB0LmVuZEF0LnBvc2l0aW9uLm1hcCgodCA9PiBMdCh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgYFRhcmdldCgke2V9KWA7XG59XG5cbmZ1bmN0aW9uIF9lKHQsIGUpIHtcbiAgICBpZiAodC5saW1pdCAhPT0gZS5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmICh0Lm9yZGVyQnkubGVuZ3RoICE9PSBlLm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghdmUodC5vcmRlckJ5W25dLCBlLm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKHQuZmlsdGVycy5sZW5ndGggIT09IGUuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQuZmlsdGVycy5sZW5ndGg7IGkrKykgaWYgKG4gPSB0LmZpbHRlcnNbaV0sIHMgPSBlLmZpbHRlcnNbaV0sIFxuICAgIG4ub3AgIT09IHMub3AgfHwgIW4uZmllbGQuaXNFcXVhbChzLmZpZWxkKSB8fCAhT3Qobi52YWx1ZSwgcy52YWx1ZSkpIHJldHVybiAhMTtcbiAgICB2YXIgbiwgcztcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmICghIXQucGF0aC5pc0VxdWFsKGUucGF0aCkgJiYgKCEhRGUodC5zdGFydEF0LCBlLnN0YXJ0QXQpICYmIERlKHQuZW5kQXQsIGUuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIHdlKHQpIHtcbiAgICByZXR1cm4geHQuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBmaWVsZCBmaWx0ZXJzIHRoYXQgdGFyZ2V0IHRoZSBnaXZlbiBmaWVsZCBwYXRoLiAqLyBmdW5jdGlvbiBtZSh0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmlsdGVycy5maWx0ZXIoKHQgPT4gdCBpbnN0YW5jZW9mIGdlICYmIHQuZmllbGQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWVxuICogZmlsdGVycy4gUmV0dXJucyBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqLyBjbGFzcyBnZSBleHRlbmRzIGNsYXNzIHt9IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmllbGQgPSB0LCB0aGlzLm9wID0gZSwgdGhpcy52YWx1ZSA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBmaWx0ZXIgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGFyZ3VtZW50cy5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0LmlzS2V5RmllbGQoKSA/IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gZSA/IHRoaXMuVih0LCBlLCBuKSA6IG5ldyB5ZSh0LCBlLCBuKSA6IFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gZSA/IG5ldyBFZSh0LCBuKSA6IFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBBZSh0LCBuKSA6IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gbmV3IFJlKHQsIG4pIDogXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IGUgPyBuZXcgYmUodCwgbikgOiBuZXcgZ2UodCwgZSwgbik7XG4gICAgfVxuICAgIHN0YXRpYyBWKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBJTiAqLyA9PT0gZSA/IG5ldyBwZSh0LCBuKSA6IG5ldyBJZSh0LCBuKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIC8vIFR5cGVzIGRvIG5vdCBoYXZlIHRvIG1hdGNoIGluIE5PVF9FUVVBTCBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0aGlzLm9wID8gbnVsbCAhPT0gZSAmJiB0aGlzLnYoJHQoZSwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gZSAmJiBNdCh0aGlzLnZhbHVlKSA9PT0gTXQoZSkgJiYgdGhpcy52KCR0KGUsIHRoaXMudmFsdWUpKTtcbiAgICAgICAgLy8gT25seSBjb21wYXJlIHR5cGVzIHdpdGggbWF0Y2hpbmcgYmFja2VuZCBvcmRlciAoc3VjaCBhcyBkb3VibGUgYW5kIGludCkuXG4gICAgICAgIH1cbiAgICB2KHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPCAwO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0IDw9IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBFUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdDtcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gdDtcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID4gMDtcblxuICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA+PSAwO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgUygpIHtcbiAgICAgICAgcmV0dXJuIFsgXCI8XCIgLyogTEVTU19USEFOICovICwgXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLyAsIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLyAsIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXS5pbmRleE9mKHRoaXMub3ApID49IDA7XG4gICAgfVxufVxuXG5jbGFzcyB5ZSBleHRlbmRzIGdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCB0aGlzLmtleSA9IHh0LmZyb21OYW1lKG4ucmVmZXJlbmNlVmFsdWUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHh0LmNvbXBhcmF0b3IodC5rZXksIHRoaXMua2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMudihlKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBwZSBleHRlbmRzIGdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBUZShcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIG5vdCBwcmVzZW50IHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgSWUgZXh0ZW5kcyBnZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpLCB0aGlzLmtleXMgPSBUZShcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmtleXMuc29tZSgoZSA9PiBlLmlzRXF1YWwodC5rZXkpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBUZSh0LCBlKSB7XG4gICAgdmFyIG47XG4gICAgcmV0dXJuICgobnVsbCA9PT0gKG4gPSBlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmFsdWVzKSB8fCBbXSkubWFwKCh0ID0+IHh0LmZyb21OYW1lKHQucmVmZXJlbmNlVmFsdWUpKSk7XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zIG9wZXJhdG9yLiAqLyBjbGFzcyBFZSBleHRlbmRzIGdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIEt0KGUpICYmIEZ0KGUuYXJyYXlWYWx1ZSwgdGhpcy52YWx1ZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBJTiBvcGVyYXRvci4gKi8gY2xhc3MgQWUgZXh0ZW5kcyBnZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmIEZ0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBub3QtaW4gb3BlcmF0b3IuICovIGNsYXNzIFJlIGV4dGVuZHMgZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGlmIChGdCh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgIUZ0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgZSk7XG4gICAgfVxufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucy1hbnkgb3BlcmF0b3IuICovIGNsYXNzIGJlIGV4dGVuZHMgZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiAhKCFLdChlKSB8fCAhZS5hcnJheVZhbHVlLnZhbHVlcykgJiYgZS5hcnJheVZhbHVlLnZhbHVlcy5zb21lKCh0ID0+IEZ0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovIGNsYXNzIFBlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSB0LCB0aGlzLmluY2x1c2l2ZSA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIG9yZGVyaW5nIG9uIGEgZmllbGQsIGluIHNvbWUgRGlyZWN0aW9uLiBEaXJlY3Rpb24gZGVmYXVsdHMgdG8gQVNDRU5ESU5HLlxuICovIGNsYXNzIFZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8pIHtcbiAgICAgICAgdGhpcy5maWVsZCA9IHQsIHRoaXMuZGlyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHZlKHQsIGUpIHtcbiAgICByZXR1cm4gdC5kaXIgPT09IGUuZGlyICYmIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKTtcbn1cblxuZnVuY3Rpb24gU2UodCwgZSwgbikge1xuICAgIGxldCBzID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IGVbaV0sIG8gPSB0LnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAoci5maWVsZC5pc0tleUZpZWxkKCkpIHMgPSB4dC5jb21wYXJhdG9yKHh0LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgcyA9ICR0KG8sIG4uZGF0YS5maWVsZChyLmZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gPT09IHIuZGlyICYmIChzICo9IC0xKSwgMCAhPT0gcykgYnJlYWs7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGFmdGVyIGEgYm91bmQgdXNpbmcgdGhlIHByb3ZpZGVkIHNvcnRcbiAqIG9yZGVyLlxuICovIGZ1bmN0aW9uIERlKHQsIGUpIHtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIG51bGwgPT09IGU7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiAhMTtcbiAgICBpZiAodC5pbmNsdXNpdmUgIT09IGUuaW5jbHVzaXZlIHx8IHQucG9zaXRpb24ubGVuZ3RoICE9PSBlLnBvc2l0aW9uLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5wb3NpdGlvbi5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAoIU90KHQucG9zaXRpb25bbl0sIGUucG9zaXRpb25bbl0pKSByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldHVybiAhMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUXVlcnkgZW5jYXBzdWxhdGVzIGFsbCB0aGUgcXVlcnkgYXR0cmlidXRlcyB3ZSBzdXBwb3J0IGluIHRoZSBTREsuIEl0IGNhblxuICogYmUgcnVuIGFnYWluc3QgdGhlIExvY2FsU3RvcmUsIGFzIHdlbGwgYXMgYmUgY29udmVydGVkIHRvIGEgYFRhcmdldGAgdG9cbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi8gY2xhc3MgQ2Uge1xuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemVzIGEgUXVlcnkgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gICAgICogUGF0aCBtdXN0IGN1cnJlbnRseSBiZSBlbXB0eSBpZiB0aGlzIGlzIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gXCJGXCIgLyogRmlyc3QgKi8gLCBvID0gbnVsbCwgdSA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXRoID0gdCwgdGhpcy5jb2xsZWN0aW9uR3JvdXAgPSBlLCB0aGlzLmV4cGxpY2l0T3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIFxuICAgICAgICB0aGlzLmxpbWl0ID0gaSwgdGhpcy5saW1pdFR5cGUgPSByLCB0aGlzLnN0YXJ0QXQgPSBvLCB0aGlzLmVuZEF0ID0gdSwgdGhpcy5EID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5DID0gbnVsbCwgdGhpcy5zdGFydEF0LCB0aGlzLmVuZEF0O1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgaW5zdGFuY2Ugd2l0aCB0aGUgb3B0aW9ucyBwcm92aWRlZC4gKi8gZnVuY3Rpb24geGUodCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgIHJldHVybiBuZXcgQ2UodCwgZSwgbiwgcywgaSwgciwgbywgdSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGZvciBhIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIGF0IGBwYXRoYCAqLyBmdW5jdGlvbiBOZSh0KSB7XG4gICAgcmV0dXJuIG5ldyBDZSh0KTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gY29udmVydCBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkgaW50byBhIGNvbGxlY3Rpb24gcXVlcnkgYXQgYVxuICogc3BlY2lmaWMgcGF0aC4gVGhpcyBpcyB1c2VkIHdoZW4gZXhlY3V0aW5nIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcywgc2luY2VcbiAqIHdlIGhhdmUgdG8gc3BsaXQgdGhlIHF1ZXJ5IGludG8gYSBzZXQgb2YgY29sbGVjdGlvbiBxdWVyaWVzIGF0IG11bHRpcGxlXG4gKiBwYXRocy5cbiAqLyBmdW5jdGlvbiBrZSh0KSB7XG4gICAgcmV0dXJuICFTdCh0LmxpbWl0KSAmJiBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIE1lKHQpIHtcbiAgICByZXR1cm4gIVN0KHQubGltaXQpICYmIFwiTFwiIC8qIExhc3QgKi8gPT09IHQubGltaXRUeXBlO1xufVxuXG5mdW5jdGlvbiBPZSh0KSB7XG4gICAgcmV0dXJuIHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZCA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIEZlKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSBpZiAoZS5TKCkpIHJldHVybiBlLmZpZWxkO1xuICAgIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIE9wZXJhdG9ycyBhcmUgaW5jbHVkZWQgaW4gdGhlIHF1ZXJ5IGFuZFxuICogcmV0dXJucyB0aGUgZmlyc3Qgb25lIHRoYXQgaXMsIG9yIG51bGwgaWYgbm9uZSBhcmUuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiAkZSh0KSB7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltcGxpY2l0IG9yZGVyIGJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlciBieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLlxuICovIGZ1bmN0aW9uIEJlKHQpIHtcbiAgICBjb25zdCBlID0gRyh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS5EKSB7XG4gICAgICAgIGUuRCA9IFtdO1xuICAgICAgICBjb25zdCB0ID0gRmUoZSksIG4gPSBPZShlKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgbnVsbCA9PT0gbikgXG4gICAgICAgIC8vIEluIG9yZGVyIHRvIGltcGxpY2l0bHkgYWRkIGtleSBvcmRlcmluZywgd2UgbXVzdCBhbHNvIGFkZCB0aGVcbiAgICAgICAgLy8gaW5lcXVhbGl0eSBmaWx0ZXIgZmllbGQgZm9yIGl0IHRvIGJlIGEgdmFsaWQgcXVlcnkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGUgZGVmYXVsdCBpbmVxdWFsaXR5IGZpZWxkIGFuZCBrZXkgb3JkZXJpbmcgaXMgYXNjZW5kaW5nLlxuICAgICAgICB0LmlzS2V5RmllbGQoKSB8fCBlLkQucHVzaChuZXcgVmUodCkpLCBlLkQucHVzaChuZXcgVmUobXQua2V5RmllbGQoKSwgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8pKTsgZWxzZSB7XG4gICAgICAgICAgICBsZXQgdCA9ICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIGUuZXhwbGljaXRPcmRlckJ5KSBlLkQucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKHQgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyBlLmV4cGxpY2l0T3JkZXJCeVtlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcbiAgICAgICAgICAgICAgICBlLkQucHVzaChuZXcgVmUobXQua2V5RmllbGQoKSwgdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlLkQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0J3MgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBMZSh0KSB7XG4gICAgY29uc3QgZSA9IEcodCk7XG4gICAgaWYgKCFlLkMpIGlmIChcIkZcIiAvKiBGaXJzdCAqLyA9PT0gZS5saW1pdFR5cGUpIGUuQyA9IGxlKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIEJlKGUpLCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7IGVsc2Uge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIEJlKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gbi5kaXIgPyBcImFzY1wiIC8qIEFTQ0VORElORyAqLyA6IFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICB0LnB1c2gobmV3IFZlKG4uZmllbGQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmVuZEF0ID8gbmV3IFBlKGUuZW5kQXQucG9zaXRpb24sICFlLmVuZEF0LmluY2x1c2l2ZSkgOiBudWxsLCBzID0gZS5zdGFydEF0ID8gbmV3IFBlKGUuc3RhcnRBdC5wb3NpdGlvbiwgIWUuc3RhcnRBdC5pbmNsdXNpdmUpIDogbnVsbDtcbiAgICAgICAgLy8gTm93IHJldHVybiBhcyBhIExpbWl0VHlwZS5GaXJzdCBxdWVyeS5cbiAgICAgICAgZS5DID0gbGUoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgdCwgZS5maWx0ZXJzLCBlLmxpbWl0LCBuLCBzKTtcbiAgICB9XG4gICAgcmV0dXJuIGUuQztcbn1cblxuZnVuY3Rpb24gVWUodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgQ2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIGUsIG4sIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIHFlKHQsIGUpIHtcbiAgICByZXR1cm4gX2UoTGUodCksIExlKGUpKSAmJiB0LmxpbWl0VHlwZSA9PT0gZS5saW1pdFR5cGU7XG59XG5cbi8vIFRPRE8oYi8yOTE4MzE2NSk6IFRoaXMgaXMgdXNlZCB0byBnZXQgYSB1bmlxdWUgc3RyaW5nIGZyb20gYSBxdWVyeSB0bywgZm9yXG4vLyBleGFtcGxlLCB1c2UgYXMgYSBkaWN0aW9uYXJ5IGtleSwgYnV0IHRoZSBpbXBsZW1lbnRhdGlvbiBpcyBzdWJqZWN0IHRvXG4vLyBjb2xsaXNpb25zLiBNYWtlIGl0IGNvbGxpc2lvbi1mcmVlLlxuZnVuY3Rpb24gR2UodCkge1xuICAgIHJldHVybiBgJHtmZShMZSh0KSl9fGx0OiR7dC5saW1pdFR5cGV9YDtcbn1cblxuZnVuY3Rpb24gS2UodCkge1xuICAgIHJldHVybiBgUXVlcnkodGFyZ2V0PSR7ZGUoTGUodCkpfTsgbGltaXRUeXBlPSR7dC5saW1pdFR5cGV9KWA7XG59XG5cbi8qKiBSZXR1cm5zIHdoZXRoZXIgYGRvY2AgbWF0Y2hlcyB0aGUgY29uc3RyYWludHMgb2YgYHF1ZXJ5YC4gKi8gZnVuY3Rpb24gUWUodCwgZSkge1xuICAgIHJldHVybiBlLmlzRm91bmREb2N1bWVudCgpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LnBhdGg7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCA/IGUua2V5Lmhhc0NvbGxlY3Rpb25JZCh0LmNvbGxlY3Rpb25Hcm91cCkgJiYgdC5wYXRoLmlzUHJlZml4T2YobikgOiB4dC5pc0RvY3VtZW50S2V5KHQucGF0aCkgPyB0LnBhdGguaXNFcXVhbChuKSA6IHQucGF0aC5pc0ltbWVkaWF0ZVBhcmVudE9mKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEEgZG9jdW1lbnQgbXVzdCBoYXZlIGEgdmFsdWUgZm9yIGV2ZXJ5IG9yZGVyaW5nIGNsYXVzZSBpbiBvcmRlciB0byBzaG93IHVwXG4gKiBpbiB0aGUgcmVzdWx0cy5cbiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5leHBsaWNpdE9yZGVyQnkpIFxuICAgICAgICAvLyBvcmRlciBieSBrZXkgYWx3YXlzIG1hdGNoZXNcbiAgICAgICAgaWYgKCFuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiBudWxsID09PSBlLmRhdGEuZmllbGQobi5maWVsZCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH0odCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoIW4ubWF0Y2hlcyhlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAodC5zdGFydEF0ICYmICFcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IFNlKHQsIGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIHQuaW5jbHVzaXZlID8gcyA8PSAwIDogcyA8IDA7XG4gICAgICAgIH0odC5zdGFydEF0LCBCZSh0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHQuZW5kQXQgJiYgIWZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBTZSh0LCBlLCBuKTtcbiAgICAgICAgICAgIHJldHVybiB0LmluY2x1c2l2ZSA/IHMgPj0gMCA6IHMgPiAwO1xuICAgICAgICB9KHQuZW5kQXQsIEJlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCB0aGF0IHRoaXMgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgU0RLIHRvIGZhY2lsaXRhdGUgbXVsdGktdGFiXG4gKiBzeW5jaHJvbml6YXRpb24gZm9yIHF1ZXJ5IHJlc3VsdHMuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBqZSh0KSB7XG4gICAgcmV0dXJuIHQuY29sbGVjdGlvbkdyb3VwIHx8ICh0LnBhdGgubGVuZ3RoICUgMiA9PSAxID8gdC5wYXRoLmxhc3RTZWdtZW50KCkgOiB0LnBhdGguZ2V0KHQucGF0aC5sZW5ndGggLSAyKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wYXJhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcGFyZSB0d28gZG9jdW1lbnRzXG4gKiBiYXNlZCBvbiB0aGUgUXVlcnkncyBvcmRlcmluZyBjb25zdHJhaW50LlxuICovIGZ1bmN0aW9uIFdlKHQpIHtcbiAgICByZXR1cm4gKGUsIG4pID0+IHtcbiAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIEJlKHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gemUoaSwgZSwgbik7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBzID0gcyB8fCBpLmZpZWxkLmlzS2V5RmllbGQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiB6ZSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuZmllbGQuaXNLZXlGaWVsZCgpID8geHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKHQpLCBpID0gbi5kYXRhLmZpZWxkKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gcyAmJiBudWxsICE9PSBpID8gJHQocywgaSkgOiBMKCk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBUaGUgaW5pdGlhbCBtdXRhdGlvbiBiYXRjaCBpZCBmb3IgZWFjaCBpbmRleC4gR2V0cyB1cGRhdGVkIGR1cmluZyBpbmRleFxuICogYmFja2ZpbGwuXG4gKi8gKHQuZmllbGQsIGUsIG4pO1xuICAgIHN3aXRjaCAodC5kaXIpIHtcbiAgICAgIGNhc2UgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gcztcblxuICAgICAgY2FzZSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIEhlKHQsIGUpIHtcbiAgICBpZiAodC5OKSB7XG4gICAgICAgIGlmIChpc05hTihlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIk5hTlwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAxIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIkluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IC0xIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIi1JbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBEdChlKSA/IFwiLTBcIiA6IGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIEplKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IFwiXCIgKyB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiBJbnRlZ2VyVmFsdWUgaWYgaXQgY2FuIHNhZmVseSByZXByZXNlbnQgdGhlIHZhbHVlLFxuICogb3RoZXJ3aXNlIGEgRG91YmxlVmFsdWUgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gWWUodCwgZSkge1xuICAgIHJldHVybiBDdChlKSA/IEplKGUpIDogSGUodCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgWGUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgc3RydWN0dXJhbCB0eXBlIG9mIGBUcmFuc2Zvcm1PcGVyYXRpb25gIGlzIHVuaXF1ZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTQ1MVxuICAgICAgICB0aGlzLl8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm0gcmVzdWx0IGFnYWluc3QgdGhlIHByb3ZpZGVkIGBwcmV2aW91c1ZhbHVlYCxcbiAqIG9wdGlvbmFsbHkgdXNpbmcgdGhlIHByb3ZpZGVkIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIFplKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG5uID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdC5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IHQubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGUgJiYgKG4uZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXyA9IGUpLCB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgZSkgOiB0IGluc3RhbmNlb2Ygc24gPyBybih0LCBlKSA6IHQgaW5zdGFuY2VvZiBvbiA/IHVuKHQsIGUpIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0gZW4odCwgZSksIHMgPSBjbihuKSArIGNuKHQuayk7XG4gICAgICAgIHJldHVybiBHdChuKSAmJiBHdCh0LmspID8gSmUocykgOiBIZSh0Lk0sIHMpO1xuICAgIH0odCwgZSk7XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgYSBmaW5hbCB0cmFuc2Zvcm0gcmVzdWx0IGFmdGVyIHRoZSB0cmFuc2Zvcm0gaGFzIGJlZW4gYWNrbm93bGVkZ2VkXG4gKiBieSB0aGUgc2VydmVyLCBwb3RlbnRpYWxseSB1c2luZyB0aGUgc2VydmVyLXByb3ZpZGVkIHRyYW5zZm9ybVJlc3VsdC5cbiAqLyBmdW5jdGlvbiB0bih0LCBlLCBuKSB7XG4gICAgLy8gVGhlIHNlcnZlciBqdXN0IHNlbmRzIG51bGwgYXMgdGhlIHRyYW5zZm9ybSByZXN1bHQgZm9yIGFycmF5IG9wZXJhdGlvbnMsXG4gICAgLy8gc28gd2UgaGF2ZSB0byBjYWxjdWxhdGUgYSByZXN1bHQgdGhlIHNhbWUgYXMgd2UgZG8gZm9yIGxvY2FsXG4gICAgLy8gYXBwbGljYXRpb25zLlxuICAgIHJldHVybiB0IGluc3RhbmNlb2Ygc24gPyBybih0LCBlKSA6IHQgaW5zdGFuY2VvZiBvbiA/IHVuKHQsIGUpIDogbjtcbn1cblxuLyoqXG4gKiBJZiB0aGlzIHRyYW5zZm9ybSBvcGVyYXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG9cbiAqIHBlcnNpc3QgZm9yIHRoaXMgdHJhbnNmb3JtLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSB0cmFuc2Zvcm1cbiAqIG9wZXJhdGlvbiBpcyBhbHdheXMgYXBwbGllZCB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzXG4gKiBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBCYXNlIHZhbHVlcyBwcm92aWRlIGNvbnNpc3RlbnQgYmVoYXZpb3IgZm9yIG5vbi1pZGVtcG90ZW50IHRyYW5zZm9ybXMgYW5kXG4gKiBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWUgbGF0ZW5jeS1jb21wZW5zYXRlZCB2YWx1ZSBldmVuIGlmIHRoZSBiYWNrZW5kXG4gKiBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZSB0cmFuc2Zvcm0gb3BlcmF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLCBhcyB0aGV5IGNhbiBiZSByZS1wbGF5ZWQgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXNcbiAqIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgdHJhbnNmb3Jtcy5cbiAqLyBmdW5jdGlvbiBlbih0LCBlKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBhbiA/IEd0KG4gPSBlKSB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQ7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBlaXRoZXIgYW4gSW50ZWdlclZhbHVlIG9yIGEgRG91YmxlVmFsdWUuICovIChuKSA/IGUgOiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogMFxuICAgIH0gOiBudWxsO1xuICAgIHZhciBuO1xufVxuXG4vKiogVHJhbnNmb3JtcyBhIHZhbHVlIGludG8gYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcC4gKi9cbmNsYXNzIG5uIGV4dGVuZHMgWGUge31cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgdW5pb24gb3BlcmF0aW9uLiAqLyBjbGFzcyBzbiBleHRlbmRzIFhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcm4odCwgZSkge1xuICAgIGNvbnN0IG4gPSBobihlKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5lbGVtZW50cykgbi5zb21lKCh0ID0+IE90KHQsIGUpKSkgfHwgbi5wdXNoKGUpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuLyoqIFRyYW5zZm9ybXMgYW4gYXJyYXkgdmFsdWUgdmlhIGEgcmVtb3ZlIG9wZXJhdGlvbi4gKi8gY2xhc3Mgb24gZXh0ZW5kcyBYZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVuKHQsIGUpIHtcbiAgICBsZXQgbiA9IGhuKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuID0gbi5maWx0ZXIoKHQgPT4gIU90KHQsIGUpKSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIGJhY2tlbmQgc2VtYW50aWNzIGZvciBsb2NhbGx5IGNvbXB1dGVkIE5VTUVSSUNfQUREIChpbmNyZW1lbnQpXG4gKiB0cmFuc2Zvcm1zLiBDb252ZXJ0cyBhbGwgZmllbGQgdmFsdWVzIHRvIGludGVnZXJzIG9yIGRvdWJsZXMsIGJ1dCB1bmxpa2UgdGhlXG4gKiBiYWNrZW5kIGRvZXMgbm90IGNhcCBpbnRlZ2VyIHZhbHVlcyBhdCAyXjYzLiBJbnN0ZWFkLCBKYXZhU2NyaXB0IG51bWJlclxuICogYXJpdGhtZXRpYyBpcyB1c2VkIGFuZCBwcmVjaXNpb24gbG9zcyBjYW4gb2NjdXIgZm9yIHZhbHVlcyBncmVhdGVyIHRoYW4gMl41My5cbiAqLyBjbGFzcyBhbiBleHRlbmRzIFhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuTSA9IHQsIHRoaXMuayA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjbih0KSB7XG4gICAgcmV0dXJuIEV0KHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBobih0KSB7XG4gICAgcmV0dXJuIEt0KHQpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMgPyB0LmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyBsbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy50cmFuc2Zvcm0gPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZm4odCwgZSkge1xuICAgIHJldHVybiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHNuICYmIGUgaW5zdGFuY2VvZiBzbiB8fCB0IGluc3RhbmNlb2Ygb24gJiYgZSBpbnN0YW5jZW9mIG9uID8gb3QodC5lbGVtZW50cywgZS5lbGVtZW50cywgT3QpIDogdCBpbnN0YW5jZW9mIGFuICYmIGUgaW5zdGFuY2VvZiBhbiA/IE90KHQuaywgZS5rKSA6IHQgaW5zdGFuY2VvZiBubiAmJiBlIGluc3RhbmNlb2Ygbm47XG4gICAgfSh0LnRyYW5zZm9ybSwgZS50cmFuc2Zvcm0pO1xufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBzdWNjZXNzZnVsbHkgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byB0aGUgYmFja2VuZC4gKi9cbmNsYXNzIGRuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgdmVyc2lvbiBhdCB3aGljaCB0aGUgbXV0YXRpb24gd2FzIGNvbW1pdHRlZDpcbiAgICAgKlxuICAgICAqIC0gRm9yIG1vc3Qgb3BlcmF0aW9ucywgdGhpcyBpcyB0aGUgdXBkYXRlVGltZSBpbiB0aGUgV3JpdGVSZXN1bHQuXG4gICAgICogLSBGb3IgZGVsZXRlcywgdGhlIGNvbW1pdFRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgKGJlY2F1c2UgZGVsZXRlcyBhcmVcbiAgICAgKiAgIG5vdCBzdG9yZWQgYW5kIGhhdmUgbm8gdXBkYXRlVGltZSkuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhlc2UgdmVyc2lvbnMgY2FuIGJlIGRpZmZlcmVudDogTm8tb3Agd3JpdGVzIHdpbGwgbm90IGNoYW5nZVxuICAgICAqIHRoZSB1cGRhdGVUaW1lIGV2ZW4gdGhvdWdoIHRoZSBjb21taXRUaW1lIGFkdmFuY2VzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSByZXN1bHRpbmcgZmllbGRzIHJldHVybmVkIGZyb20gdGhlIGJhY2tlbmQgYWZ0ZXIgYSBtdXRhdGlvblxuICAgICAqIGNvbnRhaW5pbmcgZmllbGQgdHJhbnNmb3JtcyBoYXMgYmVlbiBjb21taXR0ZWQuIENvbnRhaW5zIG9uZSBGaWVsZFZhbHVlXG4gICAgICogZm9yIGVhY2ggRmllbGRUcmFuc2Zvcm0gdGhhdCB3YXMgaW4gdGhlIG11dGF0aW9uLlxuICAgICAqXG4gICAgICogV2lsbCBiZSBlbXB0eSBpZiB0aGUgbXV0YXRpb24gZGlkIG5vdCBjb250YWluIGFueSBmaWVsZCB0cmFuc2Zvcm1zLlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy52ZXJzaW9uID0gdCwgdGhpcy50cmFuc2Zvcm1SZXN1bHRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogRW5jb2RlcyBhIHByZWNvbmRpdGlvbiBmb3IgYSBtdXRhdGlvbi4gVGhpcyBmb2xsb3dzIHRoZSBtb2RlbCB0aGF0IHRoZVxuICogYmFja2VuZCBhY2NlcHRzIHdpdGggdGhlIHNwZWNpYWwgY2FzZSBvZiBhbiBleHBsaWNpdCBcImVtcHR5XCIgcHJlY29uZGl0aW9uXG4gKiAobWVhbmluZyBubyBwcmVjb25kaXRpb24pLlxuICovIGNsYXNzIF9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGltZSA9IHQsIHRoaXMuZXhpc3RzID0gZTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZW1wdHkgUHJlY29uZGl0aW9uLiAqLyAgICBzdGF0aWMgbm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfbjtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIHdpdGggYW4gZXhpc3RzIGZsYWcuICovICAgIHN0YXRpYyBleGlzdHModCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IFByZWNvbmRpdGlvbiBiYXNlZCBvbiBhIHZlcnNpb24gYSBkb2N1bWVudCBleGlzdHMgYXQuICovICAgIHN0YXRpYyB1cGRhdGVUaW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfbih0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciB0aGlzIFByZWNvbmRpdGlvbiBpcyBlbXB0eS4gKi8gICAgZ2V0IGlzTm9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdGhpcy51cGRhdGVUaW1lICYmIHZvaWQgMCA9PT0gdGhpcy5leGlzdHM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leGlzdHMgPT09IHQuZXhpc3RzICYmICh0aGlzLnVwZGF0ZVRpbWUgPyAhIXQudXBkYXRlVGltZSAmJiB0aGlzLnVwZGF0ZVRpbWUuaXNFcXVhbCh0LnVwZGF0ZVRpbWUpIDogIXQudXBkYXRlVGltZSk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBwcmVjb25kaXRpb25zIGlzIHZhbGlkIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovIGZ1bmN0aW9uIHduKHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnVwZGF0ZVRpbWUgPyBlLmlzRm91bmREb2N1bWVudCgpICYmIGUudmVyc2lvbi5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiB2b2lkIDAgPT09IHQuZXhpc3RzIHx8IHQuZXhpc3RzID09PSBlLmlzRm91bmREb2N1bWVudCgpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gZGVzY3JpYmVzIGEgc2VsZi1jb250YWluZWQgY2hhbmdlIHRvIGEgZG9jdW1lbnQuIE11dGF0aW9ucyBjYW5cbiAqIGNyZWF0ZSwgcmVwbGFjZSwgZGVsZXRlLCBhbmQgdXBkYXRlIHN1YnNldHMgb2YgZG9jdW1lbnRzLlxuICpcbiAqIE11dGF0aW9ucyBub3Qgb25seSBhY3Qgb24gdGhlIHZhbHVlIG9mIHRoZSBkb2N1bWVudCBidXQgYWxzbyBpdHMgdmVyc2lvbi5cbiAqXG4gKiBGb3IgbG9jYWwgbXV0YXRpb25zIChtdXRhdGlvbnMgdGhhdCBoYXZlbid0IGJlZW4gY29tbWl0dGVkIHlldCksIHdlIHByZXNlcnZlXG4gKiB0aGUgZXhpc3RpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEZvciBEZWxldGUgbXV0YXRpb25zLCB3ZVxuICogcmVzZXQgdGhlIHZlcnNpb24gdG8gMC5cbiAqXG4gKiBIZXJlJ3MgdGhlIGV4cGVjdGVkIHRyYW5zaXRpb24gdGFibGUuXG4gKlxuICogTVVUQVRJT04gICAgICAgICAgIEFQUExJRUQgVE8gICAgICAgICAgICBSRVNVTFRTIElOXG4gKlxuICogU2V0TXV0YXRpb24gICAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFNldE11dGF0aW9uICAgICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgRG9jdW1lbnQodjApXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIERvY3VtZW50KHYwKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIERvY3VtZW50KHYzKSAgICAgICAgICBEb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBOb0RvY3VtZW50KHYzKSAgICAgICAgTm9Eb2N1bWVudCh2MylcbiAqIFBhdGNoTXV0YXRpb24gICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgVW5rbm93bkRvY3VtZW50KHYzKVxuICogRGVsZXRlTXV0YXRpb24gICAgIERvY3VtZW50KHYzKSAgICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYwKVxuICogRGVsZXRlTXV0YXRpb24gICAgIEludmFsaWREb2N1bWVudCh2MCkgICBOb0RvY3VtZW50KHYwKVxuICpcbiAqIEZvciBhY2tub3dsZWRnZWQgbXV0YXRpb25zLCB3ZSB1c2UgdGhlIHVwZGF0ZVRpbWUgb2YgdGhlIFdyaXRlUmVzcG9uc2UgYXNcbiAqIHRoZSByZXN1bHRpbmcgdmVyc2lvbiBmb3IgU2V0IGFuZCBQYXRjaCBtdXRhdGlvbnMuIEFzIGRlbGV0ZXMgaGF2ZSBub1xuICogZXhwbGljaXQgdXBkYXRlIHRpbWUsIHdlIHVzZSB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBmb3JcbiAqIERlbGV0ZSBtdXRhdGlvbnMuXG4gKlxuICogSWYgYSBtdXRhdGlvbiBpcyBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQgYnV0IGZhaWxzIHRoZSBwcmVjb25kaXRpb24gY2hlY2tcbiAqIGxvY2FsbHksIHdlIHRyYW5zaXRpb24gdG8gYW4gYFVua25vd25Eb2N1bWVudGAgYW5kIHJlbHkgb24gV2F0Y2ggdG8gc2VuZCB1c1xuICogdGhlIHVwZGF0ZWQgdmVyc2lvbi5cbiAqXG4gKiBGaWVsZCB0cmFuc2Zvcm1zIGFyZSB1c2VkIG9ubHkgd2l0aCBQYXRjaCBhbmQgU2V0IE11dGF0aW9ucy4gV2UgdXNlIHRoZVxuICogYHVwZGF0ZVRyYW5zZm9ybXNgIG1lc3NhZ2UgdG8gc3RvcmUgdHJhbnNmb3JtcywgcmF0aGVyIHRoYW4gdGhlIGB0cmFuc2Zvcm1zYHNcbiAqIG1lc3NhZ2VzLlxuICpcbiAqICMjIFN1YmNsYXNzaW5nIE5vdGVzXG4gKlxuICogRXZlcnkgdHlwZSBvZiBtdXRhdGlvbiBuZWVkcyB0byBpbXBsZW1lbnQgaXRzIG93biBhcHBseVRvUmVtb3RlRG9jdW1lbnQoKSBhbmRcbiAqIGFwcGx5VG9Mb2NhbFZpZXcoKSB0byBpbXBsZW1lbnQgdGhlIGFjdHVhbCBiZWhhdmlvciBvZiBhcHBseWluZyB0aGUgbXV0YXRpb25cbiAqIHRvIHNvbWUgc291cmNlIGRvY3VtZW50IChzZWUgYHNldE11dGF0aW9uQXBwbHlUb1JlbW90ZURvY3VtZW50KClgIGZvciBhblxuICogZXhhbXBsZSkuXG4gKi8gY2xhc3MgbW4ge31cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nIGFcbiAqIG5ldyByZW1vdGUgZG9jdW1lbnQuIElmIHRoZSBpbnB1dCBkb2N1bWVudCBkb2Vzbid0IG1hdGNoIHRoZSBleHBlY3RlZCBzdGF0ZVxuICogKGUuZy4gaXQgaXMgaW52YWxpZCBvciBvdXRkYXRlZCksIHRoZSBkb2N1bWVudCB0eXBlIG1heSB0cmFuc2l0aW9uIHRvXG4gKiB1bmtub3duLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIG11dGF0aW9uUmVzdWx0IC0gVGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgbXV0YXRpb24gZnJvbSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBnbih0LCBlLCBuKSB7XG4gICAgdCBpbnN0YW5jZW9mIEVuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2Ugc2V0TXV0YXRpb25BcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGFcbiAgICAgICAgLy8gcmVtb3RlIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG11c3QgaGF2ZSBoZWxkLlxuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gYm4odC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyk7XG4gICAgICAgIHMuc2V0QWxsKGkpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBzKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogdCBpbnN0YW5jZW9mIEFuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIXduKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFNpbmNlIHRoZSBtdXRhdGlvbiB3YXMgbm90IHJlamVjdGVkLCB3ZSBrbm93IHRoYXQgdGhlIHByZWNvbmRpdGlvblxuICAgICAgICAvLyBtYXRjaGVkIG9uIHRoZSBiYWNrZW5kLiBXZSB0aGVyZWZvcmUgbXVzdCBub3QgaGF2ZSB0aGUgZXhwZWN0ZWQgdmVyc2lvblxuICAgICAgICAvLyBvZiB0aGUgZG9jdW1lbnQgaW4gb3VyIGNhY2hlIGFuZCBjb252ZXJ0IHRvIGFuIFVua25vd25Eb2N1bWVudCB3aXRoIGFcbiAgICAgICAgLy8ga25vd24gdXBkYXRlVGltZS5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5jb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQobi52ZXJzaW9uKTtcbiAgICAgICAgY29uc3QgcyA9IGJuKHQuZmllbGRUcmFuc2Zvcm1zLCBlLCBuLnRyYW5zZm9ybVJlc3VsdHMpLCBpID0gZS5kYXRhO1xuICAgICAgICBpLnNldEFsbChSbih0KSksIGkuc2V0QWxsKHMpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQobi52ZXJzaW9uLCBpKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAvLyBVbmxpa2UgYXBwbHlUb0xvY2FsVmlldywgaWYgd2UncmUgYXBwbHlpbmcgYSBtdXRhdGlvbiB0byBhIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudCB0aGUgc2VydmVyIGhhcyBhY2NlcHRlZCB0aGUgbXV0YXRpb24gc28gdGhlIHByZWNvbmRpdGlvbiBtdXN0XG4gICAgICAgIC8vIGhhdmUgaGVsZC5cbiAgICAgICAgZS5jb252ZXJ0VG9Ob0RvY3VtZW50KG4udmVyc2lvbikuc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCk7XG4gICAgfSgwLCBlLCBuKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoaXMgbXV0YXRpb24gdG8gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB0aGUgcHVycG9zZXMgb2YgY29tcHV0aW5nXG4gKiB0aGUgbmV3IGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlXG4gKiBleHBlY3RlZCBzdGF0ZSwgdGhlIGRvY3VtZW50IGlzIG5vdCBtb2RpZmllZC5cbiAqXG4gKiBAcGFyYW0gbXV0YXRpb24gLSBUaGUgbXV0YXRpb24gdG8gYXBwbHkuXG4gKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gbXV0YXRlLiBUaGUgaW5wdXQgZG9jdW1lbnQgY2FuIGJlIGFuXG4gKiAgICAgaW52YWxpZCBkb2N1bWVudCBpZiB0aGUgY2xpZW50IGhhcyBubyBrbm93bGVkZ2Ugb2YgdGhlIHByZS1tdXRhdGlvbiBzdGF0ZVxuICogICAgIG9mIHRoZSBkb2N1bWVudC5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKi8gZnVuY3Rpb24geW4odCwgZSwgbikge1xuICAgIHQgaW5zdGFuY2VvZiBFbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF3bih0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZS5jbG9uZSgpLCBpID0gUG4odC5maWVsZFRyYW5zZm9ybXMsIG4sIGUpO1xuICAgICAgICBzLnNldEFsbChpKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KFRuKGUpLCBzKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCBtb2RpZmllcyBmaWVsZHMgb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIGdpdmVuIHZhbHVlcy4gVGhlIHZhbHVlcyBhcmUgYXBwbGllZCB0aHJvdWdoIGEgZmllbGQgbWFzazpcbiAqXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gYm90aCB0aGUgbWFzayBhbmQgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIHVwZGF0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gbmVpdGhlciB0aGUgbWFzayBub3IgdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmdcbiAqICAgIGZpZWxkIGlzIHVubW9kaWZpZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgaW4gdGhlIG1hc2sgYnV0IG5vdCBpbiB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgZGVsZXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBub3QgaW4gdGhlIG1hc2sgYnV0IGlzIGluIHRoZSB2YWx1ZXMsIHRoZSB2YWx1ZXMgbWFwIGlzXG4gKiAgICBpZ25vcmVkLlxuICovICh0LCBlLCBuKSA6IHQgaW5zdGFuY2VvZiBBbiA/IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF3bih0LnByZWNvbmRpdGlvbiwgZSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IFBuKHQuZmllbGRUcmFuc2Zvcm1zLCBuLCBlKSwgaSA9IGUuZGF0YTtcbiAgICAgICAgaS5zZXRBbGwoUm4odCkpLCBpLnNldEFsbChzKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KFRuKGUpLCBpKS5zZXRIYXNMb2NhbE11dGF0aW9ucygpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKHQsIGUsIG4pIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICB3bih0LnByZWNvbmRpdGlvbiwgZSkgJiYgXG4gICAgICAgIC8vIFdlIGRvbid0IGNhbGwgYHNldEhhc0xvY2FsTXV0YXRpb25zKClgIHNpbmNlIHdlIHdhbnQgdG8gYmUgYmFja3dhcmRzXG4gICAgICAgIC8vIGNvbXBhdGlibGUgd2l0aCB0aGUgZXhpc3RpbmcgU0RLIGJlaGF2aW9yLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQoY3QubWluKCkpO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKHQsIGUpO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBwbih0LCBlKSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgcyBvZiB0LmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGQpLCBpID0gZW4ocy50cmFuc2Zvcm0sIHQgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PSBuICYmIChuID0gWHQuZW1wdHkoKSksIG4uc2V0KHMuZmllbGQsIGkpKTtcbiAgICB9XG4gICAgcmV0dXJuIG4gfHwgbnVsbDtcbn1cblxuZnVuY3Rpb24gSW4odCwgZSkge1xuICAgIHJldHVybiB0LnR5cGUgPT09IGUudHlwZSAmJiAoISF0LmtleS5pc0VxdWFsKGUua2V5KSAmJiAoISF0LnByZWNvbmRpdGlvbi5pc0VxdWFsKGUucHJlY29uZGl0aW9uKSAmJiAoISFmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgPT09IHQgJiYgdm9pZCAwID09PSBlIHx8ICEoIXQgfHwgIWUpICYmIG90KHQsIGUsICgodCwgZSkgPT4gZm4odCwgZSkpKTtcbiAgICB9KHQuZmllbGRUcmFuc2Zvcm1zLCBlLmZpZWxkVHJhbnNmb3JtcykgJiYgKDAgLyogU2V0ICovID09PSB0LnR5cGUgPyB0LnZhbHVlLmlzRXF1YWwoZS52YWx1ZSkgOiAxIC8qIFBhdGNoICovICE9PSB0LnR5cGUgfHwgdC5kYXRhLmlzRXF1YWwoZS5kYXRhKSAmJiB0LmZpZWxkTWFzay5pc0VxdWFsKGUuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmVyc2lvbiBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudCBmb3IgdXNlIGFzIHRoZSByZXN1bHQgb2YgYVxuICogbXV0YXRpb24uIE11dGF0aW9ucyBhcmUgZGVmaW5lZCB0byByZXR1cm4gdGhlIHZlcnNpb24gb2YgdGhlIGJhc2UgZG9jdW1lbnRcbiAqIG9ubHkgaWYgaXQgaXMgYW4gZXhpc3RpbmcgZG9jdW1lbnQuIERlbGV0ZWQgYW5kIHVua25vd24gZG9jdW1lbnRzIGhhdmUgYVxuICogcG9zdC1tdXRhdGlvbiB2ZXJzaW9uIG9mIFNuYXBzaG90VmVyc2lvbi5taW4oKS5cbiAqLyBmdW5jdGlvbiBUbih0KSB7XG4gICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgPyB0LnZlcnNpb24gOiBjdC5taW4oKTtcbn1cblxuLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgY3JlYXRlcyBvciByZXBsYWNlcyB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogb2JqZWN0IHZhbHVlIGNvbnRlbnRzLlxuICovIGNsYXNzIEVuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMgPSBbXSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLnByZWNvbmRpdGlvbiA9IG4sIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gcywgXG4gICAgICAgIHRoaXMudHlwZSA9IDAgLyogU2V0ICovO1xuICAgIH1cbn1cblxuY2xhc3MgQW4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5kYXRhID0gZSwgdGhpcy5maWVsZE1hc2sgPSBuLCB0aGlzLnByZWNvbmRpdGlvbiA9IHMsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IGksIHRoaXMudHlwZSA9IDEgLyogUGF0Y2ggKi87XG4gICAgfVxufVxuXG5mdW5jdGlvbiBSbih0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgcmV0dXJuIHQuZmllbGRNYXNrLmZpZWxkcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgaWYgKCFuLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuZGF0YS5maWVsZChuKTtcbiAgICAgICAgICAgIGUuc2V0KG4sIHMpO1xuICAgICAgICB9XG4gICAgfSkpLCBlO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIGFmdGVyIGEgbXV0YXRpb25cbiAqIGNvbnRhaW5pbmcgdHJhbnNmb3JtcyBoYXMgYmVlbiBhY2tub3dsZWRnZWQgYnkgdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcGFyYW0gc2VydmVyVHJhbnNmb3JtUmVzdWx0cyAtIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyByZWNlaXZlZCBieSB0aGUgc2VydmVyLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gYm4odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIFUodC5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IHRbaV0sIG8gPSByLnRyYW5zZm9ybSwgdSA9IGUuZGF0YS5maWVsZChyLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoci5maWVsZCwgdG4obywgdSwgbltpXSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSB3aGVuIGFwcGx5aW5nIGFcbiAqIHRyYW5zZm9ybSBsb2NhbGx5LlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIGxvY2FsIHRpbWUgb2YgdGhlIG11dGF0aW9uICh1c2VkIHRvXG4gKiAgICAgZ2VuZXJhdGUgU2VydmVyVGltZXN0YW1wVmFsdWVzKS5cbiAqIEBwYXJhbSBtdXRhYmxlRG9jdW1lbnQgLSBUaGUgY3VycmVudCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQgYWZ0ZXIgYXBwbHlpbmcgYWxsXG4gKiAgICAgcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHJldHVybnMgVGhlIHRyYW5zZm9ybSByZXN1bHRzIGxpc3QuXG4gKi8gZnVuY3Rpb24gUG4odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgTWFwO1xuICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLnRyYW5zZm9ybSwgciA9IG4uZGF0YS5maWVsZChpLmZpZWxkKTtcbiAgICAgICAgcy5zZXQoaS5maWVsZCwgWmUodCwgciwgZSkpO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqIEEgbXV0YXRpb24gdGhhdCBkZWxldGVzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5LiAqLyBjbGFzcyBWbiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAyIC8qIERlbGV0ZSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG5jbGFzcyB2biBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy5wcmVjb25kaXRpb24gPSBlLCB0aGlzLnR5cGUgPSAzIC8qIFZlcmlmeSAqLyAsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBTbiB7XG4gICAgLy8gVE9ETyhiLzMzMDc4MTYzKToganVzdCB1c2Ugc2ltcGxlc3QgZm9ybSBvZiBleGlzdGVuY2UgZmlsdGVyIGZvciBub3dcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY291bnQgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRXJyb3IgQ29kZXMgZGVzY3JpYmluZyB0aGUgZGlmZmVyZW50IHdheXMgR1JQQyBjYW4gZmFpbC4gVGhlc2UgYXJlIGNvcGllZFxuICogZGlyZWN0bHkgZnJvbSBHUlBDJ3Mgc291cmNlcyBoZXJlOlxuICpcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gKlxuICogSW1wb3J0YW50ISBUaGUgbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgbWF0dGVyIGJlY2F1c2UgdGhlIHN0cmluZyBmb3Jtc1xuICogYXJlIHVzZWQgZm9yIHJldmVyc2UgbG9va3VwcyBmcm9tIHRoZSB3ZWJjaGFubmVsIHN0cmVhbS4gRG8gTk9UIGNoYW5nZSB0aGVcbiAqIG5hbWVzIG9mIHRoZXNlIGlkZW50aWZpZXJzIG9yIGNoYW5nZSB0aGlzIGludG8gYSBjb25zdCBlbnVtLlxuICovIHZhciBEbiwgQ247XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB3aGV0aGVyIGFuIGVycm9yIGNvZGUgcmVwcmVzZW50cyBhIHBlcm1hbmVudCBlcnJvciB3aGVuIHJlY2VpdmVkXG4gKiBpbiByZXNwb25zZSB0byBhIG5vbi13cml0ZSBvcGVyYXRpb24uXG4gKlxuICogU2VlIGlzUGVybWFuZW50V3JpdGVFcnJvciBmb3IgY2xhc3NpZnlpbmcgd3JpdGUgZXJyb3JzLlxuICovXG5mdW5jdGlvbiB4bih0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuXG4gICAgICBjYXNlIEsuQ0FOQ0VMTEVEOlxuICAgICAgY2FzZSBLLlVOS05PV046XG4gICAgICBjYXNlIEsuREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICBjYXNlIEsuUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgY2FzZSBLLklOVEVSTkFMOlxuICAgICAgY2FzZSBLLlVOQVZBSUxBQkxFOlxuIC8vIFVuYXV0aGVudGljYXRlZCBtZWFucyBzb21ldGhpbmcgd2VudCB3cm9uZyB3aXRoIG91ciB0b2tlbiBhbmQgd2UgbmVlZFxuICAgICAgICAvLyB0byByZXRyeSB3aXRoIG5ldyBjcmVkZW50aWFscyB3aGljaCB3aWxsIGhhcHBlbiBhdXRvbWF0aWNhbGx5LlxuICAgICAgICAgICAgICBjYXNlIEsuVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGNhc2UgSy5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgY2FzZSBLLk5PVF9GT1VORDpcbiAgICAgIGNhc2UgSy5BTFJFQURZX0VYSVNUUzpcbiAgICAgIGNhc2UgSy5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgIGNhc2UgSy5GQUlMRURfUFJFQ09ORElUSU9OOlxuIC8vIEFib3J0ZWQgbWlnaHQgYmUgcmV0cmllZCBpbiBzb21lIHNjZW5hcmlvcywgYnV0IHRoYXQgaXMgZGVwZW5kYW50IG9uXG4gICAgICAgIC8vIHRoZSBjb250ZXh0IGFuZCBzaG91bGQgaGFuZGxlZCBpbmRpdmlkdWFsbHkgYnkgdGhlIGNhbGxpbmcgY29kZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vY2xvdWQuZ29vZ2xlLmNvbS9hcGlzL2Rlc2lnbi9lcnJvcnMuXG4gICAgICAgICAgICAgIGNhc2UgSy5BQk9SVEVEOlxuICAgICAgY2FzZSBLLk9VVF9PRl9SQU5HRTpcbiAgICAgIGNhc2UgSy5VTklNUExFTUVOVEVEOlxuICAgICAgY2FzZSBLLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgd3JpdGUgb3BlcmF0aW9uLlxuICpcbiAqIFdyaXRlIG9wZXJhdGlvbnMgbXVzdCBiZSBoYW5kbGVkIHNwZWNpYWxseSBiZWNhdXNlIGFzIG9mIGIvMTE5NDM3NzY0LCBBQk9SVEVEXG4gKiBlcnJvcnMgb24gdGhlIHdyaXRlIHN0cmVhbSBzaG91bGQgYmUgcmV0cmllZCB0b28gKGV2ZW4gdGhvdWdoIEFCT1JURUQgZXJyb3JzXG4gKiBhcmUgbm90IGdlbmVyYWxseSByZXRyeWFibGUpLlxuICpcbiAqIE5vdGUgdGhhdCBkdXJpbmcgdGhlIGluaXRpYWwgaGFuZHNoYWtlIG9uIHRoZSB3cml0ZSBzdHJlYW0gYW4gQUJPUlRFRCBlcnJvclxuICogc2lnbmFscyB0aGF0IHdlIHNob3VsZCBkaXNjYXJkIG91ciBzdHJlYW0gdG9rZW4gKGkuZS4gaXQgaXMgcGVybWFuZW50KS4gVGhpc1xuICogbWVhbnMgYSBoYW5kc2hha2UgZXJyb3Igc2hvdWxkIGJlIGNsYXNzaWZpZWQgd2l0aCBpc1Blcm1hbmVudEVycm9yLCBhYm92ZS5cbiAqL1xuLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBHUlBDIHN0YXR1cyBjb2RlIG51bWJlciwgbGlrZSAwLCAxLCBvciAxNC4gVGhlc2VcbiAqIGFyZSBub3QgdGhlIHNhbWUgYXMgSFRUUCBzdGF0dXMgY29kZXMuXG4gKlxuICogQHJldHVybnMgVGhlIENvZGUgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gR1JQQyBzdGF0dXMgY29kZS4gRmFpbHMgaWYgdGhlcmVcbiAqICAgICBpcyBubyBtYXRjaC5cbiAqL1xuZnVuY3Rpb24gTm4odCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIFxuICAgIC8vIFRoaXMgc2hvdWxkbid0IG5vcm1hbGx5IGhhcHBlbiwgYnV0IGluIGNlcnRhaW4gZXJyb3IgY2FzZXMgKGxpa2UgdHJ5aW5nXG4gICAgLy8gdG8gc2VuZCBpbnZhbGlkIHByb3RvIG1lc3NhZ2VzKSB3ZSBtYXkgZ2V0IGFuIGVycm9yIHdpdGggbm8gR1JQQyBjb2RlLlxuICAgIHJldHVybiBGKFwiR1JQQyBlcnJvciBoYXMgbm8gLmNvZGVcIiksIEsuVU5LTk9XTjtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgRG4uT0s6XG4gICAgICAgIHJldHVybiBLLk9LO1xuXG4gICAgICBjYXNlIERuLkNBTkNFTExFRDpcbiAgICAgICAgcmV0dXJuIEsuQ0FOQ0VMTEVEO1xuXG4gICAgICBjYXNlIERuLlVOS05PV046XG4gICAgICAgIHJldHVybiBLLlVOS05PV047XG5cbiAgICAgIGNhc2UgRG4uREVBRExJTkVfRVhDRUVERUQ6XG4gICAgICAgIHJldHVybiBLLkRFQURMSU5FX0VYQ0VFREVEO1xuXG4gICAgICBjYXNlIERuLlJFU09VUkNFX0VYSEFVU1RFRDpcbiAgICAgICAgcmV0dXJuIEsuUkVTT1VSQ0VfRVhIQVVTVEVEO1xuXG4gICAgICBjYXNlIERuLklOVEVSTkFMOlxuICAgICAgICByZXR1cm4gSy5JTlRFUk5BTDtcblxuICAgICAgY2FzZSBEbi5VTkFWQUlMQUJMRTpcbiAgICAgICAgcmV0dXJuIEsuVU5BVkFJTEFCTEU7XG5cbiAgICAgIGNhc2UgRG4uVU5BVVRIRU5USUNBVEVEOlxuICAgICAgICByZXR1cm4gSy5VTkFVVEhFTlRJQ0FURUQ7XG5cbiAgICAgIGNhc2UgRG4uSU5WQUxJRF9BUkdVTUVOVDpcbiAgICAgICAgcmV0dXJuIEsuSU5WQUxJRF9BUkdVTUVOVDtcblxuICAgICAgY2FzZSBEbi5OT1RfRk9VTkQ6XG4gICAgICAgIHJldHVybiBLLk5PVF9GT1VORDtcblxuICAgICAgY2FzZSBEbi5BTFJFQURZX0VYSVNUUzpcbiAgICAgICAgcmV0dXJuIEsuQUxSRUFEWV9FWElTVFM7XG5cbiAgICAgIGNhc2UgRG4uUEVSTUlTU0lPTl9ERU5JRUQ6XG4gICAgICAgIHJldHVybiBLLlBFUk1JU1NJT05fREVOSUVEO1xuXG4gICAgICBjYXNlIERuLkZBSUxFRF9QUkVDT05ESVRJT046XG4gICAgICAgIHJldHVybiBLLkZBSUxFRF9QUkVDT05ESVRJT047XG5cbiAgICAgIGNhc2UgRG4uQUJPUlRFRDpcbiAgICAgICAgcmV0dXJuIEsuQUJPUlRFRDtcblxuICAgICAgY2FzZSBEbi5PVVRfT0ZfUkFOR0U6XG4gICAgICAgIHJldHVybiBLLk9VVF9PRl9SQU5HRTtcblxuICAgICAgY2FzZSBEbi5VTklNUExFTUVOVEVEOlxuICAgICAgICByZXR1cm4gSy5VTklNUExFTUVOVEVEO1xuXG4gICAgICBjYXNlIERuLkRBVEFfTE9TUzpcbiAgICAgICAgcmV0dXJuIEsuREFUQV9MT1NTO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhbiBIVFRQIHJlc3BvbnNlJ3MgZXJyb3Igc3RhdHVzIHRvIHRoZSBlcXVpdmFsZW50IGVycm9yIGNvZGUuXG4gKlxuICogQHBhcmFtIHN0YXR1cyAtIEFuIEhUVFAgZXJyb3IgcmVzcG9uc2Ugc3RhdHVzIChcIkZBSUxFRF9QUkVDT05ESVRJT05cIixcbiAqIFwiVU5LTk9XTlwiLCBldGMuKVxuICogQHJldHVybnMgVGhlIGVxdWl2YWxlbnQgQ29kZS4gTm9uLW1hdGNoaW5nIHJlc3BvbnNlcyBhcmUgbWFwcGVkIHRvXG4gKiAgICAgQ29kZS5VTktOT1dOLlxuICovIChDbiA9IERuIHx8IChEbiA9IHt9KSlbQ24uT0sgPSAwXSA9IFwiT0tcIiwgQ25bQ24uQ0FOQ0VMTEVEID0gMV0gPSBcIkNBTkNFTExFRFwiLCBcbkNuW0NuLlVOS05PV04gPSAyXSA9IFwiVU5LTk9XTlwiLCBDbltDbi5JTlZBTElEX0FSR1VNRU5UID0gM10gPSBcIklOVkFMSURfQVJHVU1FTlRcIiwgXG5DbltDbi5ERUFETElORV9FWENFRURFRCA9IDRdID0gXCJERUFETElORV9FWENFRURFRFwiLCBDbltDbi5OT1RfRk9VTkQgPSA1XSA9IFwiTk9UX0ZPVU5EXCIsIFxuQ25bQ24uQUxSRUFEWV9FWElTVFMgPSA2XSA9IFwiQUxSRUFEWV9FWElTVFNcIiwgQ25bQ24uUEVSTUlTU0lPTl9ERU5JRUQgPSA3XSA9IFwiUEVSTUlTU0lPTl9ERU5JRURcIiwgXG5DbltDbi5VTkFVVEhFTlRJQ0FURUQgPSAxNl0gPSBcIlVOQVVUSEVOVElDQVRFRFwiLCBDbltDbi5SRVNPVVJDRV9FWEhBVVNURUQgPSA4XSA9IFwiUkVTT1VSQ0VfRVhIQVVTVEVEXCIsIFxuQ25bQ24uRkFJTEVEX1BSRUNPTkRJVElPTiA9IDldID0gXCJGQUlMRURfUFJFQ09ORElUSU9OXCIsIENuW0NuLkFCT1JURUQgPSAxMF0gPSBcIkFCT1JURURcIiwgXG5DbltDbi5PVVRfT0ZfUkFOR0UgPSAxMV0gPSBcIk9VVF9PRl9SQU5HRVwiLCBDbltDbi5VTklNUExFTUVOVEVEID0gMTJdID0gXCJVTklNUExFTUVOVEVEXCIsIFxuQ25bQ24uSU5URVJOQUwgPSAxM10gPSBcIklOVEVSTkFMXCIsIENuW0NuLlVOQVZBSUxBQkxFID0gMTRdID0gXCJVTkFWQUlMQUJMRVwiLCBDbltDbi5EQVRBX0xPU1MgPSAxNV0gPSBcIkRBVEFfTE9TU1wiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1hcCBpbXBsZW1lbnRhdGlvbiB0aGF0IHVzZXMgb2JqZWN0cyBhcyBrZXlzLiBPYmplY3RzIG11c3QgaGF2ZSBhblxuICogYXNzb2NpYXRlZCBlcXVhbHMgZnVuY3Rpb24gYW5kIG11c3QgYmUgaW1tdXRhYmxlLiBFbnRyaWVzIGluIHRoZSBtYXAgYXJlXG4gKiBzdG9yZWQgdG9nZXRoZXIgd2l0aCB0aGUga2V5IGJlaW5nIHByb2R1Y2VkIGZyb20gdGhlIG1hcEtleUZuLiBUaGlzIG1hcFxuICogYXV0b21hdGljYWxseSBoYW5kbGVzIGNvbGxpc2lvbnMgb2Yga2V5cy5cbiAqL1xuY2xhc3Mga24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tYXBLZXlGbiA9IHQsIHRoaXMuZXF1YWxzRm4gPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbm5lciBtYXAgZm9yIGEga2V5L3ZhbHVlIHBhaXIuIER1ZSB0byB0aGUgcG9zc2liaWxpdHkgb2YgY29sbGlzaW9ucyB3ZVxuICAgICAgICAgKiBrZWVwIGEgbGlzdCBvZiBlbnRyaWVzIHRoYXQgd2UgZG8gYSBsaW5lYXIgc2VhcmNoIHRocm91Z2ggdG8gZmluZCBhbiBhY3R1YWxcbiAgICAgICAgICogbWF0Y2guIE5vdGUgdGhhdCBjb2xsaXNpb25zIHNob3VsZCBiZSByYXJlLCBzbyB3ZSBzdGlsbCBleHBlY3QgbmVhclxuICAgICAgICAgKiBjb25zdGFudCB0aW1lIGxvb2t1cHMgaW4gcHJhY3RpY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlubmVyID0ge30sIFxuICAgICAgICAvKiogVGhlIG51bWJlciBvZiBlbnRyaWVzIHN0b3JlZCBpbiB0aGUgbWFwICovXG4gICAgICAgIHRoaXMuaW5uZXJTaXplID0gMDtcbiAgICB9XG4gICAgLyoqIEdldCBhIHZhbHVlIGZvciB0aGlzIGtleSwgb3IgdW5kZWZpbmVkIGlmIGl0IGRvZXMgbm90IGV4aXN0LiAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIGlmICh0aGlzLmVxdWFsc0ZuKGUsIHQpKSByZXR1cm4gcztcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5nZXQodCk7XG4gICAgfVxuICAgIC8qKiBQdXQgdGhpcyBrZXkgYW5kIHZhbHVlIGluIHRoZSBtYXAuICovICAgIHNldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm1hcEtleUZuKHQpLCBzID0gdGhpcy5pbm5lcltuXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcmV0dXJuIHRoaXMuaW5uZXJbbl0gPSBbIFsgdCwgZSBdIF0sIHZvaWQgdGhpcy5pbm5lclNpemUrKztcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBzLmxlbmd0aDsgbisrKSBpZiAodGhpcy5lcXVhbHNGbihzW25dWzBdLCB0KSkgXG4gICAgICAgIC8vIFRoaXMgaXMgdXBkYXRpbmcgYW4gZXhpc3RpbmcgZW50cnkgYW5kIGRvZXMgbm90IGluY3JlYXNlIGBpbm5lclNpemVgLlxuICAgICAgICByZXR1cm4gdm9pZCAoc1tuXSA9IFsgdCwgZSBdKTtcbiAgICAgICAgcy5wdXNoKFsgdCwgZSBdKSwgdGhpcy5pbm5lclNpemUrKztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoaXMga2V5IGZyb20gdGhlIG1hcC4gUmV0dXJucyBhIGJvb2xlYW4gaWYgYW55dGhpbmcgd2FzIGRlbGV0ZWQuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8IG4ubGVuZ3RoOyBzKyspIGlmICh0aGlzLmVxdWFsc0ZuKG5bc11bMF0sIHQpKSByZXR1cm4gMSA9PT0gbi5sZW5ndGggPyBkZWxldGUgdGhpcy5pbm5lcltlXSA6IG4uc3BsaWNlKHMsIDEpLCBcbiAgICAgICAgdGhpcy5pbm5lclNpemUtLSwgITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIGx0KHRoaXMuaW5uZXIsICgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBbZSwgc10gb2YgbikgdChlLCBzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gZnQodGhpcy5pbm5lcik7XG4gICAgfVxuICAgIHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlubmVyU2l6ZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBBbiBpbW11dGFibGUgc29ydGVkIG1hcCBpbXBsZW1lbnRhdGlvbiwgYmFzZWQgb24gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrXG4vLyB0cmVlLlxuY2xhc3MgTW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5yb290ID0gZSB8fCBGbi5FTVBUWTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZCBvciByZXBsYWNlZC5cbiAgICBpbnNlcnQodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IE1uKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290Lmluc2VydCh0LCBlLCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgRm4uQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIG1hcCwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTW4odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QucmVtb3ZlKHQsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBGbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgbm9kZSB3aXRoIHRoZSBnaXZlbiBrZXksIG9yIG51bGwuXG4gICAgZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFlLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb21wYXJhdG9yKHQsIGUua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSByZXR1cm4gZS52YWx1ZTtcbiAgICAgICAgICAgIG4gPCAwID8gZSA9IGUubGVmdCA6IG4gPiAwICYmIChlID0gZS5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBlbGVtZW50IGluIHRoaXMgc29ydGVkIG1hcCwgb3IgLTEgaWYgaXQgZG9lc24ndFxuICAgIC8vIGV4aXN0LlxuICAgIGluZGV4T2YodCkge1xuICAgICAgICAvLyBOdW1iZXIgb2Ygbm9kZXMgdGhhdCB3ZXJlIHBydW5lZCB3aGVuIGRlc2NlbmRpbmcgcmlnaHRcbiAgICAgICAgbGV0IGUgPSAwLCBuID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshbi5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuY29tcGFyYXRvcih0LCBuLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGUgKyBuLmxlZnQuc2l6ZTtcbiAgICAgICAgICAgIHMgPCAwID8gbiA9IG4ubGVmdCA6IChcbiAgICAgICAgICAgIC8vIENvdW50IGFsbCBub2RlcyBsZWZ0IG9mIHRoZSBub2RlIHBsdXMgdGhlIG5vZGUgaXRzZWxmXG4gICAgICAgICAgICBlICs9IG4ubGVmdC5zaXplICsgMSwgbiA9IG4ucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIE5vZGUgbm90IGZvdW5kXG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdG90YWwgbnVtYmVyIG9mIG5vZGVzIGluIHRoZSBtYXAuXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3Quc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWluS2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSwgbiksICExKSkpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQucHVzaChgJHtlfToke259YCksICExKSkpLCBgeyR7dC5qb2luKFwiLCBcIil9fWA7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXNcbiAgICAvLyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGFuIGl0ZXJhdG9yIG92ZXIgdGhlIFNvcnRlZE1hcC5cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPbih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IE9uKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPbih0aGlzLnJvb3QsIG51bGwsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPbih0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITApO1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBcbi8vIEFuIGl0ZXJhdG9yIG92ZXIgYW4gTExSQk5vZGUuXG5jbGFzcyBPbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmlzUmV2ZXJzZSA9IHMsIHRoaXMubm9kZVN0YWNrID0gW107XG4gICAgICAgIGxldCBpID0gMTtcbiAgICAgICAgZm9yICg7IXQuaXNFbXB0eSgpOyApIGlmIChpID0gZSA/IG4odC5rZXksIGUpIDogMSwgXG4gICAgICAgIC8vIGZsaXAgdGhlIGNvbXBhcmlzb24gaWYgd2UncmUgZ29pbmcgaW4gcmV2ZXJzZVxuICAgICAgICBlICYmIHMgJiYgKGkgKj0gLTEpLCBpIDwgMCkgXG4gICAgICAgIC8vIFRoaXMgbm9kZSBpcyBsZXNzIHRoYW4gb3VyIHN0YXJ0IGtleS4gaWdub3JlIGl0XG4gICAgICAgIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQubGVmdCA6IHQucmlnaHQ7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKDAgPT09IGkpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZXhhY3RseSBlcXVhbCB0byBvdXIgc3RhcnQga2V5LiBQdXNoIGl0IG9uIHRoZSBzdGFjayxcbiAgICAgICAgICAgICAgICAvLyBidXQgc3RvcCBpdGVyYXRpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBncmVhdGVyIHRoYW4gb3VyIHN0YXJ0IGtleSwgYWRkIGl0IHRvIHRoZSBzdGFjayBhbmQgbW92ZVxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgb25lXG4gICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LnJpZ2h0IDogdC5sZWZ0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5ub2RlU3RhY2sucG9wKCk7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMuaXNSZXZlcnNlKSBmb3IgKHQgPSB0LmxlZnQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCB0ID0gdC5yaWdodDsgZWxzZSBmb3IgKHQgPSB0LnJpZ2h0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgXG4gICAgICAgIHQgPSB0LmxlZnQ7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ub2RlU3RhY2subGVuZ3RoID4gMDtcbiAgICB9XG4gICAgcGVlaygpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMubm9kZVN0YWNrLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm5vZGVTdGFja1t0aGlzLm5vZGVTdGFjay5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgIH1cbn1cblxuIC8vIGVuZCBTb3J0ZWRNYXBJdGVyYXRvclxuLy8gUmVwcmVzZW50cyBhIG5vZGUgaW4gYSBMZWZ0LWxlYW5pbmcgUmVkLUJsYWNrIHRyZWUuXG5jbGFzcyBGbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMudmFsdWUgPSBlLCB0aGlzLmNvbG9yID0gbnVsbCAhPSBuID8gbiA6IEZuLlJFRCwgdGhpcy5sZWZ0ID0gbnVsbCAhPSBzID8gcyA6IEZuLkVNUFRZLCBcbiAgICAgICAgdGhpcy5yaWdodCA9IG51bGwgIT0gaSA/IGkgOiBGbi5FTVBUWSwgdGhpcy5zaXplID0gdGhpcy5sZWZ0LnNpemUgKyAxICsgdGhpcy5yaWdodC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLCBvcHRpb25hbGx5IHJlcGxhY2luZyBwaWVjZXMgb2YgaXQuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgRm4obnVsbCAhPSB0ID8gdCA6IHRoaXMua2V5LCBudWxsICE9IGUgPyBlIDogdGhpcy52YWx1ZSwgbnVsbCAhPSBuID8gbiA6IHRoaXMuY29sb3IsIG51bGwgIT0gcyA/IHMgOiB0aGlzLmxlZnQsIG51bGwgIT0gaSA/IGkgOiB0aGlzLnJpZ2h0KTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pbm9yZGVyVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMucmlnaHQuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIHJldmVyc2Uga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvblxuICAgIC8vIGZ1bmN0aW9uIGZvciBlYWNoIG5vZGUuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpcyBhYm9ydGVkLlxuICAgIC8vIFJldHVybnMgdGhlIGZpcnN0IHRydXRoeSB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24sIG9yIHRoZSBsYXN0IGZhbHNleVxuICAgIC8vIHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbi5cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQucmV2ZXJzZVRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLmxlZnQucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWluaW11bSBub2RlIGluIHRoZSB0cmVlLlxuICAgIG1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5pc0VtcHR5KCkgPyB0aGlzIDogdGhpcy5sZWZ0Lm1pbigpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1pbigpLmtleTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5pc0VtcHR5KCkgPyB0aGlzLmtleSA6IHRoaXMucmlnaHQubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGkgPSBuKHQsIHMua2V5KTtcbiAgICAgICAgcmV0dXJuIHMgPSBpIDwgMCA/IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQuaW5zZXJ0KHQsIGUsIG4pLCBudWxsKSA6IDAgPT09IGkgPyBzLmNvcHkobnVsbCwgZSwgbnVsbCwgbnVsbCwgbnVsbCkgOiBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5pbnNlcnQodCwgZSwgbikpLCBcbiAgICAgICAgcy5maXhVcCgpO1xuICAgIH1cbiAgICByZW1vdmVNaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmxlZnQuaXNFbXB0eSgpKSByZXR1cm4gRm4uRU1QVFk7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQubGVmdC5pc1JlZCgpIHx8IHQubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHQgPSB0Lm1vdmVSZWRMZWZ0KCkpLCB0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIHQubGVmdC5yZW1vdmVNaW4oKSwgbnVsbCksIFxuICAgICAgICB0LmZpeFVwKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBpdGVtIHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMgPSB0aGlzO1xuICAgICAgICBpZiAoZSh0LCBzLmtleSkgPCAwKSBzLmxlZnQuaXNFbXB0eSgpIHx8IHMubGVmdC5pc1JlZCgpIHx8IHMubGVmdC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRMZWZ0KCkpLCBcbiAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBzLmxlZnQucmVtb3ZlKHQsIGUpLCBudWxsKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAocy5sZWZ0LmlzUmVkKCkgJiYgKHMgPSBzLnJvdGF0ZVJpZ2h0KCkpLCBzLnJpZ2h0LmlzRW1wdHkoKSB8fCBzLnJpZ2h0LmlzUmVkKCkgfHwgcy5yaWdodC5sZWZ0LmlzUmVkKCkgfHwgKHMgPSBzLm1vdmVSZWRSaWdodCgpKSwgXG4gICAgICAgICAgICAwID09PSBlKHQsIHMua2V5KSkge1xuICAgICAgICAgICAgICAgIGlmIChzLnJpZ2h0LmlzRW1wdHkoKSkgcmV0dXJuIEZuLkVNUFRZO1xuICAgICAgICAgICAgICAgIG4gPSBzLnJpZ2h0Lm1pbigpLCBzID0gcy5jb3B5KG4ua2V5LCBuLnZhbHVlLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZU1pbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmUodCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzLmZpeFVwKCk7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xvcjtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSBhZnRlciBwZXJmb3JtaW5nIGFueSBuZWVkZWQgcm90YXRpb25zLlxuICAgIGZpeFVwKCkge1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmlzUmVkKCkgJiYgIXQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVMZWZ0KCkpLCB0LmxlZnQuaXNSZWQoKSAmJiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQubGVmdC5pc1JlZCgpICYmIHQucmlnaHQuaXNSZWQoKSAmJiAodCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkTGVmdCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgdC5yaWdodC5yb3RhdGVSaWdodCgpKSwgXG4gICAgICAgIHQgPSB0LnJvdGF0ZUxlZnQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICBtb3ZlUmVkUmlnaHQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgcm90YXRlTGVmdCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBGbi5SRUQsIG51bGwsIHRoaXMucmlnaHQubGVmdCk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgdCwgbnVsbCk7XG4gICAgfVxuICAgIHJvdGF0ZVJpZ2h0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIEZuLlJFRCwgdGhpcy5sZWZ0LnJpZ2h0LCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIG51bGwsIHQpO1xuICAgIH1cbiAgICBjb2xvckZsaXAoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCAhdGhpcy5sZWZ0LmNvbG9yLCBudWxsLCBudWxsKSwgZSA9IHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCAhdGhpcy5yaWdodC5jb2xvciwgbnVsbCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkobnVsbCwgbnVsbCwgIXRoaXMuY29sb3IsIHQsIGUpO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jaGVjaygpO1xuICAgICAgICByZXR1cm4gTWF0aC5wb3coMiwgdCkgPD0gdGhpcy5zaXplICsgMTtcbiAgICB9XG4gICAgLy8gSW4gYSBiYWxhbmNlZCBSQiB0cmVlLCB0aGUgYmxhY2stZGVwdGggKG51bWJlciBvZiBibGFjayBub2RlcykgZnJvbSByb290IHRvXG4gICAgLy8gbGVhdmVzIGlzIGVxdWFsIG9uIGJvdGggc2lkZXMuICBUaGlzIGZ1bmN0aW9uIHZlcmlmaWVzIHRoYXQgb3IgYXNzZXJ0cy5cbiAgICBjaGVjaygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNSZWQoKSAmJiB0aGlzLmxlZnQuaXNSZWQoKSkgdGhyb3cgTCgpO1xuICAgICAgICBpZiAodGhpcy5yaWdodC5pc1JlZCgpKSB0aHJvdyBMKCk7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmxlZnQuY2hlY2soKTtcbiAgICAgICAgaWYgKHQgIT09IHRoaXMucmlnaHQuY2hlY2soKSkgdGhyb3cgTCgpO1xuICAgICAgICByZXR1cm4gdCArICh0aGlzLmlzUmVkKCkgPyAwIDogMSk7XG4gICAgfVxufVxuXG4gLy8gZW5kIExMUkJOb2RlXG4vLyBFbXB0eSBub2RlIGlzIHNoYXJlZCBiZXR3ZWVuIGFsbCBMTFJCIHRyZWVzLlxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbkZuLkVNUFRZID0gbnVsbCwgRm4uUkVEID0gITAsIEZuLkJMQUNLID0gITE7XG5cbi8vIGVuZCBMTFJCRW1wdHlOb2RlXG5Gbi5FTVBUWSA9IG5ldyBcbi8vIFJlcHJlc2VudHMgYW4gZW1wdHkgbm9kZSAoYSBsZWFmIG5vZGUgaW4gdGhlIFJlZC1CbGFjayBUcmVlKS5cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgZ2V0IGtleSgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IGNvbG9yKCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCBsZWZ0KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCByaWdodCgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgY3VycmVudCBub2RlLlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGbih0LCBlKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIHRyZWUsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBpbm9yZGVyVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXZlcnNlVHJhdmVyc2FsKHQpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBtaW5LZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvLyBGb3IgdGVzdGluZy5cbiAgICBjaGVja01heERlcHRoKCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGNoZWNrKCkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTb3J0ZWRTZXQgaXMgYW4gaW1tdXRhYmxlIChjb3B5LW9uLXdyaXRlKSBjb2xsZWN0aW9uIHRoYXQgaG9sZHMgZWxlbWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci5cbiAqXG4gKiBOT1RFOiBpZiBwcm92aWRlZCBjb21wYXJhdG9yIHJldHVybnMgMCBmb3IgdHdvIGVsZW1lbnRzLCB3ZSBjb25zaWRlciB0aGVtIHRvXG4gKiBiZSBlcXVhbCFcbiAqL1xuY2xhc3MgJG4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCwgdGhpcy5kYXRhID0gbmV3IE1uKHRoaXMuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmRhdGEuZ2V0KHQpO1xuICAgIH1cbiAgICBmaXJzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5tYXhLZXkoKTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuc2l6ZTtcbiAgICB9XG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaW5kZXhPZih0KTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGVsZW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuZGF0YS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogcmFuZ2VbMF0gJmx0Oz0gZWxlbSAmbHQ7IHJhbmdlWzFdLiAqLyAgICBmb3JFYWNoSW5SYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHRbMF0pO1xuICAgICAgICBmb3IgKDtuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5jb21wYXJhdG9yKHMua2V5LCB0WzFdKSA+PSAwKSByZXR1cm47XG4gICAgICAgICAgICBlKHMua2V5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiBzdGFydCAmbHQ7PSBlbGVtIHVudGlsIGZhbHNlIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBmb3JFYWNoV2hpbGUodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZm9yIChuID0gdm9pZCAwICE9PSBlID8gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbShlKSA6IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpOyBuLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAoIXQobi5nZXROZXh0KCkua2V5KSkgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKiBGaW5kcyB0aGUgbGVhc3QgZWxlbWVudCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gYGVsZW1gLiAqLyAgICBmaXJzdEFmdGVyT3JFcXVhbCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpO1xuICAgICAgICByZXR1cm4gZS5oYXNOZXh0KCkgPyBlLmdldE5leHQoKS5rZXkgOiBudWxsO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbih0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQm4odGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYW4gZWxlbWVudCAqLyAgICBhZGQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkuaW5zZXJ0KHQsICEwKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGFuIGVsZW1lbnQgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzKHQpID8gdGhpcy5jb3B5KHRoaXMuZGF0YS5yZW1vdmUodCkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIHVuaW9uV2l0aCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcztcbiAgICAgICAgLy8gTWFrZSBzdXJlIGByZXN1bHRgIGFsd2F5cyByZWZlcnMgdG8gdGhlIGxhcmdlciBvbmUgb2YgdGhlIHR3byBzZXRzLlxuICAgICAgICAgICAgICAgIHJldHVybiBlLnNpemUgPCB0LnNpemUgJiYgKGUgPSB0LCB0ID0gdGhpcyksIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBlID0gZS5hZGQodCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiAkbikpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuZGF0YS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtlLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5nZXROZXh0KCkua2V5LCBzID0gbi5nZXROZXh0KCkua2V5O1xuICAgICAgICAgICAgaWYgKDAgIT09IHRoaXMuY29tcGFyYXRvcih0LCBzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9BcnJheSgpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlKTtcbiAgICAgICAgfSkpLCB0O1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCBcIlNvcnRlZFNldChcIiArIHQudG9TdHJpbmcoKSArIFwiKVwiO1xuICAgIH1cbiAgICBjb3B5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyAkbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gZS5kYXRhID0gdCwgZTtcbiAgICB9XG59XG5cbmNsYXNzIEJuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaXRlciA9IHQ7XG4gICAgfVxuICAgIGdldE5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuZ2V0TmV4dCgpLmtleTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5oYXNOZXh0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHR3byBzb3J0ZWQgc2V0cyBmb3IgZXF1YWxpdHkgdXNpbmcgdGhlaXIgbmF0dXJhbCBvcmRlcmluZy4gVGhlXG4gKiBtZXRob2QgY29tcHV0ZXMgdGhlIGludGVyc2VjdGlvbiBhbmQgaW52b2tlcyBgb25BZGRgIGZvciBldmVyeSBlbGVtZW50IHRoYXRcbiAqIGlzIGluIGBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC4gYG9uUmVtb3ZlYCBpcyBpbnZva2VkIGZvciBldmVyeSBlbGVtZW50IGluXG4gKiBgYmVmb3JlYCBidXQgbWlzc2luZyBmcm9tIGBhZnRlcmAuXG4gKlxuICogVGhlIG1ldGhvZCBjcmVhdGVzIGEgY29weSBvZiBib3RoIGBiZWZvcmVgIGFuZCBgYWZ0ZXJgIGFuZCBydW5zIGluIE8obiBsb2dcbiAqIG4pLCB3aGVyZSBuIGlzIHRoZSBzaXplIG9mIHRoZSB0d28gbGlzdHMuXG4gKlxuICogQHBhcmFtIGJlZm9yZSAtIFRoZSBlbGVtZW50cyB0aGF0IGV4aXN0IGluIHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gYWZ0ZXIgLSBUaGUgZWxlbWVudHMgdG8gZGlmZiBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBzZXQuXG4gKiBAcGFyYW0gY29tcGFyYXRvciAtIFRoZSBjb21wYXJhdG9yIGZvciB0aGUgZWxlbWVudHMgaW4gYmVmb3JlIGFuZCBhZnRlci5cbiAqIEBwYXJhbSBvbkFkZCAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZiBgXG4gKiBhZnRlcmAgYnV0IG5vdCBgYmVmb3JlYC5cbiAqIEBwYXJhbSBvblJlbW92ZSAtIEEgZnVuY3Rpb24gdG8gaW52b2tlIGZvciBldmVyeSBlbGVtZW50IHRoYXQgaXMgcGFydCBvZlxuICogYGJlZm9yZWAgYnV0IG5vdCBgYWZ0ZXJgLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG5leHQgZWxlbWVudCBmcm9tIHRoZSBpdGVyYXRvciBvciBgdW5kZWZpbmVkYCBpZiBub25lIGF2YWlsYWJsZS5cbiAqL1xuZnVuY3Rpb24gTG4odCkge1xuICAgIHJldHVybiB0Lmhhc05leHQoKSA/IHQuZ2V0TmV4dCgpIDogdm9pZCAwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBVbiA9IG5ldyBNbih4dC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gcW4oKSB7XG4gICAgcmV0dXJuIFVuO1xufVxuXG5jb25zdCBHbiA9IG5ldyBNbih4dC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gS24oKSB7XG4gICAgcmV0dXJuIEduO1xufVxuXG5mdW5jdGlvbiBRbigpIHtcbiAgICByZXR1cm4gbmV3IGtuKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbmNvbnN0IGpuID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpO1xuXG5jb25zdCBXbiA9IG5ldyAkbih4dC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gem4oLi4udCkge1xuICAgIGxldCBlID0gV247XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3QgSG4gPSBuZXcgJG4ocnQpO1xuXG5mdW5jdGlvbiBKbigpIHtcbiAgICByZXR1cm4gSG47XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGV2ZW50IGZyb20gdGhlIFJlbW90ZVN0b3JlLiBJdCBpcyBzcGxpdCBpbnRvIHRhcmdldENoYW5nZXMgKGNoYW5nZXMgdG8gdGhlXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXG4gKiAoY2hhbmdlcyB0byB0aGUgYWN0dWFsIGRvY3VtZW50cykuXG4gKi8gY2xhc3MgWW4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoaXMgZXZlbnQgYnJpbmdzIHVzIHVwIHRvLCBvciBNSU4gaWYgbm90IHNldC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBmcm9tIHRhcmdldCB0byBjaGFuZ2VzIHRvIHRoZSB0YXJnZXQuIFNlZSBUYXJnZXRDaGFuZ2UuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2YgdGFyZ2V0cyB0aGF0IGlzIGtub3duIHRvIGJlIGluY29uc2lzdGVudC4gTGlzdGVucyBmb3IgdGhlc2VcbiAgICAgKiB0YXJnZXRzIHNob3VsZCBiZSByZS1lc3RhYmxpc2hlZCB3aXRob3V0IHJlc3VtZSB0b2tlbnMuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnRzIGhhdmUgY2hhbmdlZCBvciBiZWVuIGRlbGV0ZWQsIGFsb25nIHdpdGggdGhlXG4gICAgICogZG9jJ3MgbmV3IHZhbHVlcyAoaWYgbm90IGRlbGV0ZWQpLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50IHVwZGF0ZXMgYXJlIGR1ZSBvbmx5IHRvIGxpbWJvIHJlc29sdXRpb24gdGFyZ2V0cy5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gdCwgdGhpcy50YXJnZXRDaGFuZ2VzID0gZSwgdGhpcy50YXJnZXRNaXNtYXRjaGVzID0gbiwgdGhpcy5kb2N1bWVudFVwZGF0ZXMgPSBzLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSEFDSzogVmlld3MgcmVxdWlyZSBSZW1vdGVFdmVudHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZpZXcgaXNcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBhcHBseSBhXG4gICAgICogQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldywgZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnQgdGFiLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIG4uc2V0KHQsIFhuLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSksIG5ldyBZbihjdC5taW4oKSwgbiwgSm4oKSwgcW4oKSwgem4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3MgWG4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHQsIHRoaXMuY3VycmVudCA9IGUsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gcywgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgWG4ocHQuRU1QVFlfQllURV9TVFJJTkcsIGUsIHpuKCksIHpuKCksIHpuKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNoYW5nZWQgZG9jdW1lbnQgYW5kIGEgbGlzdCBvZiB0YXJnZXQgaWRzIHRvIHdoaWNoIHRoaXMgY2hhbmdlXG4gKiBhcHBsaWVzLlxuICpcbiAqIElmIGRvY3VtZW50IGhhcyBiZWVuIGRlbGV0ZWQgTm9Eb2N1bWVudCB3aWxsIGJlIHByb3ZpZGVkLlxuICovIGNsYXNzIFpuIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIG5ldyBkb2N1bWVudCBhcHBsaWVzIHRvIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGlzIHJlbW92ZWQgZnJvbSBhbGwgb2YgdGhlc2UgdGFyZ2V0cy4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGtleSBvZiB0aGUgZG9jdW1lbnQgZm9yIHRoaXMgY2hhbmdlLiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBuZXcgZG9jdW1lbnQgb3IgTm9Eb2N1bWVudCBpZiBpdCB3YXMgZGVsZXRlZC4gSXMgbnVsbCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCB3ZW50IG91dCBvZiB2aWV3IHdpdGhvdXQgdGhlIHNlcnZlciBzZW5kaW5nIGEgbmV3IGRvY3VtZW50LlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5PID0gdCwgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gZSwgdGhpcy5rZXkgPSBuLCB0aGlzLkYgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgdHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuJCA9IGU7XG4gICAgfVxufVxuXG5jbGFzcyBlcyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFdoYXQga2luZCBvZiBjaGFuZ2Ugb2NjdXJyZWQgdG8gdGhlIHdhdGNoIHRhcmdldC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIHRhcmdldCBJRHMgdGhhdCB3ZXJlIGFkZGVkL3JlbW92ZWQvc2V0LiAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgbiA9IHB0LkVNUFRZX0JZVEVfU1RSSU5HXG4gICAgLyoqIEFuIFJQQyBlcnJvciBpbmRpY2F0aW5nIHdoeSB0aGUgd2F0Y2ggZmFpbGVkLiAqLyAsIHMgPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCB0aGlzLnRhcmdldElkcyA9IGUsIHRoaXMucmVzdW1lVG9rZW4gPSBuLCB0aGlzLmNhdXNlID0gcztcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgdGhlIGludGVybmFsIHN0YXRlIG9mIGEgV2F0Y2ggdGFyZ2V0LiAqLyBjbGFzcyBucyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIChhZGRzIG9yIHJlbW92ZXMpIHRoYXQgd2UgYXJlIHdhaXRpbmcgb24uXG4gICAgICAgICAqIFdlIG9ubHkgY29uc2lkZXIgdGFyZ2V0cyBhY3RpdmUgdGhhdCBoYXZlIG5vIHBlbmRpbmcgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5CID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnQgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIGNoYW5nZXMgYXJlIGNvbnRpbnVvdXNseSB1cGRhdGVkIGFzIHdlIHJlY2VpdmUgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgICAgICogYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYWdhaW5zdCB0aGUgbGFzdCBpc3N1ZWQgc25hcHNob3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkwgPSBycygpLCBcbiAgICAgICAgLyoqIFNlZSBwdWJsaWMgZ2V0dGVycyBmb3IgZXhwbGFuYXRpb25zIG9mIHRoZXNlIGZpZWxkcy4gKi9cbiAgICAgICAgdGhpcy5VID0gcHQuRU1QVFlfQllURV9TVFJJTkcsIHRoaXMucSA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRyA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBiZWVuIG1hcmtlZCAnY3VycmVudCcuXG4gICAgICpcbiAgICAgKiAnQ3VycmVudCcgaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sOiBJdCBpbXBsaWVzIHRoYXQgdGhlXG4gICAgICogV2F0Y2ggYmFja2VuZCBoYXMgc2VudCB1cyBhbGwgY2hhbmdlcyB1cCB0byB0aGUgcG9pbnQgYXQgd2hpY2ggdGhlIHRhcmdldFxuICAgICAqIHdhcyBhZGRlZCBhbmQgdGhhdCB0aGUgdGFyZ2V0IGlzIGNvbnNpc3RlbnQgd2l0aCB0aGUgcmVzdCBvZiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0uXG4gICAgICovICAgIGdldCBjdXJyZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xO1xuICAgIH1cbiAgICAvKiogVGhlIGxhc3QgcmVzdW1lIHRva2VuIHNlbnQgdG8gdXMgZm9yIHRoaXMgdGFyZ2V0LiAqLyAgICBnZXQgcmVzdW1lVG9rZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlU7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQgSygpIHtcbiAgICAgICAgcmV0dXJuIDAgIT09IHRoaXMuQjtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgd2UgaGF2ZSBtb2RpZmllZCBhbnkgc3RhdGUgdGhhdCBzaG91bGQgdHJpZ2dlciBhIHNuYXBzaG90LiAqLyAgICBnZXQgaigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgcmVzdW1lIHRva2VuIHRvIHRoZSBUYXJnZXRDaGFuZ2UsIGJ1dCBvbmx5IHdoZW4gaXQgaGFzIGEgbmV3XG4gICAgICogdmFsdWUuIEVtcHR5IHJlc3VtZVRva2VucyBhcmUgZGlzY2FyZGVkLlxuICAgICAqLyAgICBXKHQpIHtcbiAgICAgICAgdC5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmICh0aGlzLkcgPSAhMCwgdGhpcy5VID0gdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB0YXJnZXQgY2hhbmdlIGZyb20gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBUbyByZXNldCB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhZnRlciByYWlzaW5nIHRoaXMgc25hcHNob3QsIGNhbGxcbiAgICAgKiBgY2xlYXJQZW5kaW5nQ2hhbmdlcygpYC5cbiAgICAgKi8gICAgSCgpIHtcbiAgICAgICAgbGV0IHQgPSB6bigpLCBlID0gem4oKSwgbiA9IHpuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLkwuZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgIHQgPSB0LmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgIGUgPSBlLmFkZChzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBYbih0aGlzLlUsIHRoaXMucSwgdCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgZG9jdW1lbnQgY2hhbmdlcyBhbmQgc2V0cyBgaGFzUGVuZGluZ0NoYW5nZXNgIHRvIGZhbHNlLlxuICAgICAqLyAgICBKKCkge1xuICAgICAgICB0aGlzLkcgPSAhMSwgdGhpcy5MID0gcnMoKTtcbiAgICB9XG4gICAgWSh0LCBlKSB7XG4gICAgICAgIHRoaXMuRyA9ICEwLCB0aGlzLkwgPSB0aGlzLkwuaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBYKHQpIHtcbiAgICAgICAgdGhpcy5HID0gITAsIHRoaXMuTCA9IHRoaXMuTC5yZW1vdmUodCk7XG4gICAgfVxuICAgIFooKSB7XG4gICAgICAgIHRoaXMuQiArPSAxO1xuICAgIH1cbiAgICB0dCgpIHtcbiAgICAgICAgdGhpcy5CIC09IDE7XG4gICAgfVxuICAgIGV0KCkge1xuICAgICAgICB0aGlzLkcgPSAhMCwgdGhpcy5xID0gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXG4gKi9cbmNsYXNzIHNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMubnQgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhbGwgdHJhY2tlZCB0YXJnZXRzLiAqL1xuICAgICAgICB0aGlzLnN0ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnRzIHRvIHVwZGF0ZSBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuICovXG4gICAgICAgIHRoaXMuaXQgPSBxbigpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLnJ0ID0gaXMoKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hlcy4gVGhlc2UgdGFyZ2V0cyBhcmVcbiAgICAgICAgICoga25vd24gdG8gYmUgaW5jb25zaXN0ZW50IGFuZCB0aGVpciBsaXN0ZW5zIG5lZWRzIHRvIGJlIHJlLWVzdGFibGlzaGVkIGJ5XG4gICAgICAgICAqIFJlbW90ZVN0b3JlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vdCA9IG5ldyAkbihydCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgRG9jdW1lbnRXYXRjaENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cbiAgICAgKi8gICAgdXQodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5PKSB0LkYgJiYgdC5GLmlzRm91bmREb2N1bWVudCgpID8gdGhpcy5hdChlLCB0LkYpIDogdGhpcy5jdChlLCB0LmtleSwgdC5GKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQucmVtb3ZlZFRhcmdldElkcykgdGhpcy5jdChlLCB0LmtleSwgdC5GKTtcbiAgICB9XG4gICAgLyoqIFByb2Nlc3NlcyBhbmQgYWRkcyB0aGUgV2F0Y2hUYXJnZXRDaGFuZ2UgdG8gdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMuICovICAgIGh0KHQpIHtcbiAgICAgICAgdGhpcy5mb3JFYWNoVGFyZ2V0KHQsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmx0KGUpO1xuICAgICAgICAgICAgc3dpdGNoICh0LnN0YXRlKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBOb0NoYW5nZSAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5mdChlKSAmJiBuLlcodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIEFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4udHQoKSwgbi5LIHx8IFxuICAgICAgICAgICAgICAgIC8vIFdlIGhhdmUgYSBmcmVzaGx5IGFkZGVkIHRhcmdldCwgc28gd2UgbmVlZCB0byByZXNldCBhbnkgc3RhdGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHdlIGhhZCBwcmV2aW91c2x5LiBUaGlzIGNhbiBoYXBwZW4gZS5nLiB3aGVuIHJlbW92ZSBhbmQgYWRkXG4gICAgICAgICAgICAgICAgLy8gYmFjayBhIHRhcmdldCBmb3IgZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgICAgIG4uSigpLCBuLlcodC5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAyIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLnR0KCksIG4uSyB8fCB0aGlzLnJlbW92ZVRhcmdldChlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDMgLyogQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5mdChlKSAmJiAobi5ldCgpLCBuLlcodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNCAvKiBSZXNldCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy5mdChlKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXG4gICAgICAgICAgICAgICAgdGhpcy5kdChlKSwgbi5XKHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIEwoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGFsbCB0YXJnZXRJZHMgdGhhdCB0aGUgd2F0Y2ggY2hhbmdlIGFwcGxpZXMgdG86IGVpdGhlciB0aGVcbiAgICAgKiB0YXJnZXRJZHMgZXhwbGljaXRseSBsaXN0ZWQgaW4gdGhlIGNoYW5nZSBvciB0aGUgdGFyZ2V0SWRzIG9mIGFsbCBjdXJyZW50bHlcbiAgICAgKiBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHQudGFyZ2V0SWRzLmxlbmd0aCA+IDAgPyB0LnRhcmdldElkcy5mb3JFYWNoKGUpIDogdGhpcy5zdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5mdChuKSAmJiBlKG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgZXhpc3RlbmNlIGZpbHRlcnMgYW5kIHN5bnRoZXNpemVzIGRlbGV0ZXMgZm9yIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAqIFRhcmdldHMgdGhhdCBhcmUgaW52YWxpZGF0ZWQgYnkgZmlsdGVyIG1pc21hdGNoZXMgYXJlIGFkZGVkIHRvXG4gICAgICogYHBlbmRpbmdUYXJnZXRSZXNldHNgLlxuICAgICAqLyAgICBfdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkLCBuID0gdC4kLmNvdW50LCBzID0gdGhpcy53dChlKTtcbiAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLnRhcmdldDtcbiAgICAgICAgICAgIGlmICh3ZSh0KSkgaWYgKDAgPT09IG4pIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RlbmNlIGZpbHRlciB0b2xkIHVzIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdC4gV2UgZGVkdWNlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IGFuZCBhcHBseSBhIGRlbGV0ZWQgZG9jdW1lbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBvdXIgdXBkYXRlcy4gV2l0aG91dCBhcHBseWluZyB0aGlzIGRlbGV0ZWQgZG9jdW1lbnQgdGhlcmUgbWlnaHQgYmVcbiAgICAgICAgICAgICAgICAvLyBhbm90aGVyIHF1ZXJ5IHRoYXQgd2lsbCByYWlzZSB0aGlzIGRvY3VtZW50IGFzIHBhcnQgb2YgYSBzbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIHVudGlsIGl0IGlzIHJlc29sdmVkLCBlc3NlbnRpYWxseSBleHBvc2luZyBpbmNvbnNpc3RlbmN5IGJldHdlZW5cbiAgICAgICAgICAgICAgICAvLyBxdWVyaWVzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgeHQodC5wYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmN0KGUsIG4sIHRlLm5ld05vRG9jdW1lbnQobiwgY3QubWluKCkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBVKDEgPT09IG4pOyBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmd0KGUpICE9PSBuICYmIChcbiAgICAgICAgICAgICAgICAvLyBFeGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoOiBXZSByZXNldCB0aGUgbWFwcGluZyBhbmQgcmFpc2UgYSBuZXdcbiAgICAgICAgICAgICAgICAvLyBzbmFwc2hvdCB3aXRoIGBpc0Zyb21DYWNoZTp0cnVlYC5cbiAgICAgICAgICAgICAgICB0aGlzLmR0KGUpLCB0aGlzLm90ID0gdGhpcy5vdC5hZGQoZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoZSBjdXJyZW50bHkgYWNjdW11bGF0ZWQgc3RhdGUgaW50byBhIHJlbW90ZSBldmVudCBhdCB0aGVcbiAgICAgKiBwcm92aWRlZCBzbmFwc2hvdCB2ZXJzaW9uLiBSZXNldHMgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYmVmb3JlIHJldHVybmluZy5cbiAgICAgKi8gICAgeXQodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5zdC5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMud3Qocyk7XG4gICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgIGlmIChuLmN1cnJlbnQgJiYgd2UoaS50YXJnZXQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvY3VtZW50IHF1ZXJpZXMgZm9yIGRvY3VtZW50IHRoYXQgZG9uJ3QgZXhpc3QgY2FuIHByb2R1Y2UgYW4gZW1wdHlcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzdWx0IHNldC4gVG8gdXBkYXRlIG91ciBsb2NhbCBjYWNoZSwgd2Ugc3ludGhlc2l6ZSBhIGRvY3VtZW50XG4gICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBpZiB3ZSBoYXZlIG5vdCBwcmV2aW91c2x5IHJlY2VpdmVkIHRoZSBkb2N1bWVudC4gVGhpc1xuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlcyB0aGUgbGltYm8gc3RhdGUgb2YgdGhlIGRvY3VtZW50LCByZW1vdmluZyBpdCBmcm9tXG4gICAgICAgICAgICAgICAgICAgIC8vIGxpbWJvRG9jdW1lbnRSZWZzLlxuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElkZWFsbHkgd2Ugd291bGQgaGF2ZSBhbiBleHBsaWNpdCBsb29rdXAgdGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgIC8vIGluc3RlYWQgcmVzdWx0aW5nIGluIGFuIGV4cGxpY2l0IGRlbGV0ZSBtZXNzYWdlIGFuZCB3ZSBjb3VsZFxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmUgdGhpcyBzcGVjaWFsIGxvZ2ljLlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IHh0KGkudGFyZ2V0LnBhdGgpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSB0aGlzLml0LmdldChlKSB8fCB0aGlzLkl0KHMsIGUpIHx8IHRoaXMuY3QocywgZSwgdGUubmV3Tm9Eb2N1bWVudChlLCB0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4uaiAmJiAoZS5zZXQocywgbi5IKCkpLCBuLkooKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IG4gPSB6bigpO1xuICAgICAgICAvLyBXZSBleHRyYWN0IHRoZSBzZXQgb2YgbGltYm8tb25seSBkb2N1bWVudCB1cGRhdGVzIGFzIHRoZSBHQyBsb2dpY1xuICAgICAgICAvLyBzcGVjaWFsLWNhc2VzIGRvY3VtZW50cyB0aGF0IGRvIG5vdCBhcHBlYXIgaW4gdGhlIHRhcmdldCBjYWNoZS5cbiAgICAgICAgXG4gICAgICAgIC8vIFRPRE8oZ3NvbHRpcyk6IEV4cGFuZCBvbiB0aGlzIGNvbW1lbnQgb25jZSBHQyBpcyBhdmFpbGFibGUgaW4gdGhlIEpTXG4gICAgICAgIC8vIGNsaWVudC5cbiAgICAgICAgICAgICAgICB0aGlzLnJ0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgZS5mb3JFYWNoV2hpbGUoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnd0KHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiAhZSB8fCAyIC8qIExpbWJvUmVzb2x1dGlvbiAqLyA9PT0gZS5wdXJwb3NlIHx8IChzID0gITEsICExKTtcbiAgICAgICAgICAgIH0pKSwgcyAmJiAobiA9IG4uYWRkKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLml0LmZvckVhY2goKChlLCBuKSA9PiBuLnNldFJlYWRUaW1lKHQpKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgWW4odCwgZSwgdGhpcy5vdCwgdGhpcy5pdCwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLml0ID0gcW4oKSwgdGhpcy5ydCA9IGlzKCksIHRoaXMub3QgPSBuZXcgJG4ocnQpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBwcm92aWRlZCBkb2N1bWVudCB0byB0aGUgaW50ZXJuYWwgbGlzdCBvZiBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAqIGl0cyBkb2N1bWVudCBrZXkgdG8gdGhlIGdpdmVuIHRhcmdldCdzIG1hcHBpbmcuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBhdCh0LCBlKSB7XG4gICAgICAgIGlmICghdGhpcy5mdCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5JdCh0LCBlLmtleSkgPyAyIC8qIE1vZGlmaWVkICovIDogMCAvKiBBZGRlZCAqLztcbiAgICAgICAgdGhpcy5sdCh0KS5ZKGUua2V5LCBuKSwgdGhpcy5pdCA9IHRoaXMuaXQuaW5zZXJ0KGUua2V5LCBlKSwgdGhpcy5ydCA9IHRoaXMucnQuaW5zZXJ0KGUua2V5LCB0aGlzLlR0KGUua2V5KS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBjdCh0LCBlLCBuKSB7XG4gICAgICAgIGlmICghdGhpcy5mdCh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5sdCh0KTtcbiAgICAgICAgdGhpcy5JdCh0LCBlKSA/IHMuWShlLCAxIC8qIFJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgcy5YKGUpLCB0aGlzLnJ0ID0gdGhpcy5ydC5pbnNlcnQoZSwgdGhpcy5UdChlKS5kZWxldGUodCkpLCBuICYmICh0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQoZSwgbikpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCkge1xuICAgICAgICB0aGlzLnN0LmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgY3VycmVudCBjb3VudCBvZiBkb2N1bWVudHMgaW4gdGhlIHRhcmdldC4gVGhpcyBpbmNsdWRlcyBib3RoXG4gICAgICogdGhlIG51bWJlciBvZiBkb2N1bWVudHMgdGhhdCB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiB0YXJnZXQgYXMgd2VsbCBhcyBhbnkgYWNjdW11bGF0ZWQgY2hhbmdlcy5cbiAgICAgKi8gICAgZ3QodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5sdCh0KS5IKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm50LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuc2l6ZSArIGUuYWRkZWREb2N1bWVudHMuc2l6ZSAtIGUucmVtb3ZlZERvY3VtZW50cy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnQgdGhlIG51bWJlciBvZiBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoIGJlZm9yZSB3ZSBjYW4gY29uc2lkZXIgdGhlXG4gICAgICogc2VydmVyIHRvIGJlICdpbi1zeW5jJyB3aXRoIHRoZSBjbGllbnQncyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAgKi8gICAgWih0KSB7XG4gICAgICAgIHRoaXMubHQodCkuWigpO1xuICAgIH1cbiAgICBsdCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5zdC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IG5zLCB0aGlzLnN0LnNldCh0LCBlKSksIGU7XG4gICAgfVxuICAgIFR0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnJ0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgJG4ocnQpLCB0aGlzLnJ0ID0gdGhpcy5ydC5pbnNlcnQodCwgZSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSB1c2VyIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQgKGJ5IGNhbGxpbmdcbiAgICAgKiBgZ2V0VGFyZ2V0RGF0YUZvclRhcmdldCgpYCkgYW5kIHRoYXQgd2UgYXJlIG5vdCB3YWl0aW5nIGZvciBwZW5kaW5nIEFERHNcbiAgICAgKiBmcm9tIHdhdGNoLlxuICAgICAqLyAgICBmdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBudWxsICE9PSB0aGlzLnd0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCBPKFwiV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yXCIsIFwiRGV0ZWN0ZWQgaW5hY3RpdmUgdGFyZ2V0XCIsIHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGZvciBhbiBhY3RpdmUgdGFyZ2V0IChpLmUuIGEgdGFyZ2V0IHRoYXQgdGhlIHVzZXJcbiAgICAgKiBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoYXQgaGFzIG5vIG91dHN0YW5kaW5nIHRhcmdldCBjaGFuZ2UgcmVxdWVzdHMpLlxuICAgICAqLyAgICB3dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnN0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgJiYgZS5LID8gbnVsbCA6IHRoaXMubnQuRXQodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQgdG8gaXRzIGluaXRpYWwgc3RhdGUgKGUuZy4gc2V0c1xuICAgICAqICdjdXJyZW50JyB0byBmYWxzZSwgY2xlYXJzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHJlbW92ZXMgaXRzIHRhcmdldCBtYXBwaW5nXG4gICAgICogZnJvbSBhbGwgZG9jdW1lbnRzKS5cbiAgICAgKi8gICAgZHQodCkge1xuICAgICAgICB0aGlzLnN0LnNldCh0LCBuZXcgbnMpO1xuICAgICAgICB0aGlzLm50LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmN0KHQsIGUsIC8qdXBkYXRlZERvY3VtZW50PSovIG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgTG9jYWxTdG9yZSBjb25zaWRlcnMgdGhlIGRvY3VtZW50IHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogc3BlY2lmaWVkIHRhcmdldC5cbiAgICAgKi8gICAgSXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5udC5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KHQpLmhhcyhlKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzKCkge1xuICAgIHJldHVybiBuZXcgTW4oeHQuY29tcGFyYXRvcik7XG59XG5cbmZ1bmN0aW9uIHJzKCkge1xuICAgIHJldHVybiBuZXcgTW4oeHQuY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IG9zID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBhc2M6IFwiQVNDRU5ESU5HXCIsXG4gICAgICAgIGRlc2M6IFwiREVTQ0VORElOR1wiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCksIHVzID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBcIjxcIjogXCJMRVNTX1RIQU5cIixcbiAgICAgICAgXCI8PVwiOiBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj5cIjogXCJHUkVBVEVSX1RIQU5cIixcbiAgICAgICAgXCI+PVwiOiBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiLFxuICAgICAgICBcIj09XCI6IFwiRVFVQUxcIixcbiAgICAgICAgXCIhPVwiOiBcIk5PVF9FUVVBTFwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zXCI6IFwiQVJSQVlfQ09OVEFJTlNcIixcbiAgICAgICAgaW46IFwiSU5cIixcbiAgICAgICAgXCJub3QtaW5cIjogXCJOT1RfSU5cIixcbiAgICAgICAgXCJhcnJheS1jb250YWlucy1hbnlcIjogXCJBUlJBWV9DT05UQUlOU19BTllcIlxuICAgIH07XG4gICAgcmV0dXJuIHQ7XG59KSgpO1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgZ2VuZXJhdGVzIEpzb25PYmplY3QgdmFsdWVzIGZvciB0aGUgRGF0YXN0b3JlIEFQSSBzdWl0YWJsZSBmb3JcbiAqIHNlbmRpbmcgdG8gZWl0aGVyIEdSUEMgc3R1YiBtZXRob2RzIG9yIHZpYSB0aGUgSlNPTi9IVFRQIFJFU1QgQVBJLlxuICpcbiAqIFRoZSBzZXJpYWxpemVyIHN1cHBvcnRzIGJvdGggUHJvdG9idWYuanMgYW5kIFByb3RvMyBKU09OIGZvcm1hdHMuIEJ5XG4gKiBzZXR0aW5nIGB1c2VQcm90bzNKc29uYCB0byB0cnVlLCB0aGUgc2VyaWFsaXplciB3aWxsIHVzZSB0aGUgUHJvdG8zIEpTT05cbiAqIGZvcm1hdC5cbiAqXG4gKiBGb3IgYSBkZXNjcmlwdGlvbiBvZiB0aGUgUHJvdG8zIEpTT04gZm9ybWF0IGNoZWNrXG4gKiBodHRwczovL2RldmVsb3BlcnMuZ29vZ2xlLmNvbS9wcm90b2NvbC1idWZmZXJzL2RvY3MvcHJvdG8zI2pzb25cbiAqXG4gKiBUT0RPKGtsaW10KTogV2UgY2FuIHJlbW92ZSB0aGUgZGF0YWJhc2VJZCBhcmd1bWVudCBpZiB3ZSBrZWVwIHRoZSBmdWxsXG4gKiByZXNvdXJjZSBuYW1lIGluIGRvY3VtZW50cy5cbiAqL1xuY2xhc3MgYXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5OID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIERhdGUgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKi9cbmZ1bmN0aW9uIGNzKHQsIGUpIHtcbiAgICBpZiAodC5OKSB7XG4gICAgICAgIHJldHVybiBgJHtuZXcgRGF0ZSgxZTMgKiBlLnNlY29uZHMpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKi8sIFwiXCIpLnJlcGxhY2UoXCJaXCIsIFwiXCIpfS4keyhcIjAwMDAwMDAwMFwiICsgZS5uYW5vc2Vjb25kcykuc2xpY2UoLTkpfVpgO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBcIlwiICsgZS5zZWNvbmRzLFxuICAgICAgICBuYW5vczogZS5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBieXRlcyB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGluIGEgcHJvdG8uXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gaHModCwgZSkge1xuICAgIHJldHVybiB0Lk4gPyBlLnRvQmFzZTY0KCkgOiBlLnRvVWludDhBcnJheSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBCeXRlU3RyaW5nIGJhc2VkIG9uIHRoZSBwcm90byBzdHJpbmcgdmFsdWUuXG4gKi8gZnVuY3Rpb24gbHModCwgZSkge1xuICAgIHJldHVybiBjcyh0LCBlLnRvVGltZXN0YW1wKCkpO1xufVxuXG5mdW5jdGlvbiBmcyh0KSB7XG4gICAgcmV0dXJuIFUoISF0KSwgY3QuZnJvbVRpbWVzdGFtcChmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBUdCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH0odCkpO1xufVxuXG5mdW5jdGlvbiBkcyh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfdChbIFwicHJvamVjdHNcIiwgdC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2UgXSk7XG4gICAgfSh0KS5jaGlsZChcImRvY3VtZW50c1wiKS5jaGlsZChlKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gX3ModCkge1xuICAgIGNvbnN0IGUgPSBfdC5mcm9tU3RyaW5nKHQpO1xuICAgIHJldHVybiBVKExzKGUpKSwgZTtcbn1cblxuZnVuY3Rpb24gd3ModCwgZSkge1xuICAgIHJldHVybiBkcyh0LmRhdGFiYXNlSWQsIGUucGF0aCk7XG59XG5cbmZ1bmN0aW9uIG1zKHQsIGUpIHtcbiAgICBjb25zdCBuID0gX3MoZSk7XG4gICAgaWYgKG4uZ2V0KDEpICE9PSB0LmRhdGFiYXNlSWQucHJvamVjdElkKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IHByb2plY3Q6IFwiICsgbi5nZXQoMSkgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpO1xuICAgIGlmIChuLmdldCgzKSAhPT0gdC5kYXRhYmFzZUlkLmRhdGFiYXNlKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVHJpZWQgdG8gZGVzZXJpYWxpemUga2V5IGZyb20gZGlmZmVyZW50IGRhdGFiYXNlOiBcIiArIG4uZ2V0KDMpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpO1xuICAgIHJldHVybiBuZXcgeHQoSXMobikpO1xufVxuXG5mdW5jdGlvbiBncyh0LCBlKSB7XG4gICAgcmV0dXJuIGRzKHQuZGF0YWJhc2VJZCwgZSk7XG59XG5cbmZ1bmN0aW9uIHlzKHQpIHtcbiAgICBjb25zdCBlID0gX3ModCk7XG4gICAgLy8gSW4gdjFiZXRhMSBxdWVyaWVzIGZvciBjb2xsZWN0aW9ucyBhdCB0aGUgcm9vdCBkaWQgbm90IGhhdmUgYSB0cmFpbGluZ1xuICAgIC8vIFwiL2RvY3VtZW50c1wiLiBJbiB2MSBhbGwgcmVzb3VyY2UgcGF0aHMgY29udGFpbiBcIi9kb2N1bWVudHNcIi4gUHJlc2VydmUgdGhlXG4gICAgLy8gYWJpbGl0eSB0byByZWFkIHRoZSB2MWJldGExIGZvcm0gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBxdWVyaWVzIHBlcnNpc3RlZFxuICAgIC8vIGluIHRoZSBsb2NhbCB0YXJnZXQgY2FjaGUuXG4gICAgICAgIHJldHVybiA0ID09PSBlLmxlbmd0aCA/IF90LmVtcHR5UGF0aCgpIDogSXMoZSk7XG59XG5cbmZ1bmN0aW9uIHBzKHQpIHtcbiAgICByZXR1cm4gbmV3IF90KFsgXCJwcm9qZWN0c1wiLCB0LmRhdGFiYXNlSWQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlSWQuZGF0YWJhc2UgXSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIElzKHQpIHtcbiAgICByZXR1cm4gVSh0Lmxlbmd0aCA+IDQgJiYgXCJkb2N1bWVudHNcIiA9PT0gdC5nZXQoNCkpLCB0LnBvcEZpcnN0KDUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIERvY3VtZW50IHByb3RvIGZyb20ga2V5IGFuZCBmaWVsZHMgKGJ1dCBubyBjcmVhdGUvdXBkYXRlIHRpbWUpICovIGZ1bmN0aW9uIFRzKHQsIGUsIG4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiB3cyh0LCBlKSxcbiAgICAgICAgZmllbGRzOiBuLnZhbHVlLm1hcFZhbHVlLmZpZWxkc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIEVzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbXModCwgZS5uYW1lKSwgaSA9IGZzKGUudXBkYXRlVGltZSksIHIgPSBuZXcgWHQoe1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBlLmZpZWxkc1xuICAgICAgICB9XG4gICAgfSksIG8gPSB0ZS5uZXdGb3VuZERvY3VtZW50KHMsIGksIHIpO1xuICAgIHJldHVybiBuICYmIG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCksIG4gPyBvLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIDogbztcbn1cblxuZnVuY3Rpb24gQXModCwgZSkge1xuICAgIHJldHVybiBcImZvdW5kXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgVSghIWUuZm91bmQpLCBlLmZvdW5kLm5hbWUsIGUuZm91bmQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgbiA9IG1zKHQsIGUuZm91bmQubmFtZSksIHMgPSBmcyhlLmZvdW5kLnVwZGF0ZVRpbWUpLCBpID0gbmV3IFh0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLmZvdW5kLmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRlLm5ld0ZvdW5kRG9jdW1lbnQobiwgcywgaSk7XG4gICAgfSh0LCBlKSA6IFwibWlzc2luZ1wiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIFUoISFlLm1pc3NpbmcpLCBVKCEhZS5yZWFkVGltZSk7XG4gICAgICAgIGNvbnN0IG4gPSBtcyh0LCBlLm1pc3NpbmcpLCBzID0gZnMoZS5yZWFkVGltZSk7XG4gICAgICAgIHJldHVybiB0ZS5uZXdOb0RvY3VtZW50KG4sIHMpO1xuICAgIH0odCwgZSkgOiBMKCk7XG59XG5cbmZ1bmN0aW9uIFJzKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoXCJ0YXJnZXRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlO1xuICAgICAgICAvLyBwcm90bzMgZGVmYXVsdCB2YWx1ZSBpcyB1bnNldCBpbiBKU09OICh1bmRlZmluZWQpLCBzbyB1c2UgJ05PX0NIQU5HRSdcbiAgICAgICAgLy8gaWYgdW5zZXRcbiAgICAgICAgY29uc3QgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBcIk5PX0NIQU5HRVwiID09PSB0ID8gMCAvKiBOb0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IHQgPyAxIC8qIEFkZGVkICovIDogXCJSRU1PVkVcIiA9PT0gdCA/IDIgLyogUmVtb3ZlZCAqLyA6IFwiQ1VSUkVOVFwiID09PSB0ID8gMyAvKiBDdXJyZW50ICovIDogXCJSRVNFVFwiID09PSB0ID8gNCAvKiBSZXNldCAqLyA6IEwoKTtcbiAgICAgICAgfShlLnRhcmdldENoYW5nZS50YXJnZXRDaGFuZ2VUeXBlIHx8IFwiTk9fQ0hBTkdFXCIpLCBpID0gZS50YXJnZXRDaGFuZ2UudGFyZ2V0SWRzIHx8IFtdLCByID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIHQuTiA/IChVKHZvaWQgMCA9PT0gZSB8fCBcInN0cmluZ1wiID09IHR5cGVvZiBlKSwgcHQuZnJvbUJhc2U2NFN0cmluZyhlIHx8IFwiXCIpKSA6IChVKHZvaWQgMCA9PT0gZSB8fCBlIGluc3RhbmNlb2YgVWludDhBcnJheSksIFxuICAgICAgICAgICAgcHQuZnJvbVVpbnQ4QXJyYXkoZSB8fCBuZXcgVWludDhBcnJheSkpO1xuICAgICAgICB9KHQsIGUudGFyZ2V0Q2hhbmdlLnJlc3VtZVRva2VuKSwgbyA9IGUudGFyZ2V0Q2hhbmdlLmNhdXNlLCB1ID0gbyAmJiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdm9pZCAwID09PSB0LmNvZGUgPyBLLlVOS05PV04gOiBObih0LmNvZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBRKGUsIHQubWVzc2FnZSB8fCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgKG9yIG51bGwpIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50b1xuICogYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cbiAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XG4gKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZS4gQnV0IEdSUEMgYWN0dWFsbHlcbiAqIGV4cGVjdHMgYSB7IHZhbHVlOiA8bnVtYmVyPiB9IHN0cnVjdC5cbiAqLyAobyk7XG4gICAgICAgIG4gPSBuZXcgZXMocywgaSwgciwgdSB8fCBudWxsKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRDaGFuZ2VcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBzLmRvY3VtZW50LCBzLmRvY3VtZW50Lm5hbWUsIHMuZG9jdW1lbnQudXBkYXRlVGltZTtcbiAgICAgICAgY29uc3QgaSA9IG1zKHQsIHMuZG9jdW1lbnQubmFtZSksIHIgPSBmcyhzLmRvY3VtZW50LnVwZGF0ZVRpbWUpLCBvID0gbmV3IFh0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBzLmRvY3VtZW50LmZpZWxkc1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSwgdSA9IHRlLm5ld0ZvdW5kRG9jdW1lbnQoaSwgciwgbyksIGEgPSBzLnRhcmdldElkcyB8fCBbXSwgYyA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyBabihhLCBjLCB1LmtleSwgdSk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50RGVsZXRlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IG1zKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZWFkVGltZSA/IGZzKHMucmVhZFRpbWUpIDogY3QubWluKCksIG8gPSB0ZS5uZXdOb0RvY3VtZW50KGksIHIpLCB1ID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IFpuKFtdLCB1LCBvLmtleSwgbyk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50UmVtb3ZlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgcy5kb2N1bWVudDtcbiAgICAgICAgY29uc3QgaSA9IG1zKHQsIHMuZG9jdW1lbnQpLCByID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IFpuKFtdLCByLCBpLCBudWxsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIShcImZpbHRlclwiIGluIGUpKSByZXR1cm4gTCgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBlLmZpbHRlcjtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmZpbHRlcjtcbiAgICAgICAgICAgIHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5jb3VudCB8fCAwLCBpID0gbmV3IFNuKHMpLCByID0gdC50YXJnZXRJZDtcbiAgICAgICAgICAgIG4gPSBuZXcgdHMociwgaSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIGJzKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEVuKSBuID0ge1xuICAgICAgICB1cGRhdGU6IFRzKHQsIGUua2V5LCBlLnZhbHVlKVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBWbikgbiA9IHtcbiAgICAgICAgZGVsZXRlOiB3cyh0LCBlLmtleSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgQW4pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogVHModCwgZS5rZXksIGUuZGF0YSksXG4gICAgICAgIHVwZGF0ZU1hc2s6IEJzKGUuZmllbGRNYXNrKVxuICAgIH07IGVsc2Uge1xuICAgICAgICBpZiAoIShlIGluc3RhbmNlb2Ygdm4pKSByZXR1cm4gTCgpO1xuICAgICAgICBuID0ge1xuICAgICAgICAgICAgdmVyaWZ5OiB3cyh0LCBlLmtleSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIGUuZmllbGRUcmFuc2Zvcm1zLmxlbmd0aCA+IDAgJiYgKG4udXBkYXRlVHJhbnNmb3JtcyA9IGUuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnRyYW5zZm9ybTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBubikgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHNldFRvU2VydmVyVmFsdWU6IFwiUkVRVUVTVF9USU1FXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBzbikgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGFwcGVuZE1pc3NpbmdFbGVtZW50czoge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIG9uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgcmVtb3ZlQWxsRnJvbUFycmF5OiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgYW4pIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBpbmNyZW1lbnQ6IG4ua1xuICAgICAgICB9O1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfSgwLCB0KSkpKSwgZS5wcmVjb25kaXRpb24uaXNOb25lIHx8IChuLmN1cnJlbnREb2N1bWVudCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZS51cGRhdGVUaW1lID8ge1xuICAgICAgICAgICAgdXBkYXRlVGltZTogbHModCwgZS51cGRhdGVUaW1lKVxuICAgICAgICB9IDogdm9pZCAwICE9PSBlLmV4aXN0cyA/IHtcbiAgICAgICAgICAgIGV4aXN0czogZS5leGlzdHNcbiAgICAgICAgfSA6IEwoKTtcbiAgICB9KHQsIGUucHJlY29uZGl0aW9uKSksIG47XG59XG5cbmZ1bmN0aW9uIFBzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5jdXJyZW50RG9jdW1lbnQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IF9uLnVwZGF0ZVRpbWUoZnModC51cGRhdGVUaW1lKSkgOiB2b2lkIDAgIT09IHQuZXhpc3RzID8gX24uZXhpc3RzKHQuZXhpc3RzKSA6IF9uLm5vbmUoKTtcbiAgICB9KGUuY3VycmVudERvY3VtZW50KSA6IF9uLm5vbmUoKSwgcyA9IGUudXBkYXRlVHJhbnNmb3JtcyA/IGUudXBkYXRlVHJhbnNmb3Jtcy5tYXAoKGUgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbiA9IG51bGw7XG4gICAgICAgIGlmIChcInNldFRvU2VydmVyVmFsdWVcIiBpbiBlKSBVKFwiUkVRVUVTVF9USU1FXCIgPT09IGUuc2V0VG9TZXJ2ZXJWYWx1ZSksIG4gPSBuZXcgbm47IGVsc2UgaWYgKFwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzXCIgaW4gZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuYXBwZW5kTWlzc2luZ0VsZW1lbnRzLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIG4gPSBuZXcgc24odCk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJyZW1vdmVBbGxGcm9tQXJyYXlcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5yZW1vdmVBbGxGcm9tQXJyYXkudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBvbih0KTtcbiAgICAgICAgfSBlbHNlIFwiaW5jcmVtZW50XCIgaW4gZSA/IG4gPSBuZXcgYW4odCwgZS5pbmNyZW1lbnQpIDogTCgpO1xuICAgICAgICBjb25zdCBzID0gbXQuZnJvbVNlcnZlckZvcm1hdChlLmZpZWxkUGF0aCk7XG4gICAgICAgIHJldHVybiBuZXcgbG4ocywgbik7XG4gICAgfSh0LCBlKSkpIDogW107XG4gICAgaWYgKGUudXBkYXRlKSB7XG4gICAgICAgIGUudXBkYXRlLm5hbWU7XG4gICAgICAgIGNvbnN0IGkgPSBtcyh0LCBlLnVwZGF0ZS5uYW1lKSwgciA9IG5ldyBYdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogZS51cGRhdGUuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoZS51cGRhdGVNYXNrKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmZpZWxkUGF0aHMgfHwgW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBndChlLm1hcCgodCA9PiBtdC5mcm9tU2VydmVyRm9ybWF0KHQpKSkpO1xuICAgICAgICAgICAgfShlLnVwZGF0ZU1hc2spO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbihpLCByLCB0LCBuLCBzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEVuKGksIHIsIG4sIHMpO1xuICAgIH1cbiAgICBpZiAoZS5kZWxldGUpIHtcbiAgICAgICAgY29uc3QgcyA9IG1zKHQsIGUuZGVsZXRlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBWbihzLCBuKTtcbiAgICB9XG4gICAgaWYgKGUudmVyaWZ5KSB7XG4gICAgICAgIGNvbnN0IHMgPSBtcyh0LCBlLnZlcmlmeSk7XG4gICAgICAgIHJldHVybiBuZXcgdm4ocywgbik7XG4gICAgfVxuICAgIHJldHVybiBMKCk7XG59XG5cbmZ1bmN0aW9uIFZzKHQsIGUpIHtcbiAgICByZXR1cm4gdCAmJiB0Lmxlbmd0aCA+IDAgPyAoVSh2b2lkIDAgIT09IGUpLCB0Lm1hcCgodCA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE5PVEU6IERlbGV0ZXMgZG9uJ3QgaGF2ZSBhbiB1cGRhdGVUaW1lLlxuICAgICAgICBsZXQgbiA9IHQudXBkYXRlVGltZSA/IGZzKHQudXBkYXRlVGltZSkgOiBmcyhlKTtcbiAgICAgICAgcmV0dXJuIG4uaXNFcXVhbChjdC5taW4oKSkgJiYgKFxuICAgICAgICAvLyBUaGUgRmlyZXN0b3JlIEVtdWxhdG9yIGN1cnJlbnRseSByZXR1cm5zIGFuIHVwZGF0ZSB0aW1lIG9mIDAgZm9yXG4gICAgICAgIC8vIGRlbGV0ZXMgb2Ygbm9uLWV4aXN0aW5nIGRvY3VtZW50cyAocmF0aGVyIHRoYW4gbnVsbCkuIFRoaXMgYnJlYWtzIHRoZVxuICAgICAgICAvLyB0ZXN0IFwiZ2V0IGRlbGV0ZWQgZG9jIHdoaWxlIG9mZmxpbmUgd2l0aCBzb3VyY2U9Y2FjaGVcIiBhcyBOb0RvY3VtZW50c1xuICAgICAgICAvLyB3aXRoIHZlcnNpb24gMCBhcmUgZmlsdGVyZWQgYnkgSW5kZXhlZERiJ3MgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAgICAgICAgLy8gVE9ETygjMjE0OSk6IFJlbW92ZSB0aGlzIHdoZW4gRW11bGF0b3IgaXMgZml4ZWRcbiAgICAgICAgbiA9IGZzKGUpKSwgbmV3IGRuKG4sIHQudHJhbnNmb3JtUmVzdWx0cyB8fCBbXSk7XG4gICAgfSh0LCBlKSkpKSA6IFtdO1xufVxuXG5mdW5jdGlvbiB2cyh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG9jdW1lbnRzOiBbIGdzKHQsIGUucGF0aCkgXVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIFNzKHQsIGUpIHtcbiAgICAvLyBEaXNzZWN0IHRoZSBwYXRoIGludG8gcGFyZW50LCBjb2xsZWN0aW9uSWQsIGFuZCBvcHRpb25hbCBrZXkgZmlsdGVyLlxuICAgIGNvbnN0IG4gPSB7XG4gICAgICAgIHN0cnVjdHVyZWRRdWVyeToge31cbiAgICB9LCBzID0gZS5wYXRoO1xuICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwID8gKG4ucGFyZW50ID0gZ3ModCwgcyksIG4uc3RydWN0dXJlZFF1ZXJ5LmZyb20gPSBbIHtcbiAgICAgICAgY29sbGVjdGlvbklkOiBlLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgYWxsRGVzY2VuZGFudHM6ICEwXG4gICAgfSBdKSA6IChuLnBhcmVudCA9IGdzKHQsIHMucG9wTGFzdCgpKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IHMubGFzdFNlZ21lbnQoKVxuICAgIH0gXSk7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hcCgodCA9PiBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoXCI9PVwiIC8qIEVRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKGp0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IE1zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKFF0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IE1zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTlVMTFwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSBlbHNlIGlmIChcIiE9XCIgLyogTk9UX0VRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICAgICAgaWYgKGp0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IE1zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05BTlwiXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmIChRdCh0LnZhbHVlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkOiBNcyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wOiBcIklTX05PVF9OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBNcyh0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IGtzKHQub3ApLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gZVswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIG9wOiBcIkFORFwiLFxuICAgICAgICAgICAgICAgIGZpbHRlcnM6IGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9KGUuZmlsdGVycyk7XG4gICAgaSAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkud2hlcmUgPSBpKTtcbiAgICBjb25zdCByID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IE1zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgIGRpcmVjdGlvbjogTnModC5kaXIpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHQpKSk7XG4gICAgfShlLm9yZGVyQnkpO1xuICAgIHIgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5Lm9yZGVyQnkgPSByKTtcbiAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5OIHx8IFN0KGUpID8gZSA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG51bWJlciAob3IgbnVsbCkgZnJvbSBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICovICh0LCBlLmxpbWl0KTtcbiAgICB2YXIgdTtcbiAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBvKSwgZS5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0ge1xuICAgICAgICBiZWZvcmU6ICh1ID0gZS5zdGFydEF0KS5pbmNsdXNpdmUsXG4gICAgICAgIHZhbHVlczogdS5wb3NpdGlvblxuICAgIH0pLCBlLmVuZEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogIXQuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiB0LnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfShlLmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIERzKHQpIHtcbiAgICBsZXQgZSA9IHlzKHQucGFyZW50KTtcbiAgICBjb25zdCBuID0gdC5zdHJ1Y3R1cmVkUXVlcnksIHMgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHMgPiAwKSB7XG4gICAgICAgIFUoMSA9PT0gcyk7XG4gICAgICAgIGNvbnN0IHQgPSBuLmZyb21bMF07XG4gICAgICAgIHQuYWxsRGVzY2VuZGFudHMgPyBpID0gdC5jb2xsZWN0aW9uSWQgOiBlID0gZS5jaGlsZCh0LmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCByID0gW107XG4gICAgbi53aGVyZSAmJiAociA9IHhzKG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IG4ub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IFZlKE9zKHQuZmllbGQpLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIEFTQ0VORElORyAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiREVTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgKHQuZGlyZWN0aW9uKSk7XG4gICAgfSh0KSkpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAodSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHJldHVybiBlID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiB0LCBTdChlKSA/IG51bGwgOiBlO1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBhID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGEgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhIXQuYmVmb3JlLCBuID0gdC52YWx1ZXMgfHwgW107XG4gICAgICAgIHJldHVybiBuZXcgUGUobiwgZSk7XG4gICAgfShuLnN0YXJ0QXQpKTtcbiAgICBsZXQgYyA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKGMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBQZShuLCBlKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIChuLmVuZEF0KSksIHhlKGUsIGksIG8sIHIsIHUsIFwiRlwiIC8qIEZpcnN0ICovICwgYSwgYyk7XG59XG5cbmZ1bmN0aW9uIENzKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogTGlzdGVuICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgMiAvKiBMaW1ib1Jlc29sdXRpb24gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwibGltYm8tZG9jdW1lbnRcIjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICB9XG4gICAgfSgwLCBlLnB1cnBvc2UpO1xuICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDoge1xuICAgICAgICBcImdvb2ctbGlzdGVuLXRhZ3NcIjogblxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHhzKHQpIHtcbiAgICByZXR1cm4gdCA/IHZvaWQgMCAhPT0gdC51bmFyeUZpbHRlciA/IFsgJHModCkgXSA6IHZvaWQgMCAhPT0gdC5maWVsZEZpbHRlciA/IFsgRnModCkgXSA6IHZvaWQgMCAhPT0gdC5jb21wb3NpdGVGaWx0ZXIgPyB0LmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgodCA9PiB4cyh0KSkpLnJlZHVjZSgoKHQsIGUpID0+IHQuY29uY2F0KGUpKSkgOiBMKCkgOiBbXTtcbn1cblxuZnVuY3Rpb24gTnModCkge1xuICAgIHJldHVybiBvc1t0XTtcbn1cblxuZnVuY3Rpb24ga3ModCkge1xuICAgIHJldHVybiB1c1t0XTtcbn1cblxuZnVuY3Rpb24gTXModCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGZpZWxkUGF0aDogdC5jYW5vbmljYWxTdHJpbmcoKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIE9zKHQpIHtcbiAgICByZXR1cm4gbXQuZnJvbVNlcnZlckZvcm1hdCh0LmZpZWxkUGF0aCk7XG59XG5cbmZ1bmN0aW9uIEZzKHQpIHtcbiAgICByZXR1cm4gZ2UuY3JlYXRlKE9zKHQuZmllbGRGaWx0ZXIuZmllbGQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCJFUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPT1cIiAvKiBFUVVBTCAqLztcblxuICAgICAgICAgIGNhc2UgXCJOT1RfRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIiE9XCIgLyogTk9UX0VRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJHUkVBVEVSX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPFwiIC8qIExFU1NfVEhBTiAqLztcblxuICAgICAgICAgIGNhc2UgXCJMRVNTX1RIQU5fT1JfRVFVQUxcIjpcbiAgICAgICAgICAgIHJldHVybiBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovO1xuXG4gICAgICAgICAgY2FzZSBcIklOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJpblwiIC8qIElOICovO1xuXG4gICAgICAgICAgY2FzZSBcIk5PVF9JTlwiOlxuICAgICAgICAgICAgcmV0dXJuIFwibm90LWluXCIgLyogTk9UX0lOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9KHQuZmllbGRGaWx0ZXIub3ApLCB0LmZpZWxkRmlsdGVyLnZhbHVlKTtcbn1cblxuZnVuY3Rpb24gJHModCkge1xuICAgIHN3aXRjaCAodC51bmFyeUZpbHRlci5vcCkge1xuICAgICAgY2FzZSBcIklTX05BTlwiOlxuICAgICAgICBjb25zdCBlID0gT3ModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBnZS5jcmVhdGUoZSwgXCI9PVwiIC8qIEVRVUFMICovICwge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05VTExcIjpcbiAgICAgICAgY29uc3QgbiA9IE9zKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gZ2UuY3JlYXRlKG4sIFwiPT1cIiAvKiBFUVVBTCAqLyAsIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfSk7XG5cbiAgICAgIGNhc2UgXCJJU19OT1RfTkFOXCI6XG4gICAgICAgIGNvbnN0IHMgPSBPcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGdlLmNyZWF0ZShzLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05PVF9OVUxMXCI6XG4gICAgICAgIGNvbnN0IGkgPSBPcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGdlLmNyZWF0ZShpLCBcIiE9XCIgLyogTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIEwoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEJzKHQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgcmV0dXJuIHQuZmllbGRzLmZvckVhY2goKHQgPT4gZS5wdXNoKHQuY2Fub25pY2FsU3RyaW5nKCkpKSksIHtcbiAgICAgICAgZmllbGRQYXRoczogZVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIExzKHQpIHtcbiAgICAvLyBSZXNvdXJjZSBuYW1lcyBoYXZlIGF0IGxlYXN0IDQgY29tcG9uZW50cyAocHJvamVjdCBJRCwgZGF0YWJhc2UgSUQpXG4gICAgcmV0dXJuIHQubGVuZ3RoID49IDQgJiYgXCJwcm9qZWN0c1wiID09PSB0LmdldCgwKSAmJiBcImRhdGFiYXNlc1wiID09PSB0LmdldCgyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRW5jb2RlcyBhIHJlc291cmNlIHBhdGggaW50byBhIEluZGV4ZWREYi1jb21wYXRpYmxlIHN0cmluZyBmb3JtLlxuICovXG5mdW5jdGlvbiBVcyh0KSB7XG4gICAgbGV0IGUgPSBcIlwiO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7IG4rKykgZS5sZW5ndGggPiAwICYmIChlID0gR3MoZSkpLCBlID0gcXModC5nZXQobiksIGUpO1xuICAgIHJldHVybiBHcyhlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBzaW5nbGUgc2VnbWVudCBvZiBhIHJlc291cmNlIHBhdGggaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIHFzKHQsIGUpIHtcbiAgICBsZXQgbiA9IGU7XG4gICAgY29uc3QgcyA9IHQubGVuZ3RoO1xuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgczsgZSsrKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmNoYXJBdChlKTtcbiAgICAgICAgc3dpdGNoIChzKSB7XG4gICAgICAgICAgY2FzZSBcIlxcMFwiOlxuICAgICAgICAgICAgbiArPSBcIlx1MDAwMVx1MDAxMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDExXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBuICs9IHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbi8qKiBFbmNvZGVzIGEgcGF0aCBzZXBhcmF0b3IgaW50byB0aGUgZ2l2ZW4gcmVzdWx0ICovIGZ1bmN0aW9uIEdzKHQpIHtcbiAgICByZXR1cm4gdCArIFwiXHUwMDAxXHUwMDAxXCI7XG59XG5cbi8qKlxuICogRGVjb2RlcyB0aGUgZ2l2ZW4gSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0gb2YgYSByZXNvdXJjZSBwYXRoIGludG9cbiAqIGEgUmVzb3VyY2VQYXRoIGluc3RhbmNlLiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgaXMgbm90IHN1aXRhYmxlIGZvciB1c2Ugd2l0aFxuICogZGVjb2RpbmcgcmVzb3VyY2UgbmFtZXMgZnJvbSB0aGUgc2VydmVyOyB0aG9zZSBhcmUgT25lIFBsYXRmb3JtIGZvcm1hdFxuICogc3RyaW5ncy5cbiAqLyBmdW5jdGlvbiBLcyh0KSB7XG4gICAgLy8gRXZlbnQgdGhlIGVtcHR5IHBhdGggbXVzdCBlbmNvZGUgYXMgYSBwYXRoIG9mIGF0IGxlYXN0IGxlbmd0aCAyLiBBIHBhdGhcbiAgICAvLyB3aXRoIGV4YWN0bHkgMiBtdXN0IGJlIHRoZSBlbXB0eSBwYXRoLlxuICAgIGNvbnN0IGUgPSB0Lmxlbmd0aDtcbiAgICBpZiAoVShlID49IDIpLCAyID09PSBlKSByZXR1cm4gVShcIlx1MDAwMVwiID09PSB0LmNoYXJBdCgwKSAmJiBcIlx1MDAwMVwiID09PSB0LmNoYXJBdCgxKSksIF90LmVtcHR5UGF0aCgpO1xuICAgIC8vIEVzY2FwZSBjaGFyYWN0ZXJzIGNhbm5vdCBleGlzdCBwYXN0IHRoZSBzZWNvbmQtdG8tbGFzdCBwb3NpdGlvbiBpbiB0aGVcbiAgICAvLyBzb3VyY2UgdmFsdWUuXG4gICAgICAgIGNvbnN0IG4gPSBlIC0gMiwgcyA9IFtdO1xuICAgIGxldCBpID0gXCJcIjtcbiAgICBmb3IgKGxldCByID0gMDsgciA8IGU7ICkge1xuICAgICAgICAvLyBUaGUgbGFzdCB0d28gY2hhcmFjdGVycyBvZiBhIHZhbGlkIGVuY29kZWQgcGF0aCBtdXN0IGJlIGEgc2VwYXJhdG9yLCBzb1xuICAgICAgICAvLyB0aGVyZSBtdXN0IGJlIGFuIGVuZCB0byB0aGlzIHNlZ21lbnQuXG4gICAgICAgIGNvbnN0IGUgPSB0LmluZGV4T2YoXCJcdTAwMDFcIiwgcik7XG4gICAgICAgIChlIDwgMCB8fCBlID4gbikgJiYgTCgpO1xuICAgICAgICBzd2l0Y2ggKHQuY2hhckF0KGUgKyAxKSkge1xuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnN1YnN0cmluZyhyLCBlKTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgMCA9PT0gaS5sZW5ndGggPyBcbiAgICAgICAgICAgIC8vIEF2b2lkIGNvcHlpbmcgZm9yIHRoZSBjb21tb24gY2FzZSBvZiBhIHNlZ21lbnQgdGhhdCBleGNsdWRlcyBcXDBcbiAgICAgICAgICAgIC8vIGFuZCBcXDAwMVxuICAgICAgICAgICAgbyA9IG4gOiAoaSArPSBuLCBvID0gaSwgaSA9IFwiXCIpLCBzLnB1c2gobyk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTBcIjpcbiAgICAgICAgICAgIGkgKz0gdC5zdWJzdHJpbmcociwgZSksIGkgKz0gXCJcXDBcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMVwiOlxuICAgICAgICAgICAgLy8gVGhlIGVzY2FwZSBjaGFyYWN0ZXIgY2FuIGJlIHVzZWQgaW4gdGhlIG91dHB1dCB0byBlbmNvZGUgaXRzZWxmLlxuICAgICAgICAgICAgaSArPSB0LnN1YnN0cmluZyhyLCBlICsgMSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBMKCk7XG4gICAgICAgIH1cbiAgICAgICAgciA9IGUgKyAyO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IF90KHMpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBRcyA9IFsgXCJ1c2VySWRcIiwgXCJiYXRjaElkXCIgXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTmFtZSBvZiB0aGUgSW5kZXhlZERiIG9iamVjdCBzdG9yZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhlIG5hbWUgJ293bmVyJyBpcyBjaG9zZW4gdG8gZW5zdXJlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5IHdpdGhcbiAqIG9sZGVyIGNsaWVudHMgdGhhdCBvbmx5IHN1cHBvcnRlZCBzaW5nbGUgbG9ja2VkIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2VcbiAqIGxheWVyLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSBbdXNlcklkLCBlbmNvZGVkUGF0aF0ga2V5IGZvciB1c2UgaW4gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnNcbiAqIGluZGV4IHRvIGl0ZXJhdGUgb3ZlciBhbGwgYXQgZG9jdW1lbnQgbXV0YXRpb25zIGZvciBhIGdpdmVuIHBhdGggb3IgbG93ZXIuXG4gKi9cbmZ1bmN0aW9uIGpzKHQsIGUpIHtcbiAgICByZXR1cm4gWyB0LCBVcyhlKSBdO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdWxsIGluZGV4IGtleSBvZiBbdXNlcklkLCBlbmNvZGVkUGF0aCwgYmF0Y2hJZF0gZm9yIGluc2VydGluZ1xuICogYW5kIGRlbGV0aW5nIGludG8gdGhlIERiRG9jdW1lbnRNdXRhdGlvbnMgaW5kZXguXG4gKi8gZnVuY3Rpb24gV3ModCwgZSwgbikge1xuICAgIHJldHVybiBbIHQsIFVzKGUpLCBuIF07XG59XG5cbi8qKlxuICogQmVjYXVzZSB3ZSBzdG9yZSBhbGwgdGhlIHVzZWZ1bCBpbmZvcm1hdGlvbiBmb3IgdGhpcyBzdG9yZSBpbiB0aGUga2V5LFxuICogdGhlcmUgaXMgbm8gdXNlZnVsIGluZm9ybWF0aW9uIHRvIHN0b3JlIGFzIHRoZSB2YWx1ZS4gVGhlIHJhdyAodW5lbmNvZGVkKVxuICogcGF0aCBjYW5ub3QgYmUgc3RvcmVkIGJlY2F1c2UgSW5kZXhlZERiIGRvZXNuJ3Qgc3RvcmUgcHJvdG90eXBlXG4gKiBpbmZvcm1hdGlvbi5cbiAqLyBjb25zdCB6cyA9IHt9LCBIcyA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJkb2N1bWVudElkXCIgXSwgSnMgPSBbIFwicHJlZml4UGF0aFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImRvY3VtZW50SWRcIiBdLCBZcyA9IFsgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcInByZWZpeFBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgWHMgPSBbIFwiY2Fub25pY2FsSWRcIiwgXCJ0YXJnZXRJZFwiIF0sIFpzID0gWyBcInRhcmdldElkXCIsIFwicGF0aFwiIF0sIHRpID0gWyBcInBhdGhcIiwgXCJ0YXJnZXRJZFwiIF0sIGVpID0gWyBcImNvbGxlY3Rpb25JZFwiLCBcInBhcmVudFwiIF0sIG5pID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiBdLCBzaSA9IFsgXCJ1aWRcIiwgXCJzZXF1ZW5jZU51bWJlclwiIF0sIGlpID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJhcnJheVZhbHVlXCIsIFwiZGlyZWN0aW9uYWxWYWx1ZVwiLCBcImRvY3VtZW50S2V5XCIgXSwgcmkgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiLCBcImRvY3VtZW50S2V5XCIgXSwgb2kgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvblBhdGhcIiwgXCJkb2N1bWVudElkXCIgXSwgdWkgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvblBhdGhcIiwgXCJsYXJnZXN0QmF0Y2hJZFwiIF0sIGFpID0gWyBcInVzZXJJZFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgY2kgPSBbIC4uLlsgLi4uWyAuLi5bIC4uLlsgXCJtdXRhdGlvblF1ZXVlc1wiLCBcIm11dGF0aW9uc1wiLCBcImRvY3VtZW50TXV0YXRpb25zXCIsIFwicmVtb3RlRG9jdW1lbnRzXCIsIFwidGFyZ2V0c1wiLCBcIm93bmVyXCIsIFwidGFyZ2V0R2xvYmFsXCIsIFwidGFyZ2V0RG9jdW1lbnRzXCIgXSwgXCJjbGllbnRNZXRhZGF0YVwiIF0sIFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIiBdLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIgXSwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIgXSwgaGkgPSBbIC4uLmNpLCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBsaSA9IFsgXCJtdXRhdGlvblF1ZXVlc1wiLCBcIm11dGF0aW9uc1wiLCBcImRvY3VtZW50TXV0YXRpb25zXCIsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIFwidGFyZ2V0c1wiLCBcIm93bmVyXCIsIFwidGFyZ2V0R2xvYmFsXCIsIFwidGFyZ2V0RG9jdW1lbnRzXCIsIFwiY2xpZW50TWV0YWRhdGFcIiwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiLCBcImNvbGxlY3Rpb25QYXJlbnRzXCIsIFwiYnVuZGxlc1wiLCBcIm5hbWVkUXVlcmllc1wiLCBcImRvY3VtZW50T3ZlcmxheXNcIiBdLCBmaSA9IFsgLi4ubGksIFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIFwiaW5kZXhTdGF0ZVwiLCBcImluZGV4RW50cmllc1wiIF07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jb25zdCBkaSA9IFwiVGhlIGN1cnJlbnQgdGFiIGlzIG5vdCBpbiB0aGUgcmVxdWlyZWQgc3RhdGUgdG8gcGVyZm9ybSB0aGlzIG9wZXJhdGlvbi4gSXQgbWlnaHQgYmUgbmVjZXNzYXJ5IHRvIHJlZnJlc2ggdGhlIGJyb3dzZXIgdGFiLlwiO1xuXG4vKipcbiAqIEEgYmFzZSBjbGFzcyByZXByZXNlbnRpbmcgYSBwZXJzaXN0ZW5jZSB0cmFuc2FjdGlvbiwgZW5jYXBzdWxhdGluZyBib3RoIHRoZVxuICogdHJhbnNhY3Rpb24ncyBzZXF1ZW5jZSBudW1iZXJzIGFzIHdlbGwgYXMgYSBsaXN0IG9mIG9uQ29tbWl0dGVkIGxpc3RlbmVycy5cbiAqXG4gKiBXaGVuIHlvdSBjYWxsIFBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKCksIGl0IHdpbGwgY3JlYXRlIGEgdHJhbnNhY3Rpb24gYW5kXG4gKiBwYXNzIGl0IHRvIHlvdXIgY2FsbGJhY2suIFlvdSB0aGVuIHBhc3MgaXQgdG8gYW55IG1ldGhvZCB0aGF0IG9wZXJhdGVzXG4gKiBvbiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyBfaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMgPSBbXTtcbiAgICB9XG4gICAgYWRkT25Db21taXR0ZWRMaXN0ZW5lcih0KSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMucHVzaCh0KTtcbiAgICB9XG4gICAgcmFpc2VPbkNvbW1pdHRlZEV2ZW50KCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLmZvckVhY2goKHQgPT4gdCgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQZXJzaXN0ZW5jZVByb21pc2UgaXMgZXNzZW50aWFsbHkgYSByZS1pbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlIGV4Y2VwdFxuICogaXQgaGFzIGEgLm5leHQoKSBtZXRob2QgaW5zdGVhZCBvZiAudGhlbigpIGFuZCAubmV4dCgpIGFuZCAuY2F0Y2goKSBjYWxsYmFja3NcbiAqIGFyZSBleGVjdXRlZCBzeW5jaHJvbm91c2x5IHdoZW4gYSBQZXJzaXN0ZW5jZVByb21pc2UgcmVzb2x2ZXMgcmF0aGVyIHRoYW5cbiAqIGFzeW5jaHJvbm91c2x5IChQcm9taXNlIGltcGxlbWVudGF0aW9ucyB1c2Ugc2V0SW1tZWRpYXRlKCkgb3Igc2ltaWxhcikuXG4gKlxuICogVGhpcyBpcyBuZWNlc3NhcnkgdG8gaW50ZXJvcGVyYXRlIHdpdGggSW5kZXhlZERCIHdoaWNoIHdpbGwgYXV0b21hdGljYWxseVxuICogY29tbWl0IHRyYW5zYWN0aW9ucyBpZiBjb250cm9sIGlzIHJldHVybmVkIHRvIHRoZSBldmVudCBsb29wIHdpdGhvdXRcbiAqIHN5bmNocm9ub3VzbHkgaW5pdGlhdGluZyBhbm90aGVyIG9wZXJhdGlvbiBvbiB0aGUgdHJhbnNhY3Rpb24uXG4gKlxuICogTk9URTogLnRoZW4oKSBhbmQgLmNhdGNoKCkgb25seSBhbGxvdyBhIHNpbmdsZSBjb25zdW1lciwgdW5saWtlIG5vcm1hbFxuICogUHJvbWlzZXMuXG4gKi8gY2xhc3Mgd2kge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gTk9URTogbmV4dC9jYXRjaENhbGxiYWNrIHdpbGwgYWx3YXlzIHBvaW50IHRvIG91ciBvd24gd3JhcHBlciBmdW5jdGlvbnMsXG4gICAgICAgIC8vIG5vdCB0aGUgdXNlcidzIHJhdyBuZXh0KCkgb3IgY2F0Y2goKSBjYWxsYmFja3MuXG4gICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gbnVsbCwgdGhpcy5jYXRjaENhbGxiYWNrID0gbnVsbCwgXG4gICAgICAgIC8vIFdoZW4gdGhlIG9wZXJhdGlvbiByZXNvbHZlcywgd2UnbGwgc2V0IHJlc3VsdCBvciBlcnJvciBhbmQgbWFyayBpc0RvbmUuXG4gICAgICAgIHRoaXMucmVzdWx0ID0gdm9pZCAwLCB0aGlzLmVycm9yID0gdm9pZCAwLCB0aGlzLmlzRG9uZSA9ICExLCBcbiAgICAgICAgLy8gU2V0IHRvIHRydWUgd2hlbiAudGhlbigpIG9yIC5jYXRjaCgpIGFyZSBjYWxsZWQgYW5kIHByZXZlbnRzIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gY2hhaW5pbmcuXG4gICAgICAgIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICExLCB0KCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMucmVzdWx0ID0gdCwgdGhpcy5uZXh0Q2FsbGJhY2sgJiYgXG4gICAgICAgICAgICAvLyB2YWx1ZSBzaG91bGQgYmUgZGVmaW5lZCB1bmxlc3MgVCBpcyBWb2lkLCBidXQgd2UgY2FuJ3QgZXhwcmVzc1xuICAgICAgICAgICAgLy8gdGhhdCBpbiB0aGUgdHlwZSBzeXN0ZW0uXG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayh0KTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaXNEb25lID0gITAsIHRoaXMuZXJyb3IgPSB0LCB0aGlzLmNhdGNoQ2FsbGJhY2sgJiYgdGhpcy5jYXRjaENhbGxiYWNrKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNhdGNoKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmV4dCh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICBuZXh0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCAmJiBMKCksIHRoaXMuY2FsbGJhY2tBdHRhY2hlZCA9ICEwLCB0aGlzLmlzRG9uZSA/IHRoaXMuZXJyb3IgPyB0aGlzLndyYXBGYWlsdXJlKGUsIHRoaXMuZXJyb3IpIDogdGhpcy53cmFwU3VjY2Vzcyh0LCB0aGlzLnJlc3VsdCkgOiBuZXcgd2koKChuLCBzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHRDYWxsYmFjayA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcFN1Y2Nlc3ModCwgZSkubmV4dChuLCBzKTtcbiAgICAgICAgICAgIH0sIHRoaXMuY2F0Y2hDYWxsYmFjayA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMud3JhcEZhaWx1cmUoZSwgdCkubmV4dChuLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdG9Qcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm5leHQodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgd3JhcFVzZXJGdW5jdGlvbih0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdCgpO1xuICAgICAgICAgICAgcmV0dXJuIGUgaW5zdGFuY2VvZiB3aSA/IGUgOiB3aS5yZXNvbHZlKGUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gd2kucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyYXBTdWNjZXNzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IHQoZSkpKSA6IHdpLnJlc29sdmUoZSk7XG4gICAgfVxuICAgIHdyYXBGYWlsdXJlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQgPyB0aGlzLndyYXBVc2VyRnVuY3Rpb24oKCgpID0+IHQoZSkpKSA6IHdpLnJlamVjdChlKTtcbiAgICB9XG4gICAgc3RhdGljIHJlc29sdmUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHdpKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgZSh0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVqZWN0KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3aSgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIG4odCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIHdhaXRGb3IoXG4gICAgLy8gQWNjZXB0IGFsbCBQcm9taXNlIHR5cGVzIGluIHdhaXRGb3IoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3aSgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGxldCBzID0gMCwgaSA9IDAsIHIgPSAhMTtcbiAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgKytzLCB0Lm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKytpLCByICYmIGkgPT09IHMgJiYgZSgpO1xuICAgICAgICAgICAgICAgIH0pLCAodCA9PiBuKHQpKSk7XG4gICAgICAgICAgICB9KSksIHIgPSAhMCwgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgcHJlZGljYXRlIGZ1bmN0aW9ucyB0aGF0IGFzeW5jaHJvbm91c2x5IGV2YWx1YXRlIHRvIGFcbiAgICAgKiBib29sZWFuLCBpbXBsZW1lbnRzIGEgc2hvcnQtY2lyY3VpdGluZyBgb3JgIGJldHdlZW4gdGhlIHJlc3VsdHMuIFByZWRpY2F0ZXNcbiAgICAgKiB3aWxsIGJlIGV2YWx1YXRlZCB1bnRpbCBvbmUgb2YgdGhlbSByZXR1cm5zIGB0cnVlYCwgdGhlbiBzdG9wLiBUaGUgZmluYWxcbiAgICAgKiByZXN1bHQgd2lsbCBiZSB3aGV0aGVyIGFueSBvZiB0aGVtIHJldHVybmVkIGB0cnVlYC5cbiAgICAgKi8gICAgc3RhdGljIG9yKHQpIHtcbiAgICAgICAgbGV0IGUgPSB3aS5yZXNvbHZlKCExKTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLm5leHQoKHQgPT4gdCA/IHdpLnJlc29sdmUodCkgOiBuKCkpKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHN0YXRpYyBmb3JFYWNoKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgcykgPT4ge1xuICAgICAgICAgICAgbi5wdXNoKGUuY2FsbCh0aGlzLCB0LCBzKSk7XG4gICAgICAgIH0pKSwgdGhpcy53YWl0Rm9yKG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgU2ltcGxlRGIuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIFdyYXBzIGFuIElEQlRyYW5zYWN0aW9uIGFuZCBleHBvc2VzIGEgc3RvcmUoKSBtZXRob2QgdG8gZ2V0IGEgaGFuZGxlIHRvIGFcbiAqIHNwZWNpZmljIG9iamVjdCBzdG9yZS5cbiAqL1xuY2xhc3MgbWkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5hY3Rpb24gPSB0LCB0aGlzLnRyYW5zYWN0aW9uID0gZSwgdGhpcy5hYm9ydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXN1bHQgb2YgdGhlIEluZGV4ZWREYiB0cmFuc2FjdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuQXQgPSBuZXcgaiwgdGhpcy50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5BdC5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25hYm9ydCA9ICgpID0+IHtcbiAgICAgICAgICAgIGUuZXJyb3IgPyB0aGlzLkF0LnJlamVjdChuZXcgcGkodCwgZS5lcnJvcikpIDogdGhpcy5BdC5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IFJpKGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuQXQucmVqZWN0KG5ldyBwaSh0LCBuKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBvcGVuKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgbWkoZSwgdC50cmFuc2FjdGlvbihzLCBuKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBwaShlLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgUnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkF0LnByb21pc2U7XG4gICAgfVxuICAgIGFib3J0KHQpIHtcbiAgICAgICAgdCAmJiB0aGlzLkF0LnJlamVjdCh0KSwgdGhpcy5hYm9ydGVkIHx8IChPKFwiU2ltcGxlRGJcIiwgXCJBYm9ydGluZyB0cmFuc2FjdGlvbjpcIiwgdCA/IHQubWVzc2FnZSA6IFwiQ2xpZW50LWluaXRpYXRlZCBhYm9ydFwiKSwgXG4gICAgICAgIHRoaXMuYWJvcnRlZCA9ICEwLCB0aGlzLnRyYW5zYWN0aW9uLmFib3J0KCkpO1xuICAgIH1cbiAgICBidCgpIHtcbiAgICAgICAgLy8gSWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgVjMgSW5kZXhlZERCLCB3ZSBpbnZva2UgY29tbWl0KCkgZXhwbGljaXRseSB0b1xuICAgICAgICAvLyBzcGVlZCB1cCBpbmRleCBEQiBwcm9jZXNzaW5nIGlmIHRoZSBldmVudCBsb29wIHJlbWFpbnMgYmxvY2tzLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFuc2FjdGlvbjtcbiAgICAgICAgdGhpcy5hYm9ydGVkIHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdC5jb21taXQgfHwgdC5jb21taXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFNpbXBsZURiU3RvcmU8S2V5VHlwZSwgVmFsdWVUeXBlPiBmb3IgdGhlIHNwZWNpZmllZCBzdG9yZS4gQWxsXG4gICAgICogb3BlcmF0aW9ucyBwZXJmb3JtZWQgb24gdGhlIFNpbXBsZURiU3RvcmUgaGFwcGVuIHdpdGhpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogdHJhbnNhY3Rpb24gYW5kIGl0IGNhbm5vdCBiZSB1c2VkIGFueW1vcmUgb25jZSB0aGUgdHJhbnNhY3Rpb24gaXNcbiAgICAgKiBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgd2UgY2FuJ3QgYWN0dWFsbHkgZW5mb3JjZSB0aGF0IHRoZSBLZXlUeXBlIGFuZCBWYWx1ZVR5cGUgYXJlXG4gICAgICogY29ycmVjdCwgYnV0IHRoZXkgYWxsb3cgdHlwZSBzYWZldHkgdGhyb3VnaCB0aGUgcmVzdCBvZiB0aGUgY29uc3VtaW5nIGNvZGUuXG4gICAgICovICAgIHN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUodCk7XG4gICAgICAgIHJldHVybiBuZXcgVGkoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgSW5kZXhlZERiIHdpdGggYSBzaW1wbGlmaWVkIGludGVyZmFjZSB0aGF0IHVzZXNcbiAqIFByb21pc2UtbGlrZSByZXR1cm4gdmFsdWVzIHRvIGNoYWluIG9wZXJhdGlvbnMuIFJlYWwgcHJvbWlzZXMgY2Fubm90IGJlIHVzZWRcbiAqIHNpbmNlIC50aGVuKCkgY29udGludWF0aW9ucyBhcmUgZXhlY3V0ZWQgYXN5bmNocm9ub3VzbHkgKGUuZy4gdmlhXG4gKiAuc2V0SW1tZWRpYXRlKSwgd2hpY2ggd291bGQgY2F1c2UgSW5kZXhlZERCIHRvIGVuZCB0aGUgdHJhbnNhY3Rpb24uXG4gKiBTZWUgUGVyc2lzdGVuY2VQcm9taXNlIGZvciBtb3JlIGRldGFpbHMuXG4gKi8gY2xhc3MgZ2kge1xuICAgIC8qXG4gICAgICogQ3JlYXRlcyBhIG5ldyBTaW1wbGVEYiB3cmFwcGVyIGZvciBJbmRleGVkRGIgZGF0YWJhc2UgYG5hbWVgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGB2ZXJzaW9uYCBtdXN0IG5vdCBiZSBhIGRvd25ncmFkZS4gSW5kZXhlZERCIGRvZXMgbm90IHN1cHBvcnRcbiAgICAgKiBkb3duZ3JhZGluZyB0aGUgc2NoZW1hIHZlcnNpb24uIFdlIGN1cnJlbnRseSBkbyBub3Qgc3VwcG9ydCBhbnkgd2F5IHRvIGRvXG4gICAgICogdmVyc2lvbmluZyBvdXRzaWRlIG9mIEluZGV4ZWREQidzIHZlcnNpb25pbmcgbWVjaGFuaXNtLCBhcyBvbmx5XG4gICAgICogdmVyc2lvbi11cGdyYWRlIHRyYW5zYWN0aW9ucyBhcmUgYWxsb3dlZCB0byBkbyB0aGluZ3MgbGlrZSBjcmVhdGVcbiAgICAgKiBvYmplY3RzdG9yZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLm5hbWUgPSB0LCB0aGlzLnZlcnNpb24gPSBlLCB0aGlzLlB0ID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBnaS5WdChnZXRVQSgpKSAmJiBGKFwiRmlyZXN0b3JlIHBlcnNpc3RlbmNlIHN1ZmZlcnMgZnJvbSBhIGJ1ZyBpbiBpT1MgMTIuMiBTYWZhcmkgdGhhdCBtYXkgY2F1c2UgeW91ciBhcHAgdG8gc3RvcCB3b3JraW5nLiBTZWUgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xLzU2NDk2Mjk2LzExMDkxNSBmb3IgZGV0YWlscyBhbmQgYSBwb3RlbnRpYWwgd29ya2Fyb3VuZC5cIik7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIHRoZSBzcGVjaWZpZWQgZGF0YWJhc2UuICovICAgIHN0YXRpYyBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gTyhcIlNpbXBsZURiXCIsIFwiUmVtb3ZpbmcgZGF0YWJhc2U6XCIsIHQpLCBFaSh3aW5kb3cuaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKHQpKS50b1Byb21pc2UoKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBJbmRleGVkREIgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgdnQoKSB7XG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAoZ2kuU3QoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZ2V0VUEoKSwgZSA9IGdpLlZ0KHQpLCBuID0gMCA8IGUgJiYgZSA8IDEwLCBzID0gZ2kuRHQodCksIGkgPSAwIDwgcyAmJiBzIDwgNC41O1xuICAgICAgICAvLyBJRSAxMFxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoY29tcGF0aWJsZTsgTVNJRSAxMC4wOyBXaW5kb3dzIE5UIDYuMjsgVHJpZGVudC82LjApJztcbiAgICAgICAgLy8gSUUgMTFcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgNi4zOyBUcmlkZW50LzcuMDsgcnY6MTEuMCkgbGlrZSBHZWNrbyc7XG4gICAgICAgIC8vIEVkZ2VcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV09XNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsXG4gICAgICAgIC8vIGxpa2UgR2Vja28pIENocm9tZS8zOS4wLjIxNzEuNzEgU2FmYXJpLzUzNy4zNiBFZGdlLzEyLjAnO1xuICAgICAgICAvLyBpT1MgU2FmYXJpOiBEaXNhYmxlIGZvciB1c2VycyBydW5uaW5nIGlPUyB2ZXJzaW9uIDwgMTAuXG4gICAgICAgICAgICAgICAgcmV0dXJuICEodC5pbmRleE9mKFwiTVNJRSBcIikgPiAwIHx8IHQuaW5kZXhPZihcIlRyaWRlbnQvXCIpID4gMCB8fCB0LmluZGV4T2YoXCJFZGdlL1wiKSA+IDAgfHwgbiB8fCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBiYWNraW5nIEluZGV4ZWREQiBzdG9yZSBpcyB0aGUgTm9kZSBJbmRleGVkREJTaGltXG4gICAgICogKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0pLlxuICAgICAqLyAgICBzdGF0aWMgU3QoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKHQgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5DdCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmcm9tIGEgdHJhbnNhY3Rpb24uICovICAgIHN0YXRpYyB4dCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIGlPUyB2ZXJzaW9uLiBSZXR1cm5zIC0xIGlmIG5vdCBmb3VuZC4gKi9cbiAgICBzdGF0aWMgVnQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBEdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9BbmRyb2lkIChbXFxkLl0rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiLlwiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZSwgY3JlYXRpbmcgb3IgdXBncmFkaW5nIGl0IGlmIG5lY2Vzc2FyeS5cbiAgICAgKi8gICAgYXN5bmMgTnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYiB8fCAoTyhcIlNpbXBsZURiXCIsIFwiT3BlbmluZyBkYXRhYmFzZTpcIiwgdGhpcy5uYW1lKSwgdGhpcy5kYiA9IGF3YWl0IG5ldyBQcm9taXNlKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBJbnZlc3RpZ2F0ZSBicm93c2VyIGNvbXBhdGliaWxpdHkuXG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSW5kZXhlZERCX0FQSS9Vc2luZ19JbmRleGVkREJcbiAgICAgICAgICAgIC8vIHN1Z2dlc3RzIElFOSBhbmQgb2xkZXIgV2ViS2l0IGJyb3dzZXJzIGhhbmRsZSB1cGdyYWRlXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnRseS4gVGhleSBleHBlY3Qgc2V0VmVyc2lvbiwgYXMgZGVzY3JpYmVkIGhlcmU6XG4gICAgICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvSURCVmVyc2lvbkNoYW5nZVJlcXVlc3Qvc2V0VmVyc2lvblxuICAgICAgICAgICAgY29uc3QgcyA9IGluZGV4ZWREQi5vcGVuKHRoaXMubmFtZSwgdGhpcy52ZXJzaW9uKTtcbiAgICAgICAgICAgIHMub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBlKG4pO1xuICAgICAgICAgICAgfSwgcy5vbmJsb2NrZWQgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbihuZXcgcGkodCwgXCJDYW5ub3QgdXBncmFkZSBJbmRleGVkREIgc2NoZW1hIHdoaWxlIGFub3RoZXIgdGFiIGlzIG9wZW4uIENsb3NlIGFsbCB0YWJzIHRoYXQgYWNjZXNzIEZpcmVzdG9yZSBhbmQgcmVsb2FkIHRoaXMgcGFnZSB0byBwcm9jZWVkLlwiKSk7XG4gICAgICAgICAgICB9LCBzLm9uZXJyb3IgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQuZXJyb3I7XG4gICAgICAgICAgICAgICAgXCJWZXJzaW9uRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBGaXJlc3RvcmUgU0RLIHdhcyBwcmV2aW91c2x5IHVzZWQgYW5kIHNvIHRoZSBwZXJzaXN0ZWQgZGF0YSBpcyBub3QgY29tcGF0aWJsZSB3aXRoIHRoZSB2ZXJzaW9uIG9mIHRoZSBTREsgeW91IGFyZSBub3cgdXNpbmcuIFRoZSBTREsgd2lsbCBvcGVyYXRlIHdpdGggcGVyc2lzdGVuY2UgZGlzYWJsZWQuIElmIHlvdSBuZWVkIHBlcnNpc3RlbmNlLCBwbGVhc2UgcmUtdXBncmFkZSB0byBhIG5ld2VyIHZlcnNpb24gb2YgdGhlIFNESyBvciBlbHNlIGNsZWFyIHRoZSBwZXJzaXN0ZWQgSW5kZXhlZERCIGRhdGEgZm9yIHlvdXIgYXBwIHRvIHN0YXJ0IGZyZXNoLlwiKSkgOiBcIkludmFsaWRTdGF0ZUVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlVuYWJsZSB0byBvcGVuIGFuIEluZGV4ZWREQiBjb25uZWN0aW9uLiBUaGlzIGNvdWxkIGJlIGR1ZSB0byBydW5uaW5nIGluIGEgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9uIG9uIGEgYnJvd3NlciB3aG9zZSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb25zIGRvIG5vdCBzdXBwb3J0IEluZGV4ZWREQjogXCIgKyBzKSkgOiBuKG5ldyBwaSh0LCBzKSk7XG4gICAgICAgICAgICB9LCBzLm9udXBncmFkZW5lZWRlZCA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIE8oXCJTaW1wbGVEYlwiLCAnRGF0YWJhc2UgXCInICsgdGhpcy5uYW1lICsgJ1wiIHJlcXVpcmVzIHVwZ3JhZGUgZnJvbSB2ZXJzaW9uOicsIHQub2xkVmVyc2lvbik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLlB0Lmt0KGUsIHMudHJhbnNhY3Rpb24sIHQub2xkVmVyc2lvbiwgdGhpcy52ZXJzaW9uKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkRhdGFiYXNlIHVwZ3JhZGUgdG8gdmVyc2lvbiBcIiArIHRoaXMudmVyc2lvbiArIFwiIGNvbXBsZXRlXCIpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKSksIHRoaXMuTXQgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gdCA9PiB0aGlzLk10KHQpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgT3QodCkge1xuICAgICAgICB0aGlzLk10ID0gdCwgdGhpcy5kYiAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSBlID0+IHQoZSkpO1xuICAgIH1cbiAgICBhc3luYyBydW5UcmFuc2FjdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBcInJlYWRvbmx5XCIgPT09IGU7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgZm9yICg7Oykge1xuICAgICAgICAgICAgKytyO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRiID0gYXdhaXQgdGhpcy5OdCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbWkub3Blbih0aGlzLmRiLCB0LCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHIgPSBzKGUpLm5leHQoKHQgPT4gKGUuYnQoKSwgXG4gICAgICAgICAgICAgICAgdCkpKS5jYXRjaCgodCA9PiAoXG4gICAgICAgICAgICAgICAgLy8gQWJvcnQgdGhlIHRyYW5zYWN0aW9uIGlmIHRoZXJlIHdhcyBhbiBlcnJvci5cbiAgICAgICAgICAgICAgICBlLmFib3J0KHQpLCB3aS5yZWplY3QodCkpKSkudG9Qcm9taXNlKCk7XG4gICAgICAgICAgICAgICAgLy8gQXMgbm90ZWQgYWJvdmUsIGVycm9ycyBhcmUgcHJvcGFnYXRlZCBieSBhYm9ydGluZyB0aGUgdHJhbnNhY3Rpb24uIFNvXG4gICAgICAgICAgICAgICAgLy8gd2Ugc3dhbGxvdyBhbnkgZXJyb3IgaGVyZSB0byBhdm9pZCB0aGUgYnJvd3NlciBsb2dnaW5nIGl0IGFzIHVuaGFuZGxlZC5cbiAgICAgICAgICAgICAgICByZXR1cm4gci5jYXRjaCgoKCkgPT4ge30pKSwgXG4gICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHRyYW5zYWN0aW9uIHRvIGNvbXBsZXRlIChpLmUuIEluZGV4ZWREYidzIG9uc3VjY2VzcyBldmVudCB0b1xuICAgICAgICAgICAgICAgIC8vIGZpcmUpLCBidXQgc3RpbGwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0cmFuc2FjdGlvbkZuUmVzdWx0IGJhY2sgdG8gdGhlXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVyLlxuICAgICAgICAgICAgICAgIGF3YWl0IGUuUnQsIHI7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhzY2htaWR0LXNlYmFzdGlhbik6IFdlIGNvdWxkIHByb2JhYmx5IGJlIHNtYXJ0ZXIgYWJvdXQgdGhpcyBhbmRcbiAgICAgICAgICAgICAgICAvLyBub3QgcmV0cnkgZXhjZXB0aW9ucyB0aGF0IGFyZSBsaWtlbHkgdW5yZWNvdmVyYWJsZSAoc3VjaCBhcyBxdW90YVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VlZGVkIGVycm9ycykuXG4gICAgICAgICAgICAgICAgLy8gTm90ZTogV2UgY2Fubm90IHVzZSBhbiBpbnN0YW5jZW9mIGNoZWNrIGZvciBGaXJlc3RvcmVFeGNlcHRpb24sIHNpbmNlIHRoZVxuICAgICAgICAgICAgICAgIC8vIGV4Y2VwdGlvbiBpcyB3cmFwcGVkIGluIGEgZ2VuZXJpYyBlcnJvciBieSBvdXIgYXN5bmMvYXdhaXQgaGFuZGxpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFwiRmlyZWJhc2VFcnJvclwiICE9PSB0Lm5hbWUgJiYgciA8IDM7XG4gICAgICAgICAgICAgICAgaWYgKE8oXCJTaW1wbGVEYlwiLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCB0Lm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIGUpLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFlKSByZXR1cm4gUHJvbWlzZS5yZWplY3QodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyB5aSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkZ0ID0gdCwgdGhpcy4kdCA9ICExLCB0aGlzLkJ0ID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHQ7XG4gICAgfVxuICAgIGdldCBMdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQnQ7XG4gICAgfVxuICAgIHNldCBjdXJzb3IodCkge1xuICAgICAgICB0aGlzLkZ0ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHN0b3AgaXRlcmF0aW9uIGF0IGFueSBwb2ludC5cbiAgICAgKi8gICAgZG9uZSgpIHtcbiAgICAgICAgdGhpcy4kdCA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc2tpcCB0byB0aGF0IG5leHQga2V5LCB3aGljaCBjb3VsZCBiZVxuICAgICAqIGFuIGluZGV4IG9yIGEgcHJpbWFyeSBrZXkuXG4gICAgICovICAgIFV0KHQpIHtcbiAgICAgICAgdGhpcy5CdCA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZSB0aGUgY3VycmVudCBjdXJzb3IgdmFsdWUgZnJvbSB0aGUgb2JqZWN0IHN0b3JlLlxuICAgICAqXG4gICAgICogTk9URTogWW91IENBTk5PVCBkbyB0aGlzIHdpdGggYSBrZXlzT25seSBxdWVyeS5cbiAgICAgKi8gICAgZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gRWkodGhpcy5GdC5kZWxldGUoKSk7XG4gICAgfVxufVxuXG4vKiogQW4gZXJyb3IgdGhhdCB3cmFwcyBleGNlcHRpb25zIHRoYXQgdGhyb3duIGR1cmluZyBJbmRleGVkREIgZXhlY3V0aW9uLiAqLyBjbGFzcyBwaSBleHRlbmRzIFEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoSy5VTkFWQUlMQUJMRSwgYEluZGV4ZWREQiB0cmFuc2FjdGlvbiAnJHt0fScgZmFpbGVkOiAke2V9YCksIHRoaXMubmFtZSA9IFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiO1xuICAgIH1cbn1cblxuLyoqIFZlcmlmaWVzIHdoZXRoZXIgYGVgIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuICovIGZ1bmN0aW9uIElpKHQpIHtcbiAgICAvLyBVc2UgbmFtZSBlcXVhbGl0eSwgYXMgaW5zdGFuY2VvZiBjaGVja3Mgb24gZXJyb3JzIGRvbid0IHdvcmsgd2l0aCBlcnJvcnNcbiAgICAvLyB0aGF0IHdyYXAgb3RoZXIgZXJyb3JzLlxuICAgIHJldHVybiBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIiA9PT0gdC5uYW1lO1xufVxuXG4vKipcbiAqIEEgd3JhcHBlciBhcm91bmQgYW4gSURCT2JqZWN0U3RvcmUgcHJvdmlkaW5nIGFuIEFQSSB0aGF0OlxuICpcbiAqIDEpIEhhcyBnZW5lcmljIEtleVR5cGUgLyBWYWx1ZVR5cGUgcGFyYW1ldGVycyB0byBwcm92aWRlIHN0cm9uZ2x5LXR5cGVkXG4gKiBtZXRob2RzIGZvciBhY3RpbmcgYWdhaW5zdCB0aGUgb2JqZWN0IHN0b3JlLlxuICogMikgRGVhbHMgd2l0aCBJbmRleGVkREIncyBvbnN1Y2Nlc3MgLyBvbmVycm9yIGV2ZW50IGNhbGxiYWNrcywgbWFraW5nIGV2ZXJ5XG4gKiBtZXRob2QgcmV0dXJuIGEgUGVyc2lzdGVuY2VQcm9taXNlIGluc3RlYWQuXG4gKiAzKSBQcm92aWRlcyBhIGhpZ2hlci1sZXZlbCBBUEkgdG8gYXZvaWQgbmVlZGluZyB0byBkbyBleGNlc3NpdmUgd3JhcHBpbmcgb2ZcbiAqIGludGVybWVkaWF0ZSBJbmRleGVkREIgdHlwZXMgKElEQkN1cnNvcldpdGhWYWx1ZSwgZXRjLilcbiAqLyBjbGFzcyBUaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnN0b3JlID0gdDtcbiAgICB9XG4gICAgcHV0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGUgPyAoTyhcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIG4gPSB0aGlzLnN0b3JlLnB1dChlLCB0KSkgOiAoTyhcIlNpbXBsZURiXCIsIFwiUFVUXCIsIHRoaXMuc3RvcmUubmFtZSwgXCI8YXV0by1rZXk+XCIsIHQpLCBcbiAgICAgICAgbiA9IHRoaXMuc3RvcmUucHV0KHQpKSwgRWkobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgdmFsdWUgaW50byBhbiBPYmplY3QgU3RvcmUgYW5kIHJldHVybnMgdGhlIG5ldyBrZXkuIFNpbWlsYXIgdG9cbiAgICAgKiBJbmRleGVkRGIncyBgYWRkKClgLCB0aGlzIG1ldGhvZCB3aWxsIGZhaWwgb24gcHJpbWFyeSBrZXkgY29sbGlzaW9ucy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSBvYmplY3QgdG8gd3JpdGUuXG4gICAgICogQHJldHVybnMgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gYWRkLlxuICAgICAqLyAgICBhZGQodCkge1xuICAgICAgICBPKFwiU2ltcGxlRGJcIiwgXCJBRERcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCB0KTtcbiAgICAgICAgcmV0dXJuIEVpKHRoaXMuc3RvcmUuYWRkKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgZnJvbSB0aGUgc3BlY2lmaWVkIHN0b3JlLCBvciBudWxsXG4gICAgICogaWYgbm8gb2JqZWN0IGV4aXN0cyB3aXRoIHRoZSBzcGVjaWZpZWQga2V5LlxuICAgICAqXG4gICAgICogQGtleSBUaGUga2V5IG9mIHRoZSBvYmplY3QgdG8gZ2V0LlxuICAgICAqIEByZXR1cm5zIFRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBvciBudWxsIGlmIG5vIG9iamVjdCBleGlzdHMuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIC8vIFdlJ3JlIGRvaW5nIGFuIHVuc2FmZSBjYXN0IHRvIFZhbHVlVHlwZS5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIEVpKHRoaXMuc3RvcmUuZ2V0KHQpKS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gTm9ybWFsaXplIG5vbmV4aXN0ZW5jZSB0byBudWxsLlxuICAgICAgICB2b2lkIDAgPT09IGUgJiYgKGUgPSBudWxsKSwgTyhcIlNpbXBsZURiXCIsIFwiR0VUXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgZSksIGUpKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkRFTEVURVwiLCB0aGlzLnN0b3JlLm5hbWUsIHQpO1xuICAgICAgICByZXR1cm4gRWkodGhpcy5zdG9yZS5kZWxldGUodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB3ZSBldmVyIG5lZWQgbW9yZSBvZiB0aGUgY291bnQgdmFyaWFudHMsIHdlIGNhbiBhZGQgb3ZlcmxvYWRzLiBGb3Igbm93LFxuICAgICAqIGFsbCB3ZSBuZWVkIGlzIHRvIGNvdW50IGV2ZXJ5dGhpbmcgaW4gYSBzdG9yZS5cbiAgICAgKlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiByb3dzIGluIHRoZSBzdG9yZS5cbiAgICAgKi8gICAgY291bnQoKSB7XG4gICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkNPVU5UXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIHJldHVybiBFaSh0aGlzLnN0b3JlLmNvdW50KCkpO1xuICAgIH1cbiAgICBxdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnModCwgZSk7XG4gICAgICAgIC8vIFVzZSBgZ2V0QWxsKClgIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIEluZGV4ZWREQiB2MywgYXMgaXQgaXMgcm91Z2hseVxuICAgICAgICAvLyAyMCUgZmFzdGVyLiBVbmZvcnR1bmF0ZWx5LCBnZXRBbGwoKSBkb2VzIG5vdCBzdXBwb3J0IGN1c3RvbSBpbmRpY2VzLlxuICAgICAgICAgICAgICAgIGlmIChuLmluZGV4IHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdGhpcy5zdG9yZS5nZXRBbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmN1cnNvcihuKSwgZSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuR3QodCwgKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKG4pO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICAgICAgfVxuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5zdG9yZS5nZXRBbGwobi5yYW5nZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHdpKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBlKHQudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb2FkcyB0aGUgZmlyc3QgYGNvdW50YCBlbGVtZW50cyBmcm9tIHRoZSBwcm92aWRlZCBpbmRleCByYW5nZS4gTG9hZHMgYWxsXG4gICAgICogZWxlbWVudHMgaWYgbm8gbGltaXQgaXMgcHJvdmlkZWQuXG4gICAgICovICAgIEt0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuZ2V0QWxsKHQsIG51bGwgPT09IGUgPyB2b2lkIDAgOiBlKTtcbiAgICAgICAgcmV0dXJuIG5ldyB3aSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIG4ub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGUodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgbi5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICB0KGUudGFyZ2V0LnJlc3VsdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFF0KHQsIGUpIHtcbiAgICAgICAgTyhcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICBuLmp0ID0gITE7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmN1cnNvcihuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuR3QocywgKCh0LCBlLCBuKSA9PiBuLmRlbGV0ZSgpKSk7XG4gICAgfVxuICAgIFd0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGUgPyBuID0gdCA6IChuID0ge30sIGUgPSB0KTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5HdChzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHN0b3JlLCBidXQgd2FpdHMgZm9yIHRoZSBnaXZlbiBjYWxsYmFjayB0byBjb21wbGV0ZSBmb3JcbiAgICAgKiBlYWNoIGVudHJ5IGJlZm9yZSBpdGVyYXRpbmcgdGhlIG5leHQgZW50cnkuIFRoaXMgYWxsb3dzIHRoZSBjYWxsYmFjayB0byBkb1xuICAgICAqIGFzeW5jaHJvbm91cyB3b3JrIHRvIGRldGVybWluZSBpZiB0aGlzIGl0ZXJhdGlvbiBzaG91bGQgY29udGludWUuXG4gICAgICpcbiAgICAgKiBUaGUgcHJvdmlkZWQgY2FsbGJhY2sgc2hvdWxkIHJldHVybiBgdHJ1ZWAgdG8gY29udGludWUgaXRlcmF0aW9uLCBhbmRcbiAgICAgKiBgZmFsc2VgIG90aGVyd2lzZS5cbiAgICAgKi8gICAgenQodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jdXJzb3Ioe30pO1xuICAgICAgICByZXR1cm4gbmV3IHdpKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgZS5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFJpKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgICAgICBzKGUpO1xuICAgICAgICAgICAgfSwgZS5vbnN1Y2Nlc3MgPSBlID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHMgPyB0KHMucHJpbWFyeUtleSwgcy52YWx1ZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQgPyBzLmNvbnRpbnVlKCkgOiBuKCk7XG4gICAgICAgICAgICAgICAgfSkpIDogbigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBHdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyB3aSgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgeWkoaSksIG8gPSBlKGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcik7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiB3aSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5jYXRjaCgodCA9PiAoci5kb25lKCksIHdpLnJlamVjdCh0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByLmlzRG9uZSA/IHMoKSA6IG51bGwgPT09IHIuTHQgPyBpLmNvbnRpbnVlKCkgOiBpLmNvbnRpbnVlKHIuTHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHdpLndhaXRGb3IobikpKTtcbiAgICB9XG4gICAgb3B0aW9ucyh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0ICYmIChcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gbiA9IHQgOiBlID0gdCksIHtcbiAgICAgICAgICAgIGluZGV4OiBuLFxuICAgICAgICAgICAgcmFuZ2U6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3Vyc29yKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5leHRcIjtcbiAgICAgICAgaWYgKHQucmV2ZXJzZSAmJiAoZSA9IFwicHJldlwiKSwgdC5pbmRleCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmUuaW5kZXgodC5pbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gdC5qdCA/IG4ub3BlbktleUN1cnNvcih0LnJhbmdlLCBlKSA6IG4ub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIEVpKHQpIHtcbiAgICByZXR1cm4gbmV3IHdpKCgoZSwgbikgPT4ge1xuICAgICAgICB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGUobik7XG4gICAgICAgIH0sIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IFJpKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBBaSA9ICExO1xuXG5mdW5jdGlvbiBSaSh0KSB7XG4gICAgY29uc3QgZSA9IGdpLlZ0KGdldFVBKCkpO1xuICAgIGlmIChlID49IDEyLjIgJiYgZSA8IDEzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBcIkFuIGludGVybmFsIGVycm9yIHdhcyBlbmNvdW50ZXJlZCBpbiB0aGUgSW5kZXhlZCBEYXRhYmFzZSBzZXJ2ZXJcIjtcbiAgICAgICAgaWYgKHQubWVzc2FnZS5pbmRleE9mKGUpID49IDApIHtcbiAgICAgICAgICAgIC8vIFdyYXAgZXJyb3IgaW4gYSBtb3JlIGRlc2NyaXB0aXZlIG9uZS5cbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUShcImludGVybmFsXCIsIGBJT1NfSU5ERVhFRERCX0JVRzE6IEluZGV4ZWREYiBoYXMgdGhyb3duICcke2V9Jy4gVGhpcyBpcyBsaWtlbHkgZHVlIHRvIGFuIHVuYXZvaWRhYmxlIGJ1ZyBpbiBpT1MuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLmApO1xuICAgICAgICAgICAgcmV0dXJuIEFpIHx8IChBaSA9ICEwLCBcbiAgICAgICAgICAgIC8vIFRocm93IGEgZ2xvYmFsIGV4Y2VwdGlvbiBvdXRzaWRlIG9mIHRoaXMgcHJvbWlzZSBjaGFpbiwgZm9yIHRoZSB1c2VyIHRvXG4gICAgICAgICAgICAvLyBwb3RlbnRpYWxseSBjYXRjaC5cbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICAgICAgfSksIDApKSwgdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgYmkgZXh0ZW5kcyBfaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLkh0ID0gdCwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUGkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIHJldHVybiBnaS54dChuLkh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBiYXRjaCBvZiBtdXRhdGlvbnMgdGhhdCB3aWxsIGJlIHNlbnQgYXMgb25lIHVuaXQgdG8gdGhlIGJhY2tlbmQuXG4gKi8gY2xhc3MgVmkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIHVuaXF1ZSBJRCBvZiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBvcmlnaW5hbCB3cml0ZSB0aW1lIG9mIHRoaXMgbXV0YXRpb24uXG4gICAgICogQHBhcmFtIGJhc2VNdXRhdGlvbnMgLSBNdXRhdGlvbnMgdGhhdCBhcmUgdXNlZCB0byBwb3B1bGF0ZSB0aGUgYmFzZVxuICAgICAqIHZhbHVlcyB3aGVuIHRoaXMgbXV0YXRpb24gaXMgYXBwbGllZCBsb2NhbGx5LiBUaGlzIGNhbiBiZSB1c2VkIHRvIGxvY2FsbHlcbiAgICAgKiBvdmVyd3JpdGUgdmFsdWVzIHRoYXQgYXJlIHBlcnNpc3RlZCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlLiBCYXNlXG4gICAgICogbXV0YXRpb25zIGFyZSBuZXZlciBzZW50IHRvIHRoZSBiYWNrZW5kLlxuICAgICAqIEBwYXJhbSBtdXRhdGlvbnMgLSBUaGUgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMgaW4gdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBVc2VyLXByb3ZpZGVkIG11dGF0aW9ucyBhcmUgYXBwbGllZCBib3RoIGxvY2FsbHkgYW5kIHJlbW90ZWx5IG9uIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmJhdGNoSWQgPSB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lID0gZSwgdGhpcy5iYXNlTXV0YXRpb25zID0gbiwgdGhpcy5tdXRhdGlvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXMgTXV0YXRpb25CYXRjaCB0byB0aGUgc3BlY2lmaWVkIGRvY3VtZW50XG4gICAgICogdG8gY29tcHV0ZSB0aGUgc3RhdGUgb2YgdGhlIHJlbW90ZSBkb2N1bWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IG11dGF0aW9ucyB0by5cbiAgICAgKiBAcGFyYW0gYmF0Y2hSZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBNdXRhdGlvbkJhdGNoIHRvIHRoZVxuICAgICAqIGJhY2tlbmQuXG4gICAgICovICAgIGFwcGx5VG9SZW1vdGVEb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uUmVzdWx0cztcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0aGlzLm11dGF0aW9ucy5sZW5ndGg7IGUrKykge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMubXV0YXRpb25zW2VdO1xuICAgICAgICAgICAgaWYgKHMua2V5LmlzRXF1YWwodC5rZXkpKSB7XG4gICAgICAgICAgICAgICAgZ24ocywgdCwgbltlXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgb2YgYSBkb2N1bWVudCBnaXZlbiBhbGwgdGhlIG11dGF0aW9ucyBpbiB0aGlzXG4gICAgICogYmF0Y2guXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KHQpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgeW4oZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLm11dGF0aW9ucykgZS5rZXkuaXNFcXVhbCh0LmtleSkgJiYgeW4oZSwgdCwgdGhpcy5sb2NhbFdyaXRlVGltZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciBhbGwgcHJvdmlkZWQgZG9jdW1lbnRzIGdpdmVuIHRoZSBtdXRhdGlvbnMgaW5cbiAgICAgKiB0aGlzIGJhdGNoLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2V0KGUua2V5KSwgcyA9IG47XG4gICAgICAgICAgICAvLyBUT0RPKG11dGFibGVkb2N1bWVudHMpOiBUaGlzIG1ldGhvZCBzaG91bGQgdGFrZSBhIE11dGFibGVEb2N1bWVudE1hcFxuICAgICAgICAgICAgLy8gYW5kIHdlIHNob3VsZCByZW1vdmUgdGhpcyBjYXN0LlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseVRvTG9jYWxWaWV3KHMpLCBuLmlzVmFsaWREb2N1bWVudCgpIHx8IHMuY29udmVydFRvTm9Eb2N1bWVudChjdC5taW4oKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIHpuKCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gdC5iYXRjaElkICYmIG90KHRoaXMubXV0YXRpb25zLCB0Lm11dGF0aW9ucywgKCh0LCBlKSA9PiBJbih0LCBlKSkpICYmIG90KHRoaXMuYmFzZU11dGF0aW9ucywgdC5iYXNlTXV0YXRpb25zLCAoKHQsIGUpID0+IEluKHQsIGUpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyB2aSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSB0LCB0aGlzLmNvbW1pdFZlcnNpb24gPSBlLCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbSh0LCBlLCBuKSB7XG4gICAgICAgIFUodC5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCBzID0gam47XG4gICAgICAgIGNvbnN0IGkgPSB0Lm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpLmxlbmd0aDsgdCsrKSBzID0gcy5pbnNlcnQoaVt0XS5rZXksIG5bdF0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgdmkodCwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhbiBvdmVybGF5IGNvbXB1dGVkIGJ5IEZpcmVzdG9yZS5cbiAqXG4gKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBhIG11dGF0aW9uIGFuZCB0aGUgbGFyZ2VzdCBiYXRjaCBpZCBpbiBGaXJlc3RvcmUgd2hlblxuICogdGhlIG11dGF0aW9uIHdhcyBjcmVhdGVkLlxuICovIGNsYXNzIFNpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSB0LCB0aGlzLm11dGF0aW9uID0gZTtcbiAgICB9XG4gICAgZ2V0S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbi5rZXk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiB0aGlzLm11dGF0aW9uID09PSB0Lm11dGF0aW9uO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBPdmVybGF5e1xcbiAgICAgIGxhcmdlc3RCYXRjaElkOiAke3RoaXMubGFyZ2VzdEJhdGNoSWR9LFxcbiAgICAgIG11dGF0aW9uOiAke3RoaXMubXV0YXRpb24udG9TdHJpbmcoKX1cXG4gICAgfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgRGkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IGN0Lm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCByID0gY3QubWluKClcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqLyAsIG8gPSBwdC5FTVBUWV9CWVRFX1NUUklORykge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gcywgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gciwgdGhpcy5yZXN1bWVUb2tlbiA9IG87XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRGkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdCwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHJlc3VtZSB0b2tlbiBhbmRcbiAgICAgKiBzbmFwc2hvdCB2ZXJzaW9uLlxuICAgICAqLyAgICB3aXRoUmVzdW1lVG9rZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IERpKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldElkLCB0aGlzLnB1cnBvc2UsIHRoaXMuc2VxdWVuY2VOdW1iZXIsIGUsIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRGkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHQsIHRoaXMucmVzdW1lVG9rZW4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBTZXJpYWxpemVyIGZvciB2YWx1ZXMgc3RvcmVkIGluIHRoZSBMb2NhbFN0b3JlLiAqLyBjbGFzcyBDaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkp0ID0gdDtcbiAgICB9XG59XG5cbi8qKiBEZWNvZGVzIGEgcmVtb3RlIGRvY3VtZW50IGZyb20gc3RvcmFnZSBsb2NhbGx5IHRvIGEgRG9jdW1lbnQuICovIGZ1bmN0aW9uIHhpKHQsIGUpIHtcbiAgICBsZXQgbjtcbiAgICBpZiAoZS5kb2N1bWVudCkgbiA9IEVzKHQuSnQsIGUuZG9jdW1lbnQsICEhZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMpOyBlbHNlIGlmIChlLm5vRG9jdW1lbnQpIHtcbiAgICAgICAgY29uc3QgdCA9IHh0LmZyb21TZWdtZW50cyhlLm5vRG9jdW1lbnQucGF0aCksIHMgPSBPaShlLm5vRG9jdW1lbnQucmVhZFRpbWUpO1xuICAgICAgICBuID0gdGUubmV3Tm9Eb2N1bWVudCh0LCBzKSwgZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgbi5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIWUudW5rbm93bkRvY3VtZW50KSByZXR1cm4gTCgpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCB0ID0geHQuZnJvbVNlZ21lbnRzKGUudW5rbm93bkRvY3VtZW50LnBhdGgpLCBzID0gT2koZS51bmtub3duRG9jdW1lbnQudmVyc2lvbik7XG4gICAgICAgICAgICBuID0gdGUubmV3VW5rbm93bkRvY3VtZW50KHQsIHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlLnJlYWRUaW1lICYmIG4uc2V0UmVhZFRpbWUoZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGF0KHRbMF0sIHRbMV0pO1xuICAgICAgICByZXR1cm4gY3QuZnJvbVRpbWVzdGFtcChlKTtcbiAgICB9KGUucmVhZFRpbWUpKSwgbjtcbn1cblxuLyoqIEVuY29kZXMgYSBkb2N1bWVudCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBOaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUua2V5LCBzID0ge1xuICAgICAgICBwcmVmaXhQYXRoOiBuLmdldENvbGxlY3Rpb25QYXRoKCkucG9wTGFzdCgpLnRvQXJyYXkoKSxcbiAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLmNvbGxlY3Rpb25Hcm91cCxcbiAgICAgICAgZG9jdW1lbnRJZDogbi5wYXRoLmxhc3RTZWdtZW50KCksXG4gICAgICAgIHJlYWRUaW1lOiBraShlLnJlYWRUaW1lKSxcbiAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiBlLmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgIH07XG4gICAgaWYgKGUuaXNGb3VuZERvY3VtZW50KCkpIHMuZG9jdW1lbnQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB3cyh0LCBlLmtleSksXG4gICAgICAgICAgICBmaWVsZHM6IGUuZGF0YS52YWx1ZS5tYXBWYWx1ZS5maWVsZHMsXG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBjcyh0LCBlLnZlcnNpb24udG9UaW1lc3RhbXAoKSlcbiAgICAgICAgfTtcbiAgICB9KHQuSnQsIGUpOyBlbHNlIGlmIChlLmlzTm9Eb2N1bWVudCgpKSBzLm5vRG9jdW1lbnQgPSB7XG4gICAgICAgIHBhdGg6IG4ucGF0aC50b0FycmF5KCksXG4gICAgICAgIHJlYWRUaW1lOiBNaShlLnZlcnNpb24pXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGlmICghZS5pc1Vua25vd25Eb2N1bWVudCgpKSByZXR1cm4gTCgpO1xuICAgICAgICBzLnVua25vd25Eb2N1bWVudCA9IHtcbiAgICAgICAgICAgIHBhdGg6IG4ucGF0aC50b0FycmF5KCksXG4gICAgICAgICAgICB2ZXJzaW9uOiBNaShlLnZlcnNpb24pXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiBraSh0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4gWyBlLnNlY29uZHMsIGUubmFub3NlY29uZHMgXTtcbn1cblxuZnVuY3Rpb24gTWkodCkge1xuICAgIGNvbnN0IGUgPSB0LnRvVGltZXN0YW1wKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogZS5zZWNvbmRzLFxuICAgICAgICBuYW5vc2Vjb25kczogZS5uYW5vc2Vjb25kc1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIE9pKHQpIHtcbiAgICBjb25zdCBlID0gbmV3IGF0KHQuc2Vjb25kcywgdC5uYW5vc2Vjb25kcyk7XG4gICAgcmV0dXJuIGN0LmZyb21UaW1lc3RhbXAoZSk7XG59XG5cbi8qKiBFbmNvZGVzIGEgYmF0Y2ggb2YgbXV0YXRpb25zIGludG8gYSBEYk11dGF0aW9uQmF0Y2ggZm9yIGxvY2FsIHN0b3JhZ2UuICovXG4vKiogRGVjb2RlcyBhIERiTXV0YXRpb25CYXRjaCBpbnRvIGEgTXV0YXRpb25CYXRjaCAqL1xuZnVuY3Rpb24gRmkodCwgZSkge1xuICAgIGNvbnN0IG4gPSAoZS5iYXNlTXV0YXRpb25zIHx8IFtdKS5tYXAoKGUgPT4gUHModC5KdCwgZSkpKTtcbiAgICAvLyBTcXVhc2ggb2xkIHRyYW5zZm9ybSBtdXRhdGlvbnMgaW50byBleGlzdGluZyBwYXRjaCBvciBzZXQgbXV0YXRpb25zLlxuICAgIC8vIFRoZSByZXBsYWNlbWVudCBvZiByZXByZXNlbnRpbmcgYHRyYW5zZm9ybXNgIHdpdGggYHVwZGF0ZV90cmFuc2Zvcm1zYFxuICAgIC8vIG9uIHRoZSBTREsgbWVhbnMgdGhhdCBvbGQgYHRyYW5zZm9ybWAgbXV0YXRpb25zIHN0b3JlZCBpbiBJbmRleGVkREIgbmVlZFxuICAgIC8vIHRvIGJlIHVwZGF0ZWQgdG8gYHVwZGF0ZV90cmFuc2Zvcm1zYC5cbiAgICAvLyBUT0RPKGIvMTc0NjA4Mzc0KTogUmVtb3ZlIHRoaXMgY29kZSBvbmNlIHdlIHBlcmZvcm0gYSBzY2hlbWEgbWlncmF0aW9uLlxuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubXV0YXRpb25zLmxlbmd0aCAtIDE7ICsrdCkge1xuICAgICAgICBjb25zdCBuID0gZS5tdXRhdGlvbnNbdF07XG4gICAgICAgIGlmICh0ICsgMSA8IGUubXV0YXRpb25zLmxlbmd0aCAmJiB2b2lkIDAgIT09IGUubXV0YXRpb25zW3QgKyAxXS50cmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLm11dGF0aW9uc1t0ICsgMV07XG4gICAgICAgICAgICBuLnVwZGF0ZVRyYW5zZm9ybXMgPSBzLnRyYW5zZm9ybS5maWVsZFRyYW5zZm9ybXMsIGUubXV0YXRpb25zLnNwbGljZSh0ICsgMSwgMSksIFxuICAgICAgICAgICAgKyt0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHMgPSBlLm11dGF0aW9ucy5tYXAoKGUgPT4gUHModC5KdCwgZSkpKSwgaSA9IGF0LmZyb21NaWxsaXMoZS5sb2NhbFdyaXRlVGltZU1zKTtcbiAgICByZXR1cm4gbmV3IFZpKGUuYmF0Y2hJZCwgaSwgbiwgcyk7XG59XG5cbi8qKiBEZWNvZGVzIGEgRGJUYXJnZXQgaW50byBUYXJnZXREYXRhICovIGZ1bmN0aW9uICRpKHQpIHtcbiAgICBjb25zdCBlID0gT2kodC5yZWFkVGltZSksIG4gPSB2b2lkIDAgIT09IHQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiA/IE9pKHQubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbikgOiBjdC5taW4oKTtcbiAgICBsZXQgcztcbiAgICB2YXIgaTtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnF1ZXJ5LmRvY3VtZW50cyA/IChVKDEgPT09IChpID0gdC5xdWVyeSkuZG9jdW1lbnRzLmxlbmd0aCksIFxuICAgIHMgPSBMZShOZSh5cyhpLmRvY3VtZW50c1swXSkpKSkgOiBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gTGUoRHModCkpO1xuICAgIH0odC5xdWVyeSksIG5ldyBEaShzLCB0LnRhcmdldElkLCAwIC8qIExpc3RlbiAqLyAsIHQubGFzdExpc3RlblNlcXVlbmNlTnVtYmVyLCBlLCBuLCBwdC5mcm9tQmFzZTY0U3RyaW5nKHQucmVzdW1lVG9rZW4pKTtcbn1cblxuLyoqIEVuY29kZXMgVGFyZ2V0RGF0YSBpbnRvIGEgRGJUYXJnZXQgZm9yIHN0b3JhZ2UgbG9jYWxseS4gKi8gZnVuY3Rpb24gQmkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBNaShlLnNuYXBzaG90VmVyc2lvbiksIHMgPSBNaShlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24pO1xuICAgIGxldCBpO1xuICAgIGkgPSB3ZShlLnRhcmdldCkgPyB2cyh0Lkp0LCBlLnRhcmdldCkgOiBTcyh0Lkp0LCBlLnRhcmdldCk7XG4gICAgLy8gV2UgY2FuJ3Qgc3RvcmUgdGhlIHJlc3VtZVRva2VuIGFzIGEgQnl0ZVN0cmluZyBpbiBJbmRleGVkRGIsIHNvIHdlXG4gICAgLy8gY29udmVydCBpdCB0byBhIGJhc2U2NCBzdHJpbmcgZm9yIHN0b3JhZ2UuXG4gICAgICAgIGNvbnN0IHIgPSBlLnJlc3VtZVRva2VuLnRvQmFzZTY0KCk7XG4gICAgLy8gbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIGlzIGFsd2F5cyAwIHVudGlsIHdlIGRvIHJlYWwgR0MuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgIHRhcmdldElkOiBlLnRhcmdldElkLFxuICAgICAgICBjYW5vbmljYWxJZDogZmUoZS50YXJnZXQpLFxuICAgICAgICByZWFkVGltZTogbixcbiAgICAgICAgcmVzdW1lVG9rZW46IHIsXG4gICAgICAgIGxhc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogZS5zZXF1ZW5jZU51bWJlcixcbiAgICAgICAgbGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbjogcyxcbiAgICAgICAgcXVlcnk6IGlcbiAgICB9O1xufVxuXG4vKipcbiAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBmaWd1cmluZyBvdXQgd2hhdCBraW5kIG9mIHF1ZXJ5IGhhcyBiZWVuIHN0b3JlZC5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgYEJ1bmRsZWRRdWVyeWAgZnJvbSBidW5kbGUgcHJvdG8gdG8gYSBRdWVyeSBvYmplY3QuXG4gKlxuICogVGhpcyByZWNvbnN0cnVjdHMgdGhlIG9yaWdpbmFsIHF1ZXJ5IHVzZWQgdG8gYnVpbGQgdGhlIGJ1bmRsZSBiZWluZyBsb2FkZWQsXG4gKiBpbmNsdWRpbmcgZmVhdHVyZXMgZXhpc3RzIG9ubHkgaW4gU0RLcyAoZm9yIGV4YW1wbGU6IGxpbWl0LXRvLWxhc3QpLlxuICovXG5mdW5jdGlvbiBMaSh0KSB7XG4gICAgY29uc3QgZSA9IERzKHtcbiAgICAgICAgcGFyZW50OiB0LnBhcmVudCxcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB0LnN0cnVjdHVyZWRRdWVyeVxuICAgIH0pO1xuICAgIHJldHVybiBcIkxBU1RcIiA9PT0gdC5saW1pdFR5cGUgPyBVZShlLCBlLmxpbWl0LCBcIkxcIiAvKiBMYXN0ICovKSA6IGU7XG59XG5cbi8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBwcm90byBvYmplY3QgdG8gYSBOYW1lZFF1ZXJ5IG1vZGVsIG9iamVjdC4gKi9cbi8qKiBFbmNvZGVzIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0IHRvIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0LiAqL1xuZnVuY3Rpb24gVWkodCwgZSkge1xuICAgIHJldHVybiBuZXcgU2koZS5sYXJnZXN0QmF0Y2hJZCwgUHModC5KdCwgZS5vdmVybGF5TXV0YXRpb24pKTtcbn1cblxuLyoqIERlY29kZXMgYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QgaW50byBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdC4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgRGJEb2N1bWVudE92ZXJsYXlLZXkgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gdXNlciBhbmRcbiAqIGRvY3VtZW50IGtleS5cbiAqL1xuZnVuY3Rpb24gcWkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICByZXR1cm4gWyB0LCBVcyhlLnBhdGgucG9wTGFzdCgpKSwgbiBdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY2xhc3MgR2kge1xuICAgIGdldEJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEtpKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlkOiAoZSA9IHQpLmJ1bmRsZUlkLFxuICAgICAgICAgICAgICAgIGNyZWF0ZVRpbWU6IE9pKGUuY3JlYXRlVGltZSksXG4gICAgICAgICAgICAgICAgdmVyc2lvbjogZS52ZXJzaW9uXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBEYkJ1bmRsZSB0byBhIEJ1bmRsZU1ldGFkYXRhIG9iamVjdC4gKi9cbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBCdW5kbGVNZXRhZGF0YSB0byBhIERiQnVuZGxlLiAqLyAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gS2kodCkucHV0KHtcbiAgICAgICAgICAgIGJ1bmRsZUlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogTWkoZnMobi5jcmVhdGVUaW1lKSksXG4gICAgICAgICAgICB2ZXJzaW9uOiBuLnZlcnNpb25cbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBuO1xuICAgICAgICAvKiogRW5jb2RlcyBhIERiTmFtZWRRdWVyeSB0byBhIE5hbWVkUXVlcnkuICovICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFFpKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IChlID0gdCkubmFtZSxcbiAgICAgICAgICAgICAgICBxdWVyeTogTGkoZS5idW5kbGVkUXVlcnkpLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBPaShlLnJlYWRUaW1lKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IGZyb20gYSBidW5kbGUgcHJvdG8gdG8gYSBEYk5hbWVkUXVlcnkuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFFpKHQpLnB1dChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHQubmFtZSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogTWkoZnModC5yZWFkVGltZSkpLFxuICAgICAgICAgICAgICAgIGJ1bmRsZWRRdWVyeTogdC5idW5kbGVkUXVlcnlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGJ1bmRsZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIEtpKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJidW5kbGVzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbmFtZWRRdWVyaWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBRaSh0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwibmFtZWRRdWVyaWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRhdGlvbiBvZiBEb2N1bWVudE92ZXJsYXlDYWNoZSB1c2luZyBJbmRleGVkRGIuXG4gKi8gY2xhc3Mgamkge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIGRvY3VtZW50IHNlcmlhbGl6ZXIuXG4gICAgICogQHBhcmFtIHVzZXJJZCAtIFRoZSB1c2VySWQgZm9yIHdoaWNoIHdlIGFyZSBhY2Nlc3Npbmcgb3ZlcmxheXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLk0gPSB0LCB0aGlzLnVzZXJJZCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBZdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnVpZCB8fCBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IGppKHQsIG4pO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFdpKHQpLmdldChxaSh0aGlzLnVzZXJJZCwgZSkpLm5leHQoKHQgPT4gdCA/IFVpKHRoaXMuTSwgdCkgOiBudWxsKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgU2koZSwgaSk7XG4gICAgICAgICAgICBzLnB1c2godGhpcy5YdCh0LCByKSk7XG4gICAgICAgIH0pKSwgd2kud2FpdEZvcihzKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTZXQ7XG4gICAgICAgIC8vIEdldCB0aGUgc2V0IG9mIHVuaXF1ZSBjb2xsZWN0aW9uIHBhdGhzLlxuICAgICAgICAgICAgICAgIGUuZm9yRWFjaCgodCA9PiBzLmFkZChVcyh0LmdldENvbGxlY3Rpb25QYXRoKCkpKSkpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGUsIG4gXSwgWyB0aGlzLnVzZXJJZCwgZSwgbiArIDEgXSwgXG4gICAgICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgICAgICBpLnB1c2goV2kodCkuUXQoXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCBzKSk7XG4gICAgICAgIH0pKSwgd2kud2FpdEZvcihpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFFuKCksIGkgPSBVcyhlKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGksIG4gXSwgWyB0aGlzLnVzZXJJZCwgaSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBXaSh0KS5xdChcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHIpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gVWkodGhpcy5NLCBlKTtcbiAgICAgICAgICAgICAgICBzLnNldCh0LmdldEtleSgpLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFFuKCk7XG4gICAgICAgIGxldCByO1xuICAgICAgICAvLyBXZSB3YW50IGJhdGNoIElEcyBsYXJnZXIgdGhhbiBgc2luY2VCYXRjaElkYCwgYW5kIHNvIHRoZSBsb3dlciBib3VuZFxuICAgICAgICAvLyBpcyBub3QgaW5jbHVzaXZlLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBlLCBuIF0sIFsgdGhpcy51c2VySWQsIGUsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gV2kodCkuV3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogb1xuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFdlIGRvIG5vdCB3YW50IHRvIHJldHVybiBwYXJ0aWFsIGJhdGNoIG92ZXJsYXlzLCBldmVuIGlmIHRoZSBzaXplXG4gICAgICAgICAgICAvLyBvZiB0aGUgcmVzdWx0IHNldCBleGNlZWRzIHRoZSBnaXZlbiBgY291bnRgIGFyZ3VtZW50LiBUaGVyZWZvcmUsIHdlXG4gICAgICAgICAgICAvLyBjb250aW51ZSB0byBhZ2dyZWdhdGUgcmVzdWx0cyBldmVuIGFmdGVyIHRoZSByZXN1bHQgc2l6ZSBleGNlZWRzXG4gICAgICAgICAgICAvLyBgY291bnRgIGlmIHRoZXJlIGFyZSBtb3JlIG92ZXJsYXlzIGZyb20gdGhlIGBjdXJyZW50QmF0Y2hJZGAuXG4gICAgICAgICAgICBjb25zdCBvID0gVWkodGhpcy5NLCBlKTtcbiAgICAgICAgICAgIGkuc2l6ZSgpIDwgcyB8fCBvLmxhcmdlc3RCYXRjaElkID09PSByID8gKGkuc2V0KG8uZ2V0S2V5KCksIG8pLCByID0gby5sYXJnZXN0QmF0Y2hJZCkgOiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgWHQodCwgZSkge1xuICAgICAgICByZXR1cm4gV2kodCkucHV0KGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IFtzLCBpLCByXSA9IHFpKGUsIG4ubXV0YXRpb24ua2V5KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdXNlcklkOiBlLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25QYXRoOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHIsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiBuLm11dGF0aW9uLmtleS5nZXRDb2xsZWN0aW9uR3JvdXAoKSxcbiAgICAgICAgICAgICAgICBsYXJnZXN0QmF0Y2hJZDogbi5sYXJnZXN0QmF0Y2hJZCxcbiAgICAgICAgICAgICAgICBvdmVybGF5TXV0YXRpb246IGJzKHQuSnQsIG4ubXV0YXRpb24pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KHRoaXMuTSwgdGhpcy51c2VySWQsIGUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCBvdmVybGF5IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBXaSh0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwiZG9jdW1lbnRPdmVybGF5c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIE5vdGU6IFRoaXMgY29kZSBpcyBjb3BpZWQgZnJvbSB0aGUgYmFja2VuZC4gQ29kZSB0aGF0IGlzIG5vdCB1c2VkIGJ5XG4vLyBGaXJlc3RvcmUgd2FzIHJlbW92ZWQuXG4vKiogRmlyZXN0b3JlIGluZGV4IHZhbHVlIHdyaXRlci4gICovXG5jbGFzcyB6aSB7XG4gICAgY29uc3RydWN0b3IoKSB7fVxuICAgIC8vIFRoZSB3cml0ZSBtZXRob2RzIGJlbG93IHNob3J0LWNpcmN1aXQgd3JpdGluZyB0ZXJtaW5hdG9ycyBmb3IgdmFsdWVzXG4gICAgLy8gY29udGFpbmluZyBhICh0ZXJtaW5hdGluZykgdHJ1bmNhdGVkIHZhbHVlLlxuICAgIC8vIEFzIGFuIGV4YW1wbGUsIGNvbnNpZGVyIHRoZSByZXN1bHRpbmcgZW5jb2RpbmcgZm9yOlxuICAgIC8vIFtcImJhclwiLCBbMiwgXCJmb29cIl1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVEVSTSwgVEVSTSwgVEVSTSlcbiAgICAvLyBbXCJiYXJcIiwgWzIsIHRydW5jYXRlZChcImZvb1wiKV1dIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLCBOVU1CRVIsIDIsIFNUUklORywgXCJmb29cIiwgVFJVTkMpXG4gICAgLy8gW1wiYmFyXCIsIHRydW5jYXRlZChbXCJmb29cIl0pXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWS4gU1RSSU5HLCBcImZvb1wiLCBURVJNLCBUUlVOQylcbiAgICAvKiogV3JpdGVzIGFuIGluZGV4IHZhbHVlLiAgKi9cbiAgICBadCh0LCBlKSB7XG4gICAgICAgIHRoaXMudGUodCwgZSksIFxuICAgICAgICAvLyBXcml0ZSBzZXBhcmF0b3IgdG8gc3BsaXQgaW5kZXggdmFsdWVzXG4gICAgICAgIC8vIChzZWUgZ28vZmlyZXN0b3JlLXN0b3JhZ2UtZm9ybWF0I2VuY29kaW5ncykuXG4gICAgICAgIGUuZWUoKTtcbiAgICB9XG4gICAgdGUodCwgZSkge1xuICAgICAgICBpZiAoXCJudWxsVmFsdWVcIiBpbiB0KSB0aGlzLm5lKGUsIDUpOyBlbHNlIGlmIChcImJvb2xlYW5WYWx1ZVwiIGluIHQpIHRoaXMubmUoZSwgMTApLCBcbiAgICAgICAgZS5zZSh0LmJvb2xlYW5WYWx1ZSA/IDEgOiAwKTsgZWxzZSBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0KSB0aGlzLm5lKGUsIDE1KSwgZS5zZShFdCh0LmludGVnZXJWYWx1ZSkpOyBlbHNlIGlmIChcImRvdWJsZVZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEV0KHQuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgaXNOYU4obikgPyB0aGlzLm5lKGUsIDEzKSA6ICh0aGlzLm5lKGUsIDE1KSwgRHQobikgPyBcbiAgICAgICAgICAgIC8vIC0wLjAsIDAgYW5kIDAuMCBhcmUgYWxsIGNvbnNpZGVyZWQgdGhlIHNhbWVcbiAgICAgICAgICAgIGUuc2UoMCkgOiBlLnNlKG4pKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICB0aGlzLm5lKGUsIDIwKSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgbiA/IGUuaWUobikgOiAoZS5pZShgJHtuLnNlY29uZHMgfHwgXCJcIn1gKSwgZS5zZShuLm5hbm9zIHx8IDApKTtcbiAgICAgICAgfSBlbHNlIGlmIChcInN0cmluZ1ZhbHVlXCIgaW4gdCkgdGhpcy5yZSh0LnN0cmluZ1ZhbHVlLCBlKSwgdGhpcy5vZShlKTsgZWxzZSBpZiAoXCJieXRlc1ZhbHVlXCIgaW4gdCkgdGhpcy5uZShlLCAzMCksIFxuICAgICAgICBlLnVlKEF0KHQuYnl0ZXNWYWx1ZSkpLCB0aGlzLm9lKGUpOyBlbHNlIGlmIChcInJlZmVyZW5jZVZhbHVlXCIgaW4gdCkgdGhpcy5hZSh0LnJlZmVyZW5jZVZhbHVlLCBlKTsgZWxzZSBpZiAoXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZ2VvUG9pbnRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMubmUoZSwgNDUpLCBlLnNlKG4ubGF0aXR1ZGUgfHwgMCksIGUuc2Uobi5sb25naXR1ZGUgfHwgMCk7XG4gICAgICAgIH0gZWxzZSBcIm1hcFZhbHVlXCIgaW4gdCA/IEh0KHQpID8gdGhpcy5uZShlLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikgOiAodGhpcy5jZSh0Lm1hcFZhbHVlLCBlKSwgXG4gICAgICAgIHRoaXMub2UoZSkpIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/ICh0aGlzLmhlKHQuYXJyYXlWYWx1ZSwgZSksIHRoaXMub2UoZSkpIDogTCgpO1xuICAgIH1cbiAgICByZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubmUoZSwgMjUpLCB0aGlzLmxlKHQsIGUpO1xuICAgIH1cbiAgICBsZSh0LCBlKSB7XG4gICAgICAgIGUuaWUodCk7XG4gICAgfVxuICAgIGNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuZmllbGRzIHx8IHt9O1xuICAgICAgICB0aGlzLm5lKGUsIDU1KTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIE9iamVjdC5rZXlzKG4pKSB0aGlzLnJlKHQsIGUpLCB0aGlzLnRlKG5bdF0sIGUpO1xuICAgIH1cbiAgICBoZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgdGhpcy5uZShlLCA1MCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB0aGlzLnRlKHQsIGUpO1xuICAgIH1cbiAgICBhZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubmUoZSwgMzcpO1xuICAgICAgICB4dC5mcm9tTmFtZSh0KS5wYXRoLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5uZShlLCA2MCksIHRoaXMubGUodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbmUodCwgZSkge1xuICAgICAgICB0LnNlKGUpO1xuICAgIH1cbiAgICBvZSh0KSB7XG4gICAgICAgIC8vIFdoaWxlIHRoZSBTREsgZG9lcyBub3QgaW1wbGVtZW50IHRydW5jYXRpb24sIHRoZSB0cnVuY2F0aW9uIG1hcmtlciBpc1xuICAgICAgICAvLyB1c2VkIHRvIHRlcm1pbmF0ZSBhbGwgdmFyaWFibGUgbGVuZ3RoIHZhbHVlcyAod2hpY2ggYXJlIHN0cmluZ3MsIGJ5dGVzLFxuICAgICAgICAvLyByZWZlcmVuY2VzLCBhcnJheXMgYW5kIG1hcHMpLlxuICAgICAgICB0LnNlKDIpO1xuICAgIH1cbn1cblxuemkuZmUgPSBuZXcgemk7XG5cbi8qKlxuICogQ291bnRzIHRoZSBudW1iZXIgb2YgemVyb3MgaW4gYSBieXRlLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIEhpKHQpIHtcbiAgICBpZiAoMCA9PT0gdCkgcmV0dXJuIDg7XG4gICAgbGV0IGUgPSAwO1xuICAgIHJldHVybiB0ID4+IDQgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgZm91ciBiaXRzIGFyZSB6ZXJvLlxuICAgIGUgKz0gNCwgdCA8PD0gNCksIHQgPj4gNiA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSBmaXJzdCB0d28gKG9yIG5leHQgdHdvKSBiaXRzIGFyZSB6ZXJvLlxuICAgIGUgKz0gMiwgdCA8PD0gMiksIHQgPj4gNyA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSByZW1haW5pbmcgYml0IGlzIHplcm8uXG4gICAgZSArPSAxKSwgZTtcbn1cblxuLyoqIENvdW50cyB0aGUgbnVtYmVyIG9mIGxlYWRpbmcgemVyb3MgaW4gdGhlIGdpdmVuIGJ5dGUgYXJyYXkuICovXG4vKipcbiAqIFJldHVybnMgdGhlIG51bWJlciBvZiBieXRlcyByZXF1aXJlZCB0byBzdG9yZSBcInZhbHVlXCIuIExlYWRpbmcgemVybyBieXRlc1xuICogYXJlIHNraXBwZWQuXG4gKi9cbmZ1bmN0aW9uIEppKHQpIHtcbiAgICAvLyBUaGlzIGlzIGp1c3QgdGhlIG51bWJlciBvZiBieXRlcyBmb3IgdGhlIHVuc2lnbmVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBudW1iZXIuXG4gICAgY29uc3QgZSA9IDY0IC0gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgODsgKytuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gSGkoMjU1ICYgdFtuXSk7XG4gICAgICAgICAgICBpZiAoZSArPSBzLCA4ICE9PSBzKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9KHQpO1xuICAgIHJldHVybiBNYXRoLmNlaWwoZSAvIDgpO1xufVxuXG4vKipcbiAqIE9yZGVyZWRDb2RlV3JpdGVyIGlzIGEgbWluaW1hbC1hbGxvY2F0aW9uIGltcGxlbWVudGF0aW9uIG9mIHRoZSB3cml0aW5nXG4gKiBiZWhhdmlvciBkZWZpbmVkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSBjb2RlIGlzIHBvcnRlZCBmcm9tIGl0cyBKYXZhIGNvdW50ZXJwYXJ0LlxuICovIGNsYXNzIFlpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSgxMDI0KSwgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgfVxuICAgIGRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IGUubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuX2Uobi52YWx1ZSksIG4gPSBlLm5leHQoKTtcbiAgICAgICAgdGhpcy53ZSgpO1xuICAgIH1cbiAgICBtZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0W1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICAgICAgbGV0IG4gPSBlLm5leHQoKTtcbiAgICAgICAgZm9yICg7IW4uZG9uZTsgKSB0aGlzLmdlKG4udmFsdWUpLCBuID0gZS5uZXh0KCk7XG4gICAgICAgIHRoaXMueWUoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBhc2NlbmRpbmcuICovICAgIHBlKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAodCA8IDEyOCkgdGhpcy5fZSh0KTsgZWxzZSBpZiAodCA8IDIwNDgpIHRoaXMuX2UoOTYwIHwgdCA+Pj4gNiksIHRoaXMuX2UoMTI4IHwgNjMgJiB0KTsgZWxzZSBpZiAoZSA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgZSkgdGhpcy5fZSg0ODAgfCB0ID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5fZSgxMjggfCA2MyAmIHQgPj4+IDYpLCB0aGlzLl9lKDEyOCB8IDYzICYgdCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuX2UoMjQwIHwgdCA+Pj4gMTgpLCB0aGlzLl9lKDEyOCB8IDYzICYgdCA+Pj4gMTIpLCB0aGlzLl9lKDEyOCB8IDYzICYgdCA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuX2UoMTI4IHwgNjMgJiB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLndlKCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgdXRmOCBieXRlcyBpbnRvIHRoaXMgYnl0ZSBzZXF1ZW5jZSwgZGVzY2VuZGluZyAqLyAgICBJZSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgaWYgKHQgPCAxMjgpIHRoaXMuZ2UodCk7IGVsc2UgaWYgKHQgPCAyMDQ4KSB0aGlzLmdlKDk2MCB8IHQgPj4+IDYpLCB0aGlzLmdlKDEyOCB8IDYzICYgdCk7IGVsc2UgaWYgKGUgPCBcIlxcdWQ4MDBcIiB8fCBcIlxcdWRiZmZcIiA8IGUpIHRoaXMuZ2UoNDgwIHwgdCA+Pj4gMTIpLCBcbiAgICAgICAgICAgIHRoaXMuZ2UoMTI4IHwgNjMgJiB0ID4+PiA2KSwgdGhpcy5nZSgxMjggfCA2MyAmIHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlUG9pbnRBdCgwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmdlKDI0MCB8IHQgPj4+IDE4KSwgdGhpcy5nZSgxMjggfCA2MyAmIHQgPj4+IDEyKSwgdGhpcy5nZSgxMjggfCA2MyAmIHQgPj4+IDYpLCBcbiAgICAgICAgICAgICAgICB0aGlzLmdlKDEyOCB8IDYzICYgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy55ZSgpO1xuICAgIH1cbiAgICBUZSh0KSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGFjdHVhbCB2YWx1ZSBpbiBiaWctZW5kaWFuIGZvcm1hdCB3aXRoIGxlYWRpbmcgMCBieXRlcyBkcm9wcGVkLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5FZSh0KSwgbiA9IEppKGUpO1xuICAgICAgICB0aGlzLkFlKDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIG47XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgdCA9IGUubGVuZ3RoIC0gbjsgdCA8IGUubGVuZ3RoOyArK3QpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiBlW3RdO1xuICAgIH1cbiAgICBSZSh0KSB7XG4gICAgICAgIC8vIFZhbHVlcyBhcmUgZW5jb2RlZCB3aXRoIGEgc2luZ2xlIGJ5dGUgbGVuZ3RoIHByZWZpeCwgZm9sbG93ZWQgYnkgdGhlXG4gICAgICAgIC8vIGludmVydGVkIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkVlKHQpLCBuID0gSmkoZSk7XG4gICAgICAgIHRoaXMuQWUoMSArIG4pLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfigyNTUgJiBuKTtcbiAgICAgICAgLy8gV3JpdGUgdGhlIGxlbmd0aFxuICAgICAgICBmb3IgKGxldCB0ID0gZS5sZW5ndGggLSBuOyB0IDwgZS5sZW5ndGg7ICsrdCkgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgZVt0XSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyB0aGUgXCJpbmZpbml0eVwiIGJ5dGUgc2VxdWVuY2UgdGhhdCBzb3J0cyBhZnRlciBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGFzY2VuZGluZyBvcmRlci5cbiAgICAgKi8gICAgYmUoKSB7XG4gICAgICAgIHRoaXMuUGUoMjU1KSwgdGhpcy5QZSgyNTUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYmVmb3JlIGFsbCBvdGhlciBieXRlXG4gICAgICogc2VxdWVuY2VzIHdyaXR0ZW4gaW4gZGVzY2VuZGluZyBvcmRlci5cbiAgICAgKi8gICAgVmUoKSB7XG4gICAgICAgIHRoaXMudmUoMjU1KSwgdGhpcy52ZSgyNTUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJ1ZmZlciBzdWNoIHRoYXQgaXQgaXMgdGhlIHNhbWUgYXMgd2hlbiBpdCB3YXMgbmV3bHlcbiAgICAgKiBjb25zdHJ1Y3RlZC5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb24gPSAwO1xuICAgIH1cbiAgICBzZWVkKHQpIHtcbiAgICAgICAgdGhpcy5BZSh0Lmxlbmd0aCksIHRoaXMuYnVmZmVyLnNldCh0LCB0aGlzLnBvc2l0aW9uKSwgdGhpcy5wb3NpdGlvbiArPSB0Lmxlbmd0aDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIGEgY29weSBvZiB0aGUgZW5jb2RlZCBieXRlcyBpbiB0aGlzIGJ1ZmZlci4gICovICAgIFNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgYHZhbGAgaW50byBhbiBlbmNvZGluZyBzbyB0aGF0IHRoZSBvcmRlciBtYXRjaGVzIHRoZSBJRUVFIDc1NFxuICAgICAqIGZsb2F0aW5nLXBvaW50IGNvbXBhcmlzb24gcmVzdWx0cyB3aXRoIHRoZSBmb2xsb3dpbmcgZXhjZXB0aW9uczpcbiAgICAgKiAgIC0wLjAgPCAwLjBcbiAgICAgKiAgIGFsbCBub24tTmFOIDwgTmFOXG4gICAgICogICBOYU4gPSBOYU5cbiAgICAgKi8gICAgRWUodCkge1xuICAgICAgICBjb25zdCBlID0gXG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIEphdmFTY3JpcHQgbnVtYmVyIHRvIGEgYnl0ZSBhcnJheSAodXNpbmcgYmlnIGVuZGlhbiBlbmNvZGluZykuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDgpKTtcbiAgICAgICAgICAgIHJldHVybiBlLnNldEZsb2F0NjQoMCwgdCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMSksIG5ldyBVaW50OEFycmF5KGUuYnVmZmVyKTtcbiAgICAgICAgfSh0KSwgbiA9IDAgIT0gKDEyOCAmIGVbMF0pO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZmlyc3QgYml0IGlzIHNldC4gV2UgdXNlIGEgYml0IG1hc2sgc2luY2UgdmFsdWVbMF0gaXNcbiAgICAgICAgLy8gZW5jb2RlZCBhcyBhIG51bWJlciBmcm9tIDAgdG8gMjU1LlxuICAgICAgICAgICAgICAgIC8vIFJldmVydCB0aGUgdHdvIGNvbXBsZW1lbnQgdG8gZ2V0IG5hdHVyYWwgb3JkZXJpbmdcbiAgICAgICAgZVswXSBePSBuID8gMjU1IDogMTI4O1xuICAgICAgICBmb3IgKGxldCB0ID0gMTsgdCA8IGUubGVuZ3RoOyArK3QpIGVbdF0gXj0gbiA/IDI1NSA6IDA7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIGEgc2luZ2xlIGJ5dGUgYXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICovICAgIF9lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IDI1NSAmIHQ7XG4gICAgICAgIDAgPT09IGUgPyAodGhpcy5QZSgwKSwgdGhpcy5QZSgyNTUpKSA6IDI1NSA9PT0gZSA/ICh0aGlzLlBlKDI1NSksIHRoaXMuUGUoMCkpIDogdGhpcy5QZShlKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGRlc2NlbmRpbmcgdG8gdGhlIGJ1ZmZlci4gICovICAgIGdlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IDI1NSAmIHQ7XG4gICAgICAgIDAgPT09IGUgPyAodGhpcy52ZSgwKSwgdGhpcy52ZSgyNTUpKSA6IDI1NSA9PT0gZSA/ICh0aGlzLnZlKDI1NSksIHRoaXMudmUoMCkpIDogdGhpcy52ZSh0KTtcbiAgICB9XG4gICAgd2UoKSB7XG4gICAgICAgIHRoaXMuUGUoMCksIHRoaXMuUGUoMSk7XG4gICAgfVxuICAgIHllKCkge1xuICAgICAgICB0aGlzLnZlKDApLCB0aGlzLnZlKDEpO1xuICAgIH1cbiAgICBQZSh0KSB7XG4gICAgICAgIHRoaXMuQWUoMSksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB0O1xuICAgIH1cbiAgICB2ZSh0KSB7XG4gICAgICAgIHRoaXMuQWUoMSksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+dDtcbiAgICB9XG4gICAgQWUodCkge1xuICAgICAgICBjb25zdCBlID0gdCArIHRoaXMucG9zaXRpb247XG4gICAgICAgIGlmIChlIDw9IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICAvLyBUcnkgZG91YmxpbmcuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSAyICogdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICAvLyBTdGlsbCBub3QgYmlnIGVub3VnaD8gSnVzdCBhbGxvY2F0ZSB0aGUgcmlnaHQgc2l6ZS5cbiAgICAgICAgICAgICAgICBuIDwgZSAmJiAobiA9IGUpO1xuICAgICAgICAvLyBDcmVhdGUgdGhlIG5ldyBidWZmZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBVaW50OEFycmF5KG4pO1xuICAgICAgICBzLnNldCh0aGlzLmJ1ZmZlciksIC8vIGNvcHkgb2xkIGRhdGFcbiAgICAgICAgdGhpcy5idWZmZXIgPSBzO1xuICAgIH1cbn1cblxuY2xhc3MgWGkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5EZSA9IHQ7XG4gICAgfVxuICAgIHVlKHQpIHtcbiAgICAgICAgdGhpcy5EZS5kZSh0KTtcbiAgICB9XG4gICAgaWUodCkge1xuICAgICAgICB0aGlzLkRlLnBlKHQpO1xuICAgIH1cbiAgICBzZSh0KSB7XG4gICAgICAgIHRoaXMuRGUuVGUodCk7XG4gICAgfVxuICAgIGVlKCkge1xuICAgICAgICB0aGlzLkRlLmJlKCk7XG4gICAgfVxufVxuXG5jbGFzcyBaaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkRlID0gdDtcbiAgICB9XG4gICAgdWUodCkge1xuICAgICAgICB0aGlzLkRlLm1lKHQpO1xuICAgIH1cbiAgICBpZSh0KSB7XG4gICAgICAgIHRoaXMuRGUuSWUodCk7XG4gICAgfVxuICAgIHNlKHQpIHtcbiAgICAgICAgdGhpcy5EZS5SZSh0KTtcbiAgICB9XG4gICAgZWUoKSB7XG4gICAgICAgIHRoaXMuRGUuVmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBgRGlyZWN0aW9uYWxJbmRleEJ5dGVFbmNvZGVyYCB1c2luZyBgT3JkZXJlZENvZGVXcml0ZXJgIGZvciB0aGVcbiAqIGFjdHVhbCBlbmNvZGluZy5cbiAqLyBjbGFzcyB0ciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuRGUgPSBuZXcgWWksIHRoaXMuQ2UgPSBuZXcgWGkodGhpcy5EZSksIHRoaXMueGUgPSBuZXcgWmkodGhpcy5EZSk7XG4gICAgfVxuICAgIHNlZWQodCkge1xuICAgICAgICB0aGlzLkRlLnNlZWQodCk7XG4gICAgfVxuICAgIE5lKHQpIHtcbiAgICAgICAgcmV0dXJuIDAgLyogQVNDRU5ESU5HICovID09PSB0ID8gdGhpcy5DZSA6IHRoaXMueGU7XG4gICAgfVxuICAgIFNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5EZS5TZSgpO1xuICAgIH1cbiAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5EZS5yZXNldCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBSZXByZXNlbnRzIGFuIGluZGV4IGVudHJ5IHNhdmVkIGJ5IHRoZSBTREsgaW4gcGVyc2lzdGVkIHN0b3JhZ2UuICovIGNsYXNzIGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuaW5kZXhJZCA9IHQsIHRoaXMuZG9jdW1lbnRLZXkgPSBlLCB0aGlzLmFycmF5VmFsdWUgPSBuLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIEluZGV4RW50cnkgZW50cnkgdGhhdCBzb3J0cyBpbW1lZGlhdGVseSBhZnRlciB0aGUgY3VycmVudFxuICAgICAqIGRpcmVjdGlvbmFsIHZhbHVlLlxuICAgICAqLyAgICBrZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgsIGUgPSAwID09PSB0IHx8IDI1NSA9PT0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlW3QgLSAxXSA/IHQgKyAxIDogdCwgbiA9IG5ldyBVaW50OEFycmF5KGUpO1xuICAgICAgICByZXR1cm4gbi5zZXQodGhpcy5kaXJlY3Rpb25hbFZhbHVlLCAwKSwgZSAhPT0gdCA/IG4uc2V0KFsgMCBdLCB0aGlzLmRpcmVjdGlvbmFsVmFsdWUubGVuZ3RoKSA6ICsrbltuLmxlbmd0aCAtIDFdLCBcbiAgICAgICAgbmV3IGVyKHRoaXMuaW5kZXhJZCwgdGhpcy5kb2N1bWVudEtleSwgdGhpcy5hcnJheVZhbHVlLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5yKHQsIGUpIHtcbiAgICBsZXQgbiA9IHQuaW5kZXhJZCAtIGUuaW5kZXhJZDtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiAobiA9IHNyKHQuYXJyYXlWYWx1ZSwgZS5hcnJheVZhbHVlKSwgMCAhPT0gbiA/IG4gOiAobiA9IHNyKHQuZGlyZWN0aW9uYWxWYWx1ZSwgZS5kaXJlY3Rpb25hbFZhbHVlKSwgXG4gICAgMCAhPT0gbiA/IG4gOiB4dC5jb21wYXJhdG9yKHQuZG9jdW1lbnRLZXksIGUuZG9jdW1lbnRLZXkpKSk7XG59XG5cbmZ1bmN0aW9uIHNyKHQsIGUpIHtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoICYmIG4gPCBlLmxlbmd0aDsgKytuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0W25dIC0gZVtuXTtcbiAgICAgICAgaWYgKDAgIT09IHMpIHJldHVybiBzO1xuICAgIH1cbiAgICByZXR1cm4gdC5sZW5ndGggLSBlLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBsaWdodCBxdWVyeSBwbGFubmVyIGZvciBGaXJlc3RvcmUuXG4gKlxuICogVGhpcyBjbGFzcyBtYXRjaGVzIGEgYEZpZWxkSW5kZXhgIGFnYWluc3QgYSBGaXJlc3RvcmUgUXVlcnkgYFRhcmdldGAuIEl0XG4gKiBkZXRlcm1pbmVzIHdoZXRoZXIgYSBnaXZlbiBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgc3BlY2lmaWVkIHRhcmdldC5cbiAqXG4gKiBUaGUgZm9sbG93aW5nIHRhYmxlIHNob3djYXNlcyBzb21lIHBvc3NpYmxlIGluZGV4IGNvbmZpZ3VyYXRpb25zOlxuICpcbiAqIFF1ZXJ5ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8IEluZGV4XG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYSBBU0MsIGIgREVTQ1xuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJz09JywgJ2EnKS53aGVyZSgnYicsICc9PScsICdiJykgICAgICAgICB8IGIgREVTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKSAgICAgICAgICAgICAgICAgIHwgYSBBU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJywgJ2Rlc2MnKSAgICAgICAgICB8IGEgREVTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnKS5vcmRlckJ5KCdiJykgICAgIHwgYSBBU0MsIGIgQVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpLm9yZGVyQnkoJ2InKSAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnYXJyYXktY29udGFpbnMnLCAnYScpLm9yZGVyQnkoJ2InKSAgICAgIHwgYSBDT05UQUlOUywgYiBBU0NFTkRJTkdcbiAqIHdoZXJlKCdhJywgJ2FycmF5LWNvbnRhaW5zJywgJ2EnKS5vcmRlckJ5KCdiJykgICAgICB8IGEgQ09OVEFJTlNcbiAqLyBjbGFzcyBpciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25JZCA9IG51bGwgIT0gdC5jb2xsZWN0aW9uR3JvdXAgPyB0LmNvbGxlY3Rpb25Hcm91cCA6IHQucGF0aC5sYXN0U2VnbWVudCgpLCBcbiAgICAgICAgdGhpcy5NZSA9IHQub3JkZXJCeSwgdGhpcy5PZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZTtcbiAgICAgICAgICAgIHQuUygpID8gdGhpcy5GZSA9IHQgOiB0aGlzLk9lLnB1c2godCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBpbmRleCBjYW4gYmUgdXNlZCB0byBzZXJ2ZSB0aGUgVGFyZ2V0SW5kZXhNYXRjaGVyJ3NcbiAgICAgKiB0YXJnZXQuXG4gICAgICpcbiAgICAgKiBBbiBpbmRleCBpcyBjb25zaWRlcmVkIGNhcGFibGUgb2Ygc2VydmluZyB0aGUgdGFyZ2V0IHdoZW46XG4gICAgICogLSBUaGUgdGFyZ2V0IHVzZXMgYWxsIGluZGV4IHNlZ21lbnRzIGZvciBpdHMgZmlsdGVycyBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAqICAgVGhlIHRhcmdldCBjYW4gaGF2ZSBhZGRpdGlvbmFsIGZpbHRlciBhbmQgb3JkZXJCeSBjbGF1c2VzLCBidXQgbm90XG4gICAgICogICBmZXdlci5cbiAgICAgKiAtIElmIGFuIEFycmF5Q29udGFpbnMvQXJyYXlDb250YWluc0FueWZpbHRlciBpcyB1c2VkLCB0aGUgaW5kZXggbXVzdCBhbHNvXG4gICAgICogICBoYXZlIGEgY29ycmVzcG9uZGluZyBgQ09OVEFJTlNgIHNlZ21lbnQuXG4gICAgICogLSBBbGwgZGlyZWN0aW9uYWwgaW5kZXggc2VnbWVudHMgY2FuIGJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0IGFzIGEgc2VyaWVzIG9mXG4gICAgICogICBlcXVhbGl0eSBmaWx0ZXJzLCBhIHNpbmdsZSBpbmVxdWFsaXR5IGZpbHRlciBhbmQgYSBzZXJpZXMgb2Ygb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGUgZXF1YWxpdHkgZmlsdGVycyBtYXkgYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgKiAtIFRoZSBvcHRpb25hbCBzZWdtZW50IGZvciB0aGUgaW5lcXVhbGl0eSBmaWx0ZXIgbXVzdCBhcHBlYXIgYWZ0ZXIgYWxsXG4gICAgICogICBlcXVhbGl0eSBzZWdtZW50cy5cbiAgICAgKiAtIFRoZSBzZWdtZW50cyB0aGF0IHJlcHJlc2VudCB0aGF0IG9yZGVyQnkgY2xhdXNlIG9mIHRoZSB0YXJnZXQgbXVzdCBhcHBlYXJcbiAgICAgKiAgIGluIG9yZGVyIGFmdGVyIGFsbCBlcXVhbGl0eSBhbmQgaW5lcXVhbGl0eSBzZWdtZW50cy4gU2luZ2xlIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMgY2Fubm90IGJlIHNraXBwZWQsIGJ1dCBhIGNvbnRpbnVvdXMgb3JkZXJCeSBzdWZmaXggbWF5IGJlXG4gICAgICogICBvbWl0dGVkLlxuICAgICAqLyAgICAkZSh0KSB7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGFycmF5IGVsZW1lbnQsIGZpbmQgYSBtYXRjaGluZyBmaWx0ZXIuXG4gICAgICAgIGNvbnN0IGUgPSBuZSh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSAmJiAhdGhpcy5CZShlKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gc2UodCk7XG4gICAgICAgIGxldCBzID0gMCwgaSA9IDA7XG4gICAgICAgIC8vIFByb2Nlc3MgYWxsIGVxdWFsaXRpZXMgZmlyc3QuIEVxdWFsaXRpZXMgY2FuIGFwcGVhciBvdXQgb2Ygb3JkZXIuXG4gICAgICAgIGZvciAoO3MgPCBuLmxlbmd0aCAmJiB0aGlzLkJlKG5bc10pOyArK3MpIDtcbiAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBoYXZlIHByb2Nlc3NlZCBhbGwgc2VnbWVudHMsIGFsbCBzZWdtZW50cyBhcmUgdXNlZCB0byBzZXJ2ZVxuICAgICAgICAvLyB0aGUgZXF1YWxpdHkgZmlsdGVycyBhbmQgd2UgZG8gbm90IG5lZWQgdG8gbWFwIGFueSBzZWdtZW50cyB0byB0aGVcbiAgICAgICAgLy8gdGFyZ2V0J3MgaW5lcXVhbGl0eSBhbmQgb3JkZXJCeSBjbGF1c2VzLlxuICAgICAgICAgICAgICAgIGlmIChzID09PSBuLmxlbmd0aCkgcmV0dXJuICEwO1xuICAgICAgICAvLyBJZiB0aGVyZSBpcyBhbiBpbmVxdWFsaXR5IGZpbHRlciwgdGhlIG5leHQgc2VnbWVudCBtdXN0IG1hdGNoIGJvdGggdGhlXG4gICAgICAgIC8vIGZpbHRlciBhbmQgdGhlIGZpcnN0IG9yZGVyQnkgY2xhdXNlLlxuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuRmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuW3NdO1xuICAgICAgICAgICAgaWYgKCF0aGlzLkxlKHRoaXMuRmUsIHQpIHx8ICF0aGlzLlVlKHRoaXMuTWVbaSsrXSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgICAgICsrcztcbiAgICAgICAgfVxuICAgICAgICAvLyBBbGwgcmVtYWluaW5nIHNlZ21lbnRzIG5lZWQgdG8gcmVwcmVzZW50IHRoZSBwcmVmaXggb2YgdGhlIHRhcmdldCdzXG4gICAgICAgIC8vIG9yZGVyQnkuXG4gICAgICAgICAgICAgICAgZm9yICg7cyA8IG4ubGVuZ3RoOyArK3MpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuW3NdO1xuICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5NZS5sZW5ndGggfHwgIXRoaXMuVWUodGhpcy5NZVtpKytdLCB0KSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgQmUodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5PZSkgaWYgKHRoaXMuTGUoZSwgdCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBMZSh0LCBlKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQgfHwgIXQuZmllbGQuaXNFcXVhbChlLmZpZWxkUGF0aCkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgbiA9IFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gdC5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gdC5vcDtcbiAgICAgICAgcmV0dXJuIDIgLyogQ09OVEFJTlMgKi8gPT09IGUua2luZCA9PT0gbjtcbiAgICB9XG4gICAgVWUodCwgZSkge1xuICAgICAgICByZXR1cm4gISF0LmZpZWxkLmlzRXF1YWwoZS5maWVsZFBhdGgpICYmICgwIC8qIEFTQ0VORElORyAqLyA9PT0gZS5raW5kICYmIFwiYXNjXCIgLyogQVNDRU5ESU5HICovID09PSB0LmRpciB8fCAxIC8qIERFU0NFTkRJTkcgKi8gPT09IGUua2luZCAmJiBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSB0LmRpcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgSW5kZXhNYW5hZ2VyLlxuICovIGNsYXNzIHJyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5xZSA9IG5ldyBvcjtcbiAgICB9XG4gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5xZS5hZGQoZSksIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLnFlLmdldEVudHJpZXMoZSkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleGVzKHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoW10pO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUodCkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGV4cG9zZWQgYnkgTWVtb3J5SW5kZXhNYW5hZ2VyLlxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxuICogaW4gaW5kZXhlZGRiX3NjaGVtYS50c1xuICovIGNsYXNzIG9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXG4gICAgYWRkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXSB8fCBuZXcgJG4oX3QuY29tcGFyYXRvciksIGkgPSAhcy5oYXMobik7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4W2VdID0gcy5hZGQobiksIGk7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV07XG4gICAgICAgIHJldHVybiBzICYmIHMuaGFzKG4pO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmluZGV4W3RdIHx8IG5ldyAkbihfdC5jb21wYXJhdG9yKSkudG9BcnJheSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgdXIgPSBuZXcgVWludDhBcnJheSgwKTtcblxuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKlxuICogUE9SVElORyBOT1RFOiBVbmxpa2UgaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2ViIFNESyBkb2VzIG5vdCBtZW1vaXplIGluZGV4XG4gKiBkYXRhIGFzIGl0IHN1cHBvcnRzIG11bHRpLXRhYiBhY2Nlc3MuXG4gKi9cbmNsYXNzIGFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmVcbiAgICAgICAgICogdXNlZCB0byBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5HZSA9IG5ldyBvciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGZyb20gYSB0YXJnZXQgdG8gaXRzIGVxdWl2YWxlbnQgbGlzdCBvZiBzdWItdGFyZ2V0cy4gRWFjaCBzdWItdGFyZ2V0XG4gICAgICAgICAqIGNvbnRhaW5zIG9ubHkgb25lIHRlcm0gZnJvbSB0aGUgdGFyZ2V0J3MgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLktlID0gbmV3IGtuKCh0ID0+IGZlKHQpKSwgKCh0LCBlKSA9PiBfZSh0LCBlKSkpLCB0aGlzLnVpZCA9IHQudWlkIHx8IFwiXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxuICAgICAqXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICovICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLkdlLmhhcyhlKSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUubGFzdFNlZ21lbnQoKSwgcyA9IGUucG9wTGFzdCgpO1xuICAgICAgICAgICAgdC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLkdlLmFkZChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBuLFxuICAgICAgICAgICAgICAgIHBhcmVudDogVXMocylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gY3IodCkucHV0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLCBcIlwiIF0sIFsgdXQoZSksIFwiXCIgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gY3IodCkucXQocykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgY29sbGVjdGlvbklkIGd1YXJkIHNob3VsZG4ndCBiZSBuZWNlc3NhcnkgKGFuZCBpc24ndCBhcyBsb25nXG4gICAgICAgICAgICAgICAgLy8gYXMgd2UncmUgcnVubmluZyBpbiBhIHJlYWwgYnJvd3NlciksIGJ1dCB0aGVyZSdzIGEgYnVnIGluXG4gICAgICAgICAgICAgICAgLy8gaW5kZXhlZGRic2hpbSB0aGF0IGJyZWFrcyBvdXIgcmFuZ2UgaW4gb3VyIHRlc3RzIHJ1bm5pbmcgaW4gbm9kZTpcbiAgICAgICAgICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vYXhlbWNsaW9uL0luZGV4ZWREQlNoaW0vaXNzdWVzLzMzNFxuICAgICAgICAgICAgICAgIGlmIChzLmNvbGxlY3Rpb25JZCAhPT0gZSkgYnJlYWs7XG4gICAgICAgICAgICAgICAgbi5wdXNoKEtzKHMucGFyZW50KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhZGRGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IFZlcmlmeSB0aGF0IHRoZSBhdXRvLWluY3JlbWVudGluZyBpbmRleCBJRCB3b3JrcyBpblxuICAgICAgICAvLyBTYWZhcmkgJiBGaXJlZm94LlxuICAgICAgICBjb25zdCBuID0gbHIodCksIHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGluZGV4SWQ6IHQuaW5kZXhJZCxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IHQuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICAgICAgICAgIGZpZWxkczogdC5maWVsZHMubWFwKCh0ID0+IFsgdC5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIHQua2luZCBdKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSk7XG4gICAgICAgIC8vIGBpbmRleElkYCBpcyBhdXRvLXBvcHVsYXRlZCBieSBJbmRleGVkRGJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZSBzLmluZGV4SWQsIG4uYWRkKHMpLm5leHQoKTtcbiAgICB9XG4gICAgZGVsZXRlRmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBscih0KSwgcyA9IGZyKHQpLCBpID0gaHIodCk7XG4gICAgICAgIHJldHVybiBuLmRlbGV0ZShlLmluZGV4SWQpLm5leHQoKCgpID0+IHMuZGVsZXRlKElEQktleVJhbmdlLmJvdW5kKFsgZS5pbmRleElkIF0sIFsgZS5pbmRleElkICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCkpKSkubmV4dCgoKCkgPT4gaS5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyBlLmluZGV4SWQgXSwgWyBlLmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gaHIodCk7XG4gICAgICAgIGxldCBzID0gITA7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gd2kuZm9yRWFjaCh0aGlzLlFlKGUpLCAoZSA9PiB0aGlzLmdldEZpZWxkSW5kZXgodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBzICYmIChzID0gISF0KSwgaS5zZXQoZSwgdCk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSB6bigpO1xuICAgICAgICAgICAgICAgIHJldHVybiB3aS5mb3JFYWNoKGksICgocywgaSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcjtcbiAgICAgICAgICAgICAgICAgICAgTyhcIkluZGV4ZWREYkluZGV4TWFuYWdlclwiLCBgVXNpbmcgaW5kZXggJHtyID0gcywgYGlkPSR7ci5pbmRleElkfXxjZz0ke3IuY29sbGVjdGlvbkdyb3VwfXxmPSR7ci5maWVsZHMubWFwKCh0ID0+IGAke3QuZmllbGRQYXRofToke3Qua2luZH1gKSkuam9pbihcIixcIil9YH0gdG8gZXhlY3V0ZSAke2ZlKGUpfWApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG5lKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbWUodCwgbi5maWVsZFBhdGgpKSBzd2l0Y2ggKGUub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUudmFsdWUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW107XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIGUudmFsdWUgXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgZmlsdGVycyBhcmUgbm90IGFycmF5IGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxpc3Qgb2YgdmFsdWVzIHRoYXQgYXJlIHVzZWQgaW4gIT0gb3IgTk9UX0lOIGZpbHRlcnMuIFJldHVybnNcbiAqIGBudWxsYCBpZiB0aGVyZSBhcmUgbm8gc3VjaCBmaWx0ZXJzLlxuICovIChpLCBzKSwgdSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIHNlKGUpKSBmb3IgKGNvbnN0IGUgb2YgbWUodCwgcy5maWVsZFBhdGgpKSBzd2l0Y2ggKGUub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj09XCIgLyogRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBJTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRW5jb2RlIGVxdWFsaXR5IHByZWZpeCwgd2hpY2ggaXMgZW5jb2RlZCBpbiB0aGUgaW5kZXggdmFsdWUgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGluZXF1YWxpdHkgKGUuZy4gYGEgPT0gJ2EnICYmIGIgIT0gJ2InYCBpcyBlbmNvZGVkIHRvXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYHZhbHVlICE9ICdhYidgKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNldChzLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgZS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm90SW4vTm90RXF1YWwgaXMgYWx3YXlzIGEgc3VmZml4LiBUaGVyZSBjYW5ub3QgYmUgYW55IHJlbWFpbmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNlZ21lbnRzIGFuZCBoZW5jZSB3ZSBjYW4gcmV0dXJuIGVhcmx5IGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uc2V0KHMuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCBlLnZhbHVlKSwgQXJyYXkuZnJvbShuLnZhbHVlcygpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBub3RJbiBib3VuZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYSBsb3dlciBib3VuZCBvZiBmaWVsZCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHN0YXJ0aW5nIHBvaW50IHRvXG4gKiBzY2FuIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgbnVsbGAgaWYgbm8gbG93ZXIgYm91bmRcbiAqIGV4aXN0cy5cbiAqLyAoaSwgcyksIGEgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYSBsb3dlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgciBvZiBzZShlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlLCBvID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbWUodCwgci5maWVsZFBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0LCBzID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobi5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI8XCIgLyogTEVTU19USEFOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IFwibnVsbFZhbHVlXCIgaW4gKGkgPSBuLnZhbHVlKSA/IGt0IDogXCJib29sZWFuVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW5WYWx1ZTogITFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcImludGVnZXJWYWx1ZVwiIGluIGkgfHwgXCJkb3VibGVWYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwic3RyaW5nVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBieXRlc1ZhbHVlOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIGkgPyBxdCh2dC5lbXB0eSgpLCB4dC5lbXB0eSgpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvUG9pbnRWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogLTkwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJhcnJheVZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwibWFwVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IEwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj09XCIgLyogRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIElOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG4udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI+XCIgLyogR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBuLnZhbHVlLCBzID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0ga3Q7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbG93ZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgSnQoZSwgdCkgPT09IHQgJiYgKGUgPSB0LCBvID0gcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgc3RhcnRBdCBib3VuZCwgY29tcGFyZSB0aGUgdmFsdWVzIGFnYWluc3QgdGhlIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYm91bmRhcnkgdG8gc2VlIGlmIHdlIGNhbiBuYXJyb3cgdGhlIHNjb3BlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5zdGFydEF0KSBmb3IgKGxldCBuID0gMDsgbiA8IHQub3JkZXJCeS5sZW5ndGg7ICsrbikgaWYgKHQub3JkZXJCeVtuXS5maWVsZC5pc0VxdWFsKHIuZmllbGRQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5zdGFydEF0LnBvc2l0aW9uW25dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKdChlLCBzKSA9PT0gcyAmJiAoZSA9IHMsIG8gPSB0LnN0YXJ0QXQuaW5jbHVzaXZlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGUpIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vIGxvd2VyIGJvdW5kIGV4aXN0c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4ucHVzaChlKSwgcyAmJiAocyA9IG8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKiogUmV0dXJucyB0aGUgbGFyZ2VzdCB2YWx1ZSBmb3IgdGhlIGdpdmVuIHZhbHVlIHR5cGUgKGV4Y2x1c2l2ZSkuICovICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQZShuLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYW4gdXBwZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gZW5kaW5nIHBvaW50XG4gKiB3aGVuIHNjYW5uaW5nIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgbnVsbGAgaWYgbm9cbiAqIHVwcGVyIGJvdW5kIGV4aXN0cy5cbiAqLyAoaSwgcyksIGMgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYW4gdXBwZXIgYm91bmQgaWYgdGhlcmUgaXMgYSBzdWl0YWJsZSBmaWx0ZXIgb3JcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVuZEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIHNlKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGUsIG8gPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIGFsbCBmaWx0ZXJzIHRvIGZpbmQgYSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgZmllbGQgc2VnbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBtZSh0LCByLmZpZWxkUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQsIHMgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPlwiIC8qIEdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gXCJudWxsVmFsdWVcIiBpbiAoaSA9IG4udmFsdWUpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvb2xlYW5WYWx1ZTogITFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcImJvb2xlYW5WYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gaSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwic3RyaW5nVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiBpID8gcXQodnQuZW1wdHkoKSwgeHQuZW1wdHkoKSkgOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcImdlb1BvaW50VmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJhcnJheVZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gaSA/IE50IDogTCgpLCBzID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIEVRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiaW5cIiAvKiBJTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBuLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPFwiIC8qIExFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gbi52YWx1ZSwgcyA9ICExO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IE50O1xuIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIHVwcGVyIGJvdW5kcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFl0KGUsIHQpID09PSB0ICYmIChlID0gdCwgbyA9IHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGVuZEF0IGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3VuZGFyeSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmVuZEF0KSBmb3IgKGxldCBuID0gMDsgbiA8IHQub3JkZXJCeS5sZW5ndGg7ICsrbikgaWYgKHQub3JkZXJCeVtuXS5maWVsZC5pc0VxdWFsKHIuZmllbGRQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5lbmRBdC5wb3NpdGlvbltuXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWXQoZSwgcykgPT09IHMgJiYgKGUgPSBzLCBvID0gdC5lbmRBdC5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gdXBwZXIgYm91bmQgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUpLCBzICYmIChzID0gbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGUobiwgcyk7XG4gICAgICAgICAgICAgICAgICAgIH0oaSwgcyksIGggPSB0aGlzLmplKHMsIGksIGEpLCBsID0gdGhpcy5qZShzLCBpLCBjKSwgZiA9IHRoaXMuV2UocywgaSwgdSksIGQgPSB0aGlzLnplKHMuaW5kZXhJZCwgbywgaCwgISFhICYmIGEuaW5jbHVzaXZlLCBsLCAhIWMgJiYgYy5pbmNsdXNpdmUsIGYpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2kuZm9yRWFjaChkLCAocyA9PiBuLkt0KHMsIGUubGltaXQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gdC5hZGQobmV3IHh0KEtzKGUuZG9jdW1lbnRLZXkpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShudWxsKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBRZSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5LZS5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChcbiAgICAgICAgLy8gVE9ETyhvcnF1ZXJ5KTogSW1wbGVtZW50IERORiB0cmFuc2Zvcm1cbiAgICAgICAgZSA9IFsgdCBdLCB0aGlzLktlLnNldCh0LCBlKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBrZXkgcmFuZ2UgcXVlcnkgb24gYERiSW5kZXhFbnRyeVN0b3JlYCB0aGF0IHVuaW9ucyBhbGxcbiAgICAgKiBib3VuZHMuXG4gICAgICovICAgIHplKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiB0b3RhbCBpbmRleCBzY2FucyB3ZSB1bmlvbiB0b2dldGhlci4gVGhpcyBpcyBzaW1pbGFyIHRvIGFcbiAgICAgICAgLy8gZGlzdHJpYnV0ZWQgbm9ybWFsIGZvcm0sIGJ1dCBhZGFwdGVkIGZvciBhcnJheSB2YWx1ZXMuIFdlIGNyZWF0ZSBhIHNpbmdsZVxuICAgICAgICAvLyBpbmRleCByYW5nZSBwZXIgdmFsdWUgaW4gYW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZIGZpbHRlclxuICAgICAgICAvLyBjb21iaW5lZCB3aXRoIHRoZSB2YWx1ZXMgZnJvbSB0aGUgcXVlcnkgYm91bmRzLlxuICAgICAgICBjb25zdCB1ID0gKG51bGwgIT0gZSA/IGUubGVuZ3RoIDogMSkgKiBNYXRoLm1heChudWxsICE9IG4gPyBuLmxlbmd0aCA6IDEsIG51bGwgIT0gaSA/IGkubGVuZ3RoIDogMSksIGEgPSB1IC8gKG51bGwgIT0gZSA/IGUubGVuZ3RoIDogMSksIGMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCB1OyArK2gpIHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBlID8gdGhpcy5IZShlW2ggLyBhXSkgOiB1ciwgbCA9IG4gPyB0aGlzLkplKHQsIHUsIG5baCAlIGFdLCBzKSA6IHRoaXMuWWUodCksIGYgPSBpID8gdGhpcy5YZSh0LCB1LCBpW2ggJSBhXSwgcikgOiB0aGlzLlllKHQgKyAxKTtcbiAgICAgICAgICAgIGMucHVzaCguLi50aGlzLmNyZWF0ZVJhbmdlKGwsIGYsIG8ubWFwKChlID0+IHRoaXMuSmUodCwgdSwgZSwgXG4gICAgICAgICAgICAvKiBpbmNsdXNpdmU9ICovICEwKSkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIGxvd2VyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgSmUodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IGVyKHQsIHh0LmVtcHR5KCksIGUsIG4pO1xuICAgICAgICByZXR1cm4gcyA/IGkgOiBpLmtlKCk7XG4gICAgfVxuICAgIC8qKiBHZW5lcmF0ZXMgdGhlIHVwcGVyIGJvdW5kIGZvciBgYXJyYXlWYWx1ZWAgYW5kIGBkaXJlY3Rpb25hbFZhbHVlYC4gKi8gICAgWGUodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IGVyKHQsIHh0LmVtcHR5KCksIGUsIG4pO1xuICAgICAgICByZXR1cm4gcyA/IGkua2UoKSA6IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyBhbiBlbXB0eSBib3VuZCB0aGF0IHNjb3BlcyB0aGUgaW5kZXggc2NhbiB0byB0aGUgY3VycmVudCBpbmRleFxuICAgICAqIGFuZCB1c2VyLlxuICAgICAqLyAgICBZZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZXIodCwgeHQuZW1wdHkoKSwgdXIsIHVyKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgaXIoZSksIHMgPSBudWxsICE9IGUuY29sbGVjdGlvbkdyb3VwID8gZS5jb2xsZWN0aW9uR3JvdXAgOiBlLnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZmlsdGVyKCh0ID0+IG4uJGUodCkpKTtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgaW5kZXggdGhhdCBtYXRjaGVzIHRoZSBtb3N0IG51bWJlciBvZiBzZWdtZW50cy5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnNvcnQoKCh0LCBlKSA9PiBlLmZpZWxkcy5sZW5ndGggLSB0LmZpZWxkcy5sZW5ndGgpKSwgZS5sZW5ndGggPiAwID8gZVswXSA6IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgYnl0ZSBlbmNvZGVkIGZvcm0gb2YgdGhlIGRpcmVjdGlvbmFsIHZhbHVlcyBpbiB0aGUgZmllbGQgaW5kZXguXG4gICAgICogUmV0dXJucyBgbnVsbGAgaWYgdGhlIGRvY3VtZW50IGRvZXMgbm90IGhhdmUgYWxsIGZpZWxkcyBzcGVjaWZpZWQgaW4gdGhlXG4gICAgICogaW5kZXguXG4gICAgICovICAgIFplKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyB0cjtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHNlKHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uTmUocy5raW5kKTtcbiAgICAgICAgICAgIHppLmZlLlp0KHQsIGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuLlNlKCk7XG4gICAgfVxuICAgIC8qKiBFbmNvZGVzIGEgc2luZ2xlIHZhbHVlIHRvIHRoZSBhc2NlbmRpbmcgaW5kZXggZm9ybWF0LiAqLyAgICBIZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgdHI7XG4gICAgICAgIHJldHVybiB6aS5mZS5adCh0LCBlLk5lKDAgLyogQVNDRU5ESU5HICovKSksIGUuU2UoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gZmllbGQgdmFsdWVzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC5cbiAgICAgKiBGb3IgSU4gcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgV2UodCwgZSwgbikge1xuICAgICAgICBpZiAobnVsbCA9PT0gbikgcmV0dXJuIFtdO1xuICAgICAgICBsZXQgcyA9IFtdO1xuICAgICAgICBzLnB1c2gobmV3IHRyKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICBmb3IgKGNvbnN0IHIgb2Ygc2UodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuW2krK107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgcykgaWYgKHRoaXMudG4oZSwgci5maWVsZFBhdGgpICYmIEt0KHQpKSBzID0gdGhpcy5lbihzLCByLCB0KTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG4uTmUoci5raW5kKTtcbiAgICAgICAgICAgICAgICB6aS5mZS5adCh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ubihzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyB0aGUgZ2l2ZW4gYm91bmRzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBpbiBgdGFyZ2V0YC4gRm9yIElOXG4gICAgICogcXVlcmllcywgYSBsaXN0IG9mIHBvc3NpYmxlIHZhbHVlcyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgamUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHRoaXMuV2UodCwgZSwgbi5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBieXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgcHJvdmlkZWQgZW5jb2RlcnMuICovICAgIG5uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGVbbl0gPSB0W25dLlNlKCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2VwYXJhdGUgZW5jb2RlciBmb3IgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBhcHBlbmRzIGVhY2ggdmFsdWUgdG8gYWxsIGV4aXN0aW5nIGVuY29kZXJzIChlLmcuIGZpbHRlcihcImFcIixcbiAgICAgKiBcIj09XCIsIFwiYTFcIikuZmlsdGVyKFwiYlwiLCBcImluXCIsIFtcImIxXCIsIFwiYjJcIl0pIGJlY29tZXMgW1wiYTEsYjFcIiwgXCJhMSxiMlwiXSkuIEFcbiAgICAgKiBsaXN0IG9mIG5ldyBlbmNvZGVycyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZW4odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWyAuLi50IF0sIGkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4uYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIGZvciAoY29uc3QgbiBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IHRyO1xuICAgICAgICAgICAgcy5zZWVkKG4uU2UoKSksIHppLmZlLlp0KHQsIHMuTmUoZS5raW5kKSksIGkucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgdG4odCwgZSkge1xuICAgICAgICByZXR1cm4gISF0LmZpbHRlcnMuZmluZCgodCA9PiB0IGluc3RhbmNlb2YgZ2UgJiYgdC5maWVsZC5pc0VxdWFsKGUpICYmIChcImluXCIgLyogSU4gKi8gPT09IHQub3AgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IHQub3ApKSk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBscih0KSwgcyA9IGZyKHQpO1xuICAgICAgICByZXR1cm4gKGUgPyBuLnF0KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgSURCS2V5UmFuZ2UuYm91bmQoZSwgZSkpIDogbi5xdCgpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiB3aS5mb3JFYWNoKHQsICh0ID0+IHMuZ2V0KFsgdC5pbmRleElkLCB0aGlzLnVpZCBdKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBlLnB1c2goZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gZSA/IG5ldyByZShlLnNlcXVlbmNlTnVtYmVyLCBuZXcgYWUoT2koZS5yZWFkVGltZSksIG5ldyB4dChLcyhlLmRvY3VtZW50S2V5KSksIGUubGFyZ2VzdEJhdGNoSWQpKSA6IHJlLmVtcHR5KCksIHMgPSB0LmZpZWxkcy5tYXAoKChbdCwgZV0pID0+IG5ldyBpZShtdC5mcm9tU2VydmVyRm9ybWF0KHQpLCBlKSkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGVlKHQuaW5kZXhJZCwgdC5jb2xsZWN0aW9uR3JvdXAsIHMsIG4pO1xuICAgICAgICAgICAgICAgIH0odCwgbikpO1xuICAgICAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gZSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEZpZWxkSW5kZXhlcyh0KS5uZXh0KCh0ID0+IDAgPT09IHQubGVuZ3RoID8gbnVsbCA6ICh0LnNvcnQoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyIC0gZS5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyO1xuICAgICAgICAgICAgcmV0dXJuIDAgIT09IG4gPyBuIDogcnQodC5jb2xsZWN0aW9uR3JvdXAsIGUuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgfSkpLCB0WzBdLmNvbGxlY3Rpb25Hcm91cCkpKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGxyKHQpLCBpID0gZnIodCk7XG4gICAgICAgIHJldHVybiB0aGlzLnNuKHQpLm5leHQoKHQgPT4gcy5xdChcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIElEQktleVJhbmdlLmJvdW5kKGUsIGUpKS5uZXh0KChlID0+IHdpLmZvckVhY2goZSwgKGUgPT4gaS5wdXQoZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBpbmRleElkOiB0LFxuICAgICAgICAgICAgICAgIHVpZDogZS51aWQgfHwgXCJcIixcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogbixcbiAgICAgICAgICAgICAgICByZWFkVGltZTogTWkocy5yZWFkVGltZSksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRLZXk6IFVzKHMuZG9jdW1lbnRLZXkucGF0aCksXG4gICAgICAgICAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IHMubGFyZ2VzdEJhdGNoSWRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZS5pbmRleElkLCB0aGlzLnVzZXIsIHQsIG4pKSkpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBgZ2V0RmllbGRJbmRleGVzKClgIG9uIFdlYiBkb2VzIG5vdCBjYWNoZSBpbmRleCBsb29rdXBzIGFzXG4gICAgICAgIC8vIGl0IGNvdWxkIGJlIHVzZWQgYWNyb3NzIGRpZmZlcmVudCBJbmRleGVkREIgdHJhbnNhY3Rpb25zLiBBcyBhbnkgY2FjaGVkXG4gICAgICAgIC8vIGRhdGEgbWlnaHQgYmUgaW52YWxpZGF0ZWQgYnkgb3RoZXIgbXVsdGktdGFiIGNsaWVudHMsIHdlIGNhbiBvbmx5IHRydXN0XG4gICAgICAgIC8vIGRhdGEgd2l0aGluIGEgc2luZ2xlIEluZGV4ZWREQiB0cmFuc2FjdGlvbi4gV2UgdGhlcmVmb3JlIGFkZCBhIGNhY2hlXG4gICAgICAgIC8vIGhlcmUuXG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gd2kuZm9yRWFjaChlLCAoKGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmdldChlLmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgICAgICByZXR1cm4gKGkgPyB3aS5yZXNvbHZlKGkpIDogdGhpcy5nZXRGaWVsZEluZGV4ZXModCwgZS5jb2xsZWN0aW9uR3JvdXApKS5uZXh0KChpID0+IChuLnNldChlLmNvbGxlY3Rpb25Hcm91cCwgaSksIFxuICAgICAgICAgICAgd2kuZm9yRWFjaChpLCAobiA9PiB0aGlzLnJuKHQsIGUsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLm9uKHMsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmlzRXF1YWwoaSkgPyB3aS5yZXNvbHZlKCkgOiB0aGlzLnVuKHQsIHMsIGUsIGkpO1xuICAgICAgICAgICAgfSkpKSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYW4odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gaHIodCkucHV0KHtcbiAgICAgICAgICAgIGluZGV4SWQ6IG4uaW5kZXhJZCxcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICBhcnJheVZhbHVlOiBuLmFycmF5VmFsdWUsXG4gICAgICAgICAgICBkaXJlY3Rpb25hbFZhbHVlOiBuLmRpcmVjdGlvbmFsVmFsdWUsXG4gICAgICAgICAgICBkb2N1bWVudEtleTogVXMoZS5rZXkucGF0aClcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIGhyKHQpLmRlbGV0ZShbIG4uaW5kZXhJZCwgdGhpcy51aWQsIG4uYXJyYXlWYWx1ZSwgbi5kaXJlY3Rpb25hbFZhbHVlLCBVcyhlLmtleS5wYXRoKSBdKTtcbiAgICB9XG4gICAgcm4odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gaHIodCk7XG4gICAgICAgIGxldCBpID0gbmV3ICRuKG5yKTtcbiAgICAgICAgcmV0dXJuIHMuV3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLm9ubHkoWyBuLmluZGV4SWQsIHRoaXMudWlkLCBVcyhlLnBhdGgpIF0pXG4gICAgICAgIH0sICgodCwgcykgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKG5ldyBlcihuLmluZGV4SWQsIGUsIHMuYXJyYXlWYWx1ZSwgcy5kaXJlY3Rpb25hbFZhbHVlKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovICAgIG9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgJG4obnIpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5aZShlLCB0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gcykgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSBuZShlKTtcbiAgICAgICAgaWYgKG51bGwgIT0gaSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZGF0YS5maWVsZChpLmZpZWxkUGF0aCk7XG4gICAgICAgICAgICBpZiAoS3QocikpIGZvciAoY29uc3QgaSBvZiByLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKSBuID0gbi5hZGQobmV3IGVyKGUuaW5kZXhJZCwgdC5rZXksIHRoaXMuSGUoaSksIHMpKTtcbiAgICAgICAgfSBlbHNlIG4gPSBuLmFkZChuZXcgZXIoZS5pbmRleElkLCB0LmtleSwgdXIsIHMpKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBkb2N1bWVudCBieSBkZWxldGluZyBlbnRyaWVzXG4gICAgICogdGhhdCBhcmUgbm8gbG9uZ2VyIHJlZmVyZW5jZWQgaW4gYG5ld0VudHJpZXNgIGFuZCBhZGRpbmcgYWxsIG5ld2x5IGFkZGVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgdW4odCwgZSwgbiwgcykge1xuICAgICAgICBPKFwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyXCIsIFwiVXBkYXRpbmcgaW5kZXggZW50cmllcyBmb3IgZG9jdW1lbnQgJyVzJ1wiLCBlLmtleSk7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmdldEl0ZXJhdG9yKCksIG8gPSBlLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgICAgICBsZXQgdSA9IExuKHIpLCBhID0gTG4obyk7XG4gICAgICAgICAgICAvLyBXYWxrIHRocm91Z2ggdGhlIHR3byBzZXRzIGF0IHRoZSBzYW1lIHRpbWUsIHVzaW5nIHRoZSBvcmRlcmluZyBkZWZpbmVkIGJ5XG4gICAgICAgICAgICAvLyBgY29tcGFyYXRvcmAuXG4gICAgICAgICAgICBmb3IgKDt1IHx8IGE7ICkge1xuICAgICAgICAgICAgICAgIGxldCB0ID0gITEsIGUgPSAhMTtcbiAgICAgICAgICAgICAgICBpZiAodSAmJiBhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuKHUsIGEpO1xuICAgICAgICAgICAgICAgICAgICBzIDwgMCA/IFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgcmVtb3ZlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkXG4gICAgICAgICAgICAgICAgICAgIC8vIHdhbGt0aHJvdWdoIGlzIG9ubHkgaW4gYGJlZm9yZWAuXG4gICAgICAgICAgICAgICAgICAgIGUgPSAhMCA6IHMgPiAwICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIGFkZGVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWQgd2Fsa3Rocm91Z2hcbiAgICAgICAgICAgICAgICAgICAgLy8gaXMgb25seSBpbiBgYWZ0ZXJgLlxuICAgICAgICAgICAgICAgICAgICB0ID0gITApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBudWxsICE9IHUgPyBlID0gITAgOiB0ID0gITA7XG4gICAgICAgICAgICAgICAgdCA/IChzKGEpLCBhID0gTG4obykpIDogZSA/IChpKHUpLCB1ID0gTG4ocikpIDogKHUgPSBMbihyKSwgYSA9IExuKG8pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfShuLCBzLCBuciwgKFxuICAgICAgICAvKiBvbkFkZD0gKi8gbiA9PiB7XG4gICAgICAgICAgICBpLnB1c2godGhpcy5hbih0LCBlLCBuKSk7XG4gICAgICAgIH0pLCAoXG4gICAgICAgIC8qIG9uUmVtb3ZlPSAqLyBuID0+IHtcbiAgICAgICAgICAgIGkucHVzaCh0aGlzLmNuKHQsIGUsIG4pKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBzbih0KSB7XG4gICAgICAgIGxldCBlID0gMTtcbiAgICAgICAgcmV0dXJuIGZyKHQpLld0KHtcbiAgICAgICAgICAgIGluZGV4OiBcInNlcXVlbmNlTnVtYmVySW5kZXhcIixcbiAgICAgICAgICAgIHJldmVyc2U6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVpZCwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSlcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvbmUoKSwgZSA9IG4uc2VxdWVuY2VOdW1iZXIgKyAxO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNldCBvZiBJREIgcmFuZ2VzIHRoYXQgc3BsaXRzIHRoZSBleGlzdGluZyByYW5nZSBhbmQgZXhjbHVkZXNcbiAgICAgKiBhbnkgdmFsdWVzIHRoYXQgbWF0Y2ggdGhlIGBub3RJblZhbHVlYCBmcm9tIHRoZXNlIHJhbmdlcy4gQXMgYW4gZXhhbXBsZSxcbiAgICAgKiAnW2ZvbyA+IDIgJiYgZm9vICE9IDNdYCBiZWNvbWVzICBgW2ZvbyA+IDIgJiYgPCAzLCBmb28gPiAzXWAuXG4gICAgICovICAgIGNyZWF0ZVJhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVGhlIG5vdEliIHZhbHVlcyBuZWVkIHRvIGJlIHNvcnRlZCBhbmQgdW5pcXVlIHNvIHRoYXQgd2UgY2FuIHJldHVybiBhXG4gICAgICAgIC8vIHNvcnRlZCBzZXQgb2Ygbm9uLW92ZXJsYXBwaW5nIHJhbmdlcy5cbiAgICAgICAgbiA9IG4uc29ydCgoKHQsIGUpID0+IG5yKHQsIGUpKSkuZmlsdGVyKCgodCwgZSwgbikgPT4gIWUgfHwgMCAhPT0gbnIodCwgbltlIC0gMV0pKSk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcy5wdXNoKHQpO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2Ygbikge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5yKGksIHQpLCByID0gbnIoaSwgZSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgdGhlIGxvd2VyIGJvdW5kLiBXZSB0aGVyZWZvcmUgbmVlZCB0byByYWlzZSB0aGUgYm91bmRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgc1swXSA9IHQua2UoKTsgZWxzZSBpZiAobiA+IDAgJiYgciA8IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICBzLnB1c2goaSksIHMucHVzaChpLmtlKCkpOyBlbHNlIGlmIChyID4gMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgKGFuZCBhbGwgZm9sbG93aW5nIHZhbHVlcykgYXJlIG91dCBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoOyB0ICs9IDIpIGkucHVzaChJREJLZXlSYW5nZS5ib3VuZChbIHNbdF0uaW5kZXhJZCwgdGhpcy51aWQsIHNbdF0uYXJyYXlWYWx1ZSwgc1t0XS5kaXJlY3Rpb25hbFZhbHVlLCBcIlwiIF0sIFsgc1t0ICsgMV0uaW5kZXhJZCwgdGhpcy51aWQsIHNbdCArIDFdLmFycmF5VmFsdWUsIHNbdCArIDFdLmRpcmVjdGlvbmFsVmFsdWUsIFwiXCIgXSkpO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjb2xsZWN0aW9uUGFyZW50c1xuICogZG9jdW1lbnQgc3RvcmUuXG4gKi8gZnVuY3Rpb24gY3IodCkge1xuICAgIHJldHVybiBQaSh0LCBcImNvbGxlY3Rpb25QYXJlbnRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggZW50cnkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGhyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJpbmRleEVudHJpZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBjb25maWd1cmF0aW9uIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBscih0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwiaW5kZXhDb25maWd1cmF0aW9uXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgaW5kZXggc3RhdGUgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGZyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJpbmRleFN0YXRlXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBkciA9IHtcbiAgICBkaWRSdW46ICExLFxuICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogMCxcbiAgICB0YXJnZXRzUmVtb3ZlZDogMCxcbiAgICBkb2N1bWVudHNSZW1vdmVkOiAwXG59O1xuXG5jbGFzcyBfciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gV2hlbiB3ZSBhdHRlbXB0IHRvIGNvbGxlY3QsIHdlIHdpbGwgb25seSBkbyBzbyBpZiB0aGUgY2FjaGUgc2l6ZSBpcyBncmVhdGVyIHRoYW4gdGhpc1xuICAgIC8vIHRocmVzaG9sZC4gUGFzc2luZyBgQ09MTEVDVElPTl9ESVNBQkxFRGAgaGVyZSB3aWxsIGNhdXNlIGNvbGxlY3Rpb24gdG8gYWx3YXlzIGJlIHNraXBwZWQuXG4gICAgdCwgXG4gICAgLy8gVGhlIHBlcmNlbnRhZ2Ugb2Ygc2VxdWVuY2UgbnVtYmVycyB0aGF0IHdlIHdpbGwgYXR0ZW1wdCB0byBjb2xsZWN0XG4gICAgZSwgXG4gICAgLy8gQSBjYXAgb24gdGhlIHRvdGFsIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2lsbCBiZSBjb2xsZWN0ZWQuIFRoaXMgcHJldmVudHNcbiAgICAvLyB1cyBmcm9tIGNvbGxlY3RpbmcgYSBodWdlIG51bWJlciBvZiBzZXF1ZW5jZSBudW1iZXJzIGlmIHRoZSBjYWNoZSBoYXMgZ3Jvd24gdmVyeSBsYXJnZS5cbiAgICBuKSB7XG4gICAgICAgIHRoaXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA9IHQsIHRoaXMucGVyY2VudGlsZVRvQ29sbGVjdCA9IGUsIHRoaXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA9IG47XG4gICAgfVxuICAgIHN0YXRpYyB3aXRoQ2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfcih0LCBfci5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgX3IuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERlbGV0ZSBhIG11dGF0aW9uIGJhdGNoIGFuZCB0aGUgYXNzb2NpYXRlZCBkb2N1bWVudCBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBBIFBlcnNpc3RlbmNlUHJvbWlzZSBvZiB0aGUgZG9jdW1lbnQgbXV0YXRpb25zIHRoYXQgd2VyZSByZW1vdmVkLlxuICovXG5mdW5jdGlvbiB3cih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSB0LnN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIiksIHIgPSBbXSwgbyA9IElEQktleVJhbmdlLm9ubHkobi5iYXRjaElkKTtcbiAgICBsZXQgdSA9IDA7XG4gICAgY29uc3QgYSA9IHMuV3Qoe1xuICAgICAgICByYW5nZTogb1xuICAgIH0sICgodCwgZSwgbikgPT4gKHUrKywgbi5kZWxldGUoKSkpKTtcbiAgICByLnB1c2goYS5uZXh0KCgoKSA9PiB7XG4gICAgICAgIFUoMSA9PT0gdSk7XG4gICAgfSkpKTtcbiAgICBjb25zdCBjID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIG4ubXV0YXRpb25zKSB7XG4gICAgICAgIGNvbnN0IHMgPSBXcyhlLCB0LmtleS5wYXRoLCBuLmJhdGNoSWQpO1xuICAgICAgICByLnB1c2goaS5kZWxldGUocykpLCBjLnB1c2godC5rZXkpO1xuICAgIH1cbiAgICByZXR1cm4gd2kud2FpdEZvcihyKS5uZXh0KCgoKSA9PiBjKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcHByb3hpbWF0ZSBzaXplIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQuXG4gKi8gZnVuY3Rpb24gbXIodCkge1xuICAgIGlmICghdCkgcmV0dXJuIDA7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQuZG9jdW1lbnQpIGUgPSB0LmRvY3VtZW50OyBlbHNlIGlmICh0LnVua25vd25Eb2N1bWVudCkgZSA9IHQudW5rbm93bkRvY3VtZW50OyBlbHNlIHtcbiAgICAgICAgaWYgKCF0Lm5vRG9jdW1lbnQpIHRocm93IEwoKTtcbiAgICAgICAgZSA9IHQubm9Eb2N1bWVudDtcbiAgICB9XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGUpLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIG11dGF0aW9uIHF1ZXVlIGZvciBhIHNwZWNpZmljIHVzZXIsIGJhY2tlZCBieSBJbmRleGVkREIuICovIF9yLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFID0gMTAsIFxuX3IuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUID0gMWUzLCBfci5ERUZBVUxUID0gbmV3IF9yKDQxOTQzMDQwLCBfci5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSwgX3IuREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUKSwgXG5fci5ESVNBQkxFRCA9IG5ldyBfcigtMSwgMCwgMCk7XG5cbmNsYXNzIGdyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbm9ybWFsaXplZCB1c2VySWQgKGUuZy4gbnVsbCBVSUQgPT4gXCJcIiB1c2VySWQpIHVzZWQgdG8gc3RvcmUgL1xuICAgICAqIHJldHJpZXZlIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlcklkID0gdCwgdGhpcy5NID0gZSwgdGhpcy5pbmRleE1hbmFnZXIgPSBuLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWNoZXMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcy4gSWYgdGhlIG11dGF0aW9uXG4gICAgICAgICAqIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBJbmRleGVkRGIsIHRoZSBjYWNoZWQgdmFsdWUgbWF5IGNvbnRpbnVlIHRvXG4gICAgICAgICAqIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGJhdGNoJ3MgZG9jdW1lbnQga2V5cy4gVG8gcmVtb3ZlIGEgY2FjaGVkIHZhbHVlXG4gICAgICAgICAqIGxvY2FsbHksIGByZW1vdmVDYWNoZWRNdXRhdGlvbktleXMoKWAgc2hvdWxkIGJlIGludm9rZWQgZWl0aGVyIGRpcmVjdGx5XG4gICAgICAgICAqIG9yIHRocm91Z2ggYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogV2l0aCBtdWx0aS10YWIsIHdoZW4gdGhlIHByaW1hcnkgY2xpZW50IGFja25vd2xlZGdlcyBvciByZWplY3RzIGEgbXV0YXRpb24sXG4gICAgICAgICAqIHRoaXMgY2FjaGUgaXMgdXNlZCBieSBzZWNvbmRhcnkgY2xpZW50cyB0byBpbnZhbGlkYXRlIHRoZSBsb2NhbFxuICAgICAgICAgKiB2aWV3IG9mIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIHByZXZpb3VzbHkgYWZmZWN0ZWQgYnkgdGhlIG11dGF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgdGhpcy5obiA9IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IG11dGF0aW9uIHF1ZXVlIGZvciB0aGUgZ2l2ZW4gdXNlci5cbiAgICAgKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyIGZvciB3aGljaCB0byBjcmVhdGUgYSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB3aGVuIHBlcnNpc3RpbmcgdG8gSW5kZXhlZERiLlxuICAgICAqLyAgICBzdGF0aWMgWXQodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUT0RPKG1jZyk6IEZpZ3VyZSBvdXQgd2hhdCBjb25zdHJhaW50cyB0aGVyZSBhcmUgb24gdXNlcklEc1xuICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBhcmUgdGhlcmUgYW55IHJlc2VydmVkIGNoYXJhY3RlcnM/IGFyZSBlbXB0eSBpZHMgYWxsb3dlZD9cbiAgICAgICAgLy8gRm9yIHRoZSBtb21lbnQgc3RvcmUgdGhlc2UgdG9nZXRoZXIgaW4gdGhlIHNhbWUgbXV0YXRpb25zIHRhYmxlIGFzc3VtaW5nXG4gICAgICAgIC8vIHRoYXQgZW1wdHkgdXNlcklEcyBhcmVuJ3QgYWxsb3dlZC5cbiAgICAgICAgVShcIlwiICE9PSB0LnVpZCk7XG4gICAgICAgIGNvbnN0IGkgPSB0LmlzQXV0aGVudGljYXRlZCgpID8gdC51aWQgOiBcIlwiO1xuICAgICAgICByZXR1cm4gbmV3IGdyKGksIGUsIG4sIHMpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMDtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBwcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICAgICAgZSA9ICExLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBJcih0KSwgciA9IHByKHQpO1xuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxuICAgICAgICAvLyBjb21wb3VuZCBpbmRpY2VzIHRoYXQgaW5jbHVkZSBhdXRvLWdlbmVyYXRlZCBrZXlzIGNvcnJlY3RseS4gVG8gZW5zdXJlXG4gICAgICAgIC8vIHRoYXQgdGhlIGluZGV4IGVudHJ5IGlzIGFkZGVkIGNvcnJlY3RseSBpbiBhbGwgYnJvd3NlcnMsIHdlIHBlcmZvcm0gdHdvXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcbiAgICAgICAgLy8gSUQsIGFuZCB0aGUgc2Vjb25kIHdyaXRlIHBvcHVsYXRlcyB0aGUgaW5kZXggYW5kIHN0b3JlcyB0aGUgYWN0dWFsXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxuICAgICAgICAvLyBXZSB3cml0ZSBhbiBlbXB0eSBvYmplY3QgdG8gb2J0YWluIGtleVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gci5hZGQoe30pLm5leHQoKG8gPT4ge1xuICAgICAgICAgICAgVShcIm51bWJlclwiID09IHR5cGVvZiBvKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBuZXcgVmkobywgZSwgbiwgcyksIGEgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uYmFzZU11dGF0aW9ucy5tYXAoKGUgPT4gYnModC5KdCwgZSkpKSwgaSA9IG4ubXV0YXRpb25zLm1hcCgoZSA9PiBicyh0Lkp0LCBlKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZSxcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZDogbi5iYXRjaElkLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbFdyaXRlVGltZU1zOiBuLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgICAgIGJhc2VNdXRhdGlvbnM6IHMsXG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uczogaVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHRoaXMuTSwgdGhpcy51c2VySWQsIHUpLCBjID0gW107XG4gICAgICAgICAgICBsZXQgaCA9IG5ldyAkbigoKHQsIGUpID0+IHJ0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBXcyh0aGlzLnVzZXJJZCwgdC5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgaCA9IGguYWRkKHQua2V5LnBhdGgucG9wTGFzdCgpKSwgYy5wdXNoKHIucHV0KGEpKSwgYy5wdXNoKGkucHV0KGUsIHpzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBjLnB1c2godGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkpO1xuICAgICAgICAgICAgfSkpLCB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmhuW29dID0gdS5rZXlzKCk7XG4gICAgICAgICAgICB9KSksIHdpLndhaXRGb3IoYykubmV4dCgoKCkgPT4gdSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gcHIodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IChVKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIEZpKHRoaXMuTSwgdCkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgbG4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5obltlXSA/IHdpLnJlc29sdmUodGhpcy5obltlXSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5obltlXSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gcHIodCkuV3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGUudXNlcklkID09PSB0aGlzLnVzZXJJZCAmJiAoVShlLmJhdGNoSWQgPj0gbiksIGkgPSBGaSh0aGlzLk0sIGUpKSwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkge1xuICAgICAgICBjb25zdCBlID0gSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBuID0gLTE7XG4gICAgICAgIHJldHVybiBwcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBlLFxuICAgICAgICAgICAgcmV2ZXJzZTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gZS5iYXRjaElkLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIC0xIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIHByKHQpLnF0KFwidXNlck11dGF0aW9uc0luZGV4XCIsIGUpLm5leHQoKHQgPT4gdC5tYXAoKHQgPT4gRmkodGhpcy5NLCB0KSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IGpzKHRoaXMudXNlcklkLCBlLnBhdGgpLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChuKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gSXIodCkuV3Qoe1xuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChuLCBzLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBbbywgdSwgYV0gPSBuLCBjID0gS3ModSk7XG4gICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvID09PSB0aGlzLnVzZXJJZCAmJiBlLnBhdGguaXNFcXVhbChjKSkgXG4gICAgICAgICAgICAvLyBMb29rIHVwIHRoZSBtdXRhdGlvbiBiYXRjaCBpbiB0aGUgc3RvcmUuXG4gICAgICAgICAgICByZXR1cm4gcHIodCkuZ2V0KGEpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICghdCkgdGhyb3cgTCgpO1xuICAgICAgICAgICAgICAgIFUodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgaS5wdXNoKEZpKHRoaXMuTSwgdCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgci5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3ICRuKHJ0KTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBqcyh0aGlzLnVzZXJJZCwgZS5wYXRoKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSksIG8gPSBJcih0KS5XdCh7XG4gICAgICAgICAgICAgICAgcmFuZ2U6IHJcbiAgICAgICAgICAgIH0sICgodCwgcywgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtyLCBvLCB1XSA9IHQsIGEgPSBLcyhvKTtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGNvbnNpZGVyIHJvd3MgbWF0Y2hpbmcgZXhhY3RseSB0aGUgc3BlY2lmaWMga2V5IG9mXG4gICAgICAgICAgICAgICAgLy8gaW50ZXJlc3QuIE5vdGUgdGhhdCBiZWNhdXNlIHdlIG9yZGVyIGJ5IHBhdGggZmlyc3QsIGFuZCB3ZVxuICAgICAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgaW5kZXggcm93cyBmb3IgZG9jdW1lbnRLZXkgY29udGlndW91c2x5LiBJbiBwYXJ0aWN1bGFyLCBhbGxcbiAgICAgICAgICAgICAgICAvLyB0aGUgcm93cyBmb3IgZG9jdW1lbnRLZXkgd2lsbCBvY2N1ciBiZWZvcmUgYW55IHJvd3MgZm9yXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgICAgIC8vIGNhbiBzdG9wIGFzIHNvb24gYXMgd2UgaGl0IGFueSBzdWNoIHJvdy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgZS5wYXRoLmlzRXF1YWwoYSkgPyBuID0gbi5hZGQodSkgOiBpLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHMucHVzaChvKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKHMpLm5leHQoKCgpID0+IHRoaXMuZm4odCwgbikpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxLCBpID0ganModGhpcy51c2VySWQsIG4pLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKTtcbiAgICAgICAgLy8gQ29sbGVjdCB1cCB1bmlxdWUgYmF0Y2hJRHMgZW5jb3VudGVyZWQgZHVyaW5nIGEgc2NhbiBvZiB0aGUgaW5kZXguIFVzZSBhXG4gICAgICAgIC8vIFNvcnRlZFNldCB0byBhY2N1bXVsYXRlIGJhdGNoIElEcyBzbyB0aGV5IGNhbiBiZSB0cmF2ZXJzZWQgaW4gb3JkZXIgaW4gYVxuICAgICAgICAvLyBzY2FuIG9mIHRoZSBtYWluIHRhYmxlLlxuICAgICAgICBsZXQgbyA9IG5ldyAkbihydCk7XG4gICAgICAgIHJldHVybiBJcih0KS5XdCh7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKHQsIGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCB1LCBhXSA9IHQsIGMgPSBLcyh1KTtcbiAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZihjKSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIGMubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQoYSkpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLmZuKHQsIG8pKSk7XG4gICAgfVxuICAgIGZuKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaChwcih0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IEwoKTtcbiAgICAgICAgICAgICAgICBVKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG4ucHVzaChGaSh0aGlzLk0sIHQpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgd2kud2FpdEZvcihzKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gd3IodC5IdCwgdGhpcy51c2VySWQsIGUpLm5leHQoKG4gPT4gKHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5kbihlLmJhdGNoSWQpO1xuICAgICAgICB9KSksIHdpLmZvckVhY2gobiwgKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgZG4odCkge1xuICAgICAgICBkZWxldGUgdGhpcy5oblt0XTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gd2kucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkIF0pO1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIElyKHQpLld0KHtcbiAgICAgICAgICAgICAgICByYW5nZTogblxuICAgICAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRbMF0gPT09IHRoaXMudXNlcklkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBLcyh0WzFdKTtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBuLmRvbmUoKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgVSgwID09PSBzLmxlbmd0aCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICByZXR1cm4geXIodCwgdGhpcy51c2VySWQsIGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5IChzdGF0ZSBpcyBoZWxkIGluIG1lbW9yeSBpbiBvdGhlciBjbGllbnRzKS5cbiAgICAvKiogUmV0dXJucyB0aGUgbXV0YXRpb24gcXVldWUncyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi4gKi9cbiAgICBfbih0KSB7XG4gICAgICAgIHJldHVybiBUcih0KS5nZXQodGhpcy51c2VySWQpLm5leHQoKHQgPT4gdCB8fCB7XG4gICAgICAgICAgICB1c2VySWQ6IHRoaXMudXNlcklkLFxuICAgICAgICAgICAgbGFzdEFja25vd2xlZGdlZEJhdGNoSWQ6IC0xLFxuICAgICAgICAgICAgbGFzdFN0cmVhbVRva2VuOiBcIlwiXG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyIGNvbnRhaW5zIGEgcGVuZGluZ1xuICogICAgICAgICBtdXRhdGlvbiBmb3IgdGhlIGdpdmVuIGtleS5cbiAqLyBmdW5jdGlvbiB5cih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IGpzKGUsIG4ucGF0aCksIGkgPSBzWzFdLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChzKTtcbiAgICBsZXQgbyA9ICExO1xuICAgIHJldHVybiBJcih0KS5XdCh7XG4gICAgICAgIHJhbmdlOiByLFxuICAgICAgICBqdDogITBcbiAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgY29uc3QgW3IsIHUsIC8qYmF0Y2hJRCovIGFdID0gdDtcbiAgICAgICAgciA9PT0gZSAmJiB1ID09PSBpICYmIChvID0gITApLCBzLmRvbmUoKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gbykpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cbiAqL1xuZnVuY3Rpb24gcHIodCkge1xuICAgIHJldHVybiBQaSh0LCBcIm11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBJcih0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gVHIodCkge1xuICAgIHJldHVybiBQaSh0LCBcIm11dGF0aW9uUXVldWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIE9mZnNldCB0byBlbnN1cmUgbm9uLW92ZXJsYXBwaW5nIHRhcmdldCBpZHMuICovXG4vKipcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxuICogd2F0Y2ggc3RyZWFtLlxuICpcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBhbmQgb25lIGZvclxuICogZm9yIHRoZSBzeW5jIGVuZ2luZSAodG8gZ2VuZXJhdGUgbGltYm8gZG9jdW1lbnRzIHRhcmdldHMpLiBUaGVzZVxuICogZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcbiAqIHJlc3BlY3RpdmVseSkuXG4gKlxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcbiAqIHRoYXQgcGVyc2lzdCBhY3Jvc3MgY2xpZW50IHJlc3RhcnRzLCB3aGlsZSBzeW5jIGVuZ2luZSBjYW4gaW5kZXBlbmRlbnRseVxuICogZ2VuZXJhdGUgaW4tbWVtb3J5IHRhcmdldCBJRHMgdGhhdCBhcmUgdHJhbnNpZW50IGFuZCBjYW4gYmUgcmV1c2VkIGFmdGVyIGFcbiAqIHJlc3RhcnQuXG4gKi9cbmNsYXNzIEVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMud24gPSB0O1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy53biArPSAyLCB0aGlzLnduO1xuICAgIH1cbiAgICBzdGF0aWMgbW4oKSB7XG4gICAgICAgIC8vIFRoZSB0YXJnZXQgY2FjaGUgZ2VuZXJhdG9yIG11c3QgcmV0dXJuICcyJyBpbiBpdHMgZmlyc3QgY2FsbCB0byBgbmV4dCgpYFxuICAgICAgICAvLyBhcyB0aGVyZSBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXRcbiAgICAgICAgLy8gbnVtYmVyIGFuZCB0aGUgbnVtYmVyICcwJy4gSWYgd2Ugd2VyZSB0byBzZW50IGEgdGFyZ2V0IHdpdGggdGFyZ2V0IElEXG4gICAgICAgIC8vICcwJywgdGhlIGJhY2tlbmQgd291bGQgY29uc2lkZXIgaXQgdW5zZXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBpdHMgb3duIElELlxuICAgICAgICByZXR1cm4gbmV3IEVyKDApO1xuICAgIH1cbiAgICBzdGF0aWMgZ24oKSB7XG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxuICAgICAgICByZXR1cm4gbmV3IEVyKC0xKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0LCB0aGlzLk0gPSBlO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IGNhY2hlIGdsb2JhbCBtZXRhZGF0YSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgc2luY2VcbiAgICAvLyBzb21lIG9mIGl0IChpbiBwYXJ0aWN1bGFyIGBoaWdoZXN0VGFyZ2V0SWRgKSBjYW4gYmUgbW9kaWZpZWQgYnkgc2Vjb25kYXJ5XG4gICAgLy8gdGFicy4gV2UgY291bGQgcGVyaGFwcyBiZSBtb3JlIGdyYW51bGFyIChhbmQgZS5nLiBzdGlsbCBjYWNoZVxuICAgIC8vIGBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uYCBpbiBtZW1vcnkpIGJ1dCBmb3Igc2ltcGxpY2l0eSB3ZSBjdXJyZW50bHkgZ29cbiAgICAvLyB0byBJbmRleGVkRGIgd2hlbmV2ZXIgd2UgbmVlZCB0byByZWFkIG1ldGFkYXRhLiBXZSBjYW4gcmV2aXNpdCBpZiBpdCB0dXJuc1xuICAgIC8vIG91dCB0byBoYXZlIGEgbWVhbmluZ2Z1bCBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnluKHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBFcihlLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgICAgICAgICByZXR1cm4gZS5oaWdoZXN0VGFyZ2V0SWQgPSBuLm5leHQoKSwgdGhpcy5wbih0LCBlKS5uZXh0KCgoKSA9PiBlLmhpZ2hlc3RUYXJnZXRJZCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy55bih0KS5uZXh0KCh0ID0+IGN0LmZyb21UaW1lc3RhbXAobmV3IGF0KHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5zZWNvbmRzLCB0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gdGhpcy55bih0KS5uZXh0KCh0ID0+IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnluKHQpLm5leHQoKHMgPT4gKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSwgbiAmJiAocy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbi50b1RpbWVzdGFtcCgpKSwgXG4gICAgICAgIGUgPiBzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlKSwgdGhpcy5wbih0LCBzKSkpKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkluKHQsIGUpLm5leHQoKCgpID0+IHRoaXMueW4odCkubmV4dCgobiA9PiAobi50YXJnZXRDb3VudCArPSAxLCB0aGlzLlRuKGUsIG4pLCBcbiAgICAgICAgdGhpcy5wbih0LCBuKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCgoKSA9PiBScih0KS5kZWxldGUoZS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiB0aGlzLnluKHQpKSkubmV4dCgoZSA9PiAoVShlLnRhcmdldENvdW50ID4gMCksIFxuICAgICAgICBlLnRhcmdldENvdW50IC09IDEsIHRoaXMucG4odCwgZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFueSB0YXJnZXRzIHdpdGggc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQsIGV4Y2VwdGluZyB0aG9zZVxuICAgICAqIHByZXNlbnQgaW4gYGFjdGl2ZVRhcmdldElkc2AuIERvY3VtZW50IGFzc29jaWF0aW9ucyBmb3IgdGhlIHJlbW92ZWQgdGFyZ2V0cyBhcmUgYWxzbyByZW1vdmVkLlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXG4gICAgICovICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIFJyKHQpLld0KCgociwgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9ICRpKG8pO1xuICAgICAgICAgICAgdS5zZXF1ZW5jZU51bWJlciA8PSBlICYmIG51bGwgPT09IG4uZ2V0KHUudGFyZ2V0SWQpICYmIChzKyssIGkucHVzaCh0aGlzLnJlbW92ZVRhcmdldERhdGEodCwgdSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHdpLndhaXRGb3IoaSkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gd2l0aCBlYWNoIGBUYXJnZXREYXRhYCB0aGF0IHdlIGhhdmUgY2FjaGVkLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJyKHQpLld0KCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9ICRpKG4pO1xuICAgICAgICAgICAgZShzKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB5bih0KSB7XG4gICAgICAgIHJldHVybiBicih0KS5nZXQoXCJ0YXJnZXRHbG9iYWxLZXlcIikubmV4dCgodCA9PiAoVShudWxsICE9PSB0KSwgdCkpKTtcbiAgICB9XG4gICAgcG4odCwgZSkge1xuICAgICAgICByZXR1cm4gYnIodCkucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIGUpO1xuICAgIH1cbiAgICBJbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBScih0KS5wdXQoQmkodGhpcy5NLCBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluLXBsYWNlIHVwZGF0ZXMgdGhlIHByb3ZpZGVkIG1ldGFkYXRhIHRvIGFjY291bnQgZm9yIHZhbHVlcyBpbiB0aGUgZ2l2ZW5cbiAgICAgKiBUYXJnZXREYXRhLiBTYXZpbmcgaXMgZG9uZSBzZXBhcmF0ZWx5LiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgd2VyZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSBtZXRhZGF0YS5cbiAgICAgKi8gICAgVG4odCwgZSkge1xuICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICByZXR1cm4gdC50YXJnZXRJZCA+IGUuaGlnaGVzdFRhcmdldElkICYmIChlLmhpZ2hlc3RUYXJnZXRJZCA9IHQudGFyZ2V0SWQsIG4gPSAhMCksIFxuICAgICAgICB0LnNlcXVlbmNlTnVtYmVyID4gZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgJiYgKGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gdC5zZXF1ZW5jZU51bWJlciwgXG4gICAgICAgIG4gPSAhMCksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENvdW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueW4odCkubmV4dCgodCA9PiB0LnRhcmdldENvdW50KSk7XG4gICAgfVxuICAgIGdldFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICAvLyBJdGVyYXRpbmcgYnkgdGhlIGNhbm9uaWNhbElkIG1heSB5aWVsZCBtb3JlIHRoYW4gb25lIHJlc3VsdCBiZWNhdXNlXG4gICAgICAgIC8vIGNhbm9uaWNhbElkIHZhbHVlcyBhcmUgbm90IHJlcXVpcmVkIHRvIGJlIHVuaXF1ZSBwZXIgdGFyZ2V0LiBUaGlzIHF1ZXJ5XG4gICAgICAgIC8vIGRlcGVuZHMgb24gdGhlIHF1ZXJ5VGFyZ2V0cyBpbmRleCB0byBiZSBlZmZpY2llbnQuXG4gICAgICAgIGNvbnN0IG4gPSBmZShlKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgbiwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBScih0KS5XdCh7XG4gICAgICAgICAgICByYW5nZTogcyxcbiAgICAgICAgICAgIGluZGV4OiBcInF1ZXJ5VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gJGkobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgX2UoZSwgci50YXJnZXQpICYmIChpID0gciwgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IFtdLCBpID0gUHIodCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IFVzKGUucGF0aCk7XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQoe1xuICAgICAgICAgICAgICAgIHRhcmdldElkOiBuLFxuICAgICAgICAgICAgICAgIHBhdGg6IHJcbiAgICAgICAgICAgIH0pKSwgcy5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIG4sIGUpKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IFByKHQpO1xuICAgICAgICByZXR1cm4gd2kuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gVXMoZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiB3aS53YWl0Rm9yKFsgcy5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBuLCBlKSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBQcih0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHMgPSBQcih0KTtcbiAgICAgICAgbGV0IGkgPSB6bigpO1xuICAgICAgICByZXR1cm4gcy5XdCh7XG4gICAgICAgICAgICByYW5nZTogbixcbiAgICAgICAgICAgIGp0OiAhMFxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBLcyh0WzFdKSwgciA9IG5ldyB4dChzKTtcbiAgICAgICAgICAgIGkgPSBpLmFkZChyKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gVXMoZS5wYXRoKSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgbiBdLCBbIHV0KG4pIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gUHIodCkuV3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIixcbiAgICAgICAgICAgIGp0OiAhMCxcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgoW3QsIGVdLCBuLCBzKSA9PiB7XG4gICAgICAgICAgICAvLyBIYXZpbmcgYSBzZW50aW5lbCByb3cgZm9yIGEgZG9jdW1lbnQgZG9lcyBub3QgY291bnQgYXMgY29udGFpbmluZyB0aGF0IGRvY3VtZW50O1xuICAgICAgICAgICAgLy8gRm9yIHRoZSB0YXJnZXQgY2FjaGUsIGNvbnRhaW5pbmcgdGhlIGRvY3VtZW50IG1lYW5zIHRoZSBkb2N1bWVudCBpcyBwYXJ0IG9mIHNvbWVcbiAgICAgICAgICAgIC8vIHRhcmdldC5cbiAgICAgICAgICAgIDAgIT09IHQgJiYgKGkrKywgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSA+IDApKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYSBUYXJnZXREYXRhIGVudHJ5IGJ5IHRhcmdldCBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXQgSUQgb2YgdGhlIFRhcmdldERhdGEgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIFRhcmdldERhdGEgZW50cnksIG9yIG51bGwgaWYgdGhlIGNhY2hlIGhhcyBubyBlbnRyeSBmb3JcbiAgICAgKiB0aGUgdGFyZ2V0LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgRXQodCwgZSkge1xuICAgICAgICByZXR1cm4gUnIodCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/ICRpKHQpIDogbnVsbCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFJyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJ0YXJnZXRzXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgdGFyZ2V0IGdsb2JhbHMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGJyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJ0YXJnZXRHbG9iYWxcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBkb2N1bWVudCB0YXJnZXQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFByKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJ0YXJnZXREb2N1bWVudHNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFZlcmlmaWVzIHRoZSBlcnJvciB0aHJvd24gYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi4gSWYgYSBMb2NhbFN0b3JlXG4gKiBvcGVyYXRpb24gZmFpbHMgYmVjYXVzZSB0aGUgcHJpbWFyeSBsZWFzZSBoYXMgYmVlbiB0YWtlbiBieSBhbm90aGVyIGNsaWVudCxcbiAqIHdlIGlnbm9yZSB0aGUgZXJyb3IgKHRoZSBwZXJzaXN0ZW5jZSBsYXllciB3aWxsIGltbWVkaWF0ZWx5IGNhbGxcbiAqIGBhcHBseVByaW1hcnlMZWFzZWAgdG8gcHJvcGFnYXRlIHRoZSBwcmltYXJ5IHN0YXRlIGNoYW5nZSkuIEFsbCBvdGhlciBlcnJvcnNcbiAqIGFyZSByZS10aHJvd24uXG4gKlxuICogQHBhcmFtIGVyciAtIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgTG9jYWxTdG9yZSBvcGVyYXRpb24uXG4gKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyBhZnRlciB3ZSByZWNvdmVyZWQsIG9yIHRoZSBvcmlnaW5hbCBlcnJvci5cbiAqLyBhc3luYyBmdW5jdGlvbiBWcih0KSB7XG4gICAgaWYgKHQuY29kZSAhPT0gSy5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQubWVzc2FnZSAhPT0gZGkpIHRocm93IHQ7XG4gICAgTyhcIkxvY2FsU3RvcmVcIiwgXCJVbmV4cGVjdGVkbHkgbG9zdCBwcmltYXJ5IGxlYXNlXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiB2cihbdCwgZV0sIFtuLCBzXSkge1xuICAgIGNvbnN0IGkgPSBydCh0LCBuKTtcbiAgICByZXR1cm4gMCA9PT0gaSA/IHJ0KGUsIHMpIDogaTtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIGNhbGN1bGF0ZSB0aGUgbnRoIHNlcXVlbmNlIG51bWJlci4gS2VlcHMgYSByb2xsaW5nIGJ1ZmZlciBvZiB0aGVcbiAqIGxvd2VzdCBuIHZhbHVlcyBwYXNzZWQgdG8gYGFkZEVsZW1lbnRgLCBhbmQgZmluYWxseSByZXBvcnRzIHRoZSBsYXJnZXN0IG9mXG4gKiB0aGVtIGluIGBtYXhWYWx1ZWAuXG4gKi8gY2xhc3MgU3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5FbiA9IHQsIHRoaXMuYnVmZmVyID0gbmV3ICRuKHZyKSwgdGhpcy5BbiA9IDA7XG4gICAgfVxuICAgIFJuKCkge1xuICAgICAgICByZXR1cm4gKyt0aGlzLkFuO1xuICAgIH1cbiAgICBibih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbIHQsIHRoaXMuUm4oKSBdO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIuc2l6ZSA8IHRoaXMuRW4pIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuYWRkKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmJ1ZmZlci5sYXN0KCk7XG4gICAgICAgICAgICB2cihlLCB0KSA8IDAgJiYgKHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuZGVsZXRlKHQpLmFkZChlKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG1heFZhbHVlKCkge1xuICAgICAgICAvLyBHdWFyYW50ZWVkIHRvIGJlIG5vbi1lbXB0eS4gSWYgd2UgZGVjaWRlIHdlIGFyZSBub3QgY29sbGVjdGluZyBhbnlcbiAgICAgICAgLy8gc2VxdWVuY2UgbnVtYmVycywgbnRoU2VxdWVuY2VOdW1iZXIgYmVsb3cgc2hvcnQtY2lyY3VpdHMuIElmIHdlIGhhdmVcbiAgICAgICAgLy8gZGVjaWRlZCB0aGF0IHdlIGFyZSBjb2xsZWN0aW5nIG4gc2VxdWVuY2UgbnVtYmVycywgaXQncyBiZWNhdXNlIG4gaXMgc29tZVxuICAgICAgICAvLyBwZXJjZW50YWdlIG9mIHRoZSBleGlzdGluZyBzZXF1ZW5jZSBudW1iZXJzLiBUaGF0IG1lYW5zIHdlIHNob3VsZCBuZXZlclxuICAgICAgICAvLyBiZSBpbiBhIHNpdHVhdGlvbiB3aGVyZSB3ZSBhcmUgY29sbGVjdGluZyBzZXF1ZW5jZSBudW1iZXJzIGJ1dCBkb24ndFxuICAgICAgICAvLyBhY3R1YWxseSBoYXZlIGFueS5cbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLmxhc3QoKVswXTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi4gSXQgaGFuZGxlcyBjaGVja2luZ1xuICogd2hldGhlciBvciBub3QgR0MgaXMgZW5hYmxlZCwgYXMgd2VsbCBhcyB3aGljaCBkZWxheSB0byB1c2UgYmVmb3JlIHRoZSBuZXh0IHJ1bi5cbiAqLyBjbGFzcyBEciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSB0LCB0aGlzLmFzeW5jUXVldWUgPSBlLCB0aGlzLlBuID0gITEsIHRoaXMuVm4gPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0KSB7XG4gICAgICAgIC0xICE9PSB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgJiYgdGhpcy52bih0KTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5WbiAmJiAodGhpcy5Wbi5jYW5jZWwoKSwgdGhpcy5WbiA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuVm47XG4gICAgfVxuICAgIHZuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuUG4gPyAzZTUgOiA2ZTQ7XG4gICAgICAgIE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2NoZWR1bGVkIGluICR7ZX1tc2ApLCB0aGlzLlZuID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwibHJ1X2dhcmJhZ2VfY29sbGVjdGlvblwiIC8qIExydUdhcmJhZ2VDb2xsZWN0aW9uICovICwgZSwgKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuVm4gPSBudWxsLCB0aGlzLlBuID0gITA7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHQuY29sbGVjdEdhcmJhZ2UodGhpcy5nYXJiYWdlQ29sbGVjdG9yKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBJaSh0KSA/IE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiSWdub3JpbmcgSW5kZXhlZERCIGVycm9yIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb246IFwiLCB0KSA6IGF3YWl0IFZyKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy52bih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiAqLyBjbGFzcyBDciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLlNuID0gdCwgdGhpcy5wYXJhbXMgPSBlO1xuICAgIH1cbiAgICBjYWxjdWxhdGVUYXJnZXRDb3VudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlNuLkRuKHQpLm5leHQoKHQgPT4gTWF0aC5mbG9vcihlIC8gMTAwICogdCkpKTtcbiAgICB9XG4gICAgbnRoU2VxdWVuY2VOdW1iZXIodCwgZSkge1xuICAgICAgICBpZiAoMCA9PT0gZSkgcmV0dXJuIHdpLnJlc29sdmUobnQuQSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgU3IoZSk7XG4gICAgICAgIHJldHVybiB0aGlzLlNuLmZvckVhY2hUYXJnZXQodCwgKHQgPT4gbi5ibih0LnNlcXVlbmNlTnVtYmVyKSkpLm5leHQoKCgpID0+IHRoaXMuU24uQ24odCwgKHQgPT4gbi5ibih0KSkpKSkubmV4dCgoKCkgPT4gbi5tYXhWYWx1ZSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU24ucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Tbi5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKTtcbiAgICB9XG4gICAgY29sbGVjdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiAtMSA9PT0gdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChPKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIkdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBkaXNhYmxlZFwiKSwgXG4gICAgICAgIHdpLnJlc29sdmUoZHIpKSA6IHRoaXMuZ2V0Q2FjaGVTaXplKHQpLm5leHQoKG4gPT4gbiA8IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBza2lwcGVkOyBDYWNoZSBzaXplICR7bn0gaXMgbG93ZXIgdGhhbiB0aHJlc2hvbGQgJHt0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkfWApLCBcbiAgICAgICAgZHIpIDogdGhpcy54bih0LCBlKSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Tbi5nZXRDYWNoZVNpemUodCk7XG4gICAgfVxuICAgIHhuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4sIHMsIGksIHIsIG8sIGEsIGM7XG4gICAgICAgIGNvbnN0IGggPSBEYXRlLm5vdygpO1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxjdWxhdGVUYXJnZXRDb3VudCh0LCB0aGlzLnBhcmFtcy5wZXJjZW50aWxlVG9Db2xsZWN0KS5uZXh0KChlID0+IChcbiAgICAgICAgLy8gQ2FwIGF0IHRoZSBjb25maWd1cmVkIG1heFxuICAgICAgICBlID4gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCA/IChPKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgQ2FwcGluZyBzZXF1ZW5jZSBudW1iZXJzIHRvIGNvbGxlY3QgZG93biB0byB0aGUgbWF4aW11bSBvZiAke3RoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3R9IGZyb20gJHtlfWApLCBcbiAgICAgICAgcyA9IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QpIDogcyA9IGUsIHIgPSBEYXRlLm5vdygpLCB0aGlzLm50aFNlcXVlbmNlTnVtYmVyKHQsIHMpKSkpLm5leHQoKHMgPT4gKG4gPSBzLCBcbiAgICAgICAgbyA9IERhdGUubm93KCksIHRoaXMucmVtb3ZlVGFyZ2V0cyh0LCBuLCBlKSkpKS5uZXh0KChlID0+IChpID0gZSwgYSA9IERhdGUubm93KCksIFxuICAgICAgICB0aGlzLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIG4pKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKGMgPSBEYXRlLm5vdygpLCBrKCkgPD0gTG9nTGV2ZWwuREVCVUcpIHtcbiAgICAgICAgICAgICAgICBPKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgTFJVIEdhcmJhZ2UgQ29sbGVjdGlvblxcblxcdENvdW50ZWQgdGFyZ2V0cyBpbiAke3IgLSBofW1zXFxuXFx0RGV0ZXJtaW5lZCBsZWFzdCByZWNlbnRseSB1c2VkICR7c30gaW4gYCArIChvIC0gcikgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke2l9IHRhcmdldHMgaW4gYCArIChhIC0gbykgKyBcIm1zXFxuXCIgKyBgXFx0UmVtb3ZlZCAke3R9IGRvY3VtZW50cyBpbiBgICsgKGMgLSBhKSArIFwibXNcXG5cIiArIGBUb3RhbCBEdXJhdGlvbjogJHtjIC0gaH1tc2ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoe1xuICAgICAgICAgICAgICAgIGRpZFJ1bjogITAsXG4gICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiBzLFxuICAgICAgICAgICAgICAgIHRhcmdldHNSZW1vdmVkOiBpLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50c1JlbW92ZWQ6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFByb3ZpZGVzIExSVSBmdW5jdGlvbmFsaXR5IGZvciBJbmRleGVkREIgcGVyc2lzdGVuY2UuICovXG5jbGFzcyB4ciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRiID0gdCwgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDcih0LCBlKTtcbiAgICAgICAgfSh0aGlzLCBlKTtcbiAgICB9XG4gICAgRG4odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Obih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5nZXRUYXJnZXRDb3VudCh0KS5uZXh0KCh0ID0+IGUubmV4dCgoZSA9PiB0ICsgZSkpKSk7XG4gICAgfVxuICAgIE5uKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5Dbih0LCAodCA9PiB7XG4gICAgICAgICAgICBlKys7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIENuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua24odCwgKCh0LCBuKSA9PiBlKG4pKSk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBOcih0LCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIE5yKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBOcih0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIGFueXRoaW5nIHdvdWxkIHByZXZlbnQgdGhpcyBkb2N1bWVudCBmcm9tIGJlaW5nIGdhcmJhZ2VcbiAgICAgKiBjb2xsZWN0ZWQsIGdpdmVuIHRoYXQgdGhlIGRvY3VtZW50IGluIHF1ZXN0aW9uIGlzIG5vdCBwcmVzZW50IGluIGFueVxuICAgICAqIHRhcmdldHMgYW5kIGhhcyBhIHNlcXVlbmNlIG51bWJlciBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIHVwcGVyIGJvdW5kIGZvclxuICAgICAqIHRoZSBjb2xsZWN0aW9uIHJ1bi5cbiAgICAgKi8gICAgTW4odCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgICAgIHJldHVybiBUcih0KS56dCgocyA9PiB5cih0LCBzLCBlKS5uZXh0KCh0ID0+ICh0ICYmIChuID0gITApLCB3aS5yZXNvbHZlKCF0KSkpKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCksIHMgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5rbih0LCAoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIGlmIChvIDw9IGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5Nbih0LCByKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gT3VyIHNpemUgYWNjb3VudGluZyByZXF1aXJlcyB1cyB0byByZWFkIGFsbCBkb2N1bWVudHMgYmVmb3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92aW5nIHRoZW0uXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpKyssIG4uZ2V0RW50cnkodCwgcikubmV4dCgoKCkgPT4gKG4ucmVtb3ZlRW50cnkociwgY3QubWluKCkpLCBQcih0KS5kZWxldGUoWyAwLCBVcyhyLnBhdGgpIF0pKSkpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB3aS53YWl0Rm9yKHMpKSkubmV4dCgoKCkgPT4gbi5hcHBseSh0KSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0VGFyZ2V0Q2FjaGUoKS51cGRhdGVUYXJnZXREYXRhKHQsIG4pO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE5yKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsIHByb3ZpZGVkIGZ1bmN0aW9uIGZvciBlYWNoIGRvY3VtZW50IGluIHRoZSBjYWNoZSB0aGF0IGlzICdvcnBoYW5lZCcuIE9ycGhhbmVkXG4gICAgICogbWVhbnMgbm90IGEgcGFydCBvZiBhbnkgdGFyZ2V0LCBzbyB0aGUgb25seSBlbnRyeSBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50IGluZGV4IGZvclxuICAgICAqIHRoYXQgZG9jdW1lbnQgd2lsbCBiZSB0aGUgc2VudGluZWwgcm93ICh0YXJnZXRJZCAwKSwgd2hpY2ggd2lsbCBhbHNvIGhhdmUgdGhlIHNlcXVlbmNlXG4gICAgICogbnVtYmVyIGZvciB0aGUgbGFzdCB0aW1lIHRoZSBkb2N1bWVudCB3YXMgYWNjZXNzZWQuXG4gICAgICovICAgIGtuKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFByKHQpO1xuICAgICAgICBsZXQgcywgaSA9IG50LkE7XG4gICAgICAgIHJldHVybiBuLld0KHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKChbdCwgbl0sIHtwYXRoOiByLCBzZXF1ZW5jZU51bWJlcjogb30pID0+IHtcbiAgICAgICAgICAgIDAgPT09IHQgPyAoXG4gICAgICAgICAgICAvLyBpZiBuZXh0VG9SZXBvcnQgaXMgdmFsaWQsIHJlcG9ydCBpdCwgdGhpcyBpcyBhIG5ldyBrZXkgc28gdGhlXG4gICAgICAgICAgICAvLyBsYXN0IG9uZSBtdXN0IG5vdCBiZSBhIG1lbWJlciBvZiBhbnkgdGFyZ2V0cy5cbiAgICAgICAgICAgIGkgIT09IG50LkEgJiYgZShuZXcgeHQoS3MocykpLCBpKSwgXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIHRoaXMgc2VxdWVuY2UgbnVtYmVyLiBJdCdzIHRoZSBuZXh0IG9uZSB3ZVxuICAgICAgICAgICAgLy8gbWlnaHQgcmVwb3J0LCBpZiB3ZSBkb24ndCBmaW5kIGFueSB0YXJnZXRzIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBzZXF1ZW5jZSBudW1iZXIgbXVzdCBiZSBkZWZpbmVkIHdoZW4gdGhlIHRhcmdldElkXG4gICAgICAgICAgICAvLyBpcyAwLlxuICAgICAgICAgICAgaSA9IG8sIHMgPSByKSA6IFxuICAgICAgICAgICAgLy8gc2V0IG5leHRUb1JlcG9ydCB0byBiZSBpbnZhbGlkLCB3ZSBrbm93IHdlIGRvbid0IG5lZWQgdG8gcmVwb3J0XG4gICAgICAgICAgICAvLyB0aGlzIG9uZSBzaW5jZSB3ZSBmb3VuZCBhIHRhcmdldCBmb3IgaXQuXG4gICAgICAgICAgICBpID0gbnQuQTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXG4gICAgICAgICAgICBpICE9PSBudC5BICYmIGUobmV3IHh0KEtzKHMpKSwgaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLmdldFNpemUodCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBOcih0LCBlKSB7XG4gICAgcmV0dXJuIFByKHQpLnB1dChcbiAgICAvKipcbiAqIEByZXR1cm5zIEEgdmFsdWUgc3VpdGFibGUgZm9yIHdyaXRpbmcgYSBzZW50aW5lbCByb3cgaW4gdGhlIHRhcmdldC1kb2N1bWVudFxuICogc3RvcmUuXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgIHBhdGg6IFVzKHQucGF0aCksXG4gICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogZVxuICAgICAgICB9O1xuICAgIH0oZSwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGJ1ZmZlciBvZiBlbnRyaWVzIHRvIGJlIHdyaXR0ZW4gdG8gYSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICogSXQgY2FuIGJlIHVzZWQgdG8gYmF0Y2ggdXAgYSBzZXQgb2YgY2hhbmdlcyB0byBiZSB3cml0dGVuIHRvIHRoZSBjYWNoZSwgYnV0XG4gKiBhZGRpdGlvbmFsbHkgc3VwcG9ydHMgcmVhZGluZyBlbnRyaWVzIGJhY2sgd2l0aCB0aGUgYGdldEVudHJ5KClgIG1ldGhvZCxcbiAqIGZhbGxpbmcgYmFjayB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlIGlmIG5vIGVudHJ5IGlzXG4gKiBidWZmZXJlZC5cbiAqXG4gKiBFbnRyaWVzIGFkZGVkIHRvIHRoZSBjYWNoZSAqbXVzdCogYmUgcmVhZCBmaXJzdC4gVGhpcyBpcyB0byBmYWNpbGl0YXRlXG4gKiBjYWxjdWxhdGluZyB0aGUgc2l6ZSBkZWx0YSBvZiB0aGUgcGVuZGluZyBjaGFuZ2VzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBjbGFzcyB3YXMgaW1wbGVtZW50ZWQgdGhlbiByZW1vdmVkIGZyb20gb3RoZXIgcGxhdGZvcm1zLlxuICogSWYgYnl0ZS1jb3VudGluZyBlbmRzIHVwIGJlaW5nIG5lZWRlZCBvbiB0aGUgb3RoZXIgcGxhdGZvcm1zLCBjb25zaWRlclxuICogcG9ydGluZyB0aGlzIGNsYXNzIGFzIHBhcnQgb2YgdGhhdCBpbXBsZW1lbnRhdGlvbiB3b3JrLlxuICovIGNsYXNzIGtyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleSB0byB0aGUgbmV3IGNhY2hlIGVudHJ5IHRoYXQgc2hvdWxkIGJlIHdyaXR0ZW4uXG4gICAgICAgIHRoaXMuY2hhbmdlcyA9IG5ldyBrbigodCA9PiB0LnRvU3RyaW5nKCkpLCAoKHQsIGUpID0+IHQuaXNFcXVhbChlKSkpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5hZGRFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IG1vZGlmeSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgYWRkRW50cnkodCkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldCh0LmtleSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEJ1ZmZlcnMgYSBgUmVtb3RlRG9jdW1lbnRDYWNoZS5yZW1vdmVFbnRyeSgpYCBjYWxsLlxuICAgICAqXG4gICAgICogWW91IGNhbiBvbmx5IHJlbW92ZSBkb2N1bWVudHMgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiByZXRyaWV2ZWQgdmlhXG4gICAgICogYGdldEVudHJ5KCkvZ2V0RW50cmllcygpYCAoZW5mb3JjZWQgdmlhIEluZGV4ZWREYnMgYGFwcGx5KClgKS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCwgZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzLnNldCh0LCB0ZS5uZXdJbnZhbGlkRG9jdW1lbnQodCkuc2V0UmVhZFRpbWUoZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuIFRoZSBidWZmZXJlZCBjaGFuZ2VzIHdpbGwgZmlyc3QgYmUgY2hlY2tlZCxcbiAgICAgKiBhbmQgaWYgbm8gYnVmZmVyZWQgY2hhbmdlIGFwcGxpZXMsIHRoaXMgd2lsbCBmb3J3YXJkIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgb3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZiB3ZSBoYXZlIG5vdGhpbmdcbiAgICAgKiBjYWNoZWQuXG4gICAgICovICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmNoYW5nZXMuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBuID8gd2kucmVzb2x2ZShuKSA6IHRoaXMuZ2V0RnJvbUNhY2hlKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLCBmb3J3YXJkaW5nIHRvXG4gICAgICogYFJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkoKWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgdHJhbnNhY3Rpb24gaW4gd2hpY2ggdG8gcGVyZm9ybSBhbnkgcGVyc2lzdGVuY2VcbiAgICAgKiAgICAgb3BlcmF0aW9ucy5cbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBjYWNoZWQgZG9jdW1lbnRzLCBpbmRleGVkIGJ5IGtleS4gSWYgYW4gZW50cnkgY2Fubm90IGJlXG4gICAgICogICAgIGZvdW5kLCB0aGUgY29ycmVzcG9uZGluZyBrZXkgd2lsbCBiZSBtYXBwZWQgdG8gYW4gaW52YWxpZCBkb2N1bWVudC5cbiAgICAgKi8gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBidWZmZXJlZCBjaGFuZ2VzIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUsIHVzaW5nXG4gICAgICogdGhlIHByb3ZpZGVkIHRyYW5zYWN0aW9uLlxuICAgICAqLyAgICBhcHBseSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICEwLCB0aGlzLmFwcGx5Q2hhbmdlcyh0KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBhc3NlcnQgdGhpcy5jaGFuZ2VzIGlzIG5vdCBudWxsICAqLyAgICBhc3NlcnROb3RBcHBsaWVkKCkge31cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovIGNsYXNzIE1yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTSA9IHQ7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cmllcyB0byB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gJHIodCkucHV0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZG9jdW1lbnQgZnJvbSB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuICRyKHQpLmRlbGV0ZShcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgdmlhIHRoZSBwcmltYXJ5IGtleSBvZlxuICogdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgcmV0dXJuIFsgXG4gICAgICAgICAgICAvKiBwcmVmaXggcGF0aCAqLyBuLnNsaWNlKDAsIG4ubGVuZ3RoIC0gMiksIFxuICAgICAgICAgICAgLyogY29sbGVjdGlvbiBpZCAqLyBuW24ubGVuZ3RoIC0gMl0sIGtpKGUpLCBcbiAgICAgICAgICAgIC8qIGRvY3VtZW50IGlkICovIG5bbi5sZW5ndGggLSAxXSBdO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIG9uIHRoZVxuICogYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudENvbGxlY3Rpb25Hcm91cEluZGV4YCBpbmRleC5cbiAqLyAoZSwgbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjdXJyZW50IGNhY2hlIHNpemUuXG4gICAgICpcbiAgICAgKiBDYWxsZXJzIHRvIGBhZGRFbnRyeSgpYCBhbmQgYHJlbW92ZUVudHJ5KClgICptdXN0KiBjYWxsIHRoaXMgYWZ0ZXJ3YXJkcyB0byB1cGRhdGUgdGhlXG4gICAgICogY2FjaGUncyBtZXRhZGF0YS5cbiAgICAgKi8gICAgdXBkYXRlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KChuID0+IChuLmJ5dGVTaXplICs9IGUsIHRoaXMuT24odCwgbikpKSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB0ZS5uZXdJbnZhbGlkRG9jdW1lbnQoZSk7XG4gICAgICAgIHJldHVybiAkcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShCcihlKSlcbiAgICAgICAgfSwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gdGhpcy5GbihlLCBzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgJG4odCwgZSkge1xuICAgICAgICBsZXQgbiA9IHtcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICBkb2N1bWVudDogdGUubmV3SW52YWxpZERvY3VtZW50KGUpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAkcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShCcihlKSlcbiAgICAgICAgfSwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuID0ge1xuICAgICAgICAgICAgICAgIGRvY3VtZW50OiB0aGlzLkZuKGUsIHMpLFxuICAgICAgICAgICAgICAgIHNpemU6IG1yKHMpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBxbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5Cbih0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLkZuKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIHMpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBzZXZlcmFsIGVudHJpZXMgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBzZXQgb2Yga2V5cyBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgZG9jdW1lbnRzIGluZGV4ZWQgYnkga2V5IGFuZCBhIG1hcCBvZiBzaXplcyBpbmRleGVkIGJ5XG4gICAgICogICAgIGtleSAoemVybyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QpLlxuICAgICAqLyAgICBMbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gcW4oKSwgcyA9IG5ldyBNbih4dC5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuQm4odCwgZSwgKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5Gbih0LCBlKTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBpKSwgcyA9IHMuaW5zZXJ0KHQsIG1yKGUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh7XG4gICAgICAgICAgICBkb2N1bWVudHM6IG4sXG4gICAgICAgICAgICBVbjogc1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICBCbih0LCBlLCBuKSB7XG4gICAgICAgIGlmIChlLmlzRW1wdHkoKSkgcmV0dXJuIHdpLnJlc29sdmUoKTtcbiAgICAgICAgbGV0IHMgPSBuZXcgJG4oVXIpO1xuICAgICAgICBlLmZvckVhY2goKHQgPT4gcyA9IHMuYWRkKHQpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBJREJLZXlSYW5nZS5ib3VuZChCcihzLmZpcnN0KCkpLCBCcihzLmxhc3QoKSkpLCByID0gcy5nZXRJdGVyYXRvcigpO1xuICAgICAgICBsZXQgbyA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICByZXR1cm4gJHIodCkuV3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRLZXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IGlcbiAgICAgICAgfSwgKCh0LCBlLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0geHQuZnJvbVNlZ21lbnRzKFsgLi4uZS5wcmVmaXhQYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgZS5kb2N1bWVudElkIF0pO1xuICAgICAgICAgICAgLy8gR28gdGhyb3VnaCBrZXlzIG5vdCBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO28gJiYgVXIobywgaSkgPCAwOyApIG4obywgbnVsbCksIG8gPSByLmdldE5leHQoKTtcbiAgICAgICAgICAgIG8gJiYgby5pc0VxdWFsKGkpICYmIChcbiAgICAgICAgICAgIC8vIEtleSBmb3VuZCBpbiBjYWNoZS5cbiAgICAgICAgICAgIG4obywgZSksIG8gPSByLmhhc05leHQoKSA/IHIuZ2V0TmV4dCgpIDogbnVsbCksIFxuICAgICAgICAgICAgLy8gU2tpcCB0byB0aGUgbmV4dCBrZXkgKGlmIHRoZXJlIGlzIG9uZSkuXG4gICAgICAgICAgICBvID8gcy5VdChCcihvKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO287ICkgbihvLCBudWxsKSwgbyA9IHIuaGFzTmV4dCgpID8gci5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFsgZS5wb3BMYXN0KCkudG9BcnJheSgpLCBlLmxhc3RTZWdtZW50KCksIGtpKG4ucmVhZFRpbWUpLCBuLmRvY3VtZW50S2V5LnBhdGguaXNFbXB0eSgpID8gXCJcIiA6IG4uZG9jdW1lbnRLZXkucGF0aC5sYXN0U2VnbWVudCgpIF0sIGkgPSBbIGUucG9wTGFzdCgpLnRvQXJyYXkoKSwgZS5sYXN0U2VnbWVudCgpLCBbIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdLCBcIlwiIF07XG4gICAgICAgIHJldHVybiAkcih0KS5xdChJREJLZXlSYW5nZS5ib3VuZChzLCBpLCAhMCkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbGV0IGUgPSBxbigpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5Gbih4dC5mcm9tU2VnbWVudHMobi5wcmVmaXhQYXRoLmNvbmNhdChuLmNvbGxlY3Rpb25Hcm91cCwgbi5kb2N1bWVudElkKSksIG4pO1xuICAgICAgICAgICAgICAgIGUgPSBlLmluc2VydCh0LmtleSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBxbigpO1xuICAgICAgICBjb25zdCByID0gTHIoZSwgbiksIG8gPSBMcihlLCBhZS5tYXgoKSk7XG4gICAgICAgIHJldHVybiAkcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLmJvdW5kKHIsIG8sICEwKVxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLkZuKHh0LmZyb21TZWdtZW50cyhlLnByZWZpeFBhdGguY29uY2F0KGUuY29sbGVjdGlvbkdyb3VwLCBlLmRvY3VtZW50SWQpKSwgZSk7XG4gICAgICAgICAgICBpID0gaS5pbnNlcnQoci5rZXksIHIpLCBpLnNpemUgPT09IHMgJiYgbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgT3IodGhpcywgISF0ICYmIHQudHJhY2tSZW1vdmFscyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KCh0ID0+IHQuYnl0ZVNpemUpKTtcbiAgICB9XG4gICAgZ2V0TWV0YWRhdGEodCkge1xuICAgICAgICByZXR1cm4gRnIodCkuZ2V0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIikubmV4dCgodCA9PiAoVSghIXQpLCB0KSkpO1xuICAgIH1cbiAgICBPbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBGcih0KS5wdXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBgZGJSZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBjb3JyZXNwb25kcyB0byB0aGUgZm9ybWF0IHVzZWQgZm9yIHNlbnRpbmVsIGRlbGV0ZXMpLlxuICAgICAqLyAgICBGbih0LCBlKSB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0geGkodGhpcy5NLCBlKTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHQuaXNOb0RvY3VtZW50KCkgJiYgdC52ZXJzaW9uLmlzRXF1YWwoY3QubWluKCkpKSkgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRlLm5ld0ludmFsaWREb2N1bWVudCh0KTtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqL1xuY2xhc3MgT3IgZXh0ZW5kcyBrciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGRvY3VtZW50Q2FjaGUgLSBUaGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSB0byBhcHBseSB0aGUgY2hhbmdlcyB0by5cbiAgICAgKiBAcGFyYW0gdHJhY2tSZW1vdmFscyAtIFdoZXRoZXIgdG8gY3JlYXRlIHNlbnRpbmVsIGRlbGV0ZXMgdGhhdCBjYW4gYmUgdHJhY2tlZCBieVxuICAgICAqIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnFuID0gdCwgdGhpcy50cmFja1JlbW92YWxzID0gZSwgXG4gICAgICAgIC8vIEEgbWFwIG9mIGRvY3VtZW50IHNpemVzIGFuZCByZWFkIHRpbWVzIHByaW9yIHRvIGFwcGx5aW5nIHRoZSBjaGFuZ2VzIGluXG4gICAgICAgIC8vIHRoaXMgYnVmZmVyLlxuICAgICAgICB0aGlzLkduID0gbmV3IGtuKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSAwLCBzID0gbmV3ICRuKCgodCwgZSkgPT4gcnQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXMuR24uZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKGUucHVzaCh0aGlzLnFuLnJlbW92ZUVudHJ5KHQsIGksIG8ucmVhZFRpbWUpKSwgci5pc1ZhbGlkRG9jdW1lbnQoKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSBOaSh0aGlzLnFuLk0sIHIpO1xuICAgICAgICAgICAgICAgIHMgPSBzLmFkZChpLnBhdGgucG9wTGFzdCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gbXIodSk7XG4gICAgICAgICAgICAgICAgbiArPSBhIC0gby5zaXplLCBlLnB1c2godGhpcy5xbi5hZGRFbnRyeSh0LCBpLCB1KSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG4gLT0gby5zaXplLCB0aGlzLnRyYWNrUmVtb3ZhbHMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBvcmRlciB0byB0cmFjayByZW1vdmFscywgd2Ugc3RvcmUgYSBcInNlbnRpbmVsIGRlbGV0ZVwiIGluIHRoZVxuICAgICAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgZW50cnkgaXMgcmVwcmVzZW50ZWQgYnkgYSBOb0RvY3VtZW50XG4gICAgICAgICAgICAgICAgLy8gd2l0aCBhIHZlcnNpb24gb2YgMCBhbmQgaWdub3JlZCBieSBgbWF5YmVEZWNvZGVEb2N1bWVudCgpYCBidXRcbiAgICAgICAgICAgICAgICAvLyBwcmVzZXJ2ZWQgaW4gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gTmkodGhpcy5xbi5NLCByLmNvbnZlcnRUb05vRG9jdW1lbnQoY3QubWluKCkpKTtcbiAgICAgICAgICAgICAgICBlLnB1c2godGhpcy5xbi5hZGRFbnRyeSh0LCBpLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0aGlzLnFuLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBuKSk7XG4gICAgICAgIH0pKSwgZS5wdXNoKHRoaXMucW4udXBkYXRlTWV0YWRhdGEodCwgbikpLCB3aS53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLnFuLiRuKHQsIGUpLm5leHQoKHQgPT4gKHRoaXMuR24uc2V0KGUsIHtcbiAgICAgICAgICAgIHNpemU6IHQuc2l6ZSxcbiAgICAgICAgICAgIHJlYWRUaW1lOiB0LmRvY3VtZW50LnJlYWRUaW1lXG4gICAgICAgIH0pLCB0LmRvY3VtZW50KSkpO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICAvLyBSZWNvcmQgdGhlIHNpemUgb2YgZXZlcnl0aGluZyB3ZSBsb2FkIGZyb20gdGhlIGNhY2hlIHNvIHdlIGNhbiBjb21wdXRlXG4gICAgICAgIC8vIGEgZGVsdGEgbGF0ZXIuXG4gICAgICAgIHJldHVybiB0aGlzLnFuLkxuKHQsIGUpLm5leHQoKCh7ZG9jdW1lbnRzOiB0LCBVbjogZX0pID0+IChcbiAgICAgICAgLy8gTm90ZTogYGdldEFsbEZyb21DYWNoZWAgcmV0dXJucyB0d28gbWFwcyBpbnN0ZWFkIG9mIGEgc2luZ2xlIG1hcCBmcm9tXG4gICAgICAgIC8vIGtleXMgdG8gYERvY3VtZW50U2l6ZUVudHJ5YHMuIFRoaXMgaXMgdG8gYWxsb3cgcmV0dXJuaW5nIHRoZVxuICAgICAgICAvLyBgTXV0YWJsZURvY3VtZW50TWFwYCBkaXJlY3RseSwgd2l0aG91dCBhIGNvbnZlcnNpb24uXG4gICAgICAgIGUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMuR24uc2V0KGUsIHtcbiAgICAgICAgICAgICAgICBzaXplOiBuLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiB0LmdldChlKS5yZWFkVGltZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKSwgdCkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEZyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHJlbW90ZURvY3VtZW50cyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gJHIodCkge1xuICAgIHJldHVybiBQaSh0LCBcInJlbW90ZURvY3VtZW50c1YxNFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50S2V5SW5kZXhgIGluZGV4LlxuICovIGZ1bmN0aW9uIEJyKHQpIHtcbiAgICBjb25zdCBlID0gdC5wYXRoLnRvQXJyYXkoKTtcbiAgICByZXR1cm4gWyBcbiAgICAvKiBwcmVmaXggcGF0aCAqLyBlLnNsaWNlKDAsIGUubGVuZ3RoIC0gMiksIFxuICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gZVtlLmxlbmd0aCAtIDJdLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBlW2UubGVuZ3RoIC0gMV0gXTtcbn1cblxuZnVuY3Rpb24gTHIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmRvY3VtZW50S2V5LnBhdGgudG9BcnJheSgpO1xuICAgIHJldHVybiBbIFxuICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gdCwga2koZS5yZWFkVGltZSksIFxuICAgIC8qIHByZWZpeCBwYXRoICovIG4uc2xpY2UoMCwgbi5sZW5ndGggLSAyKSwgXG4gICAgLyogZG9jdW1lbnQgaWQgKi8gbi5sZW5ndGggPiAwID8gbltuLmxlbmd0aCAtIDFdIDogXCJcIiBdO1xufVxuXG4vKipcbiAqIENvbXBhcmF0b3IgdGhhdCBjb21wYXJlcyBkb2N1bWVudCBrZXlzIGFjY29yZGluZyB0byB0aGUgcHJpbWFyeSBrZXkgc29ydGluZ1xuICogdXNlZCBieSB0aGUgYERiUmVtb3RlRG9jdW1lbnREb2N1bWVudGAgc3RvcmUgKGJ5IGNvbGxlY3Rpb24gcGF0aCBhbmQgdGhlblxuICogZG9jdW1lbnQgSUQpLlxuICovIGZ1bmN0aW9uIFVyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gdC5wYXRoLmxlbmd0aCAtIGUucGF0aC5sZW5ndGg7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogeHQuY29tcGFyYXRvcih0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRPRE8oaW5kZXhpbmcpOiBSZW1vdmUgdGhpcyBjb25zdGFudFxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLiAqL1xuY2xhc3MgcXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5NID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBrdCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgbWkoXCJjcmVhdGVPclVwZ3JhZGVcIiwgZSk7XG4gICAgICAgIG4gPCAxICYmIHMgPj0gMSAmJiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm93bmVyXCIpO1xuICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25RdWV1ZXNcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IFwidXNlcklkXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwidXNlck11dGF0aW9uc0luZGV4XCIsIFFzLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFVwZ3JhZGUgZnVuY3Rpb24gdG8gbWlncmF0ZSB0aGUgJ211dGF0aW9ucycgc3RvcmUgZnJvbSBWMSB0byBWMy4gTG9hZHNcbiAqIGFuZCByZXdyaXRlcyBhbGwgZGF0YS5cbiAqLyAodCksIEdyKHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpO1xuICAgICAgICB9KHQpKTtcbiAgICAgICAgLy8gTWlncmF0aW9uIDIgdG8gcG9wdWxhdGUgdGhlIHRhcmdldEdsb2JhbCBvYmplY3Qgbm8gbG9uZ2VyIG5lZWRlZCBzaW5jZVxuICAgICAgICAvLyBtaWdyYXRpb24gMyB1bmNvbmRpdGlvbmFsbHkgY2xlYXJzIGl0LlxuICAgICAgICAgICAgICAgIGxldCByID0gd2kucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gbiA8IDMgJiYgcyA+PSAzICYmIChcbiAgICAgICAgLy8gQnJhbmQgbmV3IGNsaWVudHMgZG9uJ3QgbmVlZCB0byBkcm9wIGFuZCByZWNyZWF0ZS0tb25seSBjbGllbnRzIHRoYXRcbiAgICAgICAgLy8gcG90ZW50aWFsbHkgaGF2ZSBjb3JydXB0IGRhdGEuXG4gICAgICAgIDAgIT09IG4gJiYgKCFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiKSwgdC5kZWxldGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbiAgICAgICAgfSh0KSwgR3IodCkpLCByID0gci5uZXh0KCgoKSA9PiBcbiAgICAgICAgLyoqXG4gKiBDcmVhdGVzIHRoZSB0YXJnZXQgZ2xvYmFsIHNpbmdsZXRvbiByb3cuXG4gKlxuICogQHBhcmFtIHR4biAtIFRoZSB2ZXJzaW9uIHVwZ3JhZGUgdHJhbnNhY3Rpb24gZm9yIGluZGV4ZWRkYlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLCBuID0ge1xuICAgICAgICAgICAgICAgIGhpZ2hlc3RUYXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICBoaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXI6IDAsXG4gICAgICAgICAgICAgICAgbGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbjogY3QubWluKCkudG9UaW1lc3RhbXAoKSxcbiAgICAgICAgICAgICAgICB0YXJnZXRDb3VudDogMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBlLnB1dChcInRhcmdldEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfShpKSkpKSwgbiA8IDQgJiYgcyA+PSA0ICYmICgwICE9PSBuICYmIChcbiAgICAgICAgLy8gU2NoZW1hIHZlcnNpb24gMyB1c2VzIGF1dG8tZ2VuZXJhdGVkIGtleXMgdG8gZ2VuZXJhdGUgZ2xvYmFsbHkgdW5pcXVlXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoIElEcyAodGhpcyB3YXMgcHJldmlvdXNseSBlbnN1cmVkIGludGVybmFsbHkgYnkgdGhlXG4gICAgICAgIC8vIGNsaWVudCkuIFRvIG1pZ3JhdGUgdG8gdGhlIG5ldyBzY2hlbWEsIHdlIGhhdmUgdG8gcmVhZCBhbGwgbXV0YXRpb25zXG4gICAgICAgIC8vIGFuZCB3cml0ZSB0aGVtIGJhY2sgb3V0LiBXZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgYmF0Y2ggSURzIHRvIGd1YXJhbnRlZVxuICAgICAgICAvLyBjb25zaXN0ZW5jeSB3aXRoIG90aGVyIG9iamVjdCBzdG9yZXMuIEFueSBmdXJ0aGVyIG11dGF0aW9uIGJhdGNoIElEcyB3aWxsXG4gICAgICAgIC8vIGJlIGF1dG8tZ2VuZXJhdGVkLlxuICAgICAgICByID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5zdG9yZShcIm11dGF0aW9uc1wiKS5xdCgpLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIik7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYmF0Y2hJZFwiLFxuICAgICAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwidXNlck11dGF0aW9uc0luZGV4XCIsIFFzLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZS5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IG4ubWFwKCh0ID0+IHMucHV0KHQpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpLndhaXRGb3IoaSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0odCwgaSkpKSksIHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImNsaWVudE1ldGFkYXRhXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJjbGllbnRJZFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCBuIDwgNSAmJiBzID49IDUgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuS24oaSkpKSksIG4gPCA2ICYmIHMgPj0gNiAmJiAociA9IHIubmV4dCgoKCkgPT4gKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKTtcbiAgICAgICAgfSh0KSwgdGhpcy5RbihpKSkpKSksIG4gPCA3ICYmIHMgPj0gNyAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5qbihpKSkpKSwgbiA8IDggJiYgcyA+PSA4ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLlduKHQsIGkpKSkpLCBcbiAgICAgICAgbiA8IDkgJiYgcyA+PSA5ICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBNdWx0aS1UYWIgdXNlZCB0byBtYW5hZ2UgaXRzIG93biBjaGFuZ2Vsb2csIGJ1dCB0aGlzIGhhcyBiZWVuIG1vdmVkXG4gICAgICAgICAgICAvLyB0byB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUgaXRzZWxmLiBTaW5jZSB0aGUgcHJldmlvdXMgY2hhbmdlXG4gICAgICAgICAgICAvLyBsb2cgb25seSBjb250YWluZWQgdHJhbnNpZW50IGRhdGEsIHdlIGNhbiBkcm9wIGl0cyBvYmplY3Qgc3RvcmUuXG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKSAmJiB0LmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgICAgIC8vIE5vdGU6IFNjaGVtYSB2ZXJzaW9uIDkgdXNlZCB0byBjcmVhdGUgYSByZWFkIHRpbWUgaW5kZXggZm9yIHRoZVxuICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBpcyBub3cgZG9uZSB3aXRoIHNjaGVtYSB2ZXJzaW9uIDEzLlxuICAgICAgICAgICAgICAgIH0pKSksIG4gPCAxMCAmJiBzID49IDEwICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLnpuKGkpKSkpLCBuIDwgMTEgJiYgcyA+PSAxMSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiYnVuZGxlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiYnVuZGxlSWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJuYW1lZFF1ZXJpZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcIm5hbWVcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDEyICYmIHMgPj0gMTIgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJkb2N1bWVudE92ZXJsYXlzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogb2lcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBlLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgdWksIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pLCBlLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwT3ZlcmxheUluZGV4XCIsIGFpLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCAxMyAmJiBzID49IDEzICYmIChyID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1YxNFwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogSHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZS5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgSnMpLCBlLmNyZWF0ZUluZGV4KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgWXMpO1xuICAgICAgICB9KHQpKSkubmV4dCgoKCkgPT4gdGhpcy5Ibih0LCBpKSkpLm5leHQoKCgpID0+IHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikpKSksIFxuICAgICAgICBuIDwgMTQgJiYgcyA+PSAxNCAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJpbmRleElkXCIsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhTdGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IG5pXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJzZXF1ZW5jZU51bWJlckluZGV4XCIsIHNpLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhFbnRyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogaWlcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50S2V5SW5kZXhcIiwgcmksIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgcjtcbiAgICB9XG4gICAgUW4odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLld0KCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZSArPSBtcihuKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICAgICAgYnl0ZVNpemU6IGVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gdC5zdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpLnB1dChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIsIG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEtuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiKSwgbiA9IHQuc3RvcmUoXCJtdXRhdGlvbnNcIik7XG4gICAgICAgIHJldHVybiBlLnF0KCkubmV4dCgoZSA9PiB3aS5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUudXNlcklkLCAtMSBdLCBbIGUudXNlcklkLCBlLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG4ucXQoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgcykubmV4dCgobiA9PiB3aS5mb3JFYWNoKG4sIChuID0+IHtcbiAgICAgICAgICAgICAgICBVKG4udXNlcklkID09PSBlLnVzZXJJZCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IEZpKHRoaXMuTSwgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdyKHQsIGUudXNlcklkLCBzKS5uZXh0KCgoKSA9PiB7fSkpO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIHRoYXQgZXZlcnkgZG9jdW1lbnQgaW4gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZSBoYXMgYSBjb3JyZXNwb25kaW5nIHNlbnRpbmVsIHJvd1xuICAgICAqIHdpdGggYSBzZXF1ZW5jZSBudW1iZXIuIE1pc3Npbmcgcm93cyBhcmUgZ2l2ZW4gdGhlIG1vc3QgcmVjZW50bHkgdXNlZCBzZXF1ZW5jZSBudW1iZXIuXG4gICAgICovICAgIGpuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiksIG4gPSB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpO1xuICAgICAgICByZXR1cm4gdC5zdG9yZShcInRhcmdldEdsb2JhbFwiKS5nZXQoXCJ0YXJnZXRHbG9iYWxLZXlcIikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgICAgICByZXR1cm4gbi5XdCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IF90KG4pLCBvID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyAwLCBVcyh0KSBdO1xuICAgICAgICAgICAgICAgIH0ocik7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUuZ2V0KG8pLm5leHQoKG4gPT4gbiA/IHdpLnJlc29sdmUoKSA6IChuID0+IGUucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IFVzKG4pLFxuICAgICAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcjogdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcbiAgICAgICAgICAgICAgICB9KSkocikpKSk7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gd2kud2FpdEZvcihzKSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFduKHQsIGUpIHtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBpbmRleC5cbiAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIsIHtcbiAgICAgICAgICAgIGtleVBhdGg6IGVpXG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShcImNvbGxlY3Rpb25QYXJlbnRzXCIpLCBzID0gbmV3IG9yLCBpID0gdCA9PiB7XG4gICAgICAgICAgICBpZiAocy5hZGQodCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBzID0gdC5wb3BMYXN0KCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucHV0KHtcbiAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBlLFxuICAgICAgICAgICAgICAgICAgICBwYXJlbnQ6IFVzKHMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIEhlbHBlciB0byBhZGQgYW4gaW5kZXggZW50cnkgaWZmIHdlIGhhdmVuJ3QgYWxyZWFkeSB3cml0dGVuIGl0LlxuICAgICAgICAgICAgICAgIC8vIEluZGV4IGV4aXN0aW5nIHJlbW90ZSBkb2N1bWVudHMuXG4gICAgICAgIHJldHVybiBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpLld0KHtcbiAgICAgICAgICAgIGp0OiAhMFxuICAgICAgICB9LCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgX3QodCk7XG4gICAgICAgICAgICByZXR1cm4gaShuLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlLnN0b3JlKFwiZG9jdW1lbnRNdXRhdGlvbnNcIikuV3Qoe1xuICAgICAgICAgICAganQ6ICEwXG4gICAgICAgIH0sICgoW3QsIGUsIG5dLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gS3MoZSk7XG4gICAgICAgICAgICByZXR1cm4gaShyLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICB6bih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwidGFyZ2V0c1wiKTtcbiAgICAgICAgcmV0dXJuIGUuV3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gJGkobiksIGkgPSBCaSh0aGlzLk0sIHMpO1xuICAgICAgICAgICAgcmV0dXJuIGUucHV0KGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEhuKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIiksIHMgPSBbXTtcbiAgICAgICAgcmV0dXJuIG4uV3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1YxNFwiKSwgciA9IChvID0gbiwgby5kb2N1bWVudCA/IG5ldyB4dChfdC5mcm9tU3RyaW5nKG8uZG9jdW1lbnQubmFtZSkucG9wRmlyc3QoNSkpIDogby5ub0RvY3VtZW50ID8geHQuZnJvbVNlZ21lbnRzKG8ubm9Eb2N1bWVudC5wYXRoKSA6IG8udW5rbm93bkRvY3VtZW50ID8geHQuZnJvbVNlZ21lbnRzKG8udW5rbm93bkRvY3VtZW50LnBhdGgpIDogTCgpKS5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gICAgICAgICAgICBjb25zdCB1ID0ge1xuICAgICAgICAgICAgICAgIHByZWZpeFBhdGg6IHIuc2xpY2UoMCwgci5sZW5ndGggLSAyKSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IHJbci5sZW5ndGggLSAyXSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiByW3IubGVuZ3RoIC0gMV0sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IG4ucmVhZFRpbWUgfHwgWyAwLCAwIF0sXG4gICAgICAgICAgICAgICAgdW5rbm93bkRvY3VtZW50OiBuLnVua25vd25Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBub0RvY3VtZW50OiBuLm5vRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IG4uZG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgaGFzQ29tbWl0dGVkTXV0YXRpb25zOiAhIW4uaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcy5wdXNoKGkucHV0KHUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHdpLndhaXRGb3IocykpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEdyKHQpIHtcbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0RG9jdW1lbnRzXCIsIHtcbiAgICAgICAga2V5UGF0aDogWnNcbiAgICB9KS5jcmVhdGVJbmRleChcImRvY3VtZW50VGFyZ2V0c0luZGV4XCIsIHRpLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KTtcbiAgICAvLyBOT1RFOiBUaGlzIGlzIHVuaXF1ZSBvbmx5IGJlY2F1c2UgdGhlIFRhcmdldElkIGlzIHRoZSBzdWZmaXguXG4gICAgdC5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBcInRhcmdldElkXCJcbiAgICB9KS5jcmVhdGVJbmRleChcInF1ZXJ5VGFyZ2V0c0luZGV4XCIsIFhzLCB7XG4gICAgICAgIHVuaXF1ZTogITBcbiAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuY29uc3QgS3IgPSBcIkZhaWxlZCB0byBvYnRhaW4gZXhjbHVzaXZlIGFjY2VzcyB0byB0aGUgcGVyc2lzdGVuY2UgbGF5ZXIuIFRvIGFsbG93IHNoYXJlZCBhY2Nlc3MsIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24gaGFzIHRvIGJlIGVuYWJsZWQgaW4gYWxsIHRhYnMuIElmIHlvdSBhcmUgdXNpbmcgYGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiOnRydWVgLCBtYWtlIHN1cmUgdGhhdCBvbmx5IG9uZSB0YWIgaGFzIHBlcnNpc3RlbmNlIGVuYWJsZWQgYXQgYW55IGdpdmVuIHRpbWUuXCI7XG5cbi8qKlxuICogT2xkZXN0IGFjY2VwdGFibGUgYWdlIGluIG1pbGxpc2Vjb25kcyBmb3IgY2xpZW50IG1ldGFkYXRhIGJlZm9yZSB0aGUgY2xpZW50XG4gKiBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCBpdHMgYXNzb2NpYXRlZCBkYXRhIGlzIGdhcmJhZ2UgY29sbGVjdGVkLlxuICovXG4vKipcbiAqIEFuIEluZGV4ZWREQi1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIHBlcnNpc3RlbnRseVxuICogYWNyb3NzIHNlc3Npb25zLlxuICpcbiAqIE9uIFdlYiBvbmx5LCB0aGUgRmlyZXN0b3JlIFNES3Mgc3VwcG9ydCBzaGFyZWQgYWNjZXNzIHRvIGl0cyBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuIFRoaXMgYWxsb3dzIG11bHRpcGxlIGJyb3dzZXIgdGFicyB0byByZWFkIGFuZCB3cml0ZSB0byBJbmRleGVkRGIgYW5kXG4gKiB0byBzeW5jaHJvbml6ZSBzdGF0ZSBldmVuIHdpdGhvdXQgbmV0d29yayBjb25uZWN0aXZpdHkuIFNoYXJlZCBhY2Nlc3MgaXNcbiAqIGN1cnJlbnRseSBvcHRpb25hbCBhbmQgbm90IGVuYWJsZWQgdW5sZXNzIGFsbCBjbGllbnRzIGludm9rZVxuICogYGVuYWJsZVBlcnNpc3RlbmNlKClgIHdpdGggYHtzeW5jaHJvbml6ZVRhYnM6dHJ1ZX1gLlxuICpcbiAqIEluIG11bHRpLXRhYiBtb2RlLCBpZiBtdWx0aXBsZSBjbGllbnRzIGFyZSBhY3RpdmUgYXQgdGhlIHNhbWUgdGltZSwgdGhlIFNES1xuICogd2lsbCBkZXNpZ25hdGUgb25lIGNsaWVudCBhcyB0aGUg4oCccHJpbWFyeSBjbGllbnTigJ0uIEFuIGVmZm9ydCBpcyBtYWRlIHRvIHBpY2tcbiAqIGEgdmlzaWJsZSwgbmV0d29yay1jb25uZWN0ZWQgYW5kIGFjdGl2ZSBjbGllbnQsIGFuZCB0aGlzIGNsaWVudCBpc1xuICogcmVzcG9uc2libGUgZm9yIGxldHRpbmcgb3RoZXIgY2xpZW50cyBrbm93IGFib3V0IGl0cyBwcmVzZW5jZS4gVGhlIHByaW1hcnlcbiAqIGNsaWVudCB3cml0ZXMgYSB1bmlxdWUgY2xpZW50LWdlbmVyYXRlZCBpZGVudGlmaWVyICh0aGUgY2xpZW50IElEKSB0b1xuICogSW5kZXhlZERi4oCZcyDigJxvd25lcuKAnSBzdG9yZSBldmVyeSA0IHNlY29uZHMuIElmIHRoZSBwcmltYXJ5IGNsaWVudCBmYWlscyB0b1xuICogdXBkYXRlIHRoaXMgZW50cnksIGFub3RoZXIgY2xpZW50IGNhbiBhY3F1aXJlIHRoZSBsZWFzZSBhbmQgdGFrZSBvdmVyIGFzXG4gKiBwcmltYXJ5LlxuICpcbiAqIFNvbWUgcGVyc2lzdGVuY2Ugb3BlcmF0aW9ucyBpbiB0aGUgU0RLIGFyZSBkZXNpZ25hdGVkIGFzIHByaW1hcnktY2xpZW50IG9ubHlcbiAqIG9wZXJhdGlvbnMuIFRoaXMgaW5jbHVkZXMgdGhlIGFja25vd2xlZGdtZW50IG9mIG11dGF0aW9ucyBhbmQgYWxsIHVwZGF0ZXMgb2ZcbiAqIHJlbW90ZSBkb2N1bWVudHMuIFRoZSBlZmZlY3RzIG9mIHRoZXNlIG9wZXJhdGlvbnMgYXJlIHdyaXR0ZW4gdG8gcGVyc2lzdGVuY2VcbiAqIGFuZCB0aGVuIGJyb2FkY2FzdCB0byBvdGhlciB0YWJzIHZpYSBMb2NhbFN0b3JhZ2UgKHNlZVxuICogYFdlYlN0b3JhZ2VTaGFyZWRDbGllbnRTdGF0ZWApLCB3aGljaCB0aGVuIHJlZnJlc2ggdGhlaXIgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogU2ltaWxhcmx5LCB0aGUgcHJpbWFyeSBjbGllbnQgbGlzdGVucyB0byBub3RpZmljYXRpb25zIHNlbnQgYnkgc2Vjb25kYXJ5XG4gKiBjbGllbnRzIHRvIGRpc2NvdmVyIHBlcnNpc3RlbmNlIGNoYW5nZXMgd3JpdHRlbiBieSBzZWNvbmRhcnkgY2xpZW50cywgc3VjaCBhc1xuICogdGhlIGFkZGl0aW9uIG9mIG5ldyBtdXRhdGlvbnMgYW5kIHF1ZXJ5IHRhcmdldHMuXG4gKlxuICogSWYgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkIGFuZCBhbm90aGVyIHRhYiBhbHJlYWR5IG9idGFpbmVkIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSwgSW5kZXhlZERiUGVyc2lzdGVuY2UgZW50ZXJzIGEgZmFpbGVkIHN0YXRlIGFuZCBhbGwgc3Vic2VxdWVudFxuICogb3BlcmF0aW9ucyB3aWxsIGF1dG9tYXRpY2FsbHkgZmFpbC5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHRoZXJlIGlzIGFuIG9wdGltaXphdGlvbiBzbyB0aGF0IHdoZW4gYSB0YWIgaXMgY2xvc2VkLCB0aGVcbiAqIHByaW1hcnkgbGVhc2UgaXMgcmVsZWFzZWQgaW1tZWRpYXRlbHkgKHRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgdG8gbWFrZVxuICogc3VyZSB0aGF0IGEgcmVmcmVzaGVkIHRhYiBpcyBhYmxlIHRvIGltbWVkaWF0ZWx5IHJlLWFjcXVpcmUgdGhlIHByaW1hcnlcbiAqIGxlYXNlKS4gVW5mb3J0dW5hdGVseSwgSW5kZXhlZERCIGNhbm5vdCBiZSByZWxpYWJseSB1c2VkIGluIHdpbmRvdy51bmxvYWRcbiAqIHNpbmNlIGl0IGlzIGFuIGFzeW5jaHJvbm91cyBBUEkuIFNvIGluIGFkZGl0aW9uIHRvIGF0dGVtcHRpbmcgdG8gZ2l2ZSB1cCB0aGVcbiAqIGxlYXNlLCB0aGUgbGVhc2Vob2xkZXIgd3JpdGVzIGl0cyBjbGllbnQgSUQgdG8gYSBcInpvbWJpZWRDbGllbnRcIiBlbnRyeSBpblxuICogTG9jYWxTdG9yYWdlIHdoaWNoIGFjdHMgYXMgYW4gaW5kaWNhdG9yIHRoYXQgYW5vdGhlciB0YWIgc2hvdWxkIGdvIGFoZWFkIGFuZFxuICogdGFrZSB0aGUgcHJpbWFyeSBsZWFzZSBpbW1lZGlhdGVseSByZWdhcmRsZXNzIG9mIHRoZSBjdXJyZW50IGxlYXNlIHRpbWVzdGFtcC5cbiAqXG4gKiBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIGBzeW5jaHJvbml6ZVRhYnNgIHNlY3Rpb24gd2hlbiBtdWx0aS10YWIgaXMgbm9cbiAqIGxvbmdlciBvcHRpb25hbC5cbiAqL1xuY2xhc3MgUXIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc3luY2hyb25pemUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiBtdWx0aXBsZSB0YWJzIGFuZCBzaGFyZVxuICAgICAqIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAgICAgKi9cbiAgICB0LCBlLCBuLCBzLCBpLCByLCBvLCB1LCBhLCBcbiAgICAvKipcbiAgICAgKiBJZiBzZXQgdG8gdHJ1ZSwgZm9yY2VmdWxseSBvYnRhaW5zIGRhdGFiYXNlIGFjY2Vzcy4gRXhpc3RpbmcgdGFicyB3aWxsXG4gICAgICogbm8gbG9uZ2VyIGJlIGFibGUgdG8gYWNjZXNzIEluZGV4ZWREQi5cbiAgICAgKi9cbiAgICBjLCBoID0gMTMpIHtcbiAgICAgICAgaWYgKHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gPSB0LCB0aGlzLnBlcnNpc3RlbmNlS2V5ID0gZSwgdGhpcy5jbGllbnRJZCA9IG4sIFxuICAgICAgICB0aGlzLkpuID0gaSwgdGhpcy53aW5kb3cgPSByLCB0aGlzLmRvY3VtZW50ID0gbywgdGhpcy5ZbiA9IGEsIHRoaXMuWG4gPSBjLCB0aGlzLlpuID0gaCwgXG4gICAgICAgIHRoaXMudHMgPSBudWxsLCB0aGlzLmVzID0gITEsIHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMubmV0d29ya0VuYWJsZWQgPSAhMCwgXG4gICAgICAgIC8qKiBPdXIgd2luZG93LnVubG9hZCBoYW5kbGVyLCBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLm5zID0gbnVsbCwgdGhpcy5pbkZvcmVncm91bmQgPSAhMSwgXG4gICAgICAgIC8qKiBPdXIgJ3Zpc2liaWxpdHljaGFuZ2UnIGxpc3RlbmVyIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMuc3MgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBjbGllbnQgbWV0YWRhdGEgcmVmcmVzaCB0YXNrLiAqL1xuICAgICAgICB0aGlzLnJzID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCB0aW1lIHdlIGdhcmJhZ2UgY29sbGVjdGVkIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLiAqL1xuICAgICAgICB0aGlzLm9zID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBcbiAgICAgICAgLyoqIEEgbGlzdGVuZXIgdG8gbm90aWZ5IG9uIHByaW1hcnkgc3RhdGUgY2hhbmdlcy4gKi9cbiAgICAgICAgdGhpcy51cyA9IHQgPT4gUHJvbWlzZS5yZXNvbHZlKCksICFRci52dCgpKSB0aHJvdyBuZXcgUShLLlVOSU1QTEVNRU5URUQsIFwiVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLlwiKTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IG5ldyB4cih0aGlzLCBzKSwgdGhpcy5jcyA9IGUgKyBcIm1haW5cIiwgdGhpcy5NID0gbmV3IENpKHUpLCBcbiAgICAgICAgdGhpcy5ocyA9IG5ldyBnaSh0aGlzLmNzLCB0aGlzLlpuLCBuZXcgcXIodGhpcy5NKSksIHRoaXMubHMgPSBuZXcgQXIodGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5NKSwgXG4gICAgICAgIHRoaXMuZnMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1yKHQpO1xuICAgICAgICB9KHRoaXMuTSksIHRoaXMuZHMgPSBuZXcgR2ksIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuX3MgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5fcyA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gYyAmJiBGKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLndzKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIEtyKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdzKCksIHRoaXMueXMoKSwgdGhpcy5wcygpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy5scy5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy50cyA9IG5ldyBudCh0LCB0aGlzLlluKTtcbiAgICAgICAgfSkpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXMgPSAhMDtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+ICh0aGlzLmhzICYmIHRoaXMuaHMuY2xvc2UoKSwgUHJvbWlzZS5yZWplY3QodCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgcHJpbWFyeSBzdGF0ZSBvZiB0aGVcbiAgICAgKiBpbnN0YW5jZSBjaGFuZ2VzLiBVcG9uIHJlZ2lzdGVyaW5nLCB0aGlzIGxpc3RlbmVyIGlzIGludm9rZWQgaW1tZWRpYXRlbHlcbiAgICAgKiB3aXRoIHRoZSBjdXJyZW50IHByaW1hcnkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBJcyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnVzID0gYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm4gdChlKTtcbiAgICAgICAgfSwgdCh0aGlzLmlzUHJpbWFyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZGF0YWJhc2UgcmVjZWl2ZXMgYVxuICAgICAqIHZlcnNpb24gY2hhbmdlIGV2ZW50IGluZGljYXRpbmcgdGhhdCBpdCBoYXMgZGVsZXRlZC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5ocy5PdCgoYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBhbiBhdHRlbXB0IGlzIG1hZGUgdG8gZGVsZXRlIEluZGV4ZWREQi5cbiAgICAgICAgICAgIG51bGwgPT09IGUubmV3VmVyc2lvbiAmJiBhd2FpdCB0KCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRqdXN0cyB0aGUgY3VycmVudCBuZXR3b3JrIHN0YXRlIGluIHRoZSBjbGllbnQncyBtZXRhZGF0YSwgcG90ZW50aWFsbHlcbiAgICAgKiBhZmZlY3RpbmcgdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBzZXROZXR3b3JrRW5hYmxlZCh0KSB7XG4gICAgICAgIHRoaXMubmV0d29ya0VuYWJsZWQgIT09IHQgJiYgKHRoaXMubmV0d29ya0VuYWJsZWQgPSB0LCBcbiAgICAgICAgLy8gU2NoZWR1bGUgYSBwcmltYXJ5IGxlYXNlIHJlZnJlc2ggZm9yIGltbWVkaWF0ZSBleGVjdXRpb24uIFRoZSBldmVudHVhbFxuICAgICAgICAvLyBsZWFzZSB1cGRhdGUgd2lsbCBiZSBwcm9wYWdhdGVkIHZpYSBgcHJpbWFyeVN0YXRlTGlzdGVuZXJgLlxuICAgICAgICB0aGlzLkpuLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3RhcnRlZCAmJiBhd2FpdCB0aGlzLndzKCk7XG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNsaWVudCBtZXRhZGF0YSBpbiBJbmRleGVkRGIgYW5kIGF0dGVtcHRzIHRvIGVpdGhlciBvYnRhaW4gb3JcbiAgICAgKiBleHRlbmQgdGhlIHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIEFzeW5jaHJvbm91c2x5IG5vdGlmaWVzIHRoZVxuICAgICAqIHByaW1hcnkgc3RhdGUgbGlzdGVuZXIgaWYgdGhlIGNsaWVudCBlaXRoZXIgbmV3bHkgb2J0YWluZWQgb3IgcmVsZWFzZWQgaXRzXG4gICAgICogcHJpbWFyeSBsZWFzZS5cbiAgICAgKi8gICAgd3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJ1blRyYW5zYWN0aW9uKFwidXBkYXRlQ2xpZW50TWV0YWRhdGFBbmRUcnlCZWNvbWVQcmltYXJ5XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IFdyKHQpLnB1dCh7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKSxcbiAgICAgICAgICAgIG5ldHdvcmtFbmFibGVkOiB0aGlzLm5ldHdvcmtFbmFibGVkLFxuICAgICAgICAgICAgaW5Gb3JlZ3JvdW5kOiB0aGlzLmluRm9yZWdyb3VuZFxuICAgICAgICB9KS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1ByaW1hcnkpIHJldHVybiB0aGlzLlRzKHQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgKHRoaXMuaXNQcmltYXJ5ID0gITEsIHRoaXMuSm4uZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy51cyghMSkpKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLkVzKHQpKSkubmV4dCgoZSA9PiB0aGlzLmlzUHJpbWFyeSAmJiAhZSA/IHRoaXMuQXModCkubmV4dCgoKCkgPT4gITEpKSA6ICEhZSAmJiB0aGlzLlJzKHQpLm5leHQoKCgpID0+ICEwKSkpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChJaSh0KSkgXG4gICAgICAgICAgICAvLyBQcm9jZWVkIHdpdGggdGhlIGV4aXN0aW5nIHN0YXRlLiBBbnkgc3Vic2VxdWVudCBhY2Nlc3MgdG9cbiAgICAgICAgICAgIC8vIEluZGV4ZWREQiB3aWxsIHZlcmlmeSB0aGUgbGVhc2UuXG4gICAgICAgICAgICByZXR1cm4gTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGV4dGVuZCBvd25lciBsZWFzZTogXCIsIHQpLCB0aGlzLmlzUHJpbWFyeTtcbiAgICAgICAgICAgIGlmICghdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgdGhyb3cgdDtcbiAgICAgICAgICAgIHJldHVybiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgb3duZXIgbGVhc2UgYWZ0ZXIgZXJyb3IgZHVyaW5nIGxlYXNlIHJlZnJlc2hcIiwgdCksIFxuICAgICAgICAgICAgLyogaXNQcmltYXJ5PSAqLyAhMTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgdGhpcy5Kbi5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLnVzKHQpKSksIHRoaXMuaXNQcmltYXJ5ID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBUcyh0KSB7XG4gICAgICAgIHJldHVybiBqcih0KS5nZXQoXCJvd25lclwiKS5uZXh0KCh0ID0+IHdpLnJlc29sdmUodGhpcy5icyh0KSkpKTtcbiAgICB9XG4gICAgUHModCkge1xuICAgICAgICByZXR1cm4gV3IodCkuZGVsZXRlKHRoaXMuY2xpZW50SWQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgZ2FyYmFnZSBjb2xsZWN0aW9uIHRocmVzaG9sZCBoYXMgcGFzc2VkLCBwcnVuZXMgdGhlXG4gICAgICogUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIGFuZCB0aGUgQ2xpZW50TWV0YWRhdGEgc3RvcmUgYmFzZWQgb24gdGhlIGxhc3QgdXBkYXRlXG4gICAgICogdGltZSBvZiBhbGwgY2xpZW50cy5cbiAgICAgKi8gICAgYXN5bmMgVnMoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy52cyh0aGlzLm9zLCAxOGU1KSkge1xuICAgICAgICAgICAgdGhpcy5vcyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5ydW5UcmFuc2FjdGlvbihcIm1heWJlR2FyYmFnZUNvbGxlY3RNdWx0aUNsaWVudFN0YXRlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBQaSh0LCBcImNsaWVudE1ldGFkYXRhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnF0KCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLlNzKHQsIDE4ZTUpLCBzID0gdC5maWx0ZXIoKHQgPT4gLTEgPT09IG4uaW5kZXhPZih0KSkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBEZWxldGUgbWV0YWRhdGEgZm9yIGNsaWVudHMgdGhhdCBhcmUgbm8gbG9uZ2VyIGNvbnNpZGVyZWQgYWN0aXZlLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2kuZm9yRWFjaChzLCAodCA9PiBlLmRlbGV0ZSh0LmNsaWVudElkKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKCgpID0+IFtdKSk7XG4gICAgICAgICAgICAvLyBEZWxldGUgcG90ZW50aWFsIGxlZnRvdmVyIGVudHJpZXMgdGhhdCBtYXkgY29udGludWUgdG8gbWFyayB0aGVcbiAgICAgICAgICAgIC8vIGluYWN0aXZlIGNsaWVudHMgYXMgem9tYmllZCBpbiBMb2NhbFN0b3JhZ2UuXG4gICAgICAgICAgICAvLyBJZGVhbGx5IHdlJ2QgZGVsZXRlIHRoZSBJbmRleGVkRGIgYW5kIExvY2FsU3RvcmFnZSB6b21iaWUgZW50cmllcyBmb3JcbiAgICAgICAgICAgIC8vIHRoZSBjbGllbnQgYXRvbWljYWxseSwgYnV0IHdlIGNhbid0LiBTbyB3ZSBvcHQgdG8gZGVsZXRlIHRoZSBJbmRleGVkRGJcbiAgICAgICAgICAgIC8vIGVudHJpZXMgZmlyc3QgdG8gYXZvaWQgcG90ZW50aWFsbHkgcmV2aXZpbmcgYSB6b21iaWVkIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zKSBmb3IgKGNvbnN0IGUgb2YgdCkgdGhpcy5fcy5yZW1vdmVJdGVtKHRoaXMuRHMoZS5jbGllbnRJZCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjaGVkdWxlcyBhIHJlY3VycmluZyB0aW1lciB0byB1cGRhdGUgdGhlIGNsaWVudCBtZXRhZGF0YSBhbmQgdG8gZWl0aGVyXG4gICAgICogZXh0ZW5kIG9yIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgaWYgdGhlIGNsaWVudCBpcyBlbGlnaWJsZS5cbiAgICAgKi8gICAgcHMoKSB7XG4gICAgICAgIHRoaXMucnMgPSB0aGlzLkpuLmVucXVldWVBZnRlckRlbGF5KFwiY2xpZW50X21ldGFkYXRhX3JlZnJlc2hcIiAvKiBDbGllbnRNZXRhZGF0YVJlZnJlc2ggKi8gLCA0ZTMsICgoKSA9PiB0aGlzLndzKCkudGhlbigoKCkgPT4gdGhpcy5WcygpKSkudGhlbigoKCkgPT4gdGhpcy5wcygpKSkpKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB3aGV0aGVyIGBjbGllbnRgIGlzIHRoZSBsb2NhbCBjbGllbnQuICovICAgIGJzKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiB0Lm93bmVySWQgPT09IHRoaXMuY2xpZW50SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBzdGF0ZSBvZiBhbGwgYWN0aXZlIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZSBsb2NhbFxuICAgICAqIGNsaWVudCBpcyBvciBjYW4gYWN0IGFzIHRoZSBob2xkZXIgb2YgdGhlIHByaW1hcnkgbGVhc2UuIFJldHVybnMgd2hldGhlclxuICAgICAqIHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBsZWFzZSwgYnV0IGRvZXMgbm90IGFjdHVhbGx5IGFjcXVpcmUgaXQuXG4gICAgICogTWF5IHJldHVybiAnZmFsc2UnIGV2ZW4gaWYgdGhlcmUgaXMgbm8gYWN0aXZlIGxlYXNlaG9sZGVyIGFuZCBhbm90aGVyXG4gICAgICogKGZvcmVncm91bmQpIGNsaWVudCBzaG91bGQgYmVjb21lIGxlYXNlaG9sZGVyIGluc3RlYWQuXG4gICAgICovICAgIEVzKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuWG4pIHJldHVybiB3aS5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIGpyKHQpLmdldChcIm93bmVyXCIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gQSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBwcmltYXJ5IGxlYXNlIGlmOlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW5cbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIHRoZSBgZm9yY2VPd25pbmdUYWJgIHNldHRpbmcgd2FzIHBhc3NlZCBpbi5cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmIHRoaXMudnMoZS5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLkNzKGUub3duZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5icyhlKSAmJiB0aGlzLm5ldHdvcmtFbmFibGVkKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmJzKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgdGhlIGBjYW5BY3RBc1ByaW1hcnlgIGNoZWNrIGlmIHRoZSBjdXJyZW50IGxlYXNlaG9sZGVyIGhhc1xuICAgICAgICAgICAgICAgICAgICAvLyBub3Qgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLiBJZiB0aGlzIGhhcHBlbnMgYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50IHN0YXJ0dXAsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieVxuICAgICAgICAgICAgICAgICAgICAvLyBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgYW5kIHRoZSB1c2VyIGNhbiBjb250aW51ZSB0byB1c2UgRmlyZXN0b3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhaWxzIGR1cmluZyBhIGxlYXNlIHJlZnJlc2gsIHdlIHdpbGwgaW5zdGVhZCBibG9jayB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBmcm9tIGV4ZWN1dGluZyBmdXJ0aGVyIG9wZXJhdGlvbnMuIE5vdGUgdGhhdCB0aGlzIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgbWl4aW5nICYgbWF0Y2hpbmcgZGlmZmVyZW50IGBzeW5jaHJvbml6ZVRhYnNgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmdzIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhblxuICAgICAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdHVybmVkIG9mZi5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBLcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IFdyKHQpLnF0KCkubmV4dCgodCA9PiB2b2lkIDAgPT09IHRoaXMuU3ModCwgNWUzKS5maW5kKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jbGllbnRJZCAhPT0gdC5jbGllbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gIXRoaXMubmV0d29ya0VuYWJsZWQgJiYgdC5uZXR3b3JrRW5hYmxlZCwgbiA9ICF0aGlzLmluRm9yZWdyb3VuZCAmJiB0LmluRm9yZWdyb3VuZCwgcyA9IHRoaXMubmV0d29ya0VuYWJsZWQgPT09IHQubmV0d29ya0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlIHx8IG4gJiYgcykgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gITE7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpLm5leHQoKHQgPT4gKHRoaXMuaXNQcmltYXJ5ICE9PSB0ICYmIE8oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICR7dCA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IGVsaWdpYmxlIGZvciBhIHByaW1hcnkgbGVhc2UuYCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBhc3luYyBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gVGhlIHNodXRkb3duKCkgb3BlcmF0aW9ucyBhcmUgaWRlbXBvdGVudCBhbmQgY2FuIGJlIGNhbGxlZCBldmVuIHdoZW5cbiAgICAgICAgLy8gc3RhcnQoKSBhYm9ydGVkIChlLmcuIGJlY2F1c2UgaXQgY291bGRuJ3QgYWNxdWlyZSB0aGUgcGVyc2lzdGVuY2UgbGVhc2UpLlxuICAgICAgICB0aGlzLmVzID0gITEsIHRoaXMueHMoKSwgdGhpcy5ycyAmJiAodGhpcy5ycy5jYW5jZWwoKSwgdGhpcy5ycyA9IG51bGwpLCB0aGlzLk5zKCksIFxuICAgICAgICB0aGlzLmtzKCksIFxuICAgICAgICAvLyBVc2UgYFNpbXBsZURiLnJ1blRyYW5zYWN0aW9uYCBkaXJlY3RseSB0byBhdm9pZCBmYWlsaW5nIGlmIGFub3RoZXIgdGFiXG4gICAgICAgIC8vIGhhcyBvYnRhaW5lZCB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgYXdhaXQgdGhpcy5ocy5ydW5UcmFuc2FjdGlvbihcInNodXRkb3duXCIsIFwicmVhZHdyaXRlXCIsIFsgXCJvd25lclwiLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBiaSh0LCBudC5BKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkFzKGUpLm5leHQoKCgpID0+IHRoaXMuUHMoZSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLmhzLmNsb3NlKCksIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXG4gICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cbiAgICAgICAgdGhpcy5NcygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNsaWVudHMgdGhhdCBhcmUgbm90IHpvbWJpZWQgYW5kIGhhdmUgYW4gdXBkYXRlVGltZSB3aXRoaW4gdGhlXG4gICAgICogcHJvdmlkZWQgdGhyZXNob2xkLlxuICAgICAqLyAgICBTcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LmZpbHRlcigodCA9PiB0aGlzLnZzKHQudXBkYXRlVGltZU1zLCBlKSAmJiAhdGhpcy5Dcyh0LmNsaWVudElkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gSWYgbXVsdGktdGFiXG4gICAgICogaXMgbm90IHN1cHBvcnRlZCwgcmV0dXJucyBhbiBhcnJheSB0aGF0IG9ubHkgY29udGFpbnMgdGhlIGxvY2FsIGNsaWVudCdzXG4gICAgICogSUQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBPcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRBY3RpdmVDbGllbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gV3IodCkucXQoKS5uZXh0KCh0ID0+IHRoaXMuU3ModCwgMThlNSkubWFwKCh0ID0+IHQuY2xpZW50SWQpKSkpKSk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcztcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBnci5ZdCh0LCB0aGlzLk0sIGUsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubHM7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZzO1xuICAgIH1cbiAgICBnZXRJbmRleE1hbmFnZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGFyKHQpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudE92ZXJsYXlDYWNoZSh0KSB7XG4gICAgICAgIHJldHVybiBqaS5ZdCh0aGlzLk0sIHQpO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHM7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gXCJyZWFkb25seVwiID09PSBlID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgaSA9IDE0ID09PSAociA9IHRoaXMuWm4pID8gZmkgOiAxMyA9PT0gciA/IGxpIDogMTIgPT09IHIgPyBoaSA6IDExID09PSByID8gY2kgOiB2b2lkIEwoKTtcbiAgICAgICAgLyoqIFJldHVybnMgdGhlIG9iamVjdCBzdG9yZXMgZm9yIHRoZSBwcm92aWRlZCBzY2hlbWEuICovXG4gICAgICAgIHZhciByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaHMucnVuVHJhbnNhY3Rpb24odCwgcywgaSwgKHMgPT4gKG8gPSBuZXcgYmkocywgdGhpcy50cyA/IHRoaXMudHMubmV4dCgpIDogbnQuQSksIFxuICAgICAgICBcInJlYWR3cml0ZS1wcmltYXJ5XCIgPT09IGUgPyB0aGlzLlRzKG8pLm5leHQoKHQgPT4gISF0IHx8IHRoaXMuRXMobykpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgIGlmICghZSkgdGhyb3cgRihgRmFpbGVkIHRvIG9idGFpbiBwcmltYXJ5IGxlYXNlIGZvciBhY3Rpb24gJyR7dH0nLmApLCB0aGlzLmlzUHJpbWFyeSA9ICExLCBcbiAgICAgICAgICAgIHRoaXMuSm4uZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gdGhpcy51cyghMSkpKSwgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBkaSk7XG4gICAgICAgICAgICByZXR1cm4gbihvKTtcbiAgICAgICAgfSkpLm5leHQoKHQgPT4gdGhpcy5ScyhvKS5uZXh0KCgoKSA9PiB0KSkpKSA6IHRoaXMuRnMobykubmV4dCgoKCkgPT4gbihvKSkpKSkpLnRoZW4oKHQgPT4gKG8ucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IHRoZSBjdXJyZW50IHRhYiBpcyB0aGUgcHJpbWFyeSBsZWFzZWhvbGRlciBvciBhbHRlcm5hdGl2ZWx5XG4gICAgICogdGhhdCB0aGUgbGVhc2Vob2xkZXIgaGFzIG9wdGVkIGludG8gbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBUT0RPKGIvMTE0MjI2MjM0KTogUmVtb3ZlIHRoaXMgY2hlY2sgd2hlbiBgc3luY2hyb25pemVUYWJzYCBjYW4gbm8gbG9uZ2VyXG4gICAgLy8gYmUgdHVybmVkIG9mZi5cbiAgICBGcyh0KSB7XG4gICAgICAgIHJldHVybiBqcih0KS5nZXQoXCJvd25lclwiKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0ICYmIHRoaXMudnModC5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLkNzKHQub3duZXJJZCkgJiYgIXRoaXMuYnModCkgJiYgISh0aGlzLlhuIHx8IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24gJiYgdC5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikpIHRocm93IG5ldyBRKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgS3IpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9idGFpbnMgb3IgZXh0ZW5kcyB0aGUgbmV3IHByaW1hcnkgbGVhc2UgZm9yIHRoZSBsb2NhbCBjbGllbnQuIFRoaXNcbiAgICAgKiBtZXRob2QgZG9lcyBub3QgdmVyaWZ5IHRoYXQgdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhpcyBsZWFzZS5cbiAgICAgKi8gICAgUnModCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgb3duZXJJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGFsbG93VGFiU3luY2hyb25pemF0aW9uOiB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uLFxuICAgICAgICAgICAgbGVhc2VUaW1lc3RhbXBNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4ganIodCkucHV0KFwib3duZXJcIiwgZSk7XG4gICAgfVxuICAgIHN0YXRpYyB2dCgpIHtcbiAgICAgICAgcmV0dXJuIGdpLnZ0KCk7XG4gICAgfVxuICAgIC8qKiBDaGVja3MgdGhlIHByaW1hcnkgbGVhc2UgYW5kIHJlbW92ZXMgaXQgaWYgd2UgYXJlIHRoZSBjdXJyZW50IHByaW1hcnkuICovICAgIEFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGpyKHQpO1xuICAgICAgICByZXR1cm4gZS5nZXQoXCJvd25lclwiKS5uZXh0KCh0ID0+IHRoaXMuYnModCkgPyAoTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiUmVsZWFzaW5nIHByaW1hcnkgbGVhc2UuXCIpLCBcbiAgICAgICAgZS5kZWxldGUoXCJvd25lclwiKSkgOiB3aS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgLyoqIFZlcmlmaWVzIHRoYXQgYHVwZGF0ZVRpbWVNc2AgaXMgd2l0aGluIGBtYXhBZ2VNc2AuICovICAgIHZzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiAhKHQgPCBuIC0gZSkgJiYgKCEodCA+IG4pIHx8IChGKGBEZXRlY3RlZCBhbiB1cGRhdGUgdGltZSB0aGF0IGlzIGluIHRoZSBmdXR1cmU6ICR7dH0gPiAke259YCksIFxuICAgICAgICAhMSkpO1xuICAgIH1cbiAgICBncygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5kb2N1bWVudCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHRoaXMuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAodGhpcy5zcyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuSm4uZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuaW5Gb3JlZ3JvdW5kID0gXCJ2aXNpYmxlXCIgPT09IHRoaXMuZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlLCBcbiAgICAgICAgICAgIHRoaXMud3MoKSkpKTtcbiAgICAgICAgfSwgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnNzKSwgdGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUpO1xuICAgIH1cbiAgICBOcygpIHtcbiAgICAgICAgdGhpcy5zcyAmJiAodGhpcy5kb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLnNzKSwgdGhpcy5zcyA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhIHdpbmRvdy51bmxvYWQgaGFuZGxlciB0aGF0IHdpbGwgc3luY2hyb25vdXNseSB3cml0ZSBvdXJcbiAgICAgKiBjbGllbnRJZCB0byBhIFwiem9tYmllIGNsaWVudCBpZFwiIGxvY2F0aW9uIGluIExvY2FsU3RvcmFnZS4gVGhpcyBjYW4gYmUgdXNlZFxuICAgICAqIGJ5IHRhYnMgdHJ5aW5nIHRvIGFjcXVpcmUgdGhlIHByaW1hcnkgbGVhc2UgdG8gZGV0ZXJtaW5lIHRoYXQgdGhlIGxlYXNlXG4gICAgICogaXMgbm8gbG9uZ2VyIHZhbGlkIGV2ZW4gaWYgdGhlIHRpbWVzdGFtcCBpcyByZWNlbnQuIFRoaXMgaXMgcGFydGljdWxhcmx5XG4gICAgICogaW1wb3J0YW50IGZvciB0aGUgcmVmcmVzaCBjYXNlIChzbyB0aGUgdGFiIGNvcnJlY3RseSByZS1hY3F1aXJlcyB0aGVcbiAgICAgKiBwcmltYXJ5IGxlYXNlKS4gTG9jYWxTdG9yYWdlIGlzIHVzZWQgZm9yIHRoaXMgcmF0aGVyIHRoYW4gSW5kZXhlZERiIGJlY2F1c2VcbiAgICAgKiBpdCBpcyBhIHN5bmNocm9ub3VzIEFQSSBhbmQgc28gY2FuIGJlIHVzZWQgcmVsaWFibHkgZnJvbSAgYW4gdW5sb2FkXG4gICAgICogaGFuZGxlci5cbiAgICAgKi8gICAgeXMoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIChudWxsID09PSAodCA9IHRoaXMud2luZG93KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmFkZEV2ZW50TGlzdGVuZXIpICYmICh0aGlzLm5zID0gKCkgPT4ge1xuICAgICAgICAgICAgLy8gTm90ZTogSW4gdGhlb3J5LCB0aGlzIHNob3VsZCBiZSBzY2hlZHVsZWQgb24gdGhlIEFzeW5jUXVldWUgc2luY2UgaXRcbiAgICAgICAgICAgIC8vIGFjY2Vzc2VzIGludGVybmFsIHN0YXRlLiBXZSBleGVjdXRlIHRoaXMgY29kZSBkaXJlY3RseSBkdXJpbmcgc2h1dGRvd25cbiAgICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBpdCBnZXRzIGEgY2hhbmNlIHRvIHJ1bi5cbiAgICAgICAgICAgIHRoaXMueHMoKSwgaXNTYWZhcmkoKSAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvVmVyc2lvblxcLzFbNDVdLykgJiYgXG4gICAgICAgICAgICAvLyBPbiBTYWZhcmkgMTQgYW5kIDE1LCB3ZSBkbyBub3QgcnVuIGFueSBjbGVhbnVwIGFjdGlvbnMgYXMgaXQgbWlnaHRcbiAgICAgICAgICAgIC8vIHRyaWdnZXIgYSBidWcgdGhhdCBwcmV2ZW50cyBTYWZhcmkgZnJvbSByZS1vcGVuaW5nIEluZGV4ZWREQiBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZSBuZXh0IHBhZ2UgbG9hZC5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjI2NTQ3XG4gICAgICAgICAgICB0aGlzLkpuLmVudGVyUmVzdHJpY3RlZE1vZGUoLyogcHVyZ2VFeGlzdGluZ1Rhc2tzPSAqLyAhMCksIHRoaXMuSm4uZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSk7XG4gICAgICAgIH0sIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLm5zKSk7XG4gICAgfVxuICAgIGtzKCkge1xuICAgICAgICB0aGlzLm5zICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicGFnZWhpZGVcIiwgdGhpcy5ucyksIHRoaXMubnMgPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIGEgY2xpZW50IGlzIFwiem9tYmllZFwiIGJhc2VkIG9uIGl0cyBMb2NhbFN0b3JhZ2UgZW50cnkuXG4gICAgICogQ2xpZW50cyBiZWNvbWUgem9tYmllZCB3aGVuIHRoZWlyIHRhYiBjbG9zZXMgd2l0aG91dCBydW5uaW5nIGFsbCBvZiB0aGVcbiAgICAgKiBjbGVhbnVwIGxvZ2ljIGluIGBzaHV0ZG93bigpYC5cbiAgICAgKi8gICAgQ3ModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBudWxsICE9PSAobnVsbCA9PT0gKGUgPSB0aGlzLl9zKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmdldEl0ZW0odGhpcy5Ecyh0KSkpO1xuICAgICAgICAgICAgcmV0dXJuIE8oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBgQ2xpZW50ICcke3R9JyAke24gPyBcImlzXCIgOiBcImlzIG5vdFwifSB6b21iaWVkIGluIExvY2FsU3RvcmFnZWApLCBcbiAgICAgICAgICAgIG47XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgcmV0dXJuIEYoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkZhaWxlZCB0byBnZXQgem9tYmllZCBjbGllbnQgaWQuXCIsIHQpLCAhMTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWNvcmQgY2xpZW50IGFzIHpvbWJpZWQgKGEgY2xpZW50IHRoYXQgaGFkIGl0cyB0YWIgY2xvc2VkKS4gWm9tYmllZFxuICAgICAqIGNsaWVudHMgYXJlIGlnbm9yZWQgZHVyaW5nIHByaW1hcnkgdGFiIHNlbGVjdGlvbi5cbiAgICAgKi8gICAgeHMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5fcy5zZXRJdGVtKHRoaXMuRHModGhpcy5jbGllbnRJZCksIFN0cmluZyhEYXRlLm5vdygpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIEdyYWNlZnVsbHkgaGFuZGxlIGlmIExvY2FsU3RvcmFnZSBpc24ndCBhdmFpbGFibGUgLyB3b3JraW5nLlxuICAgICAgICAgICAgRihcIkZhaWxlZCB0byBzZXQgem9tYmllIGNsaWVudCBpZC5cIiwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIFJlbW92ZXMgdGhlIHpvbWJpZWQgY2xpZW50IGVudHJ5IGlmIGl0IGV4aXN0cy4gKi8gICAgTXMoKSB7XG4gICAgICAgIGlmICh0aGlzLl9zKSB0cnkge1xuICAgICAgICAgICAgdGhpcy5fcy5yZW1vdmVJdGVtKHRoaXMuRHModGhpcy5jbGllbnRJZCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBJZ25vcmVcbiAgICAgICAgfVxuICAgIH1cbiAgICBEcyh0KSB7XG4gICAgICAgIHJldHVybiBgZmlyZXN0b3JlX3pvbWJpZV8ke3RoaXMucGVyc2lzdGVuY2VLZXl9XyR7dH1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIHByaW1hcnkgY2xpZW50IG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBqcih0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwib3duZXJcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBjbGllbnQgbWV0YWRhdGEgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFdyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJjbGllbnRNZXRhZGF0YVwiKTtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdXNlZCBhcyBhIHByZWZpeCB3aGVuIHN0b3JpbmcgZGF0YSBpbiBJbmRleGVkREIgYW5kXG4gKiBMb2NhbFN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24genIodCwgZSkge1xuICAgIC8vIFVzZSB0d28gZGlmZmVyZW50IHByZWZpeCBmb3JtYXRzOlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAuIGRhdGFiYXNlSUQgLyAuLi5cbiAgICAvLyAgICogZmlyZXN0b3JlIC8gcGVyc2lzdGVuY2VLZXkgLyBwcm9qZWN0SUQgLyAuLi5cbiAgICAvLyBwcm9qZWN0SURzIGFyZSBETlMtY29tcGF0aWJsZSBuYW1lcyBhbmQgY2Fubm90IGNvbnRhaW4gZG90c1xuICAgIC8vIHNvIHRoZXJlJ3Mgbm8gZGFuZ2VyIG9mIGNvbGxpc2lvbnMuXG4gICAgbGV0IG4gPSB0LnByb2plY3RJZDtcbiAgICByZXR1cm4gdC5pc0RlZmF1bHREYXRhYmFzZSB8fCAobiArPSBcIi5cIiArIHQuZGF0YWJhc2UpLCBcImZpcmVzdG9yZS9cIiArIGUgKyBcIi9cIiArIG4gKyBcIi9cIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWFkb25seSB2aWV3IG9mIHRoZSBsb2NhbCBzdGF0ZSBvZiBhbGwgZG9jdW1lbnRzIHdlJ3JlIHRyYWNraW5nIChpLmUuIHdlXG4gKiBoYXZlIGEgY2FjaGVkIHZlcnNpb24gaW4gcmVtb3RlRG9jdW1lbnRDYWNoZSBvciBsb2NhbCBtdXRhdGlvbnMgZm9yIHRoZVxuICogZG9jdW1lbnQpLiBUaGUgdmlldyBpcyBjb21wdXRlZCBieSBhcHBseWluZyB0aGUgbXV0YXRpb25zIGluIHRoZVxuICogTXV0YXRpb25RdWV1ZSB0byB0aGUgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgSHIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5mcyA9IHQsIHRoaXMuJHMgPSBlLCB0aGlzLmluZGV4TWFuYWdlciA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBCcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpLm5leHQoKG4gPT4gdGhpcy5Mcyh0LCBlLCBuKSkpO1xuICAgIH1cbiAgICAvKiogSW50ZXJuYWwgdmVyc2lvbiBvZiBgZ2V0RG9jdW1lbnRgIHRoYXQgYWxsb3dzIHJldXNpbmcgYmF0Y2hlcy4gKi8gICAgTHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5mcy5nZXRFbnRyeSh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBuKSBlLmFwcGx5VG9Mb2NhbFZpZXcodCk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB2aWV3IG9mIHRoZSBnaXZlbiBgZG9jc2AgYXMgdGhleSB3b3VsZCBhcHBlYXIgYWZ0ZXIgYXBwbHlpbmdcbiAgICAvLyBhbGwgbXV0YXRpb25zIGluIHRoZSBnaXZlbiBgYmF0Y2hlc2AuXG4gICAgVXModCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgdC5hcHBseVRvTG9jYWxWaWV3KG4pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBpZGVudGlmaWVkIGJ5IGBrZXlzYC5cbiAgICAgKlxuICAgICAqIElmIHdlIGRvbid0IGhhdmUgY2FjaGVkIHN0YXRlIGZvciBhIGRvY3VtZW50IGluIGBrZXlzYCwgYSBOb0RvY3VtZW50IHdpbGxcbiAgICAgKiBiZSBzdG9yZWQgZm9yIHRoYXQga2V5IGluIHRoZSByZXN1bHRpbmcgc2V0LlxuICAgICAqLyAgICBxcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZzLmdldEVudHJpZXModCwgZSkubmV4dCgoZSA9PiB0aGlzLkdzKHQsIGUpLm5leHQoKCgpID0+IGUpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBsb2NhbCB2aWV3IHRoZSBnaXZlbiBgYmFzZURvY3NgIHdpdGhvdXQgcmV0cmlldmluZyBkb2N1bWVudHNcbiAgICAgKiBmcm9tIHRoZSBsb2NhbCBzdG9yZS5cbiAgICAgKi8gICAgR3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy4kcy5nZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkubmV4dCgodCA9PiB0aGlzLlVzKGUsIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gUmVhZCB0aW1lIGFuZCBrZXkgdG8gc3RhcnQgc2Nhbm5pbmcgYnkgKGV4Y2x1c2l2ZSkuXG4gICAgICovICAgIEtzKHQsIGUsIG4pIHtcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBzaW5nbGUgZG9jdW1lbnQgYnkgcGF0aCAocmF0aGVyIHRoYW4gYVxuICogY29sbGVjdGlvbikuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB4dC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbiAgICAgICAgfShlKSA/IHRoaXMuUXModCwgZS5wYXRoKSA6ICRlKGUpID8gdGhpcy5qcyh0LCBlLCBuKSA6IHRoaXMuV3ModCwgZSwgbik7XG4gICAgfVxuICAgIFFzKHQsIGUpIHtcbiAgICAgICAgLy8gSnVzdCBkbyBhIHNpbXBsZSBkb2N1bWVudCBsb29rdXAuXG4gICAgICAgIHJldHVybiB0aGlzLkJzKHQsIG5ldyB4dChlKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IEtuKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoZSA9IGUuaW5zZXJ0KHQua2V5LCB0KSksIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAganModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5jb2xsZWN0aW9uR3JvdXA7XG4gICAgICAgIGxldCBpID0gS24oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyLmdldENvbGxlY3Rpb25QYXJlbnRzKHQsIHMpLm5leHQoKHIgPT4gd2kuZm9yRWFjaChyLCAociA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ2UoZSwgXG4gICAgICAgICAgICAgICAgLypjb2xsZWN0aW9uR3JvdXA9Ki8gbnVsbCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBxdWVyeSBkb2VzIG5vdCBzcGVjaWZ5IGFueSBxdWVyeSBjb25zdHJhaW50cyB0aGF0XG4gKiBjb3VsZCByZW1vdmUgcmVzdWx0cy5cbiAqLyAoZSwgci5jaGlsZChzKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5Xcyh0LCBvLCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBpLmluc2VydCh0LCBlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSkpKTtcbiAgICB9XG4gICAgV3ModCwgZSwgbikge1xuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gdGhpcy5mcy5nZXRBbGxGcm9tQ29sbGVjdGlvbih0LCBlLnBhdGgsIG4pLm5leHQoKG4gPT4gKHMgPSBuLCB0aGlzLiRzLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGZvciAoY29uc3QgdCBvZiBlLm11dGF0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmtleTtcbiAgICAgICAgICAgICAgICBsZXQgaSA9IHMuZ2V0KG4pO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gaSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGludmFsaWQgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIG9uIHRvcCBvZlxuICAgICAgICAgICAgICAgIGkgPSB0ZS5uZXdJbnZhbGlkRG9jdW1lbnQobiksIHMgPSBzLmluc2VydChuLCBpKSksIHluKHQsIGksIGUubG9jYWxXcml0ZVRpbWUpLCBpLmlzRm91bmREb2N1bWVudCgpIHx8IChzID0gcy5yZW1vdmUobikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKFxuICAgICAgICAvLyBGaW5hbGx5LCBmaWx0ZXIgb3V0IGFueSBkb2N1bWVudHMgdGhhdCBkb24ndCBhY3R1YWxseSBtYXRjaFxuICAgICAgICAvLyB0aGUgcXVlcnkuXG4gICAgICAgIHMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIFFlKGUsIG4pIHx8IChzID0gcy5yZW1vdmUodCkpO1xuICAgICAgICB9KSksIHMpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHNldCBvZiBjaGFuZ2VzIHRvIHdoYXQgZG9jdW1lbnRzIGFyZSBjdXJyZW50bHkgaW4gdmlldyBhbmQgb3V0IG9mIHZpZXcgZm9yXG4gKiBhIGdpdmVuIHF1ZXJ5LiBUaGVzZSBjaGFuZ2VzIGFyZSBzZW50IHRvIHRoZSBMb2NhbFN0b3JlIGJ5IHRoZSBWaWV3ICh2aWFcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxuICovIGNsYXNzIEpyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGUsIHRoaXMuenMgPSBuLCB0aGlzLkhzID0gcztcbiAgICB9XG4gICAgc3RhdGljIEpzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSB6bigpLCBzID0gem4oKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUuZG9jQ2hhbmdlcykgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKHQuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgIHMgPSBzLmFkZCh0LmRvYy5rZXkpO1xuIC8vIGRvIG5vdGhpbmdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSnIodCwgZS5mcm9tQ2FjaGUsIG4sIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBxdWVyeSBlbmdpbmUgdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgdGhlIHRhcmdldCBkb2N1bWVudCBtYXBwaW5nIGluIHRoZVxuICogUXVlcnlDYWNoZS4gUXVlcnkgZXhlY3V0aW9uIGlzIG9wdGltaXplZCBieSBvbmx5IHJlYWRpbmcgdGhlIGRvY3VtZW50cyB0aGF0XG4gKiBwcmV2aW91c2x5IG1hdGNoZWQgYSBxdWVyeSBwbHVzIGFueSBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGVcbiAqIHF1ZXJ5IHdhcyBsYXN0IGxpc3RlbmVkIHRvLlxuICpcbiAqIFRoZXJlIGFyZSBzb21lIGNhc2VzIHdoZW4gdGhpcyBvcHRpbWl6YXRpb24gaXMgbm90IGd1YXJhbnRlZWQgdG8gcHJvZHVjZVxuICogdGhlIHNhbWUgcmVzdWx0cyBhcyBmdWxsIGNvbGxlY3Rpb24gc2NhbnMuIEluIHRoZXNlIGNhc2VzLCBxdWVyeVxuICogcHJvY2Vzc2luZyBmYWxscyBiYWNrIHRvIGZ1bGwgc2NhbnMuIFRoZXNlIGNhc2VzIGFyZTpcbiAqXG4gKiAtIExpbWl0IHF1ZXJpZXMgd2hlcmUgYSBkb2N1bWVudCB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHByZXZpb3VzbHkgbm8gbG9uZ2VyXG4gKiAgIG1hdGNoZXMgdGhlIHF1ZXJ5LlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IGVkaXQgbWF5IGNhdXNlIHRoZSBkb2N1bWVudCB0byBzb3J0IGJlbG93XG4gKiAgIGFub3RoZXIgZG9jdW1lbnQgdGhhdCBpcyBpbiB0aGUgbG9jYWwgY2FjaGUuXG4gKlxuICogLSBRdWVyaWVzIHRoYXQgaGF2ZSBuZXZlciBiZWVuIENVUlJFTlQgb3IgZnJlZSBvZiBsaW1ibyBkb2N1bWVudHMuXG4gKi8gY2xhc3MgWXIge1xuICAgIC8qKiBTZXRzIHRoZSBkb2N1bWVudCB2aWV3IHRvIHF1ZXJ5IGFnYWluc3QuICovXG4gICAgWXModCkge1xuICAgICAgICB0aGlzLlhzID0gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYWxsIGxvY2FsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHF1ZXJ5LiAqLyAgICBLcyh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBtYXRjaCBhbGwgZG9jdW1lbnRzIGRvbid0IGJlbmVmaXQgZnJvbSB1c2luZ1xuICAgICAgICAvLyBrZXktYmFzZWQgbG9va3Vwcy4gSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gc2NhbiBhbGwgZG9jdW1lbnRzIGluIGFcbiAgICAgICAgLy8gY29sbGVjdGlvbiwgcmF0aGVyIHRoYW4gdG8gcGVyZm9ybSBpbmRpdmlkdWFsIGxvb2t1cHMuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSB0LmxpbWl0ICYmIG51bGwgPT0gdC5zdGFydEF0ICYmIG51bGwgPT0gdC5lbmRBdCAmJiAoMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xuICAgICAgICB9KGUpIHx8IG4uaXNFcXVhbChjdC5taW4oKSkgPyB0aGlzLlpzKHQsIGUpIDogdGhpcy5Ycy5xcyh0LCBzKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLnRpKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIChrZShlKSB8fCBNZShlKSkgJiYgdGhpcy5laShlLmxpbWl0VHlwZSwgciwgcywgbikgPyB0aGlzLlpzKHQsIGUpIDogKGsoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBPKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCBuLnRvU3RyaW5nKCksIEtlKGUpKSwgXG4gICAgICAgICAgICB0aGlzLlhzLktzKHQsIGUsIG9lKG4sIC0xKSkubmV4dCgodCA9PiAoXG4gICAgICAgICAgICAvLyBXZSBtZXJnZSBgcHJldmlvdXNSZXN1bHRzYCBpbnRvIGB1cGRhdGVSZXN1bHRzYCwgc2luY2VcbiAgICAgICAgICAgIC8vIGB1cGRhdGVSZXN1bHRzYCBpcyBhbHJlYWR5IGEgRG9jdW1lbnRNYXAuIElmIGEgZG9jdW1lbnQgaXNcbiAgICAgICAgICAgIC8vIGNvbnRhaW5lZCBpbiBib3RoIGxpc3RzLCB0aGVuIGl0cyBjb250ZW50cyBhcmUgdGhlIHNhbWUuXG4gICAgICAgICAgICByLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLmtleSwgZSk7XG4gICAgICAgICAgICB9KSksIHQpKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgdGkodCwgZSkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgJG4oV2UodCkpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcykgPT4ge1xuICAgICAgICAgICAgUWUodCwgcykgJiYgKG4gPSBuLmFkZChzKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNvcnRlZFByZXZpb3VzUmVzdWx0cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSB3aGVuIGl0XG4gICAgICogd2FzIGxhc3Qgc3luY2hyb25pemVkLCBzb3J0ZWQgYnkgdGhlIHF1ZXJ5J3MgY29tcGFyYXRvci5cbiAgICAgKiBAcGFyYW0gcmVtb3RlS2V5cyAtIFRoZSBkb2N1bWVudCBrZXlzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgYXQgdGhlIGxhc3RcbiAgICAgKiBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gbGltYm9GcmVlU25hcHNob3RWZXJzaW9uIC0gVGhlIHZlcnNpb24gb2YgdGhlIHNuYXBzaG90IHdoZW4gdGhlXG4gICAgICogcXVlcnkgd2FzIGxhc3Qgc3luY2hyb25pemVkLlxuICAgICAqLyAgICBlaSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRoZSBxdWVyeSBuZWVkcyB0byBiZSByZWZpbGxlZCBpZiBhIHByZXZpb3VzbHkgbWF0Y2hpbmcgZG9jdW1lbnQgbm9cbiAgICAgICAgLy8gbG9uZ2VyIG1hdGNoZXMuXG4gICAgICAgIGlmIChuLnNpemUgIT09IGUuc2l6ZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBGaXJzdCAqLyA9PT0gdCA/IGUubGFzdCgpIDogZS5maXJzdCgpO1xuICAgICAgICByZXR1cm4gISFpICYmIChpLmhhc1BlbmRpbmdXcml0ZXMgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhzKSA+IDApO1xuICAgIH1cbiAgICBacyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBrKCkgPD0gTG9nTGV2ZWwuREVCVUcgJiYgTyhcIlF1ZXJ5RW5naW5lXCIsIFwiVXNpbmcgZnVsbCBjb2xsZWN0aW9uIHNjYW4gdG8gZXhlY3V0ZSBxdWVyeTpcIiwgS2UoZSkpLCBcbiAgICAgICAgdGhpcy5Ycy5Lcyh0LCBlLCBhZS5taW4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbXBsZW1lbnRzIGBMb2NhbFN0b3JlYCBpbnRlcmZhY2UuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi9cbmNsYXNzIFhyIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgdGhpcy5uaSA9IGUsIHRoaXMuTSA9IHMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogTWFwcyBhIHRhcmdldElEIHRvIGRhdGEgYWJvdXQgaXRzIHRhcmdldC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBXZSBhcmUgdXNpbmcgYW4gaW1tdXRhYmxlIGRhdGEgc3RydWN0dXJlIG9uIFdlYiB0byBtYWtlIHJlLXJ1bnNcbiAgICAgICAgICogb2YgYGFwcGx5UmVtb3RlRXZlbnQoKWAgaWRlbXBvdGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2kgPSBuZXcgTW4ocnQpLCBcbiAgICAgICAgLyoqIE1hcHMgYSB0YXJnZXQgdG8gaXRzIHRhcmdldElELiAqL1xuICAgICAgICAvLyBUT0RPKHd1YW5keSk6IEV2YWx1YXRlIGlmIFRhcmdldElkIGNhbiBiZSBwYXJ0IG9mIFRhcmdldC5cbiAgICAgICAgdGhpcy5paSA9IG5ldyBrbigodCA9PiBmZSh0KSksIF9lKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHBlciBjb2xsZWN0aW9uIGdyb3VwIGluZGV4IG9mIHRoZSBsYXN0IHJlYWQgdGltZSBwcm9jZXNzZWQgYnlcbiAgICAgICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmkgPSBuZXcgTWFwLCB0aGlzLm9pID0gdC5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCksIHRoaXMubHMgPSB0LmdldFRhcmdldENhY2hlKCksIFxuICAgICAgICB0aGlzLmRzID0gdC5nZXRCdW5kbGVDYWNoZSgpLCB0aGlzLnVpKG4pO1xuICAgIH1cbiAgICB1aSh0KSB7XG4gICAgICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBBZGQgc3BlYyB0ZXN0cyB0aGF0IHRlc3QgdGhlc2UgY29tcG9uZW50cyBjaGFuZ2UgYWZ0ZXIgYVxuICAgICAgICAvLyB1c2VyIGNoYW5nZVxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKHQpLCB0aGlzLiRzID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKHQsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgXG4gICAgICAgIHRoaXMuYWkgPSBuZXcgSHIodGhpcy5vaSwgdGhpcy4kcywgdGhpcy5pbmRleE1hbmFnZXIpLCB0aGlzLm9pLnNldEluZGV4TWFuYWdlcih0aGlzLmluZGV4TWFuYWdlciksIFxuICAgICAgICB0aGlzLm5pLllzKHRoaXMuYWkpO1xuICAgIH1cbiAgICBjb2xsZWN0R2FyYmFnZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29sbGVjdCBnYXJiYWdlXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKGUgPT4gdC5jb2xsZWN0KGUsIHRoaXMuc2kpKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBacihcbi8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbnQsIGUsIG4sIHMpIHtcbiAgICByZXR1cm4gbmV3IFhyKHQsIGUsIG4sIHMpO1xufVxuXG4vKipcbiAqIFRlbGxzIHRoZSBMb2NhbFN0b3JlIHRoYXQgdGhlIGN1cnJlbnRseSBhdXRoZW50aWNhdGVkIHVzZXIgaGFzIGNoYW5nZWQuXG4gKlxuICogSW4gcmVzcG9uc2UgdGhlIGxvY2FsIHN0b3JlIHN3aXRjaGVzIHRoZSBtdXRhdGlvbiBxdWV1ZSB0byB0aGUgbmV3IHVzZXIgYW5kXG4gKiByZXR1cm5zIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBBbmRyb2lkIGFuZCBpT1Mgb25seSByZXR1cm4gdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSB0aGVcbi8vIGNoYW5nZS5cbmFzeW5jIGZ1bmN0aW9uIHRvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICByZXR1cm4gYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkhhbmRsZSB1c2VyIGNoYW5nZVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHtcbiAgICAgICAgLy8gU3dhcCBvdXQgdGhlIG11dGF0aW9uIHF1ZXVlLCBncmFiYmluZyB0aGUgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzXG4gICAgICAgIC8vIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gbi4kcy5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkubmV4dCgoaSA9PiAocyA9IGksIG4udWkoZSksIG4uJHMuZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IFtdLCByID0gW107XG4gICAgICAgICAgICAvLyBVbmlvbiB0aGUgb2xkL25ldyBjaGFuZ2VkIGtleXMuXG4gICAgICAgICAgICBsZXQgbyA9IHpuKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGkucHVzaCh0LmJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lm11dGF0aW9ucykgbyA9IG8uYWRkKGUua2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgci5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBzZXQgb2YgYWxsIChwb3RlbnRpYWxseSkgY2hhbmdlZCBkb2N1bWVudHMgYW5kIHRoZSBsaXN0XG4gICAgICAgICAgICAvLyBvZiBtdXRhdGlvbiBiYXRjaCBJRHMgdGhhdCB3ZXJlIGFmZmVjdGVkIGJ5IGNoYW5nZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFpLnFzKHQsIG8pLm5leHQoKHQgPT4gKHtcbiAgICAgICAgICAgICAgICBjaTogdCxcbiAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IGksXG4gICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkczogclxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH0pKTtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIGVvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLm9pLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IHdpLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBVKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGNvbW1pdFZlcnNpb24gYXMgdGhlIHJlYWRUaW1lIHJhdGhlciB0aGFuIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCdzIHVwZGF0ZVRpbWUgc2luY2UgdGhlIHVwZGF0ZVRpbWUgaXMgbm90IGFkdmFuY2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB1cGRhdGVzIHRoYXQgZG8gbm90IG1vZGlmeSB0aGUgdW5kZXJseWluZyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgZS5zZXRSZWFkVGltZShuLmNvbW1pdFZlcnNpb24pLCBzLmFkZEVudHJ5KGUpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBvLm5leHQoKCgpID0+IHQuJHMucmVtb3ZlTXV0YXRpb25CYXRjaChlLCBpKSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgYSBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4sIHQsIGUsIGkpLm5leHQoKCgpID0+IGkuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLiRzLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5haS5xcyh0LCBzKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIG11dGF0aW9ucyBmcm9tIHRoZSBNdXRhdGlvblF1ZXVlIGZvciB0aGUgc3BlY2lmaWVkIGJhdGNoO1xuICogTG9jYWxEb2N1bWVudHMgd2lsbCBiZSByZWNhbGN1bGF0ZWQuXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyBtb2RpZmllZCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbGFzdCBjb25zaXN0ZW50IHNuYXBzaG90IHByb2Nlc3NlZCAodXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG9cbiAqIGRldGVybWluZSB3aGV0aGVyIHRvIGJ1ZmZlciBpbmNvbWluZyBzbmFwc2hvdHMgZnJvbSB0aGUgYmFja2VuZCkuXG4gKi9cbmZ1bmN0aW9uIG5vKHQpIHtcbiAgICBjb25zdCBlID0gRyh0KTtcbiAgICByZXR1cm4gZS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBsYXN0IHJlbW90ZSBzbmFwc2hvdCB2ZXJzaW9uXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gZS5scy5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpKSk7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKSBkb2N1bWVudHMuIFdlIGFzc3VtZSB0aGF0IHRoZSByZW1vdGVcbiAqIGV2ZW50IHJlZmxlY3RzIGFueSB3cml0ZSBiYXRjaGVzIHRoYXQgaGF2ZSBiZWVuIGFja25vd2xlZGdlZCBvciByZWplY3RlZFxuICogKGkuZS4gd2UgZG8gbm90IHJlLWFwcGx5IGxvY2FsIG11dGF0aW9ucyB0byB1cGRhdGVzIGZyb20gdGhpcyBldmVudCkuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqLyBmdW5jdGlvbiBzbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCksIHMgPSBlLnNuYXBzaG90VmVyc2lvbjtcbiAgICBsZXQgaSA9IG4uc2k7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSByZW1vdGUgZXZlbnRcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBuLm9pLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gUmVzZXQgbmV3VGFyZ2V0RGF0YUJ5VGFyZ2V0TWFwIGluIGNhc2UgdGhpcyB0cmFuc2FjdGlvbiBnZXRzIHJlLXJ1bi5cbiAgICAgICAgICAgICAgICBpID0gbi5zaTtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHIsIHUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBpLmdldCh1KTtcbiAgICAgICAgICAgIGlmICghYSkgcmV0dXJuO1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgdGhlIHJlbW90ZSBrZXlzIGlmIHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlLiBUaGlzXG4gICAgICAgICAgICAvLyBlbnN1cmVzIHRoYXQgd2UgY2FuIHBlcnNpc3QgdGhlIHVwZGF0ZWQgdGFyZ2V0IGRhdGEgYWxvbmcgd2l0aFxuICAgICAgICAgICAgLy8gdGhlIHVwZGF0ZWQgYXNzaWdubWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuLmxzLnJlbW92ZU1hdGNoaW5nS2V5cyh0LCByLnJlbW92ZWREb2N1bWVudHMsIHUpLm5leHQoKCgpID0+IG4ubHMuYWRkTWF0Y2hpbmdLZXlzKHQsIHIuYWRkZWREb2N1bWVudHMsIHUpKSkpO1xuICAgICAgICAgICAgbGV0IGMgPSBhLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICBlLnRhcmdldE1pc21hdGNoZXMuaGFzKHUpID8gYyA9IGMud2l0aFJlc3VtZVRva2VuKHB0LkVNUFRZX0JZVEVfU1RSSU5HLCBjdC5taW4oKSkud2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24oY3QubWluKCkpIDogci5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkgPiAwICYmIChjID0gYy53aXRoUmVzdW1lVG9rZW4oci5yZXN1bWVUb2tlbiwgcykpLCBcbiAgICAgICAgICAgIGkgPSBpLmluc2VydCh1LCBjKSwgXG4gICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRhcmdldCBkYXRhIGlmIHRoZXJlIGFyZSB0YXJnZXQgY2hhbmdlcyAob3IgaWZcbiAgICAgICAgICAgIC8vIHN1ZmZpY2llbnQgdGltZSBoYXMgcGFzc2VkIHNpbmNlIHRoZSBsYXN0IHVwZGF0ZSkuXG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgbmV3VGFyZ2V0RGF0YSBzaG91bGQgYmUgcGVyc2lzdGVkIGR1cmluZyBhbiB1cGRhdGUgb2ZcbiAqIGFuIGFjdGl2ZSB0YXJnZXQuIFRhcmdldERhdGEgc2hvdWxkIGFsd2F5cyBiZSBwZXJzaXN0ZWQgd2hlbiBhIHRhcmdldCBpc1xuICogYmVpbmcgcmVsZWFzZWQgYW5kIHNob3VsZCBub3QgY2FsbCB0aGlzIGZ1bmN0aW9uLlxuICpcbiAqIFdoaWxlIHRoZSB0YXJnZXQgaXMgYWN0aXZlLCBUYXJnZXREYXRhIHVwZGF0ZXMgY2FuIGJlIG9taXR0ZWQgd2hlbiBub3RoaW5nXG4gKiBhYm91dCB0aGUgdGFyZ2V0IGhhcyBjaGFuZ2VkIGV4Y2VwdCBtZXRhZGF0YSBsaWtlIHRoZSByZXN1bWUgdG9rZW4gb3JcbiAqIHNuYXBzaG90IHZlcnNpb24uIE9jY2FzaW9uYWxseSBpdCdzIHdvcnRoIHRoZSBleHRyYSB3cml0ZSB0byBwcmV2ZW50IHRoZXNlXG4gKiB2YWx1ZXMgZnJvbSBnZXR0aW5nIHRvbyBzdGFsZSBhZnRlciBhIGNyYXNoLCBidXQgdGhpcyBkb2Vzbid0IGhhdmUgdG8gYmVcbiAqIHRvbyBmcmVxdWVudC5cbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgIC8vIEFsd2F5cyBwZXJzaXN0IHRhcmdldCBkYXRhIGlmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhIHJlc3VtZSB0b2tlbi5cbiAgICAgICAgICAgICAgICBpZiAoMCA9PT0gdC5yZXN1bWVUb2tlbi5hcHByb3hpbWF0ZUJ5dGVTaXplKCkpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICAvLyBEb24ndCBhbGxvdyByZXN1bWUgdG9rZW4gY2hhbmdlcyB0byBiZSBidWZmZXJlZCBpbmRlZmluaXRlbHkuIFRoaXNcbiAgICAgICAgICAgICAgICAvLyBhbGxvd3MgdXMgdG8gYmUgcmVhc29uYWJseSB1cC10by1kYXRlIGFmdGVyIGEgY3Jhc2ggYW5kIGF2b2lkcyBuZWVkaW5nXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9vcCBvdmVyIGFsbCBhY3RpdmUgcXVlcmllcyBvbiBzaHV0ZG93bi4gRXNwZWNpYWxseSBpbiB0aGUgYnJvd3NlclxuICAgICAgICAgICAgICAgIC8vIHdlIG1heSBub3QgZ2V0IHRpbWUgdG8gZG8gYW55dGhpbmcgaW50ZXJlc3Rpbmcgd2hpbGUgdGhlIGN1cnJlbnQgdGFiIGlzXG4gICAgICAgICAgICAgICAgLy8gY2xvc2luZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgLSB0LnNuYXBzaG90VmVyc2lvbi50b01pY3Jvc2Vjb25kcygpID49IDNlOCkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIE90aGVyd2lzZSBpZiB0aGUgb25seSB0aGluZyB0aGF0IGhhcyBjaGFuZ2VkIGFib3V0IGEgdGFyZ2V0IGlzIGl0cyByZXN1bWVcbiAgICAgICAgICAgICAgICAvLyB0b2tlbiBpdCdzIG5vdCB3b3J0aCBwZXJzaXN0aW5nLiBOb3RlIHRoYXQgdGhlIFJlbW90ZVN0b3JlIGtlZXBzIGFuXG4gICAgICAgICAgICAgICAgLy8gaW4tbWVtb3J5IHZpZXcgb2YgdGhlIGN1cnJlbnRseSBhY3RpdmUgdGFyZ2V0cyB3aGljaCBpbmNsdWRlcyB0aGUgY3VycmVudFxuICAgICAgICAgICAgICAgIC8vIHJlc3VtZSB0b2tlbiwgc28gc3RyZWFtIGZhaWx1cmUgb3IgdXNlciBjaGFuZ2VzIHdpbGwgc3RpbGwgdXNlIGFuXG4gICAgICAgICAgICAgICAgLy8gdXAtdG8tZGF0ZSByZXN1bWUgdG9rZW4gcmVnYXJkbGVzcyBvZiB3aGF0IHdlIGRvIGhlcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmFkZGVkRG9jdW1lbnRzLnNpemUgKyBuLm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyBuLnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIE5vdGlmaWVzIGxvY2FsIHN0b3JlIG9mIHRoZSBjaGFuZ2VkIHZpZXdzIHRvIGxvY2FsbHkgcGluIGRvY3VtZW50cy5cbiAqLyAoYSwgYywgcikgJiYgby5wdXNoKG4ubHMudXBkYXRlVGFyZ2V0RGF0YSh0LCBjKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgbGV0IHUgPSBxbigpO1xuICAgICAgICAvLyBIQUNLOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgYSBudWxsIHNuYXBzaG90IHZlcnNpb24gaXMgc28gdGhhdCB3ZVxuICAgICAgICAvLyBjYW4gc3ludGhlc2l6ZSByZW1vdGUgZXZlbnRzIHdoZW4gd2UgZ2V0IHBlcm1pc3Npb24gZGVuaWVkIGVycm9ycyB3aGlsZVxuICAgICAgICAvLyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgc3RhdGUgb2YgYSBsb2NhbGx5IGNhY2hlZCBkb2N1bWVudCB0aGF0IGlzIGluXG4gICAgICAgIC8vIGxpbWJvLlxuICAgICAgICBpZiAoZS5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaCgocyA9PiB7XG4gICAgICAgICAgICBlLnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHMpICYmIG8ucHVzaChuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgcykpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsIHRoZSByZW1vdGVcbiAgICAgICAgLy8gZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cbiAgICAgICAgby5wdXNoKGlvKHQsIHIsIGUuZG9jdW1lbnRVcGRhdGVzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHUgPSB0O1xuICAgICAgICB9KSkpLCAhcy5pc0VxdWFsKGN0Lm1pbigpKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG4ubHMuZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KS5uZXh0KChlID0+IG4ubHMuc2V0VGFyZ2V0c01ldGFkYXRhKHQsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyLCBzKSkpO1xuICAgICAgICAgICAgby5wdXNoKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aS53YWl0Rm9yKG8pLm5leHQoKCgpID0+IHIuYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBuLmFpLkdzKHQsIHUpKSkubmV4dCgoKCkgPT4gdSkpO1xuICAgIH0pKS50aGVuKCh0ID0+IChuLnNpID0gaSwgdCkpKTtcbn1cblxuLyoqXG4gKiBQb3B1bGF0ZXMgZG9jdW1lbnQgY2hhbmdlIGJ1ZmZlciB3aXRoIGRvY3VtZW50cyBmcm9tIGJhY2tlbmQgb3IgYSBidW5kbGUuXG4gKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHJlc3VsdGluZyBmcm9tIGFwcGx5aW5nIHRob3NlIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVHJhbnNhY3Rpb24gdG8gdXNlIHRvIHJlYWQgZXhpc3RpbmcgZG9jdW1lbnRzIGZyb20gc3RvcmFnZS5cbiAqIEBwYXJhbSBkb2N1bWVudEJ1ZmZlciAtIERvY3VtZW50IGJ1ZmZlciB0byBjb2xsZWN0IHRoZSByZXN1bHRlZCBjaGFuZ2VzIHRvIGJlXG4gKiAgICAgICAgYXBwbGllZCB0byBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50cyAtIERvY3VtZW50cyB0byBiZSBhcHBsaWVkLlxuICogQHBhcmFtIGdsb2JhbFZlcnNpb24gLSBBIGBTbmFwc2hvdFZlcnNpb25gIHJlcHJlc2VudGluZyB0aGUgcmVhZCB0aW1lIGlmIGFsbFxuICogICAgICAgIGRvY3VtZW50cyBoYXZlIHRoZSBzYW1lIHJlYWQgdGltZS5cbiAqIEBwYXJhbSBkb2N1bWVudFZlcnNpb25zIC0gQSBEb2N1bWVudEtleS10by1TbmFwc2hvdFZlcnNpb24gbWFwIGlmIGRvY3VtZW50c1xuICogICAgICAgIGhhdmUgdGhlaXIgb3duIHJlYWQgdGltZS5cbiAqXG4gKiBOb3RlOiB0aGlzIGZ1bmN0aW9uIHdpbGwgdXNlIGBkb2N1bWVudFZlcnNpb25zYCBpZiBpdCBpcyBkZWZpbmVkO1xuICogd2hlbiBpdCBpcyBub3QgZGVmaW5lZCwgcmVzb3J0cyB0byBgZ2xvYmFsVmVyc2lvbmAuXG4gKi8gZnVuY3Rpb24gaW8odCwgZSwgbikge1xuICAgIGxldCBzID0gem4oKTtcbiAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHMgPSBzLmFkZCh0KSkpLCBlLmdldEVudHJpZXModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgIGxldCBzID0gcW4oKTtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmdldChuKTtcbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBvcmRlciBvZiB0aGUgc3RlcHMgYmVsb3cgaXMgaW1wb3J0YW50LCBzaW5jZSB3ZSB3YW50XG4gICAgICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCByZWplY3RlZCBsaW1ibyByZXNvbHV0aW9ucyAod2hpY2ggZmFicmljYXRlXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSkgbmV2ZXIgYWRkIGRvY3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBpLmlzTm9Eb2N1bWVudCgpICYmIGkudmVyc2lvbi5pc0VxdWFsKGN0Lm1pbigpKSA/IChcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpIGFyZSB1c2VkIGluIG1hbnVmYWN0dXJlZFxuICAgICAgICAgICAgLy8gZXZlbnRzLiBXZSByZW1vdmUgdGhlc2UgZG9jdW1lbnRzIGZyb20gY2FjaGUgc2luY2Ugd2UgbG9zdFxuICAgICAgICAgICAgLy8gYWNjZXNzLlxuICAgICAgICAgICAgZS5yZW1vdmVFbnRyeShuLCBpLnJlYWRUaW1lKSwgcyA9IHMuaW5zZXJ0KG4sIGkpKSA6ICFyLmlzVmFsaWREb2N1bWVudCgpIHx8IGkudmVyc2lvbi5jb21wYXJlVG8oci52ZXJzaW9uKSA+IDAgfHwgMCA9PT0gaS52ZXJzaW9uLmNvbXBhcmVUbyhyLnZlcnNpb24pICYmIHIuaGFzUGVuZGluZ1dyaXRlcyA/IChlLmFkZEVudHJ5KGkpLCBcbiAgICAgICAgICAgIHMgPSBzLmluc2VydChuLCBpKSkgOiBPKFwiTG9jYWxTdG9yZVwiLCBcIklnbm9yaW5nIG91dGRhdGVkIHdhdGNoIHVwZGF0ZSBmb3IgXCIsIG4sIFwiLiBDdXJyZW50IHZlcnNpb246XCIsIHIudmVyc2lvbiwgXCIgV2F0Y2ggdmVyc2lvbjpcIiwgaS52ZXJzaW9uKTtcbiAgICAgICAgfSkpLCBzO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBybyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4uJHMuZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQodCwgZSkpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGN1cnJlbnQgdmFsdWUgb2YgYSBEb2N1bWVudCB3aXRoIGEgZ2l2ZW4ga2V5IG9yIG51bGwgaWYgbm90XG4gKiBmb3VuZCAtIHVzZWQgZm9yIHRlc3RpbmcuXG4gKi9cbi8qKlxuICogQXNzaWducyB0aGUgZ2l2ZW4gdGFyZ2V0IGFuIGludGVybmFsIElEIHNvIHRoYXQgaXRzIHJlc3VsdHMgY2FuIGJlIHBpbm5lZCBzb1xuICogdGhleSBkb24ndCBnZXQgR0MnZC4gQSB0YXJnZXQgbXVzdCBiZSBhbGxvY2F0ZWQgaW4gdGhlIGxvY2FsIHN0b3JlIGJlZm9yZVxuICogdGhlIHN0b3JlIGNhbiBiZSB1c2VkIHRvIG1hbmFnZSBpdHMgdmlldy5cbiAqXG4gKiBBbGxvY2F0aW5nIGFuIGFscmVhZHkgYWxsb2NhdGVkIGBUYXJnZXRgIHdpbGwgcmV0dXJuIHRoZSBleGlzdGluZyBgVGFyZ2V0RGF0YWBcbiAqIGZvciB0aGF0IGBUYXJnZXRgLlxuICovXG5mdW5jdGlvbiBvbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBbGxvY2F0ZSB0YXJnZXRcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4ubHMuZ2V0VGFyZ2V0RGF0YSh0LCBlKS5uZXh0KChpID0+IGkgPyAoXG4gICAgICAgIC8vIFRoaXMgdGFyZ2V0IGhhcyBiZWVuIGxpc3RlbmVkIHRvIHByZXZpb3VzbHksIHNvIHJldXNlIHRoZVxuICAgICAgICAvLyBwcmV2aW91cyB0YXJnZXRJRC5cbiAgICAgICAgLy8gVE9ETyhtY2cpOiBmcmVzaGVuIGxhc3QgYWNjZXNzZWQgZGF0ZT9cbiAgICAgICAgcyA9IGksIHdpLnJlc29sdmUocykpIDogbi5scy5hbGxvY2F0ZVRhcmdldElkKHQpLm5leHQoKGkgPT4gKHMgPSBuZXcgRGkoZSwgaSwgMCAvKiBMaXN0ZW4gKi8gLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciksIFxuICAgICAgICBuLmxzLmFkZFRhcmdldERhdGEodCwgcykubmV4dCgoKCkgPT4gcykpKSkpKSk7XG4gICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAvLyBJZiBNdWx0aS1UYWIgaXMgZW5hYmxlZCwgdGhlIGV4aXN0aW5nIHRhcmdldCBkYXRhIG1heSBiZSBuZXdlciB0aGFuXG4gICAgICAgIC8vIHRoZSBpbi1tZW1vcnkgZGF0YVxuICAgICAgICBjb25zdCBzID0gbi5zaS5nZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHJldHVybiAobnVsbCA9PT0gcyB8fCB0LnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocy5zbmFwc2hvdFZlcnNpb24pID4gMCkgJiYgKG4uc2kgPSBuLnNpLmluc2VydCh0LnRhcmdldElkLCB0KSwgXG4gICAgICAgIG4uaWkuc2V0KGUsIHQudGFyZ2V0SWQpKSwgdDtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBhcyBzZWVuIGJ5IHRoZSBMb2NhbFN0b3JlLCBpbmNsdWRpbmcgdXBkYXRlcyB0aGF0IG1heVxuICogaGF2ZSBub3QgeWV0IGJlZW4gcGVyc2lzdGVkIHRvIHRoZSBUYXJnZXRDYWNoZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbi8qKlxuICogVW5waW5zIGFsbCB0aGUgZG9jdW1lbnRzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZlxuICogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBzZXQgdG8gZmFsc2UgYW5kIEVhZ2VyIEdDIGVuYWJsZWQsIHRoZSBtZXRob2RcbiAqIGRpcmVjdGx5IHJlbW92ZXMgdGhlIGFzc29jaWF0ZWQgdGFyZ2V0IGRhdGEgZnJvbSB0aGUgdGFyZ2V0IGNhY2hlLlxuICpcbiAqIFJlbGVhc2luZyBhIG5vbi1leGlzdGluZyBgVGFyZ2V0YCBpcyBhIG5vLW9wLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IGBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YWAgaXMgbXVsdGktdGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiB1byh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEcodCksIGkgPSBzLnNpLmdldChlKSwgciA9IG4gPyBcInJlYWR3cml0ZVwiIDogXCJyZWFkd3JpdGUtcHJpbWFyeVwiO1xuICAgIHRyeSB7XG4gICAgICAgIG4gfHwgYXdhaXQgcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlbGVhc2UgdGFyZ2V0XCIsIHIsICh0ID0+IHMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlVGFyZ2V0KHQsIGkpKSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBpZiAoIUlpKHQpKSB0aHJvdyB0O1xuICAgICAgICAvLyBBbGwgYHJlbGVhc2VUYXJnZXRgIGRvZXMgaXMgcmVjb3JkIHRoZSBmaW5hbCBtZXRhZGF0YSBzdGF0ZSBmb3IgdGhlXG4gICAgICAgIC8vIHRhcmdldCwgYnV0IHdlJ3ZlIGJlZW4gcmVjb3JkaW5nIHRoaXMgcGVyaW9kaWNhbGx5IGR1cmluZyB0YXJnZXRcbiAgICAgICAgLy8gYWN0aXZpdHkuIElmIHdlIGxvc2UgdGhpcyB3cml0ZSB0aGlzIGNvdWxkIGNhdXNlIGEgdmVyeSBzbGlnaHRcbiAgICAgICAgLy8gZGlmZmVyZW5jZSBpbiB0aGUgb3JkZXIgb2YgdGFyZ2V0IGRlbGV0aW9uIGR1cmluZyBHQywgYnV0IHdlXG4gICAgICAgIC8vIGRvbid0IGRlZmluZSBleGFjdCBMUlUgc2VtYW50aWNzIHNvIHRoaXMgaXMgYWNjZXB0YWJsZS5cbiAgICAgICAgTyhcIkxvY2FsU3RvcmVcIiwgYEZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVycyBmb3IgdGFyZ2V0ICR7ZX06ICR7dH1gKTtcbiAgICB9XG4gICAgcy5zaSA9IHMuc2kucmVtb3ZlKGUpLCBzLmlpLmRlbGV0ZShpLnRhcmdldCk7XG59XG5cbi8qKlxuICogUnVucyB0aGUgc3BlY2lmaWVkIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIGFuZCByZXR1cm5zIHRoZSByZXN1bHRzLFxuICogcG90ZW50aWFsbHkgdGFraW5nIGFkdmFudGFnZSBvZiBxdWVyeSBkYXRhIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyAoc3VjaFxuICogYXMgdGhlIHNldCBvZiByZW1vdGUga2V5cykuXG4gKlxuICogQHBhcmFtIHVzZVByZXZpb3VzUmVzdWx0cyAtIFdoZXRoZXIgcmVzdWx0cyBmcm9tIHByZXZpb3VzIGV4ZWN1dGlvbnMgY2FuXG4gKiBiZSB1c2VkIHRvIG9wdGltaXplIHRoaXMgcXVlcnkgZXhlY3V0aW9uLlxuICovIGZ1bmN0aW9uIGFvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gRyh0KTtcbiAgICBsZXQgaSA9IGN0Lm1pbigpLCByID0gem4oKTtcbiAgICByZXR1cm4gcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkV4ZWN1dGUgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBHKHQpLCBpID0gcy5paS5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IGkgPyB3aS5yZXNvbHZlKHMuc2kuZ2V0KGkpKSA6IHMubHMuZ2V0VGFyZ2V0RGF0YShlLCBuKTtcbiAgICB9KHMsIHQsIExlKGUpKS5uZXh0KChlID0+IHtcbiAgICAgICAgaWYgKGUpIHJldHVybiBpID0gZS5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCBzLmxzLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gcy5uaS5Lcyh0LCBlLCBuID8gaSA6IGN0Lm1pbigpLCBuID8gciA6IHpuKCkpKSkubmV4dCgodCA9PiAobG8ocywgamUoZSksIHQpLCBcbiAgICB7XG4gICAgICAgIGRvY3VtZW50czogdCxcbiAgICAgICAgaGk6IHJcbiAgICB9KSkpKSk7XG59XG5cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBjbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCksIHMgPSBHKG4ubHMpLCBpID0gbi5zaS5nZXQoZSk7XG4gICAgcmV0dXJuIGkgPyBQcm9taXNlLnJlc29sdmUoaS50YXJnZXQpIDogbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCB0YXJnZXQgZGF0YVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuRXQodCwgZSkubmV4dCgodCA9PiB0ID8gdC50YXJnZXQgOiBudWxsKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgaGF2ZSBiZWVuIHVwZGF0ZWQgc2luY2UgdGhlIGxhc3QgY2FsbC5cbiAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIHJldHVybnMgdGhlIHNldCBvZiBjaGFuZ2VzIHNpbmNlIGNsaWVudFxuICogaW5pdGlhbGl6YXRpb24uIEZ1cnRoZXIgaW52b2NhdGlvbnMgd2lsbCByZXR1cm4gZG9jdW1lbnQgdGhhdCBoYXZlIGNoYW5nZWRcbiAqIHNpbmNlIHRoZSBwcmlvciBjYWxsLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gaG8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gbi5yaS5nZXQoZSkgfHwgY3QubWluKCk7XG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IG1heGltdW0gcmVhZCB0aW1lIGZvciB0aGUgY29sbGVjdGlvbi4gVGhpcyBzaG91bGQgYWx3YXlzXG4gICAgLy8gZXhpc3QsIGJ1dCB0byByZWR1Y2UgdGhlIGNoYW5jZSBmb3IgcmVncmVzc2lvbnMgd2UgZGVmYXVsdCB0b1xuICAgIC8vIFNuYXBzaG90VmVyc2lvbi5NaW4oKVxuICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBDb25zaWRlciByZW1vdmluZyB0aGUgZGVmYXVsdCB2YWx1ZS5cbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV3IGRvY3VtZW50IGNoYW5nZXNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLm9pLmdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgb2UocywgLTEpLCBcbiAgICAvKiBsaW1pdD0gKi8gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpKSkudGhlbigodCA9PiAobG8obiwgZSwgdCksIHQpKSk7XG59XG5cbi8qKiBTZXRzIHRoZSBjb2xsZWN0aW9uIGdyb3VwJ3MgbWF4aW11bSByZWFkIHRpbWUgZnJvbSB0aGUgZ2l2ZW4gZG9jdW1lbnRzLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIGxvKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IGN0Lm1pbigpO1xuICAgIG4uZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgZS5yZWFkVGltZS5jb21wYXJlVG8ocykgPiAwICYmIChzID0gZS5yZWFkVGltZSk7XG4gICAgfSkpLCB0LnJpLnNldChlLCBzKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHRhcmdldCB1c2luZyB0aGUgZ2l2ZW4gYnVuZGxlIG5hbWUsIHdoaWNoIHdpbGwgYmUgdXNlZCB0b1xuICogaG9sZCB0aGUga2V5cyBvZiBhbGwgZG9jdW1lbnRzIGZyb20gdGhlIGJ1bmRsZSBpbiBxdWVyeS1kb2N1bWVudCBtYXBwaW5ncy5cbiAqIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBsb2FkZWQgZG9jdW1lbnRzIGRvIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWRcbiAqIHJpZ2h0IGF3YXkuXG4gKi9cbi8qKlxuICogQXBwbGllcyB0aGUgZG9jdW1lbnRzIGZyb20gYSBidW5kbGUgdG8gdGhlIFwiZ3JvdW5kLXN0YXRlXCIgKHJlbW90ZSlcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovXG5hc3luYyBmdW5jdGlvbiBmbyh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IEcodCk7XG4gICAgbGV0IHIgPSB6bigpLCBvID0gcW4oKTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICBjb25zdCBuID0gZS5saSh0Lm1ldGFkYXRhLm5hbWUpO1xuICAgICAgICB0LmRvY3VtZW50ICYmIChyID0gci5hZGQobikpO1xuICAgICAgICBjb25zdCBzID0gZS5maSh0KTtcbiAgICAgICAgcy5zZXRSZWFkVGltZShlLmRpKHQubWV0YWRhdGEucmVhZFRpbWUpKSwgbyA9IG8uaW5zZXJ0KG4sIHMpO1xuICAgIH1cbiAgICBjb25zdCB1ID0gaS5vaS5uZXdDaGFuZ2VCdWZmZXIoe1xuICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgIH0pLCBhID0gYXdhaXQgb28oaSwgZnVuY3Rpb24odCkge1xuICAgICAgICAvLyBJdCBpcyBPSyB0aGF0IHRoZSBwYXRoIHVzZWQgZm9yIHRoZSBxdWVyeSBpcyBub3QgdmFsaWQsIGJlY2F1c2UgdGhpcyB3aWxsXG4gICAgICAgIC8vIG5vdCBiZSByZWFkIGFuZCBxdWVyaWVkLlxuICAgICAgICByZXR1cm4gTGUoTmUoX3QuZnJvbVN0cmluZyhgX19idW5kbGVfXy9kb2NzLyR7dH1gKSkpO1xuICAgIH0ocykpO1xuICAgIC8vIEFsbG9jYXRlcyBhIHRhcmdldCB0byBob2xkIGFsbCBkb2N1bWVudCBrZXlzIGZyb20gdGhlIGJ1bmRsZSwgc3VjaCB0aGF0XG4gICAgLy8gdGhleSB3aWxsIG5vdCBnZXQgZ2FyYmFnZSBjb2xsZWN0ZWQgcmlnaHQgYXdheS5cbiAgICAgICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJBcHBseSBidW5kbGUgZG9jdW1lbnRzXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IGlvKHQsIHUsIG8pLm5leHQoKGUgPT4gKHUuYXBwbHkodCksIFxuICAgIGUpKSkubmV4dCgoZSA9PiBpLmxzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGEudGFyZ2V0SWQpLm5leHQoKCgpID0+IGkubHMuYWRkTWF0Y2hpbmdLZXlzKHQsIHIsIGEudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5haS5Hcyh0LCBlKSkpLm5leHQoKCgpID0+IGUpKSkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBib29sZWFuIHRvIGluZGljYXRlIGlmIHRoZSBnaXZlbiBidW5kbGUgaGFzIGFscmVhZHlcbiAqIGJlZW4gbG9hZGVkIGFuZCB0aGUgY3JlYXRlIHRpbWUgaXMgbmV3ZXIgdGhhbiB0aGUgY3VycmVudCBsb2FkaW5nIGJ1bmRsZS5cbiAqL1xuLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYE5hbWVkUXVlcnlgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovXG5hc3luYyBmdW5jdGlvbiBfbyh0LCBlLCBuID0gem4oKSkge1xuICAgIC8vIEFsbG9jYXRlIGEgdGFyZ2V0IGZvciB0aGUgbmFtZWQgcXVlcnkgc3VjaCB0aGF0IGl0IGNhbiBiZSByZXN1bWVkXG4gICAgLy8gZnJvbSBhc3NvY2lhdGVkIHJlYWQgdGltZSBpZiB1c2VycyB1c2UgaXQgdG8gbGlzdGVuLlxuICAgIC8vIE5PVEU6IHRoaXMgYWxzbyBtZWFucyBpZiBubyBjb3JyZXNwb25kaW5nIHRhcmdldCBleGlzdHMsIHRoZSBuZXcgdGFyZ2V0XG4gICAgLy8gd2lsbCByZW1haW4gYWN0aXZlIGFuZCB3aWxsIG5vdCBnZXQgY29sbGVjdGVkLCB1bmxlc3MgdXNlcnMgaGFwcGVuIHRvXG4gICAgLy8gdW5saXN0ZW4gdGhlIHF1ZXJ5IHNvbWVob3cuXG4gICAgY29uc3QgcyA9IGF3YWl0IG9vKHQsIExlKExpKGUuYnVuZGxlZFF1ZXJ5KSkpLCBpID0gRyh0KTtcbiAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlNhdmUgbmFtZWQgcXVlcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCByID0gZnMoZS5yZWFkVGltZSk7XG4gICAgICAgIC8vIFNpbXBseSBzYXZlIHRoZSBxdWVyeSBpdHNlbGYgaWYgaXQgaXMgb2xkZXIgdGhhbiB3aGF0IHRoZSBTREsgYWxyZWFkeVxuICAgICAgICAvLyBoYXMuXG4gICAgICAgICAgICAgICAgaWYgKHMuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhyKSA+PSAwKSByZXR1cm4gaS5kcy5zYXZlTmFtZWRRdWVyeSh0LCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHRhcmdldCBkYXRhIGJlY2F1c2UgdGhlIHF1ZXJ5IGZyb20gdGhlIGJ1bmRsZSBpcyBuZXdlci5cbiAgICAgICAgICAgICAgICBjb25zdCBvID0gcy53aXRoUmVzdW1lVG9rZW4ocHQuRU1QVFlfQllURV9TVFJJTkcsIHIpO1xuICAgICAgICByZXR1cm4gaS5zaSA9IGkuc2kuaW5zZXJ0KG8udGFyZ2V0SWQsIG8pLCBpLmxzLnVwZGF0ZVRhcmdldERhdGEodCwgbykubmV4dCgoKCkgPT4gaS5scy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkubHMuYWRkTWF0Y2hpbmdLZXlzKHQsIG4sIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5kcy5zYXZlTmFtZWRRdWVyeSh0LCBlKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3Mgd28ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5NID0gdCwgdGhpcy5faSA9IG5ldyBNYXAsIHRoaXMud2kgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMuX2kuZ2V0KGUpKTtcbiAgICB9XG4gICAgc2F2ZUJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgLyoqIERlY29kZXMgYSBCdW5kbGVNZXRhZGF0YSBwcm90byBpbnRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2kuc2V0KGUuaWQsIHtcbiAgICAgICAgICAgIGlkOiAobiA9IGUpLmlkLFxuICAgICAgICAgICAgdmVyc2lvbjogbi52ZXJzaW9uLFxuICAgICAgICAgICAgY3JlYXRlVGltZTogZnMobi5jcmVhdGVUaW1lKVxuICAgICAgICB9KSwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXROYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy53aS5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlTmFtZWRRdWVyeSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpLnNldChlLm5hbWUsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBMaSh0LmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IGZzKHQucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KGUpKSwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW4tbWVtb3J5IGltcGxlbWVudGF0aW9uIG9mIERvY3VtZW50T3ZlcmxheUNhY2hlLlxuICovIGNsYXNzIG1vIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBtYXAgc29ydGVkIGJ5IERvY3VtZW50S2V5LCB3aG9zZSB2YWx1ZSBpcyBhIHBhaXIgb2YgdGhlIGxhcmdlc3QgYmF0Y2ggaWRcbiAgICAgICAgLy8gZm9yIHRoZSBvdmVybGF5IGFuZCB0aGUgb3ZlcmxheSBpdHNlbGYuXG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSBuZXcgTW4oeHQuY29tcGFyYXRvciksIHRoaXMubWkgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy5vdmVybGF5cy5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlT3ZlcmxheXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5YdCh0LCBlLCBzKTtcbiAgICAgICAgfSkpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLm1pLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gcyAmJiAocy5mb3JFYWNoKCh0ID0+IHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLnJlbW92ZSh0KSkpLCBcbiAgICAgICAgdGhpcy5taS5kZWxldGUobikpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBRbigpLCBpID0gZS5sZW5ndGggKyAxLCByID0gbmV3IHh0KGUuY2hpbGQoXCJcIikpLCBvID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvckZyb20ocik7XG4gICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBvLmdldE5leHQoKS52YWx1ZSwgciA9IHQuZ2V0S2V5KCk7XG4gICAgICAgICAgICBpZiAoIWUuaXNQcmVmaXhPZihyLnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIC8vIERvY3VtZW50cyBmcm9tIHN1Yi1jb2xsZWN0aW9uc1xuICAgICAgICAgICAgICAgICAgICAgICAgci5wYXRoLmxlbmd0aCA9PT0gaSAmJiAodC5sYXJnZXN0QmF0Y2hJZCA+IG4gJiYgcy5zZXQodC5nZXRLZXkoKSwgdCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHMpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gbmV3IE1uKCgodCwgZSkgPT4gdCAtIGUpKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHIuZ2V0TmV4dCgpLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHQuZ2V0S2V5KCkuZ2V0Q29sbGVjdGlvbkdyb3VwKCkgPT09IGUgJiYgdC5sYXJnZXN0QmF0Y2hJZCA+IG4pIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IGkuZ2V0KHQubGFyZ2VzdEJhdGNoSWQpO1xuICAgICAgICAgICAgICAgIG51bGwgPT09IGUgJiYgKGUgPSBRbigpLCBpID0gaS5pbnNlcnQodC5sYXJnZXN0QmF0Y2hJZCwgZSkpLCBlLnNldCh0LmdldEtleSgpLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBvID0gUW4oKSwgdSA9IGkuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7dS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKHUuZ2V0TmV4dCgpLnZhbHVlLmZvckVhY2goKCh0LCBlKSA9PiBvLnNldCh0LCBlKSkpLCBvLnNpemUoKSA+PSBzKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShvKTtcbiAgICB9XG4gICAgWHQodCwgZSwgbikge1xuICAgICAgICBpZiAobnVsbCA9PT0gbikgcmV0dXJuO1xuICAgICAgICAvLyBSZW1vdmUgdGhlIGFzc29jaWF0aW9uIG9mIHRoZSBvdmVybGF5IHRvIGl0cyBiYXRjaCBpZC5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdGhpcy5vdmVybGF5cy5nZXQobi5rZXkpO1xuICAgICAgICBpZiAobnVsbCAhPT0gcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMubWkuZ2V0KHMubGFyZ2VzdEJhdGNoSWQpLmRlbGV0ZShuLmtleSk7XG4gICAgICAgICAgICB0aGlzLm1pLnNldChzLmxhcmdlc3RCYXRjaElkLCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm92ZXJsYXlzID0gdGhpcy5vdmVybGF5cy5pbnNlcnQobi5rZXksIG5ldyBTaShlLCBuKSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhpcyBvdmVybGF5IHRvIHRoZSBnaXZlbiBsYXJnZXN0QmF0Y2hJZC5cbiAgICAgICAgbGV0IGkgPSB0aGlzLm1pLmdldChlKTtcbiAgICAgICAgdm9pZCAwID09PSBpICYmIChpID0gem4oKSwgdGhpcy5taS5zZXQoZSwgaSkpLCB0aGlzLm1pLnNldChlLCBpLmFkZChuLmtleSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb2xsZWN0aW9uIG9mIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBmcm9tIHNvbWUga2luZCBvZiBudW1iZXJlZCBlbnRpdHlcbiAqIChlaXRoZXIgYSB0YXJnZXQgSUQgb3IgYmF0Y2ggSUQpLiBBcyByZWZlcmVuY2VzIGFyZSBhZGRlZCB0byBvciByZW1vdmVkIGZyb21cbiAqIHRoZSBzZXQgY29ycmVzcG9uZGluZyBldmVudHMgYXJlIGVtaXR0ZWQgdG8gYSByZWdpc3RlcmVkIGdhcmJhZ2UgY29sbGVjdG9yLlxuICpcbiAqIEVhY2ggcmVmZXJlbmNlIGlzIHJlcHJlc2VudGVkIGJ5IGEgRG9jdW1lbnRSZWZlcmVuY2Ugb2JqZWN0LiBFYWNoIG9mIHRoZW1cbiAqIGNvbnRhaW5zIGVub3VnaCBpbmZvcm1hdGlvbiB0byB1bmlxdWVseSBpZGVudGlmeSB0aGUgcmVmZXJlbmNlLiBUaGV5IGFyZSBhbGxcbiAqIHN0b3JlZCBwcmltYXJpbHkgaW4gYSBzZXQgc29ydGVkIGJ5IGtleS4gQSBkb2N1bWVudCBpcyBjb25zaWRlcmVkIGdhcmJhZ2UgaWZcbiAqIHRoZXJlJ3Mgbm8gcmVmZXJlbmNlcyBpbiB0aGF0IHNldCAodGhpcyBjYW4gYmUgZWZmaWNpZW50bHkgY2hlY2tlZCB0aGFua3MgdG9cbiAqIHNvcnRpbmcgYnkga2V5KS5cbiAqXG4gKiBSZWZlcmVuY2VTZXQgYWxzbyBrZWVwcyBhIHNlY29uZGFyeSBzZXQgdGhhdCBjb250YWlucyByZWZlcmVuY2VzIHNvcnRlZCBieVxuICogSURzLiBUaGlzIG9uZSBpcyB1c2VkIHRvIGVmZmljaWVudGx5IGltcGxlbWVudCByZW1vdmFsIG9mIGFsbCByZWZlcmVuY2VzIGJ5XG4gKiBzb21lIHRhcmdldCBJRC5cbiAqLyBjbGFzcyBnbyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkga2V5LlxuICAgICAgICB0aGlzLmdpID0gbmV3ICRuKHlvLnlpKSwgXG4gICAgICAgIC8vIEEgc2V0IG9mIG91dHN0YW5kaW5nIHJlZmVyZW5jZXMgdG8gYSBkb2N1bWVudCBzb3J0ZWQgYnkgdGFyZ2V0IGlkLlxuICAgICAgICB0aGlzLnBpID0gbmV3ICRuKHlvLklpKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlIHNldCBjb250YWlucyBubyByZWZlcmVuY2VzLiAqLyAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5naS5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8qKiBBZGRzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlbiBJRC4gKi8gICAgYWRkUmVmZXJlbmNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyB5byh0LCBlKTtcbiAgICAgICAgdGhpcy5naSA9IHRoaXMuZ2kuYWRkKG4pLCB0aGlzLnBpID0gdGhpcy5waS5hZGQobik7XG4gICAgfVxuICAgIC8qKiBBZGQgcmVmZXJlbmNlcyB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5cyBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBUaSh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLmFkZFJlZmVyZW5jZSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgcmVmZXJlbmNlIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXkgZm9yIHRoZSBnaXZlblxuICAgICAqIElELlxuICAgICAqLyAgICByZW1vdmVSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICB0aGlzLkVpKG5ldyB5byh0LCBlKSk7XG4gICAgfVxuICAgIEFpKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMucmVtb3ZlUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyBhbGwgcmVmZXJlbmNlcyB3aXRoIGEgZ2l2ZW4gSUQuIENhbGxzIHJlbW92ZVJlZigpIGZvciBlYWNoIGtleVxuICAgICAqIHJlbW92ZWQuXG4gICAgICovICAgIFJpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyB4dChuZXcgX3QoW10pKSwgbiA9IG5ldyB5byhlLCB0KSwgcyA9IG5ldyB5byhlLCB0ICsgMSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuRWkodCksIGkucHVzaCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgYmkoKSB7XG4gICAgICAgIHRoaXMuZ2kuZm9yRWFjaCgodCA9PiB0aGlzLkVpKHQpKSk7XG4gICAgfVxuICAgIEVpKHQpIHtcbiAgICAgICAgdGhpcy5naSA9IHRoaXMuZ2kuZGVsZXRlKHQpLCB0aGlzLnBpID0gdGhpcy5waS5kZWxldGUodCk7XG4gICAgfVxuICAgIFBpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyB4dChuZXcgX3QoW10pKSwgbiA9IG5ldyB5byhlLCB0KSwgcyA9IG5ldyB5byhlLCB0ICsgMSk7XG4gICAgICAgIGxldCBpID0gem4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucGkuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZCh0LmtleSk7XG4gICAgICAgIH0pKSwgaTtcbiAgICB9XG4gICAgY29udGFpbnNLZXkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IHlvKHQsIDApLCBuID0gdGhpcy5naS5maXJzdEFmdGVyT3JFcXVhbChlKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IG4gJiYgdC5pc0VxdWFsKG4ua2V5KTtcbiAgICB9XG59XG5cbmNsYXNzIHlvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5WaSA9IGU7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IGtleSB0aGVuIGJ5IElEICovICAgIHN0YXRpYyB5aSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB4dC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSkgfHwgcnQodC5WaSwgZS5WaSk7XG4gICAgfVxuICAgIC8qKiBDb21wYXJlIGJ5IElEIHRoZW4gYnkga2V5ICovICAgIHN0YXRpYyBJaSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBydCh0LlZpLCBlLlZpKSB8fCB4dC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBwbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHQsIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzZXQgb2YgYWxsIG11dGF0aW9ucyB0aGF0IGhhdmUgYmVlbiBzZW50IGJ1dCBub3QgeWV0IGJlZW4gYXBwbGllZCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuJHMgPSBbXSwgXG4gICAgICAgIC8qKiBOZXh0IHZhbHVlIHRvIHVzZSB3aGVuIGFzc2lnbmluZyBzZXF1ZW50aWFsIElEcyB0byBlYWNoIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICB0aGlzLnZpID0gMSwgXG4gICAgICAgIC8qKiBBbiBvcmRlcmVkIG1hcHBpbmcgYmV0d2VlbiBkb2N1bWVudHMgYW5kIHRoZSBtdXRhdGlvbnMgYmF0Y2ggSURzLiAqL1xuICAgICAgICB0aGlzLlNpID0gbmV3ICRuKHlvLnlpKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eSh0KSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKDAgPT09IHRoaXMuJHMubGVuZ3RoKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZpO1xuICAgICAgICB0aGlzLnZpKyssIHRoaXMuJHMubGVuZ3RoID4gMCAmJiB0aGlzLiRzW3RoaXMuJHMubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgVmkoaSwgZSwgbiwgcyk7XG4gICAgICAgIHRoaXMuJHMucHVzaChyKTtcbiAgICAgICAgLy8gVHJhY2sgcmVmZXJlbmNlcyBieSBkb2N1bWVudCBrZXkgYW5kIGluZGV4IGNvbGxlY3Rpb24gcGFyZW50cy5cbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHMpIHRoaXMuU2kgPSB0aGlzLlNpLmFkZChuZXcgeW8oZS5rZXksIGkpKSwgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZS5rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShyKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMuRGkoZSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IHRoaXMuQ2kobiksIGkgPSBzIDwgMCA/IDAgOiBzO1xuICAgICAgICAvLyBUaGUgcmVxdWVzdGVkIGJhdGNoSWQgbWF5IHN0aWxsIGJlIG91dCBvZiByYW5nZSBzbyBub3JtYWxpemUgaXQgdG8gdGhlXG4gICAgICAgIC8vIHN0YXJ0IG9mIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLiRzLmxlbmd0aCA+IGkgPyB0aGlzLiRzW2ldIDogbnVsbCk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoKSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKDAgPT09IHRoaXMuJHMubGVuZ3RoID8gLTEgOiB0aGlzLnZpIC0gMSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMuJHMuc2xpY2UoKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyB5byhlLCAwKSwgcyA9IG5ldyB5byhlLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpLCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLlNpLmZvckVhY2hJblJhbmdlKFsgbiwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5EaSh0LlZpKTtcbiAgICAgICAgICAgIGkucHVzaChlKTtcbiAgICAgICAgfSkpLCB3aS5yZXNvbHZlKGkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyAkbihydCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyB5byh0LCAwKSwgcyA9IG5ldyB5byh0LCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkpO1xuICAgICAgICAgICAgdGhpcy5TaS5mb3JFYWNoSW5SYW5nZShbIGUsIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIG4gPSBuLmFkZCh0LlZpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB3aS5yZXNvbHZlKHRoaXMueGkobikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSB7XG4gICAgICAgIC8vIFVzZSB0aGUgcXVlcnkgcGF0aCBhcyBhIHByZWZpeCBmb3IgdGVzdGluZyBpZiBhIGRvY3VtZW50IG1hdGNoZXMgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICBjb25zdCBuID0gZS5wYXRoLCBzID0gbi5sZW5ndGggKyAxO1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYSBkb2N1bWVudCByZWZlcmVuY2UgZm9yIGFjdHVhbGx5IHNjYW5uaW5nIHRoZSBpbmRleC4gVW5saWtlXG4gICAgICAgIC8vIHRoZSBwcmVmaXggdGhlIGRvY3VtZW50IGtleSBpbiB0aGlzIHJlZmVyZW5jZSBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2ZcbiAgICAgICAgLy8gc2VnbWVudHMuIFRoZSBlbXB0eSBzZWdtZW50IGNhbiBiZSB1c2VkIGEgc3VmZml4IG9mIHRoZSBxdWVyeSBwYXRoXG4gICAgICAgIC8vIGJlY2F1c2UgaXQgcHJlY2VkZXMgYWxsIG90aGVyIHNlZ21lbnRzIGluIGFuIG9yZGVyZWQgdHJhdmVyc2FsLlxuICAgICAgICBsZXQgaSA9IG47XG4gICAgICAgIHh0LmlzRG9jdW1lbnRLZXkoaSkgfHwgKGkgPSBpLmNoaWxkKFwiXCIpKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyB5byhuZXcgeHQoaSksIDApO1xuICAgICAgICAvLyBGaW5kIHVuaXF1ZSBiYXRjaElEcyByZWZlcmVuY2VkIGJ5IGFsbCBkb2N1bWVudHMgcG90ZW50aWFsbHkgbWF0Y2hpbmcgdGhlXG4gICAgICAgIC8vIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGxldCBvID0gbmV3ICRuKHJ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuU2kuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmtleS5wYXRoO1xuICAgICAgICAgICAgcmV0dXJuICEhbi5pc1ByZWZpeE9mKGUpICYmIChcbiAgICAgICAgICAgIC8vIFJvd3Mgd2l0aCBkb2N1bWVudCBrZXlzIG1vcmUgdGhhbiBvbmUgc2VnbWVudCBsb25nZXIgdGhhbiB0aGUgcXVlcnlcbiAgICAgICAgICAgIC8vIHBhdGggY2FuJ3QgYmUgbWF0Y2hlcy4gRm9yIGV4YW1wbGUsIGEgcXVlcnkgb24gJ3Jvb21zJyBjYW4ndCBtYXRjaFxuICAgICAgICAgICAgLy8gdGhlIGRvY3VtZW50IC9yb29tcy9hYmMvbWVzc2FnZXMveHl4LlxuICAgICAgICAgICAgLy8gVE9ETyhtY2cpOiB3ZSdsbCBuZWVkIGEgZGlmZmVyZW50IHNjYW5uZXIgd2hlbiB3ZSBpbXBsZW1lbnRcbiAgICAgICAgICAgIC8vIGFuY2VzdG9yIHF1ZXJpZXMuXG4gICAgICAgICAgICBlLmxlbmd0aCA9PT0gcyAmJiAobyA9IG8uYWRkKHQuVmkpKSwgITApO1xuICAgICAgICB9KSwgciksIHdpLnJlc29sdmUodGhpcy54aShvKSk7XG4gICAgfVxuICAgIHhpKHQpIHtcbiAgICAgICAgLy8gQ29uc3RydWN0IGFuIGFycmF5IG9mIG1hdGNoaW5nIGJhdGNoZXMsIHNvcnRlZCBieSBiYXRjaElEIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgIC8vIG11bHRpcGxlIG11dGF0aW9ucyBhZmZlY3RpbmcgdGhlIHNhbWUgZG9jdW1lbnQga2V5IGFyZSBhcHBsaWVkIGluIG9yZGVyLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuRGkodCk7XG4gICAgICAgICAgICBudWxsICE9PSBuICYmIGUucHVzaChuKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICByZW1vdmVNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgVSgwID09PSB0aGlzLk5pKGUuYmF0Y2hJZCwgXCJyZW1vdmVkXCIpKSwgdGhpcy4kcy5zaGlmdCgpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuU2k7XG4gICAgICAgIHJldHVybiB3aS5mb3JFYWNoKGUubXV0YXRpb25zLCAocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IHlvKHMua2V5LCBlLmJhdGNoSWQpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBuLmRlbGV0ZShpKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBzLmtleSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlNpID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBkbih0KSB7XG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IHlvKGUsIDApLCBzID0gdGhpcy5TaS5maXJzdEFmdGVyT3JFcXVhbChuKTtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoZS5pc0VxdWFsKHMgJiYgcy5rZXkpKTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kcy5sZW5ndGgsIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZSBhbmQgYXNzZXJ0cyB0aGF0XG4gICAgICogdGhlIHJlc3VsdGluZyBpbmRleCBpcyB3aXRoaW4gdGhlIGJvdW5kcyBvZiB0aGUgcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmF0Y2hJZCAtIFRoZSBiYXRjaElkIHRvIHNlYXJjaCBmb3JcbiAgICAgKiBAcGFyYW0gYWN0aW9uIC0gQSBkZXNjcmlwdGlvbiBvZiB3aGF0IHRoZSBjYWxsZXIgaXMgZG9pbmcsIHBocmFzZWQgaW4gcGFzc2l2ZVxuICAgICAqIGZvcm0gKGUuZy4gXCJhY2tub3dsZWRnZWRcIiBpbiBhIHJvdXRpbmUgdGhhdCBhY2tub3dsZWRnZXMgYmF0Y2hlcykuXG4gICAgICovICAgIE5pKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2kodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZpbmRzIHRoZSBpbmRleCBvZiB0aGUgZ2l2ZW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWUuIFRoaXMgb3BlcmF0aW9uXG4gICAgICogaXMgTygxKS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBjb21wdXRlZCBpbmRleCBvZiB0aGUgYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZCwgYmFzZWQgb25cbiAgICAgKiB0aGUgc3RhdGUgb2YgdGhlIHF1ZXVlLiBOb3RlIHRoaXMgaW5kZXggY2FuIGJlIG5lZ2F0aXZlIGlmIHRoZSByZXF1ZXN0ZWRcbiAgICAgKiBiYXRjaElkIGhhcyBhbHJlYWR5IGJlZW4gcmVtdm9lZCBmcm9tIHRoZSBxdWV1ZSBvciBwYXN0IHRoZSBlbmQgb2YgdGhlXG4gICAgICogcXVldWUgaWYgdGhlIGJhdGNoSWQgaXMgbGFyZ2VyIHRoYW4gdGhlIGxhc3QgYWRkZWQgYmF0Y2guXG4gICAgICovICAgIENpKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuJHMubGVuZ3RoKSBcbiAgICAgICAgLy8gQXMgYW4gaW5kZXggdGhpcyBpcyBwYXN0IHRoZSBlbmQgb2YgdGhlIHF1ZXVlXG4gICAgICAgIHJldHVybiAwO1xuICAgICAgICAvLyBFeGFtaW5lIHRoZSBmcm9udCBvZiB0aGUgcXVldWUgdG8gZmlndXJlIG91dCB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZVxuICAgICAgICAvLyBiYXRjaElkIGFuZCBpbmRleGVzIGluIHRoZSBhcnJheS4gTm90ZSB0aGF0IHNpbmNlIHRoZSBxdWV1ZSBpcyBvcmRlcmVkXG4gICAgICAgIC8vIGJ5IGJhdGNoSWQsIGlmIHRoZSBmaXJzdCBiYXRjaCBoYXMgYSBsYXJnZXIgYmF0Y2hJZCB0aGVuIHRoZSByZXF1ZXN0ZWRcbiAgICAgICAgLy8gYmF0Y2hJZCBkb2Vzbid0IGV4aXN0IGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gdCAtIHRoaXMuJHNbMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgRGkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5DaSh0KTtcbiAgICAgICAgaWYgKGUgPCAwIHx8IGUgPj0gdGhpcy4kcy5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICByZXR1cm4gdGhpcy4kc1tlXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBtZW1vcnktb25seSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3TWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqL1xuY2xhc3MgSW8ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBzaXplciAtIFVzZWQgdG8gYXNzZXNzIHRoZSBzaXplIG9mIGEgZG9jdW1lbnQuIEZvciBlYWdlciBHQywgdGhpcyBpc1xuICAgICAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICAgICAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5raSA9IHQsIFxuICAgICAgICAvKiogVW5kZXJseWluZyBjYWNoZSBvZiBkb2N1bWVudHMgYW5kIHRoZWlyIHJlYWQgdGltZXMuICovXG4gICAgICAgIHRoaXMuZG9jcyA9IG5ldyBNbih4dC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKiBTaXplIG9mIGFsbCBjYWNoZWQgZG9jdW1lbnRzLiAqL1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIodCkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJ5IHRvIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IHRoaXMuZG9jcy5nZXQobiksIGkgPSBzID8gcy5zaXplIDogMCwgciA9IHRoaXMua2koZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3MgPSB0aGlzLmRvY3MuaW5zZXJ0KG4sIHtcbiAgICAgICAgICAgIGRvY3VtZW50OiBlLm11dGFibGVDb3B5KCksXG4gICAgICAgICAgICBzaXplOiByXG4gICAgICAgIH0pLCB0aGlzLnNpemUgKz0gciAtIGksIHRoaXMuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIG4ucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgZW50cnkgZnJvbSB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYHJlbW92ZUVudHJ5YCBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICBlICYmICh0aGlzLmRvY3MgPSB0aGlzLmRvY3MucmVtb3ZlKHQpLCB0aGlzLnNpemUgLT0gZS5zaXplKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kb2NzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUobiA/IG4uZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IHRlLm5ld0ludmFsaWREb2N1bWVudChlKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IHFuKCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgZSA/IGUuZG9jdW1lbnQubXV0YWJsZUNvcHkoKSA6IHRlLm5ld0ludmFsaWREb2N1bWVudCh0KSk7XG4gICAgICAgIH0pKSwgd2kucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb24odCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IHFuKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyB4dChlLmNoaWxkKFwiXCIpKSwgciA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20oaSk7XG4gICAgICAgIGZvciAoO3IuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IHQsIHZhbHVlOiB7ZG9jdW1lbnQ6IGl9fSA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFlLmlzUHJlZml4T2YodC5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICB0LnBhdGgubGVuZ3RoID4gZS5sZW5ndGggKyAxIHx8IChjZSh1ZShpKSwgbikgPD0gMCB8fCAocyA9IHMuaW5zZXJ0KGkua2V5LCBpLm11dGFibGVDb3B5KCkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUocyk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgSW5kZXhCYWNrZmlsbGVyIGlmIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIGlzIGVuYWJsZWQuXG4gICAgICAgIEwoKTtcbiAgICB9XG4gICAgTWkodCwgZSkge1xuICAgICAgICByZXR1cm4gd2kuZm9yRWFjaCh0aGlzLmRvY3MsICh0ID0+IGUodCkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcbiAgICAgICAgLy8gYSBzZXBhcmF0ZSBjaGFuZ2Vsb2cgYW5kIGRvZXMgbm90IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVtb3ZhbHMuXG4gICAgICAgIHJldHVybiBuZXcgVG8odGhpcyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi9cbmNsYXNzIFRvIGV4dGVuZHMga3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5xbiA9IHQ7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5pc1ZhbGlkRG9jdW1lbnQoKSA/IGUucHVzaCh0aGlzLnFuLmFkZEVudHJ5KHQsIHMpKSA6IHRoaXMucW4ucmVtb3ZlRW50cnkobik7XG4gICAgICAgIH0pKSwgd2kud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucW4uZ2V0RW50cnkodCwgZSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFuLmdldEVudHJpZXModCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBFbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLk9pID0gbmV3IGtuKCh0ID0+IGZlKHQpKSwgX2UpLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHNuYXBzaG90IHZlcnNpb24uICovXG4gICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IGN0Lm1pbigpLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBJRCBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSAwLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IHNlcXVlbmNlIG51bWJlciBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5GaSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvcmRlcmVkIGJpZGlyZWN0aW9uYWwgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIHJlbW90ZSB0YXJnZXRcbiAgICAgICAgICogSURzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kaSA9IG5ldyBnbywgdGhpcy50YXJnZXRDb3VudCA9IDAsIHRoaXMuQmkgPSBFci5tbigpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT2kuZm9yRWFjaCgoKHQsIG4pID0+IGUobikpKSwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy5GaSk7XG4gICAgfVxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0aGlzLkJpLm5leHQoKSwgd2kucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuICYmICh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuKSwgZSA+IHRoaXMuRmkgJiYgKHRoaXMuRmkgPSBlKSwgXG4gICAgICAgIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgSW4odCkge1xuICAgICAgICB0aGlzLk9pLnNldCh0LnRhcmdldCwgdCk7XG4gICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkO1xuICAgICAgICBlID4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgJiYgKHRoaXMuQmkgPSBuZXcgRXIoZSksIHRoaXMuaGlnaGVzdFRhcmdldElkID0gZSksIHQuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLkZpICYmICh0aGlzLkZpID0gdC5zZXF1ZW5jZU51bWJlcik7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5JbihlKSwgdGhpcy50YXJnZXRDb3VudCArPSAxLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5JbihlKSwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuT2kuZGVsZXRlKGUudGFyZ2V0KSwgdGhpcy4kaS5SaShlLnRhcmdldElkKSwgdGhpcy50YXJnZXRDb3VudCAtPSAxLCBcbiAgICAgICAgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLk9pLmZvckVhY2goKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBvLnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQoby50YXJnZXRJZCkgJiYgKHRoaXMuT2kuZGVsZXRlKHIpLCBpLnB1c2godGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBvLnRhcmdldElkKSksIFxuICAgICAgICAgICAgcysrKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKGkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLnRhcmdldENvdW50KTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLk9pLmdldChlKSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGkuVGkoZSwgbiksIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy4kaS5BaShlLCBuKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRpLlJpKGUpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuJGkuUGkoZSk7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMuJGkuY29udGFpbnNLZXkoZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtZW1vcnktYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBvbmx5IGluIFJBTSBhbmRcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxuICovXG5jbGFzcyBBbyB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuTGkgPSB7fSwgdGhpcy5vdmVybGF5cyA9IHt9LCB0aGlzLnRzID0gbmV3IG50KDApLCB0aGlzLmVzID0gITEsIHRoaXMuZXMgPSAhMCwgXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0KHRoaXMpLCB0aGlzLmxzID0gbmV3IEVvKHRoaXMpO1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IG5ldyByciwgdGhpcy5mcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW8odCk7XG4gICAgICAgIH0oKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5VaSh0KSkpLCB0aGlzLk0gPSBuZXcgQ2koZSksIHRoaXMuZHMgPSBuZXcgd28odGhpcy5NKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vIGR1cmFibGUgc3RhdGUgdG8gZW5zdXJlIGlzIGNsb3NlZCBvbiBzaHV0ZG93bi5cbiAgICAgICAgcmV0dXJuIHRoaXMuZXMgPSAhMSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5lcztcbiAgICB9XG4gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXROZXR3b3JrRW5hYmxlZCgpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIC8vIFdlIGRvIG5vdCBjdXJyZW50bHkgc3VwcG9ydCBpbmRpY2VzIGZvciBtZW1vcnkgcGVyc2lzdGVuY2UsIHNvIHdlIGNhblxuICAgICAgICAvLyByZXR1cm4gdGhlIHNhbWUgc2hhcmVkIGluc3RhbmNlIG9mIHRoZSBtZW1vcnkgaW5kZXggbWFuYWdlci5cbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhNYW5hZ2VyO1xuICAgIH1cbiAgICBnZXREb2N1bWVudE92ZXJsYXlDYWNoZSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5vdmVybGF5c1t0LnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBtbywgdGhpcy5vdmVybGF5c1t0LnRvS2V5KCldID0gZSksIGU7XG4gICAgfVxuICAgIGdldE11dGF0aW9uUXVldWUodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRoaXMuTGlbdC50b0tleSgpXTtcbiAgICAgICAgcmV0dXJuIG4gfHwgKG4gPSBuZXcgcG8oZSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSksIHRoaXMuTGlbdC50b0tleSgpXSA9IG4pLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubHM7XG4gICAgfVxuICAgIGdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZzO1xuICAgIH1cbiAgICBnZXRCdW5kbGVDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHM7XG4gICAgfVxuICAgIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgTyhcIk1lbW9yeVBlcnNpc3RlbmNlXCIsIFwiU3RhcnRpbmcgdHJhbnNhY3Rpb246XCIsIHQpO1xuICAgICAgICBjb25zdCBzID0gbmV3IFJvKHRoaXMudHMubmV4dCgpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucWkoKSwgbihzKS5uZXh0KCh0ID0+IHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuR2kocykubmV4dCgoKCkgPT4gdCkpKSkudG9Qcm9taXNlKCkudGhlbigodCA9PiAocy5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIEtpKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdpLm9yKE9iamVjdC52YWx1ZXModGhpcy5MaSkubWFwKChuID0+ICgpID0+IG4uY29udGFpbnNLZXkodCwgZSkpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1lbW9yeSBwZXJzaXN0ZW5jZSBpcyBub3QgYWN0dWFsbHkgdHJhbnNhY3Rpb25hbCwgYnV0IGZ1dHVyZSBpbXBsZW1lbnRhdGlvbnNcbiAqIG1heSBoYXZlIHRyYW5zYWN0aW9uLXNjb3BlZCBzdGF0ZS5cbiAqLyBjbGFzcyBSbyBleHRlbmRzIF9pIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGJvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqIFRyYWNrcyBhbGwgZG9jdW1lbnRzIHRoYXQgYXJlIGFjdGl2ZSBpbiBRdWVyeSB2aWV3cy4gKi9cbiAgICAgICAgdGhpcy5RaSA9IG5ldyBnbywgXG4gICAgICAgIC8qKiBUaGUgbGlzdCBvZiBkb2N1bWVudHMgdGhhdCBhcmUgcG90ZW50aWFsbHkgR0NlZCBhZnRlciBlYWNoIHRyYW5zYWN0aW9uLiAqL1xuICAgICAgICB0aGlzLmppID0gbnVsbDtcbiAgICB9XG4gICAgc3RhdGljIFdpKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBibyh0KTtcbiAgICB9XG4gICAgZ2V0IHppKCkge1xuICAgICAgICBpZiAodGhpcy5qaSkgcmV0dXJuIHRoaXMuamk7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWkuYWRkUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnppLmRlbGV0ZShuLnRvU3RyaW5nKCkpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFpLnJlbW92ZVJlZmVyZW5jZShuLCBlKSwgdGhpcy56aS5hZGQobi50b1N0cmluZygpKSwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBtYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnppLmFkZChlLnRvU3RyaW5nKCkpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuUWkuUmkoZS50YXJnZXRJZCkuZm9yRWFjaCgodCA9PiB0aGlzLnppLmFkZCh0LnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCk7XG4gICAgICAgIHJldHVybiBuLmdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMuemkuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4ucmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSkpO1xuICAgIH1cbiAgICBxaSgpIHtcbiAgICAgICAgdGhpcy5qaSA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIEdpKHQpIHtcbiAgICAgICAgLy8gUmVtb3ZlIG5ld2x5IG9ycGhhbmVkIGRvY3VtZW50cy5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gd2kuZm9yRWFjaCh0aGlzLnppLCAobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0geHQuZnJvbVBhdGgobik7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5IaSh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0IHx8IGUucmVtb3ZlRW50cnkocywgY3QubWluKCkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHRoaXMuamkgPSBudWxsLCBlLmFwcGx5KHQpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVMaW1ib0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSGkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0ID8gdGhpcy56aS5kZWxldGUoZS50b1N0cmluZygpKSA6IHRoaXMuemkuYWRkKGUudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVWkodCkge1xuICAgICAgICAvLyBGb3IgZWFnZXIgR0MsIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhlIGRvY3VtZW50IHNpemUsIHRoZXJlIGFyZSBubyBzaXplIHRocmVzaG9sZHMuXG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBIaSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3aS5vcihbICgpID0+IHdpLnJlc29sdmUodGhpcy5RaS5jb250YWluc0tleShlKSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKS5jb250YWluc0tleSh0LCBlKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5LaSh0LCBlKSBdKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX2NsaWVudHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGluc3RhbmNlX2tleT5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gUG8odCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX2NsaWVudHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XG5cbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XG4vLyBjb250YWluLlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIFZvKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IGBmaXJlc3RvcmVfbXV0YXRpb25zXyR7dH1fJHtufWA7XG4gICAgcmV0dXJuIGUuaXNBdXRoZW50aWNhdGVkKCkgJiYgKHMgKz0gYF8ke2UudWlkfWApLCBzO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gdm8odCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX3RhcmdldHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBTbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLnN0YXRlID0gbiwgdGhpcy5lcnJvciA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBKaSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBsZXQgaSwgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMgJiYgLTEgIT09IFsgXCJwZW5kaW5nXCIsIFwiYWNrbm93bGVkZ2VkXCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yocy5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gcy5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBzLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIHIgJiYgcy5lcnJvciAmJiAociA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLmNvZGUsIFxuICAgICAgICByICYmIChpID0gbmV3IFEocy5lcnJvci5jb2RlLCBzLmVycm9yLm1lc3NhZ2UpKSksIHIgPyBuZXcgU28odCwgZSwgcy5zdGF0ZSwgaSkgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke2V9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIFlpKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBEbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5zdGF0ZSA9IGUsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgSmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChzID0gbmV3IFEobi5lcnJvci5jb2RlLCBuLmVycm9yLm1lc3NhZ2UpKSksIGkgPyBuZXcgRG8odCwgbi5zdGF0ZSwgcykgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBZaSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cbiAqLyBjbGFzcyBDbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEppKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiBuLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5LCBpID0gSm4oKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHMgJiYgdCA8IG4uYWN0aXZlVGFyZ2V0SWRzLmxlbmd0aDsgKyt0KSBzID0gQ3Qobi5hY3RpdmVUYXJnZXRJZHNbdF0pLCBcbiAgICAgICAgaSA9IGkuYWRkKG4uYWN0aXZlVGFyZ2V0SWRzW3RdKTtcbiAgICAgICAgcmV0dXJuIHMgPyBuZXcgQ28odCwgaSkgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgY2xpZW50IGRhdGEgZm9yIGluc3RhbmNlICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgb25saW5lIHN0YXRlIGZvciBhbGwgY2xpZW50cyBwYXJ0aWNpcGF0aW5nIGluXG4gKiBtdWx0aS10YWIuIFRoZSBvbmxpbmUgc3RhdGUgaXMgb25seSB3cml0dGVuIHRvIGJ5IHRoZSBwcmltYXJ5IGNsaWVudCwgYW5kXG4gKiB1c2VkIGluIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3cy5cbiAqLyBjbGFzcyB4byB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgSmkodCkge1xuICAgICAgICBjb25zdCBlID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgLTEgIT09IFsgXCJVbmtub3duXCIsIFwiT25saW5lXCIsIFwiT2ZmbGluZVwiIF0uaW5kZXhPZihlLm9ubGluZVN0YXRlKSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLmNsaWVudElkID8gbmV3IHhvKGUuY2xpZW50SWQsIGUub25saW5lU3RhdGUpIDogKEYoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG9ubGluZSBzdGF0ZTogJHt0fWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1ldGFkYXRhIHN0YXRlIG9mIHRoZSBsb2NhbCBjbGllbnQuIFVubGlrZSBgUmVtb3RlQ2xpZW50U3RhdGVgLCB0aGlzIGNsYXNzIGlzXG4gKiBtdXRhYmxlIGFuZCBrZWVwcyB0cmFjayBvZiBhbGwgcGVuZGluZyBtdXRhdGlvbnMsIHdoaWNoIGFsbG93cyB1cyB0b1xuICogdXBkYXRlIHRoZSByYW5nZSBvZiBwZW5kaW5nIG11dGF0aW9uIGJhdGNoIElEcyBhcyBuZXcgbXV0YXRpb25zIGFyZSBhZGRlZCBvclxuICogcmVtb3ZlZC5cbiAqXG4gKiBUaGUgZGF0YSBpbiBgTG9jYWxDbGllbnRTdGF0ZWAgaXMgbm90IHJlYWQgZnJvbSBXZWJTdG9yYWdlIGFuZCBpbnN0ZWFkXG4gKiB1cGRhdGVkIHZpYSBpdHMgaW5zdGFuY2UgbWV0aG9kcy4gVGhlIHVwZGF0ZWQgc3RhdGUgY2FuIGJlIHNlcmlhbGl6ZWQgdmlhXG4gKiBgdG9XZWJTdG9yYWdlSlNPTigpYC5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbmNsYXNzIE5vIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBKbigpO1xuICAgIH1cbiAgICBYaSh0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKHQpO1xuICAgIH1cbiAgICBaaSh0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIFlpKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIGtvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gdCwgdGhpcy5KbiA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLnRyID0gcywgdGhpcy5zeW5jRW5naW5lID0gbnVsbCwgXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsLCB0aGlzLmVyID0gdGhpcy5uci5iaW5kKHRoaXMpLCBcbiAgICAgICAgdGhpcy5zciA9IG5ldyBNbihydCksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pciA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHIgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5yciA9IFBvKHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMudHIpLCBcbiAgICAgICAgdGhpcy51ciA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBjdXJyZW50IHNlcXVlbmNlIG51bWJlci4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5zciA9IHRoaXMuc3IuaW5zZXJ0KHRoaXMudHIsIG5ldyBObyksIHRoaXMuYXIgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX2NsaWVudHNfJHtyfV8oW15fXSopJGApLCBcbiAgICAgICAgdGhpcy5jciA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfbXV0YXRpb25zXyR7cn1fKFxcXFxkKykoPzpfKC4qKSk/JGApLCB0aGlzLmhyID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV90YXJnZXRzXyR7cn1fKFxcXFxkKykkYCksIFxuICAgICAgICB0aGlzLmxyID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIG9ubGluZSBzdGF0ZSBvZiB0aGUgcHJpbWFyeSB0YWIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgLy8gVGhlIHZlcnNpb24gZW5kaW5nIHdpdGggXCJ2MlwiIHN0b3JlcyB0aGUgbGlzdCBvZiBtb2RpZmllZCBjb2xsZWN0aW9uIGdyb3Vwcy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLmRyID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF92Ml8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBrZXkgcHJlZml4IGZvciB0aGUga2V5IHRoYXQgc3RvcmVzIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhbGxvY2F0ZWQuIFRoZSBrZXlcbiAgICAgICAgLy8gbG9va3MgbGlrZSAnZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl88cGVyc2lzdGVuY2VfcHJlZml4PicuXG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIGFkZGluZyB0aGUgc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgc3RhcnQoKSwgd2UgYWRkIHRoZVxuICAgICAgICAvLyBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBpbml0aWFsaXphdGlvbi4gVGhpcyBlbnN1cmVzIHRoYXQgd2UgY29sbGVjdFxuICAgICAgICAvLyBldmVudHMgYmVmb3JlIG90aGVyIGNvbXBvbmVudHMgcG9wdWxhdGUgdGhlaXIgaW5pdGlhbCBzdGF0ZSAoZHVyaW5nIHRoZWlyXG4gICAgICAgIC8vIHJlc3BlY3RpdmUgc3RhcnQoKSBjYWxscykuIE90aGVyd2lzZSwgd2UgbWlnaHQgZm9yIGV4YW1wbGUgbWlzcyBhXG4gICAgICAgIC8vIG11dGF0aW9uIHRoYXQgaXMgYWRkZWQgYWZ0ZXIgTG9jYWxTdG9yZSdzIHN0YXJ0KCkgcHJvY2Vzc2VkIHRoZSBleGlzdGluZ1xuICAgICAgICAvLyBtdXRhdGlvbnMgYnV0IGJlZm9yZSB3ZSBvYnNlcnZlIFdlYlN0b3JhZ2UgZXZlbnRzLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLmVyKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmIFdlYlN0b3JhZ2UgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgdnQodCkge1xuICAgICAgICByZXR1cm4gISghdCB8fCAhdC5sb2NhbFN0b3JhZ2UpO1xuICAgIH1cbiAgICBhc3luYyBzdGFydCgpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGxpc3Qgb2YgZXhpc3RpbmcgY2xpZW50cyB0byBiYWNrZmlsbCB0aGUgZGF0YSBpblxuICAgICAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuc3luY0VuZ2luZS5PcygpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgaWYgKGUgPT09IHRoaXMudHIpIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuZ2V0SXRlbShQbyh0aGlzLnBlcnNpc3RlbmNlS2V5LCBlKSk7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBDby5KaShlLCB0KTtcbiAgICAgICAgICAgICAgICBuICYmICh0aGlzLnNyID0gdGhpcy5zci5pbnNlcnQobi5jbGllbnRJZCwgbikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3IoKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXhpc3Rpbmcgb25saW5lIHN0YXRlIGFuZCBjYWxsIHRoZSBjYWxsYmFjayBoYW5kbGVyXG4gICAgICAgIC8vIGlmIGFwcGxpY2FibGUuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbSh0aGlzLmxyKTtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLndyKGUpO1xuICAgICAgICAgICAgdCAmJiB0aGlzLm1yKHQpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmlyKSB0aGlzLm5yKHQpO1xuICAgICAgICB0aGlzLmlyID0gW10sIFxuICAgICAgICAvLyBSZWdpc3RlciBhIHdpbmRvdyB1bmxvYWQgaG9vayB0byByZW1vdmUgdGhlIGNsaWVudCBtZXRhZGF0YSBlbnRyeSBmcm9tXG4gICAgICAgIC8vIFdlYlN0b3JhZ2UgZXZlbiBpZiBgc2h1dGRvd24oKWAgd2FzIG5vdCBjYWxsZWQuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCAoKCkgPT4gdGhpcy5zaHV0ZG93bigpKSksIHRoaXMuc3RhcnRlZCA9ICEwO1xuICAgIH1cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMudXIsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ncih0aGlzLnNyKTtcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLnNyLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmFjdGl2ZVRhcmdldElkcy5oYXModCkgJiYgKGUgPSAhMCk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKHQpIHtcbiAgICAgICAgdGhpcy55cih0LCBcInBlbmRpbmdcIik7XG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLnlyKHQsIGUsIG4pLCBcbiAgICAgICAgLy8gT25jZSBhIGZpbmFsIG11dGF0aW9uIHJlc3VsdCBpcyBvYnNlcnZlZCBieSBvdGhlciBjbGllbnRzLCB0aGV5IG5vIGxvbmdlclxuICAgICAgICAvLyBhY2Nlc3MgdGhlIG11dGF0aW9uJ3MgbWV0YWRhdGEgZW50cnkuIFNpbmNlIFdlYlN0b3JhZ2UgcmVwbGF5cyBldmVudHNcbiAgICAgICAgLy8gaW4gb3JkZXIsIGl0IGlzIHNhZmUgdG8gZGVsZXRlIHRoZSBlbnRyeSByaWdodCBhZnRlciB1cGRhdGluZyBpdC5cbiAgICAgICAgdGhpcy5wcih0KTtcbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIGxldCBlID0gXCJub3QtY3VycmVudFwiO1xuICAgICAgICAvLyBMb29rdXAgYW4gZXhpc3RpbmcgcXVlcnkgc3RhdGUgaWYgdGhlIHRhcmdldCBJRCB3YXMgYWxyZWFkeSByZWdpc3RlcmVkXG4gICAgICAgIC8vIGJ5IGFub3RoZXIgdGFiXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNBY3RpdmVRdWVyeVRhcmdldCh0KSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHZvKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpKTtcbiAgICAgICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IERvLkppKHQsIG4pO1xuICAgICAgICAgICAgICAgIHMgJiYgKGUgPSBzLnN0YXRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5Jci5YaSh0KSwgdGhpcy5fcigpLCBlO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5Jci5aaSh0KSwgdGhpcy5fcigpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jci5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUodCkge1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0odm8odGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5Ucih0LCBlLCBuKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnByKHQpO1xuICAgICAgICB9KSksIHRoaXMuY3VycmVudFVzZXIgPSB0LCBuLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRQZW5kaW5nTXV0YXRpb24odCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICB0aGlzLkVyKHQpO1xuICAgIH1cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQodCkge1xuICAgICAgICB0aGlzLkFyKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5zdGFydGVkICYmICh0aGlzLndpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLmVyKSwgdGhpcy5yZW1vdmVJdGVtKHRoaXMucnIpLCBcbiAgICAgICAgdGhpcy5zdGFydGVkID0gITEpO1xuICAgIH1cbiAgICBnZXRJdGVtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHQpO1xuICAgICAgICByZXR1cm4gTyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiUkVBRFwiLCB0LCBlKSwgZTtcbiAgICB9XG4gICAgc2V0SXRlbSh0LCBlKSB7XG4gICAgICAgIE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlNFVFwiLCB0LCBlKSwgdGhpcy5zdG9yYWdlLnNldEl0ZW0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZUl0ZW0odCkge1xuICAgICAgICBPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRU1PVkVcIiwgdCksIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKHQpO1xuICAgIH1cbiAgICBucih0KSB7XG4gICAgICAgIC8vIE5vdGU6IFRoZSBmdW5jdGlvbiBpcyB0eXBlZCB0byB0YWtlIEV2ZW50IHRvIGJlIGludGVyZmFjZS1jb21wYXRpYmxlIHdpdGhcbiAgICAgICAgLy8gYFdpbmRvdy5hZGRFdmVudExpc3RlbmVyYC5cbiAgICAgICAgY29uc3QgZSA9IHQ7XG4gICAgICAgIGlmIChlLnN0b3JhZ2VBcmVhID09PSB0aGlzLnN0b3JhZ2UpIHtcbiAgICAgICAgICAgIGlmIChPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJFVkVOVFwiLCBlLmtleSwgZS5uZXdWYWx1ZSksIGUua2V5ID09PSB0aGlzLnJyKSByZXR1cm4gdm9pZCBGKFwiUmVjZWl2ZWQgV2ViU3RvcmFnZSBub3RpZmljYXRpb24gZm9yIGxvY2FsIGNoYW5nZS4gQW5vdGhlciBjbGllbnQgbWlnaHQgaGF2ZSBnYXJiYWdlLWNvbGxlY3RlZCBvdXIgc3RhdGVcIik7XG4gICAgICAgICAgICB0aGlzLkpuLmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLmtleSkgaWYgKHRoaXMuYXIudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5ScihlLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnIodCwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuUHIoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5icih0LmNsaWVudElkLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmNyLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlZyKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMudnIodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5oci50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUubmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5TcihlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLkRyKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLmxyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLndyKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5tcih0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy51cikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IG50LkE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFUoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIGUgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZVwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAqIGBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZWAgaXMgYSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgU2hhcmVkQ2xpZW50U3RhdGUgZm9yXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxuICogaXNvbGF0ZWQgYW5kIG5vIHN5bmNocm9uaXphdGlvbiBpcyBwZXJmb3JtZWQuXG4gKi8gKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdCAhPT0gbnQuQSAmJiB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlcih0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlLmtleSA9PT0gdGhpcy5kcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuQ3IoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCh0Lm1hcCgodCA9PiB0aGlzLnN5bmNFbmdpbmUuTnIodCkpKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgdGhpcy5pci5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBJcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3IuZ2V0KHRoaXMudHIpO1xuICAgIH1cbiAgICBfcigpIHtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMucnIsIHRoaXMuSXIuWWkoKSk7XG4gICAgfVxuICAgIHlyKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBTbyh0aGlzLmN1cnJlbnRVc2VyLCB0LCBlLCBuKSwgaSA9IFZvKHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIHQpO1xuICAgICAgICB0aGlzLnNldEl0ZW0oaSwgcy5ZaSgpKTtcbiAgICB9XG4gICAgcHIodCkge1xuICAgICAgICBjb25zdCBlID0gVm8odGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShlKTtcbiAgICB9XG4gICAgRXIodCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMudHIsXG4gICAgICAgICAgICBvbmxpbmVTdGF0ZTogdFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0aGlzLmxyLCBKU09OLnN0cmluZ2lmeShlKSk7XG4gICAgfVxuICAgIFRyKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHZvKHRoaXMucGVyc2lzdGVuY2VLZXksIHQpLCBpID0gbmV3IERvKHQsIGUsIG4pO1xuICAgICAgICB0aGlzLnNldEl0ZW0ocywgaS5ZaSgpKTtcbiAgICB9XG4gICAgQXIodCkge1xuICAgICAgICBjb25zdCBlID0gSlNPTi5zdHJpbmdpZnkoQXJyYXkuZnJvbSh0KSk7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLmRyLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGtleSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zIG51bGwgaWYgdGhlIGtleSBkb2VzIG5vdFxuICAgICAqIG1hdGNoIHRoZSBleHBlY3RlZCBrZXkgZm9ybWF0LlxuICAgICAqLyAgICBScih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmFyLmV4ZWModCk7XG4gICAgICAgIHJldHVybiBlID8gZVsxXSA6IG51bGw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWUgY291bGQgbm90XG4gICAgICogYmUgcGFyc2VkLlxuICAgICAqLyAgICBQcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLlJyKHQpO1xuICAgICAgICByZXR1cm4gQ28uSmkobiwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIG11dGF0aW9uIGJhdGNoIHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIFZyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY3IuZXhlYyh0KSwgcyA9IE51bWJlcihuWzFdKSwgaSA9IHZvaWQgMCAhPT0gblsyXSA/IG5bMl0gOiBudWxsO1xuICAgICAgICByZXR1cm4gU28uSmkobmV3IEMoaSksIHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBxdWVyeSB0YXJnZXQgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBTcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmhyLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSk7XG4gICAgICAgIHJldHVybiBEby5KaShzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGFuIG9ubGluZSBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIHdyKHQpIHtcbiAgICAgICAgcmV0dXJuIHhvLkppKHQpO1xuICAgIH1cbiAgICBDcih0KSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHQpO1xuICAgIH1cbiAgICBhc3luYyB2cih0KSB7XG4gICAgICAgIGlmICh0LnVzZXIudWlkID09PSB0aGlzLmN1cnJlbnRVc2VyLnVpZCkgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5rcih0LmJhdGNoSWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgICAgICBPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYElnbm9yaW5nIG11dGF0aW9uIGZvciBub24tYWN0aXZlIHVzZXIgJHt0LnVzZXIudWlkfWApO1xuICAgIH1cbiAgICBEcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuTXIodC50YXJnZXRJZCwgdC5zdGF0ZSwgdC5lcnJvcik7XG4gICAgfVxuICAgIGJyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyB0aGlzLnNyLmluc2VydCh0LCBlKSA6IHRoaXMuc3IucmVtb3ZlKHQpLCBzID0gdGhpcy5ncih0aGlzLnNyKSwgaSA9IHRoaXMuZ3IobiksIHIgPSBbXSwgbyA9IFtdO1xuICAgICAgICByZXR1cm4gaS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHMuaGFzKHQpIHx8IHIucHVzaCh0KTtcbiAgICAgICAgfSkpLCBzLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5oYXModCkgfHwgby5wdXNoKHQpO1xuICAgICAgICB9KSksIHRoaXMuc3luY0VuZ2luZS5PcihyLCBvKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNyID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBtcih0KSB7XG4gICAgICAgIC8vIFdlIGNoZWNrIHdoZXRoZXIgdGhlIGNsaWVudCB0aGF0IHdyb3RlIHRoaXMgb25saW5lIHN0YXRlIGlzIHN0aWxsIGFjdGl2ZVxuICAgICAgICAvLyBieSBjb21wYXJpbmcgaXRzIGNsaWVudCBJRCB0byB0aGUgbGlzdCBvZiBjbGllbnRzIGtlcHQgYWN0aXZlIGluXG4gICAgICAgIC8vIEluZGV4ZWREYi4gSWYgYSBjbGllbnQgZG9lcyBub3QgdXBkYXRlIHRoZWlyIEluZGV4ZWREYiBjbGllbnQgc3RhdGVcbiAgICAgICAgLy8gd2l0aGluIDUgc2Vjb25kcywgaXQgaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgd2UgZG9uJ3QgZW1pdCBhbiBvbmxpbmVcbiAgICAgICAgLy8gc3RhdGUgZXZlbnQuXG4gICAgICAgIHRoaXMuc3IuZ2V0KHQuY2xpZW50SWQpICYmIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQub25saW5lU3RhdGUpO1xuICAgIH1cbiAgICBncih0KSB7XG4gICAgICAgIGxldCBlID0gSm4oKTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgPSBlLnVuaW9uV2l0aChuLmFjdGl2ZVRhcmdldElkcyk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG59XG5cbmNsYXNzIE1vIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5GciA9IG5ldyBObywgdGhpcy4kciA9IHt9LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IG51bGwsIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgYWRkUGVuZGluZ011dGF0aW9uKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHVwZGF0ZU11dGF0aW9uU3RhdGUodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgYWRkTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZyLlhpKHQpLCB0aGlzLiRyW3RdIHx8IFwibm90LWN1cnJlbnRcIjtcbiAgICB9XG4gICAgdXBkYXRlUXVlcnlTdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuJHJbdF0gPSBlO1xuICAgIH1cbiAgICByZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5Gci5aaSh0KTtcbiAgICB9XG4gICAgaXNMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgY2xlYXJRdWVyeVN0YXRlKHQpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuJHJbdF07XG4gICAgfVxuICAgIGdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIuYWN0aXZlVGFyZ2V0SWRzO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZyID0gbmV3IE5vLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgaGFuZGxlVXNlckNoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgd3JpdGVTZXF1ZW5jZU51bWJlcih0KSB7fVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCh0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgT28ge1xuICAgIEJyKHQpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IEJyb3dzZXJDb25uZWN0aXZpdHlNb25pdG9yLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBCcm93c2VyIGltcGxlbWVudGF0aW9uIG9mIENvbm5lY3Rpdml0eU1vbml0b3IuXG4gKi9cbmNsYXNzIEZvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5MciA9ICgpID0+IHRoaXMuVXIoKSwgdGhpcy5xciA9ICgpID0+IHRoaXMuR3IoKSwgdGhpcy5LciA9IFtdLCB0aGlzLlFyKCk7XG4gICAgfVxuICAgIEJyKHQpIHtcbiAgICAgICAgdGhpcy5Lci5wdXNoKHQpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5MciksIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLnFyKTtcbiAgICB9XG4gICAgUXIoKSB7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuTHIpLCB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5xcik7XG4gICAgfVxuICAgIFVyKCkge1xuICAgICAgICBPKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IEFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuS3IpIHQoMCAvKiBBVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBHcigpIHtcbiAgICAgICAgTyhcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuS3IpIHQoMSAvKiBVTkFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIC8vIFRPRE8oY2hlbmJyaWFuKTogQ29uc2lkZXIgcGFzc2luZyBpbiB3aW5kb3cgZWl0aGVyIGludG8gdGhpcyBjb21wb25lbnQgb3JcbiAgICAvLyBoZXJlIGZvciB0ZXN0aW5nIHZpYSBGYWtlV2luZG93LlxuICAgIC8qKiBDaGVja3MgdGhhdCBhbGwgdXNlZCBhdHRyaWJ1dGVzIG9mIHdpbmRvdyBhcmUgYXZhaWxhYmxlLiAqL1xuICAgIHN0YXRpYyB2dCgpIHtcbiAgICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyAmJiB2b2lkIDAgIT09IHdpbmRvdy5hZGRFdmVudExpc3RlbmVyICYmIHZvaWQgMCAhPT0gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCAkbyA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIEJvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuanIgPSB0LmpyLCB0aGlzLldyID0gdC5XcjtcbiAgICB9XG4gICAgenIodCkge1xuICAgICAgICB0aGlzLkhyID0gdDtcbiAgICB9XG4gICAgSnIodCkge1xuICAgICAgICB0aGlzLllyID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy5YciA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLldyKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLmpyKHQpO1xuICAgIH1cbiAgICBacigpIHtcbiAgICAgICAgdGhpcy5IcigpO1xuICAgIH1cbiAgICBlbyh0KSB7XG4gICAgICAgIHRoaXMuWXIodCk7XG4gICAgfVxuICAgIG5vKHQpIHtcbiAgICAgICAgdGhpcy5Ycih0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIExvIGV4dGVuZHMgXG4vKipcbiAqIEJhc2UgY2xhc3MgZm9yIGFsbCBSZXN0LWJhc2VkIGNvbm5lY3Rpb25zIHRvIHRoZSBiYWNrZW5kIChXZWJDaGFubmVsIGFuZFxuICogSFRUUCkuXG4gKi9cbmNsYXNzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJbmZvID0gdCwgdGhpcy5kYXRhYmFzZUlkID0gdC5kYXRhYmFzZUlkO1xuICAgICAgICBjb25zdCBlID0gdC5zc2wgPyBcImh0dHBzXCIgOiBcImh0dHBcIjtcbiAgICAgICAgdGhpcy5zbyA9IGUgKyBcIjovL1wiICsgdC5ob3N0LCB0aGlzLmlvID0gXCJwcm9qZWN0cy9cIiArIHRoaXMuZGF0YWJhc2VJZC5wcm9qZWN0SWQgKyBcIi9kYXRhYmFzZXMvXCIgKyB0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2UgKyBcIi9kb2N1bWVudHNcIjtcbiAgICB9XG4gICAgcm8odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gdGhpcy5vbyh0LCBlKTtcbiAgICAgICAgTyhcIlJlc3RDb25uZWN0aW9uXCIsIFwiU2VuZGluZzogXCIsIHIsIG4pO1xuICAgICAgICBjb25zdCBvID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLnVvKG8sIHMsIGkpLCB0aGlzLmFvKHQsIHIsIG8sIG4pLnRoZW4oKHQgPT4gKE8oXCJSZXN0Q29ubmVjdGlvblwiLCBcIlJlY2VpdmVkOiBcIiwgdCksIFxuICAgICAgICB0KSksIChlID0+IHtcbiAgICAgICAgICAgIHRocm93ICQoXCJSZXN0Q29ubmVjdGlvblwiLCBgJHt0fSBmYWlsZWQgd2l0aCBlcnJvcjogYCwgZSwgXCJ1cmw6IFwiLCByLCBcInJlcXVlc3Q6XCIsIG4pLCBcbiAgICAgICAgICAgIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY28odCwgZSwgbiwgcywgaSkge1xuICAgICAgICAvLyBUaGUgUkVTVCBBUEkgYXV0b21hdGljYWxseSBhZ2dyZWdhdGVzIGFsbCBvZiB0aGUgc3RyZWFtZWQgcmVzdWx0cywgc28gd2VcbiAgICAgICAgLy8gY2FuIGp1c3QgdXNlIHRoZSBub3JtYWwgaW52b2tlKCkgbWV0aG9kLlxuICAgICAgICByZXR1cm4gdGhpcy5ybyh0LCBlLCBuLCBzLCBpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgdGhlIGhlYWRlcnMgZm9yIGEgcmVxdWVzdCwgYWRkaW5nIGFueSBhdXRob3JpemF0aW9uIHRva2VuIGlmXG4gICAgICogcHJlc2VudCBhbmQgYW55IGFkZGl0aW9uYWwgaGVhZGVycyBmb3IgdGhlIHJlcXVlc3QuXG4gICAgICovICAgIHVvKHQsIGUsIG4pIHtcbiAgICAgICAgdFtcIlgtR29vZy1BcGktQ2xpZW50XCJdID0gXCJnbC1qcy8gZmlyZS9cIiArIHgsIFxuICAgICAgICAvLyBDb250ZW50LVR5cGU6IHRleHQvcGxhaW4gd2lsbCBhdm9pZCBwcmVmbGlnaHQgcmVxdWVzdHMgd2hpY2ggbWlnaHRcbiAgICAgICAgLy8gbWVzcyB3aXRoIENPUlMgYW5kIHJlZGlyZWN0cyBieSBwcm94aWVzLiBJZiB3ZSBhZGQgY3VzdG9tIGhlYWRlcnNcbiAgICAgICAgLy8gd2Ugd2lsbCBuZWVkIHRvIGNoYW5nZSB0aGlzIGNvZGUgdG8gcG90ZW50aWFsbHkgdXNlIHRoZSAkaHR0cE92ZXJ3cml0ZVxuICAgICAgICAvLyBwYXJhbWV0ZXIgc3VwcG9ydGVkIGJ5IEVTRiB0byBhdm9pZCB0cmlnZ2VyaW5nIHByZWZsaWdodCByZXF1ZXN0cy5cbiAgICAgICAgdFtcIkNvbnRlbnQtVHlwZVwiXSA9IFwidGV4dC9wbGFpblwiLCB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCAmJiAodFtcIlgtRmlyZWJhc2UtR01QSURcIl0gPSB0aGlzLmRhdGFiYXNlSW5mby5hcHBJZCksIFxuICAgICAgICBlICYmIGUuaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKSwgbiAmJiBuLmhlYWRlcnMuZm9yRWFjaCgoKGUsIG4pID0+IHRbbl0gPSBlKSk7XG4gICAgfVxuICAgIG9vKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9ICRvW3RdO1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5zb30vdjEvJHtlfToke259YDtcbiAgICB9XG59IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKHQpLCB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcgPSB0LmZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gdC5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbiAgICBhbyh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKGksIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBuZXcgWGhySW87XG4gICAgICAgICAgICBvLmxpc3Rlbk9uY2UoRXZlbnRUeXBlLkNPTVBMRVRFLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoby5nZXRMYXN0RXJyb3JDb2RlKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5OT19FUlJPUjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgTyhcIkNvbm5lY3Rpb25cIiwgXCJYSFIgcmVjZWl2ZWQ6XCIsIEpTT04uc3RyaW5naWZ5KGUpKSwgaShlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuVElNRU9VVDpcbiAgICAgICAgICAgICAgICAgICAgICAgIE8oXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiB0aW1lZCBvdXQnKSwgcihuZXcgUShLLkRFQURMSU5FX0VYQ0VFREVELCBcIlJlcXVlc3QgdGltZSBvdXRcIikpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5IVFRQX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG8uZ2V0U3RhdHVzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoTyhcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIGZhaWxlZCB3aXRoIHN0YXR1czonLCBuLCBcInJlc3BvbnNlIHRleHQ6XCIsIG8uZ2V0UmVzcG9uc2VUZXh0KCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uZ2V0UmVzcG9uc2VKc29uKCkuZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgdC5zdGF0dXMgJiYgdC5tZXNzYWdlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL18vZywgXCItXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoSykuaW5kZXhPZihlKSA+PSAwID8gZSA6IEsuVU5LTk9XTjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSh0LnN0YXR1cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIobmV3IFEoZSwgdC5tZXNzYWdlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHIobmV3IFEoSy5VTktOT1dOLCBcIlNlcnZlciByZXNwb25kZWQgd2l0aCBzdGF0dXMgXCIgKyBvLmdldFN0YXR1cygpKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSByZWNlaXZlZCBhbiBIVFRQX0VSUk9SIGJ1dCB0aGVyZSdzIG5vIHN0YXR1cyBjb2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBtb3N0IHByb2JhYmx5IGEgY29ubmVjdGlvbiBpc3N1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgUShLLlVOQVZBSUxBQkxFLCBcIkNvbm5lY3Rpb24gZmFpbGVkLlwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBMKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgY29tcGxldGVkLicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBKU09OLnN0cmluZ2lmeShzKTtcbiAgICAgICAgICAgIG8uc2VuZChlLCBcIlBPU1RcIiwgdSwgbiwgMTUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGhvKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFsgdGhpcy5zbywgXCIvXCIsIFwiZ29vZ2xlLmZpcmVzdG9yZS52MS5GaXJlc3RvcmVcIiwgXCIvXCIsIHQsIFwiL2NoYW5uZWxcIiBdLCBpID0gY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCgpLCByID0gZ2V0U3RhdEV2ZW50VGFyZ2V0KCksIG8gPSB7XG4gICAgICAgICAgICAvLyBSZXF1aXJlZCBmb3IgYmFja2VuZCBzdGlja2luZXNzLCByb3V0aW5nIGJlaGF2aW9yIGlzIGJhc2VkIG9uIHRoaXNcbiAgICAgICAgICAgIC8vIHBhcmFtZXRlci5cbiAgICAgICAgICAgIGh0dHBTZXNzaW9uSWRQYXJhbTogXCJnc2Vzc2lvbmlkXCIsXG4gICAgICAgICAgICBpbml0TWVzc2FnZUhlYWRlcnM6IHt9LFxuICAgICAgICAgICAgbWVzc2FnZVVybFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgcGFyYW0gaXMgdXNlZCB0byBpbXByb3ZlIHJvdXRpbmcgYW5kIHByb2plY3QgaXNvbGF0aW9uIGJ5IHRoZVxuICAgICAgICAgICAgICAgIC8vIGJhY2tlbmQgYW5kIG11c3QgYmUgaW5jbHVkZWQgaW4gZXZlcnkgcmVxdWVzdC5cbiAgICAgICAgICAgICAgICBkYXRhYmFzZTogYHByb2plY3RzLyR7dGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZH0vZGF0YWJhc2VzLyR7dGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlfWBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZW5kUmF3SnNvbjogITAsXG4gICAgICAgICAgICBzdXBwb3J0c0Nyb3NzRG9tYWluWGhyOiAhMCxcbiAgICAgICAgICAgIGludGVybmFsQ2hhbm5lbFBhcmFtczoge1xuICAgICAgICAgICAgICAgIC8vIE92ZXJyaWRlIHRoZSBkZWZhdWx0IHRpbWVvdXQgKHJhbmRvbWl6ZWQgYmV0d2VlbiAxMC0yMCBzZWNvbmRzKSBzaW5jZVxuICAgICAgICAgICAgICAgIC8vIGEgbGFyZ2Ugd3JpdGUgYmF0Y2ggb24gYSBzbG93IGludGVybmV0IGNvbm5lY3Rpb24gbWF5IHRha2UgYSBsb25nXG4gICAgICAgICAgICAgICAgLy8gdGltZSB0byBzZW5kIHRvIHRoZSBiYWNrZW5kLiBSYXRoZXIgdGhhbiBoYXZlIFdlYkNoYW5uZWwgaW1wb3NlIGFcbiAgICAgICAgICAgICAgICAvLyB0aWdodCB0aW1lb3V0IHdoaWNoIGNvdWxkIGxlYWQgdG8gaW5maW5pdGUgdGltZW91dHMgYW5kIHJldHJpZXMsIHdlXG4gICAgICAgICAgICAgICAgLy8gc2V0IGl0IHZlcnkgbGFyZ2UgKDUtMTAgbWludXRlcykgYW5kIHJlbHkgb24gdGhlIGJyb3dzZXIncyBidWlsdGluXG4gICAgICAgICAgICAgICAgLy8gdGltZW91dHMgdG8ga2ljayBpbiBpZiB0aGUgcmVxdWVzdCBpc24ndCB3b3JraW5nLlxuICAgICAgICAgICAgICAgIGZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNczogNmU1XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZm9yY2VMb25nUG9sbGluZzogdGhpcy5mb3JjZUxvbmdQb2xsaW5nLFxuICAgICAgICAgICAgZGV0ZWN0QnVmZmVyaW5nUHJveHk6IHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmIChvLnhtbEh0dHBGYWN0b3J5ID0gbmV3IEZldGNoWG1sSHR0cEZhY3Rvcnkoe30pKSwgdGhpcy51byhvLmluaXRNZXNzYWdlSGVhZGVycywgZSwgbiksIFxuICAgICAgICAvLyBTZW5kaW5nIHRoZSBjdXN0b20gaGVhZGVycyB3ZSBqdXN0IGFkZGVkIHRvIHJlcXVlc3QuaW5pdE1lc3NhZ2VIZWFkZXJzXG4gICAgICAgIC8vIChBdXRob3JpemF0aW9uLCBldGMuKSB3aWxsIHRyaWdnZXIgdGhlIGJyb3dzZXIgdG8gbWFrZSBhIENPUlMgcHJlZmxpZ2h0XG4gICAgICAgIC8vIHJlcXVlc3QgYmVjYXVzZSB0aGUgWEhSIHdpbGwgbm8gbG9uZ2VyIG1lZXQgdGhlIGNyaXRlcmlhIGZvciBhIFwic2ltcGxlXCJcbiAgICAgICAgLy8gQ09SUyByZXF1ZXN0OlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0NPUlMjU2ltcGxlX3JlcXVlc3RzXG4gICAgICAgIC8vIFRoZXJlZm9yZSB0byBhdm9pZCB0aGUgQ09SUyBwcmVmbGlnaHQgcmVxdWVzdCAoYW4gZXh0cmEgbmV0d29ya1xuICAgICAgICAvLyByb3VuZHRyaXApLCB3ZSB1c2UgdGhlIGh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGludG8gYSBzcGVjaWFsIFwiJGh0dHBIZWFkZXJzXCIgcXVlcnlcbiAgICAgICAgLy8gcGFyYW1ldGVyLCB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuIFRoaXMgaXNcbiAgICAgICAgLy8gZm9ybWFsbHkgZGVmaW5lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL2IwZTE4MTViMTNmYjkyYTQ2ZDdjOWIzYzMwZGU1ZDZhMzk2YTMyNDUvY2xvc3VyZS9nb29nL25ldC9ycGMvaHR0cGNvcnMuanMjTDMyXG4gICAgICAgIC8vIFRPRE8oYi8xNDU2MjQ3NTYpOiBUaGVyZSBpcyBhIGJhY2tlbmQgYnVnIHdoZXJlICRodHRwSGVhZGVycyBpc24ndCByZXNwZWN0ZWQgaWYgdGhlIHJlcXVlc3RcbiAgICAgICAgLy8gZG9lc24ndCBoYXZlIGFuIE9yaWdpbiBoZWFkZXIuIFNvIHdlIGhhdmUgdG8gZXhjbHVkZSBhIGZldyBicm93c2VyIGVudmlyb25tZW50cyB0aGF0IGFyZVxuICAgICAgICAvLyBrbm93biB0byAoc29tZXRpbWVzKSBub3QgaW5jbHVkZSBhbiBPcmlnaW4uIFNlZVxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8xNDkxLlxuICAgICAgICBpc01vYmlsZUNvcmRvdmEoKSB8fCBpc1JlYWN0TmF0aXZlKCkgfHwgaXNFbGVjdHJvbigpIHx8IGlzSUUoKSB8fCBpc1VXUCgpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8IChvLmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0gPSBcIiRodHRwSGVhZGVyc1wiKTtcbiAgICAgICAgY29uc3QgdSA9IHMuam9pbihcIlwiKTtcbiAgICAgICAgTyhcIkNvbm5lY3Rpb25cIiwgXCJDcmVhdGluZyBXZWJDaGFubmVsOiBcIiArIHUsIG8pO1xuICAgICAgICBjb25zdCBhID0gaS5jcmVhdGVXZWJDaGFubmVsKHUsIG8pO1xuICAgICAgICAvLyBXZWJDaGFubmVsIHN1cHBvcnRzIHNlbmRpbmcgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgaGFuZHNoYWtlIC0gc2F2aW5nXG4gICAgICAgIC8vIGEgbmV0d29yayByb3VuZCB0cmlwLiBIb3dldmVyLCBpdCB3aWxsIGhhdmUgdG8gY2FsbCBzZW5kIGluIHRoZSBzYW1lXG4gICAgICAgIC8vIEpTIGV2ZW50IGxvb3AgYXMgb3Blbi4gSW4gb3JkZXIgdG8gZW5mb3JjZSB0aGlzLCB3ZSBkZWxheSBhY3R1YWxseVxuICAgICAgICAvLyBvcGVuaW5nIHRoZSBXZWJDaGFubmVsIHVudGlsIHNlbmQgaXMgY2FsbGVkLiBXaGV0aGVyIHdlIGhhdmUgY2FsbGVkXG4gICAgICAgIC8vIG9wZW4gaXMgdHJhY2tlZCB3aXRoIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgICAgICAgbGV0IGMgPSAhMSwgaCA9ICExO1xuICAgICAgICAvLyBBIGZsYWcgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHN0cmVhbSB3YXMgY2xvc2VkIChieSB1cyBvciB0aHJvdWdoIGFuXG4gICAgICAgIC8vIGVycm9yL2Nsb3NlIGV2ZW50KSB0byBhdm9pZCBkZWxpdmVyaW5nIG11bHRpcGxlIGNsb3NlIGV2ZW50cyBvciBzZW5kaW5nXG4gICAgICAgIC8vIG9uIGEgY2xvc2VkIHN0cmVhbVxuICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBuZXcgQm8oe1xuICAgICAgICAgICAganI6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGggPyBPKFwiQ29ubmVjdGlvblwiLCBcIk5vdCBzZW5kaW5nIGJlY2F1c2UgV2ViQ2hhbm5lbCBpcyBjbG9zZWQ6XCIsIHQpIDogKGMgfHwgKE8oXCJDb25uZWN0aW9uXCIsIFwiT3BlbmluZyBXZWJDaGFubmVsIHRyYW5zcG9ydC5cIiksIFxuICAgICAgICAgICAgICAgIGEub3BlbigpLCBjID0gITApLCBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgc2VuZGluZzpcIiwgdCksIGEuc2VuZCh0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgV3I6ICgpID0+IGEuY2xvc2UoKVxuICAgICAgICB9KSwgeSA9ICh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IGNsb3N1cmUgdHlwaW5nIHNlZW1zIGJyb2tlbiBiZWNhdXNlIFdlYkNoYW5uZWwgZG9lc1xuICAgICAgICAgICAgLy8gbm90IGltcGxlbWVudCBnb29nLmV2ZW50cy5MaXN0ZW5hYmxlXG4gICAgICAgICAgICB0Lmxpc3RlbihlLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgbih0KTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIC8vIENsb3N1cmUgZXZlbnRzIGFyZSBndWFyZGVkIGFuZCBleGNlcHRpb25zIGFyZSBzd2FsbG93ZWQsIHNvIGNhdGNoIGFueVxuICAgICAgICAvLyBleGNlcHRpb24gYW5kIHJldGhyb3cgdXNpbmcgYSBzZXRUaW1lb3V0IHNvIHRoZXkgYmVjb21lIHZpc2libGUgYWdhaW4uXG4gICAgICAgIC8vIE5vdGUgdGhhdCBldmVudHVhbGx5IHRoaXMgZnVuY3Rpb24gY291bGQgZ28gYXdheSBpZiB3ZSBhcmUgY29uZmlkZW50XG4gICAgICAgIC8vIGVub3VnaCB0aGUgY29kZSBpcyBleGNlcHRpb24gZnJlZS5cbiAgICAgICAgICAgICAgICByZXR1cm4geShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5PUEVOLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IG9wZW5lZC5cIik7XG4gICAgICAgIH0pKSwgeShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgKCgpID0+IHtcbiAgICAgICAgICAgIGggfHwgKGggPSAhMCwgTyhcIkNvbm5lY3Rpb25cIiwgXCJXZWJDaGFubmVsIHRyYW5zcG9ydCBjbG9zZWRcIiksIGwuZW8oKSk7XG4gICAgICAgIH0pKSwgeShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5FUlJPUiwgKHQgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCAkKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGVycm9yZWQ6XCIsIHQpLCBsLmVvKG5ldyBRKEsuVU5BVkFJTEFCTEUsIFwiVGhlIG9wZXJhdGlvbiBjb3VsZCBub3QgYmUgY29tcGxldGVkXCIpKSk7XG4gICAgICAgIH0pKSwgeShhLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5NRVNTQUdFLCAodCA9PiB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIGlmICghaCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmRhdGFbMF07XG4gICAgICAgICAgICAgICAgVSghIW4pO1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8zNTE0Mzg5MSk6IFRoZXJlIGlzIGEgYnVnIGluIE9uZSBQbGF0Zm9ybSB0aGF0IGNhdXNlZCBlcnJvcnNcbiAgICAgICAgICAgICAgICAvLyAoYW5kIG9ubHkgZXJyb3JzKSB0byBiZSB3cmFwcGVkIGluIGFuIGV4dHJhIGFycmF5LiBUbyBiZSBmb3J3YXJkXG4gICAgICAgICAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBidWcgd2UgbmVlZCB0byBjaGVjayBlaXRoZXIgY29uZGl0aW9uLiBUaGUgbGF0dGVyXG4gICAgICAgICAgICAgICAgLy8gY2FuIGJlIHJlbW92ZWQgb25jZSB0aGUgZml4IGhhcyBiZWVuIHJvbGxlZCBvdXQuXG4gICAgICAgICAgICAgICAgLy8gVXNlIGFueSBiZWNhdXNlIG1zZ0RhdGEuZXJyb3IgaXMgbm90IHR5cGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuLCBpID0gcy5lcnJvciB8fCAobnVsbCA9PT0gKGUgPSBzWzBdKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmVycm9yKTtcbiAgICAgICAgICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgcmVjZWl2ZWQgZXJyb3I6XCIsIGkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBpLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IGUgPSBcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxuICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gRG5bdF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSByZXR1cm4gTm4oZSk7XG4gICAgICAgICAgICAgICAgICAgIH0odCksIG4gPSBpLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IEsuSU5URVJOQUwsIG4gPSBcIlVua25vd24gZXJyb3Igc3RhdHVzOiBcIiArIHQgKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBpLm1lc3NhZ2UpLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgICAgICAgICAgaCA9ICEwLCBsLmVvKG5ldyBRKGUsIG4pKSwgYS5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgcmVjZWl2ZWQ6XCIsIG4pLCBsLm5vKG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHkociwgRXZlbnQuU1RBVF9FVkVOVCwgKHQgPT4ge1xuICAgICAgICAgICAgdC5zdGF0ID09PSBTdGF0LlBST1hZID8gTyhcIkNvbm5lY3Rpb25cIiwgXCJEZXRlY3RlZCBidWZmZXJpbmcgcHJveHlcIikgOiB0LnN0YXQgPT09IFN0YXQuTk9QUk9YWSAmJiBPKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIG5vIGJ1ZmZlcmluZyBwcm94eVwiKTtcbiAgICAgICAgfSkpLCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSB3ZSBjb3VsZC9zaG91bGQgd2FpdCBmb3IgdGhlIFdlYkNoYW5uZWwgb3BlbmVkIGV2ZW50LFxuICAgICAgICAgICAgLy8gYnV0IGJlY2F1c2Ugd2Ugd2FudCB0byBzZW5kIHRoZSBmaXJzdCBtZXNzYWdlIHdpdGggdGhlIFdlYkNoYW5uZWxcbiAgICAgICAgICAgIC8vIGhhbmRzaGFrZSB3ZSBwcmV0ZW5kIHRoZSBjaGFubmVsIG9wZW5lZCBoZXJlIChhc3luY2hyb25vdXNseSksIGFuZFxuICAgICAgICAgICAgLy8gdGhlbiBkZWxheSB0aGUgYWN0dWFsIG9wZW4gdW50aWwgdGhlIGZpcnN0IG1lc3NhZ2UgaXMgc2VudC5cbiAgICAgICAgICAgIGwuWnIoKTtcbiAgICAgICAgfSksIDApLCBsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBJbml0aWFsaXplcyB0aGUgV2ViQ2hhbm5lbENvbm5lY3Rpb24gZm9yIHRoZSBicm93c2VyLiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBUaGUgUGxhdGZvcm0ncyAnd2luZG93JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovXG5mdW5jdGlvbiBVbygpIHtcbiAgICAvLyBgd2luZG93YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHdpbmRvdyA/IHdpbmRvdyA6IG51bGw7XG59XG5cbi8qKiBUaGUgUGxhdGZvcm0ncyAnZG9jdW1lbnQnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi8gZnVuY3Rpb24gcW8oKSB7XG4gICAgLy8gYGRvY3VtZW50YCBpcyBub3QgYWx3YXlzIGF2YWlsYWJsZSwgZS5nLiBpbiBSZWFjdE5hdGl2ZSBhbmQgV2ViV29ya2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzXG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGRvY3VtZW50ID8gZG9jdW1lbnQgOiBudWxsO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBHbyh0KSB7XG4gICAgcmV0dXJuIG5ldyBhcyh0LCAvKiB1c2VQcm90bzNKc29uPSAqLyAhMCk7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHRFbmNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgS28ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgcyA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLkpuID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy5sbyA9IG4sIHRoaXMuZm8gPSBzLCB0aGlzLl9vID0gaSwgdGhpcy53byA9IDAsIFxuICAgICAgICB0aGlzLm1vID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy55byA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMud28gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgcG8oKSB7XG4gICAgICAgIHRoaXMud28gPSB0aGlzLl9vO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgIElvKHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHRoaXMud28gKyB0aGlzLlRvKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMueW8pLCBzID0gTWF0aC5tYXgoMCwgZSAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBzID4gMCAmJiBPKFwiRXhwb25lbnRpYWxCYWNrb2ZmXCIsIGBCYWNraW5nIG9mZiBmb3IgJHtzfSBtcyAoYmFzZSBkZWxheTogJHt0aGlzLndvfSBtcywgZGVsYXkgd2l0aCBqaXR0ZXI6ICR7ZX0gbXMsIGxhc3QgYXR0ZW1wdDogJHtufSBtcyBhZ28pYCksIFxuICAgICAgICB0aGlzLm1vID0gdGhpcy5Kbi5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHMsICgoKSA9PiAodGhpcy55byA9IERhdGUubm93KCksIFxuICAgICAgICB0KCkpKSksIFxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxuICAgICAgICAvLyBib3VuZHMuXG4gICAgICAgIHRoaXMud28gKj0gdGhpcy5mbywgdGhpcy53byA8IHRoaXMubG8gJiYgKHRoaXMud28gPSB0aGlzLmxvKSwgdGhpcy53byA+IHRoaXMuX28gJiYgKHRoaXMud28gPSB0aGlzLl9vKTtcbiAgICB9XG4gICAgRW8oKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMubW8gJiYgKHRoaXMubW8uc2tpcERlbGF5KCksIHRoaXMubW8gPSBudWxsKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLm1vICYmICh0aGlzLm1vLmNhbmNlbCgpLCB0aGlzLm1vID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqLyAgICBUbygpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gLjUpICogdGhpcy53bztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxuICpcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICpcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXG4gKiBzdHJlYW1pbmcgUlBDLlxuICpcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xuICpcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxuICpcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXG4gKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXG4gKlxuICogR2VuZXJpYyB0eXBlczpcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcbiAqL1xuY2xhc3MgUW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpIHtcbiAgICAgICAgdGhpcy5KbiA9IHQsIHRoaXMuQW8gPSBuLCB0aGlzLlJvID0gcywgdGhpcy5ibyA9IGksIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIgPSByLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIgPSBvLCB0aGlzLmxpc3RlbmVyID0gdSwgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbG9zZSBjb3VudCB0aGF0J3MgaW5jcmVtZW50ZWQgZXZlcnkgdGltZSB0aGUgc3RyZWFtIGlzIGNsb3NlZDsgdXNlZCBieVxuICAgICAgICAgKiBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKCkgdG8gaW52YWxpZGF0ZSBjYWxsYmFja3MgdGhhdCBoYXBwZW4gYWZ0ZXJcbiAgICAgICAgICogY2xvc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlBvID0gMCwgdGhpcy5WbyA9IG51bGwsIHRoaXMudm8gPSBudWxsLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuU28gPSBuZXcgS28odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIERvKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBTdGFydGluZyAqLyA9PT0gdGhpcy5zdGF0ZSB8fCA1IC8qIEJhY2tvZmYgKi8gPT09IHRoaXMuc3RhdGUgfHwgdGhpcy5DbygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHVuZGVybHlpbmcgUlBDIGlzIG9wZW4gKHRoZSBvbk9wZW4oKSBsaXN0ZW5lciBoYXMgYmVlblxuICAgICAqIGNhbGxlZCkgYW5kIHRoZSBzdHJlYW0gaXMgcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLlxuICAgICAqLyAgICBDbygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIEhlYWx0aHkgKi8gPT09IHRoaXMuc3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgUlBDLiBPbmx5IGFsbG93ZWQgaWYgaXNTdGFydGVkKCkgcmV0dXJucyBmYWxzZS4gVGhlIHN0cmVhbSBpc1xuICAgICAqIG5vdCBpbW1lZGlhdGVseSByZWFkeSBmb3IgdXNlOiBvbk9wZW4oKSB3aWxsIGJlIGludm9rZWQgd2hlbiB0aGUgUlBDIGlzXG4gICAgICogcmVhZHkgZm9yIG91dGJvdW5kIHJlcXVlc3RzLCBhdCB3aGljaCBwb2ludCBpc09wZW4oKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqXG4gICAgICogV2hlbiBzdGFydCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSB3aWxsIHJldHVybiB0cnVlLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgNCAvKiBFcnJvciAqLyAhPT0gdGhpcy5zdGF0ZSA/IHRoaXMuYXV0aCgpIDogdGhpcy54bygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdG9wcyB0aGUgUlBDLiBUaGlzIGNhbGwgaXMgaWRlbXBvdGVudCBhbmQgYWxsb3dlZCByZWdhcmRsZXNzIG9mIHRoZVxuICAgICAqIGN1cnJlbnQgaXNTdGFydGVkKCkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0b3AgcmV0dXJucywgaXNTdGFydGVkKCkgYW5kIGlzT3BlbigpIHdpbGwgYm90aCByZXR1cm4gZmFsc2UuXG4gICAgICovICAgIGFzeW5jIHN0b3AoKSB7XG4gICAgICAgIHRoaXMuRG8oKSAmJiBhd2FpdCB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgTm8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIEluaXRpYWwgKi8gLCB0aGlzLlNvLnJlc2V0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1hcmtzIHRoaXMgc3RyZWFtIGFzIGlkbGUuIElmIG5vIGZ1cnRoZXIgYWN0aW9ucyBhcmUgcGVyZm9ybWVkIG9uIHRoZVxuICAgICAqIHN0cmVhbSBmb3Igb25lIG1pbnV0ZSwgdGhlIHN0cmVhbSB3aWxsIGF1dG9tYXRpY2FsbHkgY2xvc2UgaXRzZWxmIGFuZFxuICAgICAqIG5vdGlmeSB0aGUgc3RyZWFtJ3Mgb25DbG9zZSgpIGhhbmRsZXIgd2l0aCBTdGF0dXMuT0suIFRoZSBzdHJlYW0gd2lsbCB0aGVuXG4gICAgICogYmUgaW4gYSAhaXNTdGFydGVkKCkgc3RhdGUsIHJlcXVpcmluZyB0aGUgY2FsbGVyIHRvIHN0YXJ0IHRoZSBzdHJlYW0gYWdhaW5cbiAgICAgKiBiZWZvcmUgZnVydGhlciB1c2UuXG4gICAgICpcbiAgICAgKiBPbmx5IHN0cmVhbXMgdGhhdCBhcmUgaW4gc3RhdGUgJ09wZW4nIGNhbiBiZSBtYXJrZWQgaWRsZSwgYXMgYWxsIG90aGVyXG4gICAgICogc3RhdGVzIGltcGx5IHBlbmRpbmcgbmV0d29yayBvcGVyYXRpb25zLlxuICAgICAqLyAgICBrbygpIHtcbiAgICAgICAgLy8gU3RhcnRzIHRoZSBpZGxlIHRpbWUgaWYgd2UgYXJlIGluIHN0YXRlICdPcGVuJyBhbmQgYXJlIG5vdCB5ZXQgYWxyZWFkeVxuICAgICAgICAvLyBydW5uaW5nIGEgdGltZXIgKGluIHdoaWNoIGNhc2UgdGhlIHByZXZpb3VzIGlkbGUgdGltZW91dCBzdGlsbCBhcHBsaWVzKS5cbiAgICAgICAgdGhpcy5DbygpICYmIG51bGwgPT09IHRoaXMuVm8gJiYgKHRoaXMuVm8gPSB0aGlzLkpuLmVucXVldWVBZnRlckRlbGF5KHRoaXMuQW8sIDZlNCwgKCgpID0+IHRoaXMuTW8oKSkpKTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgbWVzc2FnZSB0byB0aGUgdW5kZXJseWluZyBzdHJlYW0uICovICAgIE9vKHQpIHtcbiAgICAgICAgdGhpcy5GbygpLCB0aGlzLnN0cmVhbS5zZW5kKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIGJ5IHRoZSBpZGxlIHRpbWVyIHdoZW4gdGhlIHN0cmVhbSBzaG91bGQgY2xvc2UgZHVlIHRvIGluYWN0aXZpdHkuICovICAgIGFzeW5jIE1vKCkge1xuICAgICAgICBpZiAodGhpcy5DbygpKSBcbiAgICAgICAgLy8gV2hlbiB0aW1pbmcgb3V0IGFuIGlkbGUgc3RyZWFtIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGZvcmNlIHRoZSBzdHJlYW0gaW50byBiYWNrb2ZmIHdoZW5cbiAgICAgICAgLy8gaXQgcmVzdGFydHMgc28gc2V0IHRoZSBzdHJlYW0gc3RhdGUgdG8gSW5pdGlhbCBpbnN0ZWFkIG9mIEVycm9yLlxuICAgICAgICByZXR1cm4gdGhpcy5jbG9zZSgwIC8qIEluaXRpYWwgKi8pO1xuICAgIH1cbiAgICAvKiogTWFya3MgdGhlIHN0cmVhbSBhcyBhY3RpdmUgYWdhaW4uICovICAgIEZvKCkge1xuICAgICAgICB0aGlzLlZvICYmICh0aGlzLlZvLmNhbmNlbCgpLCB0aGlzLlZvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBDYW5jZWxzIHRoZSBoZWFsdGggY2hlY2sgZGVsYXllZCBvcGVyYXRpb24uICovICAgICRvKCkge1xuICAgICAgICB0aGlzLnZvICYmICh0aGlzLnZvLmNhbmNlbCgpLCB0aGlzLnZvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB0aGUgc3RyZWFtIGFuZCBjbGVhbnMgdXAgYXMgbmVjZXNzYXJ5OlxuICAgICAqXG4gICAgICogKiBjbG9zZXMgdGhlIHVuZGVybHlpbmcgR1JQQyBzdHJlYW07XG4gICAgICogKiBjYWxscyB0aGUgb25DbG9zZSBoYW5kbGVyIHdpdGggdGhlIGdpdmVuICdlcnJvcic7XG4gICAgICogKiBzZXRzIGludGVybmFsIHN0cmVhbSBzdGF0ZSB0byAnZmluYWxTdGF0ZSc7XG4gICAgICogKiBhZGp1c3RzIHRoZSBiYWNrb2ZmIHRpbWVyIGJhc2VkIG9uIHRoZSBlcnJvclxuICAgICAqXG4gICAgICogQSBuZXcgc3RyZWFtIGNhbiBiZSBvcGVuZWQgYnkgY2FsbGluZyBzdGFydCgpLlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpbmFsU3RhdGUgLSB0aGUgaW50ZW5kZWQgc3RhdGUgb2YgdGhlIHN0cmVhbSBhZnRlciBjbG9zaW5nLlxuICAgICAqIEBwYXJhbSBlcnJvciAtIHRoZSBlcnJvciB0aGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIHdpdGguXG4gICAgICovICAgIGFzeW5jIGNsb3NlKHQsIGUpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBvdXRzdGFuZGluZyB0aW1lcnMgKHRoZXkncmUgZ3VhcmFudGVlZCBub3QgdG8gZXhlY3V0ZSkuXG4gICAgICAgIHRoaXMuRm8oKSwgdGhpcy4kbygpLCB0aGlzLlNvLmNhbmNlbCgpLCBcbiAgICAgICAgLy8gSW52YWxpZGF0ZXMgYW55IHN0cmVhbS1yZWxhdGVkIGNhbGxiYWNrcyAoZS5nLiBmcm9tIGF1dGggb3IgdGhlXG4gICAgICAgIC8vIHVuZGVybHlpbmcgc3RyZWFtKSwgZ3VhcmFudGVlaW5nIHRoZXkgd29uJ3QgZXhlY3V0ZS5cbiAgICAgICAgdGhpcy5QbysrLCA0IC8qIEVycm9yICovICE9PSB0ID8gXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAgICAgICAgdGhpcy5Tby5yZXNldCgpIDogZSAmJiBlLmNvZGUgPT09IEsuUkVTT1VSQ0VfRVhIQVVTVEVEID8gKFxuICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxuICAgICAgICBGKGUudG9TdHJpbmcoKSksIEYoXCJVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC5cIiksIFxuICAgICAgICB0aGlzLlNvLnBvKCkpIDogZSAmJiBlLmNvZGUgPT09IEsuVU5BVVRIRU5USUNBVEVEICYmIDMgLyogSGVhbHRoeSAqLyAhPT0gdGhpcy5zdGF0ZSAmJiAoXG4gICAgICAgIC8vIFwidW5hdXRoZW50aWNhdGVkXCIgZXJyb3IgbWVhbnMgdGhlIHRva2VuIHdhcyByZWplY3RlZC4gVGhpcyBzaG91bGQgcmFyZWx5XG4gICAgICAgIC8vIGhhcHBlbiBzaW5jZSBib3RoIEF1dGggYW5kIEFwcENoZWNrIGVuc3VyZSBhIHN1ZmZpY2llbnQgVFRMIHdoZW4gd2VcbiAgICAgICAgLy8gcmVxdWVzdCBhIHRva2VuLiBJZiBhIHVzZXIgbWFudWFsbHkgcmVzZXRzIHRoZWlyIHN5c3RlbSBjbG9jayB0aGlzIGNhblxuICAgICAgICAvLyBmYWlsLCBob3dldmVyLiBJbiB0aGlzIGNhc2UsIHdlIHNob3VsZCBnZXQgYSBDb2RlLlVOQVVUSEVOVElDQVRFRCBlcnJvclxuICAgICAgICAvLyBiZWZvcmUgd2UgcmVjZWl2ZWQgdGhlIGZpcnN0IG1lc3NhZ2UgYW5kIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSB0aGUgdG9rZW5cbiAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgd2UgZmV0Y2ggYSBuZXcgdG9rZW4uXG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpKSwgXG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBiZWNhdXNlIHdlIGFyZSBubyBsb25nZXIgaW50ZXJlc3RlZCBpbiBldmVudHMuXG4gICAgICAgIG51bGwgIT09IHRoaXMuc3RyZWFtICYmICh0aGlzLkJvKCksIHRoaXMuc3RyZWFtLmNsb3NlKCksIHRoaXMuc3RyZWFtID0gbnVsbCksIFxuICAgICAgICAvLyBUaGlzIHN0YXRlIG11c3QgYmUgYXNzaWduZWQgYmVmb3JlIGNhbGxpbmcgb25DbG9zZSgpIHRvIGFsbG93IHRoZSBjYWxsYmFjayB0b1xuICAgICAgICAvLyBpbmhpYml0IGJhY2tvZmYgb3Igb3RoZXJ3aXNlIG1hbmlwdWxhdGUgdGhlIHN0YXRlIGluIGl0cyBub24tc3RhcnRlZCBzdGF0ZS5cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIFxuICAgICAgICAvLyBOb3RpZnkgdGhlIGxpc3RlbmVyIHRoYXQgdGhlIHN0cmVhbSBjbG9zZWQuXG4gICAgICAgIGF3YWl0IHRoaXMubGlzdGVuZXIuSnIoZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbiBiZSBvdmVycmlkZGVuIHRvIHBlcmZvcm0gYWRkaXRpb25hbCBjbGVhbnVwIGJlZm9yZSB0aGUgc3RyZWFtIGlzIGNsb3NlZC5cbiAgICAgKiBDYWxsaW5nIHN1cGVyLnRlYXJEb3duKCkgaXMgbm90IHJlcXVpcmVkLlxuICAgICAqLyAgICBCbygpIHt9XG4gICAgYXV0aCgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDEgLyogU3RhcnRpbmcgKi87XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLkxvKHRoaXMuUG8pLCBlID0gdGhpcy5QbztcbiAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBKdXN0IHVzZSBkaXNwYXRjaElmTm90Q2xvc2VkLCBidXQgc2VlIFRPRE8gYmVsb3cuXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyLmdldFRva2VuKCkgXSkudGhlbigoKFt0LCBuXSkgPT4ge1xuICAgICAgICAgICAgLy8gU3RyZWFtIGNhbiBiZSBzdG9wcGVkIHdoaWxlIHdhaXRpbmcgZm9yIGF1dGhlbnRpY2F0aW9uLlxuICAgICAgICAgICAgLy8gVE9ETyhtaWtlbGVoZW4pOiBXZSByZWFsbHkgc2hvdWxkIGp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWRcbiAgICAgICAgICAgIC8vIGFuZCBsZXQgdGhpcyBkaXNwYXRjaCBvbnRvIHRoZSBxdWV1ZSwgYnV0IHRoYXQgb3BlbmVkIGEgc3BlYyB0ZXN0IGNhblxuICAgICAgICAgICAgLy8gb2Ygd29ybXMgdGhhdCBJIGRvbid0IHdhbnQgdG8gZGVhbCB3aXRoIGluIHRoaXMgUFIuXG4gICAgICAgICAgICB0aGlzLlBvID09PSBlICYmIFxuICAgICAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCBoYXZlIHRvIHNjaGVkdWxlIHRoZSBjYWxsYmFjayBvbiB0aGUgQXN5bmNRdWV1ZS5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIHRoZSBmb2xsb3dpbmcgY2FsbHMgYXJlIHNhZmUgdG8gYmUgY2FsbGVkIG91dHNpZGUgdGhlXG4gICAgICAgICAgICAvLyBBc3luY1F1ZXVlIHNpbmNlIHRoZXkgZG9uJ3QgY2hhaW4gYXN5bmNocm9ub3VzIGNhbGxzXG4gICAgICAgICAgICB0aGlzLlVvKHQsIG4pO1xuICAgICAgICB9KSwgKGUgPT4ge1xuICAgICAgICAgICAgdCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgUShLLlVOS05PV04sIFwiRmV0Y2hpbmcgYXV0aCB0b2tlbiBmYWlsZWQ6IFwiICsgZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5xbyh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBVbyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkxvKHRoaXMuUG8pO1xuICAgICAgICB0aGlzLnN0cmVhbSA9IHRoaXMuR28odCwgZSksIHRoaXMuc3RyZWFtLnpyKCgoKSA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiAodGhpcy5zdGF0ZSA9IDIgLyogT3BlbiAqLyAsIHRoaXMudm8gPSB0aGlzLkpuLmVucXVldWVBZnRlckRlbGF5KHRoaXMuUm8sIDFlNCwgKCgpID0+ICh0aGlzLkNvKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIEhlYWx0aHkgKi8pLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpLCB0aGlzLmxpc3RlbmVyLnpyKCkpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0uSnIoKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5xbyh0KSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLm9uTWVzc2FnZSgodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLm9uTWVzc2FnZSh0KSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHhvKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gNSAvKiBCYWNrb2ZmICovICwgdGhpcy5Tby5JbygoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIHFvKHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiBPKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBFcnJvciAqLyAsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgXCJkaXNwYXRjaGVyXCIgZnVuY3Rpb24gdGhhdCBkaXNwYXRjaGVzIG9wZXJhdGlvbnMgb250byB0aGVcbiAgICAgKiBBc3luY1F1ZXVlIGJ1dCBvbmx5IHJ1bnMgdGhlbSBpZiBjbG9zZUNvdW50IHJlbWFpbnMgdW5jaGFuZ2VkLiBUaGlzIGFsbG93c1xuICAgICAqIHVzIHRvIHR1cm4gYXV0aCAvIHN0cmVhbSBjYWxsYmFja3MgaW50byBuby1vcHMgaWYgdGhlIHN0cmVhbSBpcyBjbG9zZWQgL1xuICAgICAqIHJlLW9wZW5lZCwgZXRjLlxuICAgICAqLyAgICBMbyh0KSB7XG4gICAgICAgIHJldHVybiBlID0+IHtcbiAgICAgICAgICAgIHRoaXMuSm4uZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdGhpcy5QbyA9PT0gdCA/IGUoKSA6IChPKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBcInN0cmVhbSBjYWxsYmFjayBza2lwcGVkIGJ5IGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIuXCIpLCBcbiAgICAgICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBMaXN0ZW4gUlBDLlxuICpcbiAqIE9uY2UgdGhlIExpc3RlbiBzdHJlYW0gaGFzIGNhbGxlZCB0aGUgb25PcGVuKCkgbGlzdGVuZXIsIGFueSBudW1iZXIgb2ZcbiAqIGxpc3RlbigpIGFuZCB1bmxpc3RlbigpIGNhbGxzIGNhbiBiZSBtYWRlIHRvIGNvbnRyb2wgd2hhdCBjaGFuZ2VzIHdpbGwgYmVcbiAqIHNlbnQgZnJvbSB0aGUgc2VydmVyIGZvciBMaXN0ZW5SZXNwb25zZXMuXG4gKi8gY2xhc3Mgam8gZXh0ZW5kcyBRbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcImxpc3Rlbl9zdHJlYW1fY29ubmVjdGlvbl9iYWNrb2ZmXCIgLyogTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIExpc3RlblN0cmVhbUlkbGUgKi8gLCBcImhlYWx0aF9jaGVja190aW1lb3V0XCIgLyogSGVhbHRoQ2hlY2tUaW1lb3V0ICovICwgZSwgbiwgcywgciksIFxuICAgICAgICB0aGlzLk0gPSBpO1xuICAgIH1cbiAgICBHbyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvLmhvKFwiTGlzdGVuXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMuU28ucmVzZXQoKTtcbiAgICAgICAgY29uc3QgZSA9IFJzKHRoaXMuTSwgdCksIG4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIHQpKSByZXR1cm4gY3QubWluKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRJZHMgJiYgZS50YXJnZXRJZHMubGVuZ3RoID8gY3QubWluKCkgOiBlLnJlYWRUaW1lID8gZnMoZS5yZWFkVGltZSkgOiBjdC5taW4oKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuS28oZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIFFvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gcHModGhpcy5NKSwgZS5hZGRUYXJnZXQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIHJldHVybiBuID0gd2UocykgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiB2cyh0LCBzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogU3ModCwgcylcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSBlLnRhcmdldElkLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgPyBuLnJlc3VtZVRva2VuID0gaHModCwgZS5yZXN1bWVUb2tlbikgOiBlLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8oY3QubWluKCkpID4gMCAmJiAoXG4gICAgICAgICAgICAvLyBUT0RPKHd1YW5keSk6IENvbnNpZGVyIHJlbW92aW5nIGFib3ZlIGNoZWNrIGJlY2F1c2UgaXQgaXMgbW9zdCBsaWtlbHkgdHJ1ZS5cbiAgICAgICAgICAgIC8vIFJpZ2h0IG5vdywgbWFueSB0ZXN0cyBkZXBlbmQgb24gdGhpcyBiZWhhdmlvdXIgdGhvdWdoIChsZWF2aW5nIG1pbigpIG91dFxuICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICBuLnJlYWRUaW1lID0gY3ModCwgZS5zbmFwc2hvdFZlcnNpb24udG9UaW1lc3RhbXAoKSkpLCBuO1xuICAgICAgICB9KHRoaXMuTSwgdCk7XG4gICAgICAgIGNvbnN0IG4gPSBDcyh0aGlzLk0sIHQpO1xuICAgICAgICBuICYmIChlLmxhYmVscyA9IG4pLCB0aGlzLk9vKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aCB0aGVcbiAgICAgKiBnaXZlbiB0YXJnZXRJZC5cbiAgICAgKi8gICAgam8odCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBwcyh0aGlzLk0pLCBlLnJlbW92ZVRhcmdldCA9IHQsIHRoaXMuT28oZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgU3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgV3JpdGUgUlBDLlxuICpcbiAqIFRoZSBXcml0ZSBSUEMgcmVxdWlyZXMgdGhlIGNhbGxlciB0byBtYWludGFpbiBzcGVjaWFsIHN0cmVhbVRva2VuXG4gKiBzdGF0ZSBpbiBiZXR3ZWVuIGNhbGxzLCB0byBoZWxwIHRoZSBzZXJ2ZXIgdW5kZXJzdGFuZCB3aGljaCByZXNwb25zZXMgdGhlXG4gKiBjbGllbnQgaGFzIHByb2Nlc3NlZCBieSB0aGUgdGltZSB0aGUgbmV4dCByZXF1ZXN0IGlzIG1hZGUuIEV2ZXJ5IHJlc3BvbnNlXG4gKiB3aWxsIGNvbnRhaW4gYSBzdHJlYW1Ub2tlbjsgdGhpcyB2YWx1ZSBtdXN0IGJlIHBhc3NlZCB0byB0aGUgbmV4dFxuICogcmVxdWVzdC5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIHN0YXJ0KCkgb24gdGhpcyBzdHJlYW0sIHRoZSBuZXh0IHJlcXVlc3QgbXVzdCBiZSBhIGhhbmRzaGFrZSxcbiAqIGNvbnRhaW5pbmcgd2hhdGV2ZXIgc3RyZWFtVG9rZW4gaXMgb24gaGFuZC4gT25jZSBhIHJlc3BvbnNlIHRvIHRoaXNcbiAqIHJlcXVlc3QgaXMgcmVjZWl2ZWQsIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBtYXkgYmUgc3VibWl0dGVkLiBXaGVuXG4gKiBzdWJtaXR0aW5nIG11bHRpcGxlIGJhdGNoZXMgb2YgbXV0YXRpb25zIGF0IHRoZSBzYW1lIHRpbWUsIGl0J3NcbiAqIG9rYXkgdG8gdXNlIHRoZSBzYW1lIHN0cmVhbVRva2VuIGZvciB0aGUgY2FsbHMgdG8gd3JpdGVNdXRhdGlvbnMuXG4gKlxuICogVE9ETyhiLzMzMjcxMjM1KTogVXNlIHByb3RvIHR5cGVzXG4gKi8gY2xhc3MgV28gZXh0ZW5kcyBRbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBcIndyaXRlX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBXcml0ZVN0cmVhbUNvbm5lY3Rpb25CYWNrb2ZmICovICwgXCJ3cml0ZV9zdHJlYW1faWRsZVwiIC8qIFdyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBzLCByKSwgXG4gICAgICAgIHRoaXMuTSA9IGksIHRoaXMuV28gPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJhY2tzIHdoZXRoZXIgb3Igbm90IGEgaGFuZHNoYWtlIGhhcyBiZWVuIHN1Y2Nlc3NmdWxseSBleGNoYW5nZWQgYW5kXG4gICAgICogdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgbXV0YXRpb25zLlxuICAgICAqLyAgICBnZXQgem8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLldvO1xuICAgIH1cbiAgICAvLyBPdmVycmlkZSBvZiBQZXJzaXN0ZW50U3RyZWFtLnN0YXJ0XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuV28gPSAhMSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB2b2lkIDAsIHN1cGVyLnN0YXJ0KCk7XG4gICAgfVxuICAgIEJvKCkge1xuICAgICAgICB0aGlzLldvICYmIHRoaXMuSG8oW10pO1xuICAgIH1cbiAgICBHbyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJvLmhvKFwiV3JpdGVcIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgLy8gQWx3YXlzIGNhcHR1cmUgdGhlIGxhc3Qgc3RyZWFtIHRva2VuLlxuICAgICAgICBVKCEhdC5zdHJlYW1Ub2tlbiksIHRoaXMubGFzdFN0cmVhbVRva2VuID0gdC5zdHJlYW1Ub2tlbiwgdGhpcy5Xbykge1xuICAgICAgICAgICAgLy8gQSBzdWNjZXNzZnVsIGZpcnN0IHdyaXRlIHJlc3BvbnNlIG1lYW5zIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSxcbiAgICAgICAgICAgIC8vIE5vdGUsIHRoYXQgd2UgY291bGQgY29uc2lkZXIgYSBzdWNjZXNzZnVsIGhhbmRzaGFrZSBoZWFsdGh5LCBob3dldmVyLFxuICAgICAgICAgICAgLy8gdGhlIHdyaXRlIGl0c2VsZiBtaWdodCBiZSBjYXVzaW5nIGFuIGVycm9yIHdlIHdhbnQgdG8gYmFjayBvZmYgZnJvbS5cbiAgICAgICAgICAgIHRoaXMuU28ucmVzZXQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBWcyh0LndyaXRlUmVzdWx0cywgdC5jb21taXRUaW1lKSwgbiA9IGZzKHQuY29tbWl0VGltZSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5KbyhuLCBlKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgZmlyc3QgcmVzcG9uc2UgaXMgYWx3YXlzIHRoZSBoYW5kc2hha2UgcmVzcG9uc2VcbiAgICAgICAgcmV0dXJuIFUoIXQud3JpdGVSZXN1bHRzIHx8IDAgPT09IHQud3JpdGVSZXN1bHRzLmxlbmd0aCksIHRoaXMuV28gPSAhMCwgdGhpcy5saXN0ZW5lci5ZbygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZW5kcyBhbiBpbml0aWFsIHN0cmVhbVRva2VuIHRvIHRoZSBzZXJ2ZXIsIHBlcmZvcm1pbmcgdGhlIGhhbmRzaGFrZVxuICAgICAqIHJlcXVpcmVkIHRvIG1ha2UgdGhlIFN0cmVhbWluZ1dyaXRlIFJQQyB3b3JrLiBTdWJzZXF1ZW50XG4gICAgICogY2FsbHMgc2hvdWxkIHdhaXQgdW50aWwgb25IYW5kc2hha2VDb21wbGV0ZSB3YXMgY2FsbGVkLlxuICAgICAqLyAgICBYbygpIHtcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBTdXBwb3J0IHN0cmVhbSByZXN1bXB0aW9uLiBXZSBpbnRlbnRpb25hbGx5IGRvIG5vdCBzZXQgdGhlXG4gICAgICAgIC8vIHN0cmVhbSB0b2tlbiBvbiB0aGUgaGFuZHNoYWtlLCBpZ25vcmluZyBhbnkgc3RyZWFtIHRva2VuIHdlIG1pZ2h0IGhhdmUuXG4gICAgICAgIGNvbnN0IHQgPSB7fTtcbiAgICAgICAgdC5kYXRhYmFzZSA9IHBzKHRoaXMuTSksIHRoaXMuT28odCk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIGdyb3VwIG9mIG11dGF0aW9ucyB0byB0aGUgRmlyZXN0b3JlIGJhY2tlbmQgdG8gYXBwbHkuICovICAgIEhvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIHN0cmVhbVRva2VuOiB0aGlzLmxhc3RTdHJlYW1Ub2tlbixcbiAgICAgICAgICAgIHdyaXRlczogdC5tYXAoKHQgPT4gYnModGhpcy5NLCB0KSkpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuT28oZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEYXRhc3RvcmUgYW5kIGl0cyByZWxhdGVkIG1ldGhvZHMgYXJlIGEgd3JhcHBlciBhcm91bmQgdGhlIGV4dGVybmFsIEdvb2dsZVxuICogQ2xvdWQgRGF0YXN0b3JlIGdycGMgQVBJLCB3aGljaCBwcm92aWRlcyBhbiBpbnRlcmZhY2UgdGhhdCBpcyBtb3JlIGNvbnZlbmllbnRcbiAqIGZvciB0aGUgcmVzdCBvZiB0aGUgY2xpZW50IFNESyBhcmNoaXRlY3R1cmUgdG8gY29uc3VtZS5cbiAqL1xuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBEYXRhc3RvcmUgdGhhdCBleHBvc2VzIGFkZGl0aW9uYWwgc3RhdGUgZm9yIGludGVybmFsXG4gKiBjb25zdW1wdGlvbi5cbiAqL1xuY2xhc3Mgem8gZXh0ZW5kcyBjbGFzcyB7fSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuYm8gPSBuLCB0aGlzLk0gPSBzLCBcbiAgICAgICAgdGhpcy5abyA9ICExO1xuICAgIH1cbiAgICB0dSgpIHtcbiAgICAgICAgaWYgKHRoaXMuWm8pIHRocm93IG5ldyBRKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIHJvKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHUoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3MsIGldKSA9PiB0aGlzLmJvLnJvKHQsIGUsIG4sIHMsIGkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/ICh0LmNvZGUgPT09IEsuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCB0KSA6IG5ldyBRKEsuVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKiogSW52b2tlcyB0aGUgcHJvdmlkZWQgUlBDIHdpdGggc3RyZWFtZWQgcmVzdWx0cyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgY28odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy50dSgpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuYm8uY28odCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFEoSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5abyA9ICEwO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmV4cCk6IE1ha2Ugc3VyZSB0aGVyZSBpcyBvbmx5IG9uZSBEYXRhc3RvcmUgaW5zdGFuY2UgcGVyXG4vLyBmaXJlc3RvcmUtZXhwIGNsaWVudC5cbi8qKlxuICogQSBjb21wb25lbnQgdXNlZCBieSB0aGUgUmVtb3RlU3RvcmUgdG8gdHJhY2sgdGhlIE9ubGluZVN0YXRlICh0aGF0IGlzLFxuICogd2hldGhlciBvciBub3QgdGhlIGNsaWVudCBhcyBhIHdob2xlIHNob3VsZCBiZSBjb25zaWRlcmVkIHRvIGJlIG9ubGluZSBvclxuICogb2ZmbGluZSksIGltcGxlbWVudGluZyB0aGUgYXBwcm9wcmlhdGUgaGV1cmlzdGljcy5cbiAqXG4gKiBJbiBwYXJ0aWN1bGFyLCB3aGVuIHRoZSBjbGllbnQgaXMgdHJ5aW5nIHRvIGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQsIHdlXG4gKiBhbGxvdyB1cCB0byBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHdpdGhpbiBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUyBmb3JcbiAqIGEgY29ubmVjdGlvbiB0byBzdWNjZWVkLiBJZiB3ZSBoYXZlIHRvbyBtYW55IGZhaWx1cmVzIG9yIHRoZSB0aW1lb3V0IGVsYXBzZXMsXG4gKiB0aGVuIHdlIHNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSwgYW5kIHRoZSBjbGllbnQgd2lsbCBiZWhhdmUgYXMgaWZcbiAqIGl0IGlzIG9mZmxpbmUgKGdldCgpcyB3aWxsIHJldHVybiBjYWNoZWQgZGF0YSwgZXRjLikuXG4gKi9cbmNsYXNzIEhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gZSwgXG4gICAgICAgIC8qKiBUaGUgY3VycmVudCBPbmxpbmVTdGF0ZS4gKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY291bnQgb2YgY29uc2VjdXRpdmUgZmFpbHVyZXMgdG8gb3BlbiB0aGUgc3RyZWFtLiBJZiBpdCByZWFjaGVzIHRoZVxuICAgICAgICAgKiBtYXhpbXVtIGRlZmluZWQgYnkgTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUywgd2UnbGwgc2V0IHRoZSBPbmxpbmVTdGF0ZSB0b1xuICAgICAgICAgKiBPZmZsaW5lLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5ldSA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSB0aW1lciB0aGF0IGVsYXBzZXMgYWZ0ZXIgT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMsIGF0IHdoaWNoIHBvaW50IHdlXG4gICAgICAgICAqIHRyYW5zaXRpb24gZnJvbSBPbmxpbmVTdGF0ZS5Vbmtub3duIHRvIE9ubGluZVN0YXRlLk9mZmxpbmUgd2l0aG91dCB3YWl0aW5nXG4gICAgICAgICAqIGZvciB0aGUgc3RyZWFtIHRvIGFjdHVhbGx5IGZhaWwgKE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgdGltZXMpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5udSA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGUgY2xpZW50IHNob3VsZCBsb2cgYSB3YXJuaW5nIG1lc3NhZ2UgaWYgaXQgZmFpbHMgdG8gY29ubmVjdCB0b1xuICAgICAgICAgKiB0aGUgYmFja2VuZCAoaW5pdGlhbGx5IHRydWUsIGNsZWFyZWQgYWZ0ZXIgYSBzdWNjZXNzZnVsIHN0cmVhbSwgb3IgaWYgd2UndmVcbiAgICAgICAgICogbG9nZ2VkIHRoZSBtZXNzYWdlIGFscmVhZHkpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdSA9ICEwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYnkgUmVtb3RlU3RvcmUgd2hlbiBhIHdhdGNoIHN0cmVhbSBpcyBzdGFydGVkIChpbmNsdWRpbmcgb24gZWFjaFxuICAgICAqIGJhY2tvZmYgYXR0ZW1wdCkuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBhdHRlbXB0LCBpdCBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byBVbmtub3duIGFuZCBzdGFydHNcbiAgICAgKiB0aGUgb25saW5lU3RhdGVUaW1lci5cbiAgICAgKi8gICAgaXUoKSB7XG4gICAgICAgIDAgPT09IHRoaXMuZXUgJiYgKHRoaXMucnUoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIHRoaXMubnUgPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJvbmxpbmVfc3RhdGVfdGltZW91dFwiIC8qIE9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLm51ID0gbnVsbCwgXG4gICAgICAgIHRoaXMub3UoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy5ydShcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIHV1KHQpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLnJ1KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pIDogKHRoaXMuZXUrKywgXG4gICAgICAgIHRoaXMuZXUgPj0gMSAmJiAodGhpcy5hdSgpLCB0aGlzLm91KGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHt0LnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLnJ1KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldCh0KSB7XG4gICAgICAgIHRoaXMuYXUoKSwgdGhpcy5ldSA9IDAsIFwiT25saW5lXCIgLyogT25saW5lICovID09PSB0ICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMuc3UgPSAhMSksIHRoaXMucnUodCk7XG4gICAgfVxuICAgIHJ1KHQpIHtcbiAgICAgICAgdCAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQpKTtcbiAgICB9XG4gICAgb3UodCkge1xuICAgICAgICBjb25zdCBlID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHt0fVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5zdSA/IChGKGUpLCB0aGlzLnN1ID0gITEpIDogTyhcIk9ubGluZVN0YXRlVHJhY2tlclwiLCBlKTtcbiAgICB9XG4gICAgYXUoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMubnUgJiYgKHRoaXMubnUuY2FuY2VsKCksIHRoaXMubnUgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEpvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3UgPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmh1ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubHUgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZ1ID0gW10sIHRoaXMuZHUgPSBpLCB0aGlzLmR1LkJyKCh0ID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICBydSh0aGlzKSAmJiAoTyhcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgICAgICAgICAgICAgICAgICBlLmx1LmFkZCg0IC8qIENvbm5lY3Rpdml0eUNoYW5nZSAqLyksIGF3YWl0IFhvKGUpLCBlLl91LnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgXG4gICAgICAgICAgICAgICAgICAgIGUubHUuZGVsZXRlKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgWW8oZSk7XG4gICAgICAgICAgICAgICAgfSh0aGlzKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgdGhpcy5fdSA9IG5ldyBIbyhuLCBzKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFlvKHQpIHtcbiAgICBpZiAocnUodCkpIGZvciAoY29uc3QgZSBvZiB0LmZ1KSBhd2FpdCBlKC8qIGVuYWJsZWQ9ICovICEwKTtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcmlseSBkaXNhYmxlcyB0aGUgbmV0d29yay4gVGhlIG5ldHdvcmsgY2FuIGJlIHJlLWVuYWJsZWQgdXNpbmdcbiAqIGVuYWJsZU5ldHdvcmsoKS5cbiAqLyBhc3luYyBmdW5jdGlvbiBYbyh0KSB7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZnUpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITEpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBuZXcgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0LiBVc2VzIHJlc3VtZSB0b2tlbiBpZiBwcm92aWRlZC4gSXRcbiAqIGlzIGEgbm8tb3AgaWYgdGhlIHRhcmdldCBvZiBnaXZlbiBgVGFyZ2V0RGF0YWAgaXMgYWxyZWFkeSBiZWluZyBsaXN0ZW5lZCB0by5cbiAqL1xuZnVuY3Rpb24gWm8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIG4uaHUuaGFzKGUudGFyZ2V0SWQpIHx8IChcbiAgICAvLyBNYXJrIHRoaXMgYXMgc29tZXRoaW5nIHRoZSBjbGllbnQgaXMgY3VycmVudGx5IGxpc3RlbmluZyBmb3IuXG4gICAgbi5odS5zZXQoZS50YXJnZXRJZCwgZSksIGl1KG4pID8gXG4gICAgLy8gVGhlIGxpc3RlbiB3aWxsIGJlIHNlbnQgaW4gb25XYXRjaFN0cmVhbU9wZW5cbiAgICBzdShuKSA6IEF1KG4pLkNvKCkgJiYgZXUobiwgZSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgdGhlIGxpc3RlbiBmcm9tIHNlcnZlci4gSXQgaXMgYSBuby1vcCBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGlkIGlzXG4gKiBub3QgYmVpbmcgbGlzdGVuZWQgdG8uXG4gKi8gZnVuY3Rpb24gdHUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gQXUobik7XG4gICAgbi5odS5kZWxldGUoZSksIHMuQ28oKSAmJiBudShuLCBlKSwgMCA9PT0gbi5odS5zaXplICYmIChzLkNvKCkgPyBzLmtvKCkgOiBydShuKSAmJiBcbiAgICAvLyBSZXZlcnQgdG8gT25saW5lU3RhdGUuVW5rbm93biBpZiB0aGUgd2F0Y2ggc3RyZWFtIGlzIG5vdCBvcGVuIGFuZCB3ZVxuICAgIC8vIGhhdmUgbm8gbGlzdGVuZXJzLCBzaW5jZSB3aXRob3V0IGFueSBsaXN0ZW5zIHRvIHNlbmQgd2UgY2Fubm90XG4gICAgLy8gY29uZmlybSBpZiB0aGUgc3RyZWFtIGlzIGhlYWx0aHkgYW5kIHVwZ3JhZGUgdG8gT25saW5lU3RhdGUuT25saW5lLlxuICAgIG4uX3Uuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBXZSBuZWVkIHRvIGluY3JlbWVudCB0aGUgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIGFjayB0byBwcm9jZXNzIGFueSBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIGV1KHQsIGUpIHtcbiAgICB0Lnd1LlooZS50YXJnZXRJZCksIEF1KHQpLlFvKGUpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIG51KHQsIGUpIHtcbiAgICB0Lnd1LlooZSksIEF1KHQpLmpvKGUpO1xufVxuXG5mdW5jdGlvbiBzdSh0KSB7XG4gICAgdC53dSA9IG5ldyBzcyh7XG4gICAgICAgIGdldFJlbW90ZUtleXNGb3JUYXJnZXQ6IGUgPT4gdC5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldChlKSxcbiAgICAgICAgRXQ6IGUgPT4gdC5odS5nZXQoZSkgfHwgbnVsbFxuICAgIH0pLCBBdSh0KS5zdGFydCgpLCB0Ll91Lml1KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSB3YXRjaCBzdHJlYW0gc2hvdWxkIGJlIHN0YXJ0ZWQgYmVjYXVzZSBpdCdzIG5lY2Vzc2FyeVxuICogYW5kIGhhcyBub3QgeWV0IGJlZW4gc3RhcnRlZC5cbiAqLyBmdW5jdGlvbiBpdSh0KSB7XG4gICAgcmV0dXJuIHJ1KHQpICYmICFBdSh0KS5EbygpICYmIHQuaHUuc2l6ZSA+IDA7XG59XG5cbmZ1bmN0aW9uIHJ1KHQpIHtcbiAgICByZXR1cm4gMCA9PT0gRyh0KS5sdS5zaXplO1xufVxuXG5mdW5jdGlvbiBvdSh0KSB7XG4gICAgdC53dSA9IHZvaWQgMDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdXUodCkge1xuICAgIHQuaHUuZm9yRWFjaCgoKGUsIG4pID0+IHtcbiAgICAgICAgZXUodCwgZSk7XG4gICAgfSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBhdSh0LCBlKSB7XG4gICAgb3UodCksIFxuICAgIC8vIElmIHdlIHN0aWxsIG5lZWQgdGhlIHdhdGNoIHN0cmVhbSwgcmV0cnkgdGhlIGNvbm5lY3Rpb24uXG4gICAgaXUodCkgPyAodC5fdS51dShlKSwgc3UodCkpIDogXG4gICAgLy8gTm8gbmVlZCB0byByZXN0YXJ0IHdhdGNoIHN0cmVhbSBiZWNhdXNlIHRoZXJlIGFyZSBubyBhY3RpdmUgdGFyZ2V0cy5cbiAgICAvLyBUaGUgb25saW5lIHN0YXRlIGlzIHNldCB0byB1bmtub3duIGJlY2F1c2UgdGhlcmUgaXMgbm8gYWN0aXZlIGF0dGVtcHRcbiAgICAvLyBhdCBlc3RhYmxpc2hpbmcgYSBjb25uZWN0aW9uXG4gICAgdC5fdS5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGN1KHQsIGUsIG4pIHtcbiAgICBpZiAoXG4gICAgLy8gTWFyayB0aGUgY2xpZW50IGFzIG9ubGluZSBzaW5jZSB3ZSBnb3QgYSBtZXNzYWdlIGZyb20gdGhlIHNlcnZlclxuICAgIHQuX3Uuc2V0KFwiT25saW5lXCIgLyogT25saW5lICovKSwgZSBpbnN0YW5jZW9mIGVzICYmIDIgLyogUmVtb3ZlZCAqLyA9PT0gZS5zdGF0ZSAmJiBlLmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlLnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICB0Lmh1LmhhcyhzKSAmJiAoYXdhaXQgdC5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHMsIG4pLCB0Lmh1LmRlbGV0ZShzKSwgdC53dS5yZW1vdmVUYXJnZXQocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKHQsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgTyhcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgZS50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgaHUodCwgbik7XG4gICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgWm4gPyB0Lnd1LnV0KGUpIDogZSBpbnN0YW5jZW9mIHRzID8gdC53dS5fdChlKSA6IHQud3UuaHQoZSksIFxuICAgICFuLmlzRXF1YWwoY3QubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgbm8odC5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8oZSkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQud3UueXQoZSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuaHUuZ2V0KHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiB0Lmh1LnNldChzLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0Lmh1LmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAoIW4pIFxuICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgLy8gQ2xlYXIgdGhlIHJlc3VtZSB0b2tlbiBmb3IgdGhlIHRhcmdldCwgc2luY2Ugd2UncmUgaW4gYSBrbm93biBtaXNtYXRjaFxuICAgICAgICAgICAgICAgIC8vIHN0YXRlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0Lmh1LnNldChlLCBuLndpdGhSZXN1bWVUb2tlbihwdC5FTVBUWV9CWVRFX1NUUklORywgbi5zbmFwc2hvdFZlcnNpb24pKSwgXG4gICAgICAgICAgICAgICAgLy8gQ2F1c2UgYSBoYXJkIHJlc2V0IGJ5IHVud2F0Y2hpbmcgYW5kIHJld2F0Y2hpbmcgaW1tZWRpYXRlbHksIGJ1dFxuICAgICAgICAgICAgICAgIC8vIGRlbGliZXJhdGVseSBkb24ndCBzZW5kIGEgcmVzdW1lIHRva2VuIHNvIHRoYXQgd2UgZ2V0IGEgZnVsbCB1cGRhdGUuXG4gICAgICAgICAgICAgICAgbnUodCwgZSk7XG4gICAgICAgICAgICAgICAgLy8gTWFyayB0aGUgdGFyZ2V0IHdlIHNlbmQgYXMgYmVpbmcgb24gYmVoYWxmIG9mIGFuIGV4aXN0ZW5jZSBmaWx0ZXJcbiAgICAgICAgICAgICAgICAvLyBtaXNtYXRjaCwgYnV0IGRvbid0IGFjdHVhbGx5IHJldGFpbiB0aGF0IGluIGxpc3RlblRhcmdldHMuIFRoaXMgZW5zdXJlc1xuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgZmxhZyB0aGUgZmlyc3QgcmUtbGlzdGVuIHRoaXMgd2F5IHdpdGhvdXQgaW1wYWN0aW5nIGZ1dHVyZVxuICAgICAgICAgICAgICAgIC8vIGxpc3RlbnMgb2YgdGhpcyB0YXJnZXQgKHRoYXQgbWlnaHQgaGFwcGVuIGUuZy4gb24gcmVjb25uZWN0KS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IERpKG4udGFyZ2V0LCBlLCAxIC8qIEV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovICwgbi5zZXF1ZW5jZU51bWJlcik7XG4gICAgICAgICAgICAgICAgZXUodCwgcyk7XG4gICAgICAgICAgICB9KSksIHQucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQobik7XG4gICAgICAgIH0odCwgbik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmFpc2Ugc25hcHNob3Q6XCIsIGUpLCBhd2FpdCBodSh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVjb3ZlcnkgbG9naWMgZm9yIEluZGV4ZWREQiBlcnJvcnMgdGhhdCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsXG4gKiBgb3BgIHN1Y2NlZWRzLiBSZXRyaWVzIGFyZSBzY2hlZHVsZWQgd2l0aCBiYWNrb2ZmIHVzaW5nXG4gKiBgZW5xdWV1ZVJldHJ5YWJsZSgpYC4gSWYgYG9wKClgIGlzIG5vdCBwcm92aWRlZCwgSW5kZXhlZERCIGFjY2VzcyBpc1xuICogdmFsaWRhdGVkIHZpYSBhIGdlbmVyaWMgb3BlcmF0aW9uLlxuICpcbiAqIFRoZSByZXR1cm5lZCBQcm9taXNlIGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIGJlZm9yZVxuICogYW55IHJldHJ5IGF0dGVtcHQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gaHUodCwgZSwgbikge1xuICAgIGlmICghSWkoZSkpIHRocm93IGU7XG4gICAgdC5sdS5hZGQoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAvLyBEaXNhYmxlIG5ldHdvcmsgYW5kIHJhaXNlIG9mZmxpbmUgc25hcHNob3RzXG4gICAgYXdhaXQgWG8odCksIHQuX3Uuc2V0KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBuIHx8IChcbiAgICAvLyBVc2UgYSBzaW1wbGUgcmVhZCBvcGVyYXRpb24gdG8gZGV0ZXJtaW5lIGlmIEluZGV4ZWREQiByZWNvdmVyZWQuXG4gICAgLy8gSWRlYWxseSwgd2Ugd291bGQgZXhwb3NlIGEgaGVhbHRoIGNoZWNrIGRpcmVjdGx5IG9uIFNpbXBsZURiLCBidXRcbiAgICAvLyBSZW1vdGVTdG9yZSBvbmx5IGhhcyBhY2Nlc3MgdG8gcGVyc2lzdGVuY2UgdGhyb3VnaCBMb2NhbFN0b3JlLlxuICAgIG4gPSAoKSA9PiBubyh0LmxvY2FsU3RvcmUpKSwgXG4gICAgLy8gUHJvYmUgSW5kZXhlZERCIHBlcmlvZGljYWxseSBhbmQgcmUtZW5hYmxlIG5ldHdvcmtcbiAgICB0LmFzeW5jUXVldWUuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXRyeWluZyBJbmRleGVkREIgYWNjZXNzXCIpLCBhd2FpdCBuKCksIHQubHUuZGVsZXRlKDEgLyogSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IFlvKHQpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIGx1KHQsIGUpIHtcbiAgICByZXR1cm4gZSgpLmNhdGNoKChuID0+IGh1KHQsIG4sIGUpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZ1KHQpIHtcbiAgICBjb25zdCBlID0gRyh0KSwgbiA9IFJ1KGUpO1xuICAgIGxldCBzID0gZS5jdS5sZW5ndGggPiAwID8gZS5jdVtlLmN1Lmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDtkdShlKTsgKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgcm8oZS5sb2NhbFN0b3JlLCBzKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIDAgPT09IGUuY3UubGVuZ3RoICYmIG4ua28oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0LmJhdGNoSWQsIF91KGUsIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgaHUoZSwgdCk7XG4gICAgfVxuICAgIHd1KGUpICYmIG11KGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBkdSh0KSB7XG4gICAgcmV0dXJuIHJ1KHQpICYmIHQuY3UubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIF91KHQsIGUpIHtcbiAgICB0LmN1LnB1c2goZSk7XG4gICAgY29uc3QgbiA9IFJ1KHQpO1xuICAgIG4uQ28oKSAmJiBuLnpvICYmIG4uSG8oZS5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiB3dSh0KSB7XG4gICAgcmV0dXJuIHJ1KHQpICYmICFSdSh0KS5EbygpICYmIHQuY3UubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gbXUodCkge1xuICAgIFJ1KHQpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGd1KHQpIHtcbiAgICBSdSh0KS5YbygpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB5dSh0KSB7XG4gICAgY29uc3QgZSA9IFJ1KHQpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmN1KSBlLkhvKG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gcHUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LmN1LnNoaWZ0KCksIGkgPSB2aS5mcm9tKHMsIGUsIG4pO1xuICAgIGF3YWl0IGx1KHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBmdSh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gSXUodCwgZSkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgZSAmJiBSdSh0KS56byAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAobiA9IGUuY29kZSwgeG4obikgJiYgbiAhPT0gSy5BQk9SVEVEKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5jdS5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIFJ1KHQpLk5vKCksIGF3YWl0IGx1KHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIGUpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IGZ1KHQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuO1xuICAgIH0odCwgZSksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgd3UodCkgJiYgbXUodCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFR1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgY29uc3QgcyA9IHJ1KG4pO1xuICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGFcbiAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAvLyBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmUgKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxuICAgICAgICBuLmx1LmFkZCgzIC8qIENyZWRlbnRpYWxDaGFuZ2UgKi8pLCBhd2FpdCBYbyhuKSwgcyAmJiBcbiAgICAvLyBEb24ndCBzZXQgdGhlIG5ldHdvcmsgc3RhdHVzIHRvIFVua25vd24gaWYgd2UgYXJlIG9mZmxpbmUuXG4gICAgbi5fdS5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLyksIGF3YWl0IG4ucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UoZSksIFxuICAgIG4ubHUuZGVsZXRlKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IFlvKG4pO1xufVxuXG4vKipcbiAqIFRvZ2dsZXMgdGhlIG5ldHdvcmsgc3RhdGUgd2hlbiB0aGUgY2xpZW50IGdhaW5zIG9yIGxvc2VzIGl0cyBwcmltYXJ5IGxlYXNlLlxuICovIGFzeW5jIGZ1bmN0aW9uIEV1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICBlID8gKG4ubHUuZGVsZXRlKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCBZbyhuKSkgOiBlIHx8IChuLmx1LmFkZCgyIC8qIElzU2Vjb25kYXJ5ICovKSwgXG4gICAgYXdhaXQgWG8obiksIG4uX3Uuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKTtcbn1cblxuLyoqXG4gKiBJZiBub3QgeWV0IGluaXRpYWxpemVkLCByZWdpc3RlcnMgdGhlIFdhdGNoU3RyZWFtIGFuZCBpdHMgbmV0d29yayBzdGF0ZVxuICogY2FsbGJhY2sgd2l0aCBgcmVtb3RlU3RvcmVJbXBsYC4gUmV0dXJucyB0aGUgZXhpc3Rpbmcgc3RyZWFtIGlmIG9uZSBpc1xuICogYWxyZWFkeSBhdmFpbGFibGUuXG4gKlxuICogUE9SVElORyBOT1RFOiBPbiBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXYXRjaFN0cmVhbSBnZXRzIHJlZ2lzdGVyZWQgb24gc3RhcnR1cC5cbiAqIFRoaXMgaXMgbm90IGRvbmUgb24gV2ViIHRvIGFsbG93IGl0IHRvIGJlIHRyZWUtc2hha2VuLlxuICovIGZ1bmN0aW9uIEF1KHQpIHtcbiAgICByZXR1cm4gdC5tdSB8fCAoXG4gICAgLy8gQ3JlYXRlIHN0cmVhbSAoYnV0IG5vdGUgdGhhdCBpdCBpcyBub3Qgc3RhcnRlZCB5ZXQpLlxuICAgIHQubXUgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBHKHQpO1xuICAgICAgICByZXR1cm4gcy50dSgpLCBuZXcgam8oZSwgcy5ibywgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5NLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgenI6IHV1LmJpbmQobnVsbCwgdCksXG4gICAgICAgIEpyOiBhdS5iaW5kKG51bGwsIHQpLFxuICAgICAgICBLbzogY3UuYmluZChudWxsLCB0KVxuICAgIH0pLCB0LmZ1LnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQubXUuTm8oKSwgaXUodCkgPyBzdSh0KSA6IHQuX3Uuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pKSA6IChhd2FpdCB0Lm11LnN0b3AoKSwgXG4gICAgICAgIG91KHQpKTtcbiAgICB9KSkpLCB0Lm11O1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gUnUodCkge1xuICAgIHJldHVybiB0Lmd1IHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5ndSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEcodCk7XG4gICAgICAgIHJldHVybiBzLnR1KCksIG5ldyBXbyhlLCBzLmJvLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLk0sIG4pO1xuICAgIH0odC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICB6cjogZ3UuYmluZChudWxsLCB0KSxcbiAgICAgICAgSnI6IEl1LmJpbmQobnVsbCwgdCksXG4gICAgICAgIFlvOiB5dS5iaW5kKG51bGwsIHQpLFxuICAgICAgICBKbzogcHUuYmluZChudWxsLCB0KVxuICAgIH0pLCB0LmZ1LnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuZ3UuTm8oKSwgXG4gICAgICAgIC8vIFRoaXMgd2lsbCBzdGFydCB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAgICAgICAgYXdhaXQgZnUodCkpIDogKGF3YWl0IHQuZ3Uuc3RvcCgpLCB0LmN1Lmxlbmd0aCA+IDAgJiYgKE8oXCJSZW1vdGVTdG9yZVwiLCBgU3RvcHBpbmcgd3JpdGUgc3RyZWFtIHdpdGggJHt0LmN1Lmxlbmd0aH0gcGVuZGluZyB3cml0ZXNgKSwgXG4gICAgICAgIHQuY3UgPSBbXSkpO1xuICAgIH0pKSksIHQuZ3U7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYW4gb3BlcmF0aW9uIHNjaGVkdWxlZCB0byBiZSBydW4gaW4gdGhlIGZ1dHVyZSBvbiBhbiBBc3luY1F1ZXVlLlxuICpcbiAqIEl0IGlzIGNyZWF0ZWQgdmlhIERlbGF5ZWRPcGVyYXRpb24uY3JlYXRlQW5kU2NoZWR1bGUoKS5cbiAqXG4gKiBTdXBwb3J0cyBjYW5jZWxsYXRpb24gKHZpYSBjYW5jZWwoKSkgYW5kIGVhcmx5IGV4ZWN1dGlvbiAodmlhIHNraXBEZWxheSgpKS5cbiAqXG4gKiBOb3RlOiBXZSBpbXBsZW1lbnQgYFByb21pc2VMaWtlYCBpbnN0ZWFkIG9mIGBQcm9taXNlYCwgYXMgdGhlIGBQcm9taXNlYCB0eXBlXG4gKiBpbiBuZXdlciB2ZXJzaW9ucyBvZiBUeXBlU2NyaXB0IGRlZmluZXMgYGZpbmFsbHlgLCB3aGljaCBpcyBub3QgYXZhaWxhYmxlIGluXG4gKiBJRS5cbiAqL1xuY2xhc3MgYnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy50YXJnZXRUaW1lTXMgPSBuLCB0aGlzLm9wID0gcywgdGhpcy5yZW1vdmFsQ2FsbGJhY2sgPSBpLCBcbiAgICAgICAgdGhpcy5kZWZlcnJlZCA9IG5ldyBqLCB0aGlzLnRoZW4gPSB0aGlzLmRlZmVycmVkLnByb21pc2UudGhlbi5iaW5kKHRoaXMuZGVmZXJyZWQucHJvbWlzZSksIFxuICAgICAgICAvLyBJdCdzIG5vcm1hbCBmb3IgdGhlIGRlZmVycmVkIHByb21pc2UgdG8gYmUgY2FuY2VsZWQgKGR1ZSB0byBjYW5jZWxsYXRpb24pXG4gICAgICAgIC8vIGFuZCBzbyB3ZSBhdHRhY2ggYSBkdW1teSBjYXRjaCBjYWxsYmFjayB0byBhdm9pZFxuICAgICAgICAvLyAnVW5oYW5kbGVkUHJvbWlzZVJlamVjdGlvbldhcm5pbmcnIGxvZyBzcGFtLlxuICAgICAgICB0aGlzLmRlZmVycmVkLnByb21pc2UuY2F0Y2goKHQgPT4ge30pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIERlbGF5ZWRPcGVyYXRpb24gdGhhdCBoYXMgYmVlbiBzY2hlZHVsZWQgdG8gYmVcbiAgICAgKiBleGVjdXRlZCBvbiB0aGUgcHJvdmlkZWQgYXN5bmNRdWV1ZSBhZnRlciB0aGUgcHJvdmlkZWQgZGVsYXlNcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhc3luY1F1ZXVlIC0gVGhlIHF1ZXVlIHRvIHNjaGVkdWxlIHRoZSBvcGVyYXRpb24gb24uXG4gICAgICogQHBhcmFtIGlkIC0gQSBUaW1lciBJRCBpZGVudGlmeWluZyB0aGUgdHlwZSBvZiBvcGVyYXRpb24gdGhpcyBpcy5cbiAgICAgKiBAcGFyYW0gZGVsYXlNcyAtIFRoZSBkZWxheSAobXMpIGJlZm9yZSB0aGUgb3BlcmF0aW9uIHNob3VsZCBiZSBzY2hlZHVsZWQuXG4gICAgICogQHBhcmFtIG9wIC0gVGhlIG9wZXJhdGlvbiB0byBydW4uXG4gICAgICogQHBhcmFtIHJlbW92YWxDYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgb25jZSB0aGVcbiAgICAgKiAgIG9wZXJhdGlvbiBpcyBleGVjdXRlZCBvciBjYW5jZWxlZCwgbm90aWZ5aW5nIHRoZSBBc3luY1F1ZXVlIHRvIHJlbW92ZSBpdFxuICAgICAqICAgZnJvbSBpdHMgZGVsYXllZE9wZXJhdGlvbnMgbGlzdC5cbiAgICAgKiAgIFBPUlRJTkcgTk9URTogVGhpcyBleGlzdHMgdG8gcHJldmVudCBtYWtpbmcgcmVtb3ZlRGVsYXllZE9wZXJhdGlvbigpIGFuZFxuICAgICAqICAgdGhlIERlbGF5ZWRPcGVyYXRpb24gY2xhc3MgcHVibGljLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlQW5kU2NoZWR1bGUodCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gRGF0ZS5ub3coKSArIG4sIG8gPSBuZXcgYnUodCwgZSwgciwgcywgaSk7XG4gICAgICAgIHJldHVybiBvLnN0YXJ0KG4pLCBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIHRpbWVyLiBUaGlzIGlzIGNhbGxlZCBpbW1lZGlhdGVseSBhZnRlciBjb25zdHJ1Y3Rpb24gYnlcbiAgICAgKiBjcmVhdGVBbmRTY2hlZHVsZSgpLlxuICAgICAqLyAgICBzdGFydCh0KSB7XG4gICAgICAgIHRoaXMudGltZXJIYW5kbGUgPSBzZXRUaW1lb3V0KCgoKSA9PiB0aGlzLmhhbmRsZURlbGF5RWxhcHNlZCgpKSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFF1ZXVlcyB0aGUgb3BlcmF0aW9uIHRvIHJ1biBpbW1lZGlhdGVseSAoaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBydW4gb3JcbiAgICAgKiBjYW5jZWxlZCkuXG4gICAgICovICAgIHNraXBEZWxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgdGhlIG9wZXJhdGlvbiBpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLiBUaGVcbiAgICAgKiBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBBcyBsb25nIGFzIHRoZSBvcGVyYXRpb24gaGFzIG5vdCB5ZXQgYmVlbiBydW4sIGNhbGxpbmcgY2FuY2VsKCkgcHJvdmlkZXMgYVxuICAgICAqIGd1YXJhbnRlZSB0aGF0IHRoZSBvcGVyYXRpb24gd2lsbCBub3QgYmUgcnVuLlxuICAgICAqLyAgICBjYW5jZWwodCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLmNsZWFyVGltZW91dCgpLCB0aGlzLmRlZmVycmVkLnJlamVjdChuZXcgUShLLkNBTkNFTExFRCwgXCJPcGVyYXRpb24gY2FuY2VsbGVkXCIgKyAodCA/IFwiOiBcIiArIHQgOiBcIlwiKSkpKTtcbiAgICB9XG4gICAgaGFuZGxlRGVsYXlFbGFwc2VkKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gbnVsbCAhPT0gdGhpcy50aW1lckhhbmRsZSA/ICh0aGlzLmNsZWFyVGltZW91dCgpLCBcbiAgICAgICAgdGhpcy5vcCgpLnRoZW4oKHQgPT4gdGhpcy5kZWZlcnJlZC5yZXNvbHZlKHQpKSkpIDogUHJvbWlzZS5yZXNvbHZlKCkpKTtcbiAgICB9XG4gICAgY2xlYXJUaW1lb3V0KCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlICYmICh0aGlzLnJlbW92YWxDYWxsYmFjayh0aGlzKSwgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJIYW5kbGUpLCBcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgRmlyZXN0b3JlRXJyb3IgdGhhdCBjYW4gYmUgc3VyZmFjZWQgdG8gdGhlIHVzZXIgaWYgdGhlIHByb3ZpZGVkXG4gKiBlcnJvciBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiBSZS10aHJvd3MgdGhlIGVycm9yIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBQdSh0LCBlKSB7XG4gICAgaWYgKEYoXCJBc3luY1F1ZXVlXCIsIGAke2V9OiAke3R9YCksIElpKHQpKSByZXR1cm4gbmV3IFEoSy5VTkFWQUlMQUJMRSwgYCR7ZX06ICR7dH1gKTtcbiAgICB0aHJvdyB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBEb2N1bWVudFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBkb2N1bWVudHNcbiAqIGluIG9yZGVyIHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgY29tcGFyYXRvci4gV2UgYWx3YXlzIGFkZCBhIGRvY3VtZW50IGtleVxuICogY29tcGFyYXRvciBvbiB0b3Agb2Ygd2hhdCBpcyBwcm92aWRlZCB0byBndWFyYW50ZWUgZG9jdW1lbnQgZXF1YWxpdHkgYmFzZWQgb25cbiAqIHRoZSBrZXkuXG4gKi8gY2xhc3MgVnUge1xuICAgIC8qKiBUaGUgZGVmYXVsdCBvcmRlcmluZyBpcyBieSBrZXkgaWYgdGhlIGNvbXBhcmF0b3IgaXMgb21pdHRlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgLy8gV2UgYXJlIGFkZGluZyBkb2N1bWVudCBrZXkgY29tcGFyYXRvciB0byB0aGUgZW5kIGFzIGl0J3MgdGhlIG9ubHlcbiAgICAgICAgLy8gZ3VhcmFudGVlZCB1bmlxdWUgcHJvcGVydHkgb2YgYSBkb2N1bWVudC5cbiAgICAgICAgdGhpcy5jb21wYXJhdG9yID0gdCA/IChlLCBuKSA9PiB0KGUsIG4pIHx8IHh0LmNvbXBhcmF0b3IoZS5rZXksIG4ua2V5KSA6ICh0LCBlKSA9PiB4dC5jb21wYXJhdG9yKHQua2V5LCBlLmtleSksIFxuICAgICAgICB0aGlzLmtleWVkTWFwID0gS24oKSwgdGhpcy5zb3J0ZWRTZXQgPSBuZXcgTW4odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjb3B5IG9mIHRoZSBleGlzdGluZyBEb2N1bWVudFNldCwgdXNpbmcgdGhlIHNhbWVcbiAgICAgKiBjb21wYXJhdG9yLlxuICAgICAqLyAgICBzdGF0aWMgZW1wdHlTZXQodCkge1xuICAgICAgICByZXR1cm4gbmV3IFZ1KHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgIH1cbiAgICBnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5tYXhLZXkoKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0LmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIHByb3ZpZGVkIGtleSBpbiB0aGUgZG9jdW1lbnQgc2V0LCBvciAtMSBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBrZXkgaXMgbm90IHByZXNlbnQgaW4gdGhlIHNldDtcbiAgICAgKi8gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyB0aGlzLnNvcnRlZFNldC5pbmRleE9mKGUpIDogLTE7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuc2l6ZTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIGRvY3VtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLnNvcnRlZFNldC5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4gKHQoZSksICExKSkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGEgZG9jdW1lbnQgd2l0aCB0aGUgc2FtZSBrZXkgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgLy8gRmlyc3QgcmVtb3ZlIHRoZSBlbGVtZW50IGlmIHdlIGhhdmUgaXQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRlbGV0ZSh0LmtleSk7XG4gICAgICAgIHJldHVybiBlLmNvcHkoZS5rZXllZE1hcC5pbnNlcnQodC5rZXksIHQpLCBlLnNvcnRlZFNldC5pbnNlcnQodCwgbnVsbCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhIGRvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuY29weSh0aGlzLmtleWVkTWFwLnJlbW92ZSh0KSwgdGhpcy5zb3J0ZWRTZXQucmVtb3ZlKGUpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgVnUpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKSwgbiA9IHQuc29ydGVkU2V0LmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoIXQuaXNFcXVhbChzKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCAwID09PSB0Lmxlbmd0aCA/IFwiRG9jdW1lbnRTZXQgKClcIiA6IFwiRG9jdW1lbnRTZXQgKFxcbiAgXCIgKyB0LmpvaW4oXCIgIFxcblwiKSArIFwiXFxuKVwiO1xuICAgIH1cbiAgICBjb3B5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBWdTtcbiAgICAgICAgcmV0dXJuIG4uY29tcGFyYXRvciA9IHRoaXMuY29tcGFyYXRvciwgbi5rZXllZE1hcCA9IHQsIG4uc29ydGVkU2V0ID0gZSwgbjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50Q2hhbmdlU2V0IGtlZXBzIHRyYWNrIG9mIGEgc2V0IG9mIGNoYW5nZXMgdG8gZG9jcyBpbiBhIHF1ZXJ5LCBtZXJnaW5nXG4gKiBkdXBsaWNhdGUgZXZlbnRzIGZvciB0aGUgc2FtZSBkb2MuXG4gKi8gY2xhc3MgdnUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnl1ID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICB0cmFjayh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRvYy5rZXksIG4gPSB0aGlzLnl1LmdldChlKTtcbiAgICAgICAgbiA/IFxuICAgICAgICAvLyBNZXJnZSB0aGUgbmV3IGNoYW5nZSB3aXRoIHRoZSBleGlzdGluZyBjaGFuZ2UuXG4gICAgICAgIDAgLyogQWRkZWQgKi8gIT09IHQudHlwZSAmJiAzIC8qIE1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLnl1ID0gdGhpcy55dS5pbnNlcnQoZSwgdCkgOiAzIC8qIE1ldGFkYXRhICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovICE9PSBuLnR5cGUgPyB0aGlzLnl1ID0gdGhpcy55dS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogbi50eXBlLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLnl1ID0gdGhpcy55dS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMueXUgPSB0aGlzLnl1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIEFkZGVkICovID09PSBuLnR5cGUgPyB0aGlzLnl1ID0gdGhpcy55dS5yZW1vdmUoZSkgOiAxIC8qIFJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIE1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLnl1ID0gdGhpcy55dS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgIGRvYzogbi5kb2NcbiAgICAgICAgfSkgOiAwIC8qIEFkZGVkICovID09PSB0LnR5cGUgJiYgMSAvKiBSZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLnl1ID0gdGhpcy55dS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogXG4gICAgICAgIC8vIFRoaXMgaW5jbHVkZXMgdGhlc2UgY2FzZXMsIHdoaWNoIGRvbid0IG1ha2Ugc2Vuc2U6XG4gICAgICAgIC8vIEFkZGVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5SZW1vdmVkXG4gICAgICAgIC8vIE1vZGlmaWVkLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5Nb2RpZmllZFxuICAgICAgICAvLyBNZXRhZGF0YS0+QWRkZWRcbiAgICAgICAgLy8gUmVtb3ZlZC0+TWV0YWRhdGFcbiAgICAgICAgTCgpIDogdGhpcy55dSA9IHRoaXMueXUuaW5zZXJ0KGUsIHQpO1xuICAgIH1cbiAgICBwdSgpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy55dS5pbm9yZGVyVHJhdmVyc2FsKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKG4pO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxufVxuXG5jbGFzcyBTdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy5kb2NzID0gZSwgdGhpcy5vbGREb2NzID0gbiwgdGhpcy5kb2NDaGFuZ2VzID0gcywgdGhpcy5tdXRhdGVkS2V5cyA9IGksIFxuICAgICAgICB0aGlzLmZyb21DYWNoZSA9IHIsIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9IG8sIHRoaXMuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMgPSB1O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCBuZXcgU3UodCwgZSwgVnUuZW1wdHlTZXQoZSksIGksIG4sIHMsIFxuICAgICAgICAvKiBzeW5jU3RhdGVDaGFuZ2VkPSAqLyAhMCwgXG4gICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSk7XG4gICAgfVxuICAgIGdldCBoYXNQZW5kaW5nV3JpdGVzKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMubXV0YXRlZEtleXMuaXNFbXB0eSgpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlICYmIHRoaXMuc3luY1N0YXRlQ2hhbmdlZCA9PT0gdC5zeW5jU3RhdGVDaGFuZ2VkICYmIHRoaXMubXV0YXRlZEtleXMuaXNFcXVhbCh0Lm11dGF0ZWRLZXlzKSAmJiBxZSh0aGlzLnF1ZXJ5LCB0LnF1ZXJ5KSAmJiB0aGlzLmRvY3MuaXNFcXVhbCh0LmRvY3MpICYmIHRoaXMub2xkRG9jcy5pc0VxdWFsKHQub2xkRG9jcykpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY0NoYW5nZXMsIG4gPSB0LmRvY0NoYW5nZXM7XG4gICAgICAgIGlmIChlLmxlbmd0aCAhPT0gbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBlLmxlbmd0aDsgdCsrKSBpZiAoZVt0XS50eXBlICE9PSBuW3RdLnR5cGUgfHwgIWVbdF0uZG9jLmlzRXF1YWwoblt0XS5kb2MpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvbGRzIHRoZSBsaXN0ZW5lcnMgYW5kIHRoZSBsYXN0IHJlY2VpdmVkIFZpZXdTbmFwc2hvdCBmb3IgYSBxdWVyeSBiZWluZ1xuICogdHJhY2tlZCBieSBFdmVudE1hbmFnZXIuXG4gKi8gY2xhc3MgRHUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkl1ID0gdm9pZCAwLCB0aGlzLmxpc3RlbmVycyA9IFtdO1xuICAgIH1cbn1cblxuY2xhc3MgQ3Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnF1ZXJpZXMgPSBuZXcga24oKHQgPT4gR2UodCkpLCBxZSksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgXG4gICAgICAgIHRoaXMuVHUgPSBuZXcgU2V0O1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24geHUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExLCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAociB8fCAoaSA9ICEwLCByID0gbmV3IER1KSwgaSkgdHJ5IHtcbiAgICAgICAgci5JdSA9IGF3YWl0IG4ub25MaXN0ZW4ocyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0gUHUodCwgYEluaXRpYWxpemF0aW9uIG9mIHF1ZXJ5ICcke0tlKGUucXVlcnkpfScgZmFpbGVkYCk7XG4gICAgICAgIHJldHVybiB2b2lkIGUub25FcnJvcihuKTtcbiAgICB9XG4gICAgaWYgKG4ucXVlcmllcy5zZXQocywgciksIHIubGlzdGVuZXJzLnB1c2goZSksIFxuICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgIGUuRXUobi5vbmxpbmVTdGF0ZSksIHIuSXUpIHtcbiAgICAgICAgZS5BdShyLkl1KSAmJiBPdShuKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIE51KHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KSwgcyA9IGUucXVlcnk7XG4gICAgbGV0IGkgPSAhMTtcbiAgICBjb25zdCByID0gbi5xdWVyaWVzLmdldChzKTtcbiAgICBpZiAocikge1xuICAgICAgICBjb25zdCB0ID0gci5saXN0ZW5lcnMuaW5kZXhPZihlKTtcbiAgICAgICAgdCA+PSAwICYmIChyLmxpc3RlbmVycy5zcGxpY2UodCwgMSksIGkgPSAwID09PSByLmxpc3RlbmVycy5sZW5ndGgpO1xuICAgIH1cbiAgICBpZiAoaSkgcmV0dXJuIG4ucXVlcmllcy5kZWxldGUocyksIG4ub25Vbmxpc3RlbihzKTtcbn1cblxuZnVuY3Rpb24ga3UodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIGxldCBzID0gITE7XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgY29uc3QgZSA9IHQucXVlcnksIGkgPSBuLnF1ZXJpZXMuZ2V0KGUpO1xuICAgICAgICBpZiAoaSkge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGkubGlzdGVuZXJzKSBlLkF1KHQpICYmIChzID0gITApO1xuICAgICAgICAgICAgaS5JdSA9IHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcyAmJiBPdShuKTtcbn1cblxuZnVuY3Rpb24gTXUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBHKHQpLCBpID0gcy5xdWVyaWVzLmdldChlKTtcbiAgICBpZiAoaSkgZm9yIChjb25zdCB0IG9mIGkubGlzdGVuZXJzKSB0Lm9uRXJyb3Iobik7XG4gICAgLy8gUmVtb3ZlIGFsbCBsaXN0ZW5lcnMuIE5PVEU6IFdlIGRvbid0IG5lZWQgdG8gY2FsbCBzeW5jRW5naW5lLnVubGlzdGVuKClcbiAgICAvLyBhZnRlciBhbiBlcnJvci5cbiAgICAgICAgcy5xdWVyaWVzLmRlbGV0ZShlKTtcbn1cblxuLy8gQ2FsbCBhbGwgZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyB0aGF0IGhhdmUgYmVlbiBzZXQuXG5mdW5jdGlvbiBPdSh0KSB7XG4gICAgdC5UdS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5uZXh0KCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFF1ZXJ5TGlzdGVuZXIgdGFrZXMgYSBzZXJpZXMgb2YgaW50ZXJuYWwgdmlldyBzbmFwc2hvdHMgYW5kIGRldGVybWluZXNcbiAqIHdoZW4gdG8gcmFpc2UgdGhlIGV2ZW50LlxuICpcbiAqIEl0IHVzZXMgYW4gT2JzZXJ2ZXIgdG8gZGlzcGF0Y2ggZXZlbnRzLlxuICovIGNsYXNzIEZ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLlJ1ID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0aWFsIHNuYXBzaG90cyAoZS5nLiBmcm9tIGNhY2hlKSBtYXkgbm90IGJlIHByb3BhZ2F0ZWQgdG8gdGhlIHdyYXBwZWRcbiAgICAgICAgICogb2JzZXJ2ZXIuIFRoaXMgZmxhZyBpcyBzZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIGFjdHVhbGx5IHJhaXNlZCBhbiBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnUgPSAhMSwgdGhpcy5QdSA9IG51bGwsIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBVbmtub3duICovICwgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgQXUodCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmRvY0NoYW5nZXMpIDMgLyogTWV0YWRhdGEgKi8gIT09IG4udHlwZSAmJiBlLnB1c2gobik7XG4gICAgICAgICAgICB0ID0gbmV3IFN1KHQucXVlcnksIHQuZG9jcywgdC5vbGREb2NzLCBlLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSwgdC5zeW5jU3RhdGVDaGFuZ2VkLCBcbiAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMCk7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnUgPyB0aGlzLlZ1KHQpICYmICh0aGlzLlJ1Lm5leHQodCksIGUgPSAhMCkgOiB0aGlzLnZ1KHQsIHRoaXMub25saW5lU3RhdGUpICYmICh0aGlzLlN1KHQpLCBcbiAgICAgICAgZSA9ICEwKSwgdGhpcy5QdSA9IHQsIGU7XG4gICAgfVxuICAgIG9uRXJyb3IodCkge1xuICAgICAgICB0aGlzLlJ1LmVycm9yKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIGEgc25hcHNob3Qgd2FzIHJhaXNlZC4gKi8gICAgRXUodCkge1xuICAgICAgICB0aGlzLm9ubGluZVN0YXRlID0gdDtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuUHUgJiYgIXRoaXMuYnUgJiYgdGhpcy52dSh0aGlzLlB1LCB0KSAmJiAodGhpcy5TdSh0aGlzLlB1KSwgZSA9ICEwKSwgXG4gICAgICAgIGU7XG4gICAgfVxuICAgIHZ1KHQsIGUpIHtcbiAgICAgICAgLy8gQWx3YXlzIHJhaXNlIHRoZSBmaXJzdCBldmVudCB3aGVuIHdlJ3JlIHN5bmNlZFxuICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSByZXR1cm4gITA7XG4gICAgICAgIC8vIE5PVEU6IFdlIGNvbnNpZGVyIE9ubGluZVN0YXRlLlVua25vd24gYXMgb25saW5lIChpdCBzaG91bGQgYmVjb21lIE9mZmxpbmVcbiAgICAgICAgLy8gb3IgT25saW5lIGlmIHdlIHdhaXQgbG9uZyBlbm91Z2gpLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSBlO1xuICAgICAgICAvLyBEb24ndCByYWlzZSB0aGUgZXZlbnQgaWYgd2UncmUgb25saW5lLCBhcmVuJ3Qgc3luY2VkIHlldCAoY2hlY2tlZFxuICAgICAgICAvLyBhYm92ZSkgYW5kIGFyZSB3YWl0aW5nIGZvciBhIHN5bmMuXG4gICAgICAgICAgICAgICAgcmV0dXJuICghdGhpcy5vcHRpb25zLkR1IHx8ICFuKSAmJiAoIXQuZG9jcy5pc0VtcHR5KCkgfHwgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gZSk7XG4gICAgICAgIC8vIFJhaXNlIGRhdGEgZnJvbSBjYWNoZSBpZiB3ZSBoYXZlIGFueSBkb2N1bWVudHMgb3Igd2UgYXJlIG9mZmxpbmVcbiAgICAgICAgfVxuICAgIFZ1KHQpIHtcbiAgICAgICAgLy8gV2UgZG9uJ3QgbmVlZCB0byBoYW5kbGUgaW5jbHVkZURvY3VtZW50TWV0YWRhdGFDaGFuZ2VzIGhlcmUgYmVjYXVzZVxuICAgICAgICAvLyB0aGUgTWV0YWRhdGEgb25seSBjaGFuZ2VzIGhhdmUgYWxyZWFkeSBiZWVuIHN0cmlwcGVkIG91dCBpZiBuZWVkZWQuXG4gICAgICAgIC8vIEF0IHRoaXMgcG9pbnQgdGhlIG9ubHkgY2hhbmdlcyB3ZSB3aWxsIHNlZSBhcmUgdGhlIG9uZXMgd2Ugc2hvdWxkXG4gICAgICAgIC8vIHByb3BhZ2F0ZS5cbiAgICAgICAgaWYgKHQuZG9jQ2hhbmdlcy5sZW5ndGggPiAwKSByZXR1cm4gITA7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlB1ICYmIHRoaXMuUHUuaGFzUGVuZGluZ1dyaXRlcyAhPT0gdC5oYXNQZW5kaW5nV3JpdGVzO1xuICAgICAgICByZXR1cm4gISghdC5zeW5jU3RhdGVDaGFuZ2VkICYmICFlKSAmJiAhMCA9PT0gdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIC8vIEdlbmVyYWxseSB3ZSBzaG91bGQgaGF2ZSBoaXQgb25lIG9mIHRoZSBjYXNlcyBhYm92ZSwgYnV0IGl0J3MgcG9zc2libGVcbiAgICAgICAgLy8gdG8gZ2V0IGhlcmUgaWYgdGhlcmUgd2VyZSBvbmx5IG1ldGFkYXRhIGRvY0NoYW5nZXMgYW5kIHRoZXkgZ290XG4gICAgICAgIC8vIHN0cmlwcGVkIG91dC5cbiAgICAgICAgfVxuICAgIFN1KHQpIHtcbiAgICAgICAgdCA9IFN1LmZyb21Jbml0aWFsRG9jdW1lbnRzKHQucXVlcnksIHQuZG9jcywgdC5tdXRhdGVkS2V5cywgdC5mcm9tQ2FjaGUpLCB0aGlzLmJ1ID0gITAsIFxuICAgICAgICB0aGlzLlJ1Lm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbXBsZXRlIGVsZW1lbnQgaW4gdGhlIGJ1bmRsZSBzdHJlYW0sIHRvZ2V0aGVyIHdpdGggdGhlIGJ5dGUgbGVuZ3RoIGl0XG4gKiBvY2N1cGllcyBpbiB0aGUgc3RyZWFtLlxuICovIGNsYXNzICR1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvLyBIb3cgbWFueSBieXRlcyB0aGlzIGVsZW1lbnQgdGFrZXMgdG8gc3RvcmUgaW4gdGhlIGJ1bmRsZS5cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucGF5bG9hZCA9IHQsIHRoaXMuYnl0ZUxlbmd0aCA9IGU7XG4gICAgfVxuICAgIEN1KCkge1xuICAgICAgICByZXR1cm4gXCJtZXRhZGF0YVwiIGluIHRoaXMucGF5bG9hZDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBCdSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk0gPSB0O1xuICAgIH1cbiAgICBsaSh0KSB7XG4gICAgICAgIHJldHVybiBtcyh0aGlzLk0sIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICBmaSh0KSB7XG4gICAgICAgIHJldHVybiB0Lm1ldGFkYXRhLmV4aXN0cyA/IEVzKHRoaXMuTSwgdC5kb2N1bWVudCwgITEpIDogdGUubmV3Tm9Eb2N1bWVudCh0aGlzLmxpKHQubWV0YWRhdGEubmFtZSksIHRoaXMuZGkodC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBkaSh0KSB7XG4gICAgICAgIHJldHVybiBmcyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyBMdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnh1ID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5NID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCBcbiAgICAgICAgLyoqIFRoZSBjb2xsZWN0aW9uIGdyb3VwcyBhZmZlY3RlZCBieSB0aGlzIGJ1bmRsZS4gKi9cbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzID0gbmV3IFNldCwgdGhpcy5wcm9ncmVzcyA9IFV1KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICBOdSh0KSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gdC5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgZSA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICBpZiAodC5wYXlsb2FkLm5hbWVkUXVlcnkpIHRoaXMucXVlcmllcy5wdXNoKHQucGF5bG9hZC5uYW1lZFF1ZXJ5KTsgZWxzZSBpZiAodC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YVxuICAgICAgICAgICAgfSksIHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhLmV4aXN0cyB8fCArK2U7XG4gICAgICAgICAgICBjb25zdCBuID0gX3QuZnJvbVN0cmluZyh0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3Vwcy5hZGQobi5nZXQobi5sZW5ndGggLSAyKSk7XG4gICAgICAgIH0gZWxzZSB0LnBheWxvYWQuZG9jdW1lbnQgJiYgKHRoaXMuZG9jdW1lbnRzW3RoaXMuZG9jdW1lbnRzLmxlbmd0aCAtIDFdLmRvY3VtZW50ID0gdC5wYXlsb2FkLmRvY3VtZW50LCBcbiAgICAgICAgKytlKTtcbiAgICAgICAgcmV0dXJuIGUgIT09IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID8gKHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkID0gZSwgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oe30sIHRoaXMucHJvZ3Jlc3MpKSA6IG51bGw7XG4gICAgfVxuICAgIGt1KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXAsIG4gPSBuZXcgQnUodGhpcy5NKTtcbiAgICAgICAgZm9yIChjb25zdCBzIG9mIHQpIGlmIChzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLmxpKHMubWV0YWRhdGEubmFtZSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2Ygcy5tZXRhZGF0YS5xdWVyaWVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IChlLmdldChuKSB8fCB6bigpKS5hZGQodCk7XG4gICAgICAgICAgICAgICAgZS5zZXQobiwgcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgcHJvZ3Jlc3MgdG8gJ1N1Y2Nlc3MnIGFuZCByZXR1cm4gdGhlIHVwZGF0ZWQgcHJvZ3Jlc3MuXG4gICAgICovICAgIGFzeW5jIGNvbXBsZXRlKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZm8odGhpcy5sb2NhbFN0b3JlLCBuZXcgQnUodGhpcy5NKSwgdGhpcy5kb2N1bWVudHMsIHRoaXMueHUuaWQpLCBlID0gdGhpcy5rdSh0aGlzLmRvY3VtZW50cyk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnF1ZXJpZXMpIGF3YWl0IF9vKHRoaXMubG9jYWxTdG9yZSwgdCwgZS5nZXQodC5uYW1lKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnByb2dyZXNzLnRhc2tTdGF0ZSA9IFwiU3VjY2Vzc1wiLCB7XG4gICAgICAgICAgICBwcm9ncmVzczogdGhpcy5wcm9ncmVzcyxcbiAgICAgICAgICAgIE11OiB0aGlzLmNvbGxlY3Rpb25Hcm91cHMsXG4gICAgICAgICAgICBPdTogdFxuICAgICAgICB9O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgaW5pdGlhbCBwcm9ncmVzcyBvZlxuICogbG9hZGluZyBhIGJ1bmRsZS5cbiAqLyBmdW5jdGlvbiBVdSh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdGFza1N0YXRlOiBcIlJ1bm5pbmdcIixcbiAgICAgICAgZG9jdW1lbnRzTG9hZGVkOiAwLFxuICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgdG90YWxEb2N1bWVudHM6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgIHRvdGFsQnl0ZXM6IHQudG90YWxCeXRlc1xuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGBMb2FkQnVuZGxlVGFza1Byb2dyZXNzYCByZXByZXNlbnRpbmcgdGhlIHByb2dyZXNzIHRoYXQgdGhlIGxvYWRpbmdcbiAqIGhhcyBzdWNjZWVkZWQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBxdSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBHdSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXQgZG9jcyBhcmUgaW5cbiAqIGEgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzIHRvIGRvY3MsIGFuZCBhcHBsaWVzXG4gKiB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0IHBvc3NpYmxlIHJlc3VsdHMuXG4gKi8gY2xhc3MgS3Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8qKiBEb2N1bWVudHMgaW5jbHVkZWQgaW4gdGhlIHJlbW90ZSB0YXJnZXQgKi9cbiAgICBlKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLkZ1ID0gZSwgdGhpcy4kdSA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgICAgICB0aGlzLkJ1ID0gem4oKSwgXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSB6bigpLCB0aGlzLkx1ID0gV2UodCksIHRoaXMuVXUgPSBuZXcgVnUodGhpcy5MdSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIHRoaXMgdmlldy5cbiAgICAgKi8gICAgZ2V0IHF1KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5GdTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyAtIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAgICAgKiBAcmV0dXJucyBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxuICAgICAqLyAgICBHdSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gZS5LdSA6IG5ldyB2dSwgcyA9IGUgPyBlLlV1IDogdGhpcy5VdTtcbiAgICAgICAgbGV0IGkgPSBlID8gZS5tdXRhdGVkS2V5cyA6IHRoaXMubXV0YXRlZEtleXMsIHIgPSBzLCBvID0gITE7XG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxuICAgICAgICBjb25zdCB1ID0ga2UodGhpcy5xdWVyeSkgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5sYXN0KCkgOiBudWxsLCBhID0gTWUodGhpcy5xdWVyeSkgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5maXJzdCgpIDogbnVsbDtcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXG4gICAgICAgIGlmICh0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjID0gcy5nZXQodCksIGggPSBRZSh0aGlzLnF1ZXJ5LCBlKSA/IGUgOiBudWxsLCBsID0gISFjICYmIHRoaXMubXV0YXRlZEtleXMuaGFzKGMua2V5KSwgZiA9ICEhaCAmJiAoaC5oYXNMb2NhbE11dGF0aW9ucyB8fCBcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxuICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgdGhpcy5tdXRhdGVkS2V5cy5oYXMoaC5rZXkpICYmIGguaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICAgICAgICAgIGxldCBkID0gITE7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYyAmJiBoKSB7XG4gICAgICAgICAgICAgICAgYy5kYXRhLmlzRXF1YWwoaC5kYXRhKSA/IGwgIT09IGYgJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIE1ldGFkYXRhICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICAgICAgfSksIGQgPSAhMCkgOiB0aGlzLlF1KGMsIGgpIHx8IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogMiAvKiBNb2RpZmllZCAqLyAsXG4gICAgICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgICAgIH0pLCBkID0gITAsICh1ICYmIHRoaXMuTHUoaCwgdSkgPiAwIHx8IGEgJiYgdGhpcy5MdShoLCBhKSA8IDApICYmIChcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGRvYyBtb3ZlZCBmcm9tIGluc2lkZSB0aGUgbGltaXQgdG8gb3V0c2lkZSB0aGUgbGltaXQuXG4gICAgICAgICAgICAgICAgLy8gVGhhdCBtZWFucyB0aGVyZSBtYXkgYmUgc29tZSBvdGhlciBkb2MgaW4gdGhlIGxvY2FsIGNhY2hlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCBzaG91bGQgYmUgaW5jbHVkZWQgaW5zdGVhZC5cbiAgICAgICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIH0gZWxzZSAhYyAmJiBoID8gKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgfSksIGQgPSAhMCkgOiBjICYmICFoICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogY1xuICAgICAgICAgICAgfSksIGQgPSAhMCwgKHUgfHwgYSkgJiYgKFxuICAgICAgICAgICAgLy8gQSBkb2Mgd2FzIHJlbW92ZWQgZnJvbSBhIGZ1bGwgbGltaXQgcXVlcnkuIFdlJ2xsIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIHJlcXVlcnkgZnJvbSB0aGUgbG9jYWwgY2FjaGUgdG8gc2VlIGlmIHdlIGtub3cgYWJvdXQgc29tZSBvdGhlclxuICAgICAgICAgICAgLy8gZG9jIHRoYXQgc2hvdWxkIGJlIGluIHRoZSByZXN1bHRzLlxuICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICBkICYmIChoID8gKHIgPSByLmFkZChoKSwgaSA9IGYgPyBpLmFkZCh0KSA6IGkuZGVsZXRlKHQpKSA6IChyID0gci5kZWxldGUodCksIGkgPSBpLmRlbGV0ZSh0KSkpO1xuICAgICAgICB9KSksIGtlKHRoaXMucXVlcnkpIHx8IE1lKHRoaXMucXVlcnkpKSBmb3IgKDtyLnNpemUgPiB0aGlzLnF1ZXJ5LmxpbWl0OyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBrZSh0aGlzLnF1ZXJ5KSA/IHIubGFzdCgpIDogci5maXJzdCgpO1xuICAgICAgICAgICAgciA9IHIuZGVsZXRlKHQua2V5KSwgaSA9IGkuZGVsZXRlKHQua2V5KSwgbi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBSZW1vdmVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBVdTogcixcbiAgICAgICAgICAgIEt1OiBuLFxuICAgICAgICAgICAgZWk6IG8sXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogaVxuICAgICAgICB9O1xuICAgIH1cbiAgICBRdSh0LCBlKSB7XG4gICAgICAgIC8vIFdlIHN1cHByZXNzIHRoZSBpbml0aWFsIGNoYW5nZSBldmVudCBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZSBtb2RpZmllZCBhc1xuICAgICAgICAvLyBwYXJ0IG9mIGEgd3JpdGUgYWNrbm93bGVkZ21lbnQgKGUuZy4gd2hlbiB0aGUgdmFsdWUgb2YgYSBzZXJ2ZXIgdHJhbnNmb3JtXG4gICAgICAgIC8vIGlzIGFwcGxpZWQpIGFzIFdhdGNoIHdpbGwgc2VuZCB1cyB0aGUgc2FtZSBkb2N1bWVudCBhZ2Fpbi5cbiAgICAgICAgLy8gQnkgc3VwcHJlc3NpbmcgdGhlIGV2ZW50LCB3ZSBvbmx5IHJhaXNlIHR3byB1c2VyIHZpc2libGUgZXZlbnRzIChvbmUgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpIGluc3RlYWQgb2YgdGhyZWVcbiAgICAgICAgLy8gKG9uZSB3aXRoIGBoYXNQZW5kaW5nV3JpdGVzYCwgdGhlIG1vZGlmaWVkIGRvY3VtZW50IHdpdGhcbiAgICAgICAgLy8gYGhhc1BlbmRpbmdXcml0ZXNgIGFuZCB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIGRvY3VtZW50KS5cbiAgICAgICAgcmV0dXJuIHQuaGFzTG9jYWxNdXRhdGlvbnMgJiYgZS5oYXNDb21taXR0ZWRNdXRhdGlvbnMgJiYgIWUuaGFzTG9jYWxNdXRhdGlvbnM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHZpZXcgd2l0aCB0aGUgZ2l2ZW4gVmlld0RvY3VtZW50Q2hhbmdlcyBhbmQgb3B0aW9uYWxseSB1cGRhdGVzXG4gICAgICogbGltYm8gZG9jcyBhbmQgc3luYyBzdGF0ZSBmcm9tIHRoZSBwcm92aWRlZCB0YXJnZXQgY2hhbmdlLlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIHNldCBvZiBjaGFuZ2VzIHRvIG1ha2UgdG8gdGhlIHZpZXcncyBkb2NzLlxuICAgICAqIEBwYXJhbSB1cGRhdGVMaW1ib0RvY3VtZW50cyAtIFdoZXRoZXIgdG8gdXBkYXRlIGxpbWJvIGRvY3VtZW50cyBiYXNlZCBvblxuICAgICAqICAgICAgICB0aGlzIGNoYW5nZS5cbiAgICAgKiBAcGFyYW0gdGFyZ2V0Q2hhbmdlIC0gQSB0YXJnZXQgY2hhbmdlIHRvIGFwcGx5IGZvciBjb21wdXRpbmcgbGltYm8gZG9jcyBhbmRcbiAgICAgKiAgICAgICAgc3luYyBzdGF0ZS5cbiAgICAgKiBAcmV0dXJucyBBIG5ldyBWaWV3Q2hhbmdlIHdpdGggdGhlIGdpdmVuIGRvY3MsIGNoYW5nZXMsIGFuZCBzeW5jIHN0YXRlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIGlPUy9BbmRyb2lkIGNsaWVudHMgYWx3YXlzIGNvbXB1dGUgbGltYm8gZG9jdW1lbnQgY2hhbmdlcy5cbiAgICBhcHBseUNoYW5nZXModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5VdTtcbiAgICAgICAgdGhpcy5VdSA9IHQuVXUsIHRoaXMubXV0YXRlZEtleXMgPSB0Lm11dGF0ZWRLZXlzO1xuICAgICAgICAvLyBTb3J0IGNoYW5nZXMgYmFzZWQgb24gdHlwZSBhbmQgcXVlcnkgY29tcGFyYXRvclxuICAgICAgICBjb25zdCBpID0gdC5LdS5wdSgpO1xuICAgICAgICBpLnNvcnQoKCh0LCBlKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgbWV0YWRhdGEgY2hhbmdlIGlzIGNvbnZlcnRlZCB0byBhIG1vZGlmaWVkIGNoYW5nZSBhdCB0aGUgcHVibGljXG4gICAgICAgICAgICAgICAgICAgIC8vIGFwaSBsYXllci4gIFNpbmNlIHdlIHNvcnQgYnkgZG9jdW1lbnQga2V5IGFuZCB0aGVuIGNoYW5nZSB0eXBlLFxuICAgICAgICAgICAgICAgICAgICAvLyBtZXRhZGF0YSBhbmQgbW9kaWZpZWQgY2hhbmdlcyBtdXN0IGJlIHNvcnRlZCBlcXVpdmFsZW50bHkuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAyO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDEgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gbih0KSAtIG4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQudHlwZSwgZS50eXBlKSB8fCB0aGlzLkx1KHQuZG9jLCBlLmRvYykpKSwgdGhpcy5qdShuKTtcbiAgICAgICAgY29uc3QgciA9IGUgPyB0aGlzLld1KCkgOiBbXSwgbyA9IDAgPT09IHRoaXMuQnUuc2l6ZSAmJiB0aGlzLmN1cnJlbnQgPyAxIC8qIFN5bmNlZCAqLyA6IDAgLyogTG9jYWwgKi8gLCB1ID0gbyAhPT0gdGhpcy4kdTtcbiAgICAgICAgaWYgKHRoaXMuJHUgPSBvLCAwICE9PSBpLmxlbmd0aCB8fCB1KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNuYXBzaG90OiBuZXcgU3UodGhpcy5xdWVyeSwgdC5VdSwgcywgaSwgdC5tdXRhdGVkS2V5cywgMCAvKiBMb2NhbCAqLyA9PT0gbywgdSwgXG4gICAgICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExKSxcbiAgICAgICAgICAgICAgICB6dTogclxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBjaGFuZ2VzXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB6dTogclxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgdmlldywgcG90ZW50aWFsbHkgZ2VuZXJhdGluZyBhXG4gICAgICogVmlld0NoYW5nZSBpZiB0aGUgdmlldydzIHN5bmNTdGF0ZSBjaGFuZ2VzIGFzIGEgcmVzdWx0LlxuICAgICAqLyAgICBFdSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQgJiYgXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyA9PT0gdCA/IChcbiAgICAgICAgLy8gSWYgd2UncmUgb2ZmbGluZSwgc2V0IGBjdXJyZW50YCB0byBmYWxzZSBhbmQgdGhlbiBjYWxsIGFwcGx5Q2hhbmdlcygpXG4gICAgICAgIC8vIHRvIHJlZnJlc2ggb3VyIHN5bmNTdGF0ZSBhbmQgZ2VuZXJhdGUgYSBWaWV3Q2hhbmdlIGFzIGFwcHJvcHJpYXRlLiBXZVxuICAgICAgICAvLyBhcmUgZ3VhcmFudGVlZCB0byBnZXQgYSBuZXcgVGFyZ2V0Q2hhbmdlIHRoYXQgc2V0cyBgY3VycmVudGAgYmFjayB0b1xuICAgICAgICAvLyB0cnVlIG9uY2UgdGhlIGNsaWVudCBpcyBiYWNrIG9ubGluZS5cbiAgICAgICAgdGhpcy5jdXJyZW50ID0gITEsIHRoaXMuYXBwbHlDaGFuZ2VzKHtcbiAgICAgICAgICAgIFV1OiB0aGlzLlV1LFxuICAgICAgICAgICAgS3U6IG5ldyB2dSxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiB0aGlzLm11dGF0ZWRLZXlzLFxuICAgICAgICAgICAgZWk6ICExXG4gICAgICAgIH0sIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gITEpKSA6IHtcbiAgICAgICAgICAgIHp1OiBbXVxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGRvYyBmb3IgdGhlIGdpdmVuIGtleSBzaG91bGQgYmUgaW4gbGltYm8uXG4gICAgICovICAgIEh1KHQpIHtcbiAgICAgICAgLy8gSWYgdGhlIHJlbW90ZSBlbmQgc2F5cyBpdCdzIHBhcnQgb2YgdGhpcyBxdWVyeSwgaXQncyBub3QgaW4gbGltYm8uXG4gICAgICAgIHJldHVybiAhdGhpcy5GdS5oYXModCkgJiYgKFxuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgZG9lc24ndCB0aGluayBpdCdzIGEgcmVzdWx0LCBzbyBpdCBzaG91bGRuJ3QgYmUgaW4gbGltYm8uXG4gICAgICAgICEhdGhpcy5VdS5oYXModCkgJiYgIXRoaXMuVXUuZ2V0KHQpLmhhc0xvY2FsTXV0YXRpb25zKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBzeW5jZWREb2N1bWVudHMsIGN1cnJlbnQsIGFuZCBsaW1ibyBkb2NzIGJhc2VkIG9uIHRoZSBnaXZlbiBjaGFuZ2UuXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBjaGFuZ2VzIHRvIHdoaWNoIGRvY3MgYXJlIGluIGxpbWJvLlxuICAgICAqLyAgICBqdSh0KSB7XG4gICAgICAgIHQgJiYgKHQuYWRkZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLkZ1ID0gdGhpcy5GdS5hZGQodCkpKSwgdC5tb2RpZmllZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHt9KSksIFxuICAgICAgICB0LnJlbW92ZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB0aGlzLkZ1ID0gdGhpcy5GdS5kZWxldGUodCkpKSwgdGhpcy5jdXJyZW50ID0gdC5jdXJyZW50KTtcbiAgICB9XG4gICAgV3UoKSB7XG4gICAgICAgIC8vIFdlIGNhbiBvbmx5IGRldGVybWluZSBsaW1ibyBkb2N1bWVudHMgd2hlbiB3ZSdyZSBpbi1zeW5jIHdpdGggdGhlIHNlcnZlci5cbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnQpIHJldHVybiBbXTtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IERvIHRoaXMgaW5jcmVtZW50YWxseSBzbyB0aGF0IGl0J3Mgbm90IHF1YWRyYXRpYyB3aGVuXG4gICAgICAgIC8vIHVwZGF0aW5nIG1hbnkgZG9jdW1lbnRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkJ1O1xuICAgICAgICB0aGlzLkJ1ID0gem4oKSwgdGhpcy5VdS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuSHUodC5rZXkpICYmICh0aGlzLkJ1ID0gdGhpcy5CdS5hZGQodC5rZXkpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBEaWZmIHRoZSBuZXcgbGltYm8gZG9jcyB3aXRoIHRoZSBvbGQgbGltYm8gZG9jcy5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuQnUuaGFzKHQpIHx8IGUucHVzaChuZXcgR3UodCkpO1xuICAgICAgICB9KSksIHRoaXMuQnUuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmhhcyhuKSB8fCBlLnB1c2gobmV3IHF1KG4pKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgdGhlIGluLW1lbW9yeSBzdGF0ZSBvZiB0aGUgY3VycmVudCB2aWV3IHdpdGggdGhlIHN0YXRlIHJlYWQgZnJvbVxuICAgICAqIHBlcnNpc3RlbmNlLlxuICAgICAqXG4gICAgICogV2UgdXBkYXRlIHRoZSBxdWVyeSB2aWV3IHdoZW5ldmVyIGEgY2xpZW50J3MgcHJpbWFyeSBzdGF0dXMgY2hhbmdlczpcbiAgICAgKiAtIFdoZW4gYSBjbGllbnQgdHJhbnNpdGlvbnMgZnJvbSBwcmltYXJ5IHRvIHNlY29uZGFyeSwgaXQgY2FuIG1pc3NcbiAgICAgKiAgIExvY2FsU3RvcmFnZSB1cGRhdGVzIGFuZCBpdHMgcXVlcnkgdmlld3MgbWF5IHRlbXBvcmFyaWx5IG5vdCBiZVxuICAgICAqICAgc3luY2hyb25pemVkIHdpdGggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICogLSBGb3Igc2Vjb25kYXJ5IHRvIHByaW1hcnkgdHJhbnNpdGlvbnMsIHRoZSBjbGllbnQgbmVlZHMgdG8gdXBkYXRlIHRoZSBsaXN0XG4gICAgICogICBvZiBgc3luY2VkRG9jdW1lbnRzYCBzaW5jZSBzZWNvbmRhcnkgY2xpZW50cyB1cGRhdGUgdGhlaXIgcXVlcnkgdmlld3NcbiAgICAgKiAgIGJhc2VkIHB1cmVseSBvbiBzeW50aGVzaXplZCBSZW1vdGVFdmVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQuZG9jdW1lbnRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZSBxdWVyeSBhY2NvcmRpbmdcbiAgICAgKiB0byB0aGUgTG9jYWxTdG9yZS5cbiAgICAgKiBAcGFyYW0gcXVlcnlSZXN1bHQucmVtb3RlS2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGVcbiAgICAgKiBxdWVyeSBhY2NvcmRpbmcgdG8gdGhlIGJhY2tlbmQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVmlld0NoYW5nZSB0aGF0IHJlc3VsdGVkIGZyb20gdGhpcyBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBKdSh0KSB7XG4gICAgICAgIHRoaXMuRnUgPSB0LmhpLCB0aGlzLkJ1ID0gem4oKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuR3UodC5kb2N1bWVudHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBseUNoYW5nZXMoZSwgLyp1cGRhdGVMaW1ib0RvY3VtZW50cz0qLyAhMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSB2aWV3IHNuYXBzaG90IGFzIGlmIHRoaXMgcXVlcnkgd2FzIGp1c3QgbGlzdGVuZWQgdG8uIENvbnRhaW5zXG4gICAgICogYSBkb2N1bWVudCBhZGQgZm9yIGV2ZXJ5IGV4aXN0aW5nIGRvY3VtZW50IGFuZCB0aGUgYGZyb21DYWNoZWAgYW5kXG4gICAgICogYGhhc1BlbmRpbmdXcml0ZXNgIHN0YXR1cyBvZiB0aGUgYWxyZWFkeSBlc3RhYmxpc2hlZCB2aWV3LlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgWXUoKSB7XG4gICAgICAgIHJldHVybiBTdS5mcm9tSW5pdGlhbERvY3VtZW50cyh0aGlzLnF1ZXJ5LCB0aGlzLlV1LCB0aGlzLm11dGF0ZWRLZXlzLCAwIC8qIExvY2FsICovID09PSB0aGlzLiR1KTtcbiAgICB9XG59XG5cbi8qKlxuICogUXVlcnlWaWV3IGNvbnRhaW5zIGFsbCBvZiB0aGUgZGF0YSB0aGF0IFN5bmNFbmdpbmUgbmVlZHMgdG8ga2VlcCB0cmFjayBvZiBmb3JcbiAqIGEgcGFydGljdWxhciBxdWVyeS5cbiAqL1xuY2xhc3MgUXUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBxdWVyeSBpdHNlbGYuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBudW1iZXIgY3JlYXRlZCBieSB0aGUgY2xpZW50IHRoYXQgaXMgdXNlZCBpbiB0aGUgd2F0Y2hcbiAgICAgKiBzdHJlYW0gdG8gaWRlbnRpZnkgdGhpcyBxdWVyeS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgdmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdFxuICAgICAqIGRvY3MgYXJlIGluIHRoZSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMsXG4gICAgICogYW5kIGFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlcnMgYW5kIGxpbWl0cyB0byBkZXRlcm1pbmUgdGhlIG1vc3QgY29ycmVjdFxuICAgICAqIHBvc3NpYmxlIHJlc3VsdHMuXG4gICAgICovXG4gICAgbikge1xuICAgICAgICB0aGlzLnF1ZXJ5ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMudmlldyA9IG47XG4gICAgfVxufVxuXG4vKiogVHJhY2tzIGEgbGltYm8gcmVzb2x1dGlvbi4gKi8gY2xhc3MganUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCB0byB0cnVlIG9uY2Ugd2UndmUgcmVjZWl2ZWQgYSBkb2N1bWVudC4gVGhpcyBpcyB1c2VkIGluXG4gICAgICAgICAqIGdldFJlbW90ZUtleXNGb3JUYXJnZXQoKSBhbmQgdWx0aW1hdGVseSB1c2VkIGJ5IFdhdGNoQ2hhbmdlQWdncmVnYXRvciB0b1xuICAgICAgICAgKiBkZWNpZGUgd2hldGhlciBpdCBuZWVkcyB0byBtYW51ZmFjdHVyZSBhIGRlbGV0ZSBldmVudCBmb3IgdGhlIHRhcmdldCBvbmNlXG4gICAgICAgICAqIHRoZSB0YXJnZXQgaXMgQ1VSUkVOVC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuWHUgPSAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgYFN5bmNFbmdpbmVgIGNvb3JkaW5hdGluZyB3aXRoIG90aGVyIHBhcnRzIG9mIFNESy5cbiAqXG4gKiBUaGUgcGFydHMgb2YgU3luY0VuZ2luZSB0aGF0IGFjdCBhcyBhIGNhbGxiYWNrIHRvIFJlbW90ZVN0b3JlIG5lZWQgdG8gYmVcbiAqIHJlZ2lzdGVyZWQgaW5kaXZpZHVhbGx5LiBUaGlzIGlzIGRvbmUgaW4gYHN5bmNFbmdpbmVXcml0ZSgpYCBhbmRcbiAqIGBzeW5jRW5naW5lTGlzdGVuKClgIChhcyB3ZWxsIGFzIGBhcHBseVByaW1hcnlTdGF0ZSgpYCkgYXMgdGhlc2UgbWV0aG9kc1xuICogc2VydmUgYXMgZW50cnkgcG9pbnRzIHRvIFJlbW90ZVN0b3JlJ3MgZnVuY3Rpb25hbGl0eS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqLyBjbGFzcyBXdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLy8gUE9SVElORyBOT1RFOiBNYW5hZ2VzIHN0YXRlIHN5bmNocm9uaXphdGlvbiBpbiBtdWx0aS10YWIgZW52aXJvbm1lbnRzLlxuICAgIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5yZW1vdGVTdG9yZSA9IGUsIHRoaXMuZXZlbnRNYW5hZ2VyID0gbiwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHMsIFxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9ucyA9IHIsIHRoaXMuWnUgPSB7fSwgdGhpcy50YSA9IG5ldyBrbigodCA9PiBHZSh0KSksIHFlKSwgXG4gICAgICAgIHRoaXMuZWEgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBrZXlzIG9mIGRvY3VtZW50cyB0aGF0IGFyZSBpbiBsaW1ibyBmb3Igd2hpY2ggd2UgaGF2ZW4ndCB5ZXQgc3RhcnRlZCBhXG4gICAgICAgICAqIGxpbWJvIHJlc29sdXRpb24gcXVlcnkuIFRoZSBzdHJpbmdzIGluIHRoaXMgc2V0IGFyZSB0aGUgcmVzdWx0IG9mIGNhbGxpbmdcbiAgICAgICAgICogYGtleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpYCB3aGVyZSBga2V5YCBpcyBhIGBEb2N1bWVudEtleWAgb2JqZWN0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGUgYFNldGAgdHlwZSB3YXMgY2hvc2VuIGJlY2F1c2UgaXQgcHJvdmlkZXMgZWZmaWNpZW50IGxvb2t1cCBhbmQgcmVtb3ZhbFxuICAgICAgICAgKiBvZiBhcmJpdHJhcnkgZWxlbWVudHMgYW5kIGl0IGFsc28gbWFpbnRhaW5zIGluc2VydGlvbiBvcmRlciwgcHJvdmlkaW5nIHRoZVxuICAgICAgICAgKiBkZXNpcmVkIHF1ZXVlLWxpa2UgRklGTyBzZW1hbnRpY3MuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm5hID0gbmV3IFNldCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgdGFyZ2V0IElEIGZvciBlYWNoIGRvY3VtZW50IHRoYXQgaXMgaW4gbGltYm8gd2l0aCBhblxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zYSA9IG5ldyBNbih4dC5jb21wYXJhdG9yKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgaW5mb3JtYXRpb24gYWJvdXQgYW4gYWN0aXZlIGxpbWJvIHJlc29sdXRpb24gZm9yIGVhY2hcbiAgICAgICAgICogYWN0aXZlIHRhcmdldCBJRCB0aGF0IHdhcyBzdGFydGVkIGZvciB0aGUgcHVycG9zZSBvZiBsaW1ibyByZXNvbHV0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pYSA9IG5ldyBNYXAsIHRoaXMucmEgPSBuZXcgZ28sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY29tcGxldGlvbiBoYW5kbGVycywgaW5kZXhlZCBieSBVc2VyIGFuZCBCYXRjaElkLiAqL1xuICAgICAgICB0aGlzLm9hID0ge30sIFxuICAgICAgICAvKiogU3RvcmVzIHVzZXIgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIGFsbCBwZW5kaW5nIHdyaXRlcyB0byBiZSBhY2tub3dsZWRnZWQuICovXG4gICAgICAgIHRoaXMudWEgPSBuZXcgTWFwLCB0aGlzLmFhID0gRXIuZ24oKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgLy8gVGhlIHByaW1hcnkgc3RhdGUgaXMgc2V0IHRvIGB0cnVlYCBvciBgZmFsc2VgIGltbWVkaWF0ZWx5IGFmdGVyIEZpcmVzdG9yZVxuICAgICAgICAvLyBzdGFydHVwLiBJbiB0aGUgaW50ZXJpbSwgYSBjbGllbnQgc2hvdWxkIG9ubHkgYmUgY29uc2lkZXJlZCBwcmltYXJ5IGlmXG4gICAgICAgIC8vIGBpc1ByaW1hcnlgIGlzIHRydWUuXG4gICAgICAgIHRoaXMuY2EgPSB2b2lkIDA7XG4gICAgfVxuICAgIGdldCBpc1ByaW1hcnlDbGllbnQoKSB7XG4gICAgICAgIHJldHVybiAhMCA9PT0gdGhpcy5jYTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSBuZXcgbGlzdGVuLCByZXNvbHZlcyBwcm9taXNlIHdoZW4gbGlzdGVuIGVucXVldWVkIHRvIHRoZVxuICogc2VydmVyLiBBbGwgdGhlIHN1YnNlcXVlbnQgdmlldyBzbmFwc2hvdHMgb3IgZXJyb3JzIGFyZSBzZW50IHRvIHRoZVxuICogc3Vic2NyaWJlZCBoYW5kbGVycy4gUmV0dXJucyB0aGUgaW5pdGlhbCBzbmFwc2hvdC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24genUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBBYSh0KTtcbiAgICBsZXQgcywgaTtcbiAgICBjb25zdCByID0gbi50YS5nZXQoZSk7XG4gICAgaWYgKHIpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2l0aCBNdWx0aS1UYWIgV2ViLCBpdCBpcyBwb3NzaWJsZSB0aGF0IGEgcXVlcnkgdmlld1xuICAgIC8vIGFscmVhZHkgZXhpc3RzIHdoZW4gRXZlbnRNYW5hZ2VyIGNhbGxzIHVzIGZvciB0aGUgZmlyc3QgdGltZS4gVGhpc1xuICAgIC8vIGhhcHBlbnMgd2hlbiB0aGUgcHJpbWFyeSB0YWIgaXMgYWxyZWFkeSBsaXN0ZW5pbmcgdG8gdGhpcyBxdWVyeSBvblxuICAgIC8vIGJlaGFsZiBvZiBhbm90aGVyIHRhYiBhbmQgdGhlIHVzZXIgb2YgdGhlIHByaW1hcnkgYWxzbyBzdGFydHMgbGlzdGVuaW5nXG4gICAgLy8gdG8gdGhlIHF1ZXJ5LiBFdmVudE1hbmFnZXIgd2lsbCBub3QgaGF2ZSBhbiBhc3NpZ25lZCB0YXJnZXQgSUQgaW4gdGhpc1xuICAgIC8vIGNhc2UgYW5kIGNhbGxzIGBsaXN0ZW5gIHRvIG9idGFpbiB0aGlzIElELlxuICAgIHMgPSByLnRhcmdldElkLCBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQocyksIGkgPSByLnZpZXcuWXUoKTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBvbyhuLmxvY2FsU3RvcmUsIExlKGUpKTtcbiAgICAgICAgbi5pc1ByaW1hcnlDbGllbnQgJiYgWm8obi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgICAgIGNvbnN0IHIgPSBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHMgPSB0LnRhcmdldElkLCBpID0gYXdhaXQgSHUobiwgZSwgcywgXCJjdXJyZW50XCIgPT09IHIpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSB2aWV3IGZvciBhIHByZXZpb3VzbHkgdW5rbm93biBxdWVyeSBhbmQgY29tcHV0ZXMgaXRzIGluaXRpYWxcbiAqIHNuYXBzaG90LlxuICovIGFzeW5jIGZ1bmN0aW9uIEh1KHQsIGUsIG4sIHMpIHtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE9uIFdlYiBvbmx5LCB3ZSBpbmplY3QgdGhlIGNvZGUgdGhhdCByZWdpc3RlcnMgbmV3IExpbWJvXG4gICAgLy8gdGFyZ2V0cyBiYXNlZCBvbiB2aWV3IGNoYW5nZXMuIFRoaXMgYWxsb3dzIHVzIHRvIG9ubHkgZGVwZW5kIG9uIExpbWJvXG4gICAgLy8gY2hhbmdlcyB3aGVuIHVzZXIgY29kZSBpbmNsdWRlcyBxdWVyaWVzLlxuICAgIHQuaGEgPSAoZSwgbiwgcykgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGUudmlldy5HdShuKTtcbiAgICAgICAgaS5laSAmJiAoXG4gICAgICAgIC8vIFRoZSBxdWVyeSBoYXMgYSBsaW1pdCBhbmQgc29tZSBkb2NzIHdlcmUgcmVtb3ZlZCwgc28gd2UgbmVlZFxuICAgICAgICAvLyB0byByZS1ydW4gdGhlIHF1ZXJ5IGFnYWluc3QgdGhlIGxvY2FsIHN0b3JlIHRvIG1ha2Ugc3VyZSB3ZVxuICAgICAgICAvLyBkaWRuJ3QgbG9zZSBhbnkgZ29vZCBkb2NzIHRoYXQgaGFkIGJlZW4gcGFzdCB0aGUgbGltaXQuXG4gICAgICAgIGkgPSBhd2FpdCBhbyh0LmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgICAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICExKS50aGVuKCgoe2RvY3VtZW50czogdH0pID0+IGUudmlldy5HdSh0LCBpKSkpKTtcbiAgICAgICAgY29uc3QgciA9IHMgJiYgcy50YXJnZXRDaGFuZ2VzLmdldChlLnRhcmdldElkKSwgbyA9IGUudmlldy5hcHBseUNoYW5nZXMoaSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgcik7XG4gICAgICAgIHJldHVybiBhYSh0LCBlLnRhcmdldElkLCBvLnp1KSwgby5zbmFwc2hvdDtcbiAgICB9KHQsIGUsIG4sIHMpO1xuICAgIGNvbnN0IGkgPSBhd2FpdCBhbyh0LmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCByID0gbmV3IEt1KGUsIGkuaGkpLCBvID0gci5HdShpLmRvY3VtZW50cyksIHUgPSBYbi5jcmVhdGVTeW50aGVzaXplZFRhcmdldENoYW5nZUZvckN1cnJlbnRDaGFuZ2UobiwgcyAmJiBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovICE9PSB0Lm9ubGluZVN0YXRlKSwgYSA9IHIuYXBwbHlDaGFuZ2VzKG8sIFxuICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyB0LmlzUHJpbWFyeUNsaWVudCwgdSk7XG4gICAgYWEodCwgbiwgYS56dSk7XG4gICAgY29uc3QgYyA9IG5ldyBRdShlLCBuLCByKTtcbiAgICByZXR1cm4gdC50YS5zZXQoZSwgYyksIHQuZWEuaGFzKG4pID8gdC5lYS5nZXQobikucHVzaChlKSA6IHQuZWEuc2V0KG4sIFsgZSBdKSwgYS5zbmFwc2hvdDtcbn1cblxuLyoqIFN0b3BzIGxpc3RlbmluZyB0byB0aGUgcXVlcnkuICovIGFzeW5jIGZ1bmN0aW9uIEp1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KSwgcyA9IG4udGEuZ2V0KGUpLCBpID0gbi5lYS5nZXQocy50YXJnZXRJZCk7XG4gICAgaWYgKGkubGVuZ3RoID4gMSkgcmV0dXJuIG4uZWEuc2V0KHMudGFyZ2V0SWQsIGkuZmlsdGVyKCh0ID0+ICFxZSh0LCBlKSkpKSwgdm9pZCBuLnRhLmRlbGV0ZShlKTtcbiAgICAvLyBObyBvdGhlciBxdWVyaWVzIGFyZSBtYXBwZWQgdG8gdGhlIHRhcmdldCwgY2xlYW4gdXAgdGhlIHF1ZXJ5IGFuZCB0aGUgdGFyZ2V0LlxuICAgICAgICBpZiAobi5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgLy8gV2UgbmVlZCB0byByZW1vdmUgdGhlIGxvY2FsIHF1ZXJ5IHRhcmdldCBmaXJzdCB0byBhbGxvdyB1cyB0byB2ZXJpZnlcbiAgICAgICAgLy8gd2hldGhlciBhbnkgb3RoZXIgY2xpZW50IGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhpcyB0YXJnZXQuXG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChzLnRhcmdldElkKTtcbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpIHx8IGF3YWl0IHVvKG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITEpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuY2xlYXJRdWVyeVN0YXRlKHMudGFyZ2V0SWQpLCB0dShuLnJlbW90ZVN0b3JlLCBzLnRhcmdldElkKSwgXG4gICAgICAgICAgICBvYShuLCBzLnRhcmdldElkKTtcbiAgICAgICAgfSkpLmNhdGNoKFZyKTtcbiAgICB9IGVsc2Ugb2Eobiwgcy50YXJnZXRJZCksIGF3YWl0IHVvKG4ubG9jYWxTdG9yZSwgcy50YXJnZXRJZCwgXG4gICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCk7XG59XG5cbi8qKlxuICogSW5pdGlhdGVzIHRoZSB3cml0ZSBvZiBsb2NhbCBtdXRhdGlvbiBiYXRjaCB3aGljaCBpbnZvbHZlcyBhZGRpbmcgdGhlXG4gKiB3cml0ZXMgdG8gdGhlIG11dGF0aW9uIHF1ZXVlLCBub3RpZnlpbmcgdGhlIHJlbW90ZSBzdG9yZSBhYm91dCBuZXdcbiAqIG11dGF0aW9ucyBhbmQgcmFpc2luZyBldmVudHMgZm9yIGFueSBjaGFuZ2VzIHRoaXMgd3JpdGUgY2F1c2VkLlxuICpcbiAqIFRoZSBwcm9taXNlIHJldHVybmVkIGJ5IHRoaXMgY2FsbCBpcyByZXNvbHZlZCB3aGVuIHRoZSBhYm92ZSBzdGVwc1xuICogaGF2ZSBjb21wbGV0ZWQsICpub3QqIHdoZW4gdGhlIHdyaXRlIHdhcyBhY2tlZCBieSB0aGUgYmFja2VuZC4gVGhlXG4gKiB1c2VyQ2FsbGJhY2sgaXMgcmVzb2x2ZWQgb25jZSB0aGUgd3JpdGUgd2FzIGFja2VkL3JlamVjdGVkIGJ5IHRoZVxuICogYmFja2VuZCAob3IgZmFpbGVkIGxvY2FsbHkgZm9yIGFueSBvdGhlciByZWFzb24pLlxuICovIGFzeW5jIGZ1bmN0aW9uIFl1KHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gUmEodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gYXQubm93KCksIGkgPSBlLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIHpuKCkpO1xuICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvY2FsbHkgd3JpdGUgbXV0YXRpb25zXCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IG4uYWkucXModCwgaSkubmV4dCgoaSA9PiB7XG4gICAgICAgICAgICAgICAgciA9IGk7XG4gICAgICAgICAgICAgICAgLy8gRm9yIG5vbi1pZGVtcG90ZW50IG11dGF0aW9ucyAoc3VjaCBhcyBgRmllbGRWYWx1ZS5pbmNyZW1lbnQoKWApLFxuICAgICAgICAgICAgICAgIC8vIHdlIHJlY29yZCB0aGUgYmFzZSBzdGF0ZSBpbiBhIHNlcGFyYXRlIHBhdGNoIG11dGF0aW9uLiBUaGlzIGlzXG4gICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAvLyBldmVuIGlmIHRoZSBiYWNrZW5kIHNlbmRzIHVzIGFuIHVwZGF0ZSB0aGF0IGFscmVhZHkgaW5jbHVkZXMgb3VyXG4gICAgICAgICAgICAgICAgLy8gdHJhbnNmb3JtLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gcG4odCwgci5nZXQodC5rZXkpKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBlICYmIFxuICAgICAgICAgICAgICAgICAgICAvLyBOT1RFOiBUaGUgYmFzZSBzdGF0ZSBzaG91bGQgb25seSBiZSBhcHBsaWVkIGlmIHRoZXJlJ3Mgc29tZVxuICAgICAgICAgICAgICAgICAgICAvLyBleGlzdGluZyBkb2N1bWVudCB0byBvdmVycmlkZSwgc28gdXNlIGEgUHJlY29uZGl0aW9uIG9mXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0cz10cnVlXG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgQW4odC5rZXksIGUsIFp0KGUudmFsdWUubWFwVmFsdWUpLCBfbi5leGlzdHMoITApKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBuLiRzLmFkZE11dGF0aW9uQmF0Y2godCwgcywgbywgZSk7XG4gICAgICAgICAgICB9KSkpKS50aGVuKCh0ID0+ICh0LmFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHIpLCB7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogdC5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IHJcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0ocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5hZGRQZW5kaW5nTXV0YXRpb24odC5iYXRjaElkKSwgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgbGV0IHMgPSB0Lm9hW3QuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgICAgICAgICBzIHx8IChzID0gbmV3IE1uKHJ0KSk7XG4gICAgICAgICAgICBzID0gcy5pbnNlcnQoZSwgbiksIHQub2FbdC5jdXJyZW50VXNlci50b0tleSgpXSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXNvbHZlcyBvciByZWplY3RzIHRoZSB1c2VyIGNhbGxiYWNrIGZvciB0aGUgZ2l2ZW4gYmF0Y2ggYW5kIHRoZW4gZGlzY2FyZHNcbiAqIGl0LlxuICovIChzLCB0LmJhdGNoSWQsIG4pLCBhd2FpdCBsYShzLCB0LmNoYW5nZXMpLCBhd2FpdCBmdShzLnJlbW90ZVN0b3JlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIC8vIElmIHdlIGNhbid0IHBlcnNpc3QgdGhlIG11dGF0aW9uLCB3ZSByZWplY3QgdGhlIHVzZXIgY2FsbGJhY2sgYW5kXG4gICAgICAgIC8vIGRvbid0IHNlbmQgdGhlIG11dGF0aW9uLiBUaGUgdXNlciBjYW4gdGhlbiByZXRyeSB0aGUgd3JpdGUuXG4gICAgICAgIGNvbnN0IGUgPSBQdSh0LCBcIkZhaWxlZCB0byBwZXJzaXN0IHdyaXRlXCIpO1xuICAgICAgICBuLnJlamVjdChlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBvbmUgcmVtb3RlIGV2ZW50IHRvIHRoZSBzeW5jIGVuZ2luZSwgbm90aWZ5aW5nIGFueSB2aWV3cyBvZiB0aGVcbiAqIGNoYW5nZXMsIGFuZCByZWxlYXNpbmcgYW55IHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlcyB0aGF0IHdvdWxkIGJlY29tZVxuICogdmlzaWJsZSBiZWNhdXNlIG9mIHRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoZSByZW1vdGUgZXZlbnQgY29udGFpbnMuXG4gKi8gYXN5bmMgZnVuY3Rpb24gWHUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBzbyhuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgYHJlY2VpdmVkRG9jdW1lbnRgIGFzIGFwcHJvcHJpYXRlIGZvciBhbnkgbGltYm8gdGFyZ2V0cy5cbiAgICAgICAgICAgICAgICBlLnRhcmdldENoYW5nZXMuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmlhLmdldChlKTtcbiAgICAgICAgICAgIHMgJiYgKFxuICAgICAgICAgICAgLy8gU2luY2UgdGhpcyBpcyBhIGxpbWJvIHJlc29sdXRpb24gbG9va3VwLCBpdCdzIGZvciBhIHNpbmdsZSBkb2N1bWVudFxuICAgICAgICAgICAgLy8gYW5kIGl0IGNvdWxkIGJlIGFkZGVkLCBtb2RpZmllZCwgb3IgcmVtb3ZlZCwgYnV0IG5vdCBhIGNvbWJpbmF0aW9uLlxuICAgICAgICAgICAgVSh0LmFkZGVkRG9jdW1lbnRzLnNpemUgKyB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgKyB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA8PSAxKSwgXG4gICAgICAgICAgICB0LmFkZGVkRG9jdW1lbnRzLnNpemUgPiAwID8gcy5YdSA9ICEwIDogdC5tb2RpZmllZERvY3VtZW50cy5zaXplID4gMCA/IFUocy5YdSkgOiB0LnJlbW92ZWREb2N1bWVudHMuc2l6ZSA+IDAgJiYgKFUocy5YdSksIFxuICAgICAgICAgICAgcy5YdSA9ICExKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgbGEobiwgdCwgZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBWcih0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHN5bmMgZW5naW5lIGFuZCBub3RpZmllcyBhbnkgdmlld3Mgb2ZcbiAqIHRoZSBjaGFuZ2UuXG4gKi8gZnVuY3Rpb24gWnUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBHKHQpO1xuICAgIC8vIElmIHdlIGFyZSB0aGUgc2Vjb25kYXJ5IGNsaWVudCwgd2UgZXhwbGljaXRseSBpZ25vcmUgdGhlIHJlbW90ZSBzdG9yZSdzXG4gICAgLy8gb25saW5lIHN0YXRlICh0aGUgbG9jYWwgY2xpZW50IG1heSBnbyBvZmZsaW5lLCBldmVuIHRob3VnaCB0aGUgcHJpbWFyeVxuICAgIC8vIHRhYiByZW1haW5zIG9ubGluZSkgYW5kIG9ubHkgYXBwbHkgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlIGZyb21cbiAgICAvLyBTaGFyZWRDbGllbnRTdGF0ZS5cbiAgICAgICAgaWYgKHMuaXNQcmltYXJ5Q2xpZW50ICYmIDAgLyogUmVtb3RlU3RvcmUgKi8gPT09IG4gfHwgIXMuaXNQcmltYXJ5Q2xpZW50ICYmIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8gPT09IG4pIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBzLnRhLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gcy52aWV3LkV1KGUpO1xuICAgICAgICAgICAgaS5zbmFwc2hvdCAmJiB0LnB1c2goaS5zbmFwc2hvdCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEcodCk7XG4gICAgICAgICAgICBuLm9ubGluZVN0YXRlID0gZTtcbiAgICAgICAgICAgIGxldCBzID0gITE7XG4gICAgICAgICAgICBuLnF1ZXJpZXMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5saXN0ZW5lcnMpIFxuICAgICAgICAgICAgICAgIC8vIFJ1biBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIGlmIGEgY29uc2lzdGVudCBzbmFwc2hvdCBoYXMgYmVlbiBlbWl0dGVkLlxuICAgICAgICAgICAgICAgIHQuRXUoZSkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICB9KSksIHMgJiYgT3Uobik7XG4gICAgICAgIH0ocy5ldmVudE1hbmFnZXIsIGUpLCB0Lmxlbmd0aCAmJiBzLlp1LktvKHQpLCBzLm9ubGluZVN0YXRlID0gZSwgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS5zZXRPbmxpbmVTdGF0ZShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVqZWN0cyB0aGUgbGlzdGVuIGZvciB0aGUgZ2l2ZW4gdGFyZ2V0SUQuIFRoaXMgY2FuIGJlIHRyaWdnZXJlZCBieSB0aGVcbiAqIGJhY2tlbmQgZm9yIGFueSBhY3RpdmUgdGFyZ2V0LlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uLlxuICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldElEIGNvcnJlc3BvbmRzIHRvIG9uZSBwcmV2aW91c2x5IGluaXRpYXRlZCBieSB0aGVcbiAqIHVzZXIgYXMgcGFydCBvZiBUYXJnZXREYXRhIHBhc3NlZCB0byBsaXN0ZW4oKSBvbiBSZW1vdGVTdG9yZS5cbiAqIEBwYXJhbSBlcnIgLSBBIGRlc2NyaXB0aW9uIG9mIHRoZSBjb25kaXRpb24gdGhhdCBoYXMgZm9yY2VkIHRoZSByZWplY3Rpb24uXG4gKiBOZWFybHkgYWx3YXlzIHRoaXMgd2lsbCBiZSBhbiBpbmRpY2F0aW9uIHRoYXQgdGhlIHVzZXIgaXMgbm8gbG9uZ2VyXG4gKiBhdXRob3JpemVkIHRvIHNlZSB0aGUgZGF0YSBtYXRjaGluZyB0aGUgdGFyZ2V0LlxuICovIGFzeW5jIGZ1bmN0aW9uIHRhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gRyh0KTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKTtcbiAgICBjb25zdCBpID0gcy5pYS5nZXQoZSksIHIgPSBpICYmIGkua2V5O1xuICAgIGlmIChyKSB7XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBXZSByZWFsbHkgb25seSBzaG91bGQgZG8gdGhlIGZvbGxvd2luZyBvbiBwZXJtaXNzaW9uXG4gICAgICAgIC8vIGRlbmllZCBlcnJvcnMsIGJ1dCB3ZSBkb24ndCBoYXZlIHRoZSBjYXVzZSBjb2RlIGhlcmUuXG4gICAgICAgIC8vIEl0J3MgYSBsaW1ibyBkb2MuIENyZWF0ZSBhIHN5bnRoZXRpYyBldmVudCBzYXlpbmcgaXQgd2FzIGRlbGV0ZWQuXG4gICAgICAgIC8vIFRoaXMgaXMga2luZCBvZiBhIGhhY2suIElkZWFsbHksIHdlIHdvdWxkIGhhdmUgYSBtZXRob2QgaW4gdGhlIGxvY2FsXG4gICAgICAgIC8vIHN0b3JlIHRvIHB1cmdlIGEgZG9jdW1lbnQuIEhvd2V2ZXIsIGl0IHdvdWxkIGJlIHRyaWNreSB0byBrZWVwIGFsbCBvZlxuICAgICAgICAvLyB0aGUgbG9jYWwgc3RvcmUncyBpbnZhcmlhbnRzIHdpdGggYW5vdGhlciBtZXRob2QuXG4gICAgICAgIGxldCB0ID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpO1xuICAgICAgICAvLyBUT0RPKGIvMjE3MTg5MjE2KTogVGhpcyBsaW1ibyBkb2N1bWVudCBzaG91bGQgaWRlYWxseSBoYXZlIGEgcmVhZCB0aW1lLFxuICAgICAgICAvLyBzbyB0aGF0IGl0IGlzIHBpY2tlZCB1cCBieSBhbnkgcmVhZC10aW1lIGJhc2VkIHNjYW5zLiBUaGUgYmFja2VuZCxcbiAgICAgICAgLy8gaG93ZXZlciwgZG9lcyBub3Qgc2VuZCBhIHJlYWQgdGltZSBmb3IgdGFyZ2V0IHJlbW92YWxzLlxuICAgICAgICAgICAgICAgIHQgPSB0Lmluc2VydChyLCB0ZS5uZXdOb0RvY3VtZW50KHIsIGN0Lm1pbigpKSk7XG4gICAgICAgIGNvbnN0IG4gPSB6bigpLmFkZChyKSwgaSA9IG5ldyBZbihjdC5taW4oKSwgXG4gICAgICAgIC8qIHRhcmdldENoYW5nZXM9ICovIG5ldyBNYXAsIFxuICAgICAgICAvKiB0YXJnZXRNaXNtYXRjaGVzPSAqLyBuZXcgJG4ocnQpLCB0LCBuKTtcbiAgICAgICAgYXdhaXQgWHUocywgaSksIFxuICAgICAgICAvLyBTaW5jZSB0aGlzIHF1ZXJ5IGZhaWxlZCwgd2Ugd29uJ3Qgd2FudCB0byBtYW51YWxseSB1bmxpc3RlbiB0byBpdC5cbiAgICAgICAgLy8gV2Ugb25seSByZW1vdmUgaXQgZnJvbSBib29ra2VlcGluZyBhZnRlciB3ZSBzdWNjZXNzZnVsbHkgYXBwbGllZCB0aGVcbiAgICAgICAgLy8gUmVtb3RlRXZlbnQuIElmIGBhcHBseVJlbW90ZUV2ZW50KClgIHRocm93cywgd2Ugd2FudCB0byByZS1saXN0ZW4gdG9cbiAgICAgICAgLy8gdGhpcyBxdWVyeSB3aGVuIHRoZSBSZW1vdGVTdG9yZSByZXN0YXJ0cyB0aGUgV2F0Y2ggc3RyZWFtLCB3aGljaCBzaG91bGRcbiAgICAgICAgLy8gcmUtdHJpZ2dlciB0aGUgdGFyZ2V0IGZhaWx1cmUuXG4gICAgICAgIHMuc2EgPSBzLnNhLnJlbW92ZShyKSwgcy5pYS5kZWxldGUoZSksIGhhKHMpO1xuICAgIH0gZWxzZSBhd2FpdCB1byhzLmxvY2FsU3RvcmUsIGUsIFxuICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiBvYShzLCBlLCBuKSkpLmNhdGNoKFZyKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gZS5iYXRjaC5iYXRjaElkO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBlbyhuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAvLyBUaGUgbG9jYWwgc3RvcmUgbWF5IG9yIG1heSBub3QgYmUgYWJsZSB0byBhcHBseSB0aGUgd3JpdGUgcmVzdWx0IGFuZFxuICAgICAgICAvLyByYWlzZSBldmVudHMgaW1tZWRpYXRlbHkgKGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSB3YXRjaGVyIGlzIGNhdWdodFxuICAgICAgICAvLyB1cCksIHNvIHdlIHJhaXNlIHVzZXIgY2FsbGJhY2tzIGZpcnN0IHNvIHRoYXQgdGhleSBjb25zaXN0ZW50bHkgaGFwcGVuXG4gICAgICAgIC8vIGJlZm9yZSBsaXN0ZW4gZXZlbnRzLlxuICAgICAgICAgICAgICAgIHJhKG4sIHMsIC8qZXJyb3I9Ki8gbnVsbCksIGlhKG4sIHMpLCBuLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUocywgXCJhY2tub3dsZWRnZWRcIiksIFxuICAgICAgICBhd2FpdCBsYShuLCB0KTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IFZyKHQpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbmEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBHKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gRyh0KTtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVqZWN0IGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLiRzLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgoZSA9PiAoVShudWxsICE9PSBlKSwgcyA9IGUua2V5cygpLCBuLiRzLnJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkpKSkubmV4dCgoKCkgPT4gbi4kcy5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uYWkucXModCwgcykpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdGhlIGxhcmdlc3QgKGxhdGVzdCkgYmF0Y2ggaWQgaW4gbXV0YXRpb24gcXVldWUgdGhhdCBpcyBwZW5kaW5nXG4gKiBzZXJ2ZXIgcmVzcG9uc2UuXG4gKlxuICogUmV0dXJucyBgQkFUQ0hJRF9VTktOT1dOYCBpZiB0aGUgcXVldWUgaXMgZW1wdHkuXG4gKi8gKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0IHVwKSxcbiAgICAgICAgLy8gc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW4gYmVmb3JlXG4gICAgICAgIC8vIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgcmEocywgZSwgbiksIGlhKHMsIGUpLCBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZU11dGF0aW9uU3RhdGUoZSwgXCJyZWplY3RlZFwiLCBuKSwgXG4gICAgICAgIGF3YWl0IGxhKHMsIHQpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgYXdhaXQgVnIobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHVzZXIgY2FsbGJhY2sgdGhhdCByZXNvbHZlcyB3aGVuIGFsbCBwZW5kaW5nIG11dGF0aW9ucyBhdCB0aGUgbW9tZW50IG9mIGNhbGxpbmdcbiAqIGFyZSBhY2tub3dsZWRnZWQgLlxuICovIGFzeW5jIGZ1bmN0aW9uIHNhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICBydShuLnJlbW90ZVN0b3JlKSB8fCBPKFwiU3luY0VuZ2luZVwiLCBcIlRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLiBUaGUgdGFzayByZXR1cm5lZCBieSAnYXdhaXRQZW5kaW5nV3JpdGVzKCknIHdpbGwgbm90IGNvbXBsZXRlIHVudGlsIHRoZSBuZXR3b3JrIGlzIGVuYWJsZWQuXCIpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gRyh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGhpZ2hlc3QgdW5hY2tub3dsZWRnZWQgYmF0Y2ggaWRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLiRzLmdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQodCkpKTtcbiAgICAgICAgfShuLmxvY2FsU3RvcmUpO1xuICAgICAgICBpZiAoLTEgPT09IHQpIFxuICAgICAgICAvLyBUcmlnZ2VyIHRoZSBjYWxsYmFjayByaWdodCBhd2F5IGlmIHRoZXJlIGlzIG5vIHBlbmRpbmcgd3JpdGVzIGF0IHRoZSBtb21lbnQuXG4gICAgICAgIHJldHVybiB2b2lkIGUucmVzb2x2ZSgpO1xuICAgICAgICBjb25zdCBzID0gbi51YS5nZXQodCkgfHwgW107XG4gICAgICAgIHMucHVzaChlKSwgbi51YS5zZXQodCwgcyk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBjb25zdCBuID0gUHUodCwgXCJJbml0aWFsaXphdGlvbiBvZiB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIG9wZXJhdGlvbiBmYWlsZWRcIik7XG4gICAgICAgIGUucmVqZWN0KG4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUcmlnZ2VycyB0aGUgY2FsbGJhY2tzIHRoYXQgYXJlIHdhaXRpbmcgZm9yIHRoaXMgYmF0Y2ggaWQgdG8gZ2V0IGFja25vd2xlZGdlZCBieSBzZXJ2ZXIsXG4gKiBpZiB0aGVyZSBhcmUgYW55LlxuICovIGZ1bmN0aW9uIGlhKHQsIGUpIHtcbiAgICAodC51YS5nZXQoZSkgfHwgW10pLmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0LnJlc29sdmUoKTtcbiAgICB9KSksIHQudWEuZGVsZXRlKGUpO1xufVxuXG4vKiogUmVqZWN0IGFsbCBvdXRzdGFuZGluZyBjYWxsYmFja3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgdG8gY29tcGxldGUuICovIGZ1bmN0aW9uIHJhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gRyh0KTtcbiAgICBsZXQgaSA9IHMub2Fbcy5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAvLyBOT1RFOiBNdXRhdGlvbnMgcmVzdG9yZWQgZnJvbSBwZXJzaXN0ZW5jZSB3b24ndCBoYXZlIGNhbGxiYWNrcywgc28gaXQnc1xuICAgIC8vIG9rYXkgZm9yIHRoZXJlIHRvIGJlIG5vIGNhbGxiYWNrIGZvciB0aGlzIElELlxuICAgICAgICBpZiAoaSkge1xuICAgICAgICBjb25zdCB0ID0gaS5nZXQoZSk7XG4gICAgICAgIHQgJiYgKG4gPyB0LnJlamVjdChuKSA6IHQucmVzb2x2ZSgpLCBpID0gaS5yZW1vdmUoZSkpLCBzLm9hW3MuY3VycmVudFVzZXIudG9LZXkoKV0gPSBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gb2EodCwgZSwgbiA9IG51bGwpIHtcbiAgICB0LnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQoZSk7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuZWEuZ2V0KGUpKSB0LnRhLmRlbGV0ZShzKSwgbiAmJiB0Llp1LmxhKHMsIG4pO1xuICAgIGlmICh0LmVhLmRlbGV0ZShlKSwgdC5pc1ByaW1hcnlDbGllbnQpIHtcbiAgICAgICAgdC5yYS5SaShlKS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucmEuY29udGFpbnNLZXkoZSkgfHwgXG4gICAgICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgICAgIHVhKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB1YSh0LCBlKSB7XG4gICAgdC5uYS5kZWxldGUoZS5wYXRoLmNhbm9uaWNhbFN0cmluZygpKTtcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgdGhlIHRhcmdldCBhbHJlYWR5IGdvdCByZW1vdmVkIGJlY2F1c2UgdGhlIHF1ZXJ5IGZhaWxlZC4gSW4gdGhhdCBjYXNlLFxuICAgIC8vIHRoZSBrZXkgd29uJ3QgZXhpc3QgaW4gYGxpbWJvVGFyZ2V0c0J5S2V5YC4gT25seSBkbyB0aGUgY2xlYW51cCBpZiB3ZSBzdGlsbCBoYXZlIHRoZSB0YXJnZXQuXG4gICAgY29uc3QgbiA9IHQuc2EuZ2V0KGUpO1xuICAgIG51bGwgIT09IG4gJiYgKHR1KHQucmVtb3RlU3RvcmUsIG4pLCB0LnNhID0gdC5zYS5yZW1vdmUoZSksIHQuaWEuZGVsZXRlKG4pLCBoYSh0KSk7XG59XG5cbmZ1bmN0aW9uIGFhKHQsIGUsIG4pIHtcbiAgICBmb3IgKGNvbnN0IHMgb2YgbikgaWYgKHMgaW5zdGFuY2VvZiBxdSkgdC5yYS5hZGRSZWZlcmVuY2Uocy5rZXksIGUpLCBjYSh0LCBzKTsgZWxzZSBpZiAocyBpbnN0YW5jZW9mIEd1KSB7XG4gICAgICAgIE8oXCJTeW5jRW5naW5lXCIsIFwiRG9jdW1lbnQgbm8gbG9uZ2VyIGluIGxpbWJvOiBcIiArIHMua2V5KSwgdC5yYS5yZW1vdmVSZWZlcmVuY2Uocy5rZXksIGUpO1xuICAgICAgICB0LnJhLmNvbnRhaW5zS2V5KHMua2V5KSB8fCBcbiAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgIHVhKHQsIHMua2V5KTtcbiAgICB9IGVsc2UgTCgpO1xufVxuXG5mdW5jdGlvbiBjYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUua2V5LCBzID0gbi5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIHQuc2EuZ2V0KG4pIHx8IHQubmEuaGFzKHMpIHx8IChPKFwiU3luY0VuZ2luZVwiLCBcIk5ldyBkb2N1bWVudCBpbiBsaW1ibzogXCIgKyBuKSwgdC5uYS5hZGQocyksIFxuICAgIGhhKHQpKTtcbn1cblxuLyoqXG4gKiBTdGFydHMgbGlzdGVucyBmb3IgZG9jdW1lbnRzIGluIGxpbWJvIHRoYXQgYXJlIGVucXVldWVkIGZvciByZXNvbHV0aW9uLFxuICogc3ViamVjdCB0byBhIG1heGltdW0gbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMuXG4gKlxuICogV2l0aG91dCBib3VuZGluZyB0aGUgbnVtYmVyIG9mIGNvbmN1cnJlbnQgcmVzb2x1dGlvbnMsIHRoZSBzZXJ2ZXIgY2FuIGZhaWxcbiAqIHdpdGggXCJyZXNvdXJjZSBleGhhdXN0ZWRcIiBlcnJvcnMgd2hpY2ggY2FuIGxlYWQgdG8gcGF0aG9sb2dpY2FsIGNsaWVudFxuICogYmVoYXZpb3IgYXMgc2VlbiBpbiBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2lzc3Vlcy8yNjgzLlxuICovIGZ1bmN0aW9uIGhhKHQpIHtcbiAgICBmb3IgKDt0Lm5hLnNpemUgPiAwICYmIHQuc2Euc2l6ZSA8IHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM7ICkge1xuICAgICAgICBjb25zdCBlID0gdC5uYS52YWx1ZXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgIHQubmEuZGVsZXRlKGUpO1xuICAgICAgICBjb25zdCBuID0gbmV3IHh0KF90LmZyb21TdHJpbmcoZSkpLCBzID0gdC5hYS5uZXh0KCk7XG4gICAgICAgIHQuaWEuc2V0KHMsIG5ldyBqdShuKSksIHQuc2EgPSB0LnNhLmluc2VydChuLCBzKSwgWm8odC5yZW1vdGVTdG9yZSwgbmV3IERpKExlKE5lKG4ucGF0aCkpLCBzLCAyIC8qIExpbWJvUmVzb2x1dGlvbiAqLyAsIG50LkEpKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGxhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gRyh0KSwgaSA9IFtdLCByID0gW10sIG8gPSBbXTtcbiAgICBzLnRhLmlzRW1wdHkoKSB8fCAocy50YS5mb3JFYWNoKCgodCwgdSkgPT4ge1xuICAgICAgICBvLnB1c2gocy5oYSh1LCBlLCBuKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKHUudGFyZ2V0SWQsIHQuZnJvbUNhY2hlID8gXCJub3QtY3VycmVudFwiIDogXCJjdXJyZW50XCIpLCBcbiAgICAgICAgICAgICAgICBpLnB1c2godCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEpyLkpzKHUudGFyZ2V0SWQsIHQpO1xuICAgICAgICAgICAgICAgIHIucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpKTtcbiAgICB9KSksIGF3YWl0IFByb21pc2UuYWxsKG8pLCBzLlp1LktvKGkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIm5vdGlmeUxvY2FsVmlld0NoYW5nZXNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gd2kuZm9yRWFjaChlLCAoZSA9PiB3aS5mb3JFYWNoKGUuenMsIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkubmV4dCgoKCkgPT4gd2kuZm9yRWFjaChlLkhzLCAocyA9PiBuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBlLnRhcmdldElkLCBzKSkpKSkpKSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBpZiAoIUlpKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgLy8gSWYgYG5vdGlmeUxvY2FsVmlld0NoYW5nZXNgIGZhaWxzLCB3ZSBkaWQgbm90IGFkdmFuY2UgdGhlIHNlcXVlbmNlXG4gICAgICAgICAgICAvLyBudW1iZXIgZm9yIHRoZSBkb2N1bWVudHMgdGhhdCB3ZXJlIGluY2x1ZGVkIGluIHRoaXMgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIG1pZ2h0IHRyaWdnZXIgdGhlbSB0byBiZSBkZWxldGVkIGVhcmxpZXIgdGhhbiB0aGV5IG90aGVyd2lzZVxuICAgICAgICAgICAgLy8gd291bGQgaGF2ZSwgYnV0IGl0IHNob3VsZCBub3QgaW52YWxpZGF0ZSB0aGUgaW50ZWdyaXR5IG9mIHRoZSBkYXRhLlxuICAgICAgICAgICAgTyhcIkxvY2FsU3RvcmVcIiwgXCJGYWlsZWQgdG8gdXBkYXRlIHNlcXVlbmNlIG51bWJlcnM6IFwiICsgdCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkO1xuICAgICAgICAgICAgaWYgKCF0LmZyb21DYWNoZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLnNpLmdldChlKSwgcyA9IHQuc25hcHNob3RWZXJzaW9uLCBpID0gdC53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihzKTtcbiAgICAgICAgICAgICAgICAvLyBBZHZhbmNlIHRoZSBsYXN0IGxpbWJvIGZyZWUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnNpID0gbi5zaS5pbnNlcnQoZSwgaSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KHMubG9jYWxTdG9yZSwgcikpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBmYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgaWYgKCFuLmN1cnJlbnRVc2VyLmlzRXF1YWwoZSkpIHtcbiAgICAgICAgTyhcIlN5bmNFbmdpbmVcIiwgXCJVc2VyIGNoYW5nZS4gTmV3IHVzZXI6XCIsIGUudG9LZXkoKSk7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0byhuLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICBuLmN1cnJlbnRVc2VyID0gZSwgXG4gICAgICAgIC8vIEZhaWxzIHRhc2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHJlcXVlc3RlZCBieSBwcmV2aW91cyB1c2VyLlxuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICB0LnVhLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQucmVqZWN0KG5ldyBRKEsuQ0FOQ0VMTEVELCBlKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCB0LnVhLmNsZWFyKCk7XG4gICAgICAgIH0obiwgXCInd2FpdEZvclBlbmRpbmdXcml0ZXMnIHByb21pc2UgaXMgcmVqZWN0ZWQgZHVlIHRvIGEgdXNlciBjaGFuZ2UuXCIpLCBcbiAgICAgICAgLy8gVE9ETyhiLzExNDIyNjQxNyk6IENvbnNpZGVyIGNhbGxpbmcgdGhpcyBvbmx5IGluIHRoZSBwcmltYXJ5IHRhYi5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5oYW5kbGVVc2VyQ2hhbmdlKGUsIHQucmVtb3ZlZEJhdGNoSWRzLCB0LmFkZGVkQmF0Y2hJZHMpLCBhd2FpdCBsYShuLCB0LmNpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KSwgcyA9IG4uaWEuZ2V0KGUpO1xuICAgIGlmIChzICYmIHMuWHUpIHJldHVybiB6bigpLmFkZChzLmtleSk7XG4gICAge1xuICAgICAgICBsZXQgdCA9IHpuKCk7XG4gICAgICAgIGNvbnN0IHMgPSBuLmVhLmdldChlKTtcbiAgICAgICAgaWYgKCFzKSByZXR1cm4gdDtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLnRhLmdldChlKTtcbiAgICAgICAgICAgIHQgPSB0LnVuaW9uV2l0aChzLnZpZXcucXUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvbmNpbGUgdGhlIGxpc3Qgb2Ygc3luY2VkIGRvY3VtZW50cyBpbiBhbiBleGlzdGluZyB2aWV3IHdpdGggdGhvc2VcbiAqIGZyb20gcGVyc2lzdGVuY2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24gX2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gYXdhaXQgYW8obi5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgaSA9IGUudmlldy5KdShzKTtcbiAgICByZXR1cm4gbi5pc1ByaW1hcnlDbGllbnQgJiYgYWEobiwgZS50YXJnZXRJZCwgaS56dSksIGk7XG59XG5cbi8qKlxuICogUmV0cmlldmVzIG5ld2x5IGNoYW5nZWQgZG9jdW1lbnRzIGZyb20gcmVtb3RlIGRvY3VtZW50IGNhY2hlIGFuZCByYWlzZXNcbiAqIHNuYXBzaG90cyBpZiBuZWVkZWQuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiB3YSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgcmV0dXJuIGhvKG4ubG9jYWxTdG9yZSwgZSkudGhlbigodCA9PiBsYShuLCB0KSkpO1xufVxuXG4vKiogQXBwbGllcyBhIG11dGF0aW9uIHN0YXRlIHRvIGFuIGV4aXN0aW5nIGJhdGNoLiAgKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBtYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IEcodCksIHIgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gRyhuLiRzKTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb29rdXAgbXV0YXRpb24gZG9jdW1lbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5sbih0LCBlKS5uZXh0KChlID0+IGUgPyBuLmFpLnFzKHQsIGUpIDogd2kucmVzb2x2ZShudWxsKSkpKSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgZSk7XG4gICAgbnVsbCAhPT0gciA/IChcInBlbmRpbmdcIiA9PT0gbiA/IFxuICAgIC8vIElmIHdlIGFyZSB0aGUgcHJpbWFyeSBjbGllbnQsIHdlIG5lZWQgdG8gc2VuZCB0aGlzIHdyaXRlIHRvIHRoZVxuICAgIC8vIGJhY2tlbmQuIFNlY29uZGFyeSBjbGllbnRzIHdpbGwgaWdub3JlIHRoZXNlIHdyaXRlcyBzaW5jZSB0aGVpciByZW1vdGVcbiAgICAvLyBjb25uZWN0aW9uIGlzIGRpc2FibGVkLlxuICAgIGF3YWl0IGZ1KGkucmVtb3RlU3RvcmUpIDogXCJhY2tub3dsZWRnZWRcIiA9PT0gbiB8fCBcInJlamVjdGVkXCIgPT09IG4gPyAoXG4gICAgLy8gTk9URTogQm90aCB0aGVzZSBtZXRob2RzIGFyZSBuby1vcHMgZm9yIGJhdGNoZXMgdGhhdCBvcmlnaW5hdGVkIGZyb21cbiAgICAvLyBvdGhlciBjbGllbnRzLlxuICAgIHJhKGksIGUsIHMgfHwgbnVsbCksIGlhKGksIGUpLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEcoRyh0KS4kcykuZG4oZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgKGkubG9jYWxTdG9yZSwgZSkpIDogTCgpLCBhd2FpdCBsYShpLCByKSkgOiBcbiAgICAvLyBBIHRocm90dGxlZCB0YWIgbWF5IG5vdCBoYXZlIHNlZW4gdGhlIG11dGF0aW9uIGJlZm9yZSBpdCB3YXMgY29tcGxldGVkXG4gICAgLy8gYW5kIHJlbW92ZWQgZnJvbSB0aGUgbXV0YXRpb24gcXVldWUsIGluIHdoaWNoIGNhc2Ugd2Ugd29uJ3QgaGF2ZSBjYWNoZWRcbiAgICAvLyB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzLiBJbiB0aGlzIGNhc2Ugd2UgY2FuIHNhZmVseSBpZ25vcmUgdGhlIHVwZGF0ZVxuICAgIC8vIHNpbmNlIHRoYXQgbWVhbnMgd2UgZGlkbid0IGFwcGx5IHRoZSBtdXRhdGlvbiBsb2NhbGx5IGF0IGFsbCAoaWYgd2VcbiAgICAvLyBoYWQsIHdlIHdvdWxkIGhhdmUgY2FjaGVkIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMpLCBhbmQgc28gd2Ugd2lsbCBqdXN0XG4gICAgLy8gc2VlIGFueSByZXN1bHRpbmcgZG9jdW1lbnQgY2hhbmdlcyB2aWEgbm9ybWFsIHJlbW90ZSBkb2N1bWVudCB1cGRhdGVzXG4gICAgLy8gYXMgYXBwbGljYWJsZS5cbiAgICBPKFwiU3luY0VuZ2luZVwiLCBcIkNhbm5vdCBhcHBseSBtdXRhdGlvbiBiYXRjaCB3aXRoIGlkOiBcIiArIGUpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gZ2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIGlmIChBYShuKSwgUmEobiksICEwID09PSBlICYmICEwICE9PSBuLmNhKSB7XG4gICAgICAgIC8vIFNlY29uZGFyeSB0YWJzIG9ubHkgbWFpbnRhaW4gVmlld3MgZm9yIHRoZWlyIGxvY2FsIGxpc3RlbmVycyBhbmQgdGhlXG4gICAgICAgIC8vIFZpZXdzIGludGVybmFsIHN0YXRlIG1heSBub3QgYmUgMTAwJSBwb3B1bGF0ZWQgKGluIHBhcnRpY3VsYXJcbiAgICAgICAgLy8gc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgdHJhY2sgc3luY2VkRG9jdW1lbnRzLCB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGVcbiAgICAgICAgLy8gc2VydmVyIGNvbnNpZGVycyB0byBiZSBpbiB0aGUgdGFyZ2V0KS4gU28gd2hlbiBhIHNlY29uZGFyeSBiZWNvbWVzXG4gICAgICAgIC8vIHByaW1hcnksIHdlIG5lZWQgdG8gbmVlZCB0byBtYWtlIHN1cmUgdGhhdCBhbGwgdmlld3MgZm9yIGFsbCB0YXJnZXRzXG4gICAgICAgIC8vIG1hdGNoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAgICBjb25zdCB0ID0gbi5zaGFyZWRDbGllbnRTdGF0ZS5nZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSwgZSA9IGF3YWl0IHlhKG4sIHQudG9BcnJheSgpKTtcbiAgICAgICAgbi5jYSA9ICEwLCBhd2FpdCBFdShuLnJlbW90ZVN0b3JlLCAhMCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSBabyhuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9IGVsc2UgaWYgKCExID09PSBlICYmICExICE9PSBuLmNhKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgbGV0IGUgPSBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgbi5lYS5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5pc0xvY2FsUXVlcnlUYXJnZXQoaSkgPyB0LnB1c2goaSkgOiBlID0gZS50aGVuKCgoKSA9PiAob2EobiwgaSksIFxuICAgICAgICAgICAgdW8obi5sb2NhbFN0b3JlLCBpLCBcbiAgICAgICAgICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApKSkpLCB0dShuLnJlbW90ZVN0b3JlLCBpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBlLCBhd2FpdCB5YShuLCB0KSwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgICAgICAgICAgZS5pYS5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIHR1KGUucmVtb3RlU3RvcmUsIG4pO1xuICAgICAgICAgICAgfSkpLCBlLnJhLmJpKCksIGUuaWEgPSBuZXcgTWFwLCBlLnNhID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVjb25jaWxlIHRoZSBxdWVyeSB2aWV3cyBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgdGFyZ2V0cyB3aXRoIHRoZSBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS4gUmFpc2VzIHNuYXBzaG90cyBmb3IgYW55IGNoYW5nZXMgdGhhdCBhZmZlY3QgdGhlIGxvY2FsXG4gKiBjbGllbnQgYW5kIHJldHVybnMgdGhlIHVwZGF0ZWQgc3RhdGUgb2YgYWxsIHRhcmdldCdzIHF1ZXJ5IGRhdGEuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb25cbiAqIEBwYXJhbSB0YXJnZXRzIC0gdGhlIGxpc3Qgb2YgdGFyZ2V0cyB3aXRoIHZpZXdzIHRoYXQgbmVlZCB0byBiZSByZWNvbXB1dGVkXG4gKiBAcGFyYW0gdHJhbnNpdGlvblRvUHJpbWFyeSAtIGB0cnVlYCBpZmYgdGhlIHRhYiB0cmFuc2l0aW9ucyBmcm9tIGEgc2Vjb25kYXJ5XG4gKiB0YWIgdG8gYSBwcmltYXJ5IHRhYlxuICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG4gICAgICAgIChuKSwgbi5jYSA9ICExLCBhd2FpdCBFdShuLnJlbW90ZVN0b3JlLCAhMSk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB5YSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEcodCksIGkgPSBbXSwgciA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBjb25zdCBuID0gcy5lYS5nZXQodCk7XG4gICAgICAgIGlmIChuICYmIDAgIT09IG4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IGhhdmUgYSBsb2NhbCBWaWV3LCB3ZSBmZXRjaCB0aGVpciBjdXJyZW50IHN0YXRlXG4gICAgICAgICAgICAvLyBmcm9tIExvY2FsU3RvcmUgKGFzIHRoZSByZXN1bWUgdG9rZW4gYW5kIHRoZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAvLyBtaWdodCBoYXZlIGNoYW5nZWQpIGFuZCByZWNvbmNpbGUgdGhlaXIgdmlld3Mgd2l0aCB0aGUgcGVyc2lzdGVkXG4gICAgICAgICAgICAvLyBzdGF0ZSAodGhlIGxpc3Qgb2Ygc3luY2VkRG9jdW1lbnRzIG1heSBoYXZlIGdvdHRlbiBvdXQgb2Ygc3luYykuXG4gICAgICAgICAgICBlID0gYXdhaXQgb28ocy5sb2NhbFN0b3JlLCBMZShuWzBdKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBzLnRhLmdldCh0KSwgbiA9IGF3YWl0IF9hKHMsIGUpO1xuICAgICAgICAgICAgICAgIG4uc25hcHNob3QgJiYgci5wdXNoKG4uc25hcHNob3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBuZXZlciBleGVjdXRlZCBvbiB0aGlzIGNsaWVudCwgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gYWxsb2NhdGUgdGhlIHRhcmdldCBpbiBMb2NhbFN0b3JlIGFuZCBpbml0aWFsaXplIGEgbmV3IFZpZXcuXG4gICAgICAgICAgICBjb25zdCBuID0gYXdhaXQgY28ocy5sb2NhbFN0b3JlLCB0KTtcbiAgICAgICAgICAgIGUgPSBhd2FpdCBvbyhzLmxvY2FsU3RvcmUsIG4pLCBhd2FpdCBIdShzLCBwYShuKSwgdCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEpO1xuICAgICAgICB9XG4gICAgICAgIGkucHVzaChlKTtcbiAgICB9XG4gICAgcmV0dXJuIHMuWnUuS28ociksIGk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGBRdWVyeWAgb2JqZWN0IGZyb20gdGhlIHNwZWNpZmllZCBgVGFyZ2V0YC4gVGhlcmUgaXMgbm8gd2F5IHRvXG4gKiBvYnRhaW4gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIHNvIHdlIHN5bnRoZXNpemUgYSBgUXVlcnlgIGZyb20gdGhlIGBUYXJnZXRgXG4gKiBvYmplY3QuXG4gKlxuICogVGhlIHN5bnRoZXNpemVkIHJlc3VsdCBtaWdodCBiZSBkaWZmZXJlbnQgZnJvbSB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgYnV0XG4gKiBzaW5jZSB0aGUgc3ludGhlc2l6ZWQgYFF1ZXJ5YCBzaG91bGQgcmV0dXJuIHRoZSBzYW1lIHJlc3VsdHMgYXMgdGhlXG4gKiBvcmlnaW5hbCBvbmUgKG9ubHkgdGhlIHByZXNlbnRhdGlvbiBvZiByZXN1bHRzIG1pZ2h0IGRpZmZlciksIHRoZSBwb3RlbnRpYWxcbiAqIGRpZmZlcmVuY2Ugd2lsbCBub3QgY2F1c2UgaXNzdWVzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gcGEodCkge1xuICAgIHJldHVybiB4ZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0Lm9yZGVyQnksIHQuZmlsdGVycywgdC5saW1pdCwgXCJGXCIgLyogRmlyc3QgKi8gLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xufVxuXG4vKiogUmV0dXJucyB0aGUgSURzIG9mIHRoZSBjbGllbnRzIHRoYXQgYXJlIGN1cnJlbnRseSBhY3RpdmUuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gSWEodCkge1xuICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgIHJldHVybiBHKEcoZS5sb2NhbFN0b3JlKS5wZXJzaXN0ZW5jZSkuT3MoKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIFRhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gRyh0KTtcbiAgICBpZiAoaS5jYSkgXG4gICAgLy8gSWYgd2UgcmVjZWl2ZSBhIHRhcmdldCBzdGF0ZSBub3RpZmljYXRpb24gdmlhIFdlYlN0b3JhZ2UsIHdlIGFyZVxuICAgIC8vIGVpdGhlciBhbHJlYWR5IHNlY29uZGFyeSBvciBhbm90aGVyIHRhYiBoYXMgdGFrZW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgcmV0dXJuIHZvaWQgTyhcIlN5bmNFbmdpbmVcIiwgXCJJZ25vcmluZyB1bmV4cGVjdGVkIHF1ZXJ5IHN0YXRlIG5vdGlmaWNhdGlvbi5cIik7XG4gICAgY29uc3QgciA9IGkuZWEuZ2V0KGUpO1xuICAgIGlmIChyICYmIHIubGVuZ3RoID4gMCkgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIFwiY3VycmVudFwiOlxuICAgICAgY2FzZSBcIm5vdC1jdXJyZW50XCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBobyhpLmxvY2FsU3RvcmUsIGplKHJbMF0pKSwgcyA9IFluLmNyZWF0ZVN5bnRoZXNpemVkUmVtb3RlRXZlbnRGb3JDdXJyZW50Q2hhbmdlKGUsIFwiY3VycmVudFwiID09PSBuKTtcbiAgICAgICAgICAgIGF3YWl0IGxhKGksIHQsIHMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgIGF3YWl0IHVvKGkubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgb2EoaSwgZSwgcyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBMKCk7XG4gICAgfVxufVxuXG4vKiogQWRkcyBvciByZW1vdmVzIFdhdGNoIHRhcmdldHMgZm9yIHF1ZXJpZXMgZnJvbSBkaWZmZXJlbnQgdGFicy4gKi8gYXN5bmMgZnVuY3Rpb24gRWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBBYSh0KTtcbiAgICBpZiAocy5jYSkge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHMuZWEuaGFzKHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIE8oXCJTeW5jRW5naW5lXCIsIFwiQWRkaW5nIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IGNvKHMubG9jYWxTdG9yZSwgdCksIG4gPSBhd2FpdCBvbyhzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAgICAgYXdhaXQgSHUocywgcGEoZSksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExKSwgWm8ocy5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIFxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXG4gICAgICAgIHMuZWEuaGFzKHQpICYmIFxuICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxuICAgICAgICBhd2FpdCB1byhzLmxvY2FsU3RvcmUsIHQsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdHUocy5yZW1vdGVTdG9yZSwgdCksIG9hKHMsIHQpO1xuICAgICAgICB9KSkuY2F0Y2goVnIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQWEodCkge1xuICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgIHJldHVybiBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50ID0gWHUuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGRhLmJpbmQobnVsbCwgZSksIFxuICAgIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbiA9IHRhLmJpbmQobnVsbCwgZSksIGUuWnUuS28gPSBrdS5iaW5kKG51bGwsIGUuZXZlbnRNYW5hZ2VyKSwgXG4gICAgZS5adS5sYSA9IE11LmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBlO1xufVxuXG5mdW5jdGlvbiBSYSh0KSB7XG4gICAgY29uc3QgZSA9IEcodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gZWEuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUgPSBuYS5iaW5kKG51bGwsIGUpLCBcbiAgICBlO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBiYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEcodCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAoXG4gICAgLyoqIExvYWRzIGEgYnVuZGxlIGFuZCByZXR1cm5zIHRoZSBsaXN0IG9mIGFmZmVjdGVkIGNvbGxlY3Rpb24gZ3JvdXBzLiAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBlLmdldE1ldGFkYXRhKCk7XG4gICAgICAgICAgICBpZiAoYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gZnMoZS5jcmVhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcImhhc05ld2VyQnVuZGxlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5kcy5nZXRCdW5kbGVNZXRhZGF0YSh0LCBlLmlkKSkpLnRoZW4oKHQgPT4gISF0ICYmIHQuY3JlYXRlVGltZS5jb21wYXJlVG8ocykgPj0gMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYEJ1bmRsZU1ldGFkYXRhYCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSkgcmV0dXJuIGF3YWl0IGUuY2xvc2UoKSwgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiB0LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShzKSksIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgICAgIG4uX3VwZGF0ZVByb2dyZXNzKFV1KHMpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgTHUocywgdC5sb2NhbFN0b3JlLCBlLk0pO1xuICAgICAgICAgICAgbGV0IHIgPSBhd2FpdCBlLmZhKCk7XG4gICAgICAgICAgICBmb3IgKDtyOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgaS5OdShyKTtcbiAgICAgICAgICAgICAgICB0ICYmIG4uX3VwZGF0ZVByb2dyZXNzKHQpLCByID0gYXdhaXQgZS5mYSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IGkuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCBsYSh0LCBvLk91LCBcbiAgICAgICAgICAgIC8qIHJlbW90ZUV2ZW50ICovIHZvaWQgMCksIFxuICAgICAgICAgICAgLy8gU2F2ZSBtZXRhZGF0YSwgc28gbG9hZGluZyB0aGUgc2FtZSBidW5kbGUgd2lsbCBza2lwLlxuICAgICAgICAgICAgYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBidW5kbGVcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbi5kcy5zYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBgTmFtZWRRdWVyeWAgYXNzb2NpYXRlZCB3aXRoIGdpdmVuIHF1ZXJ5IG5hbWUuIFByb21pc2VcbiAqIHJlc29sdmVzIHRvIHVuZGVmaW5lZCBpZiBubyBwZXJzaXN0ZWQgZGF0YSBjYW4gYmUgZm91bmQuXG4gKi8gKHQubG9jYWxTdG9yZSwgcyksIG4uX2NvbXBsZXRlV2l0aChvLnByb2dyZXNzKSwgUHJvbWlzZS5yZXNvbHZlKG8uTXUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gJChcIlN5bmNFbmdpbmVcIiwgYExvYWRpbmcgYnVuZGxlIGZhaWxlZCB3aXRoICR7dH1gKSwgbi5fZmFpbFdpdGgodCksIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gKiBVc2VzIEVhZ2VyR0MgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovKShzLCBlLCBuKS50aGVuKCh0ID0+IHtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQodCk7XG4gICAgfSkpO1xufVxuXG5jbGFzcyBQYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLk0gPSBHbyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHRoaXMuZGEodCksIHRoaXMucGVyc2lzdGVuY2UgPSB0aGlzLl9hKHQpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zdGFydCgpLCB0aGlzLmdjU2NoZWR1bGVyID0gdGhpcy53YSh0KSwgdGhpcy5sb2NhbFN0b3JlID0gdGhpcy5tYSh0KTtcbiAgICB9XG4gICAgd2EodCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWEodCkge1xuICAgICAgICByZXR1cm4gWnIodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IFlyLCB0LmluaXRpYWxVc2VyLCB0aGlzLk0pO1xuICAgIH1cbiAgICBfYSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQW8oYm8uV2ksIHRoaXMuTSk7XG4gICAgfVxuICAgIGRhKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNbztcbiAgICB9XG4gICAgYXN5bmMgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpLCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnNodXRkb3duKCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnNodXRkb3duKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggSW5kZXhlZERCIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIFZhIGV4dGVuZHMgUGEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5nYSA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLmZvcmNlT3duZXJzaGlwID0gbiwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCksIGF3YWl0IHRoaXMuZ2EuaW5pdGlhbGl6ZSh0aGlzLCB0KSwgXG4gICAgICAgIC8vIEVucXVldWUgd3JpdGVzIGZyb20gYSBwcmV2aW91cyBzZXNzaW9uXG4gICAgICAgIGF3YWl0IFJhKHRoaXMuZ2Euc3luY0VuZ2luZSksIGF3YWl0IGZ1KHRoaXMuZ2EucmVtb3RlU3RvcmUpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5JcygoKCkgPT4gKHRoaXMuZ2NTY2hlZHVsZXIgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICB9XG4gICAgbWEodCkge1xuICAgICAgICByZXR1cm4gWnIodGhpcy5wZXJzaXN0ZW5jZSwgbmV3IFlyLCB0LmluaXRpYWxVc2VyLCB0aGlzLk0pO1xuICAgIH1cbiAgICB3YSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgRHIoZSwgdC5hc3luY1F1ZXVlKTtcbiAgICB9XG4gICAgX2EodCkge1xuICAgICAgICBjb25zdCBlID0genIodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gX3Iud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IF9yLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgUXIodGhpcy5zeW5jaHJvbml6ZVRhYnMsIGUsIHQuY2xpZW50SWQsIG4sIHQuYXN5bmNRdWV1ZSwgVW8oKSwgcW8oKSwgdGhpcy5NLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBkYSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTW87XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyB2YSBleHRlbmRzIFZhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMuZ2EgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdhLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBrbyAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAga3I6IG1hLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBNcjogVGEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIE9yOiBFYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgT3M6IElhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBOcjogd2EuYmluZChudWxsLCBlKVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5JcygoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBhd2FpdCBnYSh0aGlzLmdhLnN5bmNFbmdpbmUsIHQpLCB0aGlzLmdjU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KHRoaXMubG9jYWxTdG9yZSkgOiB0IHx8IHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBkYSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBVbygpO1xuICAgICAgICBpZiAoIWtvLnZ0KGUpKSB0aHJvdyBuZXcgUShLLlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IHpyKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBrbyhlLCB0LmFzeW5jUXVldWUsIG4sIHQuY2xpZW50SWQsIHQuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBTYSB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gdC5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdC5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUoZSksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKGUpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcihlKSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKGUsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhdC5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IHQgPT4gWnUodGhpcy5zeW5jRW5naW5lLCB0LCAxIC8qIFNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBmYS5iaW5kKG51bGwsIHRoaXMuc3luY0VuZ2luZSksIFxuICAgICAgICBhd2FpdCBFdSh0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnN5bmNFbmdpbmUuaXNQcmltYXJ5Q2xpZW50KSk7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ3U7XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBHbyh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IChzID0gdC5kYXRhYmFzZUluZm8sIG5ldyBMbyhzKSk7XG4gICAgICAgIHZhciBzO1xuICAgICAgICAvKiogUmV0dXJuIHRoZSBQbGF0Zm9ybS1zcGVjaWZpYyBjb25uZWN0aXZpdHkgbW9uaXRvci4gKi8gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHpvKHQsIGUsIG4sIHMpO1xuICAgICAgICB9KHQuYXV0aENyZWRlbnRpYWxzLCB0LmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIGUpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZSh0KSB7XG4gICAgICAgIHJldHVybiBlID0gdGhpcy5sb2NhbFN0b3JlLCBuID0gdGhpcy5kYXRhc3RvcmUsIHMgPSB0LmFzeW5jUXVldWUsIGkgPSB0ID0+IFp1KHRoaXMuc3luY0VuZ2luZSwgdCwgMCAvKiBSZW1vdGVTdG9yZSAqLyksIFxuICAgICAgICByID0gRm8udnQoKSA/IG5ldyBGbyA6IG5ldyBPbywgbmV3IEpvKGUsIG4sIHMsIGksIHIpO1xuICAgICAgICB2YXIgZSwgbiwgcywgaSwgcjtcbiAgICAgICAgLyoqIFJlLWVuYWJsZXMgdGhlIG5ldHdvcmsuIElkZW1wb3RlbnQuICovICAgIH1cbiAgICBjcmVhdGVTeW5jRW5naW5lKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgICAgIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBuZXcgV3UodCwgZSwgbiwgcywgaSwgcik7XG4gICAgICAgICAgICByZXR1cm4gbyAmJiAodS5jYSA9ICEwKSwgdTtcbiAgICAgICAgfSh0aGlzLmxvY2FsU3RvcmUsIHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuZXZlbnRNYW5hZ2VyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCB0LmluaXRpYWxVc2VyLCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zLCBlKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEcodCk7XG4gICAgICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSBzaHV0dGluZyBkb3duLlwiKSwgZS5sdS5hZGQoNSAvKiBTaHV0ZG93biAqLyksIGF3YWl0IFhvKGUpLCBcbiAgICAgICAgICAgIGUuZHUuc2h1dGRvd24oKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gKHJhdGhlciB0aGFuIE9mZmxpbmUpIHRvIGF2b2lkIHBvdGVudGlhbGx5XG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXG4gICAgICAgICAgICBlLl91LnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKTtcbiAgICAgICAgfSh0aGlzLnJlbW90ZVN0b3JlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvdyBtYW55IGJ5dGVzIHRvIHJlYWQgZWFjaCB0aW1lIHdoZW4gYFJlYWRhYmxlU3RyZWFtUmVhZGVyLnJlYWQoKWAgaXNcbiAqIGNhbGxlZC4gT25seSBhcHBsaWNhYmxlIGZvciBieXRlIHN0cmVhbXMgdGhhdCB3ZSBjb250cm9sIChlLmcuIHRob3NlIGJhY2tlZFxuICogYnkgYW4gVUludDhBcnJheSkuXG4gKi9cbi8qKlxuICogQnVpbGRzIGEgYEJ5dGVTdHJlYW1SZWFkZXJgIGZyb20gYSBVSW50OEFycmF5LlxuICogQHBhcmFtIHNvdXJjZSAtIFRoZSBkYXRhIHNvdXJjZSB0byB1c2UuXG4gKiBAcGFyYW0gYnl0ZXNQZXJSZWFkIC0gSG93IG1hbnkgYnl0ZXMgZWFjaCBgcmVhZCgpYCBmcm9tIHRoZSByZXR1cm5lZCByZWFkZXJcbiAqICAgICAgICB3aWxsIHJlYWQuXG4gKi9cbmZ1bmN0aW9uIERhKHQsIGUgPSAxMDI0MCkge1xuICAgIGxldCBuID0gMDtcbiAgICAvLyBUaGUgVHlwZVNjcmlwdCBkZWZpbml0aW9uIGZvciBSZWFkYWJsZVN0cmVhbVJlYWRlciBjaGFuZ2VkLiBXZSB1c2VcbiAgICAvLyBgYW55YCBoZXJlIHRvIGFsbG93IHRoaXMgY29kZSB0byBjb21waWxlIHdpdGggZGlmZmVyZW50IHZlcnNpb25zLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQyOTcwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXN5bmMgcmVhZCgpIHtcbiAgICAgICAgICAgIGlmIChuIDwgdC5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQuc2xpY2UobiwgbiArIGUpLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gKz0gZSwgcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNhbmNlbCgpIHt9LFxuICAgICAgICByZWxlYXNlTG9jaygpIHt9LFxuICAgICAgICBjbG9zZWQ6IFByb21pc2UucmVqZWN0KFwidW5pbXBsZW1lbnRlZFwiKVxuICAgIH07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE9uIHdlYiwgYSBgUmVhZGFibGVTdHJlYW1gIGlzIHdyYXBwZWQgYXJvdW5kIGJ5IGEgYEJ5dGVTdHJlYW1SZWFkZXJgLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLypcbiAqIEEgd3JhcHBlciBpbXBsZW1lbnRhdGlvbiBvZiBPYnNlcnZlcjxUPiB0aGF0IHdpbGwgZGlzcGF0Y2ggZXZlbnRzXG4gKiBhc3luY2hyb25vdXNseS4gVG8gYWxsb3cgaW1tZWRpYXRlIHNpbGVuY2luZywgYSBtdXRlIGNhbGwgaXMgYWRkZWQgd2hpY2hcbiAqIGNhdXNlcyBldmVudHMgc2NoZWR1bGVkIHRvIG5vIGxvbmdlciBiZSByYWlzZWQuXG4gKi9cbmNsYXNzIENhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZW4gc2V0IHRvIHRydWUsIHdpbGwgbm90IHJhaXNlIGZ1dHVyZSBldmVudHMuIE5lY2Vzc2FyeSB0byBkZWFsIHdpdGhcbiAgICAgICAgICogYXN5bmMgZGV0YWNobWVudCBvZiBsaXN0ZW5lci5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMTtcbiAgICB9XG4gICAgbmV4dCh0KSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIubmV4dCAmJiB0aGlzLnlhKHRoaXMub2JzZXJ2ZXIubmV4dCwgdCk7XG4gICAgfVxuICAgIGVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5lcnJvciA/IHRoaXMueWEodGhpcy5vYnNlcnZlci5lcnJvciwgdCkgOiBjb25zb2xlLmVycm9yKFwiVW5jYXVnaHQgRXJyb3IgaW4gc25hcHNob3QgbGlzdGVuZXI6XCIsIHQpO1xuICAgIH1cbiAgICBwYSgpIHtcbiAgICAgICAgdGhpcy5tdXRlZCA9ICEwO1xuICAgIH1cbiAgICB5YSh0LCBlKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgfHwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5tdXRlZCB8fCB0KGUpO1xuICAgICAgICB9KSwgMCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIGJ1bmRsZS5cbiAqXG4gKiBUYWtlcyBhIGJ1bmRsZSBzdHJlYW0gb3IgYnVmZmVyLCBhbmQgcHJlc2VudHMgYWJzdHJhY3Rpb25zIHRvIHJlYWQgYnVuZGxlZFxuICogZWxlbWVudHMgb3V0IG9mIHRoZSB1bmRlcmx5aW5nIGNvbnRlbnQuXG4gKi8gY2xhc3MgeGEge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgcmVhZGVyIHRvIHJlYWQgZnJvbSB1bmRlcmx5aW5nIGJpbmFyeSBidW5kbGUgZGF0YSBzb3VyY2UuICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLklhID0gdCwgdGhpcy5NID0gZSwgXG4gICAgICAgIC8qKiBDYWNoZWQgYnVuZGxlIG1ldGFkYXRhLiAqL1xuICAgICAgICB0aGlzLm1ldGFkYXRhID0gbmV3IGosIFxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJuYWwgYnVmZmVyIHRvIGhvbGQgYnVuZGxlIGNvbnRlbnQsIGFjY3VtdWxhdGluZyBpbmNvbXBsZXRlIGVsZW1lbnRcbiAgICAgICAgICogY29udGVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXksIHRoaXMuVGEgPSBuZXcgVGV4dERlY29kZXIoXCJ1dGYtOFwiKSwgXG4gICAgICAgIC8vIFJlYWQgdGhlIG1ldGFkYXRhICh3aGljaCBpcyB0aGUgZmlyc3QgZWxlbWVudCkuXG4gICAgICAgIHRoaXMuRWEoKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIHQgJiYgdC5DdSgpID8gdGhpcy5tZXRhZGF0YS5yZXNvbHZlKHQucGF5bG9hZC5tZXRhZGF0YSkgOiB0aGlzLm1ldGFkYXRhLnJlamVjdChuZXcgRXJyb3IoYFRoZSBmaXJzdCBlbGVtZW50IG9mIHRoZSBidW5kbGUgaXMgbm90IGEgbWV0YWRhdGEsIGl0IGlzXFxuICAgICAgICAgICAgICR7SlNPTi5zdHJpbmdpZnkobnVsbCA9PSB0ID8gdm9pZCAwIDogdC5wYXlsb2FkKX1gKSk7XG4gICAgICAgIH0pLCAodCA9PiB0aGlzLm1ldGFkYXRhLnJlamVjdCh0KSkpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSWEuY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5wcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBmYSgpIHtcbiAgICAgICAgLy8gTWFrZXMgc3VyZSBtZXRhZGF0YSBpcyByZWFkIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRNZXRhZGF0YSgpLCB0aGlzLkVhKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGhlYWQgb2YgaW50ZXJuYWwgYnVmZmVyLCBhbmQgcHVsbGluZyBtb3JlIGRhdGEgZnJvbVxuICAgICAqIHVuZGVybHlpbmcgc3RyZWFtIGlmIGEgY29tcGxldGUgZWxlbWVudCBjYW5ub3QgYmUgZm91bmQsIHVudGlsIGFuXG4gICAgICogZWxlbWVudChpbmNsdWRpbmcgdGhlIHByZWZpeGVkIGxlbmd0aCBhbmQgdGhlIEpTT04gc3RyaW5nKSBpcyBmb3VuZC5cbiAgICAgKlxuICAgICAqIE9uY2UgYSBjb21wbGV0ZSBlbGVtZW50IGlzIHJlYWQsIGl0IGlzIGRyb3BwZWQgZnJvbSBpbnRlcm5hbCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGVpdGhlciB0aGUgYnVuZGxlZCBlbGVtZW50LCBvciBudWxsIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mXG4gICAgICogdGhlIHN0cmVhbS5cbiAgICAgKi8gICAgYXN5bmMgRWEoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLkFhKCk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVGEuZGVjb2RlKHQpLCBuID0gTnVtYmVyKGUpO1xuICAgICAgICBpc05hTihuKSAmJiB0aGlzLlJhKGBsZW5ndGggc3RyaW5nICgke2V9KSBpcyBub3QgdmFsaWQgbnVtYmVyYCk7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLmJhKG4pO1xuICAgICAgICByZXR1cm4gbmV3ICR1KEpTT04ucGFyc2UocyksIHQubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIFBhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KCh0ID0+IHQgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBBYSgpIHtcbiAgICAgICAgZm9yICg7dGhpcy5QYSgpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5WYSgpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5QYSgpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgdCA8IDAgJiYgdGhpcy5SYShcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgYmEodCkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCB0OyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuVmEoKSAmJiB0aGlzLlJhKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlRhLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIFJhKHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLklhLmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHt0fWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIFZhKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5JYS5yZWFkKCk7XG4gICAgICAgIGlmICghdC5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgdC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZS5zZXQodGhpcy5idWZmZXIpLCBlLnNldCh0LnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXG4gKi9cbmNsYXNzIE5hIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdCwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAodCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuXCIpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEcodCksIHMgPSBwcyhuLk0pICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBlLm1hcCgodCA9PiB3cyhuLk0sIHQpKSlcbiAgICAgICAgICAgIH0sIHIgPSBhd2FpdCBuLmNvKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgcywgaSksIG8gPSBuZXcgTWFwO1xuICAgICAgICAgICAgci5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gQXMobi5NLCB0KTtcbiAgICAgICAgICAgICAgICBvLnNldChlLmtleS50b1N0cmluZygpLCBlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIFUoISFlKSwgdS5wdXNoKGUpO1xuICAgICAgICAgICAgfSkpLCB1O1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB0aGlzLnJlY29yZFZlcnNpb24odCkpKSwgZTtcbiAgICB9XG4gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHRoaXMud3JpdGUobmV3IFZuKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIGFzeW5jIGNvbW1pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubGFzdFdyaXRlRXJyb3IpIHRocm93IHRoaXMubGFzdFdyaXRlRXJyb3I7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnJlYWRWZXJzaW9ucztcbiAgICAgICAgLy8gRm9yIGVhY2ggbXV0YXRpb24sIG5vdGUgdGhhdCB0aGUgZG9jIHdhcyB3cml0dGVuLlxuICAgICAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5kZWxldGUoZS5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEZvciBlYWNoIGRvY3VtZW50IHRoYXQgd2FzIHJlYWQgYnV0IG5vdCB3cml0dGVuIHRvLCB3ZSB3YW50IHRvIHBlcmZvcm1cbiAgICAgICAgLy8gYSBgdmVyaWZ5YCBvcGVyYXRpb24uXG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB4dC5mcm9tUGF0aChlKTtcbiAgICAgICAgICAgIHRoaXMubXV0YXRpb25zLnB1c2gobmV3IHZuKG4sIHRoaXMucHJlY29uZGl0aW9uKG4pKSk7XG4gICAgICAgIH0pKSwgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEcodCksIHMgPSBwcyhuLk0pICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgd3JpdGVzOiBlLm1hcCgodCA9PiBicyhuLk0sIHQpKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBhd2FpdCBuLnJvKFwiQ29tbWl0XCIsIHMsIGkpO1xuICAgICAgICB9KHRoaXMuZGF0YXN0b3JlLCB0aGlzLm11dGF0aW9ucyksIHRoaXMuY29tbWl0dGVkID0gITA7XG4gICAgfVxuICAgIHJlY29yZFZlcnNpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgaWYgKHQuaXNGb3VuZERvY3VtZW50KCkpIGUgPSB0LnZlcnNpb247IGVsc2Uge1xuICAgICAgICAgICAgaWYgKCF0LmlzTm9Eb2N1bWVudCgpKSB0aHJvdyBMKCk7XG4gICAgICAgICAgICAvLyBGb3IgZGVsZXRlZCBkb2NzLCB3ZSBtdXN0IHVzZSBiYXNlVmVyc2lvbiAwIHdoZW4gd2Ugb3ZlcndyaXRlIHRoZW0uXG4gICAgICAgICAgICBlID0gY3QubWluKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbiA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LmtleS50b1N0cmluZygpKTtcbiAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgIGlmICghZS5pc0VxdWFsKG4pKSBcbiAgICAgICAgICAgIC8vIFRoaXMgdHJhbnNhY3Rpb24gd2lsbCBmYWlsIG5vIG1hdHRlciB3aGF0LlxuICAgICAgICAgICAgdGhyb3cgbmV3IFEoSy5BQk9SVEVELCBcIkRvY3VtZW50IHZlcnNpb24gY2hhbmdlZCBiZXR3ZWVuIHR3byByZWFkcy5cIik7XG4gICAgICAgIH0gZWxzZSB0aGlzLnJlYWRWZXJzaW9ucy5zZXQodC5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZlcnNpb24gb2YgdGhpcyBkb2N1bWVudCB3aGVuIGl0IHdhcyByZWFkIGluIHRoaXMgdHJhbnNhY3Rpb24sXG4gICAgICogYXMgYSBwcmVjb25kaXRpb24sIG9yIG5vIHByZWNvbmRpdGlvbiBpZiBpdCB3YXMgbm90IHJlYWQuXG4gICAgICovICAgIHByZWNvbmRpdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgcmV0dXJuICF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUgPyBfbi51cGRhdGVUaW1lKGUpIDogX24ubm9uZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjb25kaXRpb24gZm9yIGEgZG9jdW1lbnQgaWYgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUuXG4gICAgICovICAgIHByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxuICAgICAgICAvLyByZWFkIHRpbWUgYW5kIGV4aXN0ZW5jZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlKSB7XG4gICAgICAgICAgICBpZiAoZS5pc0VxdWFsKGN0Lm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfbi51cGRhdGVUaW1lKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvY3VtZW50IHdhcyBub3QgcmVhZCwgc28gd2UganVzdCB1c2UgdGhlIHByZWNvbmRpdGlvbnMgZm9yIGEgYmxpbmRcbiAgICAgICAgLy8gdXBkYXRlLlxuICAgICAgICByZXR1cm4gX24uZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUodCkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKHQpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovXG5jbGFzcyBrYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLmRhdGFzdG9yZSA9IGUsIHRoaXMudXBkYXRlRnVuY3Rpb24gPSBuLCB0aGlzLmRlZmVycmVkID0gcywgXG4gICAgICAgIHRoaXMudmEgPSA1LCB0aGlzLlNvID0gbmV3IEtvKHRoaXMuYXN5bmNRdWV1ZSwgXCJ0cmFuc2FjdGlvbl9yZXRyeVwiIC8qIFRyYW5zYWN0aW9uUmV0cnkgKi8pO1xuICAgIH1cbiAgICAvKiogUnVucyB0aGUgdHJhbnNhY3Rpb24gYW5kIHNldHMgdGhlIHJlc3VsdCBvbiBkZWZlcnJlZC4gKi8gICAgcnVuKCkge1xuICAgICAgICB0aGlzLnZhIC09IDEsIHRoaXMuU2EoKTtcbiAgICB9XG4gICAgU2EoKSB7XG4gICAgICAgIHRoaXMuU28uSW8oKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgTmEodGhpcy5kYXRhc3RvcmUpLCBlID0gdGhpcy5EYSh0KTtcbiAgICAgICAgICAgIGUgJiYgZS50aGVuKChlID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gdC5jb21taXQoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWQucmVzb2x2ZShlKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkNhKHQpO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLkNhKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIERhKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnVwZGF0ZUZ1bmN0aW9uKHQpO1xuICAgICAgICAgICAgcmV0dXJuICFTdChlKSAmJiBlLmNhdGNoICYmIGUudGhlbiA/IGUgOiAodGhpcy5kZWZlcnJlZC5yZWplY3QoRXJyb3IoXCJUcmFuc2FjdGlvbiBjYWxsYmFjayBtdXN0IHJldHVybiBhIFByb21pc2VcIikpLCBcbiAgICAgICAgICAgIG51bGwpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgcmV0cnkgZXJyb3JzIHRocm93biBieSB1c2VyIHByb3ZpZGVkIHVwZGF0ZUZ1bmN0aW9uLlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpLCBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIENhKHQpIHtcbiAgICAgICAgdGhpcy52YSA+IDAgJiYgdGhpcy54YSh0KSA/ICh0aGlzLnZhIC09IDEsIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5TYSgpLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpIDogdGhpcy5kZWZlcnJlZC5yZWplY3QodCk7XG4gICAgfVxuICAgIHhhKHQpIHtcbiAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHtcbiAgICAgICAgICAgIC8vIEluIHRyYW5zYWN0aW9ucywgdGhlIGJhY2tlbmQgd2lsbCBmYWlsIG91dGRhdGVkIHJlYWRzIHdpdGggRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgICAgICAgIC8vIG5vbi1tYXRjaGluZyBkb2N1bWVudCB2ZXJzaW9ucyB3aXRoIEFCT1JURUQuIFRoZXNlIGVycm9ycyBzaG91bGQgYmUgcmV0cmllZC5cbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvZGU7XG4gICAgICAgICAgICByZXR1cm4gXCJhYm9ydGVkXCIgPT09IGUgfHwgXCJmYWlsZWQtcHJlY29uZGl0aW9uXCIgPT09IGUgfHwgIXhuKGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEZpcmVzdG9yZUNsaWVudCBpcyBhIHRvcC1sZXZlbCBjbGFzcyB0aGF0IGNvbnN0cnVjdHMgYW5kIG93bnMgYWxsIG9mIHRoZVxuICogcGllY2VzIG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZS4gSXQgaXMgcmVzcG9uc2libGUgZm9yIGNyZWF0aW5nIHRoZVxuICogYXN5bmMgcXVldWUgdGhhdCBpcyBzaGFyZWQgYnkgYWxsIG9mIHRoZSBvdGhlciBjb21wb25lbnRzIGluIHRoZSBzeXN0ZW0uXG4gKi9cbmNsYXNzIE1hIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBcbiAgICAvKipcbiAgICAgKiBBc3luY2hyb25vdXMgcXVldWUgcmVzcG9uc2libGUgZm9yIGFsbCBvZiBvdXIgaW50ZXJuYWwgcHJvY2Vzc2luZy4gV2hlblxuICAgICAqIHdlIGdldCBpbmNvbWluZyB3b3JrIGZyb20gdGhlIHVzZXIgKHZpYSBwdWJsaWMgQVBJKSBvciB0aGUgbmV0d29ya1xuICAgICAqIChpbmNvbWluZyBHUlBDIG1lc3NhZ2VzKSwgd2Ugc2hvdWxkIGFsd2F5cyBzY2hlZHVsZSBvbnRvIHRoaXMgcXVldWUuXG4gICAgICogVGhpcyBlbnN1cmVzIGFsbCBvZiBvdXIgd29yayBpcyBwcm9wZXJseSBzZXJpYWxpemVkIChlLmcuIHdlIGRvbid0XG4gICAgICogc3RhcnQgcHJvY2Vzc2luZyBhIG5ldyBvcGVyYXRpb24gd2hpbGUgdGhlIHByZXZpb3VzIG9uZSBpcyB3YWl0aW5nIGZvclxuICAgICAqIGFuIGFzeW5jIEkvTyB0byBjb21wbGV0ZSkuXG4gICAgICovXG4gICAgbiwgcykge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscyA9IHQsIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuYXN5bmNRdWV1ZSA9IG4sIHRoaXMuZGF0YWJhc2VJbmZvID0gcywgXG4gICAgICAgIHRoaXMudXNlciA9IEMuVU5BVVRIRU5USUNBVEVELCB0aGlzLmNsaWVudElkID0gaXQuUigpLCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIgPSAoKSA9PiBQcm9taXNlLnJlc29sdmUoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbHMuc3RhcnQobiwgKGFzeW5jIHQgPT4ge1xuICAgICAgICAgICAgTyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlJlY2VpdmVkIHVzZXI9XCIsIHQudWlkKSwgYXdhaXQgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyKHQpLCBcbiAgICAgICAgICAgIHRoaXMudXNlciA9IHQ7XG4gICAgICAgIH0pKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLnN0YXJ0KG4sICh0ID0+IChPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgbmV3IGFwcCBjaGVjayB0b2tlbj1cIiwgdCksIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyKHQsIHRoaXMudXNlcikpKSk7XG4gICAgfVxuICAgIGFzeW5jIGdldENvbmZpZ3VyYXRpb24oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhc3luY1F1ZXVlOiB0aGlzLmFzeW5jUXVldWUsXG4gICAgICAgICAgICBkYXRhYmFzZUluZm86IHRoaXMuZGF0YWJhc2VJbmZvLFxuICAgICAgICAgICAgY2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhdXRoQ3JlZGVudGlhbHM6IHRoaXMuYXV0aENyZWRlbnRpYWxzLFxuICAgICAgICAgICAgYXBwQ2hlY2tDcmVkZW50aWFsczogdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLFxuICAgICAgICAgICAgaW5pdGlhbFVzZXI6IHRoaXMudXNlcixcbiAgICAgICAgICAgIG1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOiAxMDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgc2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0aGF0IHRoZSBjbGllbnQgaGFzIG5vdCBiZWVuIHRlcm1pbmF0ZWQuIEVuc3VyZXMgdGhhdCBvdGhlciBtZXRob2RzIG9uXG4gICAgICogdGhpcyBjbGFzcyBjYW5ub3QgYmUgY2FsbGVkIGFmdGVyIHRoZSBjbGllbnQgaXMgdGVybWluYXRlZC5cbiAgICAgKi8gICAgdmVyaWZ5Tm90VGVybWluYXRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXN5bmNRdWV1ZS5pc1NodXR0aW5nRG93bikgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUuZW50ZXJSZXN0cmljdGVkTW9kZSgpO1xuICAgICAgICBjb25zdCB0ID0gbmV3IGo7XG4gICAgICAgIHJldHVybiB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub25saW5lQ29tcG9uZW50cy50ZXJtaW5hdGUoKSwgdGhpcy5vZmZsaW5lQ29tcG9uZW50cyAmJiBhd2FpdCB0aGlzLm9mZmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCBcbiAgICAgICAgICAgICAgICAvLyBUaGUgY3JlZGVudGlhbHMgcHJvdmlkZXIgbXVzdCBiZSB0ZXJtaW5hdGVkIGFmdGVyIHNodXR0aW5nIGRvd24gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmcgYXV0aFxuICAgICAgICAgICAgICAgIC8vIHRva2Vucy5cbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFB1KGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIE9hKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgdG8oZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQub2ZmbGluZUNvbXBvbmVudHMgPSBlO1xufVxuXG5hc3luYyBmdW5jdGlvbiBGYSh0LCBlKSB7XG4gICAgdC5hc3luY1F1ZXVlLnZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKTtcbiAgICBjb25zdCBuID0gYXdhaXQgJGEodCk7XG4gICAgTyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIkluaXRpYWxpemluZyBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBzID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4sIHMpLCBcbiAgICAvLyBUaGUgQ3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIG9mIHRoZSBvbmxpbmUgY29tcG9uZW50IHByb3ZpZGVyIHRha2VzXG4gICAgLy8gcHJlY2VkZW5jZSBvdmVyIHRoZSBvZmZsaW5lIGNvbXBvbmVudCBwcm92aWRlci5cbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigodCA9PiBUdShlLnJlbW90ZVN0b3JlLCB0KSkpLCB0LnNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lcigoKHQsIG4pID0+IFR1KGUucmVtb3RlU3RvcmUsIG4pKSksIFxuICAgIHQub25saW5lQ29tcG9uZW50cyA9IGU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uICRhKHQpIHtcbiAgICByZXR1cm4gdC5vZmZsaW5lQ29tcG9uZW50cyB8fCAoTyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBPYSh0LCBuZXcgUGEpKSwgdC5vZmZsaW5lQ29tcG9uZW50cztcbn1cblxuYXN5bmMgZnVuY3Rpb24gQmEodCkge1xuICAgIHJldHVybiB0Lm9ubGluZUNvbXBvbmVudHMgfHwgKE8oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyBkZWZhdWx0IE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBGYSh0LCBuZXcgU2EpKSwgdC5vbmxpbmVDb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBMYSh0KSB7XG4gICAgcmV0dXJuICRhKHQpLnRoZW4oKHQgPT4gdC5wZXJzaXN0ZW5jZSkpO1xufVxuXG5mdW5jdGlvbiBVYSh0KSB7XG4gICAgcmV0dXJuICRhKHQpLnRoZW4oKHQgPT4gdC5sb2NhbFN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIHFhKHQpIHtcbiAgICByZXR1cm4gQmEodCkudGhlbigodCA9PiB0LnJlbW90ZVN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIEdhKHQpIHtcbiAgICByZXR1cm4gQmEodCkudGhlbigodCA9PiB0LnN5bmNFbmdpbmUpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gS2EodCkge1xuICAgIGNvbnN0IGUgPSBhd2FpdCBCYSh0KSwgbiA9IGUuZXZlbnRNYW5hZ2VyO1xuICAgIHJldHVybiBuLm9uTGlzdGVuID0genUuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBuLm9uVW5saXN0ZW4gPSBKdS5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIFxuICAgIG47XG59XG5cbi8qKiBFbmFibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24gYW5kIHJlLWVucXVldWVzIGFsbCBwZW5kaW5nIG9wZXJhdGlvbnMuICovIGZ1bmN0aW9uIFFhKHQpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IExhKHQpLCBuID0gYXdhaXQgcWEodCk7XG4gICAgICAgIHJldHVybiBlLnNldE5ldHdvcmtFbmFibGVkKCEwKSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEcodCk7XG4gICAgICAgICAgICByZXR1cm4gZS5sdS5kZWxldGUoMCAvKiBVc2VyRGlzYWJsZWQgKi8pLCBZbyhlKTtcbiAgICAgICAgfShuKTtcbiAgICB9KSk7XG59XG5cbi8qKiBEaXNhYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uLiBQZW5kaW5nIG9wZXJhdGlvbnMgd2lsbCBub3QgY29tcGxldGUuICovIGZ1bmN0aW9uIGphKHQpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgZSA9IGF3YWl0IExhKHQpLCBuID0gYXdhaXQgcWEodCk7XG4gICAgICAgIHJldHVybiBlLnNldE5ldHdvcmtFbmFibGVkKCExKSwgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEcodCk7XG4gICAgICAgICAgICBlLmx1LmFkZCgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIGF3YWl0IFhvKGUpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cbiAgICAgICAgICAgIGUuX3Uuc2V0KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZVxuICogdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnRcbiAqIGNhbiBiZSBlaXRoZXIgYWNjZXB0YW5jZSBvciByZWplY3Rpb24uXG4gKi8gZnVuY3Rpb24gV2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEcodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJyZWFkIGRvY3VtZW50XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5haS5Ccyh0LCBlKSkpO1xuICAgICAgICAgICAgfSh0LCBlKTtcbiAgICAgICAgICAgIHMuaXNGb3VuZERvY3VtZW50KCkgPyBuLnJlc29sdmUocykgOiBzLmlzTm9Eb2N1bWVudCgpID8gbi5yZXNvbHZlKG51bGwpIDogbi5yZWplY3QobmV3IFEoSy5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IFB1KHQsIGBGYWlsZWQgdG8gZ2V0IGRvY3VtZW50ICcke2V9IGZyb20gY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBVYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiB6YSh0LCBlLCBuID0ge30pIHtcbiAgICBjb25zdCBzID0gbmV3IGo7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgQ2Eoe1xuICAgICAgICAgICAgbmV4dDogciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBOdSh0LCBvKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSByLmRvY3MuaGFzKG4pO1xuICAgICAgICAgICAgICAgICF1ICYmIHIuZnJvbUNhY2hlID8gXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZiB3ZSdyZSBvbmxpbmUgYW5kIHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAgICAgLy8gZXhpc3QgdGhlbiB3ZSByZXNvbHZlIHdpdGggYSBkb2MuZXhpc3RzIHNldCB0byBmYWxzZS4gSWZcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvZmZsaW5lIGhvd2V2ZXIsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gY2FzZS4gVHdvIG9wdGlvbnM6IDEpIENhY2hlIHRoZSBuZWdhdGl2ZSByZXNwb25zZSBmcm9tXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciBzbyB3ZSBjYW4gZGVsaXZlciB0aGF0IGV2ZW4gd2hlbiB5b3UncmVcbiAgICAgICAgICAgICAgICAvLyBvZmZsaW5lIDIpIEFjdHVhbGx5IHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGUgb25saW5lIGNhc2VcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgICAgICAgICBpLnJlamVjdChuZXcgUShLLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzIG9mZmxpbmUuXCIpKSA6IHUgJiYgci5mcm9tQ2FjaGUgJiYgcyAmJiBcInNlcnZlclwiID09PSBzLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBRKEsuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSkgOiBpLnJlc29sdmUocik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHQgPT4gaS5yZWplY3QodClcbiAgICAgICAgfSksIG8gPSBuZXcgRnUoTmUobi5wYXRoKSwgciwge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICBEdTogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB4dSh0LCBvKTtcbiAgICB9KGF3YWl0IEthKHQpLCB0LmFzeW5jUXVldWUsIGUsIG4sIHMpKSksIHMucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gSGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBhbyh0LCBlLCBcbiAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gbmV3IEt1KGUsIHMuaGkpLCByID0gaS5HdShzLmRvY3VtZW50cyksIG8gPSBpLmFwcGx5Q2hhbmdlcyhyLCBcbiAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSk7XG4gICAgICAgICAgICBuLnJlc29sdmUoby5zbmFwc2hvdCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBQdSh0LCBgRmFpbGVkIHRvIGV4ZWN1dGUgcXVlcnkgJyR7ZX0gYWdhaW5zdCBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIHF1ZXJ5IHNuYXBzaG90IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IFVhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIEphKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBDYSh7XG4gICAgICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IE51KHQsIG8pKSksIG4uZnJvbUNhY2hlICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IFEoSy5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBGdShuLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIER1OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHh1KHQsIG8pO1xuICAgIH0oYXdhaXQgS2EodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBZYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBDYShlKTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgRyh0KS5UdS5hZGQoZSksIFxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyBhcmUgaW4tc3luYy5cbiAgICAgICAgZS5uZXh0KCk7XG4gICAgfShhd2FpdCBLYSh0KSwgbikpKSwgKCkgPT4ge1xuICAgICAgICBuLnBhKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBHKHQpLlR1LmRlbGV0ZShlKTtcbiAgICAgICAgfShhd2FpdCBLYSh0KSwgbikpKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFRha2VzIGFuIHVwZGF0ZUZ1bmN0aW9uIGluIHdoaWNoIGEgc2V0IG9mIHJlYWRzIGFuZCB3cml0ZXMgY2FuIGJlIHBlcmZvcm1lZFxuICogYXRvbWljYWxseS4gSW4gdGhlIHVwZGF0ZUZ1bmN0aW9uLCB0aGUgY2xpZW50IGNhbiByZWFkIGFuZCB3cml0ZSB2YWx1ZXNcbiAqIHVzaW5nIHRoZSBzdXBwbGllZCB0cmFuc2FjdGlvbiBvYmplY3QuIEFmdGVyIHRoZSB1cGRhdGVGdW5jdGlvbiwgYWxsXG4gKiBjaGFuZ2VzIHdpbGwgYmUgY29tbWl0dGVkLiBJZiBhIHJldHJ5YWJsZSBlcnJvciBvY2N1cnMgKGV4OiBzb21lIG90aGVyXG4gKiBjbGllbnQgaGFzIGNoYW5nZWQgYW55IG9mIHRoZSBkYXRhIHJlZmVyZW5jZWQpLCB0aGVuIHRoZSB1cGRhdGVGdW5jdGlvblxuICogd2lsbCBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXIgYSBiYWNrb2ZmLiBJZiB0aGUgdXBkYXRlRnVuY3Rpb24gc3RpbGwgZmFpbHNcbiAqIGFmdGVyIGFsbCByZXRyaWVzLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiB3aWxsIGJlIHJlamVjdGVkLlxuICpcbiAqIFRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvIHRoZSB1cGRhdGVGdW5jdGlvbiBjb250YWlucyBtZXRob2RzIGZvclxuICogYWNjZXNzaW5nIGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMuIFVubGlrZSBvdGhlciBkYXRhc3RvcmUgYWNjZXNzLCBkYXRhXG4gKiBhY2Nlc3NlZCB3aXRoIHRoZSB0cmFuc2FjdGlvbiB3aWxsIG5vdCByZWZsZWN0IGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdFxuICogYmVlbiBjb21taXR0ZWQuIEZvciB0aGlzIHJlYXNvbiwgaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgcmVhZHMgYXJlXG4gKiBwZXJmb3JtZWQgYmVmb3JlIGFueSB3cml0ZXMuIFRyYW5zYWN0aW9ucyBtdXN0IGJlIHBlcmZvcm1lZCB3aGlsZSBvbmxpbmUuXG4gKi8gZnVuY3Rpb24gWGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBCYSh0KS50aGVuKCh0ID0+IHQuZGF0YXN0b3JlKSk7XG4gICAgICAgIH0odCk7XG4gICAgICAgIG5ldyBrYSh0LmFzeW5jUXVldWUsIHMsIGUsIG4pLnJ1bigpO1xuICAgIH0pKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBaYSh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIG4gPSBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gKG5ldyBUZXh0RW5jb2RlcikuZW5jb2RlKHQpIDogdDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgeGEodCwgZSk7XG4gICAgICAgIH0oZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gRGEodCwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSByZXR1cm4gRGEobmV3IFVpbnQ4QXJyYXkodCksIGUpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkgcmV0dXJuIHQuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2Ugb2YgYHRvQnl0ZVN0cmVhbVJlYWRlcmAgaGFzIHRvIGJlIGEgQXJyYXlCdWZmZXIgb3IgUmVhZGFibGVTdHJlYW1cIik7XG4gICAgICAgIH0obiksIGUpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAobiwgR28oZSkpO1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIGJhKGF3YWl0IEdhKHQpLCBpLCBzKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIHRjKHQsIGUpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEcodCk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5hbWVkIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5kcy5nZXROYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfShhd2FpdCBVYSh0KSwgZSkpKTtcbn1cblxuY29uc3QgZWMgPSBuZXcgTWFwO1xuXG4vKipcbiAqIEFuIGluc3RhbmNlIG1hcCB0aGF0IGVuc3VyZXMgb25seSBvbmUgRGF0YXN0b3JlIGV4aXN0cyBwZXIgRmlyZXN0b3JlXG4gKiBpbnN0YW5jZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmZ1bmN0aW9uIG5jKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4pIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSBjYW5ub3QgYmUgY2FsbGVkIHdpdGggYW4gZW1wdHkgJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCB0d28gYm9vbGVhbiBvcHRpb25zIGFyZSBub3Qgc2V0IGF0IHRoZSBzYW1lIHRpbWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBzYyh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKCEwID09PSBlICYmICEwID09PSBzKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGAke3R9IGFuZCAke259IGNhbm5vdCBiZSB1c2VkIHRvZ2V0aGVyLmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBkb2N1bWVudCAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0IGNvbnRhaW5zXG4gKiBhbiBldmVuIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIGljKHQpIHtcbiAgICBpZiAoIXh0LmlzRG9jdW1lbnRLZXkodCkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgZG9jdW1lbnQgcmVmZXJlbmNlLiBEb2N1bWVudCByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7dH0gaGFzICR7dC5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IGBwYXRoYCByZWZlcnMgdG8gYSBjb2xsZWN0aW9uIChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXRcbiAqIGNvbnRhaW5zIGFuIG9kZCBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiByYyh0KSB7XG4gICAgaWYgKHh0LmlzRG9jdW1lbnRLZXkodCkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgY29sbGVjdGlvbiByZWZlcmVuY2UuIENvbGxlY3Rpb24gcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cywgYnV0ICR7dH0gaGFzICR7dC5sZW5ndGh9LmApO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBpdCdzIGEgbm9uLW51bGwgb2JqZWN0IHdpdGhvdXQgYSBjdXN0b20gcHJvdG90eXBlXG4gKiAoaS5lLiBleGNsdWRlcyBBcnJheSwgRGF0ZSwgZXRjLikuXG4gKi9cbi8qKiBSZXR1cm5zIGEgc3RyaW5nIGRlc2NyaWJpbmcgdGhlIHR5cGUgLyB2YWx1ZSBvZiB0aGUgcHJvdmlkZWQgaW5wdXQuICovXG5mdW5jdGlvbiBvYyh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIFwidW5kZWZpbmVkXCI7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBcIm51bGxcIjtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQubGVuZ3RoID4gMjAgJiYgKHQgPSBgJHt0LnN1YnN0cmluZygwLCAyMCl9Li4uYCksIFxuICAgIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0IHx8IFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4gXCJcIiArIHQ7XG4gICAgaWYgKFwib2JqZWN0XCIgPT0gdHlwZW9mIHQpIHtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIFwiYW4gYXJyYXlcIjtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqIHRyeSB0byBnZXQgdGhlIGNvbnN0cnVjdG9yIG5hbWUgZm9yIGFuIG9iamVjdC4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodC5jb25zdHJ1Y3RvcikgcmV0dXJuIHQuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLCBvcHRpb25hbGx5IHVud3JhcHBpbmcgQ29tcGF0IHR5cGVzIHRvIGV4cG9zZSB0aGVcbiAqIHVuZGVybHlpbmcgaW5zdGFuY2UuIFRocm93cyBpZiAgYG9iamAgaXMgbm90IGFuIGluc3RhbmNlIG9mIGBUYC5cbiAqXG4gKiBUaGlzIGNhc3QgaXMgdXNlZCBpbiB0aGUgTGl0ZSBhbmQgRnVsbCBTREsgdG8gdmVyaWZ5IGluc3RhbmNlIHR5cGVzIGZvclxuICogYXJndW1lbnRzIHBhc3NlZCB0byB0aGUgcHVibGljIEFQSS5cbiAqIEBpbnRlcm5hbFxuICovICh0KTtcbiAgICAgICAgICAgIHJldHVybiBlID8gYGEgY3VzdG9tICR7ZX0gb2JqZWN0YCA6IFwiYW4gb2JqZWN0XCI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdCA/IFwiYSBmdW5jdGlvblwiIDogTCgpO1xufVxuXG5mdW5jdGlvbiB1Yyh0LCBcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5lKSB7XG4gICAgaWYgKFwiX2RlbGVnYXRlXCIgaW4gdCAmJiAoXG4gICAgLy8gVW53cmFwIENvbXBhdCB0eXBlc1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCA9IHQuX2RlbGVnYXRlKSwgISh0IGluc3RhbmNlb2YgZSkpIHtcbiAgICAgICAgaWYgKGUubmFtZSA9PT0gdC5jb25zdHJ1Y3Rvci5uYW1lKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVHlwZSBkb2VzIG5vdCBtYXRjaCB0aGUgZXhwZWN0ZWQgaW5zdGFuY2UuIERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBTREs/XCIpO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBuID0gb2ModCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBFeHBlY3RlZCB0eXBlICcke2UubmFtZX0nLCBidXQgaXQgd2FzOiAke259YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIGFjKHQsIGUpIHtcbiAgICBpZiAoZSA8PSAwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgcmVxdWlyZXMgYSBwb3NpdGl2ZSBudW1iZXIsIGJ1dCBpdCB3YXM6ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBzZXR0aW5ncygpIGRlZmF1bHRzOlxuLyoqXG4gKiBBIGNvbmNyZXRlIHR5cGUgZGVzY3JpYmluZyBhbGwgdGhlIHZhbHVlcyB0aGF0IGNhbiBiZSBhcHBsaWVkIHZpYSBhXG4gKiB1c2VyLXN1cHBsaWVkIGBGaXJlc3RvcmVTZXR0aW5nc2Agb2JqZWN0LiBUaGlzIGlzIGEgc2VwYXJhdGUgdHlwZSBzbyB0aGF0XG4gKiBkZWZhdWx0cyBjYW4gYmUgc3VwcGxpZWQgYW5kIHRoZSB2YWx1ZSBjYW4gYmUgY2hlY2tlZCBmb3IgZXF1YWxpdHkuXG4gKi9cbmNsYXNzIGNjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0Lmhvc3QpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQuc3NsKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiQ2FuJ3QgcHJvdmlkZSBzc2wgb3B0aW9uIGlmIGhvc3Qgb3B0aW9uIGlzIG5vdCBzZXRcIik7XG4gICAgICAgICAgICB0aGlzLmhvc3QgPSBcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiLCB0aGlzLnNzbCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB0aGlzLmhvc3QgPSB0Lmhvc3QsIHRoaXMuc3NsID0gbnVsbCA9PT0gKGUgPSB0LnNzbCkgfHwgdm9pZCAwID09PSBlIHx8IGU7XG4gICAgICAgIGlmICh0aGlzLmNyZWRlbnRpYWxzID0gdC5jcmVkZW50aWFscywgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gISF0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIFxuICAgICAgICB2b2lkIDAgPT09IHQuY2FjaGVTaXplQnl0ZXMpIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSA0MTk0MzA0MDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoLTEgIT09IHQuY2FjaGVTaXplQnl0ZXMgJiYgdC5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgICAgICAgICB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdC5jYWNoZVNpemVCeXRlcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPSAhIXQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSAhIXQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSAhIXQudXNlRmV0Y2hTdHJlYW1zLCBzYyhcImV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBcImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0ID09PSB0Lmhvc3QgJiYgdGhpcy5zc2wgPT09IHQuc3NsICYmIHRoaXMuY3JlZGVudGlhbHMgPT09IHQuY3JlZGVudGlhbHMgJiYgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyAmJiB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgJiYgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID09PSB0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgJiYgdGhpcy51c2VGZXRjaFN0cmVhbXMgPT09IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKi8gY2xhc3MgaGMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBlLCB0aGlzLl9hcHBDaGVja0NyZWRlbnRpYWxzID0gbiwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgY2Moe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMSwgdCBpbnN0YW5jZW9mIHZ0ID8gdGhpcy5fZGF0YWJhc2VJZCA9IHQgOiAodGhpcy5fYXBwID0gdCwgXG4gICAgICAgIHRoaXMuX2RhdGFiYXNlSWQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuYXBwbHkodC5vcHRpb25zLCBbIFwicHJvamVjdElkXCIgXSkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgJ1wicHJvamVjdElkXCIgbm90IHByb3ZpZGVkIGluIGZpcmViYXNlLmluaXRpYWxpemVBcHAuJyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHZ0KHQub3B0aW9ucy5wcm9qZWN0SWQpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogTW9kaWZ5IHRoaXMgaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgQ2xvdWQgRmlyZXN0b3JlIGVtdWxhdG9yLlxuICpcbiAqIE5vdGU6IFRoaXMgbXVzdCBiZSBjYWxsZWQgYmVmb3JlIHRoaXMgaW5zdGFuY2UgaGFzIGJlZW4gdXNlZCB0byBkbyBhbnlcbiAqIG9wZXJhdGlvbnMuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSBgRmlyZXN0b3JlYCBpbnN0YW5jZSB0byBjb25maWd1cmUgdG8gY29ubmVjdCB0byB0aGVcbiAqIGVtdWxhdG9yLlxuICogQHBhcmFtIGhvc3QgLSB0aGUgZW11bGF0b3IgaG9zdCAoZXg6IGxvY2FsaG9zdCkuXG4gKiBAcGFyYW0gcG9ydCAtIHRoZSBlbXVsYXRvciBwb3J0IChleDogOTAwMCkuXG4gKiBAcGFyYW0gb3B0aW9ucy5tb2NrVXNlclRva2VuIC0gdGhlIG1vY2sgYXV0aCB0b2tlbiB0byB1c2UgZm9yIHVuaXQgdGVzdGluZ1xuICogU2VjdXJpdHkgUnVsZXMuXG4gKi8gKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgY2ModCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gbmV3IHo7XG4gICAgICAgICAgICBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZ2FwaVwiOlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNsaWVudDtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhpcyByZWFsbHkgaXMgYSBHYXBpIGNsaWVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFUoIShcIm9iamVjdFwiICE9IHR5cGVvZiBlIHx8IG51bGwgPT09IGUgfHwgIWUuYXV0aCB8fCAhZS5hdXRoLmdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkpKSwgXG4gICAgICAgICAgICAgICAgbmV3IFgoZSwgdC5zZXNzaW9uSW5kZXggfHwgXCIwXCIsIHQuaWFtVG9rZW4gfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIm1ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciBmYWlsZWQgZHVlIHRvIGludmFsaWQgY3JlZGVudGlhbCB0eXBlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuY3JlZGVudGlhbHMpKTtcbiAgICB9XG4gICAgX2dldFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9mcmVlemVTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITAsIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYXRlVGFzayB8fCAodGhpcy5fdGVybWluYXRlVGFzayA9IHRoaXMuX3Rlcm1pbmF0ZSgpKSwgdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBGaXJlc3RvcmVgIGluc3RhbmNlLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcHA6IHRoaXMuX2FwcCxcbiAgICAgICAgICAgIGRhdGFiYXNlSWQ6IHRoaXMuX2RhdGFiYXNlSWQsXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5fc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlcyBhbGwgY29tcG9uZW50cyB1c2VkIGJ5IHRoaXMgY2xpZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgbWV0aG9kIHRvIGNsZWFuIHVwIHRoZWlyIG93biBkZXBlbmRlbmNpZXMsIGJ1dCBtdXN0IGFsc28gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kLlxuICAgICAqXG4gICAgICogT25seSBldmVyIGNhbGxlZCBvbmNlLlxuICAgICAqLyAgICBfdGVybWluYXRlKCkge1xuICAgICAgICAvKipcbiAqIFJlbW92ZXMgYWxsIGNvbXBvbmVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBpbnN0YW5jZS4gTXVzdCBiZSBjYWxsZWRcbiAqIHdoZW4gdGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIGlzIHRlcm1pbmF0ZWQuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlYy5nZXQodCk7XG4gICAgICAgICAgICBlICYmIChPKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIGVjLmRlbGV0ZSh0KSwgZS50ZXJtaW5hdGUoKSk7XG4gICAgICAgIH0odGhpcyksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbGModCwgZSwgbiwgcyA9IHt9KSB7XG4gICAgdmFyIGk7XG4gICAgY29uc3QgciA9ICh0ID0gdWModCwgaGMpKS5fZ2V0U2V0dGluZ3MoKTtcbiAgICBpZiAoXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiAhPT0gci5ob3N0ICYmIHIuaG9zdCAhPT0gZSAmJiAkKFwiSG9zdCBoYXMgYmVlbiBzZXQgaW4gYm90aCBzZXR0aW5ncygpIGFuZCB1c2VFbXVsYXRvcigpLCBlbXVsYXRvciBob3N0IHdpbGwgYmUgdXNlZFwiKSwgXG4gICAgdC5fc2V0U2V0dGluZ3MoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByKSwge1xuICAgICAgICBob3N0OiBgJHtlfToke259YCxcbiAgICAgICAgc3NsOiAhMVxuICAgIH0pKSwgcy5tb2NrVXNlclRva2VuKSB7XG4gICAgICAgIGxldCBlLCBuO1xuICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5tb2NrVXNlclRva2VuKSBlID0gcy5tb2NrVXNlclRva2VuLCBuID0gQy5NT0NLX1VTRVI7IGVsc2Uge1xuICAgICAgICAgICAgLy8gTGV0IGNyZWF0ZU1vY2tVc2VyVG9rZW4gdmFsaWRhdGUgZmlyc3QgKGNhdGNoZXMgY29tbW9uIG1pc3Rha2VzIGxpa2VcbiAgICAgICAgICAgIC8vIGludmFsaWQgZmllbGQgXCJ1aWRcIiBhbmQgbWlzc2luZyBmaWVsZCBcInN1YlwiIC8gXCJ1c2VyX2lkXCIuKVxuICAgICAgICAgICAgZSA9IGNyZWF0ZU1vY2tVc2VyVG9rZW4ocy5tb2NrVXNlclRva2VuLCBudWxsID09PSAoaSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgICAgICBjb25zdCByID0gcy5tb2NrVXNlclRva2VuLnN1YiB8fCBzLm1vY2tVc2VyVG9rZW4udXNlcl9pZDtcbiAgICAgICAgICAgIGlmICghcikgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XG4gICAgICAgICAgICBuID0gbmV3IEMocik7XG4gICAgICAgIH1cbiAgICAgICAgdC5fYXV0aENyZWRlbnRpYWxzID0gbmV3IEgobmV3IFcoZSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRSZWZlcmVuY2VgIHJlZmVycyB0byBhIGRvY3VtZW50IGxvY2F0aW9uIGluIGEgRmlyZXN0b3JlIGRhdGFiYXNlXG4gKiBhbmQgY2FuIGJlIHVzZWQgdG8gd3JpdGUsIHJlYWQsIG9yIGxpc3RlbiB0byB0aGUgbG9jYXRpb24uIFRoZSBkb2N1bWVudCBhdFxuICogdGhlIHJlZmVyZW5jZWQgbG9jYXRpb24gbWF5IG9yIG1heSBub3QgZXhpc3QuXG4gKi8gY2xhc3MgZmMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX2tleSA9IG4sIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBGaXJlc3RvcmUgcmVmZXJlbmNlLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImRvY3VtZW50XCIsIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgZ2V0IF9wYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGg7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBkb2N1bWVudCdzIGlkZW50aWZpZXIgd2l0aGluIGl0cyBjb2xsZWN0aW9uLlxuICAgICAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHBhdGggb2YgdGhlIHJlZmVyZW5jZWQgZG9jdW1lbnQgKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGNvbGxlY3Rpb24gdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGJlbG9uZ3MgdG8uXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIHJldHVybiBuZXcgX2ModGhpcy5maXJlc3RvcmUsIHRoaXMuY29udmVydGVyLCB0aGlzLl9rZXkucGF0aC5wb3BMYXN0KCkpO1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmYyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fa2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlgIHJlZmVycyB0byBhIHF1ZXJ5IHdoaWNoIHlvdSBjYW4gcmVhZCBvciBsaXN0ZW4gdG8uIFlvdSBjYW4gYWxzb1xuICogY29uc3RydWN0IHJlZmluZWQgYFF1ZXJ5YCBvYmplY3RzIGJ5IGFkZGluZyBmaWx0ZXJzIGFuZCBvcmRlcmluZy5cbiAqLyBjbGFzcyBkYyB7XG4gICAgLy8gVGhpcyBpcyB0aGUgbGl0ZSB2ZXJzaW9uIG9mIHRoZSBRdWVyeSBjbGFzcyBpbiB0aGUgbWFpbiBTREsuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogSWYgcHJvdmlkZWQsIHRoZSBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgYXNzb2NpYXRlZCB3aXRoIHRoaXMgaW5zdGFuY2UuXG4gICAgICovXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmNvbnZlcnRlciA9IGUsIHRoaXMuX3F1ZXJ5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwicXVlcnlcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICB3aXRoQ29udmVydGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkYyh0aGlzLmZpcmVzdG9yZSwgdCwgdGhpcy5fcXVlcnkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCBvYmplY3QgY2FuIGJlIHVzZWQgZm9yIGFkZGluZyBkb2N1bWVudHMsIGdldHRpbmdcbiAqIGRvY3VtZW50IHJlZmVyZW5jZXMsIGFuZCBxdWVyeWluZyBmb3IgZG9jdW1lbnRzICh1c2luZyB7QGxpbmsgcXVlcnl9KS5cbiAqLyBjbGFzcyBfYyBleHRlbmRzIGRjIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgTmUobikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgZmModGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyB4dCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IF9jKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHdjKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgbmMoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIGhjKSB7XG4gICAgICAgIGNvbnN0IHMgPSBfdC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gcmMocyksIG5ldyBfYyh0LCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBmYyB8fCB0IGluc3RhbmNlb2YgX2MpKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQoX3QuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiByYyhzKSwgbmV3IF9jKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gbWModCwgZSkge1xuICAgIGlmICh0ID0gdWModCwgaGMpLCBuYyhcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgZGModCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBcbiAgICAvKipcbiAqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50c1xuICogd2l0aGluIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLlxuICovXG4gICAgZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IENlKF90LmVtcHR5UGF0aCgpLCB0KTtcbiAgICB9KGUpKTtcbn1cblxuZnVuY3Rpb24gZ2ModCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBcbiAgICAvLyBXZSBhbGxvdyBvbWlzc2lvbiBvZiAncGF0aFN0cmluZycgYnV0IGV4cGxpY2l0bHkgcHJvaGliaXQgcGFzc2luZyBpbiBib3RoXG4gICAgLy8gJ3VuZGVmaW5lZCcgYW5kICdudWxsJy5cbiAgICAxID09PSBhcmd1bWVudHMubGVuZ3RoICYmIChlID0gaXQuUigpKSwgbmMoXCJkb2NcIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgaGMpIHtcbiAgICAgICAgY29uc3QgcyA9IF90LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiBpYyhzKSwgbmV3IGZjKHQsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyB4dChzKSk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIGZjIHx8IHQgaW5zdGFuY2VvZiBfYykpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZChfdC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIGljKHMpLCBuZXcgZmModC5maXJlc3RvcmUsIHQgaW5zdGFuY2VvZiBfYyA/IHQuY29udmVydGVyIDogbnVsbCwgbmV3IHh0KHMpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCByZWZlcmVuY2VzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIHJlZmVyZW5jZSB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgcmVmZXJlbmNlcyBwb2ludCB0byB0aGUgc2FtZSBsb2NhdGlvbiBpbiB0aGUgc2FtZVxuICogRmlyZXN0b3JlIGRhdGFiYXNlLlxuICovIGZ1bmN0aW9uIHljKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSwgKHQgaW5zdGFuY2VvZiBmYyB8fCB0IGluc3RhbmNlb2YgX2MpICYmIChlIGluc3RhbmNlb2YgZmMgfHwgZSBpbnN0YW5jZW9mIF9jKSAmJiAodC5maXJlc3RvcmUgPT09IGUuZmlyZXN0b3JlICYmIHQucGF0aCA9PT0gZS5wYXRoICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBxdWVyaWVzIHBvaW50IHRvIHRoZSBzYW1lIGNvbGxlY3Rpb24gYW5kIGFwcGx5XG4gKiB0aGUgc2FtZSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgYFF1ZXJ5YCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24gcGModCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCB0IGluc3RhbmNlb2YgZGMgJiYgZSBpbnN0YW5jZW9mIGRjICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgcWUodC5fcXVlcnksIGUuX3F1ZXJ5KSAmJiB0LmNvbnZlcnRlciA9PT0gZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBJYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHByb21pc2UgaW4gdGhlIHF1ZXVlLlxuICAgICAgICB0aGlzLk5hID0gUHJvbWlzZS5yZXNvbHZlKCksIFxuICAgICAgICAvLyBBIGxpc3Qgb2YgcmV0cnlhYmxlIG9wZXJhdGlvbnMuIFJldHJ5YWJsZSBvcGVyYXRpb25zIGFyZSBydW4gaW4gb3JkZXIgYW5kXG4gICAgICAgIC8vIHJldHJpZWQgd2l0aCBiYWNrb2ZmLlxuICAgICAgICB0aGlzLmthID0gW10sIFxuICAgICAgICAvLyBJcyB0aGlzIEFzeW5jUXVldWUgYmVpbmcgc2h1dCBkb3duPyBPbmNlIGl0IGlzIHNldCB0byB0cnVlLCBpdCB3aWxsIG5vdFxuICAgICAgICAvLyBiZSBjaGFuZ2VkIGFnYWluLlxuICAgICAgICB0aGlzLk1hID0gITEsIFxuICAgICAgICAvLyBPcGVyYXRpb25zIHNjaGVkdWxlZCB0byBiZSBxdWV1ZWQgaW4gdGhlIGZ1dHVyZS4gT3BlcmF0aW9ucyBhcmVcbiAgICAgICAgLy8gYXV0b21hdGljYWxseSByZW1vdmVkIGFmdGVyIHRoZXkgYXJlIHJ1biBvciBjYW5jZWxlZC5cbiAgICAgICAgdGhpcy5PYSA9IFtdLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICB0aGlzLkZhID0gbnVsbCwgXG4gICAgICAgIC8vIEZsYWcgc2V0IHdoaWxlIHRoZXJlJ3MgYW4gb3V0c3RhbmRpbmcgQXN5bmNRdWV1ZSBvcGVyYXRpb24sIHVzZWQgZm9yXG4gICAgICAgIC8vIGFzc2VydGlvbiBzYW5pdHktY2hlY2tzLlxuICAgICAgICB0aGlzLiRhID0gITEsIFxuICAgICAgICAvLyBFbmFibGVkIGR1cmluZyBzaHV0ZG93biBvbiBTYWZhcmkgdG8gcHJldmVudCBmdXR1cmUgYWNjZXNzIHRvIEluZGV4ZWREQi5cbiAgICAgICAgdGhpcy5CYSA9ICExLCBcbiAgICAgICAgLy8gTGlzdCBvZiBUaW1lcklkcyB0byBmYXN0LWZvcndhcmQgZGVsYXlzIGZvci5cbiAgICAgICAgdGhpcy5MYSA9IFtdLCBcbiAgICAgICAgLy8gQmFja29mZiB0aW1lciB1c2VkIHRvIHNjaGVkdWxlIHJldHJpZXMgZm9yIHJldHJ5YWJsZSBvcGVyYXRpb25zXG4gICAgICAgIHRoaXMuU28gPSBuZXcgS28odGhpcywgXCJhc3luY19xdWV1ZV9yZXRyeVwiIC8qIEFzeW5jUXVldWVSZXRyeSAqLyksIFxuICAgICAgICAvLyBWaXNpYmlsaXR5IGhhbmRsZXIgdGhhdCB0cmlnZ2VycyBhbiBpbW1lZGlhdGUgcmV0cnkgb2YgYWxsIHJldHJ5YWJsZVxuICAgICAgICAvLyBvcGVyYXRpb25zLiBNZWFudCB0byBzcGVlZCB1cCByZWNvdmVyeSB3aGVuIHdlIHJlZ2FpbiBmaWxlIHN5c3RlbSBhY2Nlc3NcbiAgICAgICAgLy8gYWZ0ZXIgcGFnZSBjb21lcyBpbnRvIGZvcmVncm91bmQuXG4gICAgICAgIHRoaXMuVWEgPSAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcW8oKTtcbiAgICAgICAgICAgIHQgJiYgTyhcIkFzeW5jUXVldWVcIiwgXCJWaXNpYmlsaXR5IHN0YXRlIGNoYW5nZWQgdG8gXCIgKyB0LnZpc2liaWxpdHlTdGF0ZSksIHRoaXMuU28uRW8oKTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgdCA9IHFvKCk7XG4gICAgICAgIHQgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiB0LmFkZEV2ZW50TGlzdGVuZXIgJiYgdC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlVhKTtcbiAgICB9XG4gICAgZ2V0IGlzU2h1dHRpbmdEb3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5NYTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBvcGVyYXRpb24gdG8gdGhlIHF1ZXVlIHdpdGhvdXQgd2FpdGluZyBmb3IgaXQgdG8gY29tcGxldGUgKGkuZS5cbiAgICAgKiB3ZSBpZ25vcmUgdGhlIFByb21pc2UgcmVzdWx0KS5cbiAgICAgKi8gICAgZW5xdWV1ZUFuZEZvcmdldCh0KSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5lbnF1ZXVlKHQpO1xuICAgIH1cbiAgICBlbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCh0KSB7XG4gICAgICAgIHRoaXMucWEoKSwgXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcbiAgICAgICAgdGhpcy5HYSh0KTtcbiAgICB9XG4gICAgZW50ZXJSZXN0cmljdGVkTW9kZSh0KSB7XG4gICAgICAgIGlmICghdGhpcy5NYSkge1xuICAgICAgICAgICAgdGhpcy5NYSA9ICEwLCB0aGlzLkJhID0gdCB8fCAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBxbygpO1xuICAgICAgICAgICAgZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUucmVtb3ZlRXZlbnRMaXN0ZW5lciAmJiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuVWEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVucXVldWUodCkge1xuICAgICAgICBpZiAodGhpcy5xYSgpLCB0aGlzLk1hKSBcbiAgICAgICAgLy8gUmV0dXJuIGEgUHJvbWlzZSB3aGljaCBuZXZlciByZXNvbHZlcy5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoKSA9PiB7fSkpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkZWZlcnJlZCBQcm9taXNlIHRoYXQgd2UgY2FuIHJldHVybiB0byB0aGUgY2FsbGVlLiBUaGlzXG4gICAgICAgIC8vIGFsbG93cyB1cyB0byByZXR1cm4gYSBcImhhbmdpbmcgUHJvbWlzZVwiIG9ubHkgdG8gdGhlIGNhbGxlZSBhbmQgc3RpbGxcbiAgICAgICAgLy8gYWR2YW5jZSB0aGUgcXVldWUgZXZlbiB3aGVuIHRoZSBvcGVyYXRpb24gaXMgbm90IHJ1bi5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IGo7XG4gICAgICAgIHJldHVybiB0aGlzLkdhKCgoKSA9PiB0aGlzLk1hICYmIHRoaXMuQmEgPyBQcm9taXNlLnJlc29sdmUoKSA6ICh0KCkudGhlbihlLnJlc29sdmUsIGUucmVqZWN0KSwgXG4gICAgICAgIGUucHJvbWlzZSkpKS50aGVuKCgoKSA9PiBlLnByb21pc2UpKTtcbiAgICB9XG4gICAgZW5xdWV1ZVJldHJ5YWJsZSh0KSB7XG4gICAgICAgIHRoaXMuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMua2EucHVzaCh0KSwgdGhpcy5LYSgpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSdW5zIHRoZSBuZXh0IG9wZXJhdGlvbiBmcm9tIHRoZSByZXRyeWFibGUgcXVldWUuIElmIHRoZSBvcGVyYXRpb24gZmFpbHMsXG4gICAgICogcmVzY2hlZHVsZXMgd2l0aCBiYWNrb2ZmLlxuICAgICAqLyAgICBhc3luYyBLYSgpIHtcbiAgICAgICAgaWYgKDAgIT09IHRoaXMua2EubGVuZ3RoKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMua2FbMF0oKSwgdGhpcy5rYS5zaGlmdCgpLCB0aGlzLlNvLnJlc2V0KCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKCFJaSh0KSkgdGhyb3cgdDtcbiAvLyBGYWlsdXJlIHdpbGwgYmUgaGFuZGxlZCBieSBBc3luY1F1ZXVlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8oXCJBc3luY1F1ZXVlXCIsIFwiT3BlcmF0aW9uIGZhaWxlZCB3aXRoIHJldHJ5YWJsZSBlcnJvcjogXCIgKyB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMua2EubGVuZ3RoID4gMCAmJiBcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBhZGRpdGlvbmFsIG9wZXJhdGlvbnMsIHdlIHJlLXNjaGVkdWxlIGByZXRyeU5leHRPcCgpYC5cbiAgICAgICAgICAgIC8vIFRoaXMgaXMgbmVjZXNzYXJ5IHRvIHJ1biByZXRyeWFibGUgb3BlcmF0aW9ucyB0aGF0IGZhaWxlZCBkdXJpbmdcbiAgICAgICAgICAgIC8vIHRoZWlyIGluaXRpYWwgYXR0ZW1wdCBzaW5jZSB3ZSBkb24ndCBrbm93IHdoZXRoZXIgdGhleSBhcmUgYWxyZWFkeVxuICAgICAgICAgICAgLy8gZW5xdWV1ZWQuIElmLCBmb3IgZXhhbXBsZSwgYG9wMWAsIGBvcDJgLCBgb3AzYCBhcmUgZW5xdWV1ZWQgYW5kIGBvcDFgXG4gICAgICAgICAgICAvLyBuZWVkcyB0byAgYmUgcmUtcnVuLCB3ZSB3aWxsIHJ1biBgb3AxYCwgYG9wMWAsIGBvcDJgIHVzaW5nIHRoZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBlbnF1ZXVlZCBjYWxscyB0byBgcmV0cnlOZXh0T3AoKWAuIGBvcDMoKWAgd2lsbCB0aGVuIHJ1biBpbiB0aGVcbiAgICAgICAgICAgIC8vIGNhbGwgc2NoZWR1bGVkIGhlcmUuXG4gICAgICAgICAgICAvLyBTaW5jZSBgYmFja29mZkFuZFJ1bigpYCBjYW5jZWxzIGFuIGV4aXN0aW5nIGJhY2tvZmYgYW5kIHNjaGVkdWxlcyBhXG4gICAgICAgICAgICAvLyBuZXcgYmFja29mZiBvbiBldmVyeSBjYWxsLCB0aGVyZSBpcyBvbmx5IGV2ZXIgYSBzaW5nbGUgYWRkaXRpb25hbFxuICAgICAgICAgICAgLy8gb3BlcmF0aW9uIGluIHRoZSBxdWV1ZS5cbiAgICAgICAgICAgIHRoaXMuU28uSW8oKCgpID0+IHRoaXMuS2EoKSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEdhKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuTmEudGhlbigoKCkgPT4gKHRoaXMuJGEgPSAhMCwgdCgpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuRmEgPSB0LCB0aGlzLiRhID0gITE7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKipcbiAqIENocm9tZSBpbmNsdWRlcyBFcnJvci5tZXNzYWdlIGluIEVycm9yLnN0YWNrLiBPdGhlciBicm93c2VycyBkbyBub3QuXG4gKiBUaGlzIHJldHVybnMgZXhwZWN0ZWQgb3V0cHV0IG9mIG1lc3NhZ2UgKyBzdGFjayB3aGVuIGF2YWlsYWJsZS5cbiAqIEBwYXJhbSBlcnJvciAtIEVycm9yIG9yIEZpcmVzdG9yZUVycm9yXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IHQubWVzc2FnZSB8fCBcIlwiO1xuICAgICAgICAgICAgICAgIHQuc3RhY2sgJiYgKGUgPSB0LnN0YWNrLmluY2x1ZGVzKHQubWVzc2FnZSkgPyB0LnN0YWNrIDogdC5tZXNzYWdlICsgXCJcXG5cIiArIHQuc3RhY2spO1xuICAgICAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQpO1xuICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlIGVycm9yIHNvIHRoYXQgdGhpcy50YWlsIGJlY29tZXMgYSByZWplY3RlZCBQcm9taXNlIGFuZFxuICAgICAgICAgICAgLy8gYWxsIGZ1cnRoZXIgYXR0ZW1wdHMgdG8gY2hhaW4gKHZpYSAudGhlbikgd2lsbCBqdXN0IHNob3J0LWNpcmN1aXRcbiAgICAgICAgICAgIC8vIGFuZCByZXR1cm4gdGhlIHJlamVjdGVkIFByb21pc2UuXG4gICAgICAgICAgICB0aHJvdyBGKFwiSU5URVJOQUwgVU5IQU5ETEVEIEVSUk9SOiBcIiwgZSksIHQ7XG4gICAgICAgIH0pKS50aGVuKCh0ID0+ICh0aGlzLiRhID0gITEsIHQpKSkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLk5hID0gZSwgZTtcbiAgICB9XG4gICAgZW5xdWV1ZUFmdGVyRGVsYXkodCwgZSwgbikge1xuICAgICAgICB0aGlzLnFhKCksIFxuICAgICAgICAvLyBGYXN0LWZvcndhcmQgZGVsYXlzIGZvciB0aW1lcklkcyB0aGF0IGhhdmUgYmVlbiBvdmVycmlkZW4uXG4gICAgICAgIHRoaXMuTGEuaW5kZXhPZih0KSA+IC0xICYmIChlID0gMCk7XG4gICAgICAgIGNvbnN0IHMgPSBidS5jcmVhdGVBbmRTY2hlZHVsZSh0aGlzLCB0LCBlLCBuLCAodCA9PiB0aGlzLlFhKHQpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLk9hLnB1c2gocyksIHM7XG4gICAgfVxuICAgIHFhKCkge1xuICAgICAgICB0aGlzLkZhICYmIEwoKTtcbiAgICB9XG4gICAgdmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpIHt9XG4gICAgLyoqXG4gICAgICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBxdWV1ZWQgdGFza3MgYXJlIGZpbmlzaGVkIGV4ZWN1dGluZy4gRGVsYXllZFxuICAgICAqIG9wZXJhdGlvbnMgYXJlIG5vdCBydW4uXG4gICAgICovICAgIGFzeW5jIGphKCkge1xuICAgICAgICAvLyBPcGVyYXRpb25zIGluIHRoZSBxdWV1ZSBwcmlvciB0byBkcmFpbmluZyBtYXkgaGF2ZSBlbnF1ZXVlZCBhZGRpdGlvbmFsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIEtlZXAgZHJhaW5pbmcgdGhlIHF1ZXVlIHVudGlsIHRoZSB0YWlsIGlzIG5vIGxvbmdlciBhZHZhbmNlZCxcbiAgICAgICAgLy8gd2hpY2ggaW5kaWNhdGVzIHRoYXQgbm8gbW9yZSBuZXcgb3BlcmF0aW9ucyB3ZXJlIGVucXVldWVkIGFuZCB0aGF0IGFsbFxuICAgICAgICAvLyBvcGVyYXRpb25zIHdlcmUgZXhlY3V0ZWQuXG4gICAgICAgIGxldCB0O1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICB0ID0gdGhpcy5OYSwgYXdhaXQgdDtcbiAgICAgICAgfSB3aGlsZSAodCAhPT0gdGhpcy5OYSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogRGV0ZXJtaW5lIGlmIGEgZGVsYXllZCBvcGVyYXRpb24gd2l0aCBhIHBhcnRpY3VsYXIgVGltZXJJZFxuICAgICAqIGV4aXN0cy5cbiAgICAgKi8gICAgV2EodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5PYSkgaWYgKGUudGltZXJJZCA9PT0gdCkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogUnVucyBzb21lIG9yIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbGFzdFRpbWVySWQgLSBEZWxheWVkIG9wZXJhdGlvbnMgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGlzIFRpbWVySWRcbiAgICAgKiB3aWxsIGJlIGRyYWluZWQuIFBhc3MgVGltZXJJZC5BbGwgdG8gcnVuIGFsbCBkZWxheWVkIG9wZXJhdGlvbnMuXG4gICAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgb25jZSBhbGwgb3BlcmF0aW9ucyBoYXZlIGJlZW4gcnVuLlxuICAgICAqLyAgICB6YSh0KSB7XG4gICAgICAgIC8vIE5vdGUgdGhhdCBkcmFpbmluZyBtYXkgZ2VuZXJhdGUgbW9yZSBkZWxheWVkIG9wcywgc28gd2UgZG8gdGhhdCBmaXJzdC5cbiAgICAgICAgcmV0dXJuIHRoaXMuamEoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAvLyBSdW4gb3BzIGluIHRoZSBzYW1lIG9yZGVyIHRoZXknZCBydW4gaWYgdGhleSByYW4gbmF0dXJhbGx5LlxuICAgICAgICAgICAgdGhpcy5PYS5zb3J0KCgodCwgZSkgPT4gdC50YXJnZXRUaW1lTXMgLSBlLnRhcmdldFRpbWVNcykpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuT2EpIGlmIChlLnNraXBEZWxheSgpLCBcImFsbFwiIC8qIEFsbCAqLyAhPT0gdCAmJiBlLnRpbWVySWQgPT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuamEoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBIYSh0KSB7XG4gICAgICAgIHRoaXMuTGEucHVzaCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIFFhKHQpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLk9hLmluZGV4T2YodCk7XG4gICAgICAgIHRoaXMuT2Euc3BsaWNlKGUsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVGModCkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGlmICh0IGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW3RdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKHQsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyBFYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBqLCB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3ModCwgZSwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogdCxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgodCkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyh0KSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgodCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3ModCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB0LCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBET01FeGNlcHRpb24gZXJyb3IgY29kZSBjb25zdGFudHMuICovIGNvbnN0IEFjID0gLTE7XG5cbi8qKlxuICogVGhlIENsb3VkIEZpcmVzdG9yZSBzZXJ2aWNlIGludGVyZmFjZS5cbiAqXG4gKiBEbyBub3QgY2FsbCB0aGlzIGNvbnN0cnVjdG9yIGRpcmVjdGx5LiBJbnN0ZWFkLCB1c2Uge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKi9cbmNsYXNzIFJjIGV4dGVuZHMgaGMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCBuKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSB7QGxpbmsgRmlyZXN0b3JlfSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlXCIsIHRoaXMuX3F1ZXVlID0gbmV3IEljLCB0aGlzLl9wZXJzaXN0ZW5jZUtleSA9IFwibmFtZVwiIGluIHQgPyB0Lm5hbWUgOiBcIltERUZBVUxUXVwiO1xuICAgIH1cbiAgICBfdGVybWluYXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZmlyZXN0b3JlQ2xpZW50IHx8IFxuICAgICAgICAvLyBUaGUgY2xpZW50IG11c3QgYmUgaW5pdGlhbGl6ZWQgdG8gZW5zdXJlIHRoYXQgYWxsIHN1YnNlcXVlbnQgQVBJXG4gICAgICAgIC8vIHVzYWdlIHRocm93cyBhbiBleGNlcHRpb24uXG4gICAgICAgIHZjKHRoaXMpLCB0aGlzLl9maXJlc3RvcmVDbGllbnQudGVybWluYXRlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBGaXJlc3RvcmV9IHdpdGggdGhlIHByb3ZpZGVkIHNldHRpbmdzLlxuICogQ2FuIG9ubHkgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb24sIGluY2x1ZGluZ1xuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uIElmIHRoZSBjdXN0b20gc2V0dGluZ3MgYXJlIGVtcHR5LCB0aGlzIGZ1bmN0aW9uIGlzXG4gKiBlcXVpdmFsZW50IHRvIGNhbGxpbmcge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcmV0dXJucyBBIG5ld2x5IGluaXRpYWxpemVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICovIGZ1bmN0aW9uIGJjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gX2dldFByb3ZpZGVyKHQsIFwiZmlyZXN0b3JlXCIpO1xuICAgIGlmIChuLmlzSW5pdGlhbGl6ZWQoKSkge1xuICAgICAgICBjb25zdCB0ID0gbi5nZXRJbW1lZGlhdGUoKSwgcyA9IG4uZ2V0T3B0aW9ucygpO1xuICAgICAgICBpZiAoZGVlcEVxdWFsKHMsIGUpKSByZXR1cm4gdDtcbiAgICAgICAgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcImluaXRpYWxpemVGaXJlc3RvcmUoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoIGRpZmZlcmVudCBvcHRpb25zLiBUbyBhdm9pZCB0aGlzIGVycm9yLCBjYWxsIGluaXRpYWxpemVGaXJlc3RvcmUoKSB3aXRoIHRoZSBzYW1lIG9wdGlvbnMgYXMgd2hlbiBpdCB3YXMgb3JpZ2luYWxseSBjYWxsZWQsIG9yIGNhbGwgZ2V0RmlyZXN0b3JlKCkgdG8gcmV0dXJuIHRoZSBhbHJlYWR5IGluaXRpYWxpemVkIGluc3RhbmNlLlwiKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiAtMSAhPT0gZS5jYWNoZVNpemVCeXRlcyAmJiBlLmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICByZXR1cm4gbi5pbml0aWFsaXplKHtcbiAgICAgICAgb3B0aW9uczogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGV4aXN0aW5nIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRoYXQgaXMgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICogcHJvdmlkZWQge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9LiBJZiBubyBpbnN0YW5jZSBleGlzdHMsIGluaXRpYWxpemVzIGEgbmV3XG4gKiBpbnN0YW5jZSB3aXRoIGRlZmF1bHQgc2V0dGluZ3MuXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gaW5zdGFuY2UgdGhhdCB0aGUgcmV0dXJuZWQge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEByZXR1cm5zIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBvZiB0aGUgcHJvdmlkZWQgYXBwLlxuICovIGZ1bmN0aW9uIFBjKGUgPSBnZXRBcHAoKSkge1xuICAgIHJldHVybiBfZ2V0UHJvdmlkZXIoZSwgXCJmaXJlc3RvcmVcIikuZ2V0SW1tZWRpYXRlKCk7XG59XG5cbi8qKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gVmModCkge1xuICAgIHJldHVybiB0Ll9maXJlc3RvcmVDbGllbnQgfHwgdmModCksIHQuX2ZpcmVzdG9yZUNsaWVudC52ZXJpZnlOb3RUZXJtaW5hdGVkKCksIHQuX2ZpcmVzdG9yZUNsaWVudDtcbn1cblxuZnVuY3Rpb24gdmModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gbmV3IFZ0KHQsIGUsIG4sIHMuaG9zdCwgcy5zc2wsIHMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIHMudXNlRmV0Y2hTdHJlYW1zKTtcbiAgICB9KHQuX2RhdGFiYXNlSWQsIChudWxsID09PSAoZSA9IHQuX2FwcCkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vcHRpb25zLmFwcElkKSB8fCBcIlwiLCB0Ll9wZXJzaXN0ZW5jZUtleSwgbik7XG4gICAgdC5fZmlyZXN0b3JlQ2xpZW50ID0gbmV3IE1hKHQuX2F1dGhDcmVkZW50aWFscywgdC5fYXBwQ2hlY2tDcmVkZW50aWFscywgdC5fcXVldWUsIHMpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLlxuICpcbiAqIE11c3QgYmUgY2FsbGVkIGJlZm9yZSBhbnkgb3RoZXIgZnVuY3Rpb25zIChvdGhlciB0aGFuXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUZpcmVzdG9yZX0sIHtAbGluayBnZXRGaXJlc3RvcmV9IG9yXG4gKiB7QGxpbmsgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZX0uXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlIGl0XG4gKiByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2VTZXR0aW5ncyAtIE9wdGlvbmFsIHNldHRpbmdzIG9iamVjdCB0byBjb25maWd1cmVcbiAqIHBlcnNpc3RlbmNlLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50IHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gU2ModCwgZSkge1xuICAgIEJjKHQgPSB1Yyh0LCBSYykpO1xuICAgIGNvbnN0IG4gPSBWYyh0KSwgcyA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIGkgPSBuZXcgU2E7XG4gICAgcmV0dXJuIENjKG4sIGksIG5ldyBWYShpLCBzLmNhY2hlU2l6ZUJ5dGVzLCBudWxsID09IGUgPyB2b2lkIDAgOiBlLmZvcmNlT3duZXJzaGlwKSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIG11bHRpLXRhYiBwZXJzaXN0ZW50IHN0b3JhZ2UsIGlmIHBvc3NpYmxlLiBJZiBlbmFibGVkXG4gKiBhY3Jvc3MgYWxsIHRhYnMsIGFsbCBvcGVyYXRpb25zIHNoYXJlIGFjY2VzcyB0byBsb2NhbCBwZXJzaXN0ZW5jZSwgaW5jbHVkaW5nXG4gKiBzaGFyZWQgZXhlY3V0aW9uIG9mIHF1ZXJpZXMgYW5kIGxhdGVuY3ktY29tcGVuc2F0ZWQgbG9jYWwgZG9jdW1lbnQgdXBkYXRlc1xuICogYWNyb3NzIGFsbCBjb25uZWN0ZWQgaW5zdGFuY2VzLlxuICpcbiAqIElmIHRoaXMgZmFpbHMsIGBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlXG4gKiBpdCByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIgYW5kXG4gKiAgICAgbXVsdGktdGFiIGlzIG5vdCBlbmFibGVkLlxuICogICAqIHVuaW1wbGVtZW50ZWQ6IFRoZSBicm93c2VyIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSBvZmZsaW5lXG4gKiAgICAgcGVyc2lzdGVuY2UgaW1wbGVtZW50YXRpb24uXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXByZXNlbnRzIHN1Y2Nlc3NmdWxseSBlbmFibGluZyBwZXJzaXN0ZW50XG4gKiBzdG9yYWdlLlxuICovIGZ1bmN0aW9uIERjKHQpIHtcbiAgICBCYyh0ID0gdWModCwgUmMpKTtcbiAgICBjb25zdCBlID0gVmModCksIG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gbmV3IFNhO1xuICAgIHJldHVybiBDYyhlLCBzLCBuZXcgdmEocywgbi5jYWNoZVNpemVCeXRlcykpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBib3RoIHRoZSBgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyYCBhbmQgYE9ubGluZUNvbXBvbmVudFByb3ZpZGVyYC5cbiAqIElmIHRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhIHJlY292ZXJhYmxlIGVycm9yIChzZWVcbiAqIGBjYW5SZWNvdmVyRnJvbUluZGV4ZWREYkVycm9yKClgIGJlbG93KSwgdGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVqZWN0ZWRcbiAqIGJ1dCB0aGUgY2xpZW50IHJlbWFpbnMgdXNhYmxlLlxuICovIGZ1bmN0aW9uIENjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IGo7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBPYSh0LCBuKSwgYXdhaXQgRmEodCwgZSksIHMucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBpZiAoIVxuICAgICAgICAgICAgLyoqXG4gKiBEZWNpZGVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGVycm9yIGFsbG93cyB1cyB0byBncmFjZWZ1bGx5IGRpc2FibGVcbiAqIHBlcnNpc3RlbmNlIChhcyBvcHBvc2VkIHRvIGNyYXNoaW5nIHRoZSBjbGllbnQpLlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUpIHJldHVybiB0LmNvZGUgPT09IEsuRkFJTEVEX1BSRUNPTkRJVElPTiB8fCB0LmNvZGUgPT09IEsuVU5JTVBMRU1FTlRFRDtcbiAgICAgICAgICAgICAgICBpZiAoXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIHQgaW5zdGFuY2VvZiBET01FeGNlcHRpb24pIFxuICAgICAgICAgICAgICAgIC8vIFRoZXJlIGFyZSBhIGZldyBrbm93biBjaXJjdW1zdGFuY2VzIHdoZXJlIHdlIGNhbiBvcGVuIEluZGV4ZWREYiBidXRcbiAgICAgICAgICAgICAgICAvLyB0cnlpbmcgdG8gcmVhZC93cml0ZSB3aWxsIGZhaWwgKGUuZy4gcXVvdGEgZXhjZWVkZWQpLiBGb3JcbiAgICAgICAgICAgICAgICAvLyB3ZWxsLXVuZGVyc3Rvb2QgY2FzZXMsIHdlIGF0dGVtcHQgdG8gZGV0ZWN0IHRoZXNlIGFuZCB0aGVuIGdyYWNlZnVsbHlcbiAgICAgICAgICAgICAgICAvLyBmYWxsIGJhY2sgdG8gbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICAgICAgICAgIC8vIE5PVEU6IFJhdGhlciB0aGFuIGNvbnRpbnVlIHRvIGFkZCB0byB0aGlzIGxpc3QsIHdlIGNvdWxkIGRlY2lkZSB0b1xuICAgICAgICAgICAgICAgIC8vIGFsd2F5cyBmYWxsIGJhY2ssIHdpdGggdGhlIHJpc2sgdGhhdCB3ZSBtaWdodCBhY2NpZGVudGFsbHkgaGlkZSBlcnJvcnNcbiAgICAgICAgICAgICAgICAvLyByZXByZXNlbnRpbmcgYWN0dWFsIFNESyBidWdzLlxuICAgICAgICAgICAgICAgIC8vIFdoZW4gdGhlIGJyb3dzZXIgaXMgb3V0IG9mIHF1b3RhIHdlIGNvdWxkIGdldCBlaXRoZXIgcXVvdGEgZXhjZWVkZWRcbiAgICAgICAgICAgICAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcbiAgICAgICAgICAgICAgICAvLyBzY2hlbWEgbWlncmF0aW9uLlxuICAgICAgICAgICAgICAgIHJldHVybiAyMiA9PT0gdC5jb2RlIHx8IDIwID09PSB0LmNvZGUgfHwgXG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveCBQcml2YXRlIEJyb3dzaW5nIG1vZGUgZGlzYWJsZXMgSW5kZXhlZERiIGFuZCByZXR1cm5zXG4gICAgICAgICAgICAgICAgLy8gSU5WQUxJRF9TVEFURSBmb3IgYW55IHVzYWdlLlxuICAgICAgICAgICAgICAgIDExID09PSB0LmNvZGU7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDbGVhcnMgdGhlIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhpcyBpbmNsdWRlcyBwZW5kaW5nIHdyaXRlcyBhbmQgY2FjaGVkXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgd2hpbGUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGlzIG5vdCBzdGFydGVkIChhZnRlciB0aGUgYXBwIGlzXG4gKiB0ZXJtaW5hdGVkIG9yIHdoZW4gdGhlIGFwcCBpcyBmaXJzdCBpbml0aWFsaXplZCkuIE9uIHN0YXJ0dXAsIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW4ge0BsaW5rXG4gKiBpbml0aWFsaXplRmlyZXN0b3JlfSBvciB7QGxpbmsgZ2V0RmlyZXN0b3JlfSkpLiBJZiB0aGUge0BsaW5rIEZpcmVzdG9yZX1cbiAqIGluc3RhbmNlIGlzIHN0aWxsIHJ1bm5pbmcsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgd2l0aCB0aGUgZXJyb3IgY29kZVxuICogb2YgYGZhaWxlZC1wcmVjb25kaXRpb25gLlxuICpcbiAqIE5vdGU6IGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGlzIHByaW1hcmlseSBpbnRlbmRlZCB0byBoZWxwIHdyaXRlXG4gKiByZWxpYWJsZSB0ZXN0cyB0aGF0IHVzZSBDbG91ZCBGaXJlc3RvcmUuIEl0IHVzZXMgYW4gZWZmaWNpZW50IG1lY2hhbmlzbSBmb3JcbiAqIGRyb3BwaW5nIGV4aXN0aW5nIGRhdGEgYnV0IGRvZXMgbm90IGF0dGVtcHQgdG8gc2VjdXJlbHkgb3ZlcndyaXRlIG9yXG4gKiBvdGhlcndpc2UgbWFrZSBjYWNoZWQgZGF0YSB1bnJlY292ZXJhYmxlLiBGb3IgYXBwbGljYXRpb25zIHRoYXQgYXJlIHNlbnNpdGl2ZVxuICogdG8gdGhlIGRpc2Nsb3N1cmUgb2YgY2FjaGVkIGRhdGEgaW4gYmV0d2VlbiB1c2VyIHNlc3Npb25zLCB3ZSBzdHJvbmdseVxuICogcmVjb21tZW5kIG5vdCBlbmFibGluZyBwZXJzaXN0ZW5jZSBhdCBhbGwuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBjbGVhciBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdoZW4gdGhlIHBlcnNpc3RlbnQgc3RvcmFnZSBpc1xuICogY2xlYXJlZC4gT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICovICh0KSkgdGhyb3cgdDtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihcIkVycm9yIGVuYWJsaW5nIG9mZmxpbmUgcGVyc2lzdGVuY2UuIEZhbGxpbmcgYmFjayB0byBwZXJzaXN0ZW5jZSBkaXNhYmxlZDogXCIgKyB0KSwgXG4gICAgICAgICAgICBzLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH0pKS50aGVuKCgoKSA9PiBzLnByb21pc2UpKTtcbn1cblxuZnVuY3Rpb24geGModCkge1xuICAgIGlmICh0Ll9pbml0aWFsaXplZCAmJiAhdC5fdGVybWluYXRlZCkgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlBlcnNpc3RlbmNlIGNhbiBvbmx5IGJlIGNsZWFyZWQgYmVmb3JlIGEgRmlyZXN0b3JlIGluc3RhbmNlIGlzIGluaXRpYWxpemVkIG9yIGFmdGVyIGl0IGlzIHRlcm1pbmF0ZWQuXCIpO1xuICAgIGNvbnN0IGUgPSBuZXcgajtcbiAgICByZXR1cm4gdC5fcXVldWUuZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWdpLnZ0KCkpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdCArIFwibWFpblwiO1xuICAgICAgICAgICAgICAgIGF3YWl0IGdpLmRlbGV0ZShlKTtcbiAgICAgICAgICAgIH0oenIodC5fZGF0YWJhc2VJZCwgdC5fcGVyc2lzdGVuY2VLZXkpKSwgZS5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGUucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLCBlLnByb21pc2U7XG59XG5cbi8qKlxuICogV2FpdHMgdW50aWwgYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBmb3IgdGhlIGFjdGl2ZSB1c2VyIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICpcbiAqIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIGltbWVkaWF0ZWx5IGlmIHRoZXJlIGFyZSBubyBvdXRzdGFuZGluZyB3cml0ZXMuXG4gKiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIHdhaXRzIGZvciBhbGwgcHJldmlvdXNseSBpc3N1ZWQgd3JpdGVzIChpbmNsdWRpbmdcbiAqIHRob3NlIHdyaXR0ZW4gaW4gYSBwcmV2aW91cyBhcHAgc2Vzc2lvbiksIGJ1dCBpdCBkb2VzIG5vdCB3YWl0IGZvciB3cml0ZXNcbiAqIHRoYXQgd2VyZSBhZGRlZCBhZnRlciB0aGUgZnVuY3Rpb24gaXMgY2FsbGVkLiBJZiB5b3Ugd2FudCB0byB3YWl0IGZvclxuICogYWRkaXRpb25hbCB3cml0ZXMsIGNhbGwgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIGFnYWluLlxuICpcbiAqIEFueSBvdXRzdGFuZGluZyBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgcHJvbWlzZXMgYXJlIHJlamVjdGVkIGR1cmluZyB1c2VyXG4gKiBjaGFuZ2VzLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHdoaWNoIHJlc29sdmVzIHdoZW4gYWxsIGN1cnJlbnRseSBwZW5kaW5nIHdyaXRlcyBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqLyBmdW5jdGlvbiBOYyh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBqO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHNhKGF3YWl0IEdhKHQpLCBlKSkpLCBlLnByb21pc2U7XG4gICAgfShWYyh0ID0gdWModCwgUmMpKSk7XG59XG5cbi8qKlxuICogUmUtZW5hYmxlcyB1c2Ugb2YgdGhlIG5ldHdvcmsgZm9yIHRoaXMge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgYWZ0ZXIgYSBwcmlvclxuICogY2FsbCB0byB7QGxpbmsgZGlzYWJsZU5ldHdvcmt9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBlbmFibGVkLlxuICovIGZ1bmN0aW9uIGtjKHQpIHtcbiAgICByZXR1cm4gUWEoVmModCA9IHVjKHQsIFJjKSkpO1xufVxuXG4vKipcbiAqIERpc2FibGVzIG5ldHdvcmsgdXNhZ2UgZm9yIHRoaXMgaW5zdGFuY2UuIEl0IGNhbiBiZSByZS1lbmFibGVkIHZpYSB7QGxpbmtcbiAqIGVuYWJsZU5ldHdvcmt9LiBXaGlsZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCwgYW55IHNuYXBzaG90IGxpc3RlbmVycyxcbiAqIGBnZXREb2MoKWAgb3IgYGdldERvY3MoKWAgY2FsbHMgd2lsbCByZXR1cm4gcmVzdWx0cyBmcm9tIGNhY2hlLCBhbmQgYW55IHdyaXRlXG4gKiBvcGVyYXRpb25zIHdpbGwgYmUgcXVldWVkIHVudGlsIHRoZSBuZXR3b3JrIGlzIHJlc3RvcmVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBoYXMgYmVlbiBkaXNhYmxlZC5cbiAqLyBmdW5jdGlvbiBNYyh0KSB7XG4gICAgcmV0dXJuIGphKFZjKHQgPSB1Yyh0LCBSYykpKTtcbn1cblxuLyoqXG4gKiBUZXJtaW5hdGVzIHRoZSBwcm92aWRlZCB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqXG4gKiBBZnRlciBjYWxsaW5nIGB0ZXJtaW5hdGUoKWAgb25seSB0aGUgYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgZnVuY3Rpb25cbiAqIG1heSBiZSB1c2VkLiBBbnkgb3RoZXIgZnVuY3Rpb24gd2lsbCB0aHJvdyBhIGBGaXJlc3RvcmVFcnJvcmAuXG4gKlxuICogVG8gcmVzdGFydCBhZnRlciB0ZXJtaW5hdGlvbiwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIEZpcmViYXNlRmlyZXN0b3JlIHdpdGhcbiAqIHtAbGluayBnZXRGaXJlc3RvcmV9LlxuICpcbiAqIFRlcm1pbmF0aW9uIGRvZXMgbm90IGNhbmNlbCBhbnkgcGVuZGluZyB3cml0ZXMsIGFuZCBhbnkgcHJvbWlzZXMgdGhhdCBhcmVcbiAqIGF3YWl0aW5nIGEgcmVzcG9uc2UgZnJvbSB0aGUgc2VydmVyIHdpbGwgbm90IGJlIHJlc29sdmVkLiBJZiB5b3UgaGF2ZVxuICogcGVyc2lzdGVuY2UgZW5hYmxlZCwgdGhlIG5leHQgdGltZSB5b3Ugc3RhcnQgdGhpcyBpbnN0YW5jZSwgaXQgd2lsbCByZXN1bWVcbiAqIHNlbmRpbmcgdGhlc2Ugd3JpdGVzIHRvIHRoZSBzZXJ2ZXIuXG4gKlxuICogTm90ZTogVW5kZXIgbm9ybWFsIGNpcmN1bXN0YW5jZXMsIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBpcyBub3QgcmVxdWlyZWQuIFRoaXNcbiAqIGZ1bmN0aW9uIGlzIHVzZWZ1bCBvbmx5IHdoZW4geW91IHdhbnQgdG8gZm9yY2UgdGhpcyBpbnN0YW5jZSB0byByZWxlYXNlIGFsbFxuICogb2YgaXRzIHJlc291cmNlcyBvciBpbiBjb21iaW5hdGlvbiB3aXRoIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHRvXG4gKiBlbnN1cmUgdGhhdCBhbGwgbG9jYWwgc3RhdGUgaXMgZGVzdHJveWVkIGJldHdlZW4gdGVzdCBydW5zLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgaW5zdGFuY2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiB0ZXJtaW5hdGVkLlxuICovIGZ1bmN0aW9uIE9jKHQpIHtcbiAgICByZXR1cm4gX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSh0LmFwcCwgXCJmaXJlc3RvcmVcIiksIHQuX2RlbGV0ZSgpO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGxvYWQgYnVuZGxlcyBmb3IuXG4gKiBAcGFyYW0gYnVuZGxlRGF0YSAtIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdGhlIGJ1bmRsZSB0byBiZSBsb2FkZWQuIFZhbGlkXG4gKiBvYmplY3RzIGFyZSBgQXJyYXlCdWZmZXJgLCBgUmVhZGFibGVTdHJlYW08VWludDhBcnJheT5gIG9yIGBzdHJpbmdgLlxuICpcbiAqIEByZXR1cm5zIEEgYExvYWRCdW5kbGVUYXNrYCBvYmplY3QsIHdoaWNoIG5vdGlmaWVzIGNhbGxlcnMgd2l0aCBwcm9ncmVzc1xuICogdXBkYXRlcywgYW5kIGNvbXBsZXRpb24gb3IgZXJyb3IgZXZlbnRzLiBJdCBjYW4gYmUgdXNlZCBhcyBhXG4gKiBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gZnVuY3Rpb24gRmModCwgZSkge1xuICAgIGNvbnN0IG4gPSBWYyh0ID0gdWModCwgUmMpKSwgcyA9IG5ldyBFYztcbiAgICByZXR1cm4gWmEobiwgdC5fZGF0YWJhc2VJZCwgZSwgcyksIHM7XG59XG5cbi8qKlxuICogUmVhZHMgYSBGaXJlc3RvcmUge0BsaW5rIFF1ZXJ5fSBmcm9tIGxvY2FsIGNhY2hlLCBpZGVudGlmaWVkIGJ5IHRoZSBnaXZlblxuICogbmFtZS5cbiAqXG4gKiBUaGUgbmFtZWQgcXVlcmllcyBhcmUgcGFja2FnZWQgIGludG8gYnVuZGxlcyBvbiB0aGUgc2VydmVyIHNpZGUgKGFsb25nXG4gKiB3aXRoIHJlc3VsdGluZyBkb2N1bWVudHMpLCBhbmQgbG9hZGVkIHRvIGxvY2FsIGNhY2hlIHVzaW5nIGBsb2FkQnVuZGxlYC4gT25jZVxuICogaW4gbG9jYWwgY2FjaGUsIHVzZSB0aGlzIG1ldGhvZCB0byBleHRyYWN0IGEge0BsaW5rIFF1ZXJ5fSBieSBuYW1lLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gcmVhZCB0aGUgcXVlcnkgZnJvbS5cbiAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHF1ZXJ5LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aXRoIHRoZSBRdWVyeSBvciBgbnVsbGAuXG4gKi8gZnVuY3Rpb24gJGModCwgZSkge1xuICAgIHJldHVybiB0YyhWYyh0ID0gdWModCwgUmMpKSwgZSkudGhlbigoZSA9PiBlID8gbmV3IGRjKHQsIG51bGwsIGUucXVlcnkpIDogbnVsbCkpO1xufVxuXG5mdW5jdGlvbiBCYyh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkIHx8IHQuX3Rlcm1pbmF0ZWQpIHRocm93IG5ldyBRKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgaGFzIGFscmVhZHkgYmVlbiBzdGFydGVkIGFuZCBwZXJzaXN0ZW5jZSBjYW4gbm8gbG9uZ2VyIGJlIGVuYWJsZWQuIFlvdSBjYW4gb25seSBlbmFibGUgcGVyc2lzdGVuY2UgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqL1xuY2xhc3MgTGMge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBgRmllbGRQYXRoYCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICAgICAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKC4uLnQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSBpZiAoMCA9PT0gdFtlXS5sZW5ndGgpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIGZpZWxkIG5hbWUgYXQgYXJndW1lbnQgJChpICsgMSkuIEZpZWxkIG5hbWVzIG11c3Qgbm90IGJlIGVtcHR5LlwiKTtcbiAgICAgICAgdGhpcy5faW50ZXJuYWxQYXRoID0gbmV3IG10KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBGaWVsZFBhdGhgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEZpZWxkUGF0aGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnRlcm5hbFBhdGguaXNFcXVhbCh0Ll9pbnRlcm5hbFBhdGgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCBzZW50aW5lbCBgRmllbGRQYXRoYCB0byByZWZlciB0byB0aGUgSUQgb2YgYSBkb2N1bWVudC5cbiAqIEl0IGNhbiBiZSB1c2VkIGluIHF1ZXJpZXMgdG8gc29ydCBvciBmaWx0ZXIgYnkgdGhlIGRvY3VtZW50IElELlxuICovIGZ1bmN0aW9uIFVjKCkge1xuICAgIHJldHVybiBuZXcgTGMoXCJfX25hbWVfX1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYW4gYXJyYXkgb2YgYnl0ZXMuXG4gKi8gY2xhc3MgcWMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLl9ieXRlU3RyaW5nID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBCYXNlNjQgc3RyaW5nLCBjb252ZXJ0aW5nIGl0IHRvXG4gICAgICogYnl0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYmFzZTY0IC0gVGhlIEJhc2U2NCBzdHJpbmcgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHFjKHB0LmZyb21CYXNlNjRTdHJpbmcodCkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIGNvbnN0cnVjdCBkYXRhIGZyb20gQmFzZTY0IHN0cmluZzogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIFVpbnQ4QXJyYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gYXJyYXkgLSBUaGUgVWludDhBcnJheSB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tVWludDhBcnJheSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcWMocHQuZnJvbVVpbnQ4QXJyYXkodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGFzIGEgQmFzZTY0LWVuY29kZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIEJhc2U2NC1lbmNvZGVkIHN0cmluZyBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9CYXNlNjQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBpbiBhIG5ldyBgVWludDhBcnJheWAuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgVWludDhBcnJheSBjcmVhdGVkIGZyb20gdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvVWludDhBcnJheSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIkJ5dGVzKGJhc2U2NDogXCIgKyB0aGlzLnRvQmFzZTY0KCkgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgQnl0ZXNgIG9iamVjdCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy5pc0VxdWFsKHQuX2J5dGVTdHJpbmcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2VudGluZWwgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgd2hlbiB3cml0aW5nIGRvY3VtZW50IGZpZWxkcyB3aXRoIGBzZXQoKWBcbiAqIG9yIGB1cGRhdGUoKWAuXG4gKi8gY2xhc3MgR2Mge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSBfbWV0aG9kTmFtZSAtIFRoZSBwdWJsaWMgQVBJIGVuZHBvaW50IHRoYXQgcmV0dXJucyB0aGlzIGNsYXNzLlxuICAgICAqIEBoaWRlY29uc3RydWN0b3JcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX21ldGhvZE5hbWUgPSB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gaW1tdXRhYmxlIG9iamVjdCByZXByZXNlbnRpbmcgYSBnZW9ncmFwaGljIGxvY2F0aW9uIGluIEZpcmVzdG9yZS4gVGhlXG4gKiBsb2NhdGlvbiBpcyByZXByZXNlbnRlZCBhcyBsYXRpdHVkZS9sb25naXR1ZGUgcGFpci5cbiAqXG4gKiBMYXRpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTkwLCA5MF0uXG4gKiBMb25naXR1ZGUgdmFsdWVzIGFyZSBpbiB0aGUgcmFuZ2Ugb2YgWy0xODAsIDE4MF0uXG4gKi8gY2xhc3MgS2Mge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGBHZW9Qb2ludGAgb2JqZWN0IHdpdGggdGhlIHByb3ZpZGVkIGxhdGl0dWRlIGFuZFxuICAgICAqIGxvbmdpdHVkZSB2YWx1ZXMuXG4gICAgICogQHBhcmFtIGxhdGl0dWRlIC0gVGhlIGxhdGl0dWRlIGFzIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAuXG4gICAgICogQHBhcmFtIGxvbmdpdHVkZSAtIFRoZSBsb25naXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh0KSB8fCB0IDwgLTkwIHx8IHQgPiA5MCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkxhdGl0dWRlIG11c3QgYmUgYSBudW1iZXIgYmV0d2VlbiAtOTAgYW5kIDkwLCBidXQgd2FzOiBcIiArIHQpO1xuICAgICAgICBpZiAoIWlzRmluaXRlKGUpIHx8IGUgPCAtMTgwIHx8IGUgPiAxODApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJMb25naXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC0xODAgYW5kIDE4MCwgYnV0IHdhczogXCIgKyBlKTtcbiAgICAgICAgdGhpcy5fbGF0ID0gdCwgdGhpcy5fbG9uZyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsYXRpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxvbmdpdHVkZSBvZiB0aGlzIGBHZW9Qb2ludGAgaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBsb25naXR1ZGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sb25nO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgR2VvUG9pbnRgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEdlb1BvaW50YCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9sYXQgPT09IHQuX2xhdCAmJiB0aGlzLl9sb25nID09PSB0Ll9sb25nO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgR2VvUG9pbnQuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB0aGlzLl9sYXQsXG4gICAgICAgICAgICBsb25naXR1ZGU6IHRoaXMuX2xvbmdcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWN0dWFsbHkgcHJpdmF0ZSB0byBKUyBjb25zdW1lcnMgb2Ygb3VyIEFQSSwgc28gdGhpcyBmdW5jdGlvbiBpcyBwcmVmaXhlZFxuICAgICAqIHdpdGggYW4gdW5kZXJzY29yZS5cbiAgICAgKi8gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBydCh0aGlzLl9sYXQsIHQuX2xhdCkgfHwgcnQodGhpcy5fbG9uZywgdC5fbG9uZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBRYyA9IC9eX18uKl9fJC87XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgZG9jdW1lbnQgZGF0YSAoZS5nLiBmb3IgYSBzZXREYXRhIGNhbGwpLiAqLyBjbGFzcyBqYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLmZpZWxkTWFzayA/IG5ldyBBbih0LCB0aGlzLmRhdGEsIHRoaXMuZmllbGRNYXNrLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcykgOiBuZXcgRW4odCwgdGhpcy5kYXRhLCBlLCB0aGlzLmZpZWxkVHJhbnNmb3Jtcyk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBwYXJzaW5nIFwidXBkYXRlXCIgZGF0YSAoaS5lLiBmb3IgYW4gdXBkYXRlRGF0YSBjYWxsKS4gKi8gY2xhc3MgV2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIFRoZSBmaWVsZE1hc2sgZG9lcyBub3QgaW5jbHVkZSBkb2N1bWVudCB0cmFuc2Zvcm1zLlxuICAgIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhID0gdCwgdGhpcy5maWVsZE1hc2sgPSBlLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IG47XG4gICAgfVxuICAgIHRvTXV0YXRpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IEFuKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHpjKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGNhc2UgMCAvKiBTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDIgLyogTWVyZ2VTZXQgKi8gOlxuIC8vIGZhbGwgdGhyb3VnaFxuICAgICAgICAgICAgICBjYXNlIDEgLyogVXBkYXRlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDMgLyogQXJndW1lbnQgKi8gOlxuICAgICAgY2FzZSA0IC8qIEFycmF5QXJndW1lbnQgKi8gOlxuICAgICAgICByZXR1cm4gITE7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG59XG5cbi8qKiBBIFwiY29udGV4dFwiIG9iamVjdCBwYXNzZWQgYXJvdW5kIHdoaWxlIHBhcnNpbmcgdXNlciBkYXRhLiAqLyBjbGFzcyBIYyB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBQYXJzZUNvbnRleHQgd2l0aCB0aGUgZ2l2ZW4gc291cmNlIGFuZCBwYXRoLlxuICAgICAqXG4gICAgICogQHBhcmFtIHNldHRpbmdzIC0gVGhlIHNldHRpbmdzIGZvciB0aGUgcGFyc2VyLlxuICAgICAqIEBwYXJhbSBkYXRhYmFzZUlkIC0gVGhlIGRhdGFiYXNlIElEIG9mIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2UgdG8gZ2VuZXJhdGUgdGhlIFZhbHVlIHByb3RvLlxuICAgICAqIEBwYXJhbSBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIC0gV2hldGhlciB0byBpZ25vcmUgdW5kZWZpbmVkIHByb3BlcnRpZXNcbiAgICAgKiByYXRoZXIgdGhhbiB0aHJvdy5cbiAgICAgKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgdHJhbnNmb3JtcyBlbmNvdW50ZXJlZFxuICAgICAqIHdoaWxlIHBhcnNpbmcgdGhlIGRhdGEuXG4gICAgICogQHBhcmFtIGZpZWxkTWFzayAtIEEgbXV0YWJsZSBsaXN0IG9mIGZpZWxkIHBhdGhzIGVuY291bnRlcmVkIHdoaWxlIHBhcnNpbmdcbiAgICAgKiB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93LCBzbyBwYXRoIGNhbiBiZVxuICAgICAqIG51bGwgdG8gaW5kaWNhdGUgdGhlIGNvbnRleHQgcmVwcmVzZW50cyBhbnkgbG9jYXRpb24gd2l0aGluIGFuIGFycmF5IChpblxuICAgICAqIHdoaWNoIGNhc2UgY2VydGFpbiBmZWF0dXJlcyB3aWxsIG5vdCB3b3JrIGFuZCBlcnJvcnMgd2lsbCBiZSBzb21ld2hhdFxuICAgICAqIGNvbXByb21pc2VkKS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSBlLCB0aGlzLk0gPSBuLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBzLCBcbiAgICAgICAgLy8gTWlub3IgaGFjazogSWYgZmllbGRUcmFuc2Zvcm1zIGlzIHVuZGVmaW5lZCwgd2UgYXNzdW1lIHRoaXMgaXMgYW5cbiAgICAgICAgLy8gZXh0ZXJuYWwgY2FsbCBhbmQgd2UgbmVlZCB0byB2YWxpZGF0ZSB0aGUgZW50aXJlIHBhdGguXG4gICAgICAgIHZvaWQgMCA9PT0gaSAmJiB0aGlzLkphKCksIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSB8fCBbXSwgdGhpcy5maWVsZE1hc2sgPSByIHx8IFtdO1xuICAgIH1cbiAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3MucGF0aDtcbiAgICB9XG4gICAgZ2V0IFlhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5ZYTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBuZXcgY29udGV4dCB3aXRoIHRoZSBzcGVjaWZpZWQgc2V0dGluZ3Mgb3ZlcndyaXR0ZW4uICovICAgIFhhKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBIYyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuc2V0dGluZ3MpLCB0KSwgdGhpcy5kYXRhYmFzZUlkLCB0aGlzLk0sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgdGhpcy5maWVsZFRyYW5zZm9ybXMsIHRoaXMuZmllbGRNYXNrKTtcbiAgICB9XG4gICAgWmEodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5YYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgdGM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5lYyh0KSwgcztcbiAgICB9XG4gICAgbmModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IG51bGwgPT09IChlID0gdGhpcy5wYXRoKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNoaWxkKHQpLCBzID0gdGhpcy5YYSh7XG4gICAgICAgICAgICBwYXRoOiBuLFxuICAgICAgICAgICAgdGM6ICExXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gcy5KYSgpLCBzO1xuICAgIH1cbiAgICBzYyh0KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFdlIGRvbid0IHN1cHBvcnQgYXJyYXkgcGF0aHMgcmlnaHQgbm93OyBzbyBtYWtlIHBhdGhcbiAgICAgICAgLy8gdW5kZWZpbmVkLlxuICAgICAgICByZXR1cm4gdGhpcy5YYSh7XG4gICAgICAgICAgICBwYXRoOiB2b2lkIDAsXG4gICAgICAgICAgICB0YzogITBcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGljKHQpIHtcbiAgICAgICAgcmV0dXJuIHdoKHQsIHRoaXMuc2V0dGluZ3MubWV0aG9kTmFtZSwgdGhpcy5zZXR0aW5ncy5yYyB8fCAhMSwgdGhpcy5wYXRoLCB0aGlzLnNldHRpbmdzLm9jKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmICdmaWVsZFBhdGgnIHdhcyB0cmF2ZXJzZWQgd2hlbiBjcmVhdGluZyB0aGlzIGNvbnRleHQuICovICAgIGNvbnRhaW5zKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5maWVsZE1hc2suZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZSkpKSB8fCB2b2lkIDAgIT09IHRoaXMuZmllbGRUcmFuc2Zvcm1zLmZpbmQoKGUgPT4gdC5pc1ByZWZpeE9mKGUuZmllbGQpKSk7XG4gICAgfVxuICAgIEphKCkge1xuICAgICAgICAvLyBUT0RPKGIvMzQ4NzExMzEpOiBSZW1vdmUgbnVsbCBjaGVjayBvbmNlIHdlIGhhdmUgcHJvcGVyIHBhdGhzIGZvciBmaWVsZHNcbiAgICAgICAgLy8gd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKHRoaXMucGF0aCkgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLnBhdGgubGVuZ3RoOyB0KyspIHRoaXMuZWModGhpcy5wYXRoLmdldCh0KSk7XG4gICAgfVxuICAgIGVjKHQpIHtcbiAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSB0aHJvdyB0aGlzLmljKFwiRG9jdW1lbnQgZmllbGRzIG11c3Qgbm90IGJlIGVtcHR5XCIpO1xuICAgICAgICBpZiAoemModGhpcy5ZYSkgJiYgUWMudGVzdCh0KSkgdGhyb3cgdGhpcy5pYygnRG9jdW1lbnQgZmllbGRzIGNhbm5vdCBiZWdpbiBhbmQgZW5kIHdpdGggXCJfX1wiJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciBmb3IgcGFyc2luZyByYXcgdXNlciBpbnB1dCAocHJvdmlkZWQgdmlhIHRoZSBBUEkpIGludG8gaW50ZXJuYWwgbW9kZWxcbiAqIGNsYXNzZXMuXG4gKi8gY2xhc3MgSmMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUlkID0gdCwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID0gZSwgdGhpcy5NID0gbiB8fCBHbyh0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdG9wLWxldmVsIHBhcnNlIGNvbnRleHQuICovICAgIHVjKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgICAgICByZXR1cm4gbmV3IEhjKHtcbiAgICAgICAgICAgIFlhOiB0LFxuICAgICAgICAgICAgbWV0aG9kTmFtZTogZSxcbiAgICAgICAgICAgIG9jOiBuLFxuICAgICAgICAgICAgcGF0aDogbXQuZW1wdHlQYXRoKCksXG4gICAgICAgICAgICB0YzogITEsXG4gICAgICAgICAgICByYzogc1xuICAgICAgICB9LCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuTSwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFljKHQpIHtcbiAgICBjb25zdCBlID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgbiA9IEdvKHQuX2RhdGFiYXNlSWQpO1xuICAgIHJldHVybiBuZXcgSmModC5fZGF0YWJhc2VJZCwgISFlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMsIG4pO1xufVxuXG4vKiogUGFyc2UgZG9jdW1lbnQgZGF0YSBmcm9tIGEgc2V0KCkgY2FsbC4gKi8gZnVuY3Rpb24gWGModCwgZSwgbiwgcywgaSwgciA9IHt9KSB7XG4gICAgY29uc3QgbyA9IHQudWMoci5tZXJnZSB8fCByLm1lcmdlRmllbGRzID8gMiAvKiBNZXJnZVNldCAqLyA6IDAgLyogU2V0ICovICwgZSwgbiwgaSk7XG4gICAgbGgoXCJEYXRhIG11c3QgYmUgYW4gb2JqZWN0LCBidXQgaXQgd2FzOlwiLCBvLCBzKTtcbiAgICBjb25zdCB1ID0gY2gocywgbyk7XG4gICAgbGV0IGEsIGM7XG4gICAgaWYgKHIubWVyZ2UpIGEgPSBuZXcgZ3Qoby5maWVsZE1hc2spLCBjID0gby5maWVsZFRyYW5zZm9ybXM7IGVsc2UgaWYgKHIubWVyZ2VGaWVsZHMpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygci5tZXJnZUZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IGZoKGUsIHMsIG4pO1xuICAgICAgICAgICAgaWYgKCFvLmNvbnRhaW5zKGkpKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBGaWVsZCAnJHtpfScgaXMgc3BlY2lmaWVkIGluIHlvdXIgZmllbGQgbWFzayBidXQgbWlzc2luZyBmcm9tIHlvdXIgaW5wdXQgZGF0YS5gKTtcbiAgICAgICAgICAgIG1oKHQsIGkpIHx8IHQucHVzaChpKTtcbiAgICAgICAgfVxuICAgICAgICBhID0gbmV3IGd0KHQpLCBjID0gby5maWVsZFRyYW5zZm9ybXMuZmlsdGVyKCh0ID0+IGEuY292ZXJzKHQuZmllbGQpKSk7XG4gICAgfSBlbHNlIGEgPSBudWxsLCBjID0gby5maWVsZFRyYW5zZm9ybXM7XG4gICAgcmV0dXJuIG5ldyBqYyhuZXcgWHQodSksIGEsIGMpO1xufVxuXG5jbGFzcyBaYyBleHRlbmRzIEdjIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGlmICgyIC8qIE1lcmdlU2V0ICovICE9PSB0LllhKSB0aHJvdyAxIC8qIFVwZGF0ZSAqLyA9PT0gdC5ZYSA/IHQuaWMoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBhcHBlYXIgYXQgdGhlIHRvcCBsZXZlbCBvZiB5b3VyIHVwZGF0ZSBkYXRhYCkgOiB0LmljKGAke3RoaXMuX21ldGhvZE5hbWV9KCkgY2Fubm90IGJlIHVzZWQgd2l0aCBzZXQoKSB1bmxlc3MgeW91IHBhc3Mge21lcmdlOnRydWV9YCk7XG4gICAgICAgIC8vIE5vIHRyYW5zZm9ybSB0byBhZGQgZm9yIGEgZGVsZXRlLCBidXQgd2UgbmVlZCB0byBhZGQgaXQgdG8gb3VyXG4gICAgICAgIC8vIGZpZWxkTWFzayBzbyBpdCBnZXRzIGRlbGV0ZWQuXG4gICAgICAgIHJldHVybiB0LmZpZWxkTWFzay5wdXNoKHQucGF0aCksIG51bGw7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFpjO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgY2hpbGQgY29udGV4dCBmb3IgcGFyc2luZyBTZXJpYWxpemFibGVGaWVsZFZhbHVlcy5cbiAqXG4gKiBUaGlzIGlzIGRpZmZlcmVudCB0aGFuIGNhbGxpbmcgYFBhcnNlQ29udGV4dC5jb250ZXh0V2l0aGAgYmVjYXVzZSBpdCBrZWVwc1xuICogdGhlIGZpZWxkVHJhbnNmb3JtcyBhbmQgZmllbGRNYXNrIHNlcGFyYXRlLlxuICpcbiAqIFRoZSBjcmVhdGVkIGNvbnRleHQgaGFzIGl0cyBgZGF0YVNvdXJjZWAgc2V0IHRvIGBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudGAuXG4gKiBBbHRob3VnaCB0aGVzZSB2YWx1ZXMgYXJlIHVzZWQgd2l0aCB3cml0ZXMsIGFueSBlbGVtZW50cyBpbiB0aGVzZSBGaWVsZFZhbHVlc1xuICogYXJlIG5vdCBjb25zaWRlcmVkIHdyaXRlcyBzaW5jZSB0aGV5IGNhbm5vdCBjb250YWluIGFueSBGaWVsZFZhbHVlIHNlbnRpbmVscyxcbiAqIGV0Yy5cbiAqXG4gKiBAcGFyYW0gZmllbGRWYWx1ZSAtIFRoZSBzZW50aW5lbCBGaWVsZFZhbHVlIGZvciB3aGljaCB0byBjcmVhdGUgYSBjaGlsZFxuICogICAgIGNvbnRleHQuXG4gKiBAcGFyYW0gY29udGV4dCAtIFRoZSBwYXJlbnQgY29udGV4dC5cbiAqIEBwYXJhbSBhcnJheUVsZW1lbnQgLSBXaGV0aGVyIG9yIG5vdCB0aGUgRmllbGRWYWx1ZSBoYXMgYW4gYXJyYXkuXG4gKi8gZnVuY3Rpb24gdGgodCwgZSwgbikge1xuICAgIHJldHVybiBuZXcgSGMoe1xuICAgICAgICBZYTogMyAvKiBBcmd1bWVudCAqLyAsXG4gICAgICAgIG9jOiBlLnNldHRpbmdzLm9jLFxuICAgICAgICBtZXRob2ROYW1lOiB0Ll9tZXRob2ROYW1lLFxuICAgICAgICB0YzogblxuICAgIH0sIGUuZGF0YWJhc2VJZCwgZS5NLCBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xufVxuXG5jbGFzcyBlaCBleHRlbmRzIEdjIHtcbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgbG4odC5wYXRoLCBuZXcgbm4pO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBlaDtcbiAgICB9XG59XG5cbmNsYXNzIG5oIGV4dGVuZHMgR2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuYWMgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aCh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLmFjLm1hcCgodCA9PiBhaCh0LCBlKSkpLCBzID0gbmV3IHNuKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGxuKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIHNoIGV4dGVuZHMgR2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuYWMgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aCh0aGlzLCB0LCBcbiAgICAgICAgLyphcnJheT0qLyAhMCksIG4gPSB0aGlzLmFjLm1hcCgodCA9PiBhaCh0LCBlKSkpLCBzID0gbmV3IG9uKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGxuKHQucGF0aCwgcyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbmNsYXNzIGloIGV4dGVuZHMgR2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuY2MgPSBlO1xuICAgIH1cbiAgICBfdG9GaWVsZFRyYW5zZm9ybSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgYW4odC5NLCBZZSh0Lk0sIHRoaXMuY2MpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBsbih0LnBhdGgsIGUpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBJbXBsZW1lbnQgaXNFcXVhbHNcbiAgICAgICAgcmV0dXJuIHRoaXMgPT09IHQ7XG4gICAgfVxufVxuXG4vKiogUGFyc2UgdXBkYXRlIGRhdGEgZnJvbSBhbiB1cGRhdGUoKSBjYWxsLiAqLyBmdW5jdGlvbiByaCh0LCBlLCBuLCBzKSB7XG4gICAgY29uc3QgaSA9IHQudWMoMSAvKiBVcGRhdGUgKi8gLCBlLCBuKTtcbiAgICBsaChcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIGksIHMpO1xuICAgIGNvbnN0IHIgPSBbXSwgbyA9IFh0LmVtcHR5KCk7XG4gICAgbHQocywgKCh0LCBzKSA9PiB7XG4gICAgICAgIGNvbnN0IHUgPSBfaChlLCB0LCBuKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIHMgPSBnZXRNb2R1bGFySW5zdGFuY2Uocyk7XG4gICAgICAgIGNvbnN0IGEgPSBpLm5jKHUpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFpjKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIHIucHVzaCh1KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYWgocywgYSk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKHIucHVzaCh1KSwgby5zZXQodSwgdCkpO1xuICAgICAgICB9XG4gICAgfSkpO1xuICAgIGNvbnN0IHUgPSBuZXcgZ3Qocik7XG4gICAgcmV0dXJuIG5ldyBXYyhvLCB1LCBpLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGEgbGlzdCBvZiBmaWVsZC92YWx1ZSBhcmd1bWVudHMuICovIGZ1bmN0aW9uIG9oKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICBjb25zdCBvID0gdC51YygxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pLCB1ID0gWyBmaChlLCBzLCBuKSBdLCBhID0gWyBpIF07XG4gICAgaWYgKHIubGVuZ3RoICUgMiAhPSAwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke2V9KCkgbmVlZHMgdG8gYmUgY2FsbGVkIHdpdGggYW4gZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzIHRoYXQgYWx0ZXJuYXRlIGJldHdlZW4gZmllbGQgbmFtZXMgYW5kIHZhbHVlcy5gKTtcbiAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHIubGVuZ3RoOyB0ICs9IDIpIHUucHVzaChmaChlLCByW3RdKSksIGEucHVzaChyW3QgKyAxXSk7XG4gICAgY29uc3QgYyA9IFtdLCBoID0gWHQuZW1wdHkoKTtcbiAgICAvLyBXZSBpdGVyYXRlIGluIHJldmVyc2Ugb3JkZXIgdG8gcGljayB0aGUgbGFzdCB2YWx1ZSBmb3IgYSBmaWVsZCBpZiB0aGVcbiAgICAvLyB1c2VyIHNwZWNpZmllZCB0aGUgZmllbGQgbXVsdGlwbGUgdGltZXMuXG4gICAgZm9yIChsZXQgdCA9IHUubGVuZ3RoIC0gMTsgdCA+PSAwOyAtLXQpIGlmICghbWgoYywgdVt0XSkpIHtcbiAgICAgICAgY29uc3QgZSA9IHVbdF07XG4gICAgICAgIGxldCBuID0gYVt0XTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIG4gPSBnZXRNb2R1bGFySW5zdGFuY2Uobik7XG4gICAgICAgIGNvbnN0IHMgPSBvLm5jKGUpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIFpjKSBcbiAgICAgICAgLy8gQWRkIGl0IHRvIHRoZSBmaWVsZCBtYXNrLCBidXQgZG9uJ3QgYWRkIGFueXRoaW5nIHRvIHVwZGF0ZURhdGEuXG4gICAgICAgIGMucHVzaChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gYWgobiwgcyk7XG4gICAgICAgICAgICBudWxsICE9IHQgJiYgKGMucHVzaChlKSwgaC5zZXQoZSwgdCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGwgPSBuZXcgZ3QoYyk7XG4gICAgcmV0dXJuIG5ldyBXYyhoLCBsLCBvLmZpZWxkVHJhbnNmb3Jtcyk7XG59XG5cbi8qKlxuICogUGFyc2UgYSBcInF1ZXJ5IHZhbHVlXCIgKGUuZy4gdmFsdWUgaW4gYSB3aGVyZSBmaWx0ZXIgb3IgYSB2YWx1ZSBpbiBhIGN1cnNvclxuICogYm91bmQpLlxuICpcbiAqIEBwYXJhbSBhbGxvd0FycmF5cyAtIFdoZXRoZXIgdGhlIHF1ZXJ5IHZhbHVlIGlzIGFuIGFycmF5IHRoYXQgbWF5IGRpcmVjdGx5XG4gKiBjb250YWluIGFkZGl0aW9uYWwgYXJyYXlzIChlLmcuIHRoZSBvcGVyYW5kIG9mIGFuIGBpbmAgcXVlcnkpLlxuICovIGZ1bmN0aW9uIHVoKHQsIGUsIG4sIHMgPSAhMSkge1xuICAgIHJldHVybiBhaChuLCB0LnVjKHMgPyA0IC8qIEFycmF5QXJndW1lbnQgKi8gOiAzIC8qIEFyZ3VtZW50ICovICwgZSkpO1xufVxuXG4vKipcbiAqIFBhcnNlcyB1c2VyIGRhdGEgdG8gUHJvdG9idWYgVmFsdWVzLlxuICpcbiAqIEBwYXJhbSBpbnB1dCAtIERhdGEgdG8gYmUgcGFyc2VkLlxuICogQHBhcmFtIGNvbnRleHQgLSBBIGNvbnRleHQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBwYXRoIGJlaW5nIHBhcnNlZCxcbiAqIHRoZSBzb3VyY2Ugb2YgdGhlIGRhdGEgYmVpbmcgcGFyc2VkLCBldGMuXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlLCBvciBudWxsIGlmIHRoZSB2YWx1ZSB3YXMgYSBGaWVsZFZhbHVlIHNlbnRpbmVsXG4gKiB0aGF0IHNob3VsZCBub3QgYmUgaW5jbHVkZWQgaW4gdGhlIHJlc3VsdGluZyBwYXJzZWQgZGF0YS5cbiAqLyBmdW5jdGlvbiBhaCh0LCBlKSB7XG4gICAgaWYgKGhoKFxuICAgIC8vIFVud3JhcCB0aGUgQVBJIHR5cGUgZnJvbSB0aGUgQ29tcGF0IFNESy4gVGhpcyB3aWxsIHJldHVybiB0aGUgQVBJIHR5cGVcbiAgICAvLyBmcm9tIGZpcmVzdG9yZS1leHAuXG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiBsaChcIlVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOlwiLCBlLCB0KSwgY2godCwgZSk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBHYykgXG4gICAgLy8gRmllbGRWYWx1ZXMgdXN1YWxseSBwYXJzZSBpbnRvIHRyYW5zZm9ybXMgKGV4Y2VwdCBkZWxldGVGaWVsZCgpKVxuICAgIC8vIGluIHdoaWNoIGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gaW5jbHVkZSB0aGlzIGZpZWxkIGluIG91ciBwYXJzZWQgZGF0YVxuICAgIC8vIChhcyBkb2luZyBzbyB3aWxsIG92ZXJ3cml0ZSB0aGUgZmllbGQgZGlyZWN0bHkgcHJpb3IgdG8gdGhlIHRyYW5zZm9ybVxuICAgIC8vIHRyeWluZyB0byB0cmFuc2Zvcm0gaXQpLiBTbyB3ZSBkb24ndCBhZGQgdGhpcyBsb2NhdGlvbiB0b1xuICAgIC8vIGNvbnRleHQuZmllbGRNYXNrIGFuZCB3ZSByZXR1cm4gbnVsbCBhcyBvdXIgcGFyc2luZyByZXN1bHQuXG4gICAgLyoqXG4gKiBcIlBhcnNlc1wiIHRoZSBwcm92aWRlZCBGaWVsZFZhbHVlSW1wbCwgYWRkaW5nIGFueSBuZWNlc3NhcnkgdHJhbnNmb3JtcyB0b1xuICogY29udGV4dC5maWVsZFRyYW5zZm9ybXMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBTZW50aW5lbHMgYXJlIG9ubHkgc3VwcG9ydGVkIHdpdGggd3JpdGVzLCBhbmQgbm90IHdpdGhpbiBhcnJheXMuXG4gICAgICAgIGlmICghemMoZS5ZYSkpIHRocm93IGUuaWMoYCR7dC5fbWV0aG9kTmFtZX0oKSBjYW4gb25seSBiZSB1c2VkIHdpdGggdXBkYXRlKCkgYW5kIHNldCgpYCk7XG4gICAgICAgIGlmICghZS5wYXRoKSB0aHJvdyBlLmljKGAke3QuX21ldGhvZE5hbWV9KCkgaXMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgaW5zaWRlIGFycmF5c2ApO1xuICAgICAgICBjb25zdCBuID0gdC5fdG9GaWVsZFRyYW5zZm9ybShlKTtcbiAgICAgICAgbiAmJiBlLmZpZWxkVHJhbnNmb3Jtcy5wdXNoKG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEhlbHBlciB0byBwYXJzZSBhIHNjYWxhciB2YWx1ZSAoaS5lLiBub3QgYW4gT2JqZWN0LCBBcnJheSwgb3IgRmllbGRWYWx1ZSlcbiAqXG4gKiBAcmV0dXJucyBUaGUgcGFyc2VkIHZhbHVlXG4gKi8gKHQsIGUpLCBudWxsO1xuICAgIGlmICh2b2lkIDAgPT09IHQgJiYgZS5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzKSBcbiAgICAvLyBJZiB0aGUgaW5wdXQgaXMgdW5kZWZpbmVkIGl0IGNhbiBuZXZlciBwYXJ0aWNpcGF0ZSBpbiB0aGUgZmllbGRNYXNrLCBzb1xuICAgIC8vIGRvbid0IGhhbmRsZSB0aGlzIGJlbG93LiBJZiBgaWdub3JlVW5kZWZpbmVkUHJvcGVydGllc2AgaXMgZmFsc2UsXG4gICAgLy8gYHBhcnNlU2NhbGFyVmFsdWVgIHdpbGwgcmVqZWN0IGFuIHVuZGVmaW5lZCB2YWx1ZS5cbiAgICByZXR1cm4gbnVsbDtcbiAgICBpZiAoXG4gICAgLy8gSWYgY29udGV4dC5wYXRoIGlzIG51bGwgd2UgYXJlIGluc2lkZSBhbiBhcnJheSBhbmQgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgIC8vIGZpZWxkIG1hc2sgcGF0aHMgbW9yZSBncmFudWxhciB0aGFuIHRoZSB0b3AtbGV2ZWwgYXJyYXkuXG4gICAgZS5wYXRoICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSwgdCBpbnN0YW5jZW9mIEFycmF5KSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IEluY2x1ZGUgdGhlIHBhdGggY29udGFpbmluZyB0aGUgYXJyYXkgaW4gdGhlIGVycm9yXG4gICAgICAgIC8vIG1lc3NhZ2UuXG4gICAgICAgIC8vIEluIHRoZSBjYXNlIG9mIElOIHF1ZXJpZXMsIHRoZSBwYXJzZWQgZGF0YSBpcyBhbiBhcnJheSAocmVwcmVzZW50aW5nXG4gICAgICAgIC8vIHRoZSBzZXQgb2YgdmFsdWVzIHRvIGJlIGluY2x1ZGVkIGZvciB0aGUgSU4gcXVlcnkpIHRoYXQgbWF5IGRpcmVjdGx5XG4gICAgICAgIC8vIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGVhY2ggcmVwcmVzZW50aW5nIGFuIGluZGl2aWR1YWwgZmllbGRcbiAgICAgICAgLy8gdmFsdWUpLCBzbyB3ZSBkaXNhYmxlIHRoaXMgdmFsaWRhdGlvbi5cbiAgICAgICAgaWYgKGUuc2V0dGluZ3MudGMgJiYgNCAvKiBBcnJheUFyZ3VtZW50ICovICE9PSBlLllhKSB0aHJvdyBlLmljKFwiTmVzdGVkIGFycmF5cyBhcmUgbm90IHN1cHBvcnRlZFwiKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBhaChpLCBlLnNjKHMpKTtcbiAgICAgICAgICAgICAgICBudWxsID09IHQgJiYgKFxuICAgICAgICAgICAgICAgIC8vIEp1c3QgaW5jbHVkZSBudWxscyBpbiB0aGUgYXJyYXkgZm9yIGZpZWxkcyBiZWluZyByZXBsYWNlZCB3aXRoIGFcbiAgICAgICAgICAgICAgICAvLyBzZW50aW5lbC5cbiAgICAgICAgICAgICAgICB0ID0ge1xuICAgICAgICAgICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgICAgICAgICAgfSksIG4ucHVzaCh0KSwgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlczogblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09PSAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSkpIHJldHVybiB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChcIm51bWJlclwiID09IHR5cGVvZiB0KSByZXR1cm4gWWUoZS5NLCB0KTtcbiAgICAgICAgaWYgKFwiYm9vbGVhblwiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgYm9vbGVhblZhbHVlOiB0XG4gICAgICAgIH07XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4ge1xuICAgICAgICAgICAgc3RyaW5nVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gYXQuZnJvbURhdGUodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBjcyhlLk0sIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgYXQpIHtcbiAgICAgICAgICAgIC8vIEZpcmVzdG9yZSBiYWNrZW5kIHRydW5jYXRlcyBwcmVjaXNpb24gZG93biB0byBtaWNyb3NlY29uZHMuIFRvIGVuc3VyZVxuICAgICAgICAgICAgLy8gb2ZmbGluZSBtb2RlIHdvcmtzIHRoZSBzYW1lIHdpdGggcmVnYXJkcyB0byB0cnVuY2F0aW9uLCBwZXJmb3JtIHRoZVxuICAgICAgICAgICAgLy8gdHJ1bmNhdGlvbiBpbW1lZGlhdGVseSB3aXRob3V0IHdhaXRpbmcgZm9yIHRoZSBiYWNrZW5kIHRvIGRvIHRoYXQuXG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IGF0KHQuc2Vjb25kcywgMWUzICogTWF0aC5mbG9vcih0Lm5hbm9zZWNvbmRzIC8gMWUzKSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiBjcyhlLk0sIG4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgS2MpIHJldHVybiB7XG4gICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgbGF0aXR1ZGU6IHQubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiB0LmxvbmdpdHVkZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIHFjKSByZXR1cm4ge1xuICAgICAgICAgICAgYnl0ZXNWYWx1ZTogaHMoZS5NLCB0Ll9ieXRlU3RyaW5nKVxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGZjKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5kYXRhYmFzZUlkLCBzID0gdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQ7XG4gICAgICAgICAgICBpZiAoIXMuaXNFcXVhbChuKSkgdGhyb3cgZS5pYyhgRG9jdW1lbnQgcmVmZXJlbmNlIGlzIGZvciBkYXRhYmFzZSAke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9IGJ1dCBzaG91bGQgYmUgZm9yIGRhdGFiYXNlICR7bi5wcm9qZWN0SWR9LyR7bi5kYXRhYmFzZX1gKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGRzKHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkIHx8IGUuZGF0YWJhc2VJZCwgdC5fa2V5LnBhdGgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHRocm93IGUuaWMoYFVuc3VwcG9ydGVkIGZpZWxkIHZhbHVlOiAke29jKHQpfWApO1xuICAgIH1cbiAgICAvKipcbiAqIENoZWNrcyB3aGV0aGVyIGFuIG9iamVjdCBsb29rcyBsaWtlIGEgSlNPTiBvYmplY3QgdGhhdCBzaG91bGQgYmUgY29udmVydGVkXG4gKiBpbnRvIGEgc3RydWN0LiBOb3JtYWwgY2xhc3MvcHJvdG90eXBlIGluc3RhbmNlcyBhcmUgY29uc2lkZXJlZCB0byBsb29rIGxpa2VcbiAqIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gYSBzdHJ1Y3QgdmFsdWUuIEFycmF5cywgRGF0ZXMsXG4gKiBHZW9Qb2ludHMsIGV0Yy4gYXJlIG5vdCBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZSBKU09OIG9iamVjdHMgc2luY2UgdGhleSBtYXBcbiAqIHRvIHNwZWNpZmljIEZpZWxkVmFsdWUgdHlwZXMgb3RoZXIgdGhhbiBPYmplY3RWYWx1ZS5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIGNoKHQsIGUpIHtcbiAgICBjb25zdCBuID0ge307XG4gICAgcmV0dXJuIGZ0KHQpID8gXG4gICAgLy8gSWYgd2UgZW5jb3VudGVyIGFuIGVtcHR5IG9iamVjdCwgd2UgZXhwbGljaXRseSBhZGQgaXQgdG8gdGhlIHVwZGF0ZVxuICAgIC8vIG1hc2sgdG8gZW5zdXJlIHRoYXQgdGhlIHNlcnZlciBjcmVhdGVzIGEgbWFwIGVudHJ5LlxuICAgIGUucGF0aCAmJiBlLnBhdGgubGVuZ3RoID4gMCAmJiBlLmZpZWxkTWFzay5wdXNoKGUucGF0aCkgOiBsdCh0LCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgaSA9IGFoKHMsIGUuWmEodCkpO1xuICAgICAgICBudWxsICE9IGkgJiYgKG5bdF0gPSBpKTtcbiAgICB9KSksIHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogblxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gaGgodCkge1xuICAgIHJldHVybiAhKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCB8fCB0IGluc3RhbmNlb2YgQXJyYXkgfHwgdCBpbnN0YW5jZW9mIERhdGUgfHwgdCBpbnN0YW5jZW9mIGF0IHx8IHQgaW5zdGFuY2VvZiBLYyB8fCB0IGluc3RhbmNlb2YgcWMgfHwgdCBpbnN0YW5jZW9mIGZjIHx8IHQgaW5zdGFuY2VvZiBHYyk7XG59XG5cbmZ1bmN0aW9uIGxoKHQsIGUsIG4pIHtcbiAgICBpZiAoIWhoKG4pIHx8ICFmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBcIm9iamVjdFwiID09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQgJiYgKE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSA9PT0gT2JqZWN0LnByb3RvdHlwZSB8fCBudWxsID09PSBPYmplY3QuZ2V0UHJvdG90eXBlT2YodCkpO1xuICAgIH0obikpIHtcbiAgICAgICAgY29uc3QgcyA9IG9jKG4pO1xuICAgICAgICB0aHJvdyBcImFuIG9iamVjdFwiID09PSBzID8gZS5pYyh0ICsgXCIgYSBjdXN0b20gb2JqZWN0XCIpIDogZS5pYyh0ICsgXCIgXCIgKyBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpIGJ1dCB3cmFwcyBhbnkgZXJyb3IgdGhyb3duLlxuICovIGZ1bmN0aW9uIGZoKHQsIGUsIG4pIHtcbiAgICBpZiAoKFxuICAgIC8vIElmIHJlcXVpcmVkLCByZXBsYWNlIHRoZSBGaWVsZFBhdGggQ29tcGF0IGNsYXNzIHdpdGggd2l0aCB0aGUgZmlyZXN0b3JlLWV4cFxuICAgIC8vIEZpZWxkUGF0aC5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSBpbnN0YW5jZW9mIExjKSByZXR1cm4gZS5faW50ZXJuYWxQYXRoO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBlKSByZXR1cm4gX2godCwgZSk7XG4gICAgdGhyb3cgd2goXCJGaWVsZCBwYXRoIGFyZ3VtZW50cyBtdXN0IGJlIG9mIHR5cGUgc3RyaW5nIG9yIFwiLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xufVxuXG4vKipcbiAqIE1hdGNoZXMgYW55IGNoYXJhY3RlcnMgaW4gYSBmaWVsZCBwYXRoIHN0cmluZyB0aGF0IGFyZSByZXNlcnZlZC5cbiAqLyBjb25zdCBkaCA9IG5ldyBSZWdFeHAoXCJbflxcXFwqL1xcXFxbXFxcXF1dXCIpO1xuXG4vKipcbiAqIFdyYXBzIGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcgd2l0aCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IHRoZSBtZXRob2QgdGhhdFxuICogd2FzIHRocm93bi5cbiAqIEBwYXJhbSBtZXRob2ROYW1lIC0gVGhlIHB1YmxpY2x5IHZpc2libGUgbWV0aG9kIG5hbWVcbiAqIEBwYXJhbSBwYXRoIC0gVGhlIGRvdC1zZXBhcmF0ZWQgc3RyaW5nIGZvcm0gb2YgYSBmaWVsZCBwYXRoIHdoaWNoIHdpbGwgYmVcbiAqIHNwbGl0IG9uIGRvdHMuXG4gKiBAcGFyYW0gdGFyZ2V0RG9jIC0gVGhlIGRvY3VtZW50IGFnYWluc3Qgd2hpY2ggdGhlIGZpZWxkIHBhdGggd2lsbCBiZVxuICogZXZhbHVhdGVkLlxuICovIGZ1bmN0aW9uIF9oKHQsIGUsIG4pIHtcbiAgICBpZiAoZS5zZWFyY2goZGgpID49IDApIHRocm93IHdoKGBJbnZhbGlkIGZpZWxkIHBhdGggKCR7ZX0pLiBQYXRocyBtdXN0IG5vdCBjb250YWluICd+JywgJyonLCAnLycsICdbJywgb3IgJ10nYCwgdCwgXG4gICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gbmV3IExjKC4uLmUuc3BsaXQoXCIuXCIpKS5faW50ZXJuYWxQYXRoO1xuICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgdGhyb3cgd2goYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGJlIGVtcHR5LCBiZWdpbiB3aXRoICcuJywgZW5kIHdpdGggJy4nLCBvciBjb250YWluICcuLidgLCB0LCBcbiAgICAgICAgLyogaGFzQ29udmVydGVyPSAqLyAhMSwgXG4gICAgICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3aCh0LCBlLCBuLCBzLCBpKSB7XG4gICAgY29uc3QgciA9IHMgJiYgIXMuaXNFbXB0eSgpLCBvID0gdm9pZCAwICE9PSBpO1xuICAgIGxldCB1ID0gYEZ1bmN0aW9uICR7ZX0oKSBjYWxsZWQgd2l0aCBpbnZhbGlkIGRhdGFgO1xuICAgIG4gJiYgKHUgKz0gXCIgKHZpYSBgdG9GaXJlc3RvcmUoKWApXCIpLCB1ICs9IFwiLiBcIjtcbiAgICBsZXQgYSA9IFwiXCI7XG4gICAgcmV0dXJuIChyIHx8IG8pICYmIChhICs9IFwiIChmb3VuZFwiLCByICYmIChhICs9IGAgaW4gZmllbGQgJHtzfWApLCBvICYmIChhICs9IGAgaW4gZG9jdW1lbnQgJHtpfWApLCBcbiAgICBhICs9IFwiKVwiKSwgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCB1ICsgdCArIGEpO1xufVxuXG4vKiogQ2hlY2tzIGBoYXlzdGFja2AgaWYgRmllbGRQYXRoIGBuZWVkbGVgIGlzIHByZXNlbnQuIFJ1bnMgaW4gTyhuKS4gKi8gZnVuY3Rpb24gbWgodCwgZSkge1xuICAgIHJldHVybiB0LnNvbWUoKHQgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3MgZ2gge1xuICAgIC8vIE5vdGU6IFRoaXMgY2xhc3MgaXMgc3RyaXBwZWQgZG93biB2ZXJzaW9uIG9mIHRoZSBEb2N1bWVudFNuYXBzaG90IGluXG4gICAgLy8gdGhlIGxlZ2FjeSBTREsuIFRoZSBjaGFuZ2VzIGFyZTpcbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90TWV0YWRhdGEuXG4gICAgLy8gLSBObyBzdXBwb3J0IGZvciBTbmFwc2hvdE9wdGlvbnMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX2tleSA9IG4sIHRoaXMuX2RvY3VtZW50ID0gcywgXG4gICAgICAgIHRoaXMuX2NvbnZlcnRlciA9IGk7XG4gICAgfVxuICAgIC8qKiBQcm9wZXJ0eSBvZiB0aGUgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcHJvdmlkZXMgdGhlIGRvY3VtZW50J3MgSUQuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBgRG9jdW1lbnRSZWZlcmVuY2VgIGZvciB0aGUgZG9jdW1lbnQgaW5jbHVkZWQgaW4gdGhlIGBEb2N1bWVudFNuYXBzaG90YC5cbiAgICAgKi8gICAgZ2V0IHJlZigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBmYyh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2NvbnZlcnRlciwgdGhpcy5fa2V5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2lnbmFscyB3aGV0aGVyIG9yIG5vdCB0aGUgZG9jdW1lbnQgYXQgdGhlIHNuYXBzaG90J3MgbG9jYXRpb24gZXhpc3RzLlxuICAgICAqXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0aGlzLl9kb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgXG4gICAgICogaWYgdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEoKSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbmV3IHloKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQocGgoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSkgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIHloIGV4dGVuZHMgZ2gge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRoYXQgY2FsbHMgYGZyb21Eb3RTZXBhcmF0ZWRTdHJpbmcoKWAgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gcGgodCwgZSkge1xuICAgIHJldHVybiBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gX2godCwgZSkgOiBlIGluc3RhbmNlb2YgTGMgPyBlLl9pbnRlcm5hbFBhdGggOiBlLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBNZXRhZGF0YSBhYm91dCBhIHNuYXBzaG90LCBkZXNjcmliaW5nIHRoZSBzdGF0ZSBvZiB0aGUgc25hcHNob3QuXG4gKi8gY2xhc3MgSWgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPSB0LCB0aGlzLmZyb21DYWNoZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBTbmFwc2hvdE1ldGFkYXRhYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBTbmFwc2hvdE1ldGFkYXRhYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9PT0gdC5oYXNQZW5kaW5nV3JpdGVzICYmIHRoaXMuZnJvbUNhY2hlID09PSB0LmZyb21DYWNoZTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBUaCBleHRlbmRzIGdoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMsIHIpLCB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9maXJlc3RvcmVJbXBsID0gdCwgdGhpcy5tZXRhZGF0YSA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciBvciBub3QgdGhlIGRhdGEgZXhpc3RzLiBUcnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmV4aXN0cygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRWgodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgdGhpcy5tZXRhZGF0YSwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUoZSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUsIHQuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIHRoZSBmaWVsZCBzcGVjaWZpZWQgYnkgYGZpZWxkUGF0aGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWYgdGhlXG4gICAgICogZG9jdW1lbnQgb3IgZmllbGQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGEgYHNlcnZlclRpbWVzdGFtcCgpYCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gc2V0IHRvXG4gICAgICogaXRzIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlIHRoaXMgYnlcbiAgICAgKiBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIChmb3IgZXhhbXBsZSAnZm9vJyBvciAnZm9vLmJhcicpIHRvIGEgc3BlY2lmaWNcbiAgICAgKiBmaWVsZC5cbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgdGhlIGZpZWxkIGlzIHJldHJpZXZlZFxuICAgICAqIGZyb20gdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgVGhlIGRhdGEgYXQgdGhlIHNwZWNpZmllZCBmaWVsZCBsb2NhdGlvbiBvciB1bmRlZmluZWQgaWYgbm8gc3VjaFxuICAgICAqIGZpZWxkIGV4aXN0cyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgLy8gV2UgYXJlIHVzaW5nIGBhbnlgIGhlcmUgdG8gYXZvaWQgYW4gZXhwbGljaXQgY2FzdCBieSBvdXIgdXNlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBnZXQodCwgZSA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuX2RvY3VtZW50LmRhdGEuZmllbGQocGgoXCJEb2N1bWVudFNuYXBzaG90LmdldFwiLCB0KSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbikgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZShuLCBlLnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgRWggZXh0ZW5kcyBUaCB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlTbmFwc2hvdGAgY29udGFpbnMgemVybyBvciBtb3JlIGBEb2N1bWVudFNuYXBzaG90YCBvYmplY3RzXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdHMgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50cyBjYW4gYmUgYWNjZXNzZWQgYXMgYW5cbiAqIGFycmF5IHZpYSB0aGUgYGRvY3NgIHByb3BlcnR5IG9yIGVudW1lcmF0ZWQgdXNpbmcgdGhlIGBmb3JFYWNoYCBtZXRob2QuIFRoZVxuICogbnVtYmVyIG9mIGRvY3VtZW50cyBjYW4gYmUgZGV0ZXJtaW5lZCB2aWEgdGhlIGBlbXB0eWAgYW5kIGBzaXplYFxuICogcHJvcGVydGllcy5cbiAqLyBjbGFzcyBBaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fc25hcHNob3QgPSBzLCB0aGlzLm1ldGFkYXRhID0gbmV3IEloKHMuaGFzUGVuZGluZ1dyaXRlcywgcy5mcm9tQ2FjaGUpLCBcbiAgICAgICAgdGhpcy5xdWVyeSA9IG47XG4gICAgfVxuICAgIC8qKiBBbiBhcnJheSBvZiBhbGwgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZG9jcygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHQucHVzaChlKSkpLCB0O1xuICAgIH1cbiAgICAvKiogVGhlIG51bWJlciBvZiBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zbmFwc2hvdC5kb2NzLnNpemU7XG4gICAgfVxuICAgIC8qKiBUcnVlIGlmIHRoZXJlIGFyZSBubyBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5zaXplO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbnVtZXJhdGVzIGFsbCBvZiB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCB3aXRoIGEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgZm9yXG4gICAgICogZWFjaCBkb2N1bWVudCBpbiB0aGUgc25hcHNob3QuXG4gICAgICogQHBhcmFtIHRoaXNBcmcgLSBUaGUgYHRoaXNgIGJpbmRpbmcgZm9yIHRoZSBjYWxsYmFjay5cbiAgICAgKi8gICAgZm9yRWFjaCh0LCBlKSB7XG4gICAgICAgIHRoaXMuX3NuYXBzaG90LmRvY3MuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICB0LmNhbGwoZSwgbmV3IEVoKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIG4ua2V5LCBuLCBuZXcgSWgodGhpcy5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4ua2V5KSwgdGhpcy5fc25hcHNob3QuZnJvbUNhY2hlKSwgdGhpcy5xdWVyeS5jb252ZXJ0ZXIpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSBkb2N1bWVudHMgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCBzbmFwc2hvdC4gSWYgdGhpc1xuICAgICAqIGlzIHRoZSBmaXJzdCBzbmFwc2hvdCwgYWxsIGRvY3VtZW50cyB3aWxsIGJlIGluIHRoZSBsaXN0IGFzICdhZGRlZCdcbiAgICAgKiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCB0aGF0IGNvbnRyb2wgd2hldGhlciBtZXRhZGF0YS1vbmx5XG4gICAgICogY2hhbmdlcyAoaS5lLiBvbmx5IGBEb2N1bWVudFNuYXBzaG90Lm1ldGFkYXRhYCBjaGFuZ2VkKSBzaG91bGQgdHJpZ2dlclxuICAgICAqIHNuYXBzaG90IGV2ZW50cy5cbiAgICAgKi8gICAgZG9jQ2hhbmdlcyh0ID0ge30pIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzO1xuICAgICAgICBpZiAoZSAmJiB0aGlzLl9zbmFwc2hvdC5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcykgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRvIGluY2x1ZGUgbWV0YWRhdGEgY2hhbmdlcyB3aXRoIHlvdXIgZG9jdW1lbnQgY2hhbmdlcywgeW91IG11c3QgYWxzbyBwYXNzIHsgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczp0cnVlIH0gdG8gb25TbmFwc2hvdCgpLlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhY2hlZENoYW5nZXMgJiYgdGhpcy5fY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMgPT09IGUgfHwgKHRoaXMuX2NhY2hlZENoYW5nZXMgPSBcbiAgICAgICAgLyoqIENhbGN1bGF0ZXMgdGhlIGFycmF5IG9mIGBEb2N1bWVudENoYW5nZWBzIGZvciBhIGdpdmVuIGBWaWV3U25hcHNob3RgLiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodC5fc25hcHNob3Qub2xkRG9jcy5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuX3NuYXBzaG90LmRvY0NoYW5nZXMubWFwKChuID0+ICh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiYWRkZWRcIixcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBuZXcgRWgodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IEloKHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlciksXG4gICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiAtMSxcbiAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IGUrK1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gQSBgRG9jdW1lbnRTZXRgIHRoYXQgaXMgdXBkYXRlZCBpbmNyZW1lbnRhbGx5IGFzIGNoYW5nZXMgYXJlIGFwcGxpZWQgdG8gdXNlXG4gICAgICAgICAgICAgICAgLy8gdG8gbG9va3VwIHRoZSBpbmRleCBvZiBhIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGxldCBuID0gdC5fc25hcHNob3Qub2xkRG9jcztcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5maWx0ZXIoKHQgPT4gZSB8fCAzIC8qIE1ldGFkYXRhICovICE9PSB0LnR5cGUpKS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IEVoKHQuX2ZpcmVzdG9yZSwgdC5fdXNlckRhdGFXcml0ZXIsIGUuZG9jLmtleSwgZS5kb2MsIG5ldyBJaCh0Ll9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMoZS5kb2Mua2V5KSwgdC5fc25hcHNob3QuZnJvbUNhY2hlKSwgdC5xdWVyeS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgaSA9IC0xLCByID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAwIC8qIEFkZGVkICovICE9PSBlLnR5cGUgJiYgKGkgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBSZW1vdmVkICovICE9PSBlLnR5cGUgJiYgKG4gPSBuLmFkZChlLmRvYyksIHIgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFJoKGUudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiByXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gUmgodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIEFkZGVkICovIDpcbiAgICAgICAgcmV0dXJuIFwiYWRkZWRcIjtcblxuICAgICAgY2FzZSAyIC8qIE1vZGlmaWVkICovIDpcbiAgICAgIGNhc2UgMyAvKiBNZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgcmV0dXJuIFwicmVtb3ZlZFwiO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVleHApOiBBZGQgdGVzdHMgZm9yIHNuYXBzaG90RXF1YWwgd2l0aCBkaWZmZXJlbnQgc25hcHNob3Rcbi8vIG1ldGFkYXRhXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0gbGVmdCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgc25hcHNob3QgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHNuYXBzaG90cyBhcmUgZXF1YWwuXG4gKi8gZnVuY3Rpb24gYmgodCwgZSkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgVGggJiYgZSBpbnN0YW5jZW9mIFRoID8gdC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgdC5fa2V5LmlzRXF1YWwoZS5fa2V5KSAmJiAobnVsbCA9PT0gdC5fZG9jdW1lbnQgPyBudWxsID09PSBlLl9kb2N1bWVudCA6IHQuX2RvY3VtZW50LmlzRXF1YWwoZS5fZG9jdW1lbnQpKSAmJiB0Ll9jb252ZXJ0ZXIgPT09IGUuX2NvbnZlcnRlciA6IHQgaW5zdGFuY2VvZiBBaCAmJiBlIGluc3RhbmNlb2YgQWggJiYgKHQuX2ZpcmVzdG9yZSA9PT0gZS5fZmlyZXN0b3JlICYmIHBjKHQucXVlcnksIGUucXVlcnkpICYmIHQubWV0YWRhdGEuaXNFcXVhbChlLm1ldGFkYXRhKSAmJiB0Ll9zbmFwc2hvdC5pc0VxdWFsKGUuX3NuYXBzaG90KSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIFBoKHQpIHtcbiAgICBpZiAoTWUodCkgJiYgMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoKSB0aHJvdyBuZXcgUShLLlVOSU1QTEVNRU5URUQsIFwibGltaXRUb0xhc3QoKSBxdWVyaWVzIHJlcXVpcmUgc3BlY2lmeWluZyBhdCBsZWFzdCBvbmUgb3JkZXJCeSgpIGNsYXVzZVwiKTtcbn1cblxuLyoqXG4gKiBBIGBRdWVyeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbmFycm93IHRoZSBzZXQgb2YgZG9jdW1lbnRzIHJldHVybmVkIGJ5IGFcbiAqIEZpcmVzdG9yZSBxdWVyeS4gYFF1ZXJ5Q29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0sXG4gKiB7QGxpbmsgb3JkZXJCeX0sIHtAbGluayAoc3RhcnRBdDoxKX0sIHtAbGluayAoc3RhcnRBZnRlcjoxKX0sIHtAbGlua1xuICogZW5kQmVmb3JlOjF9LCB7QGxpbmsgKGVuZEF0OjEpfSwge0BsaW5rIGxpbWl0fSBvciB7QGxpbmsgbGltaXRUb0xhc3R9IGFuZFxuICogY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayBxdWVyeX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBWaCB7fVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaW1tdXRhYmxlIGluc3RhbmNlIG9mIHtAbGluayBRdWVyeX0gdGhhdCBpcyBleHRlbmRlZCB0byBhbHNvIGluY2x1ZGVcbiAqIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHtAbGluayBRdWVyeX0gaW5zdGFuY2UgdG8gdXNlIGFzIGEgYmFzZSBmb3IgdGhlIG5ldyBjb25zdHJhaW50cy5cbiAqIEBwYXJhbSBxdWVyeUNvbnN0cmFpbnRzIC0gVGhlIGxpc3Qgb2Yge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH1zIHRvIGFwcGx5LlxuICogQHRocm93cyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IGNvbnN0cmFpbnRzIGNhbm5vdCBiZSBjb21iaW5lZCB3aXRoIHRoZVxuICogZXhpc3Rpbmcgb3IgbmV3IGNvbnN0cmFpbnRzLlxuICovIGZ1bmN0aW9uIHZoKHQsIC4uLmUpIHtcbiAgICBmb3IgKGNvbnN0IG4gb2YgZSkgdCA9IG4uX2FwcGx5KHQpO1xuICAgIHJldHVybiB0O1xufVxuXG5jbGFzcyBTaCBleHRlbmRzIFZoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuaGMgPSB0LCB0aGlzLmxjID0gZSwgdGhpcy5mYyA9IG4sIHRoaXMudHlwZSA9IFwid2hlcmVcIjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFljKHQuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGxldCB1O1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA9PT0gciB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcikgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7cn0nIHF1ZXJpZXMgb24gZG9jdW1lbnRJZCgpLmApO1xuICAgICAgICAgICAgICAgIGlmIChcImluXCIgLyogSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgS2gobywgcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIG8pIGUucHVzaChHaChzLCB0LCBuKSk7XG4gICAgICAgICAgICAgICAgICAgIHUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHUgPSBHaChzLCB0LCBvKTtcbiAgICAgICAgICAgIH0gZWxzZSBcImluXCIgLyogSU4gKi8gIT09IHIgJiYgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gIT09IHIgJiYgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gIT09IHIgfHwgS2gobywgciksIFxuICAgICAgICAgICAgdSA9IHVoKG4sIGUsIG8sIFxuICAgICAgICAgICAgLyogYWxsb3dBcnJheXM9ICovIFwiaW5cIiAvKiBJTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gcik7XG4gICAgICAgICAgICBjb25zdCBhID0gZ2UuY3JlYXRlKGksIHIsIHUpO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5TKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEZlKHQpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbiAmJiAhbi5pc0VxdWFsKGUuZmllbGQpKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBBbGwgd2hlcmUgZmlsdGVycyB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgbXVzdCBiZSBvbiB0aGUgc2FtZSBmaWVsZC4gQnV0IHlvdSBoYXZlIGluZXF1YWxpdHkgZmlsdGVycyBvbiAnJHtuLnRvU3RyaW5nKCl9JyBhbmQgJyR7ZS5maWVsZC50b1N0cmluZygpfSdgKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IE9lKHQpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9PSBzICYmIFFoKHQsIGUuZmllbGQsIHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoZS5pbmRleE9mKG4ub3ApID49IDApIHJldHVybiBuLm9wO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9KHQsIFxuICAgICAgICAgICAgICAgIC8qKlxuICogR2l2ZW4gYW4gb3BlcmF0b3IsIHJldHVybnMgdGhlIHNldCBvZiBvcGVyYXRvcnMgdGhhdCBjYW5ub3QgYmUgdXNlZCB3aXRoIGl0LlxuICpcbiAqIE9wZXJhdG9ycyBpbiBhIHF1ZXJ5IG11c3QgYWRoZXJlIHRvIHRoZSBmb2xsb3dpbmcgc2V0IG9mIHJ1bGVzOlxuICogMS4gT25seSBvbmUgYXJyYXkgb3BlcmF0b3IgaXMgYWxsb3dlZC5cbiAqIDIuIE9ubHkgb25lIGRpc2p1bmN0aXZlIG9wZXJhdG9yIGlzIGFsbG93ZWQuXG4gKiAzLiBgTk9UX0VRVUFMYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFub3RoZXIgYE5PVF9FUVVBTGAgb3BlcmF0b3IuXG4gKiA0LiBgTk9UX0lOYCBjYW5ub3QgYmUgdXNlZCB3aXRoIGFycmF5LCBkaXNqdW5jdGl2ZSwgb3IgYE5PVF9FUVVBTGAgb3BlcmF0b3JzLlxuICpcbiAqIEFycmF5IG9wZXJhdG9yczogYEFSUkFZX0NPTlRBSU5TYCwgYEFSUkFZX0NPTlRBSU5TX0FOWWBcbiAqIERpc2p1bmN0aXZlIG9wZXJhdG9yczogYElOYCwgYEFSUkFZX0NPTlRBSU5TX0FOWWAsIGBOT1RfSU5gXG4gKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcIiE9XCIgLyogTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIElOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gXTtcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0oZS5vcCkpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSBcbiAgICAgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2Ugd2hlbiBpdCdzIGEgZHVwbGljYXRlIG9wIHRvIGdpdmUgYSBzbGlnaHRseSBjbGVhcmVyIGVycm9yIG1lc3NhZ2UuXG4gICAgICAgICAgICAgICAgdGhyb3cgbiA9PT0gZS5vcCA/IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVyLmApIDogbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgJyR7ZS5vcC50b1N0cmluZygpfScgZmlsdGVycyB3aXRoICcke24udG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG4gICAgICAgICAgICB9KHQsIGEpLCBhO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBcIndoZXJlXCIsIGUsIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0aGlzLmhjLCB0aGlzLmxjLCB0aGlzLmZjKTtcbiAgICAgICAgcmV0dXJuIG5ldyBkYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpbHRlcnMuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbiwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIG4pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUNvbnN0cmFpbnR9IHRoYXQgZW5mb3JjZXMgdGhhdCBkb2N1bWVudHMgbXVzdCBjb250YWluIHRoZVxuICogc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgc2F0aXNmeSB0aGUgcmVsYXRpb24gY29uc3RyYWludFxuICogcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBvcFN0ciAtIFRoZSBvcGVyYXRpb24gc3RyaW5nIChlLmcgXCImbHQ7XCIsIFwiJmx0Oz1cIiwgXCI9PVwiLCBcIiZsdDtcIixcbiAqICAgXCImbHQ7PVwiLCBcIiE9XCIpLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGZvciBjb21wYXJpc29uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIERoKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gZSwgaSA9IHBoKFwid2hlcmVcIiwgdCk7XG4gICAgcmV0dXJuIG5ldyBTaChpLCBzLCBuKTtcbn1cblxuY2xhc3MgQ2ggZXh0ZW5kcyBWaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmhjID0gdCwgdGhpcy5kYyA9IGUsIHRoaXMudHlwZSA9IFwib3JkZXJCeVwiO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuc3RhcnRBdCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFlvdSBtdXN0IG5vdCBjYWxsIHN0YXJ0QXQoKSBvciBzdGFydEFmdGVyKCkgYmVmb3JlIGNhbGxpbmcgb3JkZXJCeSgpLlwiKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0LmVuZEF0KSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgZW5kQXQoKSBvciBlbmRCZWZvcmUoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgY29uc3QgcyA9IG5ldyBWZShlLCBuKTtcbiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IE9lKHQpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGZpcnN0IG9yZGVyIGJ5LiBJdCBtdXN0IG1hdGNoIGFueSBpbmVxdWFsaXR5LlxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gRmUodCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IG4gJiYgUWgodCwgbiwgZS5maWVsZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSh0LCBzKSwgcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIENyZWF0ZSBhIGBCb3VuZGAgZnJvbSBhIHF1ZXJ5IGFuZCBhIGRvY3VtZW50LlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgYEJvdW5kYCB3aWxsIGFsd2F5cyBpbmNsdWRlIHRoZSBrZXkgb2YgdGhlIGRvY3VtZW50XG4gKiBhbmQgc28gb25seSB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgd2lsbCBjb21wYXJlIGVxdWFsIHRvIHRoZSByZXR1cm5lZFxuICogcG9zaXRpb24uXG4gKlxuICogV2lsbCB0aHJvdyBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgY29udGFpbiBhbGwgZmllbGRzIG9mIHRoZSBvcmRlciBieVxuICogb2YgdGhlIHF1ZXJ5IG9yIGlmIGFueSBvZiB0aGUgZmllbGRzIGluIHRoZSBvcmRlciBieSBhcmUgYW4gdW5jb21taXR0ZWRcbiAqIHNlcnZlciB0aW1lc3RhbXAuXG4gKi8gKHQuX3F1ZXJ5LCB0aGlzLmhjLCB0aGlzLmRjKTtcbiAgICAgICAgcmV0dXJuIG5ldyBkYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogdmFsaWRhdGUgdGhhdCBvcmRlckJ5IGRvZXMgbm90IGxpc3QgdGhlIHNhbWUga2V5IHR3aWNlLlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuZXhwbGljaXRPcmRlckJ5LmNvbmNhdChbIGUgXSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENlKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIG4sIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBzb3J0cyB0aGUgcXVlcnkgcmVzdWx0IGJ5IHRoZVxuICogc3BlY2lmaWVkIGZpZWxkLCBvcHRpb25hbGx5IGluIGRlc2NlbmRpbmcgb3JkZXIgaW5zdGVhZCBvZiBhc2NlbmRpbmcuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBmaWVsZCB0byBzb3J0IGJ5LlxuICogQHBhcmFtIGRpcmVjdGlvblN0ciAtIE9wdGlvbmFsIGRpcmVjdGlvbiB0byBzb3J0IGJ5ICgnYXNjJyBvciAnZGVzYycpLiBJZlxuICogbm90IHNwZWNpZmllZCwgb3JkZXIgd2lsbCBiZSBhc2NlbmRpbmcuXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIHhoKHQsIGUgPSBcImFzY1wiKSB7XG4gICAgY29uc3QgbiA9IGUsIHMgPSBwaChcIm9yZGVyQnlcIiwgdCk7XG4gICAgcmV0dXJuIG5ldyBDaChzLCBuKTtcbn1cblxuY2xhc3MgTmggZXh0ZW5kcyBWaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLl9jID0gZSwgdGhpcy53YyA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgZGModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBVZSh0Ll9xdWVyeSwgdGhpcy5fYywgdGhpcy53YykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGZpcnN0IG1hdGNoaW5nIGRvY3VtZW50cy5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBraCh0KSB7XG4gICAgcmV0dXJuIGFjKFwibGltaXRcIiwgdCksIG5ldyBOaChcImxpbWl0XCIsIHQsIFwiRlwiIC8qIEZpcnN0ICovKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGxhc3QgbWF0Y2hpbmcgZG9jdW1lbnRzLlxuICpcbiAqIFlvdSBtdXN0IHNwZWNpZnkgYXQgbGVhc3Qgb25lIGBvcmRlckJ5YCBjbGF1c2UgZm9yIGBsaW1pdFRvTGFzdGAgcXVlcmllcyxcbiAqIG90aGVyd2lzZSBhbiBleGNlcHRpb24gd2lsbCBiZSB0aHJvd24gZHVyaW5nIGV4ZWN1dGlvbi5cbiAqXG4gKiBAcGFyYW0gbGltaXQgLSBUaGUgbWF4aW11bSBudW1iZXIgb2YgaXRlbXMgdG8gcmV0dXJuLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5fS5cbiAqLyBmdW5jdGlvbiBNaCh0KSB7XG4gICAgcmV0dXJuIGFjKFwibGltaXRUb0xhc3RcIiwgdCksIG5ldyBOaChcImxpbWl0VG9MYXN0XCIsIHQsIFwiTFwiIC8qIExhc3QgKi8pO1xufVxuXG5jbGFzcyBPaCBleHRlbmRzIFZoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMubWMgPSBlLCB0aGlzLmdjID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHFoKHQsIHRoaXMudHlwZSwgdGhpcy5tYywgdGhpcy5nYyk7XG4gICAgICAgIHJldHVybiBuZXcgZGModC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENlKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgZSwgdC5lbmRBdCk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEZoKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IE9oKFwic3RhcnRBdFwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbmZ1bmN0aW9uICRoKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IE9oKFwic3RhcnRBZnRlclwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbmNsYXNzIEJoIGV4dGVuZHMgVmgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5tYyA9IGUsIHRoaXMuZ2MgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gcWgodCwgdGhpcy50eXBlLCB0aGlzLm1jLCB0aGlzLmdjKTtcbiAgICAgICAgcmV0dXJuIG5ldyBkYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIGUpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBMaCguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBCaChcImVuZEJlZm9yZVwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMSk7XG59XG5cbmZ1bmN0aW9uIFVoKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEJoKFwiZW5kQXRcIiwgdCwgLyppbmNsdXNpdmU9Ki8gITApO1xufVxuXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJvdW5kIGZyb20gYSBkb2N1bWVudCBvciBmaWVsZHMgKi8gZnVuY3Rpb24gcWgodCwgZSwgbiwgcykge1xuICAgIGlmIChuWzBdID0gZ2V0TW9kdWxhckluc3RhbmNlKG5bMF0pLCBuWzBdIGluc3RhbmNlb2YgZ2gpIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGlmICghcykgdGhyb3cgbmV3IFEoSy5OT1RfRk9VTkQsIGBDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgJHtufSgpLmApO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXG4gICAgICAgIC8vIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIEJlKHQpKSBpZiAobi5maWVsZC5pc0tleUZpZWxkKCkpIHIucHVzaChxdChlLCBzLmtleSkpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLmRhdGEuZmllbGQobi5maWVsZCk7XG4gICAgICAgICAgICBpZiAoUnQodCkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgKyBuLmZpZWxkICsgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBpcyB1bmtub3duLCB5b3UgY2Fubm90IHN0YXJ0L2VuZCBhIHF1ZXJ5IHdpdGggaXQuKScpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJyR7dH0nICh1c2VkIGFzIHRoZSBvcmRlckJ5KSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFBlKHIsIGkpO1xuICAgIH1cbiAgICAvKipcbiAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBgQm91bmRgIGZvciB0aGUgZ2l2ZW4gcXVlcnkuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgZSwgblswXS5fZG9jdW1lbnQsIHMpO1xuICAgIHtcbiAgICAgICAgY29uc3QgaSA9IFljKHQuZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgICAgIC8vIFVzZSBleHBsaWNpdCBvcmRlciBieSdzIGJlY2F1c2UgaXQgaGFzIHRvIG1hdGNoIHRoZSBxdWVyeSB0aGUgdXNlciBtYWRlXG4gICAgICAgICAgICBjb25zdCBvID0gdC5leHBsaWNpdE9yZGVyQnk7XG4gICAgICAgICAgICBpZiAoaS5sZW5ndGggPiBvLmxlbmd0aCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvICR7c30oKS4gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvcmRlckJ5KCkgY2xhdXNlc2ApO1xuICAgICAgICAgICAgY29uc3QgdSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBpLmxlbmd0aDsgcisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYSA9IGlbcl07XG4gICAgICAgICAgICAgICAgaWYgKG9bcl0uZmllbGQuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBhKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gJHtzfSgpLCBidXQgZ290IGEgJHt0eXBlb2YgYX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkZSh0KSAmJiAtMSAhPT0gYS5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7YX0nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGguY2hpbGQoX3QuZnJvbVN0cmluZyhhKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgheHQuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7bn0nIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgeHQobik7XG4gICAgICAgICAgICAgICAgICAgIHUucHVzaChxdChlLCBpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHVoKG4sIHMsIGEpO1xuICAgICAgICAgICAgICAgICAgICB1LnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZSh1LCByKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGRvY3VtZW50SWRWYWx1ZWAgaW50byBhIGBSZWZlcmVuY2VWYWx1ZWAsIHRocm93aW5nXG4gKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gKiBvciBgc3RyaW5nYCwgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgaSwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBHaCh0LCBlLCBuKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIChuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pKSkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gbikgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICBpZiAoISRlKGUpICYmIC0xICE9PSBuLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHMgPSBlLnBhdGguY2hpbGQoX3QuZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICgheHQuaXNEb2N1bWVudEtleShzKSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7c30nIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzICgke3MubGVuZ3RofSkuYCk7XG4gICAgICAgIHJldHVybiBxdCh0LCBuZXcgeHQocykpO1xuICAgIH1cbiAgICBpZiAobiBpbnN0YW5jZW9mIGZjKSByZXR1cm4gcXQodCwgbi5fa2V5KTtcbiAgICB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6ICR7b2Mobil9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0aXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXG4gKiBhcnJheSByZXF1aXJlbWVudHMuXG4gKi8gZnVuY3Rpb24gS2godCwgZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSB8fCAwID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG4gICAgaWYgKHQubGVuZ3RoID4gMTApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgUXVlcnkuICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMgc3VwcG9ydCBhIG1heGltdW0gb2YgMTAgZWxlbWVudHMgaW4gdGhlIHZhbHVlIGFycmF5LmApO1xufVxuXG5mdW5jdGlvbiBRaCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuLmlzRXF1YWwoZSkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBoYXZlIGEgd2hlcmUgZmlsdGVyIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBvbiBmaWVsZCAnJHtlLnRvU3RyaW5nKCl9JyBhbmQgc28geW91IG11c3QgYWxzbyB1c2UgJyR7ZS50b1N0cmluZygpfScgYXMgeW91ciBmaXJzdCBhcmd1bWVudCB0byBvcmRlckJ5KCksIGJ1dCB5b3VyIGZpcnN0IG9yZGVyQnkoKSBpcyBvbiBmaWVsZCAnJHtuLnRvU3RyaW5nKCl9JyBpbnN0ZWFkLmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBGaXJlc3RvcmUncyBpbnRlcm5hbCB0eXBlcyB0byB0aGUgSmF2YVNjcmlwdCB0eXBlcyB0aGF0IHdlIGV4cG9zZVxuICogdG8gdGhlIHVzZXIuXG4gKlxuICogQGludGVybmFsXG4gKi8gY2xhc3Mgamgge1xuICAgIGNvbnZlcnRWYWx1ZSh0LCBlID0gXCJub25lXCIpIHtcbiAgICAgICAgc3dpdGNoIChNdCh0KSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogQm9vbGVhblZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZTtcblxuICAgICAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gRXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcCh0LnRpbWVzdGFtcFZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0U2VydmVyVGltZXN0YW1wKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSA1IC8qIFN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA2IC8qIEJsb2JWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0Qnl0ZXMoQXQodC5ieXRlc1ZhbHVlKSk7XG5cbiAgICAgICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFJlZmVyZW5jZSh0LnJlZmVyZW5jZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgOCAvKiBHZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludCh0Lmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEFycmF5KHQuYXJyYXlWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3QodC5tYXBWYWx1ZSwgZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgTCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRPYmplY3QodCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge307XG4gICAgICAgIHJldHVybiBsdCh0LmZpZWxkcywgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuW3RdID0gdGhpcy5jb252ZXJ0VmFsdWUocywgZSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgY29udmVydEdlb1BvaW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBLYyhFdCh0LmxhdGl0dWRlKSwgRXQodC5sb25naXR1ZGUpKTtcbiAgICB9XG4gICAgY29udmVydEFycmF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuICh0LnZhbHVlcyB8fCBbXSkubWFwKCh0ID0+IHRoaXMuY29udmVydFZhbHVlKHQsIGUpKSk7XG4gICAgfVxuICAgIGNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwicHJldmlvdXNcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSBidCh0KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5jb252ZXJ0VmFsdWUobiwgZSk7XG5cbiAgICAgICAgICBjYXNlIFwiZXN0aW1hdGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoUHQodCkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAodCkge1xuICAgICAgICBjb25zdCBlID0gVHQodCk7XG4gICAgICAgIHJldHVybiBuZXcgYXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IF90LmZyb21TdHJpbmcodCk7XG4gICAgICAgIFUoTHMobikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IHZ0KG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgeHQobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiBzLmlzRXF1YWwoZSkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgIEYoYERvY3VtZW50ICR7aX0gY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlICgke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9KSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKCR7ZS5wcm9qZWN0SWR9LyR7ZS5kYXRhYmFzZX0pIGluc3RlYWQuYCksIFxuICAgICAgICBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBgRG9jdW1lbnREYXRhYCBieSBhcHBseWluZyB0aGVcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gYERvY3VtZW50RGF0YWBcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcbiAqIHRoZWlyIGBzZXQoKWAgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgYHRvRmlyZXN0b3JlKClgXG4gKiBjYWxsLlxuICovIGZ1bmN0aW9uIFdoKHQsIGUsIG4pIHtcbiAgICBsZXQgcztcbiAgICAvLyBDYXN0IHRvIGBhbnlgIGluIG9yZGVyIHRvIHNhdGlzZnkgdGhlIHVuaW9uIHR5cGUgY29uc3RyYWludCBvblxuICAgIC8vIHRvRmlyZXN0b3JlKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gcyA9IHQgPyBuICYmIChuLm1lcmdlIHx8IG4ubWVyZ2VGaWVsZHMpID8gdC50b0ZpcmVzdG9yZShlLCBuKSA6IHQudG9GaXJlc3RvcmUoZSkgOiBlLCBcbiAgICBzO1xufVxuXG5jbGFzcyB6aCBleHRlbmRzIGpoIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxYyh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgZmModGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHdyaXRlIGJhdGNoLCB1c2VkIHRvIHBlcmZvcm0gbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICpcbiAqIEEgYFdyaXRlQmF0Y2hgIG9iamVjdCBjYW4gYmUgYWNxdWlyZWQgYnkgY2FsbGluZyB7QGxpbmsgd3JpdGVCYXRjaH0uIEl0XG4gKiBwcm92aWRlcyBtZXRob2RzIGZvciBhZGRpbmcgd3JpdGVzIHRvIHRoZSB3cml0ZSBiYXRjaC4gTm9uZSBvZiB0aGUgd3JpdGVzXG4gKiB3aWxsIGJlIGNvbW1pdHRlZCAob3IgdmlzaWJsZSBsb2NhbGx5KSB1bnRpbCB7QGxpbmsgV3JpdGVCYXRjaC5jb21taXR9IGlzXG4gKiBjYWxsZWQuXG4gKi8gY2xhc3MgSGgge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl9jb21taXRIYW5kbGVyID0gZSwgdGhpcy5fbXV0YXRpb25zID0gW10sIHRoaXMuX2NvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgdGhpcy5fZGF0YVJlYWRlciA9IFljKHQpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgcyA9IEpoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBXaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBYYyh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2guc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zLnB1c2goci50b011dGF0aW9uKHMuX2tleSwgX24ubm9uZSgpKSksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBpID0gSmgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgTGMgPyBvaCh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSwgbiwgcykgOiByaCh0aGlzLl9kYXRhUmVhZGVyLCBcIldyaXRlQmF0Y2gudXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24oaS5fa2V5LCBfbi5leGlzdHMoITApKSksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgV3JpdGVCYXRjaGAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGUgPSBKaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fbXV0YXRpb25zID0gdGhpcy5fbXV0YXRpb25zLmNvbmNhdChuZXcgVm4oZS5fa2V5LCBfbi5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tbWl0cyBhbGwgb2YgdGhlIHdyaXRlcyBpbiB0aGlzIHdyaXRlIGJhdGNoIGFzIGEgc2luZ2xlIGF0b21pYyB1bml0LlxuICAgICAqXG4gICAgICogVGhlIHJlc3VsdCBvZiB0aGVzZSB3cml0ZXMgd2lsbCBvbmx5IGJlIHJlZmxlY3RlZCBpbiBkb2N1bWVudCByZWFkcyB0aGF0XG4gICAgICogb2NjdXIgYWZ0ZXIgdGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMuIElmIHRoZSBjbGllbnQgaXMgb2ZmbGluZSwgdGhlXG4gICAgICogd3JpdGUgZmFpbHMuIElmIHlvdSB3b3VsZCBsaWtlIHRvIHNlZSBsb2NhbCBtb2RpZmljYXRpb25zIG9yIGJ1ZmZlciB3cml0ZXNcbiAgICAgKiB1bnRpbCB0aGUgY2xpZW50IGlzIG9ubGluZSwgdXNlIHRoZSBmdWxsIEZpcmVzdG9yZSBTREsuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCBvbmNlIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoZSBiYXRjaCBoYXZlIGJlZW5cbiAgICAgKiBzdWNjZXNzZnVsbHkgd3JpdHRlbiB0byB0aGUgYmFja2VuZCBhcyBhbiBhdG9taWMgdW5pdCAobm90ZSB0aGF0IGl0IHdvbid0XG4gICAgICogcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gICAgICovICAgIGNvbW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpLCB0aGlzLl9jb21taXR0ZWQgPSAhMCwgdGhpcy5fbXV0YXRpb25zLmxlbmd0aCA+IDAgPyB0aGlzLl9jb21taXRIYW5kbGVyKHRoaXMuX211dGF0aW9ucykgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgX3ZlcmlmeU5vdENvbW1pdHRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NvbW1pdHRlZCkgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgd3JpdGUgYmF0Y2ggY2FuIG5vIGxvbmdlciBiZSB1c2VkIGFmdGVyIGNvbW1pdCgpIGhhcyBiZWVuIGNhbGxlZC5cIik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBKaCh0LCBlKSB7XG4gICAgaWYgKCh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKS5maXJlc3RvcmUgIT09IGUpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJQcm92aWRlZCBkb2N1bWVudCByZWZlcmVuY2UgaXMgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgaW5zdGFuY2UuXCIpO1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVE9ETyhtcnNjaG1pZHQpIENvbnNpZGVyIHVzaW5nIGBCYXNlVHJhbnNhY3Rpb25gIGFzIHRoZSBiYXNlIGNsYXNzIGluIHRoZVxuLy8gbGVnYWN5IFNESy5cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIE5vdGU6IGBnZXREb2MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieSB3YWl0aW5nXG4gKiBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWYgeW91IGFyZVxuICogb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLCBpbnZva2VcbiAqIHtAbGluayBnZXREb2NGcm9tQ2FjaGV9IG9yIHtAbGluayBnZXREb2NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gVGhlIHJlZmVyZW5jZSBvZiB0aGUgZG9jdW1lbnQgdG8gZmV0Y2guXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqL1xuZnVuY3Rpb24gWWgodCkge1xuICAgIHQgPSB1Yyh0LCBmYyk7XG4gICAgY29uc3QgZSA9IHVjKHQuZmlyZXN0b3JlLCBSYyk7XG4gICAgcmV0dXJuIHphKFZjKGUpLCB0Ll9rZXkpLnRoZW4oKG4gPT4gbGwoZSwgdCwgbikpKTtcbn1cblxuY2xhc3MgWGggZXh0ZW5kcyBqaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcWModCk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkodCwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IGZjKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIFpoKHQpIHtcbiAgICB0ID0gdWModCwgZmMpO1xuICAgIGNvbnN0IGUgPSB1Yyh0LmZpcmVzdG9yZSwgUmMpLCBuID0gVmMoZSksIHMgPSBuZXcgWGgoZSk7XG4gICAgcmV0dXJuIFdhKG4sIHQuX2tleSkudGhlbigobiA9PiBuZXcgVGgoZSwgcywgdC5fa2V5LCBuLCBuZXcgSWgobnVsbCAhPT0gbiAmJiBuLmhhc0xvY2FsTXV0YXRpb25zLCBcbiAgICAvKiBmcm9tQ2FjaGU9ICovICEwKSwgdC5jb252ZXJ0ZXIpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiB0bCh0KSB7XG4gICAgdCA9IHVjKHQsIGZjKTtcbiAgICBjb25zdCBlID0gdWModC5maXJlc3RvcmUsIFJjKTtcbiAgICByZXR1cm4gemEoVmMoZSksIHQuX2tleSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IGxsKGUsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgLlxuICpcbiAqIE5vdGU6IGBnZXREb2NzKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnlcbiAqIHdhaXRpbmcgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmXG4gKiB5b3UgYXJlIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvcixcbiAqIGludm9rZSB7QGxpbmsgZ2V0RG9jc0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY3NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZWwodCkge1xuICAgIHQgPSB1Yyh0LCBkYyk7XG4gICAgY29uc3QgZSA9IHVjKHQuZmlyZXN0b3JlLCBSYyksIG4gPSBWYyhlKSwgcyA9IG5ldyBYaChlKTtcbiAgICByZXR1cm4gUGgodC5fcXVlcnkpLCBKYShuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgQWgoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBubCh0KSB7XG4gICAgdCA9IHVjKHQsIGRjKTtcbiAgICBjb25zdCBlID0gdWModC5maXJlc3RvcmUsIFJjKSwgbiA9IFZjKGUpLCBzID0gbmV3IFhoKGUpO1xuICAgIHJldHVybiBIYShuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgQWgoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSB0aGVcbiAqIHNlcnZlci4gUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgbmV0d29yayBpcyBub3QgYXZhaWxhYmxlLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBzbCh0KSB7XG4gICAgdCA9IHVjKHQsIGRjKTtcbiAgICBjb25zdCBlID0gdWModC5maXJlc3RvcmUsIFJjKSwgbiA9IFZjKGUpLCBzID0gbmV3IFhoKGUpO1xuICAgIHJldHVybiBKYShuLCB0Ll9xdWVyeSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IG5ldyBBaChlLCBzLCB0LCBuKSkpO1xufVxuXG5mdW5jdGlvbiBpbCh0LCBlLCBuKSB7XG4gICAgdCA9IHVjKHQsIGZjKTtcbiAgICBjb25zdCBzID0gdWModC5maXJlc3RvcmUsIFJjKSwgaSA9IFdoKHQuY29udmVydGVyLCBlLCBuKTtcbiAgICByZXR1cm4gaGwocywgWyBYYyhZYyhzKSwgXCJzZXREb2NcIiwgdC5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwgbikudG9NdXRhdGlvbih0Ll9rZXksIF9uLm5vbmUoKSkgXSk7XG59XG5cbmZ1bmN0aW9uIHJsKHQsIGUsIG4sIC4uLnMpIHtcbiAgICB0ID0gdWModCwgZmMpO1xuICAgIGNvbnN0IGkgPSB1Yyh0LmZpcmVzdG9yZSwgUmMpLCByID0gWWMoaSk7XG4gICAgbGV0IG87XG4gICAgbyA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChcbiAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgTGMgPyBvaChyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUsIG4sIHMpIDogcmgociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlKTtcbiAgICByZXR1cm4gaGwoaSwgWyBvLnRvTXV0YXRpb24odC5fa2V5LCBfbi5leGlzdHMoITApKSBdKTtcbn1cblxuLyoqXG4gKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgc3BlY2lmaWVkIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBkZWxldGUuXG4gKiBAcmV0dXJucyBBIFByb21pc2UgcmVzb2x2ZWQgb25jZSB0aGUgZG9jdW1lbnQgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5XG4gKiBkZWxldGVkIGZyb20gdGhlIGJhY2tlbmQgKG5vdGUgdGhhdCBpdCB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiBvbCh0KSB7XG4gICAgcmV0dXJuIGhsKHVjKHQuZmlyZXN0b3JlLCBSYyksIFsgbmV3IFZuKHQuX2tleSwgX24ubm9uZSgpKSBdKTtcbn1cblxuLyoqXG4gKiBBZGQgYSBuZXcgZG9jdW1lbnQgdG8gc3BlY2lmaWVkIGBDb2xsZWN0aW9uUmVmZXJlbmNlYCB3aXRoIHRoZSBnaXZlbiBkYXRhLFxuICogYXNzaWduaW5nIGl0IGEgZG9jdW1lbnQgSUQgYXV0b21hdGljYWxseS5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGNvbGxlY3Rpb24gdG8gYWRkIHRoaXMgZG9jdW1lbnQgdG8uXG4gKiBAcGFyYW0gZGF0YSAtIEFuIE9iamVjdCBjb250YWluaW5nIHRoZSBkYXRhIGZvciB0aGUgbmV3IGRvY3VtZW50LlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFJlZmVyZW5jZWAgcG9pbnRpbmcgdG8gdGhlXG4gKiBuZXdseSBjcmVhdGVkIGRvY3VtZW50IGFmdGVyIGl0IGhhcyBiZWVuIHdyaXR0ZW4gdG8gdGhlIGJhY2tlbmQgKE5vdGUgdGhhdCBpdFxuICogd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24gdWwodCwgZSkge1xuICAgIGNvbnN0IG4gPSB1Yyh0LmZpcmVzdG9yZSwgUmMpLCBzID0gZ2ModCksIGkgPSBXaCh0LmNvbnZlcnRlciwgZSk7XG4gICAgcmV0dXJuIGhsKG4sIFsgWGMoWWModC5maXJlc3RvcmUpLCBcImFkZERvY1wiLCBzLl9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCB7fSkudG9NdXRhdGlvbihzLl9rZXksIF9uLmV4aXN0cyghMSkpIF0pLnRoZW4oKCgpID0+IHMpKTtcbn1cblxuZnVuY3Rpb24gYWwodCwgLi4uZSkge1xuICAgIHZhciBuLCBzLCBpO1xuICAgIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCk7XG4gICAgbGV0IHIgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICExXG4gICAgfSwgbyA9IDA7XG4gICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgZVtvXSB8fCBUYyhlW29dKSB8fCAociA9IGVbb10sIG8rKyk7XG4gICAgY29uc3QgdSA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogci5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzXG4gICAgfTtcbiAgICBpZiAoVGMoZVtvXSkpIHtcbiAgICAgICAgY29uc3QgdCA9IGVbb107XG4gICAgICAgIGVbb10gPSBudWxsID09PSAobiA9IHQubmV4dCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5iaW5kKHQpLCBlW28gKyAxXSA9IG51bGwgPT09IChzID0gdC5lcnJvcikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5iaW5kKHQpLCBcbiAgICAgICAgZVtvICsgMl0gPSBudWxsID09PSAoaSA9IHQuY29tcGxldGUpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYmluZCh0KTtcbiAgICB9XG4gICAgbGV0IGEsIGMsIGg7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBmYykgYyA9IHVjKHQuZmlyZXN0b3JlLCBSYyksIGggPSBOZSh0Ll9rZXkucGF0aCksIGEgPSB7XG4gICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgZVtvXSAmJiBlW29dKGxsKGMsIHQsIG4pKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICB9OyBlbHNlIHtcbiAgICAgICAgY29uc3QgbiA9IHVjKHQsIGRjKTtcbiAgICAgICAgYyA9IHVjKG4uZmlyZXN0b3JlLCBSYyksIGggPSBuLl9xdWVyeTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBYaChjKTtcbiAgICAgICAgYSA9IHtcbiAgICAgICAgICAgIG5leHQ6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGVbb10gJiYgZVtvXShuZXcgQWgoYywgcywgbiwgdCkpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgICAgICB9LCBQaCh0Ll9xdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgQ2EocyksIHIgPSBuZXcgRnUoZSwgaSwgbik7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4geHUoYXdhaXQgS2EodCksIHIpKSksICgpID0+IHtcbiAgICAgICAgICAgIGkucGEoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IE51KGF3YWl0IEthKHQpLCByKSkpO1xuICAgICAgICB9O1xuICAgIH0oVmMoYyksIGgsIHUsIGEpO1xufVxuXG5mdW5jdGlvbiBjbCh0LCBlKSB7XG4gICAgcmV0dXJuIFlhKFZjKHQgPSB1Yyh0LCBSYykpLCBUYyhlKSA/IGUgOiB7XG4gICAgICAgIG5leHQ6IGVcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBMb2NhbGx5IHdyaXRlcyBgbXV0YXRpb25zYCBvbiB0aGUgYXN5bmMgcXVldWUuXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBobCh0LCBlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBqO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IFl1KGF3YWl0IEdhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG4gICAgfShWYyh0KSwgZSk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYSB7QGxpbmsgVmlld1NuYXBzaG90fSB0aGF0IGNvbnRhaW5zIHRoZSBzaW5nbGUgZG9jdW1lbnQgc3BlY2lmaWVkIGJ5IGByZWZgXG4gKiB0byBhIHtAbGluayBEb2N1bWVudFNuYXBzaG90fS5cbiAqLyBmdW5jdGlvbiBsbCh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG4uZG9jcy5nZXQoZS5fa2V5KSwgaSA9IG5ldyBYaCh0KTtcbiAgICByZXR1cm4gbmV3IFRoKHQsIGksIGUuX2tleSwgcywgbmV3IEloKG4uaGFzUGVuZGluZ1dyaXRlcywgbi5mcm9tQ2FjaGUpLCBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqLyBjbGFzcyBmbCBleHRlbmRzIGNsYXNzIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdHJhbnNhY3Rpb24gPSBlLCB0aGlzLl9kYXRhUmVhZGVyID0gWWModCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gSmgodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyB6aCh0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24ubG9va3VwKFsgZS5fa2V5IF0pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKCF0IHx8IDEgIT09IHQubGVuZ3RoKSByZXR1cm4gTCgpO1xuICAgICAgICAgICAgY29uc3QgcyA9IHRbMF07XG4gICAgICAgICAgICBpZiAocy5pc0ZvdW5kRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBnaCh0aGlzLl9maXJlc3RvcmUsIG4sIHMua2V5LCBzLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICBpZiAocy5pc05vRG9jdW1lbnQoKSkgcmV0dXJuIG5ldyBnaCh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgbnVsbCwgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgdGhyb3cgTCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBpID0gV2gocy5jb252ZXJ0ZXIsIGUsIG4pLCByID0gWGModGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5zZXQocy5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgY29uc3QgaSA9IEpoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgICAgIC8vIHBlcmZvcm1pbmcgdmFsaWRhdGlvbi5cbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgcmV0dXJuIHIgPSBcInN0cmluZ1wiID09IHR5cGVvZiAoZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIExjID8gb2godGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IHJoKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSksIFxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi51cGRhdGUoaS5fa2V5LCByKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBUcmFuc2FjdGlvbmAgaW5zdGFuY2UuIFVzZWQgZm9yIGNoYWluaW5nIG1ldGhvZCBjYWxscy5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5kZWxldGUoZS5fa2V5KSwgdGhpcztcbiAgICB9XG59IHtcbiAgICAvLyBUaGlzIGNsYXNzIGltcGxlbWVudHMgdGhlIHNhbWUgbG9naWMgYXMgdGhlIFRyYW5zYWN0aW9uIEFQSSBpbiB0aGUgTGl0ZSBTREtcbiAgICAvLyBidXQgaXMgc3ViY2xhc3NlZCBpbiBvcmRlciB0byByZXR1cm4gaXRzIG93biBEb2N1bWVudFNuYXBzaG90IHR5cGVzLlxuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlKSwgdGhpcy5fZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IFhoKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiBzdXBlci5nZXQodCkudGhlbigodCA9PiBuZXcgVGgodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIHQuX2RvY3VtZW50LCBuZXcgSWgoXG4gICAgICAgIC8qIGhhc1BlbmRpbmdXcml0ZXM9ICovICExLCBcbiAgICAgICAgLyogZnJvbUNhY2hlPSAqLyAhMSksIGUuY29udmVydGVyKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gYHVwZGF0ZUZ1bmN0aW9uYCBhbmQgdGhlbiBhdHRlbXB0cyB0byBjb21taXQgdGhlIGNoYW5nZXNcbiAqIGFwcGxpZWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvbi4gSWYgYW55IGRvY3VtZW50IHJlYWQgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogaGFzIGNoYW5nZWQsIENsb3VkIEZpcmVzdG9yZSByZXRyaWVzIHRoZSBgdXBkYXRlRnVuY3Rpb25gLiBJZiBpdCBmYWlscyB0b1xuICogY29tbWl0IGFmdGVyIDUgYXR0ZW1wdHMsIHRoZSB0cmFuc2FjdGlvbiBmYWlscy5cbiAqXG4gKiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUgdHJhbnNhY3Rpb24gaXMgNTAwLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgRmlyZXN0b3JlIGRhdGFiYXNlIHRvIHJ1biB0aGlzXG4gKiB0cmFuc2FjdGlvbiBhZ2FpbnN0LlxuICogQHBhcmFtIHVwZGF0ZUZ1bmN0aW9uIC0gVGhlIGZ1bmN0aW9uIHRvIGV4ZWN1dGUgd2l0aGluIHRoZSB0cmFuc2FjdGlvblxuICogY29udGV4dC5cbiAqIEByZXR1cm5zIElmIHRoZSB0cmFuc2FjdGlvbiBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5IG9yIHdhcyBleHBsaWNpdGx5IGFib3J0ZWRcbiAqICh0aGUgYHVwZGF0ZUZ1bmN0aW9uYCByZXR1cm5lZCBhIGZhaWxlZCBwcm9taXNlKSwgdGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhlXG4gKiBgdXBkYXRlRnVuY3Rpb24gYGlzIHJldHVybmVkIGhlcmUuIE90aGVyd2lzZSwgaWYgdGhlIHRyYW5zYWN0aW9uIGZhaWxlZCwgYVxuICogcmVqZWN0ZWQgcHJvbWlzZSB3aXRoIHRoZSBjb3JyZXNwb25kaW5nIGZhaWx1cmUgZXJyb3IgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gZGwodCwgZSkge1xuICAgIHJldHVybiBYYShWYyh0ID0gdWModCwgUmMpKSwgKG4gPT4gZShuZXcgZmwodCwgbikpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCBmb3IgdXNlIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSBvclxuICoge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSB3aXRoIGB7bWVyZ2U6IHRydWV9YCB0byBtYXJrIGEgZmllbGQgZm9yIGRlbGV0aW9uLlxuICovIGZ1bmN0aW9uIF9sKCkge1xuICAgIHJldHVybiBuZXcgWmMoXCJkZWxldGVGaWVsZFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0b1xuICogaW5jbHVkZSBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wIGluIHRoZSB3cml0dGVuIGRhdGEuXG4gKi8gZnVuY3Rpb24gd2woKSB7XG4gICAgcmV0dXJuIG5ldyBlaChcInNlcnZlclRpbWVzdGFtcFwiKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gdW5pb24gdGhlIGdpdmVuIGVsZW1lbnRzIHdpdGggYW55IGFycmF5XG4gKiB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEVhY2ggc3BlY2lmaWVkIGVsZW1lbnQgdGhhdCBkb2Vzbid0XG4gKiBhbHJlYWR5IGV4aXN0IGluIHRoZSBhcnJheSB3aWxsIGJlIGFkZGVkIHRvIHRoZSBlbmQuIElmIHRoZSBmaWVsZCBiZWluZ1xuICogbW9kaWZpZWQgaXMgbm90IGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGFycmF5XG4gKiBjb250YWluaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmllZCBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gdW5pb24gaW50byB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWAuXG4gKi8gZnVuY3Rpb24gbWwoLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBuaChcImFycmF5VW5pb25cIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayAoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIHVwZGF0ZURvYzoxfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gcmVtb3ZlIHRoZSBnaXZlbiBlbGVtZW50cyBmcm9tIGFueVxuICogYXJyYXkgdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBBbGwgaW5zdGFuY2VzIG9mIGVhY2ggZWxlbWVudFxuICogc3BlY2lmaWVkIHdpbGwgYmUgcmVtb3ZlZCBmcm9tIHRoZSBhcnJheS4gSWYgdGhlIGZpZWxkIGJlaW5nIG1vZGlmaWVkIGlzIG5vdFxuICogYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gZW1wdHkgYXJyYXkuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIGdsKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgc2goXCJhcnJheVJlbW92ZVwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmtcbiAqIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSModXBkYXRlRG9jOjEpfSB0aGF0IHRlbGxzIHRoZSBzZXJ2ZXIgdG8gaW5jcmVtZW50IHRoZSBmaWVsZCdzIGN1cnJlbnQgdmFsdWUgYnlcbiAqIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBJZiBlaXRoZXIgdGhlIG9wZXJhbmQgb3IgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgdXNlcyBmbG9hdGluZyBwb2ludFxuICogcHJlY2lzaW9uLCBhbGwgYXJpdGhtZXRpYyBmb2xsb3dzIElFRUUgNzU0IHNlbWFudGljcy4gSWYgYm90aCB2YWx1ZXMgYXJlXG4gKiBpbnRlZ2VycywgdmFsdWVzIG91dHNpZGUgb2YgSmF2YVNjcmlwdCdzIHNhZmUgbnVtYmVyIHJhbmdlXG4gKiAoYE51bWJlci5NSU5fU0FGRV9JTlRFR0VSYCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgKSBhcmUgYWxzbyBzdWJqZWN0IHRvXG4gKiBwcmVjaXNpb24gbG9zcy4gRnVydGhlcm1vcmUsIG9uY2UgcHJvY2Vzc2VkIGJ5IHRoZSBGaXJlc3RvcmUgYmFja2VuZCwgYWxsXG4gKiBpbnRlZ2VyIG9wZXJhdGlvbnMgYXJlIGNhcHBlZCBiZXR3ZWVuIC0yXjYzIGFuZCAyXjYzLTEuXG4gKlxuICogSWYgdGhlIGN1cnJlbnQgZmllbGQgdmFsdWUgaXMgbm90IG9mIHR5cGUgYG51bWJlcmAsIG9yIGlmIHRoZSBmaWVsZCBkb2VzIG5vdFxuICogeWV0IGV4aXN0LCB0aGUgdHJhbnNmb3JtYXRpb24gc2V0cyB0aGUgZmllbGQgdG8gdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIEBwYXJhbSBuIC0gVGhlIHZhbHVlIHRvIGluY3JlbWVudCBieS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYFxuICovIGZ1bmN0aW9uIHlsKHQpIHtcbiAgICByZXR1cm4gbmV3IGloKFwiaW5jcmVtZW50XCIsIHQpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgd3JpdGUgYmF0Y2gsIHVzZWQgZm9yIHBlcmZvcm1pbmcgbXVsdGlwbGUgd3JpdGVzIGFzIGEgc2luZ2xlXG4gKiBhdG9taWMgb3BlcmF0aW9uLiBUaGUgbWF4aW11bSBudW1iZXIgb2Ygd3JpdGVzIGFsbG93ZWQgaW4gYSBzaW5nbGUge0BsaW5rIFdyaXRlQmF0Y2h9XG4gKiBpcyA1MDAuXG4gKlxuICogVW5saWtlIHRyYW5zYWN0aW9ucywgd3JpdGUgYmF0Y2hlcyBhcmUgcGVyc2lzdGVkIG9mZmxpbmUgYW5kIHRoZXJlZm9yZSBhcmVcbiAqIHByZWZlcmFibGUgd2hlbiB5b3UgZG9uJ3QgbmVlZCB0byBjb25kaXRpb24geW91ciB3cml0ZXMgb24gcmVhZCBkYXRhLlxuICpcbiAqIEByZXR1cm5zIEEge0BsaW5rIFdyaXRlQmF0Y2h9IHRoYXQgY2FuIGJlIHVzZWQgdG8gYXRvbWljYWxseSBleGVjdXRlIG11bHRpcGxlXG4gKiB3cml0ZXMuXG4gKi8gZnVuY3Rpb24gcGwodCkge1xuICAgIHJldHVybiBWYyh0ID0gdWModCwgUmMpKSwgbmV3IEhoKHQsIChlID0+IGhsKHQsIGUpKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIElsKHQsIGUpIHtcbiAgICBWYyh0ID0gdWModCwgUmMpKTtcbiAgICBjb25zdCBuID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHQpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIHBhcnNlIEpTT046XCIgKyB0Lm1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfShlKSA6IGUsIHMgPSBbXTtcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IHJldHVybiBhbiBlcnJvciBpZiB0aGUgdXNlciBoYXMgbm90IGVuYWJsZWRcbiAgICAvLyBwZXJzaXN0ZW5jZSBzaW5jZSBgZW5hYmxlSW5kZXhlZGRiUGVyc2lzdGVuY2UoKWAgY2FuIGZhaWwgb24gdGhlIFdlYi5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShuLmluZGV4ZXMpKSBmb3IgKGNvbnN0IHQgb2Ygbi5pbmRleGVzKSB7XG4gICAgICAgIGNvbnN0IGUgPSBUbCh0LCBcImNvbGxlY3Rpb25Hcm91cFwiKSwgbiA9IFtdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0LmZpZWxkcykpIGZvciAoY29uc3QgZSBvZiB0LmZpZWxkcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IF9oKFwic2V0SW5kZXhDb25maWd1cmF0aW9uXCIsIFRsKGUsIFwiZmllbGRQYXRoXCIpKTtcbiAgICAgICAgICAgIFwiQ09OVEFJTlNcIiA9PT0gZS5hcnJheUNvbmZpZyA/IG4ucHVzaChuZXcgaWUodCwgMiAvKiBDT05UQUlOUyAqLykpIDogXCJBU0NFTkRJTkdcIiA9PT0gZS5vcmRlciA/IG4ucHVzaChuZXcgaWUodCwgMCAvKiBBU0NFTkRJTkcgKi8pKSA6IFwiREVTQ0VORElOR1wiID09PSBlLm9yZGVyICYmIG4ucHVzaChuZXcgaWUodCwgMSAvKiBERVNDRU5ESU5HICovKSk7XG4gICAgICAgIH1cbiAgICAgICAgcy5wdXNoKG5ldyBlZShlZS5VTktOT1dOX0lELCBlLCBuLCByZS5lbXB0eSgpKSk7XG4gICAgfVxuICAgIC8vIFRPRE8oaW5kZXhpbmcpOiBDb25maWd1cmUgaW5kZXhlc1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG59XG5cbmZ1bmN0aW9uIFRsKHQsIGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgdFtlXSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIk1pc3Npbmcgc3RyaW5nIHZhbHVlIGZvcjogXCIgKyBlKTtcbiAgICByZXR1cm4gdFtlXTtcbn1cblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyAhZnVuY3Rpb24odCwgZSA9ICEwKSB7XG4gICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgeCA9IHQ7XG4gICAgfShTREtfVkVSU0lPTiksIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiZmlyZXN0b3JlXCIsICgodCwge29wdGlvbnM6IG59KSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmdldFByb3ZpZGVyKFwiYXBwXCIpLmdldEltbWVkaWF0ZSgpLCBpID0gbmV3IFJjKHMsIG5ldyBKKHQuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIpKSwgbmV3IHR0KHQuZ2V0UHJvdmlkZXIoXCJhcHAtY2hlY2staW50ZXJuYWxcIikpKTtcbiAgICAgICAgcmV0dXJuIG4gPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIHVzZUZldGNoU3RyZWFtczogZVxuICAgICAgICB9LCBuKSwgaS5fc2V0U2V0dGluZ3MobiksIGk7XG4gICAgfSksIFwiUFVCTElDXCIpKSwgcmVnaXN0ZXJWZXJzaW9uKEQsIFwiMy40LjdcIiwgdCksIFxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKEQsIFwiMy40LjdcIiwgXCJlc20yMDE3XCIpO1xufSgpO1xuXG5leHBvcnQgeyBqaCBhcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBxYyBhcyBCeXRlcywgQWMgYXMgQ0FDSEVfU0laRV9VTkxJTUlURUQsIF9jIGFzIENvbGxlY3Rpb25SZWZlcmVuY2UsIGZjIGFzIERvY3VtZW50UmVmZXJlbmNlLCBUaCBhcyBEb2N1bWVudFNuYXBzaG90LCBMYyBhcyBGaWVsZFBhdGgsIEdjIGFzIEZpZWxkVmFsdWUsIFJjIGFzIEZpcmVzdG9yZSwgUSBhcyBGaXJlc3RvcmVFcnJvciwgS2MgYXMgR2VvUG9pbnQsIEVjIGFzIExvYWRCdW5kbGVUYXNrLCBkYyBhcyBRdWVyeSwgVmggYXMgUXVlcnlDb25zdHJhaW50LCBFaCBhcyBRdWVyeURvY3VtZW50U25hcHNob3QsIEFoIGFzIFF1ZXJ5U25hcHNob3QsIEloIGFzIFNuYXBzaG90TWV0YWRhdGEsIGF0IGFzIFRpbWVzdGFtcCwgZmwgYXMgVHJhbnNhY3Rpb24sIEhoIGFzIFdyaXRlQmF0Y2gsIHZ0IGFzIF9EYXRhYmFzZUlkLCB4dCBhcyBfRG9jdW1lbnRLZXksIGV0IGFzIF9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciwgeiBhcyBfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciwgbXQgYXMgX0ZpZWxkUGF0aCwgdWMgYXMgX2Nhc3QsIHEgYXMgX2RlYnVnQXNzZXJ0LCB5dCBhcyBfaXNCYXNlNjRBdmFpbGFibGUsICQgYXMgX2xvZ1dhcm4sIElsIGFzIF9zZXRJbmRleENvbmZpZ3VyYXRpb24sIHNjIGFzIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCB1bCBhcyBhZGREb2MsIGdsIGFzIGFycmF5UmVtb3ZlLCBtbCBhcyBhcnJheVVuaW9uLCB4YyBhcyBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCB3YyBhcyBjb2xsZWN0aW9uLCBtYyBhcyBjb2xsZWN0aW9uR3JvdXAsIGxjIGFzIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgb2wgYXMgZGVsZXRlRG9jLCBfbCBhcyBkZWxldGVGaWVsZCwgTWMgYXMgZGlzYWJsZU5ldHdvcmssIGdjIGFzIGRvYywgVWMgYXMgZG9jdW1lbnRJZCwgU2MgYXMgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UsIERjIGFzIGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UsIGtjIGFzIGVuYWJsZU5ldHdvcmssIFVoIGFzIGVuZEF0LCBMaCBhcyBlbmRCZWZvcmUsIFZjIGFzIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQsIGhsIGFzIGV4ZWN1dGVXcml0ZSwgWWggYXMgZ2V0RG9jLCBaaCBhcyBnZXREb2NGcm9tQ2FjaGUsIHRsIGFzIGdldERvY0Zyb21TZXJ2ZXIsIGVsIGFzIGdldERvY3MsIG5sIGFzIGdldERvY3NGcm9tQ2FjaGUsIHNsIGFzIGdldERvY3NGcm9tU2VydmVyLCBQYyBhcyBnZXRGaXJlc3RvcmUsIHlsIGFzIGluY3JlbWVudCwgYmMgYXMgaW5pdGlhbGl6ZUZpcmVzdG9yZSwga2ggYXMgbGltaXQsIE1oIGFzIGxpbWl0VG9MYXN0LCBGYyBhcyBsb2FkQnVuZGxlLCAkYyBhcyBuYW1lZFF1ZXJ5LCBhbCBhcyBvblNuYXBzaG90LCBjbCBhcyBvblNuYXBzaG90c0luU3luYywgeGggYXMgb3JkZXJCeSwgdmggYXMgcXVlcnksIHBjIGFzIHF1ZXJ5RXF1YWwsIHljIGFzIHJlZkVxdWFsLCBkbCBhcyBydW5UcmFuc2FjdGlvbiwgd2wgYXMgc2VydmVyVGltZXN0YW1wLCBpbCBhcyBzZXREb2MsIE0gYXMgc2V0TG9nTGV2ZWwsIGJoIGFzIHNuYXBzaG90RXF1YWwsICRoIGFzIHN0YXJ0QWZ0ZXIsIEZoIGFzIHN0YXJ0QXQsIE9jIGFzIHRlcm1pbmF0ZSwgcmwgYXMgdXBkYXRlRG9jLCBOYyBhcyB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgRGggYXMgd2hlcmUsIHBsIGFzIHdyaXRlQmF0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xyXG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufSk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHBvcnRTdGFyKG0sIG8pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgcCkpIF9fY3JlYXRlQmluZGluZyhvLCBtLCBwKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fdmFsdWVzKG8pIHtcclxuICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcclxuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuLyoqIEBkZXByZWNhdGVkICovXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5cygpIHtcclxuICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgZm9yICh2YXIgciA9IEFycmF5KHMpLCBrID0gMCwgaSA9IDA7IGkgPCBpbDsgaSsrKVxyXG4gICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgIHJldHVybiByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheSh0bywgZnJvbSwgcGFjaykge1xyXG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XHJcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XHJcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXQodikge1xyXG4gICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jR2VuZXJhdG9yKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBnID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pLCBpLCBxID0gW107XHJcbiAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jVmFsdWVzKG8pIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgcmV0dXJuIG0gPyBtLmNhbGwobykgOiAobyA9IHR5cGVvZiBfX3ZhbHVlcyA9PT0gXCJmdW5jdGlvblwiID8gX192YWx1ZXMobykgOiBvW1N5bWJvbC5pdGVyYXRvcl0oKSwgaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGkpO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tYWtlVGVtcGxhdGVPYmplY3QoY29va2VkLCByYXcpIHtcclxuICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICByZXR1cm4gY29va2VkO1xyXG59O1xyXG5cclxudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xyXG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydFN0YXIobW9kKSB7XHJcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xyXG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRTZXQocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XHJcbiIsImltcG9ydCB7IEVycm9yRmFjdG9yeSwgZGVlcEVxdWFsLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzTW9iaWxlQ29yZG92YSwgaXNSZWFjdE5hdGl2ZSwgRmlyZWJhc2VFcnJvciwgcXVlcnlzdHJpbmcsIGdldE1vZHVsYXJJbnN0YW5jZSwgYmFzZTY0RGVjb2RlLCBnZXRVQSwgaXNJRSwgY3JlYXRlU3Vic2NyaWJlLCBxdWVyeXN0cmluZ0RlY29kZSwgZXh0cmFjdFF1ZXJ5c3RyaW5nLCBpc0VtcHR5IH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgU0RLX1ZFUlNJT04sIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCByZWdpc3RlclZlcnNpb24sIGdldEFwcCB9IGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuaW1wb3J0IHsgX19yZXN0IH0gZnJvbSAndHNsaWInO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBbiBlbnVtIG9mIGZhY3RvcnMgdGhhdCBtYXkgYmUgdXNlZCBmb3IgbXVsdGlmYWN0b3IgYXV0aGVudGljYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEZhY3RvcklkID0ge1xyXG4gICAgLyoqIFBob25lIGFzIHNlY29uZCBmYWN0b3IgKi9cclxuICAgIFBIT05FOiAncGhvbmUnXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgcHJvdmlkZXJzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBQcm92aWRlcklkID0ge1xyXG4gICAgLyoqIEZhY2Vib29rIHByb3ZpZGVyIElEICovXHJcbiAgICBGQUNFQk9PSzogJ2ZhY2Vib29rLmNvbScsXHJcbiAgICAvKiogR2l0SHViIHByb3ZpZGVyIElEICovXHJcbiAgICBHSVRIVUI6ICdnaXRodWIuY29tJyxcclxuICAgIC8qKiBHb29nbGUgcHJvdmlkZXIgSUQgKi9cclxuICAgIEdPT0dMRTogJ2dvb2dsZS5jb20nLFxyXG4gICAgLyoqIFBhc3N3b3JkIHByb3ZpZGVyICovXHJcbiAgICBQQVNTV09SRDogJ3Bhc3N3b3JkJyxcclxuICAgIC8qKiBQaG9uZSBwcm92aWRlciAqL1xyXG4gICAgUEhPTkU6ICdwaG9uZScsXHJcbiAgICAvKiogVHdpdHRlciBwcm92aWRlciBJRCAqL1xyXG4gICAgVFdJVFRFUjogJ3R3aXR0ZXIuY29tJ1xyXG59O1xyXG4vKipcclxuICogRW51bWVyYXRpb24gb2Ygc3VwcG9ydGVkIHNpZ24taW4gbWV0aG9kcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgU2lnbkluTWV0aG9kID0ge1xyXG4gICAgLyoqIEVtYWlsIGxpbmsgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEVNQUlMX0xJTks6ICdlbWFpbExpbmsnLFxyXG4gICAgLyoqIEVtYWlsL3Bhc3N3b3JkIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBFTUFJTF9QQVNTV09SRDogJ3Bhc3N3b3JkJyxcclxuICAgIC8qKiBGYWNlYm9vayBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRkFDRUJPT0s6ICdmYWNlYm9vay5jb20nLFxyXG4gICAgLyoqIEdpdEh1YiBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgR0lUSFVCOiAnZ2l0aHViLmNvbScsXHJcbiAgICAvKiogR29vZ2xlIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBHT09HTEU6ICdnb29nbGUuY29tJyxcclxuICAgIC8qKiBQaG9uZSBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgUEhPTkU6ICdwaG9uZScsXHJcbiAgICAvKiogVHdpdHRlciBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgVFdJVFRFUjogJ3R3aXR0ZXIuY29tJ1xyXG59O1xyXG4vKipcclxuICogRW51bWVyYXRpb24gb2Ygc3VwcG9ydGVkIG9wZXJhdGlvbiB0eXBlcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgT3BlcmF0aW9uVHlwZSA9IHtcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIGxpbmtpbmcgYW4gYWRkaXRpb25hbCBwcm92aWRlciB0byBhbiBhbHJlYWR5IHNpZ25lZC1pbiB1c2VyLiAqL1xyXG4gICAgTElOSzogJ2xpbmsnLFxyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgdXNpbmcgYSBwcm92aWRlciB0byByZWF1dGhlbnRpY2F0ZSBhbiBhbHJlYWR5IHNpZ25lZC1pbiB1c2VyLiAqL1xyXG4gICAgUkVBVVRIRU5USUNBVEU6ICdyZWF1dGhlbnRpY2F0ZScsXHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyBzaWduaW5nIGluIGEgdXNlci4gKi9cclxuICAgIFNJR05fSU46ICdzaWduSW4nXHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlbnVtZXJhdGlvbiBvZiB0aGUgcG9zc2libGUgZW1haWwgYWN0aW9uIHR5cGVzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBBY3Rpb25Db2RlT3BlcmF0aW9uID0ge1xyXG4gICAgLyoqIFRoZSBlbWFpbCBsaW5rIHNpZ24taW4gYWN0aW9uLiAqL1xyXG4gICAgRU1BSUxfU0lHTklOOiAnRU1BSUxfU0lHTklOJyxcclxuICAgIC8qKiBUaGUgcGFzc3dvcmQgcmVzZXQgYWN0aW9uLiAqL1xyXG4gICAgUEFTU1dPUkRfUkVTRVQ6ICdQQVNTV09SRF9SRVNFVCcsXHJcbiAgICAvKiogVGhlIGVtYWlsIHJldm9jYXRpb24gYWN0aW9uLiAqL1xyXG4gICAgUkVDT1ZFUl9FTUFJTDogJ1JFQ09WRVJfRU1BSUwnLFxyXG4gICAgLyoqIFRoZSByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvbiBlbWFpbCBhY3Rpb24uICovXHJcbiAgICBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTjogJ1JFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OJyxcclxuICAgIC8qKiBUaGUgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb24gZW1haWwgYWN0aW9uLiAqL1xyXG4gICAgVkVSSUZZX0FORF9DSEFOR0VfRU1BSUw6ICdWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCcsXHJcbiAgICAvKiogVGhlIGVtYWlsIHZlcmlmaWNhdGlvbiBhY3Rpb24uICovXHJcbiAgICBWRVJJRllfRU1BSUw6ICdWRVJJRllfRU1BSUwnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9kZWJ1Z0Vycm9yTWFwKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBbXCJhZG1pbi1yZXN0cmljdGVkLW9wZXJhdGlvblwiIC8qIEFETUlOX09OTFlfT1BFUkFUSU9OICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIHJlc3RyaWN0ZWQgdG8gYWRtaW5pc3RyYXRvcnMgb25seS4nLFxyXG4gICAgICAgIFtcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi9dOiAnJyxcclxuICAgICAgICBbXCJhcHAtbm90LWF1dGhvcml6ZWRcIiAvKiBBUFBfTk9UX0FVVEhPUklaRUQgKi9dOiBcIlRoaXMgYXBwLCBpZGVudGlmaWVkIGJ5IHRoZSBkb21haW4gd2hlcmUgaXQncyBob3N0ZWQsIGlzIG5vdCBcIiArXHJcbiAgICAgICAgICAgICdhdXRob3JpemVkIHRvIHVzZSBGaXJlYmFzZSBBdXRoZW50aWNhdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBBUEkga2V5LiAnICtcclxuICAgICAgICAgICAgJ1JldmlldyB5b3VyIGtleSBjb25maWd1cmF0aW9uIGluIHRoZSBHb29nbGUgQVBJIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJhcHAtbm90LWluc3RhbGxlZFwiIC8qIEFQUF9OT1RfSU5TVEFMTEVEICovXTogJ1RoZSByZXF1ZXN0ZWQgbW9iaWxlIGFwcGxpY2F0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGlkZW50aWZpZXIgKCcgK1xyXG4gICAgICAgICAgICAnQW5kcm9pZCBwYWNrYWdlIG5hbWUgb3IgaU9TIGJ1bmRsZSBJRCkgcHJvdmlkZWQgaXMgbm90IGluc3RhbGxlZCBvbiAnICtcclxuICAgICAgICAgICAgJ3RoaXMgZGV2aWNlLicsXHJcbiAgICAgICAgW1wiY2FwdGNoYS1jaGVjay1mYWlsZWRcIiAvKiBDQVBUQ0hBX0NIRUNLX0ZBSUxFRCAqL106ICdUaGUgcmVDQVBUQ0hBIHJlc3BvbnNlIHRva2VuIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkLCBleHBpcmVkLCAnICtcclxuICAgICAgICAgICAgJ2FscmVhZHkgdXNlZCBvciB0aGUgZG9tYWluIGFzc29jaWF0ZWQgd2l0aCBpdCBkb2VzIG5vdCBtYXRjaCB0aGUgbGlzdCAnICtcclxuICAgICAgICAgICAgJ29mIHdoaXRlbGlzdGVkIGRvbWFpbnMuJyxcclxuICAgICAgICBbXCJjb2RlLWV4cGlyZWRcIiAvKiBDT0RFX0VYUElSRUQgKi9dOiAnVGhlIFNNUyBjb2RlIGhhcyBleHBpcmVkLiBQbGVhc2UgcmUtc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgdG8gdHJ5ICcgK1xyXG4gICAgICAgICAgICAnYWdhaW4uJyxcclxuICAgICAgICBbXCJjb3Jkb3ZhLW5vdC1yZWFkeVwiIC8qIENPUkRPVkFfTk9UX1JFQURZICovXTogJ0NvcmRvdmEgZnJhbWV3b3JrIGlzIG5vdCByZWFkeS4nLFxyXG4gICAgICAgIFtcImNvcnMtdW5zdXBwb3J0ZWRcIiAvKiBDT1JTX1VOU1VQUE9SVEVEICovXTogJ1RoaXMgYnJvd3NlciBpcyBub3Qgc3VwcG9ydGVkLicsXHJcbiAgICAgICAgW1wiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiIC8qIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0UgKi9dOiAnVGhpcyBjcmVkZW50aWFsIGlzIGFscmVhZHkgYXNzb2NpYXRlZCB3aXRoIGEgZGlmZmVyZW50IHVzZXIgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcImN1c3RvbS10b2tlbi1taXNtYXRjaFwiIC8qIENSRURFTlRJQUxfTUlTTUFUQ0ggKi9dOiAnVGhlIGN1c3RvbSB0b2tlbiBjb3JyZXNwb25kcyB0byBhIGRpZmZlcmVudCBhdWRpZW5jZS4nLFxyXG4gICAgICAgIFtcInJlcXVpcmVzLXJlY2VudC1sb2dpblwiIC8qIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyBzZW5zaXRpdmUgYW5kIHJlcXVpcmVzIHJlY2VudCBhdXRoZW50aWNhdGlvbi4gTG9nIGluICcgK1xyXG4gICAgICAgICAgICAnYWdhaW4gYmVmb3JlIHJldHJ5aW5nIHRoaXMgcmVxdWVzdC4nLFxyXG4gICAgICAgIFtcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi9dOiAnQW5vdGhlciBGaXJlYmFzZSBTREsgd2FzIGluaXRpYWxpemVkIGFuZCBpcyB0cnlpbmcgdG8gdXNlIEF1dGggYmVmb3JlIEF1dGggaXMgJyArXHJcbiAgICAgICAgICAgICdpbml0aWFsaXplZC4gUGxlYXNlIGJlIHN1cmUgdG8gY2FsbCBgaW5pdGlhbGl6ZUF1dGhgIG9yIGBnZXRBdXRoYCBiZWZvcmUgJyArXHJcbiAgICAgICAgICAgICdzdGFydGluZyBhbnkgb3RoZXIgRmlyZWJhc2UgU0RLLicsXHJcbiAgICAgICAgW1wiZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWRcIiAvKiBEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRCAqL106ICdQbGVhc2UgYWN0aXZhdGUgRHluYW1pYyBMaW5rcyBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZSBhbmQgYWdyZWUgdG8gdGhlIHRlcm1zIGFuZCAnICtcclxuICAgICAgICAgICAgJ2NvbmRpdGlvbnMuJyxcclxuICAgICAgICBbXCJlbWFpbC1jaGFuZ2UtbmVlZHMtdmVyaWZpY2F0aW9uXCIgLyogRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTiAqL106ICdNdWx0aS1mYWN0b3IgdXNlcnMgbXVzdCBhbHdheXMgaGF2ZSBhIHZlcmlmaWVkIGVtYWlsLicsXHJcbiAgICAgICAgW1wiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBFTUFJTF9FWElTVFMgKi9dOiAnVGhlIGVtYWlsIGFkZHJlc3MgaXMgYWxyZWFkeSBpbiB1c2UgYnkgYW5vdGhlciBhY2NvdW50LicsXHJcbiAgICAgICAgW1wiZW11bGF0b3ItY29uZmlnLWZhaWxlZFwiIC8qIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQgKi9dOiAnQXV0aCBpbnN0YW5jZSBoYXMgYWxyZWFkeSBiZWVuIHVzZWQgdG8gbWFrZSBhIG5ldHdvcmsgY2FsbC4gQXV0aCBjYW4gJyArXHJcbiAgICAgICAgICAgICdubyBsb25nZXIgYmUgY29uZmlndXJlZCB0byB1c2UgdGhlIGVtdWxhdG9yLiBUcnkgY2FsbGluZyAnICtcclxuICAgICAgICAgICAgJ1wiY29ubmVjdEF1dGhFbXVsYXRvcigpXCIgc29vbmVyLicsXHJcbiAgICAgICAgW1wiZXhwaXJlZC1hY3Rpb24tY29kZVwiIC8qIEVYUElSRURfT09CX0NPREUgKi9dOiAnVGhlIGFjdGlvbiBjb2RlIGhhcyBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiAvKiBFWFBJUkVEX1BPUFVQX1JFUVVFU1QgKi9dOiAnVGhpcyBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGR1ZSB0byBhbm90aGVyIGNvbmZsaWN0aW5nIHBvcHVwIGJlaW5nIG9wZW5lZC4nLFxyXG4gICAgICAgIFtcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBwLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0FQUF9DUkVERU5USUFMICovXTogJ1RoZSBwaG9uZSB2ZXJpZmljYXRpb24gcmVxdWVzdCBjb250YWlucyBhbiBpbnZhbGlkIGFwcGxpY2F0aW9uIHZlcmlmaWVyLicgK1xyXG4gICAgICAgICAgICAnIFRoZSByZUNBUFRDSEEgdG9rZW4gcmVzcG9uc2UgaXMgZWl0aGVyIGludmFsaWQgb3IgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBwLWlkXCIgLyogSU5WQUxJRF9BUFBfSUQgKi9dOiAnVGhlIG1vYmlsZSBhcHAgaWRlbnRpZmllciBpcyBub3QgcmVnaXN0ZWQgZm9yIHRoZSBjdXJyZW50IHByb2plY3QuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBJTlZBTElEX0FVVEggKi9dOiBcIlRoaXMgdXNlcidzIGNyZWRlbnRpYWwgaXNuJ3QgdmFsaWQgZm9yIHRoaXMgcHJvamVjdC4gVGhpcyBjYW4gaGFwcGVuIFwiICtcclxuICAgICAgICAgICAgXCJpZiB0aGUgdXNlcidzIHRva2VuIGhhcyBiZWVuIHRhbXBlcmVkIHdpdGgsIG9yIGlmIHRoZSB1c2VyIGlzbid0IGZvciBcIiArXHJcbiAgICAgICAgICAgICd0aGUgcHJvamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBBUEkga2V5LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hdXRoLWV2ZW50XCIgLyogSU5WQUxJRF9BVVRIX0VWRU5UICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9DT0RFICovXTogJ1RoZSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUgdXNlZCB0byBjcmVhdGUgdGhlIHBob25lIGF1dGggY3JlZGVudGlhbCBpcyAnICtcclxuICAgICAgICAgICAgJ2ludmFsaWQuIFBsZWFzZSByZXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHNtcyBhbmQgYmUgc3VyZSB0byB1c2UgdGhlICcgK1xyXG4gICAgICAgICAgICAndmVyaWZpY2F0aW9uIGNvZGUgcHJvdmlkZWQgYnkgdGhlIHVzZXIuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNvbnRpbnVlLXVyaVwiIC8qIElOVkFMSURfQ09OVElOVUVfVVJJICovXTogJ1RoZSBjb250aW51ZSBVUkwgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi9dOiAnVGhlIGZvbGxvd2luZyBDb3Jkb3ZhIHBsdWdpbnMgbXVzdCBiZSBpbnN0YWxsZWQgdG8gZW5hYmxlIE9BdXRoIHNpZ24taW46ICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tYnVpbGRpbmZvLCBjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4sICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tYnJvd3NlcnRhYiwgY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyIGFuZCAnICtcclxuICAgICAgICAgICAgJ2NvcmRvdmEtcGx1Z2luLWN1c3RvbXVybHNjaGVtZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY3VzdG9tLXRva2VuXCIgLyogSU5WQUxJRF9DVVNUT01fVE9LRU4gKi9dOiAnVGhlIGN1c3RvbSB0b2tlbiBmb3JtYXQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgY2hlY2sgdGhlIGRvY3VtZW50YXRpb24uJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW5cIiAvKiBJTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU4gKi9dOiAnVGhlIHByb3ZpZGVkIGR5bmFtaWMgbGluayBkb21haW4gaXMgbm90IGNvbmZpZ3VyZWQgb3IgYXV0aG9yaXplZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZW1haWxcIiAvKiBJTlZBTElEX0VNQUlMICovXTogJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGJhZGx5IGZvcm1hdHRlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZW11bGF0b3Itc2NoZW1lXCIgLyogSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUUgKi9dOiAnRW11bGF0b3IgVVJMIG11c3Qgc3RhcnQgd2l0aCBhIHZhbGlkIHNjaGVtZSAoaHR0cDovLyBvciBodHRwczovLykuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi9dOiAnWW91ciBBUEkga2V5IGlzIGludmFsaWQsIHBsZWFzZSBjaGVjayB5b3UgaGF2ZSBjb3BpZWQgaXQgY29ycmVjdGx5LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jZXJ0LWhhc2hcIiAvKiBJTlZBTElEX0NFUlRfSEFTSCAqL106ICdUaGUgU0hBLTEgY2VydGlmaWNhdGUgaGFzaCBwcm92aWRlZCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi9dOiAnVGhlIHN1cHBsaWVkIGF1dGggY3JlZGVudGlhbCBpcyBtYWxmb3JtZWQgb3IgaGFzIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW1lc3NhZ2UtcGF5bG9hZFwiIC8qIElOVkFMSURfTUVTU0FHRV9QQVlMT0FEICovXTogJ1RoZSBlbWFpbCB0ZW1wbGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyBpbiBpdHMgbWVzc2FnZS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgZml4IGJ5IGdvaW5nIHRvIHRoZSBBdXRoIGVtYWlsIHRlbXBsYXRlcyBzZWN0aW9uIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIElOVkFMSURfTUZBX1NFU1NJT04gKi9dOiAnVGhlIHJlcXVlc3QgZG9lcyBub3QgY29udGFpbiBhIHZhbGlkIHByb29mIG9mIGZpcnN0IGZhY3RvciBzdWNjZXNzZnVsIHNpZ24taW4uJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW9hdXRoLXByb3ZpZGVyXCIgLyogSU5WQUxJRF9PQVVUSF9QUk9WSURFUiAqL106ICdFbWFpbEF1dGhQcm92aWRlciBpcyBub3Qgc3VwcG9ydGVkIGZvciB0aGlzIG9wZXJhdGlvbi4gVGhpcyBvcGVyYXRpb24gJyArXHJcbiAgICAgICAgICAgICdvbmx5IHN1cHBvcnRzIE9BdXRoIHByb3ZpZGVycy4nLFxyXG4gICAgICAgIFtcImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi9dOiAnVGhlIE9BdXRoIGNsaWVudCBJRCBwcm92aWRlZCBpcyBlaXRoZXIgaW52YWxpZCBvciBkb2VzIG5vdCBtYXRjaCB0aGUgJyArXHJcbiAgICAgICAgICAgICdzcGVjaWZpZWQgQVBJIGtleS4nLFxyXG4gICAgICAgIFtcInVuYXV0aG9yaXplZC1kb21haW5cIiAvKiBJTlZBTElEX09SSUdJTiAqL106ICdUaGlzIGRvbWFpbiBpcyBub3QgYXV0aG9yaXplZCBmb3IgT0F1dGggb3BlcmF0aW9ucyBmb3IgeW91ciBGaXJlYmFzZSAnICtcclxuICAgICAgICAgICAgJ3Byb2plY3QuIEVkaXQgdGhlIGxpc3Qgb2YgYXV0aG9yaXplZCBkb21haW5zIGZyb20gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9PT0JfQ09ERSAqL106ICdUaGUgYWN0aW9uIGNvZGUgaXMgaW52YWxpZC4gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBjb2RlIGlzIG1hbGZvcm1lZCwgJyArXHJcbiAgICAgICAgICAgICdleHBpcmVkLCBvciBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuJyxcclxuICAgICAgICBbXCJ3cm9uZy1wYXNzd29yZFwiIC8qIElOVkFMSURfUEFTU1dPUkQgKi9dOiAnVGhlIHBhc3N3b3JkIGlzIGludmFsaWQgb3IgdGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHBhc3N3b3JkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogSU5WQUxJRF9QRVJTSVNURU5DRSAqL106ICdUaGUgc3BlY2lmaWVkIHBlcnNpc3RlbmNlIHR5cGUgaXMgaW52YWxpZC4gSXQgY2FuIG9ubHkgYmUgbG9jYWwsIHNlc3Npb24gb3Igbm9uZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcGhvbmUtbnVtYmVyXCIgLyogSU5WQUxJRF9QSE9ORV9OVU1CRVIgKi9dOiAnVGhlIGZvcm1hdCBvZiB0aGUgcGhvbmUgbnVtYmVyIHByb3ZpZGVkIGlzIGluY29ycmVjdC4gUGxlYXNlIGVudGVyIHRoZSAnICtcclxuICAgICAgICAgICAgJ3Bob25lIG51bWJlciBpbiBhIGZvcm1hdCB0aGF0IGNhbiBiZSBwYXJzZWQgaW50byBFLjE2NCBmb3JtYXQuIEUuMTY0ICcgK1xyXG4gICAgICAgICAgICAncGhvbmUgbnVtYmVycyBhcmUgd3JpdHRlbiBpbiB0aGUgZm9ybWF0IFsrXVtjb3VudHJ5IGNvZGVdW3N1YnNjcmliZXIgJyArXHJcbiAgICAgICAgICAgICdudW1iZXIgaW5jbHVkaW5nIGFyZWEgY29kZV0uJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXByb3ZpZGVyLWlkXCIgLyogSU5WQUxJRF9QUk9WSURFUl9JRCAqL106ICdUaGUgc3BlY2lmaWVkIHByb3ZpZGVyIElEIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXJlY2lwaWVudC1lbWFpbFwiIC8qIElOVkFMSURfUkVDSVBJRU5UX0VNQUlMICovXTogJ1RoZSBlbWFpbCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGZhaWxlZCB0byBzZW5kIGFzIHRoZSBwcm92aWRlZCAnICtcclxuICAgICAgICAgICAgJ3JlY2lwaWVudCBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXNlbmRlclwiIC8qIElOVkFMSURfU0VOREVSICovXTogJ1RoZSBlbWFpbCB0ZW1wbGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGNvbnRhaW5zIGFuIGludmFsaWQgc2VuZGVyIGVtYWlsIG9yIG5hbWUuICcgK1xyXG4gICAgICAgICAgICAnUGxlYXNlIGZpeCBieSBnb2luZyB0byB0aGUgQXV0aCBlbWFpbCB0ZW1wbGF0ZXMgc2VjdGlvbiBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdmVyaWZpY2F0aW9uLWlkXCIgLyogSU5WQUxJRF9TRVNTSU9OX0lORk8gKi9dOiAnVGhlIHZlcmlmaWNhdGlvbiBJRCB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXRlbmFudC1pZFwiIC8qIElOVkFMSURfVEVOQU5UX0lEICovXTogXCJUaGUgQXV0aCBpbnN0YW5jZSdzIHRlbmFudCBJRCBpcyBpbnZhbGlkLlwiLFxyXG4gICAgICAgIFtcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi9dOiAnQW4gQW5kcm9pZCBQYWNrYWdlIE5hbWUgbXVzdCBiZSBwcm92aWRlZCBpZiB0aGUgQW5kcm9pZCBBcHAgaXMgcmVxdWlyZWQgdG8gYmUgaW5zdGFsbGVkLicsXHJcbiAgICAgICAgW1wiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqL106ICdCZSBzdXJlIHRvIGluY2x1ZGUgYXV0aERvbWFpbiB3aGVuIGNhbGxpbmcgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcCgpLCAnICtcclxuICAgICAgICAgICAgJ2J5IGZvbGxvd2luZyB0aGUgaW5zdHJ1Y3Rpb25zIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1hcHAtY3JlZGVudGlhbFwiIC8qIE1JU1NJTkdfQVBQX0NSRURFTlRJQUwgKi9dOiAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGlzIG1pc3NpbmcgYW4gYXBwbGljYXRpb24gdmVyaWZpZXIgJyArXHJcbiAgICAgICAgICAgICdhc3NlcnRpb24uIEEgcmVDQVBUQ0hBIHJlc3BvbnNlIHRva2VuIG5lZWRzIHRvIGJlIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy12ZXJpZmljYXRpb24tY29kZVwiIC8qIE1JU1NJTkdfQ09ERSAqL106ICdUaGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIHdhcyBjcmVhdGVkIHdpdGggYW4gZW1wdHkgU01TIHZlcmlmaWNhdGlvbiBjb2RlLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1jb250aW51ZS11cmlcIiAvKiBNSVNTSU5HX0NPTlRJTlVFX1VSSSAqL106ICdBIGNvbnRpbnVlIFVSTCBtdXN0IGJlIHByb3ZpZGVkIGluIHRoZSByZXF1ZXN0LicsXHJcbiAgICAgICAgW1wibWlzc2luZy1pZnJhbWUtc3RhcnRcIiAvKiBNSVNTSU5HX0lGUkFNRV9TVEFSVCAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1pb3MtYnVuZGxlLWlkXCIgLyogTUlTU0lOR19JT1NfQlVORExFX0lEICovXTogJ0FuIGlPUyBCdW5kbGUgSUQgbXVzdCBiZSBwcm92aWRlZCBpZiBhbiBBcHAgU3RvcmUgSUQgaXMgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLW9yLWludmFsaWQtbm9uY2VcIiAvKiBNSVNTSU5HX09SX0lOVkFMSURfTk9OQ0UgKi9dOiAnVGhlIHJlcXVlc3QgZG9lcyBub3QgY29udGFpbiBhIHZhbGlkIG5vbmNlLiBUaGlzIGNhbiBvY2N1ciBpZiB0aGUgJyArXHJcbiAgICAgICAgICAgICdTSEEtMjU2IGhhc2ggb2YgdGhlIHByb3ZpZGVkIHJhdyBub25jZSBkb2VzIG5vdCBtYXRjaCB0aGUgaGFzaGVkIG5vbmNlICcgK1xyXG4gICAgICAgICAgICAnaW4gdGhlIElEIHRva2VuIHBheWxvYWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogTUlTU0lOR19NRkFfSU5GTyAqL106ICdObyBzZWNvbmQgZmFjdG9yIGlkZW50aWZpZXIgaXMgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogTUlTU0lOR19NRkFfU0VTU0lPTiAqL106ICdUaGUgcmVxdWVzdCBpcyBtaXNzaW5nIHByb29mIG9mIGZpcnN0IGZhY3RvciBzdWNjZXNzZnVsIHNpZ24taW4uJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXBob25lLW51bWJlclwiIC8qIE1JU1NJTkdfUEhPTkVfTlVNQkVSICovXTogJ1RvIHNlbmQgdmVyaWZpY2F0aW9uIGNvZGVzLCBwcm92aWRlIGEgcGhvbmUgbnVtYmVyIGZvciB0aGUgcmVjaXBpZW50LicsXHJcbiAgICAgICAgW1wibWlzc2luZy12ZXJpZmljYXRpb24taWRcIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqL106ICdUaGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIHdhcyBjcmVhdGVkIHdpdGggYW4gZW1wdHkgdmVyaWZpY2F0aW9uIElELicsXHJcbiAgICAgICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBNT0RVTEVfREVTVFJPWUVEICovXTogJ1RoaXMgaW5zdGFuY2Ugb2YgRmlyZWJhc2VBcHAgaGFzIGJlZW4gZGVsZXRlZC4nLFxyXG4gICAgICAgIFtcIm11bHRpLWZhY3Rvci1pbmZvLW5vdC1mb3VuZFwiIC8qIE1GQV9JTkZPX05PVF9GT1VORCAqL106ICdUaGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgc2Vjb25kIGZhY3RvciBtYXRjaGluZyB0aGUgaWRlbnRpZmllciBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovXTogJ1Byb29mIG9mIG93bmVyc2hpcCBvZiBhIHNlY29uZCBmYWN0b3IgaXMgcmVxdWlyZWQgdG8gY29tcGxldGUgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIiAvKiBORUVEX0NPTkZJUk1BVElPTiAqL106ICdBbiBhY2NvdW50IGFscmVhZHkgZXhpc3RzIHdpdGggdGhlIHNhbWUgZW1haWwgYWRkcmVzcyBidXQgZGlmZmVyZW50ICcgK1xyXG4gICAgICAgICAgICAnc2lnbi1pbiBjcmVkZW50aWFscy4gU2lnbiBpbiB1c2luZyBhIHByb3ZpZGVyIGFzc29jaWF0ZWQgd2l0aCB0aGlzICcgK1xyXG4gICAgICAgICAgICAnZW1haWwgYWRkcmVzcy4nLFxyXG4gICAgICAgIFtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovXTogJ0EgbmV0d29yayBBdXRoRXJyb3IgKHN1Y2ggYXMgdGltZW91dCwgaW50ZXJydXB0ZWQgY29ubmVjdGlvbiBvciB1bnJlYWNoYWJsZSBob3N0KSBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJuby1hdXRoLWV2ZW50XCIgLyogTk9fQVVUSF9FVkVOVCAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibm8tc3VjaC1wcm92aWRlclwiIC8qIE5PX1NVQ0hfUFJPVklERVIgKi9dOiAnVXNlciB3YXMgbm90IGxpbmtlZCB0byBhbiBhY2NvdW50IHdpdGggdGhlIGdpdmVuIHByb3ZpZGVyLicsXHJcbiAgICAgICAgW1wibnVsbC11c2VyXCIgLyogTlVMTF9VU0VSICovXTogJ0EgbnVsbCB1c2VyIG9iamVjdCB3YXMgcHJvdmlkZWQgYXMgdGhlIGFyZ3VtZW50IGZvciBhbiBvcGVyYXRpb24gd2hpY2ggJyArXHJcbiAgICAgICAgICAgICdyZXF1aXJlcyBhIG5vbi1udWxsIHVzZXIgb2JqZWN0LicsXHJcbiAgICAgICAgW1wib3BlcmF0aW9uLW5vdC1hbGxvd2VkXCIgLyogT1BFUkFUSU9OX05PVF9BTExPV0VEICovXTogJ1RoZSBnaXZlbiBzaWduLWluIHByb3ZpZGVyIGlzIGRpc2FibGVkIGZvciB0aGlzIEZpcmViYXNlIHByb2plY3QuICcgK1xyXG4gICAgICAgICAgICAnRW5hYmxlIGl0IGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLCB1bmRlciB0aGUgc2lnbi1pbiBtZXRob2QgdGFiIG9mIHRoZSAnICtcclxuICAgICAgICAgICAgJ0F1dGggc2VjdGlvbi4nLFxyXG4gICAgICAgIFtcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIHRoZSBlbnZpcm9ubWVudCB0aGlzIGFwcGxpY2F0aW9uIGlzICcgK1xyXG4gICAgICAgICAgICAncnVubmluZyBvbi4gXCJsb2NhdGlvbi5wcm90b2NvbFwiIG11c3QgYmUgaHR0cCwgaHR0cHMgb3IgY2hyb21lLWV4dGVuc2lvbicgK1xyXG4gICAgICAgICAgICAnIGFuZCB3ZWIgc3RvcmFnZSBtdXN0IGJlIGVuYWJsZWQuJyxcclxuICAgICAgICBbXCJwb3B1cC1ibG9ja2VkXCIgLyogUE9QVVBfQkxPQ0tFRCAqL106ICdVbmFibGUgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB3aXRoIHRoZSBwb3B1cC4gSXQgbWF5IGhhdmUgYmVlbiBibG9ja2VkIGJ5IHRoZSBicm93c2VyLicsXHJcbiAgICAgICAgW1wicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIiAvKiBQT1BVUF9DTE9TRURfQllfVVNFUiAqL106ICdUaGUgcG9wdXAgaGFzIGJlZW4gY2xvc2VkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nIHRoZSBvcGVyYXRpb24uJyxcclxuICAgICAgICBbXCJwcm92aWRlci1hbHJlYWR5LWxpbmtlZFwiIC8qIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEICovXTogJ1VzZXIgY2FuIG9ubHkgYmUgbGlua2VkIHRvIG9uZSBpZGVudGl0eSBmb3IgdGhlIGdpdmVuIHByb3ZpZGVyLicsXHJcbiAgICAgICAgW1wicXVvdGEtZXhjZWVkZWRcIiAvKiBRVU9UQV9FWENFRURFRCAqL106IFwiVGhlIHByb2plY3QncyBxdW90YSBmb3IgdGhpcyBvcGVyYXRpb24gaGFzIGJlZW4gZXhjZWVkZWQuXCIsXHJcbiAgICAgICAgW1wicmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXJcIiAvKiBSRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUiAqL106ICdUaGUgcmVkaXJlY3Qgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBieSB0aGUgdXNlciBiZWZvcmUgZmluYWxpemluZy4nLFxyXG4gICAgICAgIFtcInJlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nXCIgLyogUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkcgKi9dOiAnQSByZWRpcmVjdCBzaWduLWluIG9wZXJhdGlvbiBpcyBhbHJlYWR5IHBlbmRpbmcuJyxcclxuICAgICAgICBbXCJyZWplY3RlZC1jcmVkZW50aWFsXCIgLyogUkVKRUNURURfQ1JFREVOVElBTCAqL106ICdUaGUgcmVxdWVzdCBjb250YWlucyBtYWxmb3JtZWQgb3IgbWlzbWF0Y2hpbmcgY3JlZGVudGlhbHMuJyxcclxuICAgICAgICBbXCJzZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlXCIgLyogU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEICovXTogJ1RoZSBzZWNvbmQgZmFjdG9yIGlzIGFscmVhZHkgZW5yb2xsZWQgb24gdGhpcyBhY2NvdW50LicsXHJcbiAgICAgICAgW1wibWF4aW11bS1zZWNvbmQtZmFjdG9yLWNvdW50LWV4Y2VlZGVkXCIgLyogU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRCAqL106ICdUaGUgbWF4aW11bSBhbGxvd2VkIG51bWJlciBvZiBzZWNvbmQgZmFjdG9ycyBvbiBhIHVzZXIgaGFzIGJlZW4gZXhjZWVkZWQuJyxcclxuICAgICAgICBbXCJ0ZW5hbnQtaWQtbWlzbWF0Y2hcIiAvKiBURU5BTlRfSURfTUlTTUFUQ0ggKi9dOiBcIlRoZSBwcm92aWRlZCB0ZW5hbnQgSUQgZG9lcyBub3QgbWF0Y2ggdGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSURcIixcclxuICAgICAgICBbXCJ0aW1lb3V0XCIgLyogVElNRU9VVCAqL106ICdUaGUgb3BlcmF0aW9uIGhhcyB0aW1lZCBvdXQuJyxcclxuICAgICAgICBbXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovXTogXCJUaGUgdXNlcidzIGNyZWRlbnRpYWwgaXMgbm8gbG9uZ2VyIHZhbGlkLiBUaGUgdXNlciBtdXN0IHNpZ24gaW4gYWdhaW4uXCIsXHJcbiAgICAgICAgW1widG9vLW1hbnktcmVxdWVzdHNcIiAvKiBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi9dOiAnV2UgaGF2ZSBibG9ja2VkIGFsbCByZXF1ZXN0cyBmcm9tIHRoaXMgZGV2aWNlIGR1ZSB0byB1bnVzdWFsIGFjdGl2aXR5LiAnICtcclxuICAgICAgICAgICAgJ1RyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICAgIFtcInVuYXV0aG9yaXplZC1jb250aW51ZS11cmlcIiAvKiBVTkFVVEhPUklaRURfRE9NQUlOICovXTogJ1RoZSBkb21haW4gb2YgdGhlIGNvbnRpbnVlIFVSTCBpcyBub3Qgd2hpdGVsaXN0ZWQuICBQbGVhc2Ugd2hpdGVsaXN0ICcgK1xyXG4gICAgICAgICAgICAndGhlIGRvbWFpbiBpbiB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLWZpcnN0LWZhY3RvclwiIC8qIFVOU1VQUE9SVEVEX0ZJUlNUX0ZBQ1RPUiAqL106ICdFbnJvbGxpbmcgYSBzZWNvbmQgZmFjdG9yIG9yIHNpZ25pbmcgaW4gd2l0aCBhIG11bHRpLWZhY3RvciBhY2NvdW50IHJlcXVpcmVzIHNpZ24taW4gd2l0aCBhIHN1cHBvcnRlZCBmaXJzdCBmYWN0b3IuJyxcclxuICAgICAgICBbXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogVU5TVVBQT1JURURfUEVSU0lTVEVOQ0UgKi9dOiAnVGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgc3BlY2lmaWVkIHBlcnNpc3RlbmNlIHR5cGUuJyxcclxuICAgICAgICBbXCJ1bnN1cHBvcnRlZC10ZW5hbnQtb3BlcmF0aW9uXCIgLyogVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTiAqL106ICdUaGlzIG9wZXJhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIGEgbXVsdGktdGVuYW50IGNvbnRleHQuJyxcclxuICAgICAgICBbXCJ1bnZlcmlmaWVkLWVtYWlsXCIgLyogVU5WRVJJRklFRF9FTUFJTCAqL106ICdUaGUgb3BlcmF0aW9uIHJlcXVpcmVzIGEgdmVyaWZpZWQgZW1haWwuJyxcclxuICAgICAgICBbXCJ1c2VyLWNhbmNlbGxlZFwiIC8qIFVTRVJfQ0FOQ0VMTEVEICovXTogJ1RoZSB1c2VyIGRpZCBub3QgZ3JhbnQgeW91ciBhcHBsaWNhdGlvbiB0aGUgcGVybWlzc2lvbnMgaXQgcmVxdWVzdGVkLicsXHJcbiAgICAgICAgW1widXNlci1ub3QtZm91bmRcIiAvKiBVU0VSX0RFTEVURUQgKi9dOiAnVGhlcmUgaXMgbm8gdXNlciByZWNvcmQgY29ycmVzcG9uZGluZyB0byB0aGlzIGlkZW50aWZpZXIuIFRoZSB1c2VyIG1heSAnICtcclxuICAgICAgICAgICAgJ2hhdmUgYmVlbiBkZWxldGVkLicsXHJcbiAgICAgICAgW1widXNlci1kaXNhYmxlZFwiIC8qIFVTRVJfRElTQUJMRUQgKi9dOiAnVGhlIHVzZXIgYWNjb3VudCBoYXMgYmVlbiBkaXNhYmxlZCBieSBhbiBhZG1pbmlzdHJhdG9yLicsXHJcbiAgICAgICAgW1widXNlci1taXNtYXRjaFwiIC8qIFVTRVJfTUlTTUFUQ0ggKi9dOiAnVGhlIHN1cHBsaWVkIGNyZWRlbnRpYWxzIGRvIG5vdCBjb3JyZXNwb25kIHRvIHRoZSBwcmV2aW91c2x5IHNpZ25lZCBpbiB1c2VyLicsXHJcbiAgICAgICAgW1widXNlci1zaWduZWQtb3V0XCIgLyogVVNFUl9TSUdORURfT1VUICovXTogJycsXHJcbiAgICAgICAgW1wid2Vhay1wYXNzd29yZFwiIC8qIFdFQUtfUEFTU1dPUkQgKi9dOiAnVGhlIHBhc3N3b3JkIG11c3QgYmUgNiBjaGFyYWN0ZXJzIGxvbmcgb3IgbW9yZS4nLFxyXG4gICAgICAgIFtcIndlYi1zdG9yYWdlLXVuc3VwcG9ydGVkXCIgLyogV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQgKi9dOiAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQgb3IgM3JkIHBhcnR5IGNvb2tpZXMgYW5kIGRhdGEgbWF5IGJlIGRpc2FibGVkLicsXHJcbiAgICAgICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEFMUkVBRFlfSU5JVElBTElaRUQgKi9dOiAnaW5pdGlhbGl6ZUF1dGgoKSBoYXMgYWxyZWFkeSBiZWVuIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICAnZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUF1dGgoKSB3aXRoIHRoZSAnICtcclxuICAgICAgICAgICAgJ3NhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRBdXRoKCkgdG8gcmV0dXJuIHRoZScgK1xyXG4gICAgICAgICAgICAnIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuJ1xyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBfcHJvZEVycm9yTWFwKCkge1xyXG4gICAgLy8gV2Ugd2lsbCBpbmNsdWRlIHRoaXMgb25lIG1lc3NhZ2UgaW4gdGhlIHByb2QgZXJyb3IgbWFwIHNpbmNlIGJ5IHRoZSB2ZXJ5XHJcbiAgICAvLyBuYXR1cmUgb2YgdGhpcyBlcnJvciwgZGV2ZWxvcGVycyB3aWxsIG5ldmVyIGJlIGFibGUgdG8gc2VlIHRoZSBtZXNzYWdlXHJcbiAgICAvLyB1c2luZyB0aGUgZGVidWdFcnJvck1hcCAod2hpY2ggaXMgaW5zdGFsbGVkIGR1cmluZyBhdXRoIGluaXRpYWxpemF0aW9uKS5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgW1wiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqL106ICdBbm90aGVyIEZpcmViYXNlIFNESyB3YXMgaW5pdGlhbGl6ZWQgYW5kIGlzIHRyeWluZyB0byB1c2UgQXV0aCBiZWZvcmUgQXV0aCBpcyAnICtcclxuICAgICAgICAgICAgJ2luaXRpYWxpemVkLiBQbGVhc2UgYmUgc3VyZSB0byBjYWxsIGBpbml0aWFsaXplQXV0aGAgb3IgYGdldEF1dGhgIGJlZm9yZSAnICtcclxuICAgICAgICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJ1xyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQSB2ZXJib3NlIGVycm9yIG1hcCB3aXRoIGRldGFpbGVkIGRlc2NyaXB0aW9ucyBmb3IgbW9zdCBlcnJvciBjb2Rlcy5cclxuICpcclxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZGVidWdFcnJvck1hcCA9IF9kZWJ1Z0Vycm9yTWFwO1xyXG4vKipcclxuICogQSBtaW5pbWFsIGVycm9yIG1hcCB3aXRoIGFsbCB2ZXJib3NlIGVycm9yIG1lc3NhZ2VzIHN0cmlwcGVkLlxyXG4gKlxyXG4gKiBTZWUgZGlzY3Vzc2lvbiBhdCB7QGxpbmsgQXV0aEVycm9yTWFwfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBwcm9kRXJyb3JNYXAgPSBfcHJvZEVycm9yTWFwO1xyXG5jb25zdCBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgX3Byb2RFcnJvck1hcCgpKTtcclxuLyoqXHJcbiAqIEEgbWFwIG9mIHBvdGVudGlhbCBgQXV0aGAgZXJyb3IgY29kZXMsIGZvciBlYXNpZXIgY29tcGFyaXNvbiB3aXRoIGVycm9yc1xyXG4gKiB0aHJvd24gYnkgdGhlIFNESy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogTm90ZSB0aGF0IHlvdSBjYW4ndCB0cmVlLXNoYWtlIGluZGl2aWR1YWwga2V5c1xyXG4gKiBpbiB0aGUgbWFwLCBzbyBieSB1c2luZyB0aGUgbWFwIHlvdSBtaWdodCBzdWJzdGFudGlhbGx5IGluY3JlYXNlIHlvdXJcclxuICogYnVuZGxlIHNpemUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEFVVEhfRVJST1JfQ09ERVNfTUFQX0RPX05PVF9VU0VfSU5URVJOQUxMWSA9IHtcclxuICAgIEFETUlOX09OTFlfT1BFUkFUSU9OOiAnYXV0aC9hZG1pbi1yZXN0cmljdGVkLW9wZXJhdGlvbicsXHJcbiAgICBBUkdVTUVOVF9FUlJPUjogJ2F1dGgvYXJndW1lbnQtZXJyb3InLFxyXG4gICAgQVBQX05PVF9BVVRIT1JJWkVEOiAnYXV0aC9hcHAtbm90LWF1dGhvcml6ZWQnLFxyXG4gICAgQVBQX05PVF9JTlNUQUxMRUQ6ICdhdXRoL2FwcC1ub3QtaW5zdGFsbGVkJyxcclxuICAgIENBUFRDSEFfQ0hFQ0tfRkFJTEVEOiAnYXV0aC9jYXB0Y2hhLWNoZWNrLWZhaWxlZCcsXHJcbiAgICBDT0RFX0VYUElSRUQ6ICdhdXRoL2NvZGUtZXhwaXJlZCcsXHJcbiAgICBDT1JET1ZBX05PVF9SRUFEWTogJ2F1dGgvY29yZG92YS1ub3QtcmVhZHknLFxyXG4gICAgQ09SU19VTlNVUFBPUlRFRDogJ2F1dGgvY29ycy11bnN1cHBvcnRlZCcsXHJcbiAgICBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFOiAnYXV0aC9jcmVkZW50aWFsLWFscmVhZHktaW4tdXNlJyxcclxuICAgIENSRURFTlRJQUxfTUlTTUFUQ0g6ICdhdXRoL2N1c3RvbS10b2tlbi1taXNtYXRjaCcsXHJcbiAgICBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU46ICdhdXRoL3JlcXVpcmVzLXJlY2VudC1sb2dpbicsXHJcbiAgICBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEg6ICdhdXRoL2RlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGgnLFxyXG4gICAgRFlOQU1JQ19MSU5LX05PVF9BQ1RJVkFURUQ6ICdhdXRoL2R5bmFtaWMtbGluay1ub3QtYWN0aXZhdGVkJyxcclxuICAgIEVNQUlMX0NIQU5HRV9ORUVEU19WRVJJRklDQVRJT046ICdhdXRoL2VtYWlsLWNoYW5nZS1uZWVkcy12ZXJpZmljYXRpb24nLFxyXG4gICAgRU1BSUxfRVhJU1RTOiAnYXV0aC9lbWFpbC1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBFTVVMQVRPUl9DT05GSUdfRkFJTEVEOiAnYXV0aC9lbXVsYXRvci1jb25maWctZmFpbGVkJyxcclxuICAgIEVYUElSRURfT09CX0NPREU6ICdhdXRoL2V4cGlyZWQtYWN0aW9uLWNvZGUnLFxyXG4gICAgRVhQSVJFRF9QT1BVUF9SRVFVRVNUOiAnYXV0aC9jYW5jZWxsZWQtcG9wdXAtcmVxdWVzdCcsXHJcbiAgICBJTlRFUk5BTF9FUlJPUjogJ2F1dGgvaW50ZXJuYWwtZXJyb3InLFxyXG4gICAgSU5WQUxJRF9BUElfS0VZOiAnYXV0aC9pbnZhbGlkLWFwaS1rZXknLFxyXG4gICAgSU5WQUxJRF9BUFBfQ1JFREVOVElBTDogJ2F1dGgvaW52YWxpZC1hcHAtY3JlZGVudGlhbCcsXHJcbiAgICBJTlZBTElEX0FQUF9JRDogJ2F1dGgvaW52YWxpZC1hcHAtaWQnLFxyXG4gICAgSU5WQUxJRF9BVVRIOiAnYXV0aC9pbnZhbGlkLXVzZXItdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9BVVRIX0VWRU5UOiAnYXV0aC9pbnZhbGlkLWF1dGgtZXZlbnQnLFxyXG4gICAgSU5WQUxJRF9DRVJUX0hBU0g6ICdhdXRoL2ludmFsaWQtY2VydC1oYXNoJyxcclxuICAgIElOVkFMSURfQ09ERTogJ2F1dGgvaW52YWxpZC12ZXJpZmljYXRpb24tY29kZScsXHJcbiAgICBJTlZBTElEX0NPTlRJTlVFX1VSSTogJ2F1dGgvaW52YWxpZC1jb250aW51ZS11cmknLFxyXG4gICAgSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT046ICdhdXRoL2ludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uJyxcclxuICAgIElOVkFMSURfQ1VTVE9NX1RPS0VOOiAnYXV0aC9pbnZhbGlkLWN1c3RvbS10b2tlbicsXHJcbiAgICBJTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU46ICdhdXRoL2ludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpbicsXHJcbiAgICBJTlZBTElEX0VNQUlMOiAnYXV0aC9pbnZhbGlkLWVtYWlsJyxcclxuICAgIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FOiAnYXV0aC9pbnZhbGlkLWVtdWxhdG9yLXNjaGVtZScsXHJcbiAgICBJTlZBTElEX0lEUF9SRVNQT05TRTogJ2F1dGgvaW52YWxpZC1jcmVkZW50aWFsJyxcclxuICAgIElOVkFMSURfTUVTU0FHRV9QQVlMT0FEOiAnYXV0aC9pbnZhbGlkLW1lc3NhZ2UtcGF5bG9hZCcsXHJcbiAgICBJTlZBTElEX01GQV9TRVNTSU9OOiAnYXV0aC9pbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uJyxcclxuICAgIElOVkFMSURfT0FVVEhfQ0xJRU5UX0lEOiAnYXV0aC9pbnZhbGlkLW9hdXRoLWNsaWVudC1pZCcsXHJcbiAgICBJTlZBTElEX09BVVRIX1BST1ZJREVSOiAnYXV0aC9pbnZhbGlkLW9hdXRoLXByb3ZpZGVyJyxcclxuICAgIElOVkFMSURfT09CX0NPREU6ICdhdXRoL2ludmFsaWQtYWN0aW9uLWNvZGUnLFxyXG4gICAgSU5WQUxJRF9PUklHSU46ICdhdXRoL3VuYXV0aG9yaXplZC1kb21haW4nLFxyXG4gICAgSU5WQUxJRF9QQVNTV09SRDogJ2F1dGgvd3JvbmctcGFzc3dvcmQnLFxyXG4gICAgSU5WQUxJRF9QRVJTSVNURU5DRTogJ2F1dGgvaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlJyxcclxuICAgIElOVkFMSURfUEhPTkVfTlVNQkVSOiAnYXV0aC9pbnZhbGlkLXBob25lLW51bWJlcicsXHJcbiAgICBJTlZBTElEX1BST1ZJREVSX0lEOiAnYXV0aC9pbnZhbGlkLXByb3ZpZGVyLWlkJyxcclxuICAgIElOVkFMSURfUkVDSVBJRU5UX0VNQUlMOiAnYXV0aC9pbnZhbGlkLXJlY2lwaWVudC1lbWFpbCcsXHJcbiAgICBJTlZBTElEX1NFTkRFUjogJ2F1dGgvaW52YWxpZC1zZW5kZXInLFxyXG4gICAgSU5WQUxJRF9TRVNTSU9OX0lORk86ICdhdXRoL2ludmFsaWQtdmVyaWZpY2F0aW9uLWlkJyxcclxuICAgIElOVkFMSURfVEVOQU5UX0lEOiAnYXV0aC9pbnZhbGlkLXRlbmFudC1pZCcsXHJcbiAgICBNRkFfSU5GT19OT1RfRk9VTkQ6ICdhdXRoL211bHRpLWZhY3Rvci1pbmZvLW5vdC1mb3VuZCcsXHJcbiAgICBNRkFfUkVRVUlSRUQ6ICdhdXRoL211bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkJyxcclxuICAgIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUU6ICdhdXRoL21pc3NpbmctYW5kcm9pZC1wa2ctbmFtZScsXHJcbiAgICBNSVNTSU5HX0FQUF9DUkVERU5USUFMOiAnYXV0aC9taXNzaW5nLWFwcC1jcmVkZW50aWFsJyxcclxuICAgIE1JU1NJTkdfQVVUSF9ET01BSU46ICdhdXRoL2F1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZCcsXHJcbiAgICBNSVNTSU5HX0NPREU6ICdhdXRoL21pc3NpbmctdmVyaWZpY2F0aW9uLWNvZGUnLFxyXG4gICAgTUlTU0lOR19DT05USU5VRV9VUkk6ICdhdXRoL21pc3NpbmctY29udGludWUtdXJpJyxcclxuICAgIE1JU1NJTkdfSUZSQU1FX1NUQVJUOiAnYXV0aC9taXNzaW5nLWlmcmFtZS1zdGFydCcsXHJcbiAgICBNSVNTSU5HX0lPU19CVU5ETEVfSUQ6ICdhdXRoL21pc3NpbmctaW9zLWJ1bmRsZS1pZCcsXHJcbiAgICBNSVNTSU5HX09SX0lOVkFMSURfTk9OQ0U6ICdhdXRoL21pc3Npbmctb3ItaW52YWxpZC1ub25jZScsXHJcbiAgICBNSVNTSU5HX01GQV9JTkZPOiAnYXV0aC9taXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvJyxcclxuICAgIE1JU1NJTkdfTUZBX1NFU1NJT046ICdhdXRoL21pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb24nLFxyXG4gICAgTUlTU0lOR19QSE9ORV9OVU1CRVI6ICdhdXRoL21pc3NpbmctcGhvbmUtbnVtYmVyJyxcclxuICAgIE1JU1NJTkdfU0VTU0lPTl9JTkZPOiAnYXV0aC9taXNzaW5nLXZlcmlmaWNhdGlvbi1pZCcsXHJcbiAgICBNT0RVTEVfREVTVFJPWUVEOiAnYXV0aC9hcHAtZGVsZXRlZCcsXHJcbiAgICBORUVEX0NPTkZJUk1BVElPTjogJ2F1dGgvYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbCcsXHJcbiAgICBORVRXT1JLX1JFUVVFU1RfRkFJTEVEOiAnYXV0aC9uZXR3b3JrLXJlcXVlc3QtZmFpbGVkJyxcclxuICAgIE5VTExfVVNFUjogJ2F1dGgvbnVsbC11c2VyJyxcclxuICAgIE5PX0FVVEhfRVZFTlQ6ICdhdXRoL25vLWF1dGgtZXZlbnQnLFxyXG4gICAgTk9fU1VDSF9QUk9WSURFUjogJ2F1dGgvbm8tc3VjaC1wcm92aWRlcicsXHJcbiAgICBPUEVSQVRJT05fTk9UX0FMTE9XRUQ6ICdhdXRoL29wZXJhdGlvbi1ub3QtYWxsb3dlZCcsXHJcbiAgICBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRDogJ2F1dGgvb3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudCcsXHJcbiAgICBQT1BVUF9CTE9DS0VEOiAnYXV0aC9wb3B1cC1ibG9ja2VkJyxcclxuICAgIFBPUFVQX0NMT1NFRF9CWV9VU0VSOiAnYXV0aC9wb3B1cC1jbG9zZWQtYnktdXNlcicsXHJcbiAgICBQUk9WSURFUl9BTFJFQURZX0xJTktFRDogJ2F1dGgvcHJvdmlkZXItYWxyZWFkeS1saW5rZWQnLFxyXG4gICAgUVVPVEFfRVhDRUVERUQ6ICdhdXRoL3F1b3RhLWV4Y2VlZGVkJyxcclxuICAgIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSOiAnYXV0aC9yZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlcicsXHJcbiAgICBSRURJUkVDVF9PUEVSQVRJT05fUEVORElORzogJ2F1dGgvcmVkaXJlY3Qtb3BlcmF0aW9uLXBlbmRpbmcnLFxyXG4gICAgUkVKRUNURURfQ1JFREVOVElBTDogJ2F1dGgvcmVqZWN0ZWQtY3JlZGVudGlhbCcsXHJcbiAgICBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQ6ICdhdXRoL3NlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRDogJ2F1dGgvbWF4aW11bS1zZWNvbmQtZmFjdG9yLWNvdW50LWV4Y2VlZGVkJyxcclxuICAgIFRFTkFOVF9JRF9NSVNNQVRDSDogJ2F1dGgvdGVuYW50LWlkLW1pc21hdGNoJyxcclxuICAgIFRJTUVPVVQ6ICdhdXRoL3RpbWVvdXQnLFxyXG4gICAgVE9LRU5fRVhQSVJFRDogJ2F1dGgvdXNlci10b2tlbi1leHBpcmVkJyxcclxuICAgIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUjogJ2F1dGgvdG9vLW1hbnktcmVxdWVzdHMnLFxyXG4gICAgVU5BVVRIT1JJWkVEX0RPTUFJTjogJ2F1dGgvdW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaScsXHJcbiAgICBVTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1I6ICdhdXRoL3Vuc3VwcG9ydGVkLWZpcnN0LWZhY3RvcicsXHJcbiAgICBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRTogJ2F1dGgvdW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZScsXHJcbiAgICBVTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OOiAnYXV0aC91bnN1cHBvcnRlZC10ZW5hbnQtb3BlcmF0aW9uJyxcclxuICAgIFVOVkVSSUZJRURfRU1BSUw6ICdhdXRoL3VudmVyaWZpZWQtZW1haWwnLFxyXG4gICAgVVNFUl9DQU5DRUxMRUQ6ICdhdXRoL3VzZXItY2FuY2VsbGVkJyxcclxuICAgIFVTRVJfREVMRVRFRDogJ2F1dGgvdXNlci1ub3QtZm91bmQnLFxyXG4gICAgVVNFUl9ESVNBQkxFRDogJ2F1dGgvdXNlci1kaXNhYmxlZCcsXHJcbiAgICBVU0VSX01JU01BVENIOiAnYXV0aC91c2VyLW1pc21hdGNoJyxcclxuICAgIFVTRVJfU0lHTkVEX09VVDogJ2F1dGgvdXNlci1zaWduZWQtb3V0JyxcclxuICAgIFdFQUtfUEFTU1dPUkQ6ICdhdXRoL3dlYWstcGFzc3dvcmQnLFxyXG4gICAgV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQ6ICdhdXRoL3dlYi1zdG9yYWdlLXVuc3VwcG9ydGVkJyxcclxuICAgIEFMUkVBRFlfSU5JVElBTElaRUQ6ICdhdXRoL2FscmVhZHktaW5pdGlhbGl6ZWQnXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ0NsaWVudCA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hdXRoJyk7XHJcbmZ1bmN0aW9uIF9sb2dFcnJvcihtc2csIC4uLmFyZ3MpIHtcclxuICAgIGlmIChsb2dDbGllbnQubG9nTGV2ZWwgPD0gTG9nTGV2ZWwuRVJST1IpIHtcclxuICAgICAgICBsb2dDbGllbnQuZXJyb3IoYEF1dGggKCR7U0RLX1ZFUlNJT059KTogJHttc2d9YCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2ZhaWwoYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgdGhyb3cgY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfY3JlYXRlRXJyb3IoYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgcmV0dXJuIGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UoYXV0aCwgY29kZSwgbWVzc2FnZSkge1xyXG4gICAgY29uc3QgZXJyb3JNYXAgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHByb2RFcnJvck1hcCgpKSwgeyBbY29kZV06IG1lc3NhZ2UgfSk7XHJcbiAgICBjb25zdCBmYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIGVycm9yTWFwKTtcclxuICAgIHJldHVybiBmYWN0b3J5LmNyZWF0ZShjb2RlLCB7XHJcbiAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lLFxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgb2JqZWN0LCBpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgY29uc3RydWN0b3JJbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgaWYgKCEob2JqZWN0IGluc3RhbmNlb2YgY29uc3RydWN0b3JJbnN0YW5jZSkpIHtcclxuICAgICAgICBpZiAoY29uc3RydWN0b3JJbnN0YW5jZS5uYW1lICE9PSBvYmplY3QuY29uc3RydWN0b3IubmFtZSkge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIGBUeXBlIG9mICR7b2JqZWN0LmNvbnN0cnVjdG9yLm5hbWV9IGRvZXMgbm90IG1hdGNoIGV4cGVjdGVkIGluc3RhbmNlLmAgK1xyXG4gICAgICAgICAgICBgRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgQXV0aCBTREs/YCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICBpZiAodHlwZW9mIGF1dGhPckNvZGUgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgY29uc3QgY29kZSA9IHJlc3RbMF07XHJcbiAgICAgICAgY29uc3QgZnVsbFBhcmFtcyA9IFsuLi5yZXN0LnNsaWNlKDEpXTtcclxuICAgICAgICBpZiAoZnVsbFBhcmFtc1swXSkge1xyXG4gICAgICAgICAgICBmdWxsUGFyYW1zWzBdLmFwcE5hbWUgPSBhdXRoT3JDb2RlLm5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhdXRoT3JDb2RlLl9lcnJvckZhY3RvcnkuY3JlYXRlKGNvZGUsIC4uLmZ1bGxQYXJhbXMpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWS5jcmVhdGUoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX2Fzc2VydChhc3NlcnRpb24sIGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVW5jb25kaXRpb25hbGx5IGZhaWxzLCB0aHJvd2luZyBhbiBpbnRlcm5hbCBlcnJvciB3aXRoIHRoZSBnaXZlbiBtZXNzYWdlLlxyXG4gKlxyXG4gKiBAcGFyYW0gZmFpbHVyZSB0eXBlIG9mIGZhaWx1cmUgZW5jb3VudGVyZWRcclxuICogQHRocm93cyBFcnJvclxyXG4gKi9cclxuZnVuY3Rpb24gZGVidWdGYWlsKGZhaWx1cmUpIHtcclxuICAgIC8vIExvZyB0aGUgZmFpbHVyZSBpbiBhZGRpdGlvbiB0byB0aHJvdyBhbiBleGNlcHRpb24sIGp1c3QgaW4gY2FzZSB0aGVcclxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXHJcbiAgICBjb25zdCBtZXNzYWdlID0gYElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyBmYWlsdXJlO1xyXG4gICAgX2xvZ0Vycm9yKG1lc3NhZ2UpO1xyXG4gICAgLy8gTk9URTogV2UgZG9uJ3QgdXNlIEZpcmViYXNlRXJyb3IgaGVyZSBiZWNhdXNlIHRoZXNlIGFyZSBpbnRlcm5hbCBmYWlsdXJlc1xyXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcclxuICAgIC8vIGRlcGVuZGVuY3kgYmV0d2VlbiB0aGUgZXJyb3IgYW5kIGFzc2VydCBtb2R1bGVzIHdoaWNoIGRvZXNuJ3Qgd29yay4pXHJcbiAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbn1cclxuLyoqXHJcbiAqIEZhaWxzIGlmIHRoZSBnaXZlbiBhc3NlcnRpb24gY29uZGl0aW9uIGlzIGZhbHNlLCB0aHJvd2luZyBhbiBFcnJvciB3aXRoIHRoZVxyXG4gKiBnaXZlbiBtZXNzYWdlIGlmIGl0IGRpZC5cclxuICpcclxuICogQHBhcmFtIGFzc2VydGlvblxyXG4gKiBAcGFyYW0gbWVzc2FnZVxyXG4gKi9cclxuZnVuY3Rpb24gZGVidWdBc3NlcnQoYXNzZXJ0aW9uLCBtZXNzYWdlKSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIGRlYnVnRmFpbChtZXNzYWdlKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZUNhY2hlID0gbmV3IE1hcCgpO1xyXG5mdW5jdGlvbiBfZ2V0SW5zdGFuY2UoY2xzKSB7XHJcbiAgICBkZWJ1Z0Fzc2VydChjbHMgaW5zdGFuY2VvZiBGdW5jdGlvbiwgJ0V4cGVjdGVkIGEgY2xhc3MgZGVmaW5pdGlvbicpO1xyXG4gICAgbGV0IGluc3RhbmNlID0gaW5zdGFuY2VDYWNoZS5nZXQoY2xzKTtcclxuICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KGluc3RhbmNlIGluc3RhbmNlb2YgY2xzLCAnSW5zdGFuY2Ugc3RvcmVkIGluIGNhY2hlIG1pc21hdGNoZWQgd2l0aCBjbGFzcycpO1xyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIGluc3RhbmNlID0gbmV3IGNscygpO1xyXG4gICAgaW5zdGFuY2VDYWNoZS5zZXQoY2xzLCBpbnN0YW5jZSk7XHJcbiAgICByZXR1cm4gaW5zdGFuY2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEluaXRpYWxpemVzIGFuIHtAbGluayBBdXRofSBpbnN0YW5jZSB3aXRoIGZpbmUtZ3JhaW5lZCBjb250cm9sIG92ZXJcclxuICoge0BsaW5rIERlcGVuZGVuY2llc30uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqXHJcbiAqIFRoaXMgZnVuY3Rpb24gYWxsb3dzIG1vcmUgY29udHJvbCBvdmVyIHRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgdGhhblxyXG4gKiB7QGxpbmsgZ2V0QXV0aH0uIGBnZXRBdXRoYCB1c2VzIHBsYXRmb3JtLXNwZWNpZmljIGRlZmF1bHRzIHRvIHN1cHBseVxyXG4gKiB0aGUge0BsaW5rIERlcGVuZGVuY2llc30uIEluIGdlbmVyYWwsIGBnZXRBdXRoYCBpcyB0aGUgZWFzaWVzdCB3YXkgdG9cclxuICogaW5pdGlhbGl6ZSBBdXRoIGFuZCB3b3JrcyBmb3IgbW9zdCB1c2UgY2FzZXMuIFVzZSBgaW5pdGlhbGl6ZUF1dGhgIGlmIHlvdVxyXG4gKiBuZWVkIGNvbnRyb2wgb3ZlciB3aGljaCBwZXJzaXN0ZW5jZSBsYXllciBpcyB1c2VkLCBvciB0byBtaW5pbWl6ZSBidW5kbGVcclxuICogc2l6ZSBpZiB5b3UncmUgbm90IHVzaW5nIGVpdGhlciBgc2lnbkluV2l0aFBvcHVwYCBvciBgc2lnbkluV2l0aFJlZGlyZWN0YC5cclxuICpcclxuICogRm9yIGV4YW1wbGUsIGlmIHlvdXIgYXBwIG9ubHkgdXNlcyBhbm9ueW1vdXMgYWNjb3VudHMgYW5kIHlvdSBvbmx5IHdhbnRcclxuICogYWNjb3VudHMgc2F2ZWQgZm9yIHRoZSBjdXJyZW50IHNlc3Npb24sIGluaXRpYWxpemUgYEF1dGhgIHdpdGg6XHJcbiAqXHJcbiAqIGBgYGpzXHJcbiAqIGNvbnN0IGF1dGggPSBpbml0aWFsaXplQXV0aChhcHAsIHtcclxuICogICBwZXJzaXN0ZW5jZTogYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSxcclxuICogICBwb3B1cFJlZGlyZWN0UmVzb2x2ZXI6IHVuZGVmaW5lZCxcclxuICogfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQXV0aChhcHAsIGRlcHMpIHtcclxuICAgIGNvbnN0IHByb3ZpZGVyID0gX2dldFByb3ZpZGVyKGFwcCwgJ2F1dGgnKTtcclxuICAgIGlmIChwcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaW5pdGlhbE9wdGlvbnMgPSBwcm92aWRlci5nZXRPcHRpb25zKCk7XHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChpbml0aWFsT3B0aW9ucywgZGVwcyAhPT0gbnVsbCAmJiBkZXBzICE9PSB2b2lkIDAgPyBkZXBzIDoge30pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdXRoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmluaXRpYWxpemUoeyBvcHRpb25zOiBkZXBzIH0pO1xyXG4gICAgcmV0dXJuIGF1dGg7XHJcbn1cclxuZnVuY3Rpb24gX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoYXV0aCwgZGVwcykge1xyXG4gICAgY29uc3QgcGVyc2lzdGVuY2UgPSAoZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLnBlcnNpc3RlbmNlKSB8fCBbXTtcclxuICAgIGNvbnN0IGhpZXJhcmNoeSA9IChBcnJheS5pc0FycmF5KHBlcnNpc3RlbmNlKSA/IHBlcnNpc3RlbmNlIDogW3BlcnNpc3RlbmNlXSkubWFwKF9nZXRJbnN0YW5jZSk7XHJcbiAgICBpZiAoZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLmVycm9yTWFwKSB7XHJcbiAgICAgICAgYXV0aC5fdXBkYXRlRXJyb3JNYXAoZGVwcy5lcnJvck1hcCk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIHByb21pc2UgaXMgaW50ZW5kZWQgdG8gZmxvYXQ7IGF1dGggaW5pdGlhbGl6YXRpb24gaGFwcGVucyBpbiB0aGVcclxuICAgIC8vIGJhY2tncm91bmQsIG1lYW53aGlsZSB0aGUgYXV0aCBvYmplY3QgbWF5IGJlIHVzZWQgYnkgdGhlIGFwcC5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgIGF1dGguX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UoaGllcmFyY2h5LCBkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMucG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0Q3VycmVudFVybCgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICgoX2EgPSBzZWxmLmxvY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaHJlZikpIHx8ICcnO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0h0dHBPckh0dHBzKCkge1xyXG4gICAgcmV0dXJuIF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwOicgfHwgX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHBzOic7XHJcbn1cclxuZnVuY3Rpb24gX2dldEN1cnJlbnRTY2hlbWUoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3RvY29sKSkgfHwgbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGJyb3dzZXIgaXMgd29ya2luZyBvbmxpbmVcclxuICovXHJcbmZ1bmN0aW9uIF9pc09ubGluZSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIG5hdmlnYXRvciAmJlxyXG4gICAgICAgICdvbkxpbmUnIGluIG5hdmlnYXRvciAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3Iub25MaW5lID09PSAnYm9vbGVhbicgJiZcclxuICAgICAgICAvLyBBcHBseSBvbmx5IGZvciB0cmFkaXRpb25hbCB3ZWIgYXBwcyBhbmQgQ2hyb21lIGV4dGVuc2lvbnMuXHJcbiAgICAgICAgLy8gVGhpcyBpcyBlc3BlY2lhbGx5IHRydWUgZm9yIENvcmRvdmEgYXBwcyB3aGljaCBoYXZlIHVucmVsaWFibGVcclxuICAgICAgICAvLyBuYXZpZ2F0b3Iub25MaW5lIGJlaGF2aW9yIHVubGVzcyBjb3Jkb3ZhLXBsdWdpbi1uZXR3b3JrLWluZm9ybWF0aW9uIGlzXHJcbiAgICAgICAgLy8gaW5zdGFsbGVkIHdoaWNoIG92ZXJ3cml0ZXMgdGhlIG5hdGl2ZSBuYXZpZ2F0b3Iub25MaW5lIHZhbHVlIGFuZFxyXG4gICAgICAgIC8vIGRlZmluZXMgbmF2aWdhdG9yLmNvbm5lY3Rpb24uXHJcbiAgICAgICAgKF9pc0h0dHBPckh0dHBzKCkgfHwgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHwgJ2Nvbm5lY3Rpb24nIGluIG5hdmlnYXRvcikpIHtcclxuICAgICAgICByZXR1cm4gbmF2aWdhdG9yLm9uTGluZTtcclxuICAgIH1cclxuICAgIC8vIElmIHdlIGNhbid0IGRldGVybWluZSB0aGUgc3RhdGUsIGFzc3VtZSBpdCBpcyBvbmxpbmUuXHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBfZ2V0VXNlckxhbmd1YWdlKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuYXZpZ2F0b3JMYW5ndWFnZSA9IG5hdmlnYXRvcjtcclxuICAgIHJldHVybiAoXHJcbiAgICAvLyBNb3N0IHJlbGlhYmxlLCBidXQgb25seSBzdXBwb3J0ZWQgaW4gQ2hyb21lL0ZpcmVmb3guXHJcbiAgICAobmF2aWdhdG9yTGFuZ3VhZ2UubGFuZ3VhZ2VzICYmIG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlc1swXSkgfHxcclxuICAgICAgICAvLyBTdXBwb3J0ZWQgaW4gbW9zdCBicm93c2VycywgYnV0IHJldHVybnMgdGhlIGxhbmd1YWdlIG9mIHRoZSBicm93c2VyXHJcbiAgICAgICAgLy8gVUksIG5vdCB0aGUgbGFuZ3VhZ2Ugc2V0IGluIGJyb3dzZXIgc2V0dGluZ3MuXHJcbiAgICAgICAgbmF2aWdhdG9yTGFuZ3VhZ2UubGFuZ3VhZ2UgfHxcclxuICAgICAgICAvLyBDb3VsZG4ndCBkZXRlcm1pbmUgbGFuZ3VhZ2UuXHJcbiAgICAgICAgbnVsbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEEgc3RydWN0dXJlIHRvIGhlbHAgcGljayBiZXR3ZWVuIGEgcmFuZ2Ugb2YgbG9uZyBhbmQgc2hvcnQgZGVsYXkgZHVyYXRpb25zXHJcbiAqIGRlcGVuZGluZyBvbiB0aGUgY3VycmVudCBlbnZpcm9ubWVudC4gSW4gZ2VuZXJhbCwgdGhlIGxvbmcgZGVsYXkgaXMgdXNlZCBmb3JcclxuICogbW9iaWxlIGVudmlyb25tZW50cyB3aGVyZWFzIHNob3J0IGRlbGF5cyBhcmUgdXNlZCBmb3IgZGVza3RvcCBlbnZpcm9ubWVudHMuXHJcbiAqL1xyXG5jbGFzcyBEZWxheSB7XHJcbiAgICBjb25zdHJ1Y3RvcihzaG9ydERlbGF5LCBsb25nRGVsYXkpIHtcclxuICAgICAgICB0aGlzLnNob3J0RGVsYXkgPSBzaG9ydERlbGF5O1xyXG4gICAgICAgIHRoaXMubG9uZ0RlbGF5ID0gbG9uZ0RlbGF5O1xyXG4gICAgICAgIC8vIEludGVybmFsIGVycm9yIHdoZW4gaW1wcm9wZXJseSBpbml0aWFsaXplZC5cclxuICAgICAgICBkZWJ1Z0Fzc2VydChsb25nRGVsYXkgPiBzaG9ydERlbGF5LCAnU2hvcnQgZGVsYXkgc2hvdWxkIGJlIGxlc3MgdGhhbiBsb25nIGRlbGF5IScpO1xyXG4gICAgICAgIHRoaXMuaXNNb2JpbGUgPSBpc01vYmlsZUNvcmRvdmEoKSB8fCBpc1JlYWN0TmF0aXZlKCk7XHJcbiAgICB9XHJcbiAgICBnZXQoKSB7XHJcbiAgICAgICAgaWYgKCFfaXNPbmxpbmUoKSkge1xyXG4gICAgICAgICAgICAvLyBQaWNrIHRoZSBzaG9ydGVyIHRpbWVvdXQuXHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbig1MDAwIC8qIE9GRkxJTkUgKi8sIHRoaXMuc2hvcnREZWxheSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHJ1bm5pbmcgaW4gYSBtb2JpbGUgZW52aXJvbm1lbnQsIHJldHVybiB0aGUgbG9uZyBkZWxheSwgb3RoZXJ3aXNlXHJcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBzaG9ydCBkZWxheS5cclxuICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIGltcHJvdmVkIGluIHRoZSBmdXR1cmUgdG8gZHluYW1pY2FsbHkgY2hhbmdlIGJhc2VkIG9uIG90aGVyXHJcbiAgICAgICAgLy8gdmFyaWFibGVzIGluc3RlYWQgb2YganVzdCByZWFkaW5nIHRoZSBjdXJyZW50IGVudmlyb25tZW50LlxyXG4gICAgICAgIHJldHVybiB0aGlzLmlzTW9iaWxlID8gdGhpcy5sb25nRGVsYXkgOiB0aGlzLnNob3J0RGVsYXk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2VtdWxhdG9yVXJsKGNvbmZpZywgcGF0aCkge1xyXG4gICAgZGVidWdBc3NlcnQoY29uZmlnLmVtdWxhdG9yLCAnRW11bGF0b3Igc2hvdWxkIGFsd2F5cyBiZSBzZXQgaGVyZScpO1xyXG4gICAgY29uc3QgeyB1cmwgfSA9IGNvbmZpZy5lbXVsYXRvcjtcclxuICAgIGlmICghcGF0aCkge1xyXG4gICAgICAgIHJldHVybiB1cmw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7dXJsfSR7cGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aH1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEZldGNoUHJvdmlkZXIge1xyXG4gICAgc3RhdGljIGluaXRpYWxpemUoZmV0Y2hJbXBsLCBoZWFkZXJzSW1wbCwgcmVzcG9uc2VJbXBsKSB7XHJcbiAgICAgICAgdGhpcy5mZXRjaEltcGwgPSBmZXRjaEltcGw7XHJcbiAgICAgICAgaWYgKGhlYWRlcnNJbXBsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGVhZGVyc0ltcGwgPSBoZWFkZXJzSW1wbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlSW1wbCA9IHJlc3BvbnNlSW1wbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZmV0Y2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmV0Y2hJbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZldGNoSW1wbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAnZmV0Y2gnIGluIHNlbGYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuZmV0Y2g7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgZmV0Y2ggaW1wbGVtZW50YXRpb24sIG1ha2Ugc3VyZSB5b3UgY2FsbCBGZXRjaFByb3ZpZGVyLmluaXRpYWxpemUoKSB3aXRoIGFuIGFwcHJvcHJpYXRlIHBvbHlmaWxsJyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaGVhZGVycygpIHtcclxuICAgICAgICBpZiAodGhpcy5oZWFkZXJzSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJzSW1wbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAnSGVhZGVycycgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5IZWFkZXJzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIEhlYWRlcnMgaW1wbGVtZW50YXRpb24sIG1ha2Ugc3VyZSB5b3UgY2FsbCBGZXRjaFByb3ZpZGVyLmluaXRpYWxpemUoKSB3aXRoIGFuIGFwcHJvcHJpYXRlIHBvbHlmaWxsJyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgcmVzcG9uc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2VJbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlSW1wbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAnUmVzcG9uc2UnIGluIHNlbGYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuUmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgUmVzcG9uc2UgaW1wbGVtZW50YXRpb24sIG1ha2Ugc3VyZSB5b3UgY2FsbCBGZXRjaFByb3ZpZGVyLmluaXRpYWxpemUoKSB3aXRoIGFuIGFwcHJvcHJpYXRlIHBvbHlmaWxsJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcCBmcm9tIGVycm9ycyByZXR1cm5lZCBieSB0aGUgc2VydmVyIHRvIGVycm9ycyB0byBkZXZlbG9wZXIgdmlzaWJsZSBlcnJvcnNcclxuICovXHJcbmNvbnN0IFNFUlZFUl9FUlJPUl9NQVAgPSB7XHJcbiAgICAvLyBDdXN0b20gdG9rZW4gZXJyb3JzLlxyXG4gICAgW1wiQ1JFREVOVElBTF9NSVNNQVRDSFwiIC8qIENSRURFTlRJQUxfTUlTTUFUQ0ggKi9dOiBcImN1c3RvbS10b2tlbi1taXNtYXRjaFwiIC8qIENSRURFTlRJQUxfTUlTTUFUQ0ggKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX0NVU1RPTV9UT0tFTlwiIC8qIE1JU1NJTkdfQ1VTVE9NX1RPS0VOICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gQ3JlYXRlIEF1dGggVVJJIGVycm9ycy5cclxuICAgIFtcIklOVkFMSURfSURFTlRJRklFUlwiIC8qIElOVkFMSURfSURFTlRJRklFUiAqL106IFwiaW52YWxpZC1lbWFpbFwiIC8qIElOVkFMSURfRU1BSUwgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX0NPTlRJTlVFX1VSSVwiIC8qIE1JU1NJTkdfQ09OVElOVUVfVVJJICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2lnbiBpbiB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZCBlcnJvcnMgKHNvbWUgYXBwbHkgdG8gc2lnbiB1cCB0b28pLlxyXG4gICAgW1wiSU5WQUxJRF9QQVNTV09SRFwiIC8qIElOVkFMSURfUEFTU1dPUkQgKi9dOiBcIndyb25nLXBhc3N3b3JkXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfUEFTU1dPUkRcIiAvKiBNSVNTSU5HX1BBU1NXT1JEICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2lnbiB1cCB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZCBlcnJvcnMuXHJcbiAgICBbXCJFTUFJTF9FWElTVFNcIiAvKiBFTUFJTF9FWElTVFMgKi9dOiBcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogRU1BSUxfRVhJU1RTICovLFxyXG4gICAgW1wiUEFTU1dPUkRfTE9HSU5fRElTQUJMRURcIiAvKiBQQVNTV09SRF9MT0dJTl9ESVNBQkxFRCAqL106IFwib3BlcmF0aW9uLW5vdC1hbGxvd2VkXCIgLyogT1BFUkFUSU9OX05PVF9BTExPV0VEICovLFxyXG4gICAgLy8gVmVyaWZ5IGFzc2VydGlvbiBmb3Igc2lnbiBpbiB3aXRoIGNyZWRlbnRpYWwgZXJyb3JzOlxyXG4gICAgW1wiSU5WQUxJRF9JRFBfUkVTUE9OU0VcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJJTlZBTElEX1BFTkRJTkdfVE9LRU5cIiAvKiBJTlZBTElEX1BFTkRJTkdfVE9LRU4gKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRURcIiAvKiBGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRCAqL106IFwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiIC8qIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0UgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX1JFUV9UWVBFXCIgLyogTUlTU0lOR19SRVFfVFlQRSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIFNlbmQgUGFzc3dvcmQgcmVzZXQgZW1haWwgZXJyb3JzOlxyXG4gICAgW1wiRU1BSUxfTk9UX0ZPVU5EXCIgLyogRU1BSUxfTk9UX0ZPVU5EICovXTogXCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqLyxcclxuICAgIFtcIlJFU0VUX1BBU1NXT1JEX0VYQ0VFRF9MSU1JVFwiIC8qIFJFU0VUX1BBU1NXT1JEX0VYQ0VFRF9MSU1JVCAqL106IFwidG9vLW1hbnktcmVxdWVzdHNcIiAvKiBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi8sXHJcbiAgICBbXCJFWFBJUkVEX09PQl9DT0RFXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqL106IFwiZXhwaXJlZC1hY3Rpb24tY29kZVwiIC8qIEVYUElSRURfT09CX0NPREUgKi8sXHJcbiAgICBbXCJJTlZBTElEX09PQl9DT0RFXCIgLyogSU5WQUxJRF9PT0JfQ09ERSAqL106IFwiaW52YWxpZC1hY3Rpb24tY29kZVwiIC8qIElOVkFMSURfT09CX0NPREUgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX09PQl9DT0RFXCIgLyogTUlTU0lOR19PT0JfQ09ERSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIE9wZXJhdGlvbnMgdGhhdCByZXF1aXJlIElEIHRva2VuIGluIHJlcXVlc3Q6XHJcbiAgICBbXCJDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU5cIiAvKiBDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi9dOiBcInJlcXVpcmVzLXJlY2VudC1sb2dpblwiIC8qIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqLyxcclxuICAgIFtcIklOVkFMSURfSURfVE9LRU5cIiAvKiBJTlZBTElEX0lEX1RPS0VOICovXTogXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBJTlZBTElEX0FVVEggKi8sXHJcbiAgICBbXCJUT0tFTl9FWFBJUkVEXCIgLyogVE9LRU5fRVhQSVJFRCAqL106IFwidXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqLyxcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8sXHJcbiAgICAvLyBPdGhlciBlcnJvcnMuXHJcbiAgICBbXCJUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVJcIiAvKiBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi9dOiBcInRvby1tYW55LXJlcXVlc3RzXCIgLyogVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSICovLFxyXG4gICAgLy8gUGhvbmUgQXV0aCByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIklOVkFMSURfQ09ERVwiIC8qIElOVkFMSURfQ09ERSAqL106IFwiaW52YWxpZC12ZXJpZmljYXRpb24tY29kZVwiIC8qIElOVkFMSURfQ09ERSAqLyxcclxuICAgIFtcIklOVkFMSURfU0VTU0lPTl9JTkZPXCIgLyogSU5WQUxJRF9TRVNTSU9OX0lORk8gKi9dOiBcImludmFsaWQtdmVyaWZpY2F0aW9uLWlkXCIgLyogSU5WQUxJRF9TRVNTSU9OX0lORk8gKi8sXHJcbiAgICBbXCJJTlZBTElEX1RFTVBPUkFSWV9QUk9PRlwiIC8qIElOVkFMSURfVEVNUE9SQVJZX1BST09GICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIk1JU1NJTkdfU0VTU0lPTl9JTkZPXCIgLyogTUlTU0lOR19TRVNTSU9OX0lORk8gKi9dOiBcIm1pc3NpbmctdmVyaWZpY2F0aW9uLWlkXCIgLyogTUlTU0lOR19TRVNTSU9OX0lORk8gKi8sXHJcbiAgICBbXCJTRVNTSU9OX0VYUElSRURcIiAvKiBTRVNTSU9OX0VYUElSRUQgKi9dOiBcImNvZGUtZXhwaXJlZFwiIC8qIENPREVfRVhQSVJFRCAqLyxcclxuICAgIC8vIE90aGVyIGFjdGlvbiBjb2RlIGVycm9ycyB3aGVuIGFkZGl0aW9uYWwgc2V0dGluZ3MgcGFzc2VkLlxyXG4gICAgLy8gTUlTU0lOR19DT05USU5VRV9VUkkgaXMgZ2V0dGluZyBtYXBwZWQgdG8gSU5URVJOQUxfRVJST1IgYWJvdmUuXHJcbiAgICAvLyBUaGlzIGlzIE9LIGFzIHRoaXMgZXJyb3Igd2lsbCBiZSBjYXVnaHQgYnkgY2xpZW50IHNpZGUgdmFsaWRhdGlvbi5cclxuICAgIFtcIk1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovXTogXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovLFxyXG4gICAgW1wiVU5BVVRIT1JJWkVEX0RPTUFJTlwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi9dOiBcInVuYXV0aG9yaXplZC1jb250aW51ZS11cmlcIiAvKiBVTkFVVEhPUklaRURfRE9NQUlOICovLFxyXG4gICAgLy8gZ2V0UHJvamVjdENvbmZpZyBlcnJvcnMgd2hlbiBjbGllbnRJZCBpcyBwYXNzZWQuXHJcbiAgICBbXCJJTlZBTElEX09BVVRIX0NMSUVOVF9JRFwiIC8qIElOVkFMSURfT0FVVEhfQ0xJRU5UX0lEICovXTogXCJpbnZhbGlkLW9hdXRoLWNsaWVudC1pZFwiIC8qIElOVkFMSURfT0FVVEhfQ0xJRU5UX0lEICovLFxyXG4gICAgLy8gVXNlciBhY3Rpb25zIChzaWduLXVwIG9yIGRlbGV0aW9uKSBkaXNhYmxlZCBlcnJvcnMuXHJcbiAgICBbXCJBRE1JTl9PTkxZX09QRVJBVElPTlwiIC8qIEFETUlOX09OTFlfT1BFUkFUSU9OICovXTogXCJhZG1pbi1yZXN0cmljdGVkLW9wZXJhdGlvblwiIC8qIEFETUlOX09OTFlfT1BFUkFUSU9OICovLFxyXG4gICAgLy8gTXVsdGkgZmFjdG9yIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9NRkFfUEVORElOR19DUkVERU5USUFMXCIgLyogSU5WQUxJRF9NRkFfUEVORElOR19DUkVERU5USUFMICovXTogXCJpbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogSU5WQUxJRF9NRkFfU0VTU0lPTiAqLyxcclxuICAgIFtcIk1GQV9FTlJPTExNRU5UX05PVF9GT1VORFwiIC8qIE1GQV9FTlJPTExNRU5UX05PVF9GT1VORCAqL106IFwibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCIgLyogTUZBX0lORk9fTk9UX0ZPVU5EICovLFxyXG4gICAgW1wiTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRFwiIC8qIE1JU1NJTkdfTUZBX0VOUk9MTE1FTlRfSUQgKi9dOiBcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovLFxyXG4gICAgW1wiTUlTU0lOR19NRkFfUEVORElOR19DUkVERU5USUFMXCIgLyogTUlTU0lOR19NRkFfUEVORElOR19DUkVERU5USUFMICovXTogXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogTUlTU0lOR19NRkFfU0VTU0lPTiAqLyxcclxuICAgIFtcIlNFQ09ORF9GQUNUT1JfRVhJU1RTXCIgLyogU0VDT05EX0ZBQ1RPUl9FWElTVFMgKi9dOiBcInNlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2VcIiAvKiBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQgKi8sXHJcbiAgICBbXCJTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEXCIgLyogU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRCAqL106IFwibWF4aW11bS1zZWNvbmQtZmFjdG9yLWNvdW50LWV4Y2VlZGVkXCIgLyogU0VDT05EX0ZBQ1RPUl9MSU1JVF9FWENFRURFRCAqLyxcclxuICAgIC8vIEJsb2NraW5nIGZ1bmN0aW9ucyByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIkJMT0NLSU5HX0ZVTkNUSU9OX0VSUk9SX1JFU1BPTlNFXCIgLyogQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0UgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQVBJX1RJTUVPVVRfTVMgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuZnVuY3Rpb24gX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIGlmIChhdXRoLnRlbmFudElkICYmICFyZXF1ZXN0LnRlbmFudElkKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgdGVuYW50SWQ6IGF1dGgudGVuYW50SWQgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCA9IHt9KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIGN1c3RvbUVycm9yTWFwLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGJvZHkgPSB7fTtcclxuICAgICAgICBsZXQgcGFyYW1zID0ge307XHJcbiAgICAgICAgaWYgKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJHRVRcIiAvKiBHRVQgKi8pIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcyA9IHJlcXVlc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBib2R5ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHJlcXVlc3QpXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gcXVlcnlzdHJpbmcoT2JqZWN0LmFzc2lnbih7IGtleTogYXV0aC5jb25maWcuYXBpS2V5IH0sIHBhcmFtcykpLnNsaWNlKDEpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBhdXRoLl9nZXRBZGRpdGlvbmFsSGVhZGVycygpO1xyXG4gICAgICAgIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIiAvKiBDT05URU5UX1RZUEUgKi9dID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xyXG4gICAgICAgIGlmIChhdXRoLmxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1Mb2NhbGVcIiAvKiBYX0ZJUkVCQVNFX0xPQ0FMRSAqL10gPSBhdXRoLmxhbmd1YWdlQ29kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEZldGNoUHJvdmlkZXIuZmV0Y2goKShfZ2V0RmluYWxUYXJnZXQoYXV0aCwgYXV0aC5jb25maWcuYXBpSG9zdCwgcGF0aCwgcXVlcnkpLCBPYmplY3QuYXNzaWduKHsgbWV0aG9kLFxyXG4gICAgICAgICAgICBoZWFkZXJzLCByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyJyB9LCBib2R5KSk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsIGZldGNoRm4pIHtcclxuICAgIGF1dGguX2NhbkluaXRFbXVsYXRvciA9IGZhbHNlO1xyXG4gICAgY29uc3QgZXJyb3JNYXAgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIFNFUlZFUl9FUlJPUl9NQVApLCBjdXN0b21FcnJvck1hcCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtUaW1lb3V0ID0gbmV3IE5ldHdvcmtUaW1lb3V0KGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcclxuICAgICAgICAgICAgZmV0Y2hGbigpLFxyXG4gICAgICAgICAgICBuZXR3b3JrVGltZW91dC5wcm9taXNlXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgLy8gSWYgd2UndmUgcmVhY2hlZCB0aGlzIHBvaW50LCB0aGUgZmV0Y2ggc3VjY2VlZGVkIGFuZCB0aGUgbmV0d29ya1RpbWVvdXRcclxuICAgICAgICAvLyBkaWRuJ3QgdGhyb3c7IGNsZWFyIHRoZSBuZXR3b3JrIHRpbWVvdXQgZGVsYXkgc28gdGhhdCBOb2RlIHdvbid0IGhhbmdcclxuICAgICAgICBuZXR3b3JrVGltZW91dC5jbGVhck5ldHdvcmtUaW1lb3V0KCk7XHJcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBpZiAoJ25lZWRDb25maXJtYXRpb24nIGluIGpzb24pIHtcclxuICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIiAvKiBORUVEX0NPTkZJUk1BVElPTiAqLywganNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNwb25zZS5vayAmJiAhKCdlcnJvck1lc3NhZ2UnIGluIGpzb24pKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBqc29uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gcmVzcG9uc2Uub2sgPyBqc29uLmVycm9yTWVzc2FnZSA6IGpzb24uZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgY29uc3QgW3NlcnZlckVycm9yQ29kZSwgc2VydmVyRXJyb3JNZXNzYWdlXSA9IGVycm9yTWVzc2FnZS5zcGxpdCgnIDogJyk7XHJcbiAgICAgICAgICAgIGlmIChzZXJ2ZXJFcnJvckNvZGUgPT09IFwiRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRURcIiAvKiBGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRCAqLykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBDUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovLCBqc29uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChzZXJ2ZXJFcnJvckNvZGUgPT09IFwiRU1BSUxfRVhJU1RTXCIgLyogRU1BSUxfRVhJU1RTICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBFTUFJTF9FWElTVFMgKi8sIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhFcnJvciA9IGVycm9yTWFwW3NlcnZlckVycm9yQ29kZV0gfHxcclxuICAgICAgICAgICAgICAgIHNlcnZlckVycm9yQ29kZVxyXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tfXFxzXSsvZywgJy0nKTtcclxuICAgICAgICAgICAgaWYgKHNlcnZlckVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UoYXV0aCwgYXV0aEVycm9yLCBzZXJ2ZXJFcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgYXV0aEVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9mYWlsKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pO1xyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gKGF3YWl0IF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwKSk7XHJcbiAgICBpZiAoJ21mYVBlbmRpbmdDcmVkZW50aWFsJyBpbiBzZXJ2ZXJSZXNwb25zZSkge1xyXG4gICAgICAgIF9mYWlsKGF1dGgsIFwibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBNRkFfUkVRVUlSRUQgKi8sIHtcclxuICAgICAgICAgICAgX3NlcnZlclJlc3BvbnNlOiBzZXJ2ZXJSZXNwb25zZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlcnZlclJlc3BvbnNlO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRGaW5hbFRhcmdldChhdXRoLCBob3N0LCBwYXRoLCBxdWVyeSkge1xyXG4gICAgY29uc3QgYmFzZSA9IGAke2hvc3R9JHtwYXRofT8ke3F1ZXJ5fWA7XHJcbiAgICBpZiAoIWF1dGguY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke2F1dGguY29uZmlnLmFwaVNjaGVtZX06Ly8ke2Jhc2V9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBfZW11bGF0b3JVcmwoYXV0aC5jb25maWcsIGJhc2UpO1xyXG59XHJcbmNsYXNzIE5ldHdvcmtUaW1lb3V0IHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyBhcmUgZnVuZGFtZW50YWxseSBpbmNvbXBhdGlibGUsIGJ1dCB3ZVxyXG4gICAgICAgIC8vIGRvbid0IGNhcmUgYWJvdXQgdGhlIHZhbHVlIGhlcmVcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMudGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy50aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgIH0sIERFRkFVTFRfQVBJX1RJTUVPVVRfTVMuZ2V0KCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xlYXJOZXR3b3JrVGltZW91dCgpIHtcclxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX21ha2VUYWdnZWRFcnJvcihhdXRoLCBjb2RlLCByZXNwb25zZSkge1xyXG4gICAgY29uc3QgZXJyb3JQYXJhbXMgPSB7XHJcbiAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lXHJcbiAgICB9O1xyXG4gICAgaWYgKHJlc3BvbnNlLmVtYWlsKSB7XHJcbiAgICAgICAgZXJyb3JQYXJhbXMuZW1haWwgPSByZXNwb25zZS5lbWFpbDtcclxuICAgIH1cclxuICAgIGlmIChyZXNwb25zZS5waG9uZU51bWJlcikge1xyXG4gICAgICAgIGVycm9yUGFyYW1zLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVOdW1iZXI7XHJcbiAgICB9XHJcbiAgICBjb25zdCBlcnJvciA9IF9jcmVhdGVFcnJvcihhdXRoLCBjb2RlLCBlcnJvclBhcmFtcyk7XHJcbiAgICAvLyBXZSBrbm93IGN1c3RvbURhdGEgaXMgZGVmaW5lZCBvbiBlcnJvciBiZWNhdXNlIGVycm9yUGFyYW1zIGlzIGRlZmluZWRcclxuICAgIGVycm9yLmN1c3RvbURhdGEuX3Rva2VuUmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIHJldHVybiBlcnJvcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVBY2NvdW50KGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6ZGVsZXRlXCIgLyogREVMRVRFX0FDQ09VTlQgKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUxpbmtlZEFjY291bnRzKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0QWNjb3VudEluZm8oYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpsb29rdXBcIiAvKiBHRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcodXRjVGltZXN0YW1wKSB7XHJcbiAgICBpZiAoIXV0Y1RpbWVzdGFtcCkge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENvbnZlcnQgdG8gZGF0ZSBvYmplY3QuXHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKE51bWJlcih1dGNUaW1lc3RhbXApKTtcclxuICAgICAgICAvLyBUZXN0IGRhdGUgaXMgdmFsaWQuXHJcbiAgICAgICAgaWYgKCFpc05hTihkYXRlLmdldFRpbWUoKSkpIHtcclxuICAgICAgICAgICAgLy8gQ29udmVydCB0byBVVEMgZGF0ZSBzdHJpbmcuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRlLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBEbyBub3RoaW5nLiB1bmRlZmluZWQgd2lsbCBiZSByZXR1cm5lZC5cclxuICAgIH1cclxuICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBKU09OIFdlYiBUb2tlbiAoSldUKSB1c2VkIHRvIGlkZW50aWZ5IHRoZSB1c2VyIHRvIGEgRmlyZWJhc2Ugc2VydmljZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogUmV0dXJucyB0aGUgY3VycmVudCB0b2tlbiBpZiBpdCBoYXMgbm90IGV4cGlyZWQgb3IgaWYgaXQgd2lsbCBub3QgZXhwaXJlIGluIHRoZSBuZXh0IGZpdmVcclxuICogbWludXRlcy4gT3RoZXJ3aXNlLCB0aGlzIHdpbGwgcmVmcmVzaCB0aGUgdG9rZW4gYW5kIHJldHVybiBhIG5ldyBvbmUuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBmb3JjZVJlZnJlc2ggLSBGb3JjZSByZWZyZXNoIHJlZ2FyZGxlc3Mgb2YgdG9rZW4gZXhwaXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0SWRUb2tlbih1c2VyLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKS5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSBkZXNlcmlhbGl6ZWQgSlNPTiBXZWIgVG9rZW4gKEpXVCkgdXNlZCB0byBpZGVudGl0ZnkgdGhlIHVzZXIgdG8gYSBGaXJlYmFzZSBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRva2VuIGlmIGl0IGhhcyBub3QgZXhwaXJlZCBvciBpZiBpdCB3aWxsIG5vdCBleHBpcmUgaW4gdGhlIG5leHQgZml2ZVxyXG4gKiBtaW51dGVzLiBPdGhlcndpc2UsIHRoaXMgd2lsbCByZWZyZXNoIHRoZSB0b2tlbiBhbmQgcmV0dXJuIGEgbmV3IG9uZS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRJZFRva2VuUmVzdWx0KHVzZXIsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBfcGFyc2VUb2tlbih0b2tlbik7XHJcbiAgICBfYXNzZXJ0KGNsYWltcyAmJiBjbGFpbXMuZXhwICYmIGNsYWltcy5hdXRoX3RpbWUgJiYgY2xhaW1zLmlhdCwgdXNlckludGVybmFsLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBjb25zdCBmaXJlYmFzZSA9IHR5cGVvZiBjbGFpbXMuZmlyZWJhc2UgPT09ICdvYmplY3QnID8gY2xhaW1zLmZpcmViYXNlIDogdW5kZWZpbmVkO1xyXG4gICAgY29uc3Qgc2lnbkluUHJvdmlkZXIgPSBmaXJlYmFzZSA9PT0gbnVsbCB8fCBmaXJlYmFzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmlyZWJhc2VbJ3NpZ25faW5fcHJvdmlkZXInXTtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY2xhaW1zLFxyXG4gICAgICAgIHRva2VuLFxyXG4gICAgICAgIGF1dGhUaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKGNsYWltcy5hdXRoX3RpbWUpKSxcclxuICAgICAgICBpc3N1ZWRBdFRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmlhdCkpLFxyXG4gICAgICAgIGV4cGlyYXRpb25UaW1lOiB1dGNUaW1lc3RhbXBUb0RhdGVTdHJpbmcoc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKGNsYWltcy5leHApKSxcclxuICAgICAgICBzaWduSW5Qcm92aWRlcjogc2lnbkluUHJvdmlkZXIgfHwgbnVsbCxcclxuICAgICAgICBzaWduSW5TZWNvbmRGYWN0b3I6IChmaXJlYmFzZSA9PT0gbnVsbCB8fCBmaXJlYmFzZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZmlyZWJhc2VbJ3NpZ25faW5fc2Vjb25kX2ZhY3RvciddKSB8fCBudWxsXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhzZWNvbmRzKSB7XHJcbiAgICByZXR1cm4gTnVtYmVyKHNlY29uZHMpICogMTAwMDtcclxufVxyXG5mdW5jdGlvbiBfcGFyc2VUb2tlbih0b2tlbikge1xyXG4gICAgY29uc3QgW2FsZ29yaXRobSwgcGF5bG9hZCwgc2lnbmF0dXJlXSA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICBpZiAoYWxnb3JpdGhtID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICBwYXlsb2FkID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICBzaWduYXR1cmUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIF9sb2dFcnJvcignSldUIG1hbGZvcm1lZCwgY29udGFpbmVkIGZld2VyIHRoYW4gMyBzZWN0aW9ucycpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkZWNvZGVkID0gYmFzZTY0RGVjb2RlKHBheWxvYWQpO1xyXG4gICAgICAgIGlmICghZGVjb2RlZCkge1xyXG4gICAgICAgICAgICBfbG9nRXJyb3IoJ0ZhaWxlZCB0byBkZWNvZGUgYmFzZTY0IEpXVCBwYXlsb2FkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkZWNvZGVkKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgX2xvZ0Vycm9yKCdDYXVnaHQgZXJyb3IgcGFyc2luZyBKV1QgcGF5bG9hZCBhcyBKU09OJywgZSk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgZXhwaXJlc0luIFRUTCBmcm9tIGEgdG9rZW4gYnkgc3VidHJhY3RpbmcgdGhlIGV4cGlyYXRpb24gZnJvbSB0aGUgaXNzdWFuY2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfdG9rZW5FeHBpcmVzSW4odG9rZW4pIHtcclxuICAgIGNvbnN0IHBhcnNlZFRva2VuID0gX3BhcnNlVG9rZW4odG9rZW4pO1xyXG4gICAgX2Fzc2VydChwYXJzZWRUb2tlbiwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIHBhcnNlZFRva2VuLmV4cCAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBwYXJzZWRUb2tlbi5pYXQgIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIE51bWJlcihwYXJzZWRUb2tlbi5leHApIC0gTnVtYmVyKHBhcnNlZFRva2VuLmlhdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgcHJvbWlzZSwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGlmIChieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHByb21pc2U7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvciAmJiBpc1VzZXJJbnZhbGlkYXRlZChlKSkge1xyXG4gICAgICAgICAgICBpZiAodXNlci5hdXRoLmN1cnJlbnRVc2VyID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB1c2VyLmF1dGguc2lnbk91dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNVc2VySW52YWxpZGF0ZWQoeyBjb2RlIH0pIHtcclxuICAgIHJldHVybiAoY29kZSA9PT0gYGF1dGgvJHtcInVzZXItZGlzYWJsZWRcIiAvKiBVU0VSX0RJU0FCTEVEICovfWAgfHxcclxuICAgICAgICBjb2RlID09PSBgYXV0aC8ke1widXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqL31gKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQcm9hY3RpdmVSZWZyZXNoIHtcclxuICAgIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIHJldHVybiBmdW5kYW1lbnRhbGx5IGRpZmZlcmVudCB0eXBlcy5cclxuICAgICAgICAvLyBXZSBkb24ndCBhY3R1YWxseSBjYXJlIHdoYXQgdGhlIHZhbHVlIGlzIGJ1dCBUUyB3b24ndCBhY2NlcHQgdW5rbm93biBhbmRcclxuICAgICAgICAvLyB3ZSBjYW4ndCBjYXN0IHByb3Blcmx5IGluIGJvdGggZW52aXJvbm1lbnRzLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IDMwMDAwIC8qIFJFVFJZX0JBQ0tPRkZfTUlOICovO1xyXG4gICAgfVxyXG4gICAgX3N0YXJ0KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldEludGVydmFsKHdhc0Vycm9yKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICh3YXNFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRoaXMuZXJyb3JCYWNrb2ZmO1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IE1hdGgubWluKHRoaXMuZXJyb3JCYWNrb2ZmICogMiwgOTYwMDAwIC8qIFJFVFJZX0JBQ0tPRkZfTUFYICovKTtcclxuICAgICAgICAgICAgcmV0dXJuIGludGVydmFsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIGVycm9yIGJhY2tvZmZcclxuICAgICAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSAzMDAwMCAvKiBSRVRSWV9CQUNLT0ZGX01JTiAqLztcclxuICAgICAgICAgICAgY29uc3QgZXhwVGltZSA9IChfYSA9IHRoaXMudXNlci5zdHNUb2tlbk1hbmFnZXIuZXhwaXJhdGlvblRpbWUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDA7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gZXhwVGltZSAtIERhdGUubm93KCkgLSAzMDAwMDAgLyogT0ZGU0VUICovO1xyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5tYXgoMCwgaW50ZXJ2YWwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNjaGVkdWxlKHdhc0Vycm9yID0gZmFsc2UpIHtcclxuICAgICAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIEp1c3QgaW4gY2FzZS4uLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5nZXRJbnRlcnZhbCh3YXNFcnJvcik7XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlcmF0aW9uKCk7XHJcbiAgICAgICAgfSwgaW50ZXJ2YWwpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaXRlcmF0aW9uKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5nZXRJZFRva2VuKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBPbmx5IHJldHJ5IG9uIG5ldHdvcmsgZXJyb3JzXHJcbiAgICAgICAgICAgIGlmIChlLmNvZGUgPT09IGBhdXRoLyR7XCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlKC8qIHdhc0Vycm9yICovIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFVzZXJNZXRhZGF0YSB7XHJcbiAgICBjb25zdHJ1Y3RvcihjcmVhdGVkQXQsIGxhc3RMb2dpbkF0KSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBjcmVhdGVkQXQ7XHJcbiAgICAgICAgdGhpcy5sYXN0TG9naW5BdCA9IGxhc3RMb2dpbkF0O1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVUaW1lKCk7XHJcbiAgICB9XHJcbiAgICBfaW5pdGlhbGl6ZVRpbWUoKSB7XHJcbiAgICAgICAgdGhpcy5sYXN0U2lnbkluVGltZSA9IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyh0aGlzLmxhc3RMb2dpbkF0KTtcclxuICAgICAgICB0aGlzLmNyZWF0aW9uVGltZSA9IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyh0aGlzLmNyZWF0ZWRBdCk7XHJcbiAgICB9XHJcbiAgICBfY29weShtZXRhZGF0YSkge1xyXG4gICAgICAgIHRoaXMuY3JlYXRlZEF0ID0gbWV0YWRhdGEuY3JlYXRlZEF0O1xyXG4gICAgICAgIHRoaXMubGFzdExvZ2luQXQgPSBtZXRhZGF0YS5sYXN0TG9naW5BdDtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXplVGltZSgpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogdGhpcy5jcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIGxhc3RMb2dpbkF0OiB0aGlzLmxhc3RMb2dpbkF0XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoID0gdXNlci5hdXRoO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBnZXRBY2NvdW50SW5mbyhhdXRoLCB7IGlkVG9rZW4gfSkpO1xyXG4gICAgX2Fzc2VydChyZXNwb25zZSA9PT0gbnVsbCB8fCByZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzcG9uc2UudXNlcnMubGVuZ3RoLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgY29uc3QgY29yZUFjY291bnQgPSByZXNwb25zZS51c2Vyc1swXTtcclxuICAgIHVzZXIuX25vdGlmeVJlbG9hZExpc3RlbmVyKGNvcmVBY2NvdW50KTtcclxuICAgIGNvbnN0IG5ld1Byb3ZpZGVyRGF0YSA9ICgoX2EgPSBjb3JlQWNjb3VudC5wcm92aWRlclVzZXJJbmZvKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKVxyXG4gICAgICAgID8gZXh0cmFjdFByb3ZpZGVyRGF0YShjb3JlQWNjb3VudC5wcm92aWRlclVzZXJJbmZvKVxyXG4gICAgICAgIDogW107XHJcbiAgICBjb25zdCBwcm92aWRlckRhdGEgPSBtZXJnZVByb3ZpZGVyRGF0YSh1c2VyLnByb3ZpZGVyRGF0YSwgbmV3UHJvdmlkZXJEYXRhKTtcclxuICAgIC8vIFByZXNlcnZlcyB0aGUgbm9uLW5vbnltb3VzIHN0YXR1cyBvZiB0aGUgc3RvcmVkIHVzZXIsIGV2ZW4gaWYgbm8gbW9yZVxyXG4gICAgLy8gY3JlZGVudGlhbHMgKGZlZGVyYXRlZCBvciBlbWFpbC9wYXNzd29yZCkgYXJlIGxpbmtlZCB0byB0aGUgdXNlci4gSWZcclxuICAgIC8vIHRoZSB1c2VyIHdhcyBwcmV2aW91c2x5IGFub255bW91cywgdGhlbiB1c2UgcHJvdmlkZXIgZGF0YSB0byB1cGRhdGUuXHJcbiAgICAvLyBPbiB0aGUgb3RoZXIgaGFuZCwgaWYgaXQgd2FzIG5vdCBhbm9ueW1vdXMgYmVmb3JlLCBpdCBzaG91bGQgbmV2ZXIgYmVcclxuICAgIC8vIGNvbnNpZGVyZWQgYW5vbnltb3VzIG5vdy5cclxuICAgIGNvbnN0IG9sZElzQW5vbnltb3VzID0gdXNlci5pc0Fub255bW91cztcclxuICAgIGNvbnN0IG5ld0lzQW5vbnltb3VzID0gISh1c2VyLmVtYWlsICYmIGNvcmVBY2NvdW50LnBhc3N3b3JkSGFzaCkgJiYgIShwcm92aWRlckRhdGEgPT09IG51bGwgfHwgcHJvdmlkZXJEYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm92aWRlckRhdGEubGVuZ3RoKTtcclxuICAgIGNvbnN0IGlzQW5vbnltb3VzID0gIW9sZElzQW5vbnltb3VzID8gZmFsc2UgOiBuZXdJc0Fub255bW91cztcclxuICAgIGNvbnN0IHVwZGF0ZXMgPSB7XHJcbiAgICAgICAgdWlkOiBjb3JlQWNjb3VudC5sb2NhbElkLFxyXG4gICAgICAgIGRpc3BsYXlOYW1lOiBjb3JlQWNjb3VudC5kaXNwbGF5TmFtZSB8fCBudWxsLFxyXG4gICAgICAgIHBob3RvVVJMOiBjb3JlQWNjb3VudC5waG90b1VybCB8fCBudWxsLFxyXG4gICAgICAgIGVtYWlsOiBjb3JlQWNjb3VudC5lbWFpbCB8fCBudWxsLFxyXG4gICAgICAgIGVtYWlsVmVyaWZpZWQ6IGNvcmVBY2NvdW50LmVtYWlsVmVyaWZpZWQgfHwgZmFsc2UsXHJcbiAgICAgICAgcGhvbmVOdW1iZXI6IGNvcmVBY2NvdW50LnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgdGVuYW50SWQ6IGNvcmVBY2NvdW50LnRlbmFudElkIHx8IG51bGwsXHJcbiAgICAgICAgcHJvdmlkZXJEYXRhLFxyXG4gICAgICAgIG1ldGFkYXRhOiBuZXcgVXNlck1ldGFkYXRhKGNvcmVBY2NvdW50LmNyZWF0ZWRBdCwgY29yZUFjY291bnQubGFzdExvZ2luQXQpLFxyXG4gICAgICAgIGlzQW5vbnltb3VzXHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmFzc2lnbih1c2VyLCB1cGRhdGVzKTtcclxufVxyXG4vKipcclxuICogUmVsb2FkcyB1c2VyIGFjY291bnQgZGF0YSwgaWYgc2lnbmVkIGluLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWxvYWQodXNlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlckludGVybmFsKTtcclxuICAgIC8vIEV2ZW4gdGhvdWdoIHRoZSBjdXJyZW50IHVzZXIgaGFzbid0IGNoYW5nZWQsIHVwZGF0ZVxyXG4gICAgLy8gY3VycmVudCB1c2VyIHdpbGwgdHJpZ2dlciBhIHBlcnNpc3RlbmNlIHVwZGF0ZSB3LyB0aGVcclxuICAgIC8vIG5ldyBpbmZvLlxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XHJcbiAgICB1c2VySW50ZXJuYWwuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XHJcbn1cclxuZnVuY3Rpb24gbWVyZ2VQcm92aWRlckRhdGEob3JpZ2luYWwsIG5ld0RhdGEpIHtcclxuICAgIGNvbnN0IGRlZHVwZWQgPSBvcmlnaW5hbC5maWx0ZXIobyA9PiAhbmV3RGF0YS5zb21lKG4gPT4gbi5wcm92aWRlcklkID09PSBvLnByb3ZpZGVySWQpKTtcclxuICAgIHJldHVybiBbLi4uZGVkdXBlZCwgLi4ubmV3RGF0YV07XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3ZpZGVyRGF0YShwcm92aWRlcnMpIHtcclxuICAgIHJldHVybiBwcm92aWRlcnMubWFwKChfYSkgPT4ge1xyXG4gICAgICAgIHZhciB7IHByb3ZpZGVySWQgfSA9IF9hLCBwcm92aWRlciA9IF9fcmVzdChfYSwgW1wicHJvdmlkZXJJZFwiXSk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgdWlkOiBwcm92aWRlci5yYXdJZCB8fCAnJyxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHByb3ZpZGVyLmRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgICAgICAgIGVtYWlsOiBwcm92aWRlci5lbWFpbCB8fCBudWxsLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcjogcHJvdmlkZXIucGhvbmVOdW1iZXIgfHwgbnVsbCxcclxuICAgICAgICAgICAgcGhvdG9VUkw6IHByb3ZpZGVyLnBob3RvVXJsIHx8IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVxdWVzdFN0c1Rva2VuKGF1dGgsIHJlZnJlc2hUb2tlbikge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwge30sIGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBib2R5ID0gcXVlcnlzdHJpbmcoe1xyXG4gICAgICAgICAgICAnZ3JhbnRfdHlwZSc6ICdyZWZyZXNoX3Rva2VuJyxcclxuICAgICAgICAgICAgJ3JlZnJlc2hfdG9rZW4nOiByZWZyZXNoVG9rZW5cclxuICAgICAgICB9KS5zbGljZSgxKTtcclxuICAgICAgICBjb25zdCB7IHRva2VuQXBpSG9zdCwgYXBpS2V5IH0gPSBhdXRoLmNvbmZpZztcclxuICAgICAgICBjb25zdCB1cmwgPSBfZ2V0RmluYWxUYXJnZXQoYXV0aCwgdG9rZW5BcGlIb3N0LCBcIi92MS90b2tlblwiIC8qIFRPS0VOICovLCBga2V5PSR7YXBpS2V5fWApO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSBhd2FpdCBhdXRoLl9nZXRBZGRpdGlvbmFsSGVhZGVycygpO1xyXG4gICAgICAgIGhlYWRlcnNbXCJDb250ZW50LVR5cGVcIiAvKiBDT05URU5UX1RZUEUgKi9dID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XHJcbiAgICAgICAgcmV0dXJuIEZldGNoUHJvdmlkZXIuZmV0Y2goKSh1cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIiAvKiBQT1NUICovLFxyXG4gICAgICAgICAgICBoZWFkZXJzLFxyXG4gICAgICAgICAgICBib2R5XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIFRoZSByZXNwb25zZSBjb21lcyBiYWNrIGluIHNuYWtlX2Nhc2UuIENvbnZlcnQgdG8gY2FtZWw6XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGFjY2Vzc1Rva2VuOiByZXNwb25zZS5hY2Nlc3NfdG9rZW4sXHJcbiAgICAgICAgZXhwaXJlc0luOiByZXNwb25zZS5leHBpcmVzX2luLFxyXG4gICAgICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2UucmVmcmVzaF90b2tlblxyXG4gICAgfTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogV2UgbmVlZCB0byBtYXJrIHRoaXMgY2xhc3MgYXMgaW50ZXJuYWwgZXhwbGljaXRseSB0byBleGNsdWRlIGl0IGluIHRoZSBwdWJsaWMgdHlwaW5ncywgYmVjYXVzZVxyXG4gKiBpdCByZWZlcmVuY2VzIEF1dGhJbnRlcm5hbCB3aGljaCBoYXMgYSBjaXJjdWxhciBkZXBlbmRlbmN5IHdpdGggVXNlckludGVybmFsLlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIFN0c1Rva2VuTWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNFeHBpcmVkKCkge1xyXG4gICAgICAgIHJldHVybiAoIXRoaXMuZXhwaXJhdGlvblRpbWUgfHxcclxuICAgICAgICAgICAgRGF0ZS5ub3coKSA+IHRoaXMuZXhwaXJhdGlvblRpbWUgLSAzMDAwMCAvKiBUT0tFTl9SRUZSRVNIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZXNwb25zZS5pZFRva2VuICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZXNwb25zZS5yZWZyZXNoVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IGV4cGlyZXNJbiA9ICdleHBpcmVzSW4nIGluIHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZS5leHBpcmVzSW4gIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgID8gTnVtYmVyKHJlc3BvbnNlLmV4cGlyZXNJbilcclxuICAgICAgICAgICAgOiBfdG9rZW5FeHBpcmVzSW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKHJlc3BvbnNlLmlkVG9rZW4sIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiwgZXhwaXJlc0luKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFRva2VuKGF1dGgsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5hY2Nlc3NUb2tlbiB8fCB0aGlzLnJlZnJlc2hUb2tlbiwgYXV0aCwgXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovKTtcclxuICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiB0aGlzLmFjY2Vzc1Rva2VuICYmICF0aGlzLmlzRXhwaXJlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVmcmVzaFRva2VuKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucmVmcmVzaChhdXRoLCB0aGlzLnJlZnJlc2hUb2tlbik7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNsZWFyUmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlZnJlc2goYXV0aCwgb2xkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCB7IGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJbiB9ID0gYXdhaXQgcmVxdWVzdFN0c1Rva2VuKGF1dGgsIG9sZFRva2VuKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24oYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgTnVtYmVyKGV4cGlyZXNJbikpO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBleHBpcmVzSW5TZWMpIHtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBhY2Nlc3NUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZXhwaXJhdGlvblRpbWUgPSBEYXRlLm5vdygpICsgZXhwaXJlc0luU2VjICogMTAwMDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tSlNPTihhcHBOYW1lLCBvYmplY3QpIHtcclxuICAgICAgICBjb25zdCB7IHJlZnJlc2hUb2tlbiwgYWNjZXNzVG9rZW4sIGV4cGlyYXRpb25UaW1lIH0gPSBvYmplY3Q7XHJcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IG5ldyBTdHNUb2tlbk1hbmFnZXIoKTtcclxuICAgICAgICBpZiAocmVmcmVzaFRva2VuKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIHJlZnJlc2hUb2tlbiA9PT0gJ3N0cmluZycsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5yZWZyZXNoVG9rZW4gPSByZWZyZXNoVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBhY2Nlc3NUb2tlbiA9PT0gJ3N0cmluZycsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXhwaXJhdGlvblRpbWUpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgZXhwaXJhdGlvblRpbWUgPT09ICdudW1iZXInLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIuZXhwaXJhdGlvblRpbWUgPSBleHBpcmF0aW9uVGltZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVmcmVzaFRva2VuOiB0aGlzLnJlZnJlc2hUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lOiB0aGlzLmV4cGlyYXRpb25UaW1lXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24oc3RzVG9rZW5NYW5hZ2VyKSB7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLnJlZnJlc2hUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5yZWZyZXNoVG9rZW47XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IHN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZTtcclxuICAgIH1cclxuICAgIF9jbG9uZSgpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgU3RzVG9rZW5NYW5hZ2VyKCksIHRoaXMudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgX3BlcmZvcm1SZWZyZXNoKCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGFzc2VydGlvbiwgYXBwTmFtZSkge1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgYXNzZXJ0aW9uID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgYXNzZXJ0aW9uID09PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7IGFwcE5hbWUgfSk7XHJcbn1cclxuY2xhc3MgVXNlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoX2EpIHtcclxuICAgICAgICB2YXIgeyB1aWQsIGF1dGgsIHN0c1Rva2VuTWFuYWdlciB9ID0gX2EsIG9wdCA9IF9fcmVzdChfYSwgW1widWlkXCIsIFwiYXV0aFwiLCBcInN0c1Rva2VuTWFuYWdlclwiXSk7XHJcbiAgICAgICAgLy8gRm9yIHRoZSB1c2VyIG9iamVjdCwgcHJvdmlkZXIgaXMgYWx3YXlzIEZpcmViYXNlLlxyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IFwiZmlyZWJhc2VcIiAvKiBGSVJFQkFTRSAqLztcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2ggPSBuZXcgUHJvYWN0aXZlUmVmcmVzaCh0aGlzKTtcclxuICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnVpZCA9IHVpZDtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyID0gc3RzVG9rZW5NYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IG9wdC5kaXNwbGF5TmFtZSB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWwgPSBvcHQuZW1haWwgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSBvcHQuZW1haWxWZXJpZmllZCB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gb3B0LnBob25lTnVtYmVyIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5waG90b1VSTCA9IG9wdC5waG90b1VSTCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSBvcHQuaXNBbm9ueW1vdXMgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IG9wdC50ZW5hbnRJZCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gb3B0LnByb3ZpZGVyRGF0YSA/IFsuLi5vcHQucHJvdmlkZXJEYXRhXSA6IFtdO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgVXNlck1ldGFkYXRhKG9wdC5jcmVhdGVkQXQgfHwgdW5kZWZpbmVkLCBvcHQubGFzdExvZ2luQXQgfHwgdW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldElkVG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLCB0aGlzLnN0c1Rva2VuTWFuYWdlci5nZXRUb2tlbih0aGlzLmF1dGgsIGZvcmNlUmVmcmVzaCkpO1xyXG4gICAgICAgIF9hc3NlcnQoYWNjZXNzVG9rZW4sIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbiAhPT0gYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFjY2Vzc1Rva2VuO1xyXG4gICAgfVxyXG4gICAgZ2V0SWRUb2tlblJlc3VsdChmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICByZXR1cm4gZ2V0SWRUb2tlblJlc3VsdCh0aGlzLCBmb3JjZVJlZnJlc2gpO1xyXG4gICAgfVxyXG4gICAgcmVsb2FkKCkge1xyXG4gICAgICAgIHJldHVybiByZWxvYWQodGhpcyk7XHJcbiAgICB9XHJcbiAgICBfYXNzaWduKHVzZXIpIHtcclxuICAgICAgICBpZiAodGhpcyA9PT0gdXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIF9hc3NlcnQodGhpcy51aWQgPT09IHVzZXIudWlkLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHVzZXIuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgdGhpcy5waG90b1VSTCA9IHVzZXIucGhvdG9VUkw7XHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IHVzZXIuZW1haWw7XHJcbiAgICAgICAgdGhpcy5lbWFpbFZlcmlmaWVkID0gdXNlci5lbWFpbFZlcmlmaWVkO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSB1c2VyLnBob25lTnVtYmVyO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSB1c2VyLnRlbmFudElkO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gdXNlci5wcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKTtcclxuICAgICAgICB0aGlzLm1ldGFkYXRhLl9jb3B5KHVzZXIubWV0YWRhdGEpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9hc3NpZ24odXNlci5zdHNUb2tlbk1hbmFnZXIpO1xyXG4gICAgfVxyXG4gICAgX2Nsb25lKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFVzZXJJbXBsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcyksIHsgYXV0aCwgc3RzVG9rZW5NYW5hZ2VyOiB0aGlzLnN0c1Rva2VuTWFuYWdlci5fY2xvbmUoKSB9KSk7XHJcbiAgICB9XHJcbiAgICBfb25SZWxvYWQoY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBUaGVyZSBzaG91bGQgb25seSBldmVyIGJlIG9uZSBsaXN0ZW5lciwgYW5kIHRoYXQgaXMgYSBzaW5nbGUgaW5zdGFuY2Ugb2YgTXVsdGlGYWN0b3JVc2VyXHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5yZWxvYWRMaXN0ZW5lciwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIgPSBjYWxsYmFjaztcclxuICAgICAgICBpZiAodGhpcy5yZWxvYWRVc2VySW5mbykge1xyXG4gICAgICAgICAgICB0aGlzLl9ub3RpZnlSZWxvYWRMaXN0ZW5lcih0aGlzLnJlbG9hZFVzZXJJbmZvKTtcclxuICAgICAgICAgICAgdGhpcy5yZWxvYWRVc2VySW5mbyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX25vdGlmeVJlbG9hZExpc3RlbmVyKHVzZXJJbmZvKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucmVsb2FkTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lcih1c2VySW5mbyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJZiBubyBsaXN0ZW5lciBpcyBzdWJzY3JpYmVkIHlldCwgc2F2ZSB0aGUgcmVzdWx0IHNvIGl0J3MgYXZhaWxhYmxlIHdoZW4gdGhleSBkbyBzdWJzY3JpYmVcclxuICAgICAgICAgICAgdGhpcy5yZWxvYWRVc2VySW5mbyA9IHVzZXJJbmZvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9zdGFydFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoLl9zdGFydCgpO1xyXG4gICAgfVxyXG4gICAgX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaC5fc3RvcCgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlLCByZWxvYWQgPSBmYWxzZSkge1xyXG4gICAgICAgIGxldCB0b2tlbnNSZWZyZXNoZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAocmVzcG9uc2UuaWRUb2tlbiAmJlxyXG4gICAgICAgICAgICByZXNwb25zZS5pZFRva2VuICE9PSB0aGlzLnN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLnN0c1Rva2VuTWFuYWdlci51cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB0b2tlbnNSZWZyZXNoZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVsb2FkKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBhd2FpdCB0aGlzLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIGlmICh0b2tlbnNSZWZyZXNoZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgZGVsZXRlKCkge1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLmdldElkVG9rZW4oKTtcclxuICAgICAgICBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLCBkZWxldGVBY2NvdW50KHRoaXMuYXV0aCwgeyBpZFRva2VuIH0pKTtcclxuICAgICAgICB0aGlzLnN0c1Rva2VuTWFuYWdlci5jbGVhclJlZnJlc2hUb2tlbigpO1xyXG4gICAgICAgIC8vIFRPRE86IERldGVybWluZSBpZiBjYW5jZWxsYWJsZS1wcm9taXNlcyBhcmUgbmVjZXNzYXJ5IHRvIHVzZSBpbiB0aGlzIGNsYXNzIHNvIHRoYXQgZGVsZXRlKClcclxuICAgICAgICAvLyAgICAgICBjYW5jZWxzIHBlbmRpbmcgYWN0aW9ucy4uLlxyXG4gICAgICAgIHJldHVybiB0aGlzLmF1dGguc2lnbk91dCgpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oeyB1aWQ6IHRoaXMudWlkLCBlbWFpbDogdGhpcy5lbWFpbCB8fCB1bmRlZmluZWQsIGVtYWlsVmVyaWZpZWQ6IHRoaXMuZW1haWxWZXJpZmllZCwgZGlzcGxheU5hbWU6IHRoaXMuZGlzcGxheU5hbWUgfHwgdW5kZWZpbmVkLCBpc0Fub255bW91czogdGhpcy5pc0Fub255bW91cywgcGhvdG9VUkw6IHRoaXMucGhvdG9VUkwgfHwgdW5kZWZpbmVkLCBwaG9uZU51bWJlcjogdGhpcy5waG9uZU51bWJlciB8fCB1bmRlZmluZWQsIHRlbmFudElkOiB0aGlzLnRlbmFudElkIHx8IHVuZGVmaW5lZCwgcHJvdmlkZXJEYXRhOiB0aGlzLnByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpLCBzdHNUb2tlbk1hbmFnZXI6IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnRvSlNPTigpLCBcclxuICAgICAgICAgICAgLy8gUmVkaXJlY3QgZXZlbnQgSUQgbXVzdCBiZSBtYWludGFpbmVkIGluIGNhc2UgdGhlcmUgaXMgYSBwZW5kaW5nXHJcbiAgICAgICAgICAgIC8vIHJlZGlyZWN0IGV2ZW50LlxyXG4gICAgICAgICAgICBfcmVkaXJlY3RFdmVudElkOiB0aGlzLl9yZWRpcmVjdEV2ZW50SWQgfSwgdGhpcy5tZXRhZGF0YS50b0pTT04oKSksIHsgXHJcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGxlZ2FjeSBTREsgKGdvL2ZpcmViYXNlLWF1dGgtc2RrLXBlcnNpc3RlbmNlLXBhcnNpbmcpOlxyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuYXV0aC5jb25maWcuYXBpS2V5LCBhcHBOYW1lOiB0aGlzLmF1dGgubmFtZSB9KTtcclxuICAgIH1cclxuICAgIGdldCByZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnJlZnJlc2hUb2tlbiB8fCAnJztcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbUpTT04oYXV0aCwgb2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaDtcclxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IChfYSA9IG9iamVjdC5kaXNwbGF5TmFtZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGVtYWlsID0gKF9iID0gb2JqZWN0LmVtYWlsKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgcGhvbmVOdW1iZXIgPSAoX2MgPSBvYmplY3QucGhvbmVOdW1iZXIpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwaG90b1VSTCA9IChfZCA9IG9iamVjdC5waG90b1VSTCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHRlbmFudElkID0gKF9lID0gb2JqZWN0LnRlbmFudElkKSAhPT0gbnVsbCAmJiBfZSAhPT0gdm9pZCAwID8gX2UgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgX3JlZGlyZWN0RXZlbnRJZCA9IChfZiA9IG9iamVjdC5fcmVkaXJlY3RFdmVudElkKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgY3JlYXRlZEF0ID0gKF9nID0gb2JqZWN0LmNyZWF0ZWRBdCkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IGxhc3RMb2dpbkF0ID0gKF9oID0gb2JqZWN0Lmxhc3RMb2dpbkF0KSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgeyB1aWQsIGVtYWlsVmVyaWZpZWQsIGlzQW5vbnltb3VzLCBwcm92aWRlckRhdGEsIHN0c1Rva2VuTWFuYWdlcjogcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIgfSA9IG9iamVjdDtcclxuICAgICAgICBfYXNzZXJ0KHVpZCAmJiBwbGFpbk9iamVjdFRva2VuTWFuYWdlciwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBzdHNUb2tlbk1hbmFnZXIgPSBTdHNUb2tlbk1hbmFnZXIuZnJvbUpTT04odGhpcy5uYW1lLCBwbGFpbk9iamVjdFRva2VuTWFuYWdlcik7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgdWlkID09PSAnc3RyaW5nJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChkaXNwbGF5TmFtZSwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChlbWFpbCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBlbWFpbFZlcmlmaWVkID09PSAnYm9vbGVhbicsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgaXNBbm9ueW1vdXMgPT09ICdib29sZWFuJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChwaG9uZU51bWJlciwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChwaG90b1VSTCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZCh0ZW5hbnRJZCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChfcmVkaXJlY3RFdmVudElkLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGNyZWF0ZWRBdCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChsYXN0TG9naW5BdCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbXBsKHtcclxuICAgICAgICAgICAgdWlkLFxyXG4gICAgICAgICAgICBhdXRoLFxyXG4gICAgICAgICAgICBlbWFpbCxcclxuICAgICAgICAgICAgZW1haWxWZXJpZmllZCxcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgIGlzQW5vbnltb3VzLFxyXG4gICAgICAgICAgICBwaG90b1VSTCxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIHRlbmFudElkLFxyXG4gICAgICAgICAgICBzdHNUb2tlbk1hbmFnZXIsXHJcbiAgICAgICAgICAgIGNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbGFzdExvZ2luQXRcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAocHJvdmlkZXJEYXRhICYmIEFycmF5LmlzQXJyYXkocHJvdmlkZXJEYXRhKSkge1xyXG4gICAgICAgICAgICB1c2VyLnByb3ZpZGVyRGF0YSA9IHByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoX3JlZGlyZWN0RXZlbnRJZCkge1xyXG4gICAgICAgICAgICB1c2VyLl9yZWRpcmVjdEV2ZW50SWQgPSBfcmVkaXJlY3RFdmVudElkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhIFVzZXIgZnJvbSBhbiBpZFRva2VuIHNlcnZlciByZXNwb25zZVxyXG4gICAgICogQHBhcmFtIGF1dGhcclxuICAgICAqIEBwYXJhbSBpZFRva2VuUmVzcG9uc2VcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIF9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IG5ldyBTdHNUb2tlbk1hbmFnZXIoKTtcclxuICAgICAgICBzdHNUb2tlbk1hbmFnZXIudXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgRmlyZWJhc2UgQXV0aCB1c2VyLlxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlckltcGwoe1xyXG4gICAgICAgICAgICB1aWQ6IGlkVG9rZW5SZXNwb25zZS5sb2NhbElkLFxyXG4gICAgICAgICAgICBhdXRoLFxyXG4gICAgICAgICAgICBzdHNUb2tlbk1hbmFnZXIsXHJcbiAgICAgICAgICAgIGlzQW5vbnltb3VzXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gVXBkYXRlcyB0aGUgdXNlciBpbmZvIGFuZCBkYXRhIGFuZCByZXNvbHZlcyB3aXRoIGEgdXNlciBpbnN0YW5jZS5cclxuICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgICAgICByZXR1cm4gdXNlcjtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBJbk1lbW9yeVBlcnNpc3RlbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFwiTk9ORVwiIC8qIE5PTkUgKi87XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlID0ge307XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaXNBdmFpbGFibGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Vba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3RvcmFnZVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBpbi1tZW1vcnkgc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzL3dvcmtlcnNcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBpbi1tZW1vcnkgc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzL3dvcmtlcnNcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuSW5NZW1vcnlQZXJzaXN0ZW5jZS50eXBlID0gJ05PTkUnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlICdOT05FJy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgaW5NZW1vcnlQZXJzaXN0ZW5jZSA9IEluTWVtb3J5UGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9wZXJzaXN0ZW5jZUtleU5hbWUoa2V5LCBhcGlLZXksIGFwcE5hbWUpIHtcclxuICAgIHJldHVybiBgJHtcImZpcmViYXNlXCIgLyogUEVSU0lTVEVOQ0UgKi99OiR7a2V5fToke2FwaUtleX06JHthcHBOYW1lfWA7XHJcbn1cclxuY2xhc3MgUGVyc2lzdGVuY2VVc2VyTWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwZXJzaXN0ZW5jZSwgYXV0aCwgdXNlcktleSkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBwZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMudXNlcktleSA9IHVzZXJLZXk7XHJcbiAgICAgICAgY29uc3QgeyBjb25maWcsIG5hbWUgfSA9IHRoaXMuYXV0aDtcclxuICAgICAgICB0aGlzLmZ1bGxVc2VyS2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh0aGlzLnVzZXJLZXksIGNvbmZpZy5hcGlLZXksIG5hbWUpO1xyXG4gICAgICAgIHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZShcInBlcnNpc3RlbmNlXCIgLyogUEVSU0lTVEVOQ0VfVVNFUiAqLywgY29uZmlnLmFwaUtleSwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IGF1dGguX29uU3RvcmFnZUV2ZW50LmJpbmQoYXV0aCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5fYWRkTGlzdGVuZXIodGhpcy5mdWxsVXNlcktleSwgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBzZXRDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3NldCh0aGlzLmZ1bGxVc2VyS2V5LCB1c2VyLnRvSlNPTigpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldEN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLl9nZXQodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICAgICAgcmV0dXJuIGJsb2IgPyBVc2VySW1wbC5fZnJvbUpTT04odGhpcy5hdXRoLCBibG9iKSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICByZW1vdmVDdXJyZW50VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fcmVtb3ZlKHRoaXMuZnVsbFVzZXJLZXkpO1xyXG4gICAgfVxyXG4gICAgc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3NldCh0aGlzLmZ1bGxQZXJzaXN0ZW5jZUtleSwgdGhpcy5wZXJzaXN0ZW5jZS50eXBlKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldFBlcnNpc3RlbmNlKG5ld1BlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVuY2UgPT09IG5ld1BlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZW1vdmVDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBuZXdQZXJzaXN0ZW5jZTtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFVzZXIoY3VycmVudFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmVMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGUoYXV0aCwgcGVyc2lzdGVuY2VIaWVyYXJjaHksIHVzZXJLZXkgPSBcImF1dGhVc2VyXCIgLyogQVVUSF9VU0VSICovKSB7XHJcbiAgICAgICAgaWYgKCFwZXJzaXN0ZW5jZUhpZXJhcmNoeS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyKF9nZXRJbnN0YW5jZShpbk1lbW9yeVBlcnNpc3RlbmNlKSwgYXV0aCwgdXNlcktleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEVsaW1pbmF0ZSBhbnkgcGVyc2lzdGVuY2VzIHRoYXQgYXJlIG5vdCBhdmFpbGFibGVcclxuICAgICAgICBjb25zdCBhdmFpbGFibGVQZXJzaXN0ZW5jZXMgPSAoYXdhaXQgUHJvbWlzZS5hbGwocGVyc2lzdGVuY2VIaWVyYXJjaHkubWFwKGFzeW5jIChwZXJzaXN0ZW5jZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXdhaXQgcGVyc2lzdGVuY2UuX2lzQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pKSkuZmlsdGVyKHBlcnNpc3RlbmNlID0+IHBlcnNpc3RlbmNlKTtcclxuICAgICAgICAvLyBGYWxsIGJhY2sgdG8gdGhlIGZpcnN0IHBlcnNpc3RlbmNlIGxpc3RlZCwgb3IgaW4gbWVtb3J5IGlmIG5vbmUgYXZhaWxhYmxlXHJcbiAgICAgICAgbGV0IHNlbGVjdGVkUGVyc2lzdGVuY2UgPSBhdmFpbGFibGVQZXJzaXN0ZW5jZXNbMF0gfHxcclxuICAgICAgICAgICAgX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIGNvbnN0IGtleSA9IF9wZXJzaXN0ZW5jZUtleU5hbWUodXNlcktleSwgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIC8vIFB1bGwgb3V0IHRoZSBleGlzdGluZyB1c2VyLCBzZXR0aW5nIHRoZSBjaG9zZW4gcGVyc2lzdGVuY2UgdG8gdGhhdFxyXG4gICAgICAgIC8vIHBlcnNpc3RlbmNlIGlmIHRoZSB1c2VyIGV4aXN0cy5cclxuICAgICAgICBsZXQgdXNlclRvTWlncmF0ZSA9IG51bGw7XHJcbiAgICAgICAgLy8gTm90ZSwgaGVyZSB3ZSBjaGVjayBmb3IgYSB1c2VyIGluIF9hbGxfIHBlcnNpc3RlbmNlcywgbm90IGp1c3QgdGhlXHJcbiAgICAgICAgLy8gb25lcyBkZWVtZWQgYXZhaWxhYmxlLiBJZiB3ZSBjYW4gbWlncmF0ZSBhIHVzZXIgb3V0IG9mIGEgYnJva2VuXHJcbiAgICAgICAgLy8gcGVyc2lzdGVuY2UsIHdlIHdpbGwgKGJ1dCBvbmx5IGlmIHRoYXQgcGVyc2lzdGVuY2Ugc3VwcG9ydHMgbWlncmF0aW9uKS5cclxuICAgICAgICBmb3IgKGNvbnN0IHBlcnNpc3RlbmNlIG9mIHBlcnNpc3RlbmNlSGllcmFyY2h5KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0gYXdhaXQgcGVyc2lzdGVuY2UuX2dldChrZXkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJsb2IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyID0gVXNlckltcGwuX2Zyb21KU09OKGF1dGgsIGJsb2IpOyAvLyB0aHJvd3MgZm9yIHVucGFyc2FibGUgYmxvYiAod3JvbmcgZm9ybWF0KVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyVG9NaWdyYXRlID0gdXNlcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlIGZpbmQgdGhlIHVzZXIgaW4gYSBwZXJzaXN0ZW5jZSB0aGF0IGRvZXMgc3VwcG9ydCBtaWdyYXRpb24sIHVzZVxyXG4gICAgICAgIC8vIHRoYXQgbWlncmF0aW9uIHBhdGggKG9mIG9ubHkgcGVyc2lzdGVuY2VzIHRoYXQgc3VwcG9ydCBtaWdyYXRpb24pXHJcbiAgICAgICAgY29uc3QgbWlncmF0aW9uSGllcmFyY2h5ID0gYXZhaWxhYmxlUGVyc2lzdGVuY2VzLmZpbHRlcihwID0+IHAuX3Nob3VsZEFsbG93TWlncmF0aW9uKTtcclxuICAgICAgICAvLyBJZiB0aGUgcGVyc2lzdGVuY2UgZG9lcyBfbm90XyBhbGxvdyBtaWdyYXRpb24sIGp1c3QgZmluaXNoIG9mZiBoZXJlXHJcbiAgICAgICAgaWYgKCFzZWxlY3RlZFBlcnNpc3RlbmNlLl9zaG91bGRBbGxvd01pZ3JhdGlvbiB8fFxyXG4gICAgICAgICAgICAhbWlncmF0aW9uSGllcmFyY2h5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoc2VsZWN0ZWRQZXJzaXN0ZW5jZSwgYXV0aCwgdXNlcktleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGVjdGVkUGVyc2lzdGVuY2UgPSBtaWdyYXRpb25IaWVyYXJjaHlbMF07XHJcbiAgICAgICAgaWYgKHVzZXJUb01pZ3JhdGUpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBub3JtYWxseSBzaG91bGRuJ3QgdGhyb3cgc2luY2UgY2hvc2VuUGVyc2lzdGVuY2UuaXNBdmFpbGFibGUoKSBpcyB0cnVlLCBidXQgaWYgaXQgZG9lc1xyXG4gICAgICAgICAgICAvLyB3ZSdsbCBqdXN0IGxldCBpdCBidWJibGUgdG8gc3VyZmFjZSB0aGUgZXJyb3IuXHJcbiAgICAgICAgICAgIGF3YWl0IHNlbGVjdGVkUGVyc2lzdGVuY2UuX3NldChrZXksIHVzZXJUb01pZ3JhdGUudG9KU09OKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBdHRlbXB0IHRvIGNsZWFyIHRoZSBrZXkgaW4gb3RoZXIgcGVyc2lzdGVuY2VzIGJ1dCBpZ25vcmUgZXJyb3JzLiBUaGlzIGhlbHBzIHByZXZlbnQgaXNzdWVzXHJcbiAgICAgICAgLy8gc3VjaCBhcyB1c2VycyBnZXR0aW5nIHN0dWNrIHdpdGggYSBwcmV2aW91cyBhY2NvdW50IGFmdGVyIHNpZ25pbmcgb3V0IGFuZCByZWZyZXNoaW5nIHRoZSB0YWIuXHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocGVyc2lzdGVuY2VIaWVyYXJjaHkubWFwKGFzeW5jIChwZXJzaXN0ZW5jZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAocGVyc2lzdGVuY2UgIT09IHNlbGVjdGVkUGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcGVyc2lzdGVuY2UuX3JlbW92ZShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoc2VsZWN0ZWRQZXJzaXN0ZW5jZSwgYXV0aCwgdXNlcktleSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERldGVybWluZSB0aGUgYnJvd3NlciBmb3IgdGhlIHB1cnBvc2VzIG9mIHJlcG9ydGluZyB1c2FnZSB0byB0aGUgQVBJXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0QnJvd3Nlck5hbWUodXNlckFnZW50KSB7XHJcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKHVhLmluY2x1ZGVzKCdvcGVyYS8nKSB8fCB1YS5pbmNsdWRlcygnb3ByLycpIHx8IHVhLmluY2x1ZGVzKCdvcGlvcy8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIk9wZXJhXCIgLyogT1BFUkEgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNJRU1vYmlsZSh1YSkpIHtcclxuICAgICAgICAvLyBXaW5kb3dzIHBob25lIElFTW9iaWxlIGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiSUVNb2JpbGVcIiAvKiBJRU1PQklMRSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdtc2llJykgfHwgdWEuaW5jbHVkZXMoJ3RyaWRlbnQvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJJRVwiIC8qIElFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ2VkZ2UvJykpIHtcclxuICAgICAgICByZXR1cm4gXCJFZGdlXCIgLyogRURHRSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0ZpcmVmb3godWEpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiRmlyZWZveFwiIC8qIEZJUkVGT1ggKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnc2lsay8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIlNpbGtcIiAvKiBTSUxLICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQmxhY2tCZXJyeSh1YSkpIHtcclxuICAgICAgICAvLyBCbGFja2JlcnJ5IGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiQmxhY2tiZXJyeVwiIC8qIEJMQUNLQkVSUlkgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNXZWJPUyh1YSkpIHtcclxuICAgICAgICAvLyBXZWJPUyBkZWZhdWx0IGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiV2Vib3NcIiAvKiBXRUJPUyAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc1NhZmFyaSh1YSkpIHtcclxuICAgICAgICByZXR1cm4gXCJTYWZhcmlcIiAvKiBTQUZBUkkgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICgodWEuaW5jbHVkZXMoJ2Nocm9tZS8nKSB8fCBfaXNDaHJvbWVJT1ModWEpKSAmJlxyXG4gICAgICAgICF1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIkNocm9tZVwiIC8qIENIUk9NRSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0FuZHJvaWQodWEpKSB7XHJcbiAgICAgICAgLy8gQW5kcm9pZCBzdG9jayBicm93c2VyLlxyXG4gICAgICAgIHJldHVybiBcIkFuZHJvaWRcIiAvKiBBTkRST0lEICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgLy8gTW9zdCBtb2Rlcm4gYnJvd3NlcnMgaGF2ZSBuYW1lL3ZlcnNpb24gYXQgZW5kIG9mIHVzZXIgYWdlbnQgc3RyaW5nLlxyXG4gICAgICAgIGNvbnN0IHJlID0gLyhbYS16QS1aXFxkXFwuXSspXFwvW2EtekEtWlxcZFxcLl0qJC87XHJcbiAgICAgICAgY29uc3QgbWF0Y2hlcyA9IHVzZXJBZ2VudC5tYXRjaChyZSk7XHJcbiAgICAgICAgaWYgKChtYXRjaGVzID09PSBudWxsIHx8IG1hdGNoZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG1hdGNoZXMubGVuZ3RoKSA9PT0gMikge1xyXG4gICAgICAgICAgICByZXR1cm4gbWF0Y2hlc1sxXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gXCJPdGhlclwiIC8qIE9USEVSICovO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0ZpcmVmb3godWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2ZpcmVmb3hcXC8vaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNTYWZhcmkodXNlckFnZW50ID0gZ2V0VUEoKSkge1xyXG4gICAgY29uc3QgdWEgPSB1c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcclxuICAgIHJldHVybiAodWEuaW5jbHVkZXMoJ3NhZmFyaS8nKSAmJlxyXG4gICAgICAgICF1YS5pbmNsdWRlcygnY2hyb21lLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdjcmlvcy8nKSAmJlxyXG4gICAgICAgICF1YS5pbmNsdWRlcygnYW5kcm9pZCcpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNDaHJvbWVJT1ModWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2NyaW9zXFwvL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSUVNb2JpbGUodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2llbW9iaWxlL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQW5kcm9pZCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvYW5kcm9pZC9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0JsYWNrQmVycnkodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2JsYWNrYmVycnkvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNXZWJPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvd2Vib3MvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1ModWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL2lwaG9uZXxpcGFkfGlwb2QvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1M3T3I4KHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuICgvKGlQYWR8aVBob25lfGlQb2QpLipPUyA3X1xcZC9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgLyhpUGFkfGlQaG9uZXxpUG9kKS4qT1MgOF9cXGQvaS50ZXN0KHVhKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TU3RhbmRhbG9uZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiBfaXNJT1ModWEpICYmICEhKChfYSA9IHdpbmRvdy5uYXZpZ2F0b3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdGFuZGFsb25lKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRTEwKCkge1xyXG4gICAgcmV0dXJuIGlzSUUoKSAmJiBkb2N1bWVudC5kb2N1bWVudE1vZGUgPT09IDEwO1xyXG59XHJcbmZ1bmN0aW9uIF9pc01vYmlsZUJyb3dzZXIodWEgPSBnZXRVQSgpKSB7XHJcbiAgICAvLyBUT0RPOiBpbXBsZW1lbnQgZ2V0QnJvd3Nlck5hbWUgZXF1aXZhbGVudCBmb3IgT1MuXHJcbiAgICByZXR1cm4gKF9pc0lPUyh1YSkgfHxcclxuICAgICAgICBfaXNBbmRyb2lkKHVhKSB8fFxyXG4gICAgICAgIF9pc1dlYk9TKHVhKSB8fFxyXG4gICAgICAgIF9pc0JsYWNrQmVycnkodWEpIHx8XHJcbiAgICAgICAgL3dpbmRvd3MgcGhvbmUvaS50ZXN0KHVhKSB8fFxyXG4gICAgICAgIF9pc0lFTW9iaWxlKHVhKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSWZyYW1lKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSBjdXJyZW50IHdpbmRvdyBpcyBub3QgdGhlIHRvcCB3aW5kb3cuXHJcbiAgICAgICAgLy8gSWYgc28sIHJldHVybiB0cnVlLlxyXG4gICAgICAgIHJldHVybiAhISh3aW5kb3cgJiYgd2luZG93ICE9PSB3aW5kb3cudG9wKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qXHJcbiAqIERldGVybWluZSB0aGUgU0RLIHZlcnNpb24gc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2V0Q2xpZW50VmVyc2lvbihjbGllbnRQbGF0Zm9ybSwgZnJhbWV3b3JrcyA9IFtdKSB7XHJcbiAgICBsZXQgcmVwb3J0ZWRQbGF0Zm9ybTtcclxuICAgIHN3aXRjaCAoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgICAgICBjYXNlIFwiQnJvd3NlclwiIC8qIEJST1dTRVIgKi86XHJcbiAgICAgICAgICAgIC8vIEluIGEgYnJvd3NlciBlbnZpcm9ubWVudCwgcmVwb3J0IHRoZSBicm93c2VyIG5hbWUuXHJcbiAgICAgICAgICAgIHJlcG9ydGVkUGxhdGZvcm0gPSBfZ2V0QnJvd3Nlck5hbWUoZ2V0VUEoKSk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJXb3JrZXJcIiAvKiBXT1JLRVIgKi86XHJcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IGEgd29ya2VyIHJ1bnMgZnJvbSBhIGJyb3dzZXIgYnV0IHdlIG5lZWQgdG8gZGlmZmVyZW50aWF0ZSBhXHJcbiAgICAgICAgICAgIC8vIHdvcmtlciBmcm9tIGEgYnJvd3Nlci5cclxuICAgICAgICAgICAgLy8gRm9yIGV4YW1wbGU6IENocm9tZS1Xb3JrZXIvSnNDb3JlLzQuOS4xL0ZpcmViYXNlQ29yZS13ZWIuXHJcbiAgICAgICAgICAgIHJlcG9ydGVkUGxhdGZvcm0gPSBgJHtfZ2V0QnJvd3Nlck5hbWUoZ2V0VUEoKSl9LSR7Y2xpZW50UGxhdGZvcm19YDtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGNsaWVudFBsYXRmb3JtO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVwb3J0ZWRGcmFtZXdvcmtzID0gZnJhbWV3b3Jrcy5sZW5ndGhcclxuICAgICAgICA/IGZyYW1ld29ya3Muam9pbignLCcpXHJcbiAgICAgICAgOiAnRmlyZWJhc2VDb3JlLXdlYic7IC8qIGRlZmF1bHQgdmFsdWUgaWYgbm8gb3RoZXIgZnJhbWV3b3JrIGlzIHVzZWQgKi9cclxuICAgIHJldHVybiBgJHtyZXBvcnRlZFBsYXRmb3JtfS8ke1wiSnNDb3JlXCIgLyogQ09SRSAqL30vJHtTREtfVkVSU0lPTn0vJHtyZXBvcnRlZEZyYW1ld29ya3N9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBBdXRoSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHAsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5oZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIgPSBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5jb25maWcgPSBjb25maWc7XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbXVsYXRvckNvbmZpZyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25zID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIC8vIEFueSBuZXR3b3JrIGNhbGxzIHdpbGwgc2V0IHRoaXMgdG8gdHJ1ZSBhbmQgcHJldmVudCBzdWJzZXF1ZW50IGVtdWxhdG9yXHJcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb25cclxuICAgICAgICB0aGlzLl9jYW5Jbml0RW11bGF0b3IgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX2Vycm9yRmFjdG9yeSA9IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWTtcclxuICAgICAgICAvLyBUcmFja3MgdGhlIGxhc3Qgbm90aWZpZWQgVUlEIGZvciBzdGF0ZSBjaGFuZ2UgbGlzdGVuZXJzIHRvIHByZXZlbnRcclxuICAgICAgICAvLyByZXBlYXRlZCBjYWxscyB0byB0aGUgY2FsbGJhY2tzLiBVbmRlZmluZWQgbWVhbnMgaXQncyBuZXZlciBiZWVuXHJcbiAgICAgICAgLy8gY2FsbGVkLCB3aGVyZWFzIG51bGwgbWVhbnMgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGEgc2lnbmVkIG91dCB1c2VyXHJcbiAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IGFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZzogZmFsc2UgfTtcclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MgPSBbXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBhcHAubmFtZTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBjb25maWcuc2RrQ2xpZW50VmVyc2lvbjtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlSGllcmFyY2h5LCBwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBIYXZlIHRvIGNoZWNrIGZvciBhcHAgZGVsZXRpb24gdGhyb3VnaG91dCBpbml0aWFsaXphdGlvbiAoYWZ0ZXIgZWFjaFxyXG4gICAgICAgIC8vIHByb21pc2UgcmVzb2x1dGlvbilcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIHBlcnNpc3RlbmNlSGllcmFyY2h5KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSByZXNvbHZlciBlYXJseSBpZiBuZWNlc3NhcnkgKG9ubHkgYXBwbGljYWJsZSB0byB3ZWI6XHJcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBjYXVzZSB0aGUgaWZyYW1lIHRvIGxvYWQgaW1tZWRpYXRlbHkgaW4gY2VydGFpbiBjYXNlcylcclxuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9zaG91bGRJbml0UHJvYWN0aXZlbHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMsIGRvbid0IGhhbHQgYXV0aCBsb2FkaW5nXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IC8qIElnbm9yZSB0aGUgZXJyb3IgKi8gfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gKChfYiA9IHRoaXMuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51aWQpIHx8IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIHBlcnNpc3RlbmNlIGlzIGNoYW5nZWQgaW4gYW5vdGhlciB3aW5kb3csIHRoZSB1c2VyIG1hbmFnZXIgd2lsbCBsZXQgdXMga25vd1xyXG4gICAgICovXHJcbiAgICBhc3luYyBfb25TdG9yYWdlRXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyICYmICF1c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIGNoYW5nZSwgZG8gbm90aGluZyAod2FzIHNpZ25lZCBvdXQgYW5kIHJlbWFpbmVkIHNpZ25lZCBvdXQpLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzYW1lIHVzZXIgaXMgdG8gYmUgc3luY2hyb25pemVkLlxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci51aWQgPT09IHVzZXIudWlkKSB7XHJcbiAgICAgICAgICAgIC8vIERhdGEgdXBkYXRlLCBzaW1wbHkgY29weSBkYXRhIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9hc3NpZ24odXNlcik7XHJcbiAgICAgICAgICAgIC8vIElmIHRva2VucyBjaGFuZ2VkIGZyb20gcHJldmlvdXMgdXNlciB0b2tlbnMsIHRoaXMgd2lsbCB0cmlnZ2VyXHJcbiAgICAgICAgICAgIC8vIG5vdGlmeUF1dGhMaXN0ZW5lcnNfLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBBdXRoIHN0YXRlLiBFaXRoZXIgYSBuZXcgbG9naW4gb3IgbG9nb3V0LlxyXG4gICAgICAgIGF3YWl0IHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBGaXJzdCBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHBlbmRpbmcgcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgbGV0IHN0b3JlZFVzZXIgPSAoYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCkpO1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIgJiYgdGhpcy5jb25maWcuYXV0aERvbWFpbikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlZGlyZWN0VXNlckV2ZW50SWQgPSAoX2EgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0b3JlZFVzZXJFdmVudElkID0gc3RvcmVkVXNlciA9PT0gbnVsbCB8fCBzdG9yZWRVc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMudHJ5UmVkaXJlY3RTaWduSW4ocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIHN0b3JlZCB1c2VyIChpLmUuIHRoZSBvbGQgXCJjdXJyZW50VXNlclwiKSBoYXMgYSByZWRpcmVjdElkIHRoYXRcclxuICAgICAgICAgICAgLy8gbWF0Y2hlcyB0aGUgcmVkaXJlY3QgdXNlciwgdGhlbiB3ZSB3YW50IHRvIGluaXRpYWxseSBzaWduIGluIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIG5ldyB1c2VyIG9iamVjdCBmcm9tIHJlc3VsdC5cclxuICAgICAgICAgICAgLy8gVE9ETyhzYW1naG8pOiBNb3JlIHRob3JvdWdobHkgdGVzdCBhbGwgb2YgdGhpc1xyXG4gICAgICAgICAgICBpZiAoKCFyZWRpcmVjdFVzZXJFdmVudElkIHx8IHJlZGlyZWN0VXNlckV2ZW50SWQgPT09IHN0b3JlZFVzZXJFdmVudElkKSAmJlxyXG4gICAgICAgICAgICAgICAgKHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdC51c2VyKSkge1xyXG4gICAgICAgICAgICAgICAgc3RvcmVkVXNlciA9IHJlc3VsdC51c2VyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIG5vIHVzZXIgaW4gcGVyc2lzdGVuY2UsIHRoZXJlIGlzIG5vIGN1cnJlbnQgdXNlci4gU2V0IHRvIG51bGwuXHJcbiAgICAgICAgaWYgKCFzdG9yZWRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXNuJ3QgYSByZWRpcmVjdCB1c2VyLCB3ZSBjYW4gcmVsb2FkIGFuZCBiYWlsXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCBhbHNvIGNhdGNoIHRoZSByZWRpcmVjdGVkIHVzZXIsIGlmIGF2YWlsYWJsZSwgYXMgdGhhdCBtZXRob2RcclxuICAgICAgICAgICAgLy8gc3RyaXBzIHRoZSBfcmVkaXJlY3RFdmVudElkXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIsIHRoaXMsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcigpO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB1c2VyJ3MgZXZlbnQgSUQgbWF0Y2hlcyB0aGUgY3VycmVudCB1c2VyJ3MgZXZlbnQgSUQsXHJcbiAgICAgICAgLy8gRE8gTk9UIHJlbG9hZCB0aGUgY3VycmVudCB1c2VyLCBvdGhlcndpc2UgdGhleSdsbCBiZSBjbGVhcmVkIGZyb20gc3RvcmFnZS5cclxuICAgICAgICAvLyBUaGlzIGlzIGltcG9ydGFudCBmb3IgdGhlIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KCkgZmxvdy5cclxuICAgICAgICBpZiAodGhpcy5yZWRpcmVjdFVzZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9PT0gc3RvcmVkVXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIoc3RvcmVkVXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhcihzdG9yZWRVc2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHRyeVJlZGlyZWN0U2lnbkluKHJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAvLyBUaGUgcmVkaXJlY3QgdXNlciBuZWVkcyB0byBiZSBjaGVja2VkIChhbmQgc2lnbmVkIGluIGlmIGF2YWlsYWJsZSlcclxuICAgICAgICAvLyBkdXJpbmcgYXV0aCBpbml0aWFsaXphdGlvbi4gQWxsIG9mIHRoZSBub3JtYWwgc2lnbiBpbiBhbmQgbGluay9yZWF1dGhcclxuICAgICAgICAvLyBmbG93cyBjYWxsIGJhY2sgaW50byBhdXRoIGFuZCBwdXNoIHRoaW5ncyBvbnRvIHRoZSBwcm9taXNlIHF1ZXVlLiBXZVxyXG4gICAgICAgIC8vIG5lZWQgdG8gYXdhaXQgdGhlIHJlc3VsdCBvZiB0aGUgcmVkaXJlY3Qgc2lnbiBpbiAqaW5zaWRlIHRoZSBwcm9taXNlXHJcbiAgICAgICAgLy8gcXVldWUqLiBUaGlzIHByZXNlbnRzIGEgcHJvYmxlbTogd2UgcnVuIGludG8gZGVhZGxvY2suIFNlZTpcclxuICAgICAgICAvLyAgICDilIw+IFtJbml0aWFsaXphdGlvbl0g4pSA4pSA4pSA4pSA4pSA4pSQXHJcbiAgICAgICAgLy8gICAg4pSMPiBbPG90aGVyIHF1ZXVlIHRhc2tzPl0g4pSCXHJcbiAgICAgICAgLy8gICAg4pSU4pSAIFtnZXRSZWRpcmVjdFJlc3VsdF0gPOKUgOKUmFxyXG4gICAgICAgIC8vICAgIHdoZXJlIFtdIGFyZSB0YXNrcyBvbiB0aGUgcXVldWUgYW5kIGFycm93cyBkZW5vdGUgYXdhaXRzXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6YXRpb24gd2lsbCBuZXZlciBjb21wbGV0ZSBiZWNhdXNlIGl0J3Mgd2FpdGluZyBvbiBzb21ldGhpbmdcclxuICAgICAgICAvLyB0aGF0J3Mgd2FpdGluZyBmb3IgaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUhXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBJbnN0ZWFkLCB0aGlzIG1ldGhvZCBjYWxscyBnZXRSZWRpcmVjdFJlc3VsdCgpIChzdG9yZWQgaW5cclxuICAgICAgICAvLyBfY29tcGxldGVSZWRpcmVjdEZuKSB3aXRoIGFuIG9wdGlvbmFsIHBhcmFtZXRlciB0aGF0IGluc3RydWN0cyBhbGwgb2ZcclxuICAgICAgICAvLyB0aGUgdW5kZXJseWluZyBhdXRoIG9wZXJhdGlvbnMgdG8gc2tpcCBhbnl0aGluZyB0aGF0IG11dGF0ZXMgYXV0aCBzdGF0ZS5cclxuICAgICAgICBsZXQgcmVzdWx0ID0gbnVsbDtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBXZSBrbm93IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciBpcyBzZXQgc2luY2UgcmVkaXJlY3RSZXNvbHZlclxyXG4gICAgICAgICAgICAvLyBpcyBwYXNzZWQgaW4uIFRoZSBfY29tcGxldGVSZWRpcmVjdEZuIGV4cGVjdHMgdGhlIHVud3JhcHBlZCBleHRlcm4uXHJcbiAgICAgICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5fY29tcGxldGVSZWRpcmVjdEZuKHRoaXMsIHJlZGlyZWN0UmVzb2x2ZXIsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBTd2FsbG93IGFueSBlcnJvcnMgaGVyZTsgdGhlIGNvZGUgY2FuIHJldHJpZXZlIHRoZW0gaW5cclxuICAgICAgICAgICAgLy8gZ2V0UmVkaXJlY3RSZXN1bHQoKS5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHVzZXIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZydzIHdyb25nIHdpdGggdGhlIHVzZXIncyB0b2tlbi4gTG9nIHRoZW0gb3V0IGFuZCByZW1vdmVcclxuICAgICAgICAgICAgICAgIC8vIHRoZW0gZnJvbSBzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICB1c2VEZXZpY2VMYW5ndWFnZSgpIHtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IF9nZXRVc2VyTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9kZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1cGRhdGVDdXJyZW50VXNlcih1c2VyRXh0ZXJuKSB7XHJcbiAgICAgICAgLy8gVGhlIHB1YmxpYyB1cGRhdGVDdXJyZW50VXNlciBtZXRob2QgbmVlZHMgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIHVzZXIsXHJcbiAgICAgICAgLy8gYW5kIGFsc28gY2hlY2sgdGhhdCB0aGUgcHJvamVjdCBtYXRjaGVzXHJcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJFeHRlcm5cclxuICAgICAgICAgICAgPyBnZXRNb2R1bGFySW5zdGFuY2UodXNlckV4dGVybilcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodXNlci5hdXRoLmNvbmZpZy5hcGlLZXkgPT09IHRoaXMuY29uZmlnLmFwaUtleSwgdGhpcywgXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBJTlZBTElEX0FVVEggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlciAmJiB1c2VyLl9jbG9uZSh0aGlzKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlQ3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0aGlzLnRlbmFudElkID09PSB1c2VyLnRlbmFudElkLCB0aGlzLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHJlZGlyZWN0IHVzZXIgd2hlbiBzaWduT3V0IGlzIGNhbGxlZFxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIHx8IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcihudWxsKTtcclxuICAgIH1cclxuICAgIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0UGVyc2lzdGVuY2UoX2dldEluc3RhbmNlKHBlcnNpc3RlbmNlKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0UGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5wZXJzaXN0ZW5jZS50eXBlO1xyXG4gICAgfVxyXG4gICAgX3VwZGF0ZUVycm9yTWFwKGVycm9yTWFwKSB7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIGVycm9yTWFwKCkpO1xyXG4gICAgfVxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuY29uZmlnLmFwaUtleSxcclxuICAgICAgICAgICAgYXV0aERvbWFpbjogdGhpcy5jb25maWcuYXV0aERvbWFpbixcclxuICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0pTT04oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0UmVkaXJlY3RVc2VyKHVzZXIsIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGNvbnN0IHJlZGlyZWN0TWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICByZXR1cm4gdXNlciA9PT0gbnVsbFxyXG4gICAgICAgICAgICA/IHJlZGlyZWN0TWFuYWdlci5yZW1vdmVDdXJyZW50VXNlcigpXHJcbiAgICAgICAgICAgIDogcmVkaXJlY3RNYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiBfZ2V0SW5zdGFuY2UocG9wdXBSZWRpcmVjdFJlc29sdmVyKSkgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIFtfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpXSwgXCJyZWRpcmVjdFVzZXJcIiAvKiBSRURJUkVDVF9VU0VSICovKTtcclxuICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFVzZXIgPVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlci5nZXRDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcjtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZWRpcmVjdFVzZXJGb3JJZChpZCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlJ3ZlIGNsZWFyZWQgYW55IHBlbmRpbmcgcGVyc2lzdGVuY2UgYWN0aW9ucyBpZiB3ZSdyZSBub3QgaW5cclxuICAgICAgICAvLyB0aGUgaW5pdGlhbGl6ZXJcclxuICAgICAgICBpZiAodGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHsgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5fcmVkaXJlY3RFdmVudElkKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRVc2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYiA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuX3JlZGlyZWN0RXZlbnRJZCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0VXNlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIE5vdGlmaWVzIGxpc3RlbmVycyBvbmx5IGlmIHRoZSB1c2VyIGlzIGN1cnJlbnQgKi9cclxuICAgIF9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlcikge1xyXG4gICAgICAgIGlmICh1c2VyID09PSB0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9rZXkoKSB7XHJcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuY29uZmlnLmF1dGhEb21haW59OiR7dGhpcy5jb25maWcuYXBpS2V5fToke3RoaXMubmFtZX1gO1xyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIFJldHVybnMgdGhlIGN1cnJlbnQgdXNlciBjYXN0IGFzIHRoZSBpbnRlcm5hbCB0eXBlICovXHJcbiAgICBnZXQgX2N1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRVc2VyO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5QXV0aExpc3RlbmVycygpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbi5uZXh0KHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRVaWQgPSAoX2IgPSAoX2EgPSB0aGlzLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xyXG4gICAgICAgIGlmICh0aGlzLmxhc3ROb3RpZmllZFVpZCAhPT0gY3VycmVudFVpZCkge1xyXG4gICAgICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IGN1cnJlbnRVaWQ7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKCkgPT4geyB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjYiA9IHR5cGVvZiBuZXh0T3JPYnNlcnZlciA9PT0gJ2Z1bmN0aW9uJ1xyXG4gICAgICAgICAgICA/IG5leHRPck9ic2VydmVyXHJcbiAgICAgICAgICAgIDogbmV4dE9yT2JzZXJ2ZXIubmV4dC5iaW5kKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICBjb25zdCBwcm9taXNlID0gdGhpcy5faXNJbml0aWFsaXplZFxyXG4gICAgICAgICAgICA/IFByb21pc2UucmVzb2x2ZSgpXHJcbiAgICAgICAgICAgIDogdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIF9hc3NlcnQocHJvbWlzZSwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBUaGUgY2FsbGJhY2sgbmVlZHMgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IHBlciB0aGUgc3BlYy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IGNiKHRoaXMuY3VycmVudFVzZXIpKTtcclxuICAgICAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnByb3RlY3RlZCAoZnJvbSByYWNlIGNvbmRpdGlvbnMpIG1ldGhvZCB0byBzZXQgdGhlIGN1cnJlbnQgdXNlci4gVGhpc1xyXG4gICAgICogc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgcXVldWVkIGNhbGxiYWNrLiBUaGlzIGlzIG5lY2Vzc2FyeVxyXG4gICAgICogYmVjYXVzZSB0aGUgcXVldWUgc2hvdWxkbid0IHJlbHkgb24gYW5vdGhlciBxdWV1ZWQgY2FsbGJhY2suXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIgIT09IHVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyICYmIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgdXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVldWUoYWN0aW9uKSB7XHJcbiAgICAgICAgLy8gSW4gY2FzZSBzb21ldGhpbmcgZXJyb3JzLCB0aGUgY2FsbGJhY2sgc3RpbGwgc2hvdWxkIGJlIGNhbGxlZCBpbiBvcmRlclxyXG4gICAgICAgIC8vIHRvIGtlZXAgdGhlIHByb21pc2UgY2hhaW4gYWxpdmVcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSB0aGlzLm9wZXJhdGlvbnMudGhlbihhY3Rpb24sIGFjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBhc3NlcnRlZFBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXIsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2xvZ0ZyYW1ld29yayhmcmFtZXdvcmspIHtcclxuICAgICAgICBpZiAoIWZyYW1ld29yayB8fCB0aGlzLmZyYW1ld29ya3MuaW5jbHVkZXMoZnJhbWV3b3JrKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5wdXNoKGZyYW1ld29yayk7XHJcbiAgICAgICAgLy8gU29ydCBhbHBoYWJldGljYWxseSBzbyB0aGF0IFwiRmlyZWJhc2VDb3JlLXdlYixGaXJlYmFzZVVJLXdlYlwiIGFuZFxyXG4gICAgICAgIC8vIFwiRmlyZWJhc2VVSS13ZWIsRmlyZWJhc2VDb3JlLXdlYlwiIGFyZW4ndCB2aWV3ZWQgYXMgZGlmZmVyZW50LlxyXG4gICAgICAgIHRoaXMuZnJhbWV3b3Jrcy5zb3J0KCk7XHJcbiAgICAgICAgdGhpcy5jbGllbnRWZXJzaW9uID0gX2dldENsaWVudFZlcnNpb24odGhpcy5jb25maWcuY2xpZW50UGxhdGZvcm0sIHRoaXMuX2dldEZyYW1ld29ya3MoKSk7XHJcbiAgICB9XHJcbiAgICBfZ2V0RnJhbWV3b3JrcygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mcmFtZXdvcmtzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldEFkZGl0aW9uYWxIZWFkZXJzKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBBZGRpdGlvbmFsIGhlYWRlcnMgb24gZXZlcnkgcmVxdWVzdFxyXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XHJcbiAgICAgICAgICAgIFtcIlgtQ2xpZW50LVZlcnNpb25cIiAvKiBYX0NMSUVOVF9WRVJTSU9OICovXTogdGhpcy5jbGllbnRWZXJzaW9uLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLm9wdGlvbnMuYXBwSWQpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtZ21waWRcIiAvKiBYX0ZJUkVCQVNFX0dNUElEICovXSA9IHRoaXMuYXBwLm9wdGlvbnMuYXBwSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBoZWFydGJlYXQgc2VydmljZSBleGlzdHMsIGFkZCB0aGUgaGVhcnRiZWF0IHN0cmluZ1xyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdHNIZWFkZXIgPSBhd2FpdCAoKF9hID0gdGhpcy5oZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgb3B0aW9uYWw6IHRydWUsXHJcbiAgICAgICAgfSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRIZWFydGJlYXRzSGVhZGVyKCkpO1xyXG4gICAgICAgIGlmIChoZWFydGJlYXRzSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbXCJYLUZpcmViYXNlLUNsaWVudFwiIC8qIFhfRklSRUJBU0VfQ0xJRU5UICovXSA9IGhlYXJ0YmVhdHNIZWFkZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBNZXRob2QgdG8gYmUgdXNlZCB0byBjYXN0IGRvd24gdG8gb3VyIHByaXZhdGUgaW1wbG1lbnRhdGlvbiBvZiBBdXRoLlxyXG4gKiBJdCB3aWxsIGFsc28gaGFuZGxlIHVud3JhcHBpbmcgZnJvbSB0aGUgY29tcGF0IHR5cGUgaWYgbmVjZXNzYXJ5XHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIEF1dGggb2JqZWN0IHBhc3NlZCBpbiBmcm9tIGRldmVsb3BlclxyXG4gKi9cclxuZnVuY3Rpb24gX2Nhc3RBdXRoKGF1dGgpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbn1cclxuLyoqIEhlbHBlciBjbGFzcyB0byB3cmFwIHN1YnNjcmliZXIgbG9naWMgKi9cclxuY2xhc3MgU3Vic2NyaXB0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYWRkT2JzZXJ2ZXIgPSBjcmVhdGVTdWJzY3JpYmUob2JzZXJ2ZXIgPT4gKHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcikpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5leHQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLm9ic2VydmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXIubmV4dC5iaW5kKHRoaXMub2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBDaGFuZ2VzIHRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgdG8gY29tbXVuaWNhdGUgd2l0aCB0aGUgRmlyZWJhc2UgQXV0aCBFbXVsYXRvciwgaW5zdGVhZCBvZiBwcm9kdWN0aW9uXHJcbiAqIEZpcmViYXNlIEF1dGggc2VydmljZXMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbXVzdCBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBpbW1lZGlhdGVseSBmb2xsb3dpbmcgdGhlIGZpcnN0IGNhbGwgdG9cclxuICoge0BsaW5rIGluaXRpYWxpemVBdXRofS4gIERvIG5vdCB1c2Ugd2l0aCBwcm9kdWN0aW9uIGNyZWRlbnRpYWxzIGFzIGVtdWxhdG9yXHJcbiAqIHRyYWZmaWMgaXMgbm90IGVuY3J5cHRlZC5cclxuICpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25uZWN0QXV0aEVtdWxhdG9yKGF1dGgsICdodHRwOi8vMTI3LjAuMC4xOjkwOTknLCB7IGRpc2FibGVXYXJuaW5nczogdHJ1ZSB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHVybCAtIFRoZSBVUkwgYXQgd2hpY2ggdGhlIGVtdWxhdG9yIGlzIHJ1bm5pbmcgKGVnLCAnaHR0cDovL2xvY2FsaG9zdDo5MDk5JykuXHJcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3B0aW9uYWwuIGBvcHRpb25zLmRpc2FibGVXYXJuaW5nc2AgZGVmYXVsdHMgdG8gYGZhbHNlYC4gU2V0IGl0IHRvXHJcbiAqIGB0cnVlYCB0byBkaXNhYmxlIHRoZSB3YXJuaW5nIGJhbm5lciBhdHRhY2hlZCB0byB0aGUgRE9NLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBjb25uZWN0QXV0aEVtdWxhdG9yKGF1dGgsIHVybCwgb3B0aW9ucykge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydChhdXRoSW50ZXJuYWwuX2NhbkluaXRFbXVsYXRvciwgYXV0aEludGVybmFsLCBcImVtdWxhdG9yLWNvbmZpZy1mYWlsZWRcIiAvKiBFTVVMQVRPUl9DT05GSUdfRkFJTEVEICovKTtcclxuICAgIF9hc3NlcnQoL15odHRwcz86XFwvXFwvLy50ZXN0KHVybCksIGF1dGhJbnRlcm5hbCwgXCJpbnZhbGlkLWVtdWxhdG9yLXNjaGVtZVwiIC8qIElOVkFMSURfRU1VTEFUT1JfU0NIRU1FICovKTtcclxuICAgIGNvbnN0IGRpc2FibGVXYXJuaW5ncyA9ICEhKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5kaXNhYmxlV2FybmluZ3MpO1xyXG4gICAgY29uc3QgcHJvdG9jb2wgPSBleHRyYWN0UHJvdG9jb2wodXJsKTtcclxuICAgIGNvbnN0IHsgaG9zdCwgcG9ydCB9ID0gZXh0cmFjdEhvc3RBbmRQb3J0KHVybCk7XHJcbiAgICBjb25zdCBwb3J0U3RyID0gcG9ydCA9PT0gbnVsbCA/ICcnIDogYDoke3BvcnR9YDtcclxuICAgIC8vIEFsd2F5cyByZXBsYWNlIHBhdGggd2l0aCBcIi9cIiAoZXZlbiBpZiBpbnB1dCB1cmwgaGFkIG5vIHBhdGggYXQgYWxsLCBvciBoYWQgYSBkaWZmZXJlbnQgb25lKS5cclxuICAgIGF1dGhJbnRlcm5hbC5jb25maWcuZW11bGF0b3IgPSB7IHVybDogYCR7cHJvdG9jb2x9Ly8ke2hvc3R9JHtwb3J0U3RyfS9gIH07XHJcbiAgICBhdXRoSW50ZXJuYWwuc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nID0gdHJ1ZTtcclxuICAgIGF1dGhJbnRlcm5hbC5lbXVsYXRvckNvbmZpZyA9IE9iamVjdC5mcmVlemUoe1xyXG4gICAgICAgIGhvc3QsXHJcbiAgICAgICAgcG9ydCxcclxuICAgICAgICBwcm90b2NvbDogcHJvdG9jb2wucmVwbGFjZSgnOicsICcnKSxcclxuICAgICAgICBvcHRpb25zOiBPYmplY3QuZnJlZXplKHsgZGlzYWJsZVdhcm5pbmdzIH0pXHJcbiAgICB9KTtcclxuICAgIGlmICghZGlzYWJsZVdhcm5pbmdzKSB7XHJcbiAgICAgICAgZW1pdEVtdWxhdG9yV2FybmluZygpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RQcm90b2NvbCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sRW5kID0gdXJsLmluZGV4T2YoJzonKTtcclxuICAgIHJldHVybiBwcm90b2NvbEVuZCA8IDAgPyAnJyA6IHVybC5zdWJzdHIoMCwgcHJvdG9jb2xFbmQgKyAxKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0SG9zdEFuZFBvcnQodXJsKSB7XHJcbiAgICBjb25zdCBwcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbCh1cmwpO1xyXG4gICAgY29uc3QgYXV0aG9yaXR5ID0gLyhcXC9cXC8pPyhbXj8jL10rKS8uZXhlYyh1cmwuc3Vic3RyKHByb3RvY29sLmxlbmd0aCkpOyAvLyBCZXR3ZWVuIC8vIGFuZCAvLCA/IG9yICMuXHJcbiAgICBpZiAoIWF1dGhvcml0eSkge1xyXG4gICAgICAgIHJldHVybiB7IGhvc3Q6ICcnLCBwb3J0OiBudWxsIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBob3N0QW5kUG9ydCA9IGF1dGhvcml0eVsyXS5zcGxpdCgnQCcpLnBvcCgpIHx8ICcnOyAvLyBTdHJpcCBvdXQgXCJ1c2VybmFtZTpwYXNzd29yZEBcIi5cclxuICAgIGNvbnN0IGJyYWNrZXRlZElQdjYgPSAvXihcXFtbXlxcXV0rXFxdKSg6fCQpLy5leGVjKGhvc3RBbmRQb3J0KTtcclxuICAgIGlmIChicmFja2V0ZWRJUHY2KSB7XHJcbiAgICAgICAgY29uc3QgaG9zdCA9IGJyYWNrZXRlZElQdjZbMV07XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdCwgcG9ydDogcGFyc2VQb3J0KGhvc3RBbmRQb3J0LnN1YnN0cihob3N0Lmxlbmd0aCArIDEpKSB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgY29uc3QgW2hvc3QsIHBvcnRdID0gaG9zdEFuZFBvcnQuc3BsaXQoJzonKTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQocG9ydCkgfTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBwYXJzZVBvcnQocG9ydFN0cikge1xyXG4gICAgaWYgKCFwb3J0U3RyKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwb3J0ID0gTnVtYmVyKHBvcnRTdHIpO1xyXG4gICAgaWYgKGlzTmFOKHBvcnQpKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcG9ydDtcclxufVxyXG5mdW5jdGlvbiBlbWl0RW11bGF0b3JXYXJuaW5nKCkge1xyXG4gICAgZnVuY3Rpb24gYXR0YWNoQmFubmVyKCkge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG4gICAgICAgIGNvbnN0IHN0eSA9IGVsLnN0eWxlO1xyXG4gICAgICAgIGVsLmlubmVyVGV4dCA9XHJcbiAgICAgICAgICAgICdSdW5uaW5nIGluIGVtdWxhdG9yIG1vZGUuIERvIG5vdCB1c2Ugd2l0aCBwcm9kdWN0aW9uIGNyZWRlbnRpYWxzLic7XHJcbiAgICAgICAgc3R5LnBvc2l0aW9uID0gJ2ZpeGVkJztcclxuICAgICAgICBzdHkud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgc3R5LmJhY2tncm91bmRDb2xvciA9ICcjZmZmZmZmJztcclxuICAgICAgICBzdHkuYm9yZGVyID0gJy4xZW0gc29saWQgIzAwMDAwMCc7XHJcbiAgICAgICAgc3R5LmNvbG9yID0gJyNiNTAwMDAnO1xyXG4gICAgICAgIHN0eS5ib3R0b20gPSAnMHB4JztcclxuICAgICAgICBzdHkubGVmdCA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5tYXJnaW4gPSAnMHB4JztcclxuICAgICAgICBzdHkuekluZGV4ID0gJzEwMDAwJztcclxuICAgICAgICBzdHkudGV4dEFsaWduID0gJ2NlbnRlcic7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnZmlyZWJhc2UtZW11bGF0b3Itd2FybmluZycpO1xyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgY29uc29sZS5pbmZvID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKCdXQVJOSU5HOiBZb3UgYXJlIHVzaW5nIHRoZSBBdXRoIEVtdWxhdG9yLCcgK1xyXG4gICAgICAgICAgICAnIHdoaWNoIGlzIGludGVuZGVkIGZvciBsb2NhbCB0ZXN0aW5nIG9ubHkuICBEbyBub3QgdXNlIHdpdGgnICtcclxuICAgICAgICAgICAgJyBwcm9kdWN0aW9uIGNyZWRlbnRpYWxzLicpO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhdHRhY2hCYW5uZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXR0YWNoQmFubmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCByZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSBhbiB7QGxpbmsgQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wbGVtZW50YXRpb25zIHNwZWNpZnkgdGhlIGRldGFpbHMgYWJvdXQgZWFjaCBhdXRoIHByb3ZpZGVyJ3MgY3JlZGVudGlhbCByZXF1aXJlbWVudHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXV0aGVudGljYXRpb24gcHJvdmlkZXIgSUQgZm9yIHRoZSBjcmVkZW50aWFsLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwgJ2ZhY2Vib29rLmNvbScsIG9yICdnb29nbGUuY29tJy5cclxuICAgICAqL1xyXG4gICAgcHJvdmlkZXJJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBzaWduIGluIG1ldGhvZCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCwgb3JcclxuICAgICAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHNpZ24taW4gbWV0aG9kXHJcbiAgICAgKiBpZGVudGlmaWVyIGFzIHJldHVybmVkIGluIHtAbGluayBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbH0uXHJcbiAgICAgKi9cclxuICAgIHNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5zaWduSW5NZXRob2QgPSBzaWduSW5NZXRob2Q7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKF9hdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihfYXV0aCwgX2lkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXNldFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6cmVzZXRQYXNzd29yZFwiIC8qIFJFU0VUX1BBU1NXT1JEICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBhcHBseUFjdGlvbkNvZGUkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBhc3N3b3JkXCIgLyogU0lHTl9JTl9XSVRIX1BBU1NXT1JEICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2VuZE9vYkNvZGVcIiAvKiBTRU5EX09PQl9DT0RFICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbiQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRTaWduSW5MaW5rVG9FbWFpbCQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlBbmRDaGFuZ2VFbWFpbChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGluayQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aEVtYWlsTGlua1wiIC8qIFNJR05fSU5fV0lUSF9FTUFJTF9MSU5LICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aEVtYWlsTGlua1wiIC8qIFNJR05fSU5fV0lUSF9FTUFJTF9MSU5LICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCByZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IGZvclxyXG4gKiB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkRcclxuICpcclxuICogQHJlbWFya3NcclxuICogQ292ZXJzIGJvdGgge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfUEFTU1dPUkQgYW5kXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEVtYWlsQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBjb25zdHJ1Y3RvcihcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9lbWFpbCwgXHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfcGFzc3dvcmQsIHNpZ25Jbk1ldGhvZCwgXHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfdGVuYW50SWQgPSBudWxsKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwYXNzd29yZFwiIC8qIFBBU1NXT1JEICovLCBzaWduSW5NZXRob2QpO1xyXG4gICAgICAgIHRoaXMuX2VtYWlsID0gX2VtYWlsO1xyXG4gICAgICAgIHRoaXMuX3Bhc3N3b3JkID0gX3Bhc3N3b3JkO1xyXG4gICAgICAgIHRoaXMuX3RlbmFudElkID0gX3RlbmFudElkO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVtYWlsQXV0aENyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkLCBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRW1haWxBbmRDb2RlKGVtYWlsLCBvb2JDb2RlLCB0ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEVtYWlsQXV0aENyZWRlbnRpYWwoZW1haWwsIG9vYkNvZGUsIFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLywgdGVuYW50SWQpO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2QsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0aGlzLl90ZW5hbnRJZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gRWl0aGVyIGBvYmplY3RgIG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LiBXaGVuIHN0cmluZyBpc1xyXG4gICAgICogcHJvdmlkZWQsIGBKU09OLnBhcnNlYCB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgaWYgKChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmouZW1haWwpICYmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoucGFzc3dvcmQpKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tRW1haWxBbmRQYXNzd29yZChvYmouZW1haWwsIG9iai5wYXNzd29yZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAob2JqLnNpZ25Jbk1ldGhvZCA9PT0gXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUVtYWlsQW5kQ29kZShvYmouZW1haWwsIG9iai5wYXNzd29yZCwgb2JqLnRlbmFudElkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbkluV2l0aFBhc3N3b3JkKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY2FzZSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbkluV2l0aEVtYWlsTGluayQxKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgb29iQ29kZTogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBhc3luYyBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVFbWFpbFBhc3N3b3JkKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyhhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgb29iQ29kZTogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoSWRwXCIgLyogU0lHTl9JTl9XSVRIX0lEUCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJRFBfUkVRVUVTVF9VUkkkMSA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIE9BdXRoIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wbGVtZW50YXRpb25zIHNwZWNpZnkgdGhlIGRldGFpbHMgYWJvdXQgZWFjaCBhdXRoIHByb3ZpZGVyJ3MgY3JlZGVudGlhbCByZXF1aXJlbWVudHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIE9BdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVG9rZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tUGFyYW1zKHBhcmFtcykge1xyXG4gICAgICAgIGNvbnN0IGNyZWQgPSBuZXcgT0F1dGhDcmVkZW50aWFsKHBhcmFtcy5wcm92aWRlcklkLCBwYXJhbXMuc2lnbkluTWV0aG9kKTtcclxuICAgICAgICBpZiAocGFyYW1zLmlkVG9rZW4gfHwgcGFyYW1zLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIC8vIE9BdXRoIDIgYW5kIGVpdGhlciBJRCB0b2tlbiBvciBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgY3JlZC5pZFRva2VuID0gcGFyYW1zLmlkVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHBhcmFtcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBZGQgbm9uY2UgaWYgYXZhaWxhYmxlIGFuZCBubyBwZW5kaW5nVG9rZW4gaXMgcHJlc2VudC5cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5ub25jZSAmJiAhcGFyYW1zLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgY3JlZC5ub25jZSA9IHBhcmFtcy5ub25jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgY3JlZC5wZW5kaW5nVG9rZW4gPSBwYXJhbXMucGVuZGluZ1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHBhcmFtcy5vYXV0aFRva2VuICYmIHBhcmFtcy5vYXV0aFRva2VuU2VjcmV0KSB7XHJcbiAgICAgICAgICAgIC8vIE9BdXRoIDEgYW5kIE9BdXRoIHRva2VuIHdpdGggdG9rZW4gc2VjcmV0XHJcbiAgICAgICAgICAgIGNyZWQuYWNjZXNzVG9rZW4gPSBwYXJhbXMub2F1dGhUb2tlbjtcclxuICAgICAgICAgICAgY3JlZC5zZWNyZXQgPSBwYXJhbXMub2F1dGhUb2tlblNlY3JldDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9mYWlsKFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVkO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkVG9rZW46IHRoaXMuaWRUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgIHNlY3JldDogdGhpcy5zZWNyZXQsXHJcbiAgICAgICAgICAgIG5vbmNlOiB0aGlzLm5vbmNlLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2RcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhblxyXG4gICAgICoge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBJbnB1dCBjYW4gYmUgZWl0aGVyIE9iamVjdCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC5cclxuICAgICAqIFdoZW4gc3RyaW5nIGlzIHByb3ZpZGVkLCBKU09OLnBhcnNlIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgY29uc3QgeyBwcm92aWRlcklkLCBzaWduSW5NZXRob2QgfSA9IG9iaiwgcmVzdCA9IF9fcmVzdChvYmosIFtcInByb3ZpZGVySWRcIiwgXCJzaWduSW5NZXRob2RcIl0pO1xyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCB8fCAhc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjcmVkID0gbmV3IE9BdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBzaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGNyZWQuaWRUb2tlbiA9IHJlc3QuaWRUb2tlbiB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHJlc3QuYWNjZXNzVG9rZW4gfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGNyZWQuc2VjcmV0ID0gcmVzdC5zZWNyZXQ7XHJcbiAgICAgICAgY3JlZC5ub25jZSA9IHJlc3Qubm9uY2U7XHJcbiAgICAgICAgY3JlZC5wZW5kaW5nVG9rZW4gPSByZXN0LnBlbmRpbmdUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgIHJldHVybiBjcmVkO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgYnVpbGRSZXF1ZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IElEUF9SRVFVRVNUX1VSSSQxLFxyXG4gICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QucGVuZGluZ1Rva2VuID0gdGhpcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0Qm9keSA9IHt9O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnaWRfdG9rZW4nXSA9IHRoaXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ2FjY2Vzc190b2tlbiddID0gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWNyZXQpIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydvYXV0aF90b2tlbl9zZWNyZXQnXSA9IHRoaXMuc2VjcmV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBvc3RCb2R5Wydwcm92aWRlcklkJ10gPSB0aGlzLnByb3ZpZGVySWQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vbmNlICYmICF0aGlzLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ25vbmNlJ10gPSB0aGlzLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcXVlc3QucG9zdEJvZHkgPSBxdWVyeXN0cmluZyhwb3N0Qm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzZW5kVmVyaWZpY2F0aW9uQ29kZVwiIC8qIFNFTkRfVkVSSUZJQ0FUSU9OX0NPREUgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGhvbmVOdW1iZXJcIiAvKiBTSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoUGhvbmVOdW1iZXIkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGhvbmVOdW1iZXJcIiAvKiBTSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG4gICAgaWYgKHJlc3BvbnNlLnRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIiAvKiBORUVEX0NPTkZJUk1BVElPTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3BvbnNlO1xyXG59XHJcbmNvbnN0IFZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8gPSB7XHJcbiAgICBbXCJVU0VSX05PVF9GT1VORFwiIC8qIFVTRVJfTk9UX0ZPVU5EICovXTogXCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL1xyXG59O1xyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlQaG9uZU51bWJlckZvckV4aXN0aW5nKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIGNvbnN0IGFwaVJlcXVlc3QgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHJlcXVlc3QpLCB7IG9wZXJhdGlvbjogJ1JFQVVUSCcgfSk7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCBhcGlSZXF1ZXN0KSwgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBQaG9uZUF1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogUEhPTkUgKi8sIFwicGhvbmVcIiAvKiBQSE9ORSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21WZXJpZmljYXRpb24odmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoeyB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQaG9uZU51bWJlciQxKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgT2JqZWN0LmFzc2lnbih7IGlkVG9rZW4gfSwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoYXV0aCwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgeyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIsIHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICBpZiAodGVtcG9yYXJ5UHJvb2YgJiYgcGhvbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGVtcG9yYXJ5UHJvb2YsIHBob25lTnVtYmVyIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlc3Npb25JbmZvOiB2ZXJpZmljYXRpb25JZCxcclxuICAgICAgICAgICAgY29kZTogdmVyaWZpY2F0aW9uQ29kZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICBjb25zdCBvYmogPSB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG9iai5waG9uZU51bWJlciA9IHRoaXMucGFyYW1zLnBob25lTnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICAgICAgb2JqLnRlbXBvcmFyeVByb29mID0gdGhpcy5wYXJhbXMudGVtcG9yYXJ5UHJvb2Y7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgICAgIG9iai52ZXJpZmljYXRpb25Db2RlID0gdGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uQ29kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIG9iai52ZXJpZmljYXRpb25JZCA9IHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgLyoqIEdlbmVyYXRlcyBhIHBob25lIGNyZWRlbnRpYWwgYmFzZWQgb24gYSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZy4gKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBqc29uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSwgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSBqc29uO1xyXG4gICAgICAgIGlmICghdmVyaWZpY2F0aW9uQ29kZSAmJlxyXG4gICAgICAgICAgICAhdmVyaWZpY2F0aW9uSWQgJiZcclxuICAgICAgICAgICAgIXBob25lTnVtYmVyICYmXHJcbiAgICAgICAgICAgICF0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGUsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICB0ZW1wb3JhcnlQcm9vZlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXBzIHRoZSBtb2RlIHN0cmluZyBpbiBhY3Rpb24gY29kZSBVUkwgdG8gQWN0aW9uIENvZGUgSW5mbyBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBtb2RlXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZU1vZGUobW9kZSkge1xyXG4gICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgY2FzZSAncmVjb3ZlckVtYWlsJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUkVDT1ZFUl9FTUFJTFwiIC8qIFJFQ09WRVJfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAncmVzZXRQYXNzd29yZCc6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlBBU1NXT1JEX1JFU0VUXCIgLyogUEFTU1dPUkRfUkVTRVQgKi87XHJcbiAgICAgICAgY2FzZSAnc2lnbkluJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovO1xyXG4gICAgICAgIGNhc2UgJ3ZlcmlmeUVtYWlsJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiVkVSSUZZX0VNQUlMXCIgLyogVkVSSUZZX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3ZlcmlmeUFuZENoYW5nZUVtYWlsJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICdyZXZlcnRTZWNvbmRGYWN0b3JBZGRpdGlvbic6XHJcbiAgICAgICAgICAgIHJldHVybiBcIlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OXCIgLyogUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04gKi87XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBwYXJzZSBGREwgbGlua3NcclxuICpcclxuICogQHBhcmFtIHVybFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VEZWVwTGluayh1cmwpIHtcclxuICAgIGNvbnN0IGxpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbJ2xpbmsnXTtcclxuICAgIC8vIERvdWJsZSBsaW5rIGNhc2UgKGF1dG9tYXRpYyByZWRpcmVjdCkuXHJcbiAgICBjb25zdCBkb3VibGVEZWVwTGluayA9IGxpbmtcclxuICAgICAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhsaW5rKSlbJ2RlZXBfbGlua19pZCddXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgLy8gaU9TIGN1c3RvbSBzY2hlbWUgbGlua3MuXHJcbiAgICBjb25zdCBpT1NEZWVwTGluayA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpKVsnZGVlcF9saW5rX2lkJ107XHJcbiAgICBjb25zdCBpT1NEb3VibGVEZWVwTGluayA9IGlPU0RlZXBMaW5rXHJcbiAgICAgICAgPyBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoaU9TRGVlcExpbmspKVsnbGluayddXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgcmV0dXJuIGlPU0RvdWJsZURlZXBMaW5rIHx8IGlPU0RlZXBMaW5rIHx8IGRvdWJsZURlZXBMaW5rIHx8IGxpbmsgfHwgdXJsO1xyXG59XHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgY2xhc3MgdG8gcGFyc2UgZW1haWwgYWN0aW9uIFVSTHMgc3VjaCBhcyBwYXNzd29yZCByZXNldCwgZW1haWwgdmVyaWZpY2F0aW9uLFxyXG4gKiBlbWFpbCBsaW5rIHNpZ24gaW4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQWN0aW9uQ29kZVVSTCB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhY3Rpb25MaW5rIC0gVGhlIGxpbmsgZnJvbSB3aGljaCB0byBleHRyYWN0IHRoZSBVUkwuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25MaW5rKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGFjdGlvbkxpbmspKTtcclxuICAgICAgICBjb25zdCBhcGlLZXkgPSAoX2EgPSBzZWFyY2hQYXJhbXNbXCJhcGlLZXlcIiAvKiBBUElfS0VZICovXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbDtcclxuICAgICAgICBjb25zdCBjb2RlID0gKF9iID0gc2VhcmNoUGFyYW1zW1wib29iQ29kZVwiIC8qIENPREUgKi9dKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IHBhcnNlTW9kZSgoX2MgPSBzZWFyY2hQYXJhbXNbXCJtb2RlXCIgLyogTU9ERSAqL10pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IG51bGwpO1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIEFQSSBrZXksIGNvZGUgYW5kIG1vZGUuXHJcbiAgICAgICAgX2Fzc2VydChhcGlLZXkgJiYgY29kZSAmJiBvcGVyYXRpb24sIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb24gPSBvcGVyYXRpb247XHJcbiAgICAgICAgdGhpcy5jb2RlID0gY29kZTtcclxuICAgICAgICB0aGlzLmNvbnRpbnVlVXJsID0gKF9kID0gc2VhcmNoUGFyYW1zW1wiY29udGludWVVcmxcIiAvKiBDT05USU5VRV9VUkwgKi9dKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiBudWxsO1xyXG4gICAgICAgIHRoaXMubGFuZ3VhZ2VDb2RlID0gKF9lID0gc2VhcmNoUGFyYW1zW1wibGFuZ3VhZ2VDb2RlXCIgLyogTEFOR1VBR0VfQ09ERSAqL10pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IChfZiA9IHNlYXJjaFBhcmFtc1tcInRlbmFudElkXCIgLyogVEVOQU5UX0lEICovXSkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUGFyc2VzIHRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcgYW5kIHJldHVybnMgYW4ge0BsaW5rIEFjdGlvbkNvZGVVUkx9IGlmIHRoZSBsaW5rIGlzIHZhbGlkLFxyXG4gICAgICogb3RoZXJ3aXNlIHJldHVybnMgbnVsbC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbGluayAgLSBUaGUgZW1haWwgYWN0aW9uIGxpbmsgc3RyaW5nLlxyXG4gICAgICogQHJldHVybnMgVGhlIHtAbGluayBBY3Rpb25Db2RlVVJMfSBvYmplY3QsIG9yIG51bGwgaWYgdGhlIGxpbmsgaXMgaW52YWxpZC5cclxuICAgICAqXHJcbiAgICAgKiBAcHVibGljXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwYXJzZUxpbmsobGluaykge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbkxpbmsgPSBwYXJzZURlZXBMaW5rKGxpbmspO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQWN0aW9uQ29kZVVSTChhY3Rpb25MaW5rKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKipcclxuICogUGFyc2VzIHRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcgYW5kIHJldHVybnMgYW4ge0BsaW5rIEFjdGlvbkNvZGVVUkx9IGlmXHJcbiAqIHRoZSBsaW5rIGlzIHZhbGlkLCBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZUFjdGlvbkNvZGVVUkwobGluaykge1xyXG4gICAgcmV0dXJuIEFjdGlvbkNvZGVVUkwucGFyc2VMaW5rKGxpbmspO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyB7QGxpbmsgRW1haWxBdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEVtYWlsQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JELCBldmVuIGZvciBlbWFpbCBsaW5rLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IEVtYWlsQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gcGFzc3dvcmQgLSBVc2VyIGFjY291bnQgcGFzc3dvcmQuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgICAgICByZXR1cm4gRW1haWxBdXRoQ3JlZGVudGlhbC5fZnJvbUVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5pdGlhbGl6ZSBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHVzaW5nIGFuIGVtYWlsIGFuZCBhbiBlbWFpbCBsaW5rIGFmdGVyIGEgc2lnbiBpbiB3aXRoXHJcbiAgICAgKiBlbWFpbCBsaW5rIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsV2l0aExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluayk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgZW1haWwpO1xyXG4gICAgICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHVzZXIuXHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluayk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgdXNlZCB0byB2ZXJpZnkgdGhlIGxpbmsuXHJcbiAgICAgKiBAcGFyYW0gZW1haWwgLSBFbWFpbCBhZGRyZXNzLlxyXG4gICAgICogQHBhcmFtIGVtYWlsTGluayAtIFNpZ24taW4gZW1haWwgbGluay5cclxuICAgICAqIEByZXR1cm5zIC0gVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxXaXRoTGluayhlbWFpbCwgZW1haWxMaW5rKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uQ29kZVVybCA9IEFjdGlvbkNvZGVVUkwucGFyc2VMaW5rKGVtYWlsTGluayk7XHJcbiAgICAgICAgX2Fzc2VydChhY3Rpb25Db2RlVXJsLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRDb2RlKGVtYWlsLCBhY3Rpb25Db2RlVXJsLmNvZGUsIGFjdGlvbkNvZGVVcmwudGVuYW50SWQpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRCwgZXZlbiBmb3IgZW1haWwgbGluay5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJwYXNzd29yZFwiIC8qIFBBU1NXT1JEICovO1xyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRC5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EID0gXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovO1xyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuRU1BSUxfTElOS19TSUdOX0lOX01FVEhPRCA9IFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBiYXNlIGNsYXNzIGZvciBhbGwgRmVkZXJhdGVkIHByb3ZpZGVycyAoT0F1dGggKGluY2x1ZGluZyBPSURDKSwgU0FNTCkuXHJcbiAqXHJcbiAqIFRoaXMgY2xhc3MgaXMgbm90IG1lYW50IHRvIGJlIGluc3RhbnRpYXRlZCBkaXJlY3RseS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRmVkZXJhdGVkQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29uc3RydWN0b3IgZm9yIGdlbmVyaWMgT0F1dGggcHJvdmlkZXJzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwcm92aWRlcklkIC0gUHJvdmlkZXIgZm9yIHdoaWNoIGNyZWRlbnRpYWxzIHNob3VsZCBiZSBnZW5lcmF0ZWQuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQpIHtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLmRlZmF1bHRMYW5ndWFnZUNvZGUgPSBudWxsO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLmN1c3RvbVBhcmFtZXRlcnMgPSB7fTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0IHRoZSBsYW5ndWFnZSBnb2RlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsYW5ndWFnZUNvZGUgLSBsYW5ndWFnZSBjb2RlXHJcbiAgICAgKi9cclxuICAgIHNldERlZmF1bHRMYW5ndWFnZShsYW5ndWFnZUNvZGUpIHtcclxuICAgICAgICB0aGlzLmRlZmF1bHRMYW5ndWFnZUNvZGUgPSBsYW5ndWFnZUNvZGU7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNldHMgdGhlIE9BdXRoIGN1c3RvbSBwYXJhbWV0ZXJzIHRvIHBhc3MgaW4gYW4gT0F1dGggcmVxdWVzdCBmb3IgcG9wdXAgYW5kIHJlZGlyZWN0IHNpZ24taW5cclxuICAgICAqIG9wZXJhdGlvbnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBhIGRldGFpbGVkIGxpc3QsIGNoZWNrIHRoZSByZXNlcnZlZCByZXF1aXJlZCBPQXV0aCAyLjAgcGFyYW1ldGVycyBzdWNoIGFzIGBjbGllbnRfaWRgLFxyXG4gICAgICogYHJlZGlyZWN0X3VyaWAsIGBzY29wZWAsIGByZXNwb25zZV90eXBlYCwgYW5kIGBzdGF0ZWAgYXJlIG5vdCBhbGxvd2VkIGFuZCB3aWxsIGJlIGlnbm9yZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGN1c3RvbU9BdXRoUGFyYW1ldGVycyAtIFRoZSBjdXN0b20gT0F1dGggcGFyYW1ldGVycyB0byBwYXNzIGluIHRoZSBPQXV0aCByZXF1ZXN0LlxyXG4gICAgICovXHJcbiAgICBzZXRDdXN0b21QYXJhbWV0ZXJzKGN1c3RvbU9BdXRoUGFyYW1ldGVycykge1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IGN1c3RvbU9BdXRoUGFyYW1ldGVycztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmUgdGhlIGN1cnJlbnQgbGlzdCBvZiB7QGxpbmsgQ3VzdG9tUGFyYW1ldGVyc30uXHJcbiAgICAgKi9cclxuICAgIGdldEN1c3RvbVBhcmFtZXRlcnMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tUGFyYW1ldGVycztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ29tbW9uIGNvZGUgdG8gYWxsIE9BdXRoIHByb3ZpZGVycy4gVGhpcyBpcyBzZXBhcmF0ZSBmcm9tIHRoZVxyXG4gKiB7QGxpbmsgT0F1dGhQcm92aWRlcn0gc28gdGhhdCBjaGlsZCBwcm92aWRlcnMgKGxpa2VcclxuICoge0BsaW5rIEdvb2dsZUF1dGhQcm92aWRlcn0pIGRvbid0IGluaGVyaXQgdGhlIGBjcmVkZW50aWFsYCBpbnN0YW5jZSBtZXRob2QuXHJcbiAqIEluc3RlYWQsIHRoZXkgcmVseSBvbiBhIHN0YXRpYyBgY3JlZGVudGlhbGAgbWV0aG9kLlxyXG4gKi9cclxuY2xhc3MgQmFzZU9BdXRoUHJvdmlkZXIgZXh0ZW5kcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICAvKiogQGludGVybmFsICovXHJcbiAgICAgICAgdGhpcy5zY29wZXMgPSBbXTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQWRkIGFuIE9BdXRoIHNjb3BlIHRvIHRoZSBjcmVkZW50aWFsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzY29wZSAtIFByb3ZpZGVyIE9BdXRoIHNjb3BlIHRvIGFkZC5cclxuICAgICAqL1xyXG4gICAgYWRkU2NvcGUoc2NvcGUpIHtcclxuICAgICAgICAvLyBJZiBub3QgYWxyZWFkeSBhZGRlZCwgYWRkIHNjb3BlIHRvIGxpc3QuXHJcbiAgICAgICAgaWYgKCF0aGlzLnNjb3Blcy5pbmNsdWRlcyhzY29wZSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zY29wZXMucHVzaChzY29wZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIE9BdXRoIHNjb3Blcy5cclxuICAgICAqL1xyXG4gICAgZ2V0U2NvcGVzKCkge1xyXG4gICAgICAgIHJldHVybiBbLi4udGhpcy5zY29wZXNdO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBnZW5lcmljIHtAbGluayBPQXV0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcignZ29vZ2xlLmNvbScpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgT0F1dGggQWNjZXNzIFRva2VuIGZvciB0aGUgcHJvdmlkZXIuXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcignZ29vZ2xlLmNvbScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIE9BdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIEpTT04gc3RyaW5nIG9yIGEgcGxhaW4gb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIF9hc3NlcnQoJ3Byb3ZpZGVySWQnIGluIG9iaiAmJiAnc2lnbkluTWV0aG9kJyBpbiBvYmosIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyhvYmopO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIGdlbmVyaWMgT0F1dGggcHJvdmlkZXIncyBhY2Nlc3MgdG9rZW4gb3IgSUQgdG9rZW4uXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFRoZSByYXcgbm9uY2UgaXMgcmVxdWlyZWQgd2hlbiBhbiBJRCB0b2tlbiB3aXRoIGEgbm9uY2UgZmllbGQgaXMgcHJvdmlkZWQuIFRoZSBTSEEtMjU2IGhhc2ggb2ZcclxuICAgICAqIHRoZSByYXcgbm9uY2UgbXVzdCBtYXRjaCB0aGUgbm9uY2UgZmllbGQgaW4gdGhlIElEIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiAvLyBgZ29vZ2xlVXNlcmAgZnJvbSB0aGUgb25zdWNjZXNzIEdvb2dsZSBTaWduIEluIGNhbGxiYWNrLlxyXG4gICAgICogLy8gSW5pdGlhbGl6ZSBhIGdlbmVyYXRlIE9BdXRoIHByb3ZpZGVyIHdpdGggYSBgZ29vZ2xlLmNvbWAgcHJvdmlkZXJJZC5cclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IE9BdXRoUHJvdmlkZXIoJ2dvb2dsZS5jb20nKTtcclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsKHtcclxuICAgICAqICAgaWRUb2tlbjogZ29vZ2xlVXNlci5nZXRBdXRoUmVzcG9uc2UoKS5pZF90b2tlbixcclxuICAgICAqIH0pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGFyYW1zIC0gRWl0aGVyIHRoZSBvcHRpb25zIG9iamVjdCBjb250YWluaW5nIHRoZSBJRCB0b2tlbiwgYWNjZXNzIHRva2VuIGFuZCByYXcgbm9uY2VcclxuICAgICAqIG9yIHRoZSBJRCB0b2tlbiBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGNyZWRlbnRpYWwocGFyYW1zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NyZWRlbnRpYWwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpLCB7IG5vbmNlOiBwYXJhbXMucmF3Tm9uY2UgfSkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEFuIGludGVybmFsIGNyZWRlbnRpYWwgbWV0aG9kIHRoYXQgYWNjZXB0cyBtb3JlIHBlcm1pc3NpdmUgb3B0aW9ucyAqL1xyXG4gICAgX2NyZWRlbnRpYWwocGFyYW1zKSB7XHJcbiAgICAgICAgX2Fzc2VydChwYXJhbXMuaWRUb2tlbiB8fCBwYXJhbXMuYWNjZXNzVG9rZW4sIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gRm9yIE9BdXRoQ3JlZGVudGlhbCwgc2lnbiBpbiBtZXRob2QgaXMgc2FtZSBhcyBwcm92aWRlcklkLlxyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpLCB7IHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kOiB0aGlzLnByb3ZpZGVySWQgfSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoUHJvdmlkZXIub2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoUHJvdmlkZXIub2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCwgcGVuZGluZ1Rva2VuLCBub25jZSwgcHJvdmlkZXJJZCB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoQWNjZXNzVG9rZW4gJiZcclxuICAgICAgICAgICAgIW9hdXRoVG9rZW5TZWNyZXQgJiZcclxuICAgICAgICAgICAgIW9hdXRoSWRUb2tlbiAmJlxyXG4gICAgICAgICAgICAhcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgT0F1dGhQcm92aWRlcihwcm92aWRlcklkKS5fY3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBvYXV0aElkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgICAgIG5vbmNlLFxyXG4gICAgICAgICAgICAgICAgcGVuZGluZ1Rva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uRkFDRUJPT0suXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGYWNlYm9va0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgRmFjZWJvb2suXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIGBldmVudGAgZnJvbSB0aGUgRmFjZWJvb2sgYXV0aC5hdXRoUmVzcG9uc2VDaGFuZ2UgY2FsbGJhY2suXHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChldmVudC5hdXRoUmVzcG9uc2UuYWNjZXNzVG9rZW4pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBGYWNlYm9vayBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEZhY2Vib29rQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IEZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UgfHwgISgnb2F1dGhBY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkZBQ0VCT09LLiAqL1xyXG5GYWNlYm9va0F1dGhQcm92aWRlci5GQUNFQk9PS19TSUdOX0lOX01FVEhPRCA9IFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy4gKi9cclxuRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4gYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5HT09HTEUuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHb29nbGVBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgnZW1haWwnKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBHb29nbGUgQWNjZXNzIFRva2VuLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEdvb2dsZUF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLyk7XHJcbiAgICAgICAgdGhpcy5hZGRTY29wZSgncHJvZmlsZScpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgR29vZ2xlLiBBdCBsZWFzdCBvbmUgb2YgSUQgdG9rZW4gYW5kIGFjY2VzcyB0b2tlbiBpcyByZXF1aXJlZC5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gXFxgZ29vZ2xlVXNlclxcYCBmcm9tIHRoZSBvbnN1Y2Nlc3MgR29vZ2xlIFNpZ24gSW4gY2FsbGJhY2suXHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZ29vZ2xlVXNlci5nZXRBdXRoUmVzcG9uc2UoKS5pZF90b2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZFRva2VuIC0gR29vZ2xlIElEIHRva2VuLlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gR29vZ2xlIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoaWRUb2tlbiwgYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogR29vZ2xlQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IEdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoSWRUb2tlbiAmJiAhb2F1dGhBY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGNvdWxkIGJlIGFuIG9hdXRoIDEgY3JlZGVudGlhbCBvciBhIHBob25lIGNyZWRlbnRpYWxcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkdPT0dMRS4gKi9cclxuR29vZ2xlQXV0aFByb3ZpZGVyLkdPT0dMRV9TSUdOX0lOX01FVEhPRCA9IFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS4gKi9cclxuR29vZ2xlQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5HSVRIVUIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEdpdEh1YiByZXF1aXJlcyBhbiBPQXV0aCAyLjAgcmVkaXJlY3QsIHNvIHlvdSBjYW4gZWl0aGVyIGhhbmRsZSB0aGUgcmVkaXJlY3QgZGlyZWN0bHksIG9yIHVzZVxyXG4gKiB0aGUge0BsaW5rIHNpZ25JbldpdGhQb3B1cH0gaGFuZGxlcjpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdyZXBvJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBHaXRodWIgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3JlcG8nKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBHaXRodWIgQWNjZXNzIFRva2VuLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEdpdGh1YkF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBHaXRodWIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gR2l0aHViIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IEdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlIHx8ICEoJ29hdXRoQWNjZXNzVG9rZW4nIGluIHRva2VuUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uR0lUSFVCLiAqL1xyXG5HaXRodWJBdXRoUHJvdmlkZXIuR0lUSFVCX1NJR05fSU5fTUVUSE9EID0gXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uR0lUSFVCLiAqL1xyXG5HaXRodWJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFNBTUxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgIHN1cGVyKHByb3ZpZGVySWQsIHByb3ZpZGVySWQpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Rva2VuID0gcGVuZGluZ1Rva2VuO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2QsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCwgcGVuZGluZ1Rva2VuIH0gPSBvYmo7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8XHJcbiAgICAgICAgICAgICFzaWduSW5NZXRob2QgfHxcclxuICAgICAgICAgICAgIXBlbmRpbmdUb2tlbiB8fFxyXG4gICAgICAgICAgICBwcm92aWRlcklkICE9PSBzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgU0FNTEF1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBzdGF0aWMgbWV0aG9kIHRvIGF2b2lkIGV4cG9zaW5nIHRoZSBjb25zdHJ1Y3RvciB0byBlbmQgdXNlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfY3JlYXRlKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgU0FNTEF1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICB9XHJcbiAgICBidWlsZFJlcXVlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogSURQX1JFUVVFU1RfVVJJLFxyXG4gICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgU0FNTF9QUk9WSURFUl9QUkVGSVggPSAnc2FtbC4nO1xyXG4vKipcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gZm9yIFNBTUwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFNBTUxBdXRoUHJvdmlkZXIgZXh0ZW5kcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3Rvci4gVGhlIHByb3ZpZGVySWQgbXVzdCBzdGFydCB3aXRoIFwic2FtbC5cIlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBTQU1MIHByb3ZpZGVyIElELlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkKSB7XHJcbiAgICAgICAgX2Fzc2VydChwcm92aWRlcklkLnN0YXJ0c1dpdGgoU0FNTF9QUk9WSURFUl9QUkVGSVgpLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHN1cGVyKHByb3ZpZGVySWQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBHZW5lcmF0ZXMgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfSBhZnRlciBhXHJcbiAgICAgKiBzdWNjZXNzZnVsIFNBTUwgZmxvdyBjb21wbGV0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwgdG8gZ2V0IGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0sIHlvdSBjb3VsZCB3cml0ZSB0aGVcclxuICAgICAqIGZvbGxvd2luZyBjb2RlOlxyXG4gICAgICpcclxuICAgICAqIGBgYGpzXHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBzYW1sUHJvdmlkZXIpO1xyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IFNBTUxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFNBTUxBdXRoUHJvdmlkZXIuc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSBKU09OIHN0cmluZyBvciBhIHBsYWluIG9iamVjdC5cclxuICAgICAqIEBwYXJhbSBqc29uIC0gQSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZ1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhDcmVkZW50aWFsLmZyb21KU09OKGpzb24pO1xyXG4gICAgICAgIF9hc3NlcnQoY3JlZGVudGlhbCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHBlbmRpbmdUb2tlbiwgcHJvdmlkZXJJZCB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIXBlbmRpbmdUb2tlbiB8fCAhcHJvdmlkZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIFNBTUxBdXRoQ3JlZGVudGlhbC5fY3JlYXRlKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5UV0lUVEVSLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgVHdpdHRlckF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBUd2l0dGVyIEFjY2VzcyBUb2tlbiBhbmQgU2VjcmV0LlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiAgIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgVHdpdHRlckF1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIFR3aXR0ZXIgQWNjZXNzIFRva2VuIGFuZCBTZWNyZXQuXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogY29uc3Qgc2VjcmV0ID0gY3JlZGVudGlhbC5zZWNyZXQ7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBUd2l0dGVyQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgVHdpdHRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUd2l0dGVyIGFjY2VzcyB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBzZWNyZXQgLSBUd2l0dGVyIHNlY3JldC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodG9rZW4sIHNlY3JldCkge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBUd2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IFR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgb2F1dGhUb2tlbjogdG9rZW4sXHJcbiAgICAgICAgICAgIG9hdXRoVG9rZW5TZWNyZXQ6IHNlY3JldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuIHx8ICFvYXV0aFRva2VuU2VjcmV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsKG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCA9IFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi4gKi9cclxuVHdpdHRlckF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduVXAoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduVXBcIiAvKiBTSUdOX1VQICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFVzZXJDcmVkZW50aWFsSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSBwYXJhbXMudXNlcjtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwYXJhbXMucHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLl90b2tlblJlc3BvbnNlID0gcGFyYW1zLl90b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9uVHlwZSA9IHBhcmFtcy5vcGVyYXRpb25UeXBlO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIF9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIG9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMgPSBmYWxzZSkge1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VySW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzKTtcclxuICAgICAgICBjb25zdCBwcm92aWRlcklkID0gcHJvdmlkZXJJZEZvclJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgY29uc3QgdXNlckNyZWQgPSBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgX3Rva2VuUmVzcG9uc2U6IGlkVG9rZW5SZXNwb25zZSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB1c2VyQ3JlZDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBfZm9yT3BlcmF0aW9uKHVzZXIsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgYXdhaXQgdXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIC8qIHJlbG9hZCAqLyB0cnVlKTtcclxuICAgICAgICBjb25zdCBwcm92aWRlcklkID0gcHJvdmlkZXJJZEZvclJlc3BvbnNlKHJlc3BvbnNlKTtcclxuICAgICAgICByZXR1cm4gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIF90b2tlblJlc3BvbnNlOiByZXNwb25zZSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHByb3ZpZGVySWRGb3JSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgaWYgKHJlc3BvbnNlLnByb3ZpZGVySWQpIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2UucHJvdmlkZXJJZDtcclxuICAgIH1cclxuICAgIGlmICgncGhvbmVOdW1iZXInIGluIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIFwicGhvbmVcIiAvKiBQSE9ORSAqLztcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiBhcyBhbiBhbm9ueW1vdXMgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgdGhlcmUgaXMgYWxyZWFkeSBhbiBhbm9ueW1vdXMgdXNlciBzaWduZWQgaW4sIHRoYXQgdXNlciB3aWxsIGJlIHJldHVybmVkOyBvdGhlcndpc2UsIGFcclxuICogbmV3IGFub255bW91cyB1c2VyIGlkZW50aXR5IHdpbGwgYmUgY3JlYXRlZCBhbmQgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluQW5vbnltb3VzbHkoYXV0aCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICBpZiAoKF9hID0gYXV0aEludGVybmFsLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaXNBbm9ueW1vdXMpIHtcclxuICAgICAgICAvLyBJZiBhbiBhbm9ueW1vdXMgdXNlciBpcyBhbHJlYWR5IHNpZ25lZCBpbiwgbm8gbmVlZCB0byBzaWduIHRoZW0gaW4gYWdhaW4uXHJcbiAgICAgICAgcmV0dXJuIG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyOiBhdXRoSW50ZXJuYWwuY3VycmVudFVzZXIsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIG9wZXJhdGlvblR5cGU6IFwic2lnbkluXCIgLyogU0lHTl9JTiAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduVXAoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlLCB0cnVlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JFcnJvciBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgc3VwZXIoZXJyb3IuY29kZSwgZXJyb3IubWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gb3BlcmF0aW9uVHlwZTtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvVHlwZVNjcmlwdC13aWtpL2Jsb2IvbWFzdGVyL0JyZWFraW5nLUNoYW5nZXMubWQjZXh0ZW5kaW5nLWJ1aWx0LWlucy1saWtlLWVycm9yLWFycmF5LWFuZC1tYXAtbWF5LW5vLWxvbmdlci13b3JrXHJcbiAgICAgICAgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIE11bHRpRmFjdG9yRXJyb3IucHJvdG90eXBlKTtcclxuICAgICAgICB0aGlzLmN1c3RvbURhdGEgPSB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IChfYSA9IGF1dGgudGVuYW50SWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgX3NlcnZlclJlc3BvbnNlOiBlcnJvci5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZSxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZSxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tRXJyb3JBbmRPcGVyYXRpb24oYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yRXJyb3IoYXV0aCwgZXJyb3IsIG9wZXJhdGlvblR5cGUsIHVzZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsLCB1c2VyKSB7XHJcbiAgICBjb25zdCBpZFRva2VuUHJvdmlkZXIgPSBvcGVyYXRpb25UeXBlID09PSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi9cclxuICAgICAgICA/IGNyZWRlbnRpYWwuX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKVxyXG4gICAgICAgIDogY3JlZGVudGlhbC5fZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpO1xyXG4gICAgcmV0dXJuIGlkVG9rZW5Qcm92aWRlci5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7XCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqL31gKSB7XHJcbiAgICAgICAgICAgIHRocm93IE11bHRpRmFjdG9yRXJyb3IuX2Zyb21FcnJvckFuZE9wZXJhdGlvbihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRha2VzIGEgc2V0IG9mIFVzZXJJbmZvIHByb3ZpZGVyIGRhdGEgYW5kIGNvbnZlcnRzIGl0IHRvIGEgc2V0IG9mIG5hbWVzXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm92aWRlckRhdGFBc05hbWVzKHByb3ZpZGVyRGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBTZXQocHJvdmlkZXJEYXRhXHJcbiAgICAgICAgLm1hcCgoeyBwcm92aWRlcklkIH0pID0+IHByb3ZpZGVySWQpXHJcbiAgICAgICAgLmZpbHRlcihwaWQgPT4gISFwaWQpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVW5saW5rcyBhIHByb3ZpZGVyIGZyb20gYSB1c2VyIGFjY291bnQuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlcklkIC0gVGhlIHByb3ZpZGVyIHRvIHVubGluay5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdW5saW5rKHVzZXIsIHByb3ZpZGVySWQpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXModHJ1ZSwgdXNlckludGVybmFsLCBwcm92aWRlcklkKTtcclxuICAgIGNvbnN0IHsgcHJvdmlkZXJVc2VySW5mbyB9ID0gYXdhaXQgZGVsZXRlTGlua2VkQWNjb3VudHModXNlckludGVybmFsLmF1dGgsIHtcclxuICAgICAgICBpZFRva2VuOiBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbigpLFxyXG4gICAgICAgIGRlbGV0ZVByb3ZpZGVyOiBbcHJvdmlkZXJJZF1cclxuICAgIH0pO1xyXG4gICAgY29uc3QgcHJvdmlkZXJzTGVmdCA9IHByb3ZpZGVyRGF0YUFzTmFtZXMocHJvdmlkZXJVc2VySW5mbyB8fCBbXSk7XHJcbiAgICB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhID0gdXNlckludGVybmFsLnByb3ZpZGVyRGF0YS5maWx0ZXIocGQgPT4gcHJvdmlkZXJzTGVmdC5oYXMocGQucHJvdmlkZXJJZCkpO1xyXG4gICAgaWYgKCFwcm92aWRlcnNMZWZ0LmhhcyhcInBob25lXCIgLyogUEhPTkUgKi8pKSB7XHJcbiAgICAgICAgdXNlckludGVybmFsLnBob25lTnVtYmVyID0gbnVsbDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHVzZXJJbnRlcm5hbDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayQxKHVzZXIsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGNyZWRlbnRpYWwuX2xpbmtUb0lkVG9rZW4odXNlci5hdXRoLCBhd2FpdCB1c2VyLmdldElkVG9rZW4oKSksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24odXNlciwgXCJsaW5rXCIgLyogTElOSyAqLywgcmVzcG9uc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9hc3NlcnRMaW5rZWRTdGF0dXMoZXhwZWN0ZWQsIHVzZXIsIHByb3ZpZGVyKSB7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgIGNvbnN0IHByb3ZpZGVySWRzID0gcHJvdmlkZXJEYXRhQXNOYW1lcyh1c2VyLnByb3ZpZGVyRGF0YSk7XHJcbiAgICBjb25zdCBjb2RlID0gZXhwZWN0ZWQgPT09IGZhbHNlXHJcbiAgICAgICAgPyBcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9cclxuICAgICAgICA6IFwibm8tc3VjaC1wcm92aWRlclwiIC8qIE5PX1NVQ0hfUFJPVklERVIgKi87XHJcbiAgICBfYXNzZXJ0KHByb3ZpZGVySWRzLmhhcyhwcm92aWRlcikgPT09IGV4cGVjdGVkLCB1c2VyLmF1dGgsIGNvZGUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IFwicmVhdXRoZW50aWNhdGVcIiAvKiBSRUFVVEhFTlRJQ0FURSAqLztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCwgdXNlciksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHBhcnNlZCA9IF9wYXJzZVRva2VuKHJlc3BvbnNlLmlkVG9rZW4pO1xyXG4gICAgICAgIF9hc3NlcnQocGFyc2VkLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHsgc3ViOiBsb2NhbElkIH0gPSBwYXJzZWQ7XHJcbiAgICAgICAgX2Fzc2VydCh1c2VyLnVpZCA9PT0gbG9jYWxJZCwgYXV0aCwgXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB1c2VyIGRlbGV0ZWQgZXJyb3IgaW50byB1c2VyIG1pc21hdGNoXHJcbiAgICAgICAgaWYgKChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUuY29kZSkgPT09IGBhdXRoLyR7XCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL31gKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwidXNlci1taXNtYXRjaFwiIC8qIFVTRVJfTUlTTUFUQ0ggKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9zaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3Qgb3BlcmF0aW9uVHlwZSA9IFwic2lnbkluXCIgLyogU0lHTl9JTiAqLztcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwpO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgaWYgKCFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBhd2FpdCBhdXRoLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCkge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChfY2FzdEF1dGgoYXV0aCksIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBjcmVkZW50aWFsLnByb3ZpZGVySWQpO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlckludGVybmFsLCBjcmVkZW50aWFsKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pblxyXG4gKiBhdHRlbXB0cy4gVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gcmVjb3ZlciBmcm9tIGEgYENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTmAgZXJyb3IuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoQ3VzdG9tVG9rZW5cIiAvKiBTSUdOX0lOX1dJVEhfQ1VTVE9NX1RPS0VOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhIGN1c3RvbSB0b2tlbi5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQ3VzdG9tIHRva2VucyBhcmUgdXNlZCB0byBpbnRlZ3JhdGUgRmlyZWJhc2UgQXV0aCB3aXRoIGV4aXN0aW5nIGF1dGggc3lzdGVtcywgYW5kIG11c3RcclxuICogYmUgZ2VuZXJhdGVkIGJ5IGFuIGF1dGggYmFja2VuZCB1c2luZyB0aGVcclxuICoge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL3JlZmVyZW5jZS9hZG1pbi9ub2RlL2FkbWluLmF1dGguQXV0aCNjcmVhdGVjdXN0b210b2tlbiB8IGNyZWF0ZUN1c3RvbVRva2VufVxyXG4gKiBtZXRob2QgaW4gdGhlIHtAbGluayBodHRwczovL2ZpcmViYXNlLmdvb2dsZS5jb20vZG9jcy9hdXRoL2FkbWluIHwgQWRtaW4gU0RLfSAuXHJcbiAqXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHRva2VuIGlzIGludmFsaWQsIGV4cGlyZWQsIG9yIG5vdCBhY2NlcHRlZCBieSB0aGUgRmlyZWJhc2UgQXV0aCBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjdXN0b21Ub2tlbiAtIFRoZSBjdXN0b20gdG9rZW4gdG8gc2lnbiBpbiB3aXRoLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3VzdG9tVG9rZW4oYXV0aCwgY3VzdG9tVG9rZW4pIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgdG9rZW46IGN1c3RvbVRva2VuLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGNyZWQgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIoY3JlZC51c2VyKTtcclxuICAgIHJldHVybiBjcmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9ySW5mb0ltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9ySWQsIHJlc3BvbnNlKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgICAgIHRoaXMudWlkID0gcmVzcG9uc2UubWZhRW5yb2xsbWVudElkO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsbWVudFRpbWUgPSBuZXcgRGF0ZShyZXNwb25zZS5lbnJvbGxlZEF0KS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICBpZiAoJ3Bob25lSW5mbycgaW4gZW5yb2xsbWVudCkge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JJbmZvSW1wbCBleHRlbmRzIE11bHRpRmFjdG9ySW5mb0ltcGwge1xyXG4gICAgY29uc3RydWN0b3IocmVzcG9uc2UpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogUEhPTkUgKi8sIHJlc3BvbnNlKTtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVJbmZvO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tU2VydmVyUmVzcG9uc2UoX2F1dGgsIGVucm9sbG1lbnQpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lTXVsdGlGYWN0b3JJbmZvSW1wbChlbnJvbGxtZW50KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgX2Fzc2VydCgoKF9hID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPiAwLCBhdXRoLCBcImludmFsaWQtY29udGludWUtdXJpXCIgLyogSU5WQUxJRF9DT05USU5VRV9VUkkgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluID09PSAndW5kZWZpbmVkJyB8fFxyXG4gICAgICAgIGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbi5sZW5ndGggPiAwLCBhdXRoLCBcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqLyk7XHJcbiAgICByZXF1ZXN0LmNvbnRpbnVlVXJsID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybDtcclxuICAgIHJlcXVlc3QuZHluYW1pY0xpbmtEb21haW4gPSBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW47XHJcbiAgICByZXF1ZXN0LmNhbkhhbmRsZUNvZGVJbkFwcCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5oYW5kbGVDb2RlSW5BcHA7XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmlPUykge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZC5sZW5ndGggPiAwLCBhdXRoLCBcIm1pc3NpbmctaW9zLWJ1bmRsZS1pZFwiIC8qIE1JU1NJTkdfSU9TX0JVTkRMRV9JRCAqLyk7XHJcbiAgICAgICAgcmVxdWVzdC5pT1NCdW5kbGVJZCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lLmxlbmd0aCA+IDAsIGF1dGgsIFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqLyk7XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkSW5zdGFsbEFwcCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLmluc3RhbGxBcHA7XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkTWluaW11bVZlcnNpb25Db2RlID1cclxuICAgICAgICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQubWluaW11bVZlcnNpb247XHJcbiAgICAgICAgcmVxdWVzdC5hbmRyb2lkUGFja2FnZU5hbWUgPSBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2VuZHMgYSBwYXNzd29yZCByZXNldCBlbWFpbCB0byB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8gY29tcGxldGUgdGhlIHBhc3N3b3JkIHJlc2V0LCBjYWxsIHtAbGluayBjb25maXJtUGFzc3dvcmRSZXNldH0gd2l0aCB0aGUgY29kZSBzdXBwbGllZCBpblxyXG4gKiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlciwgYWxvbmcgd2l0aCB0aGUgbmV3IHBhc3N3b3JkIHNwZWNpZmllZCBieSB0aGUgdXNlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gY29kZSBmcm9tIHVzZXIuXHJcbiAqIGF3YWl0IGNvbmZpcm1QYXNzd29yZFJlc2V0KCd1c2VyQGV4YW1wbGUuY29tJywgY29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBQQVNTV09SRF9SRVNFVCAqLyxcclxuICAgICAgICBlbWFpbFxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGhNb2R1bGFyLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxKGF1dGhNb2R1bGFyLCByZXF1ZXN0KTtcclxufVxyXG4vKipcclxuICogQ29tcGxldGVzIHRoZSBwYXNzd29yZCByZXNldCBwcm9jZXNzLCBnaXZlbiBhIGNvbmZpcm1hdGlvbiBjb2RlIGFuZCBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIGNvbmZpcm1hdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdQYXNzd29yZCAtIFRoZSBuZXcgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbmZpcm1QYXNzd29yZFJlc2V0KGF1dGgsIG9vYkNvZGUsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICBhd2FpdCByZXNldFBhc3N3b3JkKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwge1xyXG4gICAgICAgIG9vYkNvZGUsXHJcbiAgICAgICAgbmV3UGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgLy8gRG8gbm90IHJldHVybiB0aGUgZW1haWwuXHJcbn1cclxuLyoqXHJcbiAqIEFwcGxpZXMgYSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlBY3Rpb25Db2RlKGF1dGgsIG9vYkNvZGUpIHtcclxuICAgIGF3YWl0IGFwcGx5QWN0aW9uQ29kZSQxKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgeyBvb2JDb2RlIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgYSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHJldHVybnMgbWV0YWRhdGEgYWJvdXQgdGhlIGNvZGUuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG9vYkNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrQWN0aW9uQ29kZShhdXRoLCBvb2JDb2RlKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgcmVzZXRQYXNzd29yZChhdXRoTW9kdWxhciwgeyBvb2JDb2RlIH0pO1xyXG4gICAgLy8gRW1haWwgY291bGQgYmUgZW1wdHkgb25seSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzIEVNQUlMX1NJR05JTiBvclxyXG4gICAgLy8gVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwuXHJcbiAgICAvLyBOZXcgZW1haWwgc2hvdWxkIG5vdCBiZSBlbXB0eSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzXHJcbiAgICAvLyBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTC5cclxuICAgIC8vIE11bHRpLWZhY3RvciBpbmZvIGNvdWxkIG5vdCBiZSBlbXB0eSBpZiB0aGUgcmVxdWVzdCB0eXBlIGlzXHJcbiAgICAvLyBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTi5cclxuICAgIGNvbnN0IG9wZXJhdGlvbiA9IHJlc3BvbnNlLnJlcXVlc3RUeXBlO1xyXG4gICAgX2Fzc2VydChvcGVyYXRpb24sIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgc3dpdGNoIChvcGVyYXRpb24pIHtcclxuICAgICAgICBjYXNlIFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqLzpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5uZXdFbWFpbCwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm1mYUluZm8sIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIGZhbGwgdGhyb3VnaFxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UuZW1haWwsIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgfVxyXG4gICAgLy8gVGhlIG11bHRpLWZhY3RvciBpbmZvIGZvciByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvblxyXG4gICAgbGV0IG11bHRpRmFjdG9ySW5mbyA9IG51bGw7XHJcbiAgICBpZiAocmVzcG9uc2UubWZhSW5mbykge1xyXG4gICAgICAgIG11bHRpRmFjdG9ySW5mbyA9IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShfY2FzdEF1dGgoYXV0aE1vZHVsYXIpLCByZXNwb25zZS5tZmFJbmZvKTtcclxuICAgIH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICBlbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UubmV3RW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuZW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHByZXZpb3VzRW1haWw6IChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovXHJcbiAgICAgICAgICAgICAgICA/IHJlc3BvbnNlLmVtYWlsXHJcbiAgICAgICAgICAgICAgICA6IHJlc3BvbnNlLm5ld0VtYWlsKSB8fCBudWxsLFxyXG4gICAgICAgICAgICBtdWx0aUZhY3RvckluZm9cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wZXJhdGlvblxyXG4gICAgfTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGEgcGFzc3dvcmQgcmVzZXQgY29kZSBzZW50IHRvIHRoZSB1c2VyIGJ5IGVtYWlsIG9yIG90aGVyIG91dC1vZi1iYW5kIG1lY2hhbmlzbS5cclxuICpcclxuICogQHJldHVybnMgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzIGlmIHZhbGlkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZShhdXRoLCBjb2RlKSB7XHJcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IGNoZWNrQWN0aW9uQ29kZShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIGNvZGUpO1xyXG4gICAgLy8gRW1haWwgc2hvdWxkIGFsd2F5cyBiZSBwcmVzZW50IHNpbmNlIGEgY29kZSB3YXMgc2VudCB0byBpdFxyXG4gICAgcmV0dXJuIGRhdGEuZW1haWw7XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYSBuZXcgdXNlciBhY2NvdW50IGFzc29jaWF0ZWQgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBPbiBzdWNjZXNzZnVsIGNyZWF0aW9uIG9mIHRoZSB1c2VyIGFjY291bnQsIHRoaXMgdXNlciB3aWxsIGFsc28gYmUgc2lnbmVkIGluIHRvIHlvdXIgYXBwbGljYXRpb24uXHJcbiAqXHJcbiAqIFVzZXIgYWNjb3VudCBjcmVhdGlvbiBjYW4gZmFpbCBpZiB0aGUgYWNjb3VudCBhbHJlYWR5IGV4aXN0cyBvciB0aGUgcGFzc3dvcmQgaXMgaW52YWxpZC5cclxuICpcclxuICogTm90ZTogVGhlIGVtYWlsIGFkZHJlc3MgYWN0cyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciBhbmQgZW5hYmxlcyBhbiBlbWFpbC1iYXNlZFxyXG4gKiBwYXNzd29yZCByZXNldC4gVGhpcyBmdW5jdGlvbiB3aWxsIGNyZWF0ZSBhIG5ldyB1c2VyIGFjY291bnQgYW5kIHNldCB0aGUgaW5pdGlhbCB1c2VyIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXIncyBjaG9zZW4gcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc2lnblVwKGF1dGhJbnRlcm5hbCwge1xyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIHBhc3N3b3JkXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGhJbnRlcm5hbCwgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovLCByZXNwb25zZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIGVtYWlsIGFkZHJlc3MgYW5kIHBhc3N3b3JkIGRvIG5vdCBtYXRjaC5cclxuICpcclxuICogTm90ZTogVGhlIHVzZXIncyBwYXNzd29yZCBpcyBOT1QgdGhlIHBhc3N3b3JkIHVzZWQgdG8gYWNjZXNzIHRoZSB1c2VyJ3MgZW1haWwgYWNjb3VudC4gVGhlXHJcbiAqIGVtYWlsIGFkZHJlc3Mgc2VydmVzIGFzIGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyLCBhbmQgdGhlIHBhc3N3b3JkIGlzIHVzZWQgdG8gYWNjZXNzXHJcbiAqIHRoZSB1c2VyJ3MgYWNjb3VudCBpbiB5b3VyIEZpcmViYXNlIHByb2plY3QuIFNlZSBhbHNvOiB7QGxpbmsgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkfS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcnMgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIHBhc3N3b3JkIC0gVGhlIHVzZXJzIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpIHtcclxuICAgIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwoZW1haWwsIHBhc3N3b3JkKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNlbmRzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIHRvIHRoZSB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCBlbWFpbC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHNpZ24taW4gb3BlcmF0aW9uIGhhcyB0byBhbHdheXMgYmUgY29tcGxldGVkIGluIHRoZSBhcHAgdW5saWtlIG90aGVyIG91dCBvZiBiYW5kIGVtYWlsXHJcbiAqIGFjdGlvbnMgKHBhc3N3b3JkIHJlc2V0IGFuZCBlbWFpbCB2ZXJpZmljYXRpb25zKS4gVGhpcyBpcyBiZWNhdXNlLCBhdCB0aGUgZW5kIG9mIHRoZSBmbG93LFxyXG4gKiB0aGUgdXNlciBpcyBleHBlY3RlZCB0byBiZSBzaWduZWQgaW4gYW5kIHRoZWlyIEF1dGggc3RhdGUgcGVyc2lzdGVkIHdpdGhpbiB0aGUgYXBwLlxyXG4gKlxyXG4gKiBUbyBjb21wbGV0ZSBzaWduIGluIHdpdGggdGhlIGVtYWlsIGxpbmssIGNhbGwge0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9IHdpdGggdGhlIGVtYWlsXHJcbiAqIGFkZHJlc3MgYW5kIHRoZSBlbWFpbCBsaW5rIHN1cHBsaWVkIGluIHRoZSBlbWFpbCBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHRoZSB1c2VyLlxyXG4gKiBpZihpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSkge1xyXG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aEludGVybmFsIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLyxcclxuICAgICAgICBlbWFpbFxyXG4gICAgfTtcclxuICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmhhbmRsZUNvZGVJbkFwcCwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoTW9kdWxhciwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbCQxKGF1dGhNb2R1bGFyLCByZXF1ZXN0KTtcclxufVxyXG4vKipcclxuICogQ2hlY2tzIGlmIGFuIGluY29taW5nIGxpbmsgaXMgYSBzaWduLWluIHdpdGggZW1haWwgbGluayBzdWl0YWJsZSBmb3Ige0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbExpbmsgLSBUaGUgbGluayBzZW50IHRvIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYWN0aW9uQ29kZVVybCA9IEFjdGlvbkNvZGVVUkwucGFyc2VMaW5rKGVtYWlsTGluayk7XHJcbiAgICByZXR1cm4gKGFjdGlvbkNvZGVVcmwgPT09IG51bGwgfHwgYWN0aW9uQ29kZVVybCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWN0aW9uQ29kZVVybC5vcGVyYXRpb24pID09PSBcIkVNQUlMX1NJR05JTlwiIC8qIEVNQUlMX1NJR05JTiAqLztcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHNpZ24taW4gZW1haWwgbGluay5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgbm8gbGluayBpcyBwYXNzZWQsIHRoZSBsaW5rIGlzIGluZmVycmVkIGZyb20gdGhlIGN1cnJlbnQgVVJMLlxyXG4gKlxyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGlzIGludmFsaWQgb3IgT1RQIGluIGVtYWlsIGxpbmsgZXhwaXJlcy5cclxuICpcclxuICogTm90ZTogQ29uZmlybSB0aGUgbGluayBpcyBhIHNpZ24taW4gZW1haWwgbGluayBiZWZvcmUgY2FsbGluZyB0aGlzIG1ldGhvZCBmaXJlYmFzZS5hdXRoLkF1dGguaXNTaWduSW5XaXRoRW1haWxMaW5rLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGVtYWlsTGluayBmcm9tIHRoZSB1c2VyLlxyXG4gKiBpZihpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSkge1xyXG4gKiAgIGF3YWl0IHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBlbWFpbExpbmspO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgY3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhlbWFpbCwgZW1haWxMaW5rIHx8IF9nZXRDdXJyZW50VXJsKCkpO1xyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHRlbmFudCBJRCBpbiB0aGUgZW1haWwgbGluayBtYXRjaGVzIHRoZSB0ZW5hbnQgSUQgb24gQXV0aFxyXG4gICAgLy8gaW5zdGFuY2UuXHJcbiAgICBfYXNzZXJ0KGNyZWRlbnRpYWwuX3RlbmFudElkID09PSAoYXV0aE1vZHVsYXIudGVuYW50SWQgfHwgbnVsbCksIGF1dGhNb2R1bGFyLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqLyk7XHJcbiAgICByZXR1cm4gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aE1vZHVsYXIsIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUF1dGhVcmkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpjcmVhdGVBdXRoVXJpXCIgLyogQ1JFQVRFX0FVVEhfVVJJICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBsaXN0IG9mIHBvc3NpYmxlIHNpZ24gaW4gbWV0aG9kcyBmb3IgdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGRpZmZlcmVudGlhdGUgbWV0aG9kcyBvZiBzaWduLWluIGZvciB0aGUgc2FtZSBwcm92aWRlciwgZWcuXHJcbiAqIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2hpY2ggaGFzIDIgbWV0aG9kcyBvZiBzaWduLWluLFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKGF1dGgsIGVtYWlsKSB7XHJcbiAgICAvLyBjcmVhdGVBdXRoVXJpIHJldHVybnMgYW4gZXJyb3IgaWYgY29udGludWUgVVJJIGlzIG5vdCBodHRwIG9yIGh0dHBzLlxyXG4gICAgLy8gRm9yIGVudmlyb25tZW50cyBsaWtlIENvcmRvdmEsIENocm9tZSBleHRlbnNpb25zLCBuYXRpdmUgZnJhbWV3b3JrcywgZmlsZVxyXG4gICAgLy8gc3lzdGVtcywgZXRjLCB1c2UgaHR0cDovL2xvY2FsaG9zdCBhcyBjb250aW51ZSBVUkwuXHJcbiAgICBjb25zdCBjb250aW51ZVVyaSA9IF9pc0h0dHBPckh0dHBzKCkgPyBfZ2V0Q3VycmVudFVybCgpIDogJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZGVudGlmaWVyOiBlbWFpbCxcclxuICAgICAgICBjb250aW51ZVVyaVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHsgc2lnbmluTWV0aG9kcyB9ID0gYXdhaXQgY3JlYXRlQXV0aFVyaShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHJlcXVlc3QpO1xyXG4gICAgcmV0dXJuIHNpZ25pbk1ldGhvZHMgfHwgW107XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGlzIGNvbXBsZXRlZCBieSBjYWxsaW5nIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0VNQUlMXCIgLyogVkVSSUZZX0VNQUlMICovLFxyXG4gICAgICAgIGlkVG9rZW5cclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IHNlbmRFbWFpbFZlcmlmaWNhdGlvbiQxKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcclxuICAgIGlmIChlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgIGF3YWl0IHVzZXIucmVsb2FkKCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgbmV3IGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSB1c2VyJ3MgZW1haWwgd2lsbCBiZSB1cGRhdGVkIHRvIHRoZSBuZXcgb25lIGFmdGVyIGJlaW5nIHZlcmlmaWVkLlxyXG4gKlxyXG4gKiBJZiB5b3UgaGF2ZSBhIGN1c3RvbSBlbWFpbCBhY3Rpb24gaGFuZGxlciwgeW91IGNhbiBjb21wbGV0ZSB0aGUgdmVyaWZpY2F0aW9uIHByb2Nlc3MgYnkgY2FsbGluZ1xyXG4gKiB7QGxpbmsgYXBwbHlBY3Rpb25Db2RlfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsICduZXdlbWFpbEBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcyB0byBiZSB2ZXJpZmllZCBiZWZvcmUgdXBkYXRlLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCh1c2VyLCBuZXdFbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIHJlcXVlc3RUeXBlOiBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICBuZXdFbWFpbFxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgdmVyaWZ5QW5kQ2hhbmdlRW1haWwodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgLy8gSWYgdGhlIGxvY2FsIGNvcHkgb2YgdGhlIGVtYWlsIG9uIHVzZXIgaXMgb3V0ZGF0ZWQsIHJlbG9hZCB0aGVcclxuICAgICAgICAvLyB1c2VyLlxyXG4gICAgICAgIGF3YWl0IHVzZXIucmVsb2FkKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYSB1c2VyJ3MgcHJvZmlsZSBkYXRhLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvZmlsZSAtIFRoZSBwcm9maWxlJ3MgYGRpc3BsYXlOYW1lYCBhbmQgYHBob3RvVVJMYCB0byB1cGRhdGUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUodXNlciwgeyBkaXNwbGF5TmFtZSwgcGhvdG9VUkw6IHBob3RvVXJsIH0pIHtcclxuICAgIGlmIChkaXNwbGF5TmFtZSA9PT0gdW5kZWZpbmVkICYmIHBob3RvVXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHByb2ZpbGVSZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgcGhvdG9VcmwsXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXJJbnRlcm5hbCwgdXBkYXRlUHJvZmlsZSQxKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm9maWxlUmVxdWVzdCkpO1xyXG4gICAgdXNlckludGVybmFsLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWUgfHwgbnVsbDtcclxuICAgIHVzZXJJbnRlcm5hbC5waG90b1VSTCA9IHJlc3BvbnNlLnBob3RvVXJsIHx8IG51bGw7XHJcbiAgICAvLyBVcGRhdGUgdGhlIHBhc3N3b3JkIHByb3ZpZGVyIGFzIHdlbGxcclxuICAgIGNvbnN0IHBhc3N3b3JkUHJvdmlkZXIgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbmQoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkID09PSBcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8pO1xyXG4gICAgaWYgKHBhc3N3b3JkUHJvdmlkZXIpIHtcclxuICAgICAgICBwYXNzd29yZFByb3ZpZGVyLmRpc3BsYXlOYW1lID0gdXNlckludGVybmFsLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIucGhvdG9VUkwgPSB1c2VySW50ZXJuYWwucGhvdG9VUkw7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIGVtYWlsIHdpbGwgYmUgc2VudCB0byB0aGUgb3JpZ2luYWwgZW1haWwgYWRkcmVzcyAoaWYgaXQgd2FzIHNldCkgdGhhdCBhbGxvd3MgdG8gcmV2b2tlIHRoZVxyXG4gKiBlbWFpbCBhZGRyZXNzIGNoYW5nZSwgaW4gb3JkZXIgdG8gcHJvdGVjdCB0aGVtIGZyb20gYWNjb3VudCBoaWphY2tpbmcuXHJcbiAqXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5IHNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5IHNpZ25lZFxyXG4gKiBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBuZXdFbWFpbCAtIFRoZSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlRW1haWwodXNlciwgbmV3RW1haWwpIHtcclxuICAgIHJldHVybiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBuZXdFbWFpbCwgbnVsbCk7XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlUGFzc3dvcmQodXNlciwgbmV3UGFzc3dvcmQpIHtcclxuICAgIHJldHVybiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBudWxsLCBuZXdQYXNzd29yZCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxPclBhc3N3b3JkKHVzZXIsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc3QgeyBhdXRoIH0gPSB1c2VyO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICB9O1xyXG4gICAgaWYgKGVtYWlsKSB7XHJcbiAgICAgICAgcmVxdWVzdC5lbWFpbCA9IGVtYWlsO1xyXG4gICAgfVxyXG4gICAgaWYgKHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmVxdWVzdC5wYXNzd29yZCA9IHBhc3N3b3JkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCB1cGRhdGVFbWFpbFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpKTtcclxuICAgIGF3YWl0IHVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KHJlc3BvbnNlLCAvKiByZWxvYWQgKi8gdHJ1ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBhcnNlIHRoZSBgQWRkaXRpb25hbFVzZXJJbmZvYCBmcm9tIHRoZSBJRCB0b2tlbiByZXNwb25zZS5cclxuICpcclxuICovXHJcbmZ1bmN0aW9uIF9mcm9tSWRUb2tlblJlc3BvbnNlKGlkVG9rZW5SZXNwb25zZSkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGlmICghaWRUb2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IHByb3ZpZGVySWQgfSA9IGlkVG9rZW5SZXNwb25zZTtcclxuICAgIGNvbnN0IHByb2ZpbGUgPSBpZFRva2VuUmVzcG9uc2UucmF3VXNlckluZm9cclxuICAgICAgICA/IEpTT04ucGFyc2UoaWRUb2tlblJlc3BvbnNlLnJhd1VzZXJJbmZvKVxyXG4gICAgICAgIDoge307XHJcbiAgICBjb25zdCBpc05ld1VzZXIgPSBpZFRva2VuUmVzcG9uc2UuaXNOZXdVc2VyIHx8XHJcbiAgICAgICAgaWRUb2tlblJlc3BvbnNlLmtpbmQgPT09IFwiaWRlbnRpdHl0b29sa2l0I1NpZ251cE5ld1VzZXJSZXNwb25zZVwiIC8qIFNpZ251cE5ld1VzZXIgKi87XHJcbiAgICBpZiAoIXByb3ZpZGVySWQgJiYgKGlkVG9rZW5SZXNwb25zZSA9PT0gbnVsbCB8fCBpZFRva2VuUmVzcG9uc2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlkVG9rZW5SZXNwb25zZS5pZFRva2VuKSkge1xyXG4gICAgICAgIGNvbnN0IHNpZ25JblByb3ZpZGVyID0gKF9iID0gKF9hID0gX3BhcnNlVG9rZW4oaWRUb2tlblJlc3BvbnNlLmlkVG9rZW4pKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlyZWJhc2UpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYlsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgICAgIGlmIChzaWduSW5Qcm92aWRlcikge1xyXG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFByb3ZpZGVySWQgPSBzaWduSW5Qcm92aWRlciAhPT0gXCJhbm9ueW1vdXNcIiAvKiBBTk9OWU1PVVMgKi8gJiZcclxuICAgICAgICAgICAgICAgIHNpZ25JblByb3ZpZGVyICE9PSBcImN1c3RvbVwiIC8qIENVU1RPTSAqL1xyXG4gICAgICAgICAgICAgICAgPyBzaWduSW5Qcm92aWRlclxyXG4gICAgICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgICAgICAvLyBVc2VzIGdlbmVyaWMgY2xhc3MgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBsZWdhY3kgU0RLLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBmaWx0ZXJlZFByb3ZpZGVySWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgc3dpdGNoIChwcm92aWRlcklkKSB7XHJcbiAgICAgICAgY2FzZSBcImZhY2Vib29rLmNvbVwiIC8qIEZBQ0VCT09LICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBUd2l0dGVyQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSwgaWRUb2tlblJlc3BvbnNlLnNjcmVlbk5hbWUgfHwgbnVsbCk7XHJcbiAgICAgICAgY2FzZSBcImN1c3RvbVwiIC8qIENVU1RPTSAqLzpcclxuICAgICAgICBjYXNlIFwiYW5vbnltb3VzXCIgLyogQU5PTllNT1VTICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBudWxsKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSA9IHt9KSB7XHJcbiAgICAgICAgdGhpcy5pc05ld1VzZXIgPSBpc05ld1VzZXI7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnByb2ZpbGUgPSBwcm9maWxlO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlLCB1c2VybmFtZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgcHJvdmlkZXJJZCwgcHJvZmlsZSk7XHJcbiAgICAgICAgdGhpcy51c2VybmFtZSA9IHVzZXJuYW1lO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEZhY2Vib29rQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi8sIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdpdGh1YkFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLywgcHJvZmlsZSwgdHlwZW9mIChwcm9maWxlID09PSBudWxsIHx8IHByb2ZpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2ZpbGUubG9naW4pID09PSAnc3RyaW5nJyA/IHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbiA6IG51bGwpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi8sIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlLCBzY3JlZW5OYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLywgcHJvZmlsZSwgc2NyZWVuTmFtZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3RzIHByb3ZpZGVyIHNwZWNpZmljIHtAbGluayBBZGRpdGlvbmFsVXNlckluZm99IGZvciB0aGUgZ2l2ZW4gY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QWRkaXRpb25hbFVzZXJJbmZvKHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICBjb25zdCB7IHVzZXIsIF90b2tlblJlc3BvbnNlIH0gPSB1c2VyQ3JlZGVudGlhbDtcclxuICAgIGlmICh1c2VyLmlzQW5vbnltb3VzICYmICFfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIC8vIEhhbmRsZSB0aGUgc3BlY2lhbCBjYXNlIHdoZXJlIHNpZ25JbkFub255bW91c2x5KCkgZ2V0cyBjYWxsZWQgdHdpY2UuXHJcbiAgICAgICAgLy8gTm8gbmV0d29yayBjYWxsIGlzIG1hZGUgc28gdGhlcmUncyBub3RoaW5nIHRvIGFjdHVhbGx5IGZpbGwgdGhpcyBpblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IG51bGwsXHJcbiAgICAgICAgICAgIGlzTmV3VXNlcjogZmFsc2UsXHJcbiAgICAgICAgICAgIHByb2ZpbGU6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9mcm9tSWRUb2tlblJlc3BvbnNlKF90b2tlblJlc3BvbnNlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBOb24tb3B0aW9uYWwgYXV0aCBtZXRob2RzLlxyXG4vKipcclxuICogQ2hhbmdlcyB0aGUgdHlwZSBvZiBwZXJzaXN0ZW5jZSBvbiB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIGZvciB0aGUgY3VycmVudGx5IHNhdmVkXHJcbiAqIGBBdXRoYCBzZXNzaW9uIGFuZCBhcHBsaWVzIHRoaXMgdHlwZSBvZiBwZXJzaXN0ZW5jZSBmb3IgZnV0dXJlIHNpZ24taW4gcmVxdWVzdHMsIGluY2x1ZGluZ1xyXG4gKiBzaWduLWluIHdpdGggcmVkaXJlY3QgcmVxdWVzdHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWFrZXMgaXQgZWFzeSBmb3IgYSB1c2VyIHNpZ25pbmcgaW4gdG8gc3BlY2lmeSB3aGV0aGVyIHRoZWlyIHNlc3Npb24gc2hvdWxkIGJlXHJcbiAqIHJlbWVtYmVyZWQgb3Igbm90LiBJdCBhbHNvIG1ha2VzIGl0IGVhc2llciB0byBuZXZlciBwZXJzaXN0IHRoZSBgQXV0aGAgc3RhdGUgZm9yIGFwcGxpY2F0aW9uc1xyXG4gKiB0aGF0IGFyZSBzaGFyZWQgYnkgb3RoZXIgdXNlcnMgb3IgaGF2ZSBzZW5zaXRpdmUgZGF0YS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHBlcnNpc3RlbmNlIC0gVGhlIHtAbGluayBQZXJzaXN0ZW5jZX0gdG8gdXNlLlxyXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIG9uY2UgdGhlIHBlcnNpc3RlbmNlIGNoYW5nZSBoYXMgY29tcGxldGVkXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNldFBlcnNpc3RlbmNlKGF1dGgsIHBlcnNpc3RlbmNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKTtcclxufVxyXG4vKipcclxuICogQWRkcyBhbiBvYnNlcnZlciBmb3IgY2hhbmdlcyB0byB0aGUgc2lnbmVkLWluIHVzZXIncyBJRCB0b2tlbiwgd2hpY2ggaW5jbHVkZXMgc2lnbi1pbixcclxuICogc2lnbi1vdXQsIGFuZCB0b2tlbiByZWZyZXNoIGV2ZW50cy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gbmV4dE9yT2JzZXJ2ZXIgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gY2hhbmdlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gZXJyb3IuXHJcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBvYnNlcnZlciBpcyByZW1vdmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbklkVG9rZW5DaGFuZ2VkKGF1dGgsIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLm9uSWRUb2tlbkNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSB1c2VyJ3Mgc2lnbi1pbiBzdGF0ZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8ga2VlcCB0aGUgb2xkIGJlaGF2aW9yLCBzZWUge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBlcnJvci5cclxuICogQHBhcmFtIGNvbXBsZXRlZCAtIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBjdXJyZW50IGxhbmd1YWdlIHRvIHRoZSBkZWZhdWx0IGRldmljZS9icm93c2VyIHByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXNlRGV2aWNlTGFuZ3VhZ2UoYXV0aCkge1xyXG4gICAgZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVzZURldmljZUxhbmd1YWdlKCk7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNldHMgdGhlIHByb3ZpZGVkIHVzZXIgYXMge0BsaW5rIEF1dGguY3VycmVudFVzZXJ9IG9uIHRoZVxyXG4gKiB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEEgbmV3IGluc3RhbmNlIGNvcHkgb2YgdGhlIHVzZXIgcHJvdmlkZWQgd2lsbCBiZSBtYWRlIGFuZCBzZXQgYXMgY3VycmVudFVzZXIuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCB0cmlnZ2VyIHtAbGluayBvbkF1dGhTdGF0ZUNoYW5nZWR9IGFuZCB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0gbGlzdGVuZXJzXHJcbiAqIGxpa2Ugb3RoZXIgc2lnbiBpbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBUaGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHVzZXIgdG8gYmUgdXBkYXRlZCBiZWxvbmdzIHRvIGEgZGlmZmVyZW50IEZpcmViYXNlXHJcbiAqIHByb2plY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHVzZXIgLSBUaGUgbmV3IHtAbGluayBVc2VyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIoYXV0aCwgdXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51cGRhdGVDdXJyZW50VXNlcih1c2VyKTtcclxufVxyXG4vKipcclxuICogU2lnbnMgb3V0IHRoZSBjdXJyZW50IHVzZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbk91dChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNpZ25PdXQoKTtcclxufVxyXG4vKipcclxuICogRGVsZXRlcyBhbmQgc2lnbnMgb3V0IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eS1zZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseVxyXG4gKiBzaWduZWQgaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKHVzZXIpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZGVsZXRlKCk7XHJcbn1cblxuY2xhc3MgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSWR0b2tlbihpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclNlc3Npb25JbXBsKFwiZW5yb2xsXCIgLyogRU5ST0xMICovLCBpZFRva2VuKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKG1mYVBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclNlc3Npb25JbXBsKFwic2lnbmluXCIgLyogU0lHTl9JTiAqLywgbWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMudHlwZSA9PT0gXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi9cclxuICAgICAgICAgICAgPyAnaWRUb2tlbidcclxuICAgICAgICAgICAgOiAncGVuZGluZ0NyZWRlbnRpYWwnO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG11bHRpRmFjdG9yU2Vzc2lvbjoge1xyXG4gICAgICAgICAgICAgICAgW2tleV06IHRoaXMuY3JlZGVudGlhbFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tSlNPTihvYmopIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIGlmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSB7XHJcbiAgICAgICAgICAgIGlmICgoX2EgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwob2JqLm11bHRpRmFjdG9yU2Vzc2lvbi5wZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoKF9iID0gb2JqLm11bHRpRmFjdG9yU2Vzc2lvbikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tSWR0b2tlbihvYmoubXVsdGlGYWN0b3JTZXNzaW9uLmlkVG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHNlc3Npb24sIGhpbnRzLCBzaWduSW5SZXNvbHZlcikge1xyXG4gICAgICAgIHRoaXMuc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICAgICAgdGhpcy5oaW50cyA9IGhpbnRzO1xyXG4gICAgICAgIHRoaXMuc2lnbkluUmVzb2x2ZXIgPSBzaWduSW5SZXNvbHZlcjtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVycm9yKGF1dGhFeHRlcm4sIGVycm9yKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICBjb25zdCBzZXJ2ZXJSZXNwb25zZSA9IGVycm9yLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlO1xyXG4gICAgICAgIGNvbnN0IGhpbnRzID0gKHNlcnZlclJlc3BvbnNlLm1mYUluZm8gfHwgW10pLm1hcChlbnJvbGxtZW50ID0+IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KSk7XHJcbiAgICAgICAgX2Fzc2VydChzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbCwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbU1mYVBlbmRpbmdDcmVkZW50aWFsKHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsKHNlc3Npb24sIGhpbnRzLCBhc3luYyAoYXNzZXJ0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1mYVJlc3BvbnNlID0gYXdhaXQgYXNzZXJ0aW9uLl9wcm9jZXNzKGF1dGgsIHNlc3Npb24pO1xyXG4gICAgICAgICAgICAvLyBDbGVhciBvdXQgdGhlIHVubmVlZGVkIGZpZWxkcyBmcm9tIHRoZSBvbGQgbG9naW4gcmVzcG9uc2VcclxuICAgICAgICAgICAgZGVsZXRlIHNlcnZlclJlc3BvbnNlLm1mYUluZm87XHJcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgLy8gVXNlIGluIHRoZSBuZXcgdG9rZW4gJiByZWZyZXNoIHRva2VuIGluIHRoZSBvbGQgcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3QgaWRUb2tlblJlc3BvbnNlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBzZXJ2ZXJSZXNwb25zZSksIHsgaWRUb2tlbjogbWZhUmVzcG9uc2UuaWRUb2tlbiwgcmVmcmVzaFRva2VuOiBtZmFSZXNwb25zZS5yZWZyZXNoVG9rZW4gfSk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHdlIHNob3VsZCBjb2xsYXBzZSB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQgaW50byBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbiBhbmQgaGF2ZSBpdCBzdXBwb3J0IHRoZSBTSUdOX0lOIGNhc2VcclxuICAgICAgICAgICAgc3dpdGNoIChlcnJvci5vcGVyYXRpb25UeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovOlxyXG4gICAgICAgICAgICAgICAgICAgIF9hc3NlcnQoZXJyb3IudXNlciwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24oZXJyb3IudXNlciwgZXJyb3Iub3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVzb2x2ZVNpZ25Jbihhc3NlcnRpb25FeHRlcm4pIHtcclxuICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhc3NlcnRpb25FeHRlcm47XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluUmVzb2x2ZXIoYXNzZXJ0aW9uKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXMgYSB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGNvbXBsZXRpb24gb2YgYVxyXG4gKiBtdWx0aS1mYWN0b3IgZmxvdy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBUaGUge0BsaW5rIE11bHRpRmFjdG9yRXJyb3J9IHJhaXNlZCBkdXJpbmcgYSBzaWduLWluLCBvclxyXG4gKiByZWF1dGhlbnRpY2F0aW9uIG9wZXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlcnJvcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBlcnJvckludGVybmFsID0gZXJyb3I7XHJcbiAgICBfYXNzZXJ0KGVycm9yLmN1c3RvbURhdGEub3BlcmF0aW9uVHlwZSwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICBfYXNzZXJ0KChfYSA9IGVycm9ySW50ZXJuYWwuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2UpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZmFQZW5kaW5nQ3JlZGVudGlhbCwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTXVsdGlGYWN0b3JSZXNvbHZlckltcGwuX2Zyb21FcnJvcihhdXRoTW9kdWxhciwgZXJyb3JJbnRlcm5hbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfRU5ST0xMTUVOVCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDpmaW5hbGl6ZVwiIC8qIEZJTkFMSVpFX1BIT05FX01GQV9FTlJPTExNRU5UICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIHdpdGhkcmF3TWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDp3aXRoZHJhd1wiIC8qIFdJVEhEUkFXX01GQSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG5jbGFzcyBNdWx0aUZhY3RvclVzZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHVzZXIpIHtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gW107XHJcbiAgICAgICAgdXNlci5fb25SZWxvYWQodXNlckluZm8gPT4ge1xyXG4gICAgICAgICAgICBpZiAodXNlckluZm8ubWZhSW5mbykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB1c2VySW5mby5tZmFJbmZvLm1hcChlbnJvbGxtZW50ID0+IE11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZSh1c2VyLmF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tVXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclVzZXJJbXBsKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0U2Vzc2lvbigpIHtcclxuICAgICAgICByZXR1cm4gTXVsdGlGYWN0b3JTZXNzaW9uSW1wbC5fZnJvbUlkdG9rZW4oYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBlbnJvbGwoYXNzZXJ0aW9uRXh0ZXJuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICBjb25zdCBzZXNzaW9uID0gKGF3YWl0IHRoaXMuZ2V0U2Vzc2lvbigpKTtcclxuICAgICAgICBjb25zdCBmaW5hbGl6ZU1mYVJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodGhpcy51c2VyLCBhc3NlcnRpb24uX3Byb2Nlc3ModGhpcy51c2VyLmF1dGgsIHNlc3Npb24sIGRpc3BsYXlOYW1lKSk7XHJcbiAgICAgICAgLy8gTmV3IHRva2VucyB3aWxsIGJlIGlzc3VlZCBhZnRlciBlbnJvbGxtZW50IG9mIHRoZSBuZXcgc2Vjb25kIGZhY3RvcnMuXHJcbiAgICAgICAgLy8gVGhleSBuZWVkIHRvIGJlIHVwZGF0ZWQgb24gdGhlIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShmaW5hbGl6ZU1mYVJlc3BvbnNlKTtcclxuICAgICAgICAvLyBUaGUgdXNlciBuZWVkcyB0byBiZSByZWxvYWRlZCB0byBnZXQgdGhlIG5ldyBtdWx0aS1mYWN0b3IgaW5mb3JtYXRpb25cclxuICAgICAgICAvLyBmcm9tIHNlcnZlci4gVVNFUl9SRUxPQURFRCBldmVudCB3aWxsIGJlIHRyaWdnZXJlZCBhbmQgYGVucm9sbGVkRmFjdG9yc2BcclxuICAgICAgICAvLyB3aWxsIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVuZW5yb2xsKGluZm9PclVpZCkge1xyXG4gICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9IHR5cGVvZiBpbmZvT3JVaWQgPT09ICdzdHJpbmcnID8gaW5mb09yVWlkIDogaW5mb09yVWlkLnVpZDtcclxuICAgICAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIHdpdGhkcmF3TWZhKHRoaXMudXNlci5hdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZFxyXG4gICAgICAgIH0pKTtcclxuICAgICAgICAvLyBSZW1vdmUgdGhlIHNlY29uZCBmYWN0b3IgZnJvbSB0aGUgdXNlcidzIGxpc3QuXHJcbiAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSB0aGlzLmVucm9sbGVkRmFjdG9ycy5maWx0ZXIoKHsgdWlkIH0pID0+IHVpZCAhPT0gbWZhRW5yb2xsbWVudElkKTtcclxuICAgICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB0aGUgYmFja2VuZCBkZWNpZGVkIHRvIHJldm9rZSB0aGUgdXNlcidzIHNlc3Npb24sXHJcbiAgICAgICAgLy8gdGhlIHRva2VuUmVzcG9uc2UgbWF5IGJlIGVtcHR5LiBJZiB0aGUgdG9rZW5zIHdlcmUgbm90IHVwZGF0ZWQgKGFuZCB0aGV5XHJcbiAgICAgICAgLy8gYXJlIG5vdyBpbnZhbGlkKSwgcmVsb2FkaW5nIHRoZSB1c2VyIHdpbGwgZGlzY292ZXIgdGhpcyBhbmQgaW52YWxpZGF0ZVxyXG4gICAgICAgIC8vIHRoZSB1c2VyJ3Mgc3RhdGUgYWNjb3JkaW5nbHkuXHJcbiAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudXNlci5yZWxvYWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUuY29kZSAhPT0gYGF1dGgvJHtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5jb25zdCBtdWx0aUZhY3RvclVzZXJDYWNoZSA9IG5ldyBXZWFrTWFwKCk7XHJcbi8qKlxyXG4gKiBUaGUge0BsaW5rIE11bHRpRmFjdG9yVXNlcn0gY29ycmVzcG9uZGluZyB0byB0aGUgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VkIHRvIGFjY2VzcyBhbGwgbXVsdGktZmFjdG9yIHByb3BlcnRpZXMgYW5kIG9wZXJhdGlvbnMgcmVsYXRlZCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbXVsdGlGYWN0b3IodXNlcikge1xyXG4gICAgY29uc3QgdXNlck1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBpZiAoIW11bHRpRmFjdG9yVXNlckNhY2hlLmhhcyh1c2VyTW9kdWxhcikpIHtcclxuICAgICAgICBtdWx0aUZhY3RvclVzZXJDYWNoZS5zZXQodXNlck1vZHVsYXIsIE11bHRpRmFjdG9yVXNlckltcGwuX2Zyb21Vc2VyKHVzZXJNb2R1bGFyKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbXVsdGlGYWN0b3JVc2VyQ2FjaGUuZ2V0KHVzZXJNb2R1bGFyKTtcclxufVxuXG5jb25zdCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkgPSAnX19zYWsnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGVyZSBhcmUgdHdvIGRpZmZlcmVudCBicm93c2VyIHBlcnNpc3RlbmNlIHR5cGVzOiBsb2NhbCBhbmQgc2Vzc2lvbi5cclxuLy8gQm90aCBoYXZlIHRoZSBzYW1lIGltcGxlbWVudGF0aW9uIGJ1dCB1c2UgYSBkaWZmZXJlbnQgdW5kZXJseWluZyBzdG9yYWdlXHJcbi8vIG9iamVjdC5cclxuY2xhc3MgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3Ioc3RvcmFnZVJldHJpZXZlciwgdHlwZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVJldHJpZXZlciA9IHN0b3JhZ2VSZXRyaWV2ZXI7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgIH1cclxuICAgIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3QganNvbiA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShqc29uID8gSlNPTi5wYXJzZShqc29uKSA6IG51bGwpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgIH1cclxuICAgIGdldCBzdG9yYWdlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VSZXRyaWV2ZXIoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gX2lzU2FmYXJpKHVhKSB8fCBfaXNJT1ModWEpO1xyXG59XHJcbi8vIFRoZSBwb2xsaW5nIHBlcmlvZCBpbiBjYXNlIGV2ZW50cyBhcmUgbm90IHN1cHBvcnRlZFxyXG5jb25zdCBfUE9MTElOR19JTlRFUlZBTF9NUyQxID0gMTAwMDtcclxuLy8gVGhlIElFIDEwIGxvY2FsU3RvcmFnZSBjcm9zcyB0YWIgc3luY2hyb25pemF0aW9uIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG5jb25zdCBJRTEwX0xPQ0FMX1NUT1JBR0VfU1lOQ19ERUxBWSA9IDEwO1xyXG5jbGFzcyBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5sb2NhbFN0b3JhZ2UsIFwiTE9DQUxcIiAvKiBMT0NBTCAqLyk7XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IChldmVudCwgcG9sbCkgPT4gdGhpcy5vblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIFNhZmFyaSBvciBpT1MgYnJvd3NlciBhbmQgZW1iZWRkZWQgaW4gYW4gaWZyYW1lLlxyXG4gICAgICAgIHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkID0gX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlKCkgJiYgX2lzSWZyYW1lKCk7XHJcbiAgICAgICAgLy8gV2hldGhlciB0byB1c2UgcG9sbGluZyBpbnN0ZWFkIG9mIGRlcGVuZGluZyBvbiB3aW5kb3cgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5mYWxsYmFja1RvUG9sbGluZyA9IF9pc01vYmlsZUJyb3dzZXIoKTtcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBmb3JBbGxDaGFuZ2VkS2V5cyhjYikge1xyXG4gICAgICAgIC8vIENoZWNrIGFsbCBrZXlzIHdpdGggbGlzdGVuZXJzIG9uIHRoZW0uXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB2YWx1ZSBmcm9tIGxvY2FsU3RvcmFnZS5cclxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICAvLyBJZiBsb2NhbCBtYXAgdmFsdWUgZG9lcyBub3QgbWF0Y2gsIHRyaWdnZXIgbGlzdGVuZXIgd2l0aCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBEaWZmZXJlbnRpYXRlIHRoaXMgc2ltdWxhdGVkIGV2ZW50IGZyb20gdGhlIHJlYWwgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY2Ioa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25TdG9yYWdlRXZlbnQoZXZlbnQsIHBvbGwgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIEtleSB3b3VsZCBiZSBudWxsIGluIHNvbWUgc2l0dWF0aW9ucywgbGlrZSB3aGVuIGxvY2FsU3RvcmFnZSBpcyBjbGVhcmVkXHJcbiAgICAgICAgaWYgKCFldmVudC5rZXkpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5ID0gZXZlbnQua2V5O1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBtZWNoYW5pc20gaG93IHRoaXMgZXZlbnQgd2FzIGRldGVjdGVkLlxyXG4gICAgICAgIC8vIFRoZSBmaXJzdCBldmVudCB3aWxsIGRpY3RhdGUgdGhlIG1lY2hhbmlzbSB0byBiZSB1c2VkLlxyXG4gICAgICAgIGlmIChwb2xsKSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBwb2xsaW5nLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgc3RvcmFnZSBldmVudCBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLmRldGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBFbnZpcm9ubWVudCBkZXRlY3RzIHN0b3JhZ2UgY2hhbmdlcyB2aWEgc3RvcmFnZSBldmVudCBsaXN0ZW5lci5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHBvbGxpbmcgbGlzdGVuZXIgdG8gcHJldmVudCBwb3NzaWJsZSBldmVudCBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTYWZhcmkgZW1iZWRkZWQgaWZyYW1lLiBTdG9yYWdlIGV2ZW50IHdpbGwgdHJpZ2dlciB3aXRoIHRoZSBkZWx0YVxyXG4gICAgICAgIC8vIGNoYW5nZXMgYnV0IG5vIGNoYW5nZXMgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBpZnJhbWUgbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgIGlmICh0aGlzLnNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCkge1xyXG4gICAgICAgICAgICAvLyBHZXQgY3VycmVudCBpZnJhbWUgcGFnZSB2YWx1ZS5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICAvLyBWYWx1ZSBub3Qgc3luY2hyb25pemVkLCBzeW5jaHJvbml6ZSBtYW51YWxseS5cclxuICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBzdG9yZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWUgY2hhbmdlZCBmcm9tIGN1cnJlbnQgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDdXJyZW50IHZhbHVlIGRlbGV0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gZXZlbnQubmV3VmFsdWUgJiYgIXBvbGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgZGV0ZWN0ZWQgYW5kIHByb2Nlc3NlZCwgZG8gbm90IHRyaWdnZXIgbGlzdGVuZXJzIGFnYWluLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRyaWdnZXJMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEtlZXAgbG9jYWwgbWFwIHVwIHRvIGRhdGUgaW4gY2FzZSBzdG9yYWdlIGV2ZW50IGlzIHRyaWdnZXJlZCBiZWZvcmVcclxuICAgICAgICAgICAgLy8gcG9sbC5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIXBvbGwgJiYgdGhpcy5sb2NhbENhY2hlW2tleV0gPT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWFsIHN0b3JhZ2UgZXZlbnQgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBkZXRlY3RlZCwgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgdG8gdHJpZ2dlciBpbiBzb21lIElFIGJyb3dzZXJzIGZvciBzb21lIHJlYXNvbi5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIHN0b3JlZFZhbHVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICBpZiAoX2lzSUUxMCgpICYmXHJcbiAgICAgICAgICAgIHN0b3JlZFZhbHVlICE9PSBldmVudC5uZXdWYWx1ZSAmJlxyXG4gICAgICAgICAgICBldmVudC5uZXdWYWx1ZSAhPT0gZXZlbnQub2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gSUUgMTAgaGFzIHRoaXMgd2VpcmQgYnVnIHdoZXJlIGEgc3RvcmFnZSBldmVudCB3b3VsZCB0cmlnZ2VyIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIGNvcnJlY3Qga2V5LCBvbGRWYWx1ZSBhbmQgbmV3VmFsdWUgYnV0IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgZG9lc1xyXG4gICAgICAgICAgICAvLyBub3QgeWllbGQgdGhlIHVwZGF0ZWQgdmFsdWUgdW50aWwgYSBmZXcgbWlsbGlzZWNvbmRzLiBUaGlzIGVuc3VyZXNcclxuICAgICAgICAgICAgLy8gdGhpcyByZWNvdmVycyBmcm9tIHRoYXQgc2l0dWF0aW9uLlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRyaWdnZXJMaXN0ZW5lcnMsIElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgQXJyYXkuZnJvbShsaXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcih2YWx1ZSA/IEpTT04ucGFyc2UodmFsdWUpIDogdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdG9yYWdlRXZlbnQobmV3IFN0b3JhZ2VFdmVudCgnc3RvcmFnZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcclxuICAgICAgICAgICAgICAgIH0pLCBcclxuICAgICAgICAgICAgICAgIC8qIHBvbGwgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIF9QT0xMSU5HX0lOVEVSVkFMX01TJDEpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXR0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGRldGFjaExpc3RlbmVyKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgYnJvd3NlciBjYW4gZGV0ZWN0IHN0b3JhZ2UgZXZlbnQgd2hlbiBpdCBoYWQgYWxyZWFkeSBiZWVuIHB1c2hlZCB0byB0aGUgYmFja2dyb3VuZC5cclxuICAgICAgICAgICAgLy8gVGhpcyBtYXkgaGFwcGVuIGluIHNvbWUgbW9iaWxlIGJyb3dzZXJzLiBBIGxvY2FsU3RvcmFnZSBjaGFuZ2UgaW4gdGhlIGZvcmVncm91bmQgd2luZG93XHJcbiAgICAgICAgICAgIC8vIHdpbGwgbm90IGJlIGRldGVjdGVkIGluIHRoZSBiYWNrZ3JvdW5kIHdpbmRvdyB2aWEgdGhlIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGRldGVjdGVkIGluIGlPUyA3LnggbW9iaWxlIGJyb3dzZXJzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhbGxiYWNrVG9Qb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgY2FjaGUgdG8gYXZvaWQgc3B1cmlvdXNseSB0cmlnZ2VyaW5nIG9uIGZpcnN0IHBvbGwuXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5hZGQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFVwZGF0ZSBsb2NhbCBjYWNoZSBvbiBiYXNlIG9wZXJhdGlvbnM6XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5fc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHN1cGVyLl9nZXQoa2V5KTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9yZW1vdmUoa2V5KTtcclxuICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgbG9jYWxTdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgPSBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5zZXNzaW9uU3RvcmFnZSwgXCJTRVNTSU9OXCIgLyogU0VTU0lPTiAqLyk7XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBzZXNzaW9uIHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93c1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG59XHJcbkJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UudHlwZSA9ICdTRVNTSU9OJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgYFNFU1NJT05gIHVzaW5nIGBzZXNzaW9uU3RvcmFnZWBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgPSBCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2hpbSBmb3IgUHJvbWlzZS5hbGxTZXR0bGVkLCBub3RlIHRoZSBzbGlnaHRseSBkaWZmZXJlbnQgZm9ybWF0IG9mIGBmdWxmaWxsZWRgIHZzIGBzdGF0dXNgLlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvbWlzZXMgLSBBcnJheSBvZiBwcm9taXNlcyB0byB3YWl0IG9uLlxyXG4gKi9cclxuZnVuY3Rpb24gX2FsbFNldHRsZWQocHJvbWlzZXMpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChwcm9taXNlcy5tYXAoYXN5bmMgKHByb21pc2UpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHByb21pc2U7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAocmVhc29uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmdWxmaWxsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgcmVhc29uXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgY2xhc3MgZm9yIHJlY2VpdmluZyBtZXNzYWdlcy5cclxuICpcclxuICovXHJcbmNsYXNzIFJlY2VpdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy5ldmVudFRhcmdldCA9IGV2ZW50VGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXAgPSB7fTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gdGhpcy5oYW5kbGVFdmVudC5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPYnRhaW4gYW4gaW5zdGFuY2Ugb2YgYSBSZWNlaXZlciBmb3IgYSBnaXZlbiBldmVudCB0YXJnZXQsIGlmIG5vbmUgZXhpc3RzIGl0IHdpbGwgYmUgY3JlYXRlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUYXJnZXQgLSBBbiBldmVudCB0YXJnZXQgKHN1Y2ggYXMgd2luZG93IG9yIHNlbGYpIHRocm91Z2ggd2hpY2ggdGhlIHVuZGVybHlpbmdcclxuICAgICAqIG1lc3NhZ2VzIHdpbGwgYmUgcmVjZWl2ZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfZ2V0SW5zdGFuY2UoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICAvLyBUaGUgcmVzdWx0cyBhcmUgc3RvcmVkIGluIGFuIGFycmF5IHNpbmNlIG9iamVjdHMgY2FuJ3QgYmUga2V5cyBmb3Igb3RoZXJcclxuICAgICAgICAvLyBvYmplY3RzLiBJbiBhZGRpdGlvbiwgc2V0dGluZyBhIHVuaXF1ZSBwcm9wZXJ0eSBvbiBhbiBldmVudCB0YXJnZXQgYXMgYVxyXG4gICAgICAgIC8vIGhhc2ggbWFwIGtleSBtYXkgbm90IGJlIGFsbG93ZWQgZHVlIHRvIENPUlMgcmVzdHJpY3Rpb25zLlxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSW5zdGFuY2UgPSB0aGlzLnJlY2VpdmVycy5maW5kKHJlY2VpdmVyID0+IHJlY2VpdmVyLmlzTGlzdGVuaW5ndG8oZXZlbnRUYXJnZXQpKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdJbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbmV3SW5zdGFuY2UgPSBuZXcgUmVjZWl2ZXIoZXZlbnRUYXJnZXQpO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXJzLnB1c2gobmV3SW5zdGFuY2UpO1xyXG4gICAgICAgIHJldHVybiBuZXdJbnN0YW5jZTtcclxuICAgIH1cclxuICAgIGlzTGlzdGVuaW5ndG8oZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmVudFRhcmdldCA9PT0gZXZlbnRUYXJnZXQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEZhbnMgb3V0IGEgTWVzc2FnZUV2ZW50IHRvIHRoZSBhcHByb3ByaWF0ZSBsaXN0ZW5lcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFNlbmRzIGFuIHtAbGluayBTdGF0dXMuQUNLfSB1cG9uIHJlY2VpcHQgYW5kIGEge0BsaW5rIFN0YXR1cy5ET05FfSBvbmNlIGFsbCBoYW5kbGVycyBoYXZlXHJcbiAgICAgKiBmaW5pc2hlZCBwcm9jZXNzaW5nLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudCAtIFRoZSBNZXNzYWdlRXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBhc3luYyBoYW5kbGVFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgIGNvbnN0IHsgZXZlbnRJZCwgZXZlbnRUeXBlLCBkYXRhIH0gPSBtZXNzYWdlRXZlbnQuZGF0YTtcclxuICAgICAgICBjb25zdCBoYW5kbGVycyA9IHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcclxuICAgICAgICBpZiAoIShoYW5kbGVycyA9PT0gbnVsbCB8fCBoYW5kbGVycyA9PT0gdm9pZCAwID8gdm9pZCAwIDogaGFuZGxlcnMuc2l6ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtZXNzYWdlRXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiYWNrXCIgLyogQUNLICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oaGFuZGxlcnMpLm1hcChhc3luYyAoaGFuZGxlcikgPT4gaGFuZGxlcihtZXNzYWdlRXZlbnQub3JpZ2luLCBkYXRhKSk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfYWxsU2V0dGxlZChwcm9taXNlcyk7XHJcbiAgICAgICAgbWVzc2FnZUV2ZW50LnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcImRvbmVcIiAvKiBET05FICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgIHJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBhbiBldmVudCBoYW5kbGVyIGZvciBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIFRoZSBldmVudCBoYW5kbGVyIHdoaWNoIHNob3VsZCByZWNlaXZlIHRoZSBldmVudHMuXHJcbiAgICAgKlxyXG4gICAgICovXHJcbiAgICBfc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0pIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdID0gbmV3IFNldCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uYWRkKGV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZnJvbSBhIHBhcnRpY3VsYXIgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIEV2ZW50IG5hbWUgdG8gdW5zdWJzY3JpYmUgZnJvbS5cclxuICAgICAqIEBwYXJhbSBldmVudEhhbmRsZXIgLSBPcHRpbm9hbCBldmVudCBoYW5kbGVyLCBpZiBub25lIHByb3ZpZGVkLCB1bnN1YnNjcmliZSBhbGwgaGFuZGxlcnMgb24gdGhpcyBldmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF91bnN1YnNjcmliZShldmVudFR5cGUsIGV2ZW50SGFuZGxlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gJiYgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5kZWxldGUoZXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFldmVudEhhbmRsZXIgfHwgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMuaGFuZGxlcnNNYXApLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuUmVjZWl2ZXIucmVjZWl2ZXJzID0gW107XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZW5lcmF0ZUV2ZW50SWQocHJlZml4ID0gJycsIGRpZ2l0cyA9IDEwKSB7XHJcbiAgICBsZXQgcmFuZG9tID0gJyc7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpZ2l0czsgaSsrKSB7XHJcbiAgICAgICAgcmFuZG9tICs9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcmVmaXggKyByYW5kb207XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBmb3Igc2VuZGluZyBtZXNzYWdlcyBhbmQgd2FpdGluZyBmb3IgYSBjb21wbGV0aW9uIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgU2VuZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xyXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgICAgIHRoaXMuaGFuZGxlcnMgPSBuZXcgU2V0KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVuc3Vic2NyaWJlIHRoZSBoYW5kbGVyIGFuZCByZW1vdmUgaXQgZnJvbSBvdXIgdHJhY2tpbmcgU2V0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBoYW5kbGVyIC0gVGhlIGhhbmRsZXIgdG8gdW5zdWJzY3JpYmUuXHJcbiAgICAgKi9cclxuICAgIHJlbW92ZU1lc3NhZ2VIYW5kbGVyKGhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoaGFuZGxlci5tZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICBoYW5kbGVyLm1lc3NhZ2VDaGFubmVsLnBvcnQxLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycy5kZWxldGUoaGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFNlbmQgYSBtZXNzYWdlIHRvIHRoZSBSZWNlaXZlciBsb2NhdGVkIGF0IHtAbGluayB0YXJnZXR9LlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBXZSdsbCBmaXJzdCB3YWl0IGEgYml0IGZvciBhbiBBQ0sgLCBpZiB3ZSBnZXQgb25lIHdlIHdpbGwgd2FpdCBzaWduaWZpY2FudGx5IGxvbmdlciB1bnRpbCB0aGVcclxuICAgICAqIHJlY2VpdmVyIGhhcyBoYWQgYSBjaGFuY2UgdG8gZnVsbHkgcHJvY2VzcyB0aGUgZXZlbnQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VHlwZSAtIFR5cGUgb2YgZXZlbnQgdG8gc2VuZC5cclxuICAgICAqIEBwYXJhbSBkYXRhIC0gVGhlIHBheWxvYWQgb2YgdGhlIGV2ZW50LlxyXG4gICAgICogQHBhcmFtIHRpbWVvdXQgLSBUaW1lb3V0IGZvciB3YWl0aW5nIG9uIGFuIEFDSyBmcm9tIHRoZSByZWNlaXZlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBbiBhcnJheSBvZiBzZXR0bGVkIHByb21pc2VzIGZyb20gYWxsIHRoZSBoYW5kbGVycyB0aGF0IHdlcmUgbGlzdGVuaW5nIG9uIHRoZSByZWNlaXZlci5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgX3NlbmQoZXZlbnRUeXBlLCBkYXRhLCB0aW1lb3V0ID0gNTAgLyogQUNLICovKSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUNoYW5uZWwgPSB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnID8gbmV3IE1lc3NhZ2VDaGFubmVsKCkgOiBudWxsO1xyXG4gICAgICAgIGlmICghbWVzc2FnZUNoYW5uZWwpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiY29ubmVjdGlvbl91bmF2YWlsYWJsZVwiIC8qIENPTk5FQ1RJT05fVU5BVkFJTEFCTEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBsZXQgY29tcGxldGlvblRpbWVyO1xyXG4gICAgICAgIGxldCBoYW5kbGVyO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKCcnLCAyMCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFja1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidW5zdXBwb3J0ZWRfZXZlbnRcIiAvKiBVTlNVUFBPUlRFRF9FVkVOVCAqLykpO1xyXG4gICAgICAgICAgICB9LCB0aW1lb3V0KTtcclxuICAgICAgICAgICAgaGFuZGxlciA9IHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLFxyXG4gICAgICAgICAgICAgICAgb25NZXNzYWdlKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VFdmVudC5kYXRhLmV2ZW50SWQgIT09IGV2ZW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1lc3NhZ2VFdmVudC5kYXRhLnN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYWNrXCIgLyogQUNLICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIHJlY2VpdmVyIHNob3VsZCBBQ0sgZmlyc3QuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGlvblRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcInRpbWVvdXRcIiAvKiBUSU1FT1VUICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwIC8qIENPTVBMRVRJT04gKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJkb25lXCIgLyogRE9ORSAqLzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9uY2UgdGhlIHJlY2VpdmVyJ3MgaGFuZGxlcnMgYXJlIGZpbmlzaGVkIHdlIHdpbGwgZ2V0IHRoZSByZXN1bHRzLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG1lc3NhZ2VFdmVudC5kYXRhLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFja1RpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb21wbGV0aW9uVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcImludmFsaWRfcmVzcG9uc2VcIiAvKiBJTlZBTElEX1JFU1BPTlNFICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYWRkKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlci5vbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICAgICAgZGF0YVxyXG4gICAgICAgICAgICB9LCBbbWVzc2FnZUNoYW5uZWwucG9ydDJdKTtcclxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTGF6eSBhY2Nlc3NvciBmb3Igd2luZG93LCBzaW5jZSB0aGUgY29tcGF0IGxheWVyIHdvbid0IHRyZWUgc2hha2UgdGhpcyBvdXQsXHJcbiAqIHdlIG5lZWQgdG8gbWFrZSBzdXJlIG5vdCB0byBtZXNzIHdpdGggd2luZG93IHVubGVzcyB3ZSBoYXZlIHRvXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxyXG5mdW5jdGlvbiBfc2V0V2luZG93TG9jYXRpb24odXJsKSB7XHJcbiAgICBfd2luZG93KCkubG9jYXRpb24uaHJlZiA9IHVybDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzV29ya2VyKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgX3dpbmRvdygpWydXb3JrZXJHbG9iYWxTY29wZSddICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBfd2luZG93KClbJ2ltcG9ydFNjcmlwdHMnXSA9PT0gJ2Z1bmN0aW9uJyk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKSB7XHJcbiAgICBpZiAoIShuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHk7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5hY3RpdmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfZ2V0U2VydmljZVdvcmtlckNvbnRyb2xsZXIoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKChfYSA9IG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udHJvbGxlcikgfHwgbnVsbDtcclxufVxyXG5mdW5jdGlvbiBfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSB7XHJcbiAgICByZXR1cm4gX2lzV29ya2VyKCkgPyBzZWxmIDogbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlRGInO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgREJfT0JKRUNUU1RPUkVfTkFNRSA9ICdmaXJlYmFzZUxvY2FsU3RvcmFnZSc7XHJcbmNvbnN0IERCX0RBVEFfS0VZUEFUSCA9ICdmYmFzZV9rZXknO1xyXG4vKipcclxuICogUHJvbWlzZSB3cmFwcGVyIGZvciBJREJSZXF1ZXN0XHJcbiAqXHJcbiAqIFVuZm9ydHVuYXRlbHkgd2UgY2FuJ3QgY2xlYW5seSBleHRlbmQgUHJvbWlzZTxUPiBzaW5jZSBwcm9taXNlcyBhcmUgbm90IGNhbGxhYmxlIGluIEVTNlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgREJQcm9taXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3QpIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgfVxyXG4gICAgdG9Qcm9taXNlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLnJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRPYmplY3RTdG9yZShkYiwgaXNSZWFkV3JpdGUpIHtcclxuICAgIHJldHVybiBkYlxyXG4gICAgICAgIC50cmFuc2FjdGlvbihbREJfT0JKRUNUU1RPUkVfTkFNRV0sIGlzUmVhZFdyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKVxyXG4gICAgICAgIC5vYmplY3RTdG9yZShEQl9PQkpFQ1RTVE9SRV9OQU1FKTtcclxufVxyXG5mdW5jdGlvbiBfZGVsZXRlRGF0YWJhc2UoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX05BTUUpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuZnVuY3Rpb24gX29wZW5EYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihEQl9OQU1FLCBEQl9WRVJTSU9OKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUsIHsga2V5UGF0aDogREJfREFUQV9LRVlQQVRIIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vIFN0cmFuZ2UgYnVnIHRoYXQgb2NjdXJzIGluIEZpcmVmb3ggd2hlbiBtdWx0aXBsZSB0YWJzIGFyZSBvcGVuZWQgYXQgdGhlXHJcbiAgICAgICAgICAgIC8vIHNhbWUgdGltZS4gVGhlIG9ubHkgd2F5IHRvIHJlY292ZXIgc2VlbXMgdG8gYmUgZGVsZXRpbmcgdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgICAgIC8vIGFuZCByZS1pbml0aWFsaXppbmcgaXQuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzYzNFxyXG4gICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoREJfT0JKRUNUU1RPUkVfTkFNRSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gY2xvc2UgdGhlIGRhdGFiYXNlIG9yIGVsc2UgeW91IGdldCBhIGBibG9ja2VkYCBldmVudFxyXG4gICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IF9kZWxldGVEYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhd2FpdCBfb3BlbkRhdGFiYXNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wdXRPYmplY3QoZGIsIGtleSwgdmFsdWUpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgdHJ1ZSkucHV0KHtcclxuICAgICAgICBbREJfREFUQV9LRVlQQVRIXToga2V5LFxyXG4gICAgICAgIHZhbHVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldE9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIGZhbHNlKS5nZXQoa2V5KTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgcmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBkYXRhLnZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVPYmplY3QoZGIsIGtleSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5kZWxldGUoa2V5KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TID0gODAwO1xyXG5jb25zdCBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQgPSAzO1xyXG5jbGFzcyBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFwiTE9DQUxcIiAvKiBMT0NBTCAqLztcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcyA9IDA7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZW5kZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gbnVsbDtcclxuICAgICAgICAvLyBGaXJlICYgZm9yZ2V0IHRoZSBzZXJ2aWNlIHdvcmtlciByZWdpc3RyYXRpb24gYXMgaXQgbWF5IG5ldmVyIHJlc29sdmVcclxuICAgICAgICB0aGlzLl93b3JrZXJJbml0aWFsaXphdGlvblByb21pc2UgPVxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nKCkudGhlbigoKSA9PiB7IH0sICgpID0+IHsgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlbkRiKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRiO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3dpdGhSZXRyaWVzKG9wKSB7XHJcbiAgICAgICAgbGV0IG51bUF0dGVtcHRzID0gMDtcclxuICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGIgPSBhd2FpdCB0aGlzLl9vcGVuRGIoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBvcChkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudW1BdHRlbXB0cysrID4gX1RSQU5TQUNUSU9OX1JFVFJZX0NPVU5UKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGIgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjb25zaWRlciBhZGRpbmcgZXhwb25lbnRpYWwgYmFja29mZlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmRleGVkREIgZXZlbnRzIGRvIG5vdCBwcm9wYWdhdGUgZnJvbSB0aGUgbWFpbiB3aW5kb3cgdG8gdGhlIHdvcmtlciBjb250ZXh0LiAgV2UgcmVseSBvbiBhXHJcbiAgICAgKiBwb3N0TWVzc2FnZSBpbnRlcmZhY2UgdG8gc2VuZCB0aGVzZSBldmVudHMgdG8gdGhlIHdvcmtlciBvdXJzZWx2ZXMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nKCkge1xyXG4gICAgICAgIHJldHVybiBfaXNXb3JrZXIoKSA/IHRoaXMuaW5pdGlhbGl6ZVJlY2VpdmVyKCkgOiB0aGlzLmluaXRpYWxpemVTZW5kZXIoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIHdvcmtlciB3ZSBzaG91bGQgbGlzdGVuIHRvIGV2ZW50cyBmcm9tIHRoZSBtYWluIHdpbmRvdy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVJlY2VpdmVyKCkge1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBSZWNlaXZlci5fZ2V0SW5zdGFuY2UoX2dldFdvcmtlckdsb2JhbFNjb3BlKCkpO1xyXG4gICAgICAgIC8vIFJlZnJlc2ggZnJvbSBwZXJzaXN0ZW5jZSBpZiB3ZSByZWNlaXZlIGEgS2V5Q2hhbmdlZCBtZXNzYWdlLlxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuX3N1YnNjcmliZShcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLywgYXN5bmMgKF9vcmlnaW4sIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5cyA9IGF3YWl0IHRoaXMuX3BvbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGtleVByb2Nlc3NlZDoga2V5cy5pbmNsdWRlcyhkYXRhLmtleSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMZXQgdGhlIHNlbmRlciBrbm93IHRoYXQgd2UgYXJlIGxpc3RlbmluZyBzbyB0aGV5IGdpdmUgdXMgbW9yZSB0aW1lb3V0LlxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuX3N1YnNjcmliZShcInBpbmdcIiAvKiBQSU5HICovLCBhc3luYyAoX29yaWdpbiwgX2RhdGEpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFtcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqL107XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFzIHRoZSBtYWluIHdpbmRvdywgd2Ugc2hvdWxkIGxldCB0aGUgd29ya2VyIGtub3cgd2hlbiBrZXlzIGNoYW5nZSAoc2V0IGFuZCByZW1vdmUpLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL1NlcnZpY2VXb3JrZXJDb250YWluZXIvcmVhZHkgfCBTZXJ2aWNlV29ya2VyQ29udGFpbmVyLnJlYWR5fVxyXG4gICAgICogbWF5IG5vdCByZXNvbHZlLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplU2VuZGVyKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoZXJlJ3MgYW4gYWN0aXZlIHNlcnZpY2Ugd29ya2VyLlxyXG4gICAgICAgIHRoaXMuYWN0aXZlU2VydmljZVdvcmtlciA9IGF3YWl0IF9nZXRBY3RpdmVTZXJ2aWNlV29ya2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNlbmRlciA9IG5ldyBTZW5kZXIodGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyKTtcclxuICAgICAgICAvLyBQaW5nIHRoZSBzZXJ2aWNlIHdvcmtlciB0byBjaGVjayB3aGF0IGV2ZW50cyB0aGV5IGNhbiBoYW5kbGUuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwicGluZ1wiIC8qIFBJTkcgKi8sIHt9LCA4MDAgLyogTE9OR19BQ0sgKi8pO1xyXG4gICAgICAgIGlmICghcmVzdWx0cykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9hID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZ1bGZpbGxlZCkgJiZcclxuICAgICAgICAgICAgKChfYiA9IHJlc3VsdHNbMF0pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi52YWx1ZS5pbmNsdWRlcyhcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLykpKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIExldCB0aGUgd29ya2VyIGtub3cgYWJvdXQgYSBjaGFuZ2VkIGtleSwgdGhlIGV4YWN0IGtleSBkb2Vzbid0IHRlY2huaWNhbGx5IG1hdHRlciBzaW5jZSB0aGVcclxuICAgICAqIHdvcmtlciB3aWxsIGp1c3QgdHJpZ2dlciBhIGZ1bGwgc3luYyBhbnl3YXkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBub3csIHdlIG9ubHkgc3VwcG9ydCBvbmUgc2VydmljZSB3b3JrZXIgcGVyIHBhZ2UuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGtleSAtIFN0b3JhZ2Uga2V5IHdoaWNoIGNoYW5nZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIG5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNlbmRlciB8fFxyXG4gICAgICAgICAgICAhdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyIHx8XHJcbiAgICAgICAgICAgIF9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlcigpICE9PSB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNlbmRlci5fc2VuZChcImtleUNoYW5nZWRcIiAvKiBLRVlfQ0hBTkdFRCAqLywgeyBrZXkgfSwgXHJcbiAgICAgICAgICAgIC8vIFVzZSBsb25nIHRpbWVvdXQgaWYgcmVjZWl2ZXIgaGFzIHByZXZpb3VzbHkgcmVzcG9uZGVkIHRvIGEgcGluZyBmcm9tIHVzLlxyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgPyA4MDAgLyogTE9OR19BQ0sgKi9cclxuICAgICAgICAgICAgICAgIDogNTAgLyogQUNLICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBiZXN0IGVmZm9ydCBhcHByb2FjaC4gSWdub3JlIGVycm9ycy5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaXNBdmFpbGFibGUoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKCFpbmRleGVkREIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IF9vcGVuRGF0YWJhc2UoKTtcclxuICAgICAgICAgICAgYXdhaXQgX3B1dE9iamVjdChkYiwgU1RPUkFHRV9BVkFJTEFCTEVfS0VZLCAnMScpO1xyXG4gICAgICAgICAgICBhd2FpdCBfZGVsZXRlT2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVkpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFBlbmRpbmdXcml0ZSh3cml0ZSkge1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcysrO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHdyaXRlKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXMtLTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fd2l0aFBlbmRpbmdXcml0ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gX3B1dE9iamVjdChkYiwga2V5LCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnlTZXJ2aWNlV29ya2VyKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IChhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IGdldE9iamVjdChkYiwga2V5KSkpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gb2JqO1xyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfZGVsZXRlT2JqZWN0KGRiLCBrZXkpKTtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5ub3RpZnlTZXJ2aWNlV29ya2VyKGtleSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcG9sbCgpIHtcclxuICAgICAgICAvLyBUT0RPOiBjaGVjayBpZiB3ZSBuZWVkIHRvIGZhbGxiYWNrIGlmIGdldEFsbCBpcyBub3Qgc3VwcG9ydGVkXHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGdldEFsbFJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgZmFsc2UpLmdldEFsbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IERCUHJvbWlzZShnZXRBbGxSZXF1ZXN0KS50b1Byb21pc2UoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlIGhhdmUgcGVuZGluZyB3cml0ZXMgaW4gcHJvZ3Jlc3MgYWJvcnQsIHdlJ2xsIGdldCBwaWNrZWQgdXAgb24gdGhlIG5leHQgcG9sbFxyXG4gICAgICAgIGlmICh0aGlzLnBlbmRpbmdXcml0ZXMgIT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXlzID0gW107XHJcbiAgICAgICAgY29uc3Qga2V5c0luUmVzdWx0ID0gbmV3IFNldCgpO1xyXG4gICAgICAgIGZvciAoY29uc3QgeyBmYmFzZV9rZXk6IGtleSwgdmFsdWUgfSBvZiByZXN1bHQpIHtcclxuICAgICAgICAgICAga2V5c0luUmVzdWx0LmFkZChrZXkpO1xyXG4gICAgICAgICAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5sb2NhbENhY2hlW2tleV0pICE9PSBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChjb25zdCBsb2NhbEtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxvY2FsQ2FjaGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxvY2FsQ2FjaGVbbG9jYWxLZXldICYmICFrZXlzSW5SZXN1bHQuaGFzKGxvY2FsS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gRGVsZXRlZFxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMobG9jYWxLZXksIG51bGwpO1xyXG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKGxvY2FsS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ga2V5cztcclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBuZXdWYWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0UG9sbGluZygpIHtcclxuICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB0aGlzLl9wb2xsKCksIF9QT0xMSU5HX0lOVEVSVkFMX01TKTtcclxuICAgIH1cclxuICAgIHN0b3BQb2xsaW5nKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnBvbGxUaW1lcikge1xyXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMucG9sbFRpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdGFydFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9nZXQoa2V5KTsgLy8gVGhpcyBjYW4gaGFwcGVuIGluIHRoZSBiYWNrZ3JvdW5kIGFzeW5jIGFuZCB3ZSBjYW4gcmV0dXJuIGltbWVkaWF0ZWx5LlxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5JbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLnR5cGUgPSAnTE9DQUwnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlIGBMT0NBTGAgdXNpbmcgYGluZGV4ZWREQmBcclxuICogZm9yIHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgPSBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOnN0YXJ0XCIgLyogU1RBUlRfUEhPTkVfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVTaWduSW5QaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYVNpZ25JbjpmaW5hbGl6ZVwiIC8qIEZJTkFMSVpFX1BIT05FX01GQV9TSUdOX0lOICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFJlY2FwdGNoYVBhcmFtcyhhdXRoKSB7XHJcbiAgICByZXR1cm4gKChhd2FpdCBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBHRVQgKi8sIFwiL3YxL3JlY2FwdGNoYVBhcmFtc1wiIC8qIEdFVF9SRUNBUFRDSEFfUEFSQU0gKi8pKS5yZWNhcHRjaGFTaXRlS2V5IHx8ICcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIHJldHVybiAoX2IgPSAoX2EgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRvY3VtZW50O1xyXG59XHJcbmZ1bmN0aW9uIF9sb2FkSlModXJsKSB7XHJcbiAgICAvLyBUT0RPOiBjb25zaWRlciBhZGRpbmcgdGltZW91dCBzdXBwb3J0ICYgY2FuY2VsbGF0aW9uXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgIGVsLm9ubG9hZCA9IHJlc29sdmU7XHJcbiAgICAgICAgZWwub25lcnJvciA9IGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IF9jcmVhdGVFcnJvcihcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICBlcnJvci5jdXN0b21EYXRhID0gZTtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGVsLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcclxuICAgICAgICBlbC5jaGFyc2V0ID0gJ1VURi04JztcclxuICAgICAgICBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKHByZWZpeCkge1xyXG4gICAgcmV0dXJuIGBfXyR7cHJlZml4fSR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCl9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfU09MVkVfVElNRV9NUyA9IDUwMDtcclxuY29uc3QgX0VYUElSQVRJT05fVElNRV9NUyA9IDYwMDAwO1xyXG5jb25zdCBfV0lER0VUX0lEX1NUQVJUID0gMTAwMDAwMDAwMDAwMDtcclxuY2xhc3MgTW9ja1JlQ2FwdGNoYSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoY29udGFpbmVyLCBwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNvdW50ZXI7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5zZXQoaWQsIG5ldyBNb2NrV2lkZ2V0KGNvbnRhaW5lciwgdGhpcy5hdXRoLm5hbWUsIHBhcmFtZXRlcnMgfHwge30pKTtcclxuICAgICAgICB0aGlzLmNvdW50ZXIrKztcclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9XHJcbiAgICByZXNldChvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVsZXRlKCkpO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMuZGVsZXRlKGlkKTtcclxuICAgIH1cclxuICAgIGdldFJlc3BvbnNlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuX3dpZGdldHMuZ2V0KGlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJlc3BvbnNlKCkpIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZShvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXhlY3V0ZSgpKTtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgTW9ja1dpZGdldCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJPcklkLCBhcHBOYW1lLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIHsgYXBwTmFtZSB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRoaXMucGFyYW1zLnNpemUgIT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGdldFJlc3BvbnNlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZVRva2VuO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICB0aGlzLmRlbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbGlja0hhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrSWZEZWxldGVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcoNTApO1xyXG4gICAgICAgICAgICBjb25zdCB7IGNhbGxiYWNrLCAnZXhwaXJlZC1jYWxsYmFjayc6IGV4cGlyZWRDYWxsYmFjayB9ID0gdGhpcy5wYXJhbXM7XHJcbiAgICAgICAgICAgIGlmIChjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLnJlc3BvbnNlVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgaWYgKGV4cGlyZWRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGlyZWRDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1Zpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgX0VYUElSQVRJT05fVElNRV9NUyk7XHJcbiAgICAgICAgfSwgX1NPTFZFX1RJTUVfTVMpO1xyXG4gICAgfVxyXG4gICAgY2hlY2tJZkRlbGV0ZWQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3JlQ0FQVENIQSBtb2NrIHdhcyBhbHJlYWR5IGRlbGV0ZWQhJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlUmFuZG9tQWxwaGFOdW1lcmljU3RyaW5nKGxlbikge1xyXG4gICAgY29uc3QgY2hhcnMgPSBbXTtcclxuICAgIGNvbnN0IGFsbG93ZWRDaGFycyA9ICcxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgY2hhcnMucHVzaChhbGxvd2VkQ2hhcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGFsbG93ZWRDaGFycy5sZW5ndGgpKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gUmVDYXB0Y2hhIHdpbGwgbG9hZCB1c2luZyB0aGUgc2FtZSBjYWxsYmFjaywgc28gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIG5lZWRzXHJcbi8vIHRvIGJlIGtlcHQgYXJvdW5kXHJcbmNvbnN0IF9KU0xPQURfQ0FMTEJBQ0sgPSBfZ2VuZXJhdGVDYWxsYmFja05hbWUoJ3JjYicpO1xyXG5jb25zdCBORVRXT1JLX1RJTUVPVVRfREVMQVkgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuY29uc3QgUkVDQVBUQ0hBX0JBU0UgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvYXBpLmpzPyc7XHJcbi8qKlxyXG4gKiBMb2FkZXIgZm9yIHRoZSBHUmVDYXB0Y2hhIGxpYnJhcnkuIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIG9mIHRoaXMuXHJcbiAqL1xyXG5jbGFzcyBSZUNhcHRjaGFMb2FkZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gJyc7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcclxuICAgICAgICB0aGlzLmxpYnJhcnlTZXBhcmF0ZWx5TG9hZGVkID0gISFfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgIH1cclxuICAgIGxvYWQoYXV0aCwgaGwgPSAnJykge1xyXG4gICAgICAgIF9hc3NlcnQoaXNIb3N0TGFuZ3VhZ2VWYWxpZChobCksIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5KGhsKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKF93aW5kb3coKS5ncmVjYXB0Y2hhKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgfSwgTkVUV09SS19USU1FT1VUX0RFTEFZLmdldCgpKTtcclxuICAgICAgICAgICAgX3dpbmRvdygpW19KU0xPQURfQ0FMTEJBQ0tdID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrVGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgX3dpbmRvdygpW19KU0xPQURfQ0FMTEJBQ0tdO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjYXB0Y2hhID0gX3dpbmRvdygpLmdyZWNhcHRjaGE7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXJlY2FwdGNoYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gV3JhcCB0aGUgZ3JlcHRjaGEgcmVuZGVyIGZ1bmN0aW9uIHNvIHRoYXQgd2Uga25vdyBpZiB0aGUgZGV2ZWxvcGVyIGhhc1xyXG4gICAgICAgICAgICAgICAgLy8gY2FsbGVkIGl0IHNlcGFyYXRlbHlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlbmRlciA9IHJlY2FwdGNoYS5yZW5kZXI7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEucmVuZGVyID0gKGNvbnRhaW5lciwgcGFyYW1zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2lkZ2V0SWQgPSByZW5kZXIoY29udGFpbmVyLCBwYXJhbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aWRnZXRJZDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhvc3RMYW5ndWFnZSA9IGhsO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZWNhcHRjaGEpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHtSRUNBUFRDSEFfQkFTRX0/JHtxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICAgICBvbmxvYWQ6IF9KU0xPQURfQ0FMTEJBQ0ssXHJcbiAgICAgICAgICAgICAgICByZW5kZXI6ICdleHBsaWNpdCcsXHJcbiAgICAgICAgICAgICAgICBobFxyXG4gICAgICAgICAgICB9KX1gO1xyXG4gICAgICAgICAgICBfbG9hZEpTKHVybCkuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkge1xyXG4gICAgICAgIHRoaXMuY291bnRlci0tO1xyXG4gICAgfVxyXG4gICAgc2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5KGhsKSB7XHJcbiAgICAgICAgLy8gV2UgY2FuIHJlc29sdmUgaW1tZWRpYXRlbHkgaWY6XHJcbiAgICAgICAgLy8gICDigKIgZ3JlY2FwdGNoYSBpcyBhbHJlYWR5IGRlZmluZWQgQU5EIChcclxuICAgICAgICAvLyAgICAgMS4gdGhlIHJlcXVlc3RlZCBsYW5ndWFnZSBjb2RlcyBhcmUgdGhlIHNhbWUgT1JcclxuICAgICAgICAvLyAgICAgMi4gdGhlcmUgZXhpc3RzIGFscmVhZHkgYSBSZUNhcHRjaGEgb24gdGhlIHBhZ2VcclxuICAgICAgICAvLyAgICAgMy4gdGhlIGxpYnJhcnkgd2FzIGFscmVhZHkgbG9hZGVkIGJ5IHRoZSBhcHBcclxuICAgICAgICAvLyBJbiBjYXNlcyAoMikgYW5kICgzKSwgd2UgX2Nhbid0XyByZWxvYWQgYXMgaXQgd291bGQgYnJlYWsgdGhlIHJlY2FwdGNoYXNcclxuICAgICAgICAvLyB0aGF0IGFyZSBhbHJlYWR5IGluIHRoZSBwYWdlXHJcbiAgICAgICAgcmV0dXJuICghIV93aW5kb3coKS5ncmVjYXB0Y2hhICYmXHJcbiAgICAgICAgICAgIChobCA9PT0gdGhpcy5ob3N0TGFuZ3VhZ2UgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuY291bnRlciA+IDAgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc0hvc3RMYW5ndWFnZVZhbGlkKGhsKSB7XHJcbiAgICByZXR1cm4gaGwubGVuZ3RoIDw9IDYgJiYgL15cXHMqW2EtekEtWjAtOVxcLV0qXFxzKiQvLnRlc3QoaGwpO1xyXG59XHJcbmNsYXNzIE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsIHtcclxuICAgIGFzeW5jIGxvYWQoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTW9ja1JlQ2FwdGNoYShhdXRoKTtcclxuICAgIH1cclxuICAgIGNsZWFyZWRPbmVJbnN0YW5jZSgpIHsgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFID0gJ3JlY2FwdGNoYSc7XHJcbmNvbnN0IERFRkFVTFRfUEFSQU1TID0ge1xyXG4gICAgdGhlbWU6ICdsaWdodCcsXHJcbiAgICB0eXBlOiAnaW1hZ2UnXHJcbn07XHJcbi8qKlxyXG4gKiBBbiB7QGxpbmsgaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9yZWNhcHRjaGEvIHwgcmVDQVBUQ0hBfS1iYXNlZCBhcHBsaWNhdGlvbiB2ZXJpZmllci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUmVjYXB0Y2hhVmVyaWZpZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lck9ySWQgLSBUaGUgcmVDQVBUQ0hBIGNvbnRhaW5lciBwYXJhbWV0ZXIuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFRoaXMgaGFzIGRpZmZlcmVudCBtZWFuaW5nIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSByZUNBUFRDSEEgaXMgaGlkZGVuIG9yIHZpc2libGUuIEZvciBhXHJcbiAgICAgKiB2aXNpYmxlIHJlQ0FQVENIQSB0aGUgY29udGFpbmVyIG11c3QgYmUgZW1wdHkuIElmIGEgc3RyaW5nIGlzIHVzZWQsIGl0IGhhcyB0byBjb3JyZXNwb25kIHRvXHJcbiAgICAgKiBhbiBlbGVtZW50IElELiBUaGUgY29ycmVzcG9uZGluZyBlbGVtZW50IG11c3QgYWxzbyBtdXN0IGJlIGluIHRoZSBET00gYXQgdGhlIHRpbWUgb2ZcclxuICAgICAqIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbWV0ZXJzIC0gVGhlIG9wdGlvbmFsIHJlQ0FQVENIQSBwYXJhbWV0ZXJzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBDaGVjayB0aGUgcmVDQVBUQ0hBIGRvY3MgZm9yIGEgY29tcHJlaGVuc2l2ZSBsaXN0LiBBbGwgcGFyYW1ldGVycyBhcmUgYWNjZXB0ZWQgZXhjZXB0IGZvclxyXG4gICAgICogdGhlIHNpdGVrZXkuIEZpcmViYXNlIEF1dGggYmFja2VuZCBwcm92aXNpb25zIGEgcmVDQVBUQ0hBIGZvciBlYWNoIHByb2plY3QgYW5kIHdpbGxcclxuICAgICAqIGNvbmZpZ3VyZSB0aGlzIHVwb24gcmVuZGVyaW5nLiBGb3IgYW4gaW52aXNpYmxlIHJlQ0FQVENIQSwgYSBzaXplIGtleSBtdXN0IGhhdmUgdGhlIHZhbHVlXHJcbiAgICAgKiAnaW52aXNpYmxlJy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXV0aEV4dGVybiAtIFRoZSBjb3JyZXNwb25kaW5nIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogSWYgbm9uZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGlzIHVzZWQuIEEgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlXHJcbiAgICAgKiBtdXN0IGJlIGluaXRpYWxpemVkIHdpdGggYW4gQVBJIGtleSwgb3RoZXJ3aXNlIGFuIGVycm9yIHdpbGwgYmUgdGhyb3duLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJPcklkLCBwYXJhbWV0ZXJzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9QQVJBTVMpLCBhdXRoRXh0ZXJuKSB7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gcGFyYW1ldGVycztcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgYXBwbGljYXRpb24gdmVyaWZpZXIgdHlwZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEByZW1hcmtzXHJcbiAgICAgICAgICogRm9yIGEgcmVDQVBUQ0hBIHZlcmlmaWVyLCB0aGlzIGlzICdyZWNhcHRjaGEnLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy53aWRnZXRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhID0gbnVsbDtcclxuICAgICAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aEV4dGVybik7XHJcbiAgICAgICAgdGhpcy5pc0ludmlzaWJsZSA9IHRoaXMucGFyYW1ldGVycy5zaXplID09PSAnaW52aXNpYmxlJztcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcsIHRoaXMuYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHR5cGVvZiBjb250YWluZXJPcklkID09PSAnc3RyaW5nJ1xyXG4gICAgICAgICAgICA/IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGNvbnRhaW5lck9ySWQpXHJcbiAgICAgICAgICAgIDogY29udGFpbmVyT3JJZDtcclxuICAgICAgICBfYXNzZXJ0KGNvbnRhaW5lciwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5jYWxsYmFjayA9IHRoaXMubWFrZVRva2VuQ2FsbGJhY2sodGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIgPSB0aGlzLmF1dGguc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nXHJcbiAgICAgICAgICAgID8gbmV3IE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsKClcclxuICAgICAgICAgICAgOiBuZXcgUmVDYXB0Y2hhTG9hZGVySW1wbCgpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVTdGFydGluZ1N0YXRlKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRmlndXJlIG91dCBpZiBzZGsgdmVyc2lvbiBpcyBuZWVkZWRcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogV2FpdHMgZm9yIHRoZSB1c2VyIHRvIHNvbHZlIHRoZSByZUNBUFRDSEEgYW5kIHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSByZUNBUFRDSEEgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHZlcmlmeSgpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICBjb25zdCByZWNhcHRjaGEgPSB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZWNhcHRjaGEuZ2V0UmVzcG9uc2UoaWQpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW5DaGFuZ2UgPSAodG9rZW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIElnbm9yZSB0b2tlbiBleHBpcmF0aW9ucy5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZGVsZXRlKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmFkZCh0b2tlbkNoYW5nZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEuZXhlY3V0ZShpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgcmVDQVBUQ0hBIHdpZGdldCBvbiB0aGUgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZUNBUFRDSEEgd2lkZ2V0IElELlxyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UuIFNpbmNlIGl0J3Mgbm90IGFzeW5jICh3ZSB3YW50IHRvIHJldHVybiB0aGVcclxuICAgICAgICAgICAgLy8gX3NhbWVfIHByb21pc2UgaWYgcmVuZGVyaW5nIGlzIHN0aWxsIG9jY3VycmluZyksIHRoZSBBUEkgc3VyZmFjZSBzaG91bGRcclxuICAgICAgICAgICAgLy8gcmVqZWN0IHdpdGggdGhlIGVycm9yIHJhdGhlciB0aGFuIGp1c3QgdGhyb3dcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IHRoaXMubWFrZVJlbmRlclByb21pc2UoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3Jlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud2lkZ2V0SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlc2V0KHRoaXMud2lkZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IGZyb20gdGhlIHBhZ2UgYW5kIGRlc3Ryb3lzIHRoZSBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmNsZWFyZWRPbmVJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVTdGFydGluZ1N0YXRlKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMucGFyYW1ldGVycy5zaXRla2V5LCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLmlzSW52aXNpYmxlIHx8ICF0aGlzLmNvbnRhaW5lci5oYXNDaGlsZE5vZGVzKCksIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcsIHRoaXMuYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgbWFrZVRva2VuQ2FsbGJhY2soZXhpc3RpbmcpIHtcclxuICAgICAgICByZXR1cm4gdG9rZW4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIodG9rZW4pKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmcodG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZ1bmMgPSBfd2luZG93KClbZXhpc3RpbmddO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxGdW5jID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRnVuYyh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0Tm90RGVzdHJveWVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMuZGVzdHJveWVkLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBtYWtlUmVuZGVyUHJvbWlzZSgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXQoKTtcclxuICAgICAgICBpZiAoIXRoaXMud2lkZ2V0SWQpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyO1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGd1YXJhbnRlZWRFbXB0eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGd1YXJhbnRlZWRFbXB0eSk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSBndWFyYW50ZWVkRW1wdHk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy53aWRnZXRJZCA9IHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKS5yZW5kZXIoY29udGFpbmVyLCB0aGlzLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy53aWRnZXRJZDtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXQoKSB7XHJcbiAgICAgICAgX2Fzc2VydChfaXNIdHRwT3JIdHRwcygpICYmICFfaXNXb3JrZXIoKSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGF3YWl0IGRvbVJlYWR5KCk7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBhd2FpdCB0aGlzLl9yZWNhcHRjaGFMb2FkZXIubG9hZCh0aGlzLmF1dGgsIHRoaXMuYXV0aC5sYW5ndWFnZUNvZGUgfHwgdW5kZWZpbmVkKTtcclxuICAgICAgICBjb25zdCBzaXRlS2V5ID0gYXdhaXQgZ2V0UmVjYXB0Y2hhUGFyYW1zKHRoaXMuYXV0aCk7XHJcbiAgICAgICAgX2Fzc2VydChzaXRlS2V5LCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXkgPSBzaXRlS2V5O1xyXG4gICAgfVxyXG4gICAgZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnJlY2FwdGNoYSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlY2FwdGNoYTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBkb21SZWFkeSgpIHtcclxuICAgIGxldCByZXNvbHZlciA9IG51bGw7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIERvY3VtZW50IG5vdCByZWFkeSwgd2FpdCBmb3IgbG9hZCBiZWZvcmUgcmVzb2x2aW5nLlxyXG4gICAgICAgIC8vIFNhdmUgcmVzb2x2ZXIsIHNvIHdlIGNhbiByZW1vdmUgbGlzdGVuZXIgaW4gY2FzZSBpdCB3YXMgZXh0ZXJuYWxseVxyXG4gICAgICAgIC8vIGNhbmNlbGxlZC5cclxuICAgICAgICByZXNvbHZlciA9ICgpID0+IHJlc29sdmUoKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmVyKTtcclxuICAgIH0pLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgIGlmIChyZXNvbHZlcikge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHJlc29sdmVyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIENvbmZpcm1hdGlvblJlc3VsdEltcGwge1xyXG4gICAgY29uc3RydWN0b3IodmVyaWZpY2F0aW9uSWQsIG9uQ29uZmlybWF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy52ZXJpZmljYXRpb25JZCA9IHZlcmlmaWNhdGlvbklkO1xyXG4gICAgICAgIHRoaXMub25Db25maXJtYXRpb24gPSBvbkNvbmZpcm1hdGlvbjtcclxuICAgIH1cclxuICAgIGNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih0aGlzLnZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vbkNvbmZpcm1hdGlvbihhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG1ldGhvZCBzZW5kcyBhIGNvZGUgdmlhIFNNUyB0byB0aGUgZ2l2ZW5cclxuICogcGhvbmUgbnVtYmVyLCBhbmQgcmV0dXJucyBhIHtAbGluayBDb25maXJtYXRpb25SZXN1bHR9LiBBZnRlciB0aGUgdXNlclxyXG4gKiBwcm92aWRlcyB0aGUgY29kZSBzZW50IHRvIHRoZWlyIHBob25lLCBjYWxsIHtAbGluayBDb25maXJtYXRpb25SZXN1bHQuY29uZmlybX1cclxuICogd2l0aCB0aGUgY29kZSB0byBzaWduIHRoZSB1c2VyIGluLlxyXG4gKlxyXG4gKiBGb3IgYWJ1c2UgcHJldmVudGlvbiwgdGhpcyBtZXRob2QgYWxzbyByZXF1aXJlcyBhIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICogVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0uXHJcbiAqIFRoaXMgZnVuY3Rpb24gY2FuIHdvcmsgb24gb3RoZXIgcGxhdGZvcm1zIHRoYXQgZG8gbm90IHN1cHBvcnQgdGhlXHJcbiAqIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0gKGxpa2UgUmVhY3QgTmF0aXZlKSwgYnV0IHlvdSBuZWVkIHRvIHVzZSBhXHJcbiAqIHRoaXJkLXBhcnR5IHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfSBpbXBsZW1lbnRhdGlvbi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBmaXJlYmFzZS5hdXRoLlJlY2FwdGNoYVZlcmlmaWVyKCdyZWNhcHRjaGEtY29udGFpbmVyJyk7XHJcbiAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiBhIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aEludGVybmFsLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aEludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB1c2VyIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKHVzZXJJbnRlcm5hbC5hdXRoLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gbGlua1dpdGhDcmVkZW50aWFsKHVzZXJJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZS1hdXRoZW50aWNhdGVzIGEgdXNlciB1c2luZyBhIGZyZXNoIHBob25lIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzIFVzZSBiZWZvcmUgb3BlcmF0aW9ucyBzdWNoIGFzIHtAbGluayB1cGRhdGVQYXNzd29yZH0gdGhhdCByZXF1aXJlIHRva2VucyBmcm9tIHJlY2VudCBzaWduLWluIGF0dGVtcHRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcGhvbmVOdW1iZXIgLSBUaGUgdXNlcidzIHBob25lIG51bWJlciBpbiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICogQHBhcmFtIGFwcFZlcmlmaWVyIC0gVGhlIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIodXNlciwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB2ZXJpZmljYXRpb24gSUQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBTTVMgY29kZSB0aGF0IGlzIHNlbnQuXHJcbiAqXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfdmVyaWZ5UGhvbmVOdW1iZXIoYXV0aCwgb3B0aW9ucywgdmVyaWZpZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IHJlY2FwdGNoYVRva2VuID0gYXdhaXQgdmVyaWZpZXIudmVyaWZ5KCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlY2FwdGNoYVRva2VuID09PSAnc3RyaW5nJywgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHZlcmlmaWVyLnR5cGUgPT09IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIGxldCBwaG9uZUluZm9PcHRpb25zO1xyXG4gICAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHBob25lTnVtYmVyOiBvcHRpb25zXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0gb3B0aW9ucztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCdzZXNzaW9uJyBpbiBwaG9uZUluZm9PcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNlc3Npb24gPSBwaG9uZUluZm9PcHRpb25zLnNlc3Npb247XHJcbiAgICAgICAgICAgIGlmICgncGhvbmVOdW1iZXInIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcImVucm9sbFwiIC8qIEVOUk9MTCAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lRW5yb2xsbWVudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVTZXNzaW9uSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcInNpZ25pblwiIC8qIFNJR05fSU4gKi8sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZmFFbnJvbGxtZW50SWQgPSAoKF9hID0gcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvckhpbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVJbmZvT3B0aW9ucy5tdWx0aUZhY3RvclVpZDtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQobWZhRW5yb2xsbWVudElkLCBhdXRoLCBcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWw6IHNlc3Npb24uY3JlZGVudGlhbCxcclxuICAgICAgICAgICAgICAgICAgICBtZmFFbnJvbGxtZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVTaWduSW5JbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVSZXNwb25zZUluZm8uc2Vzc2lvbkluZm87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbkluZm8gfSA9IGF3YWl0IHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGFUb2tlblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25JbmZvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHZlcmlmaWVyLl9yZXNldCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKHVzZXIsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBhdXRoZW50aWNhdGluZyB0aGUgbmV3IHBob25lIG51bWJlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgYXdhaXQgX2xpbmskMShnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgUGhvbmVBdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGluIHdoaWNoIHNpZ24taW5zIHNob3VsZCBvY2N1ci5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogU3RhcnRzIGEgcGhvbmUgbnVtYmVyIGF1dGhlbnRpY2F0aW9uIGZsb3cgYnkgc2VuZGluZyBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRoZSBnaXZlbiBwaG9uZVxyXG4gICAgICogbnVtYmVyLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSBmbG93IGlzIHByb3ZpZGVkIHVzaW5nIHRoZSBgc2lnbkluV2l0aFBob25lTnVtYmVyYCBtZXRob2QuXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVJbmZvT3B0aW9ucyAtIFRoZSB1c2VyJ3Mge0BsaW5rIFBob25lSW5mb09wdGlvbnN9LiBUaGUgcGhvbmUgbnVtYmVyIHNob3VsZCBiZSBpblxyXG4gICAgICogRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25WZXJpZmllciAtIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGFcclxuICAgICAqIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS4gVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sXHJcbiAgICAgKiB7QGxpbmsgUmVjYXB0Y2hhVmVyaWZpZXJ9LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgYSB2ZXJpZmljYXRpb24gSUQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0gdG8gaWRlbnRpZnkgdGhpcyBmbG93Li5cclxuICAgICAqL1xyXG4gICAgdmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVPcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIF92ZXJpZnlQaG9uZU51bWJlcih0aGlzLmF1dGgsIHBob25lT3B0aW9ucywgZ2V0TW9kdWxhckluc3RhbmNlKGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBob25lIGF1dGggY3JlZGVudGlhbCwgZ2l2ZW4gdGhlIHZlcmlmaWNhdGlvbiBJRCBmcm9tXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9IGFuZCB0aGUgY29kZSB0aGF0IHdhcyBzZW50IHRvIHRoZSB1c2VyJ3NcclxuICAgICAqIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2ZXJpZmljYXRpb25JZCAtIFRoZSB2ZXJpZmljYXRpb24gSUQgcmV0dXJuZWQgZnJvbSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9LlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbkNvZGUgLSBUaGUgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlcidzIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHdoZW4gcGFzc2VkIGFuIGVycm9yLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd29ya3MgZm9yIGVycm9ycyBsaWtlXHJcbiAgICAgKiBgYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsc2AuIFRoaXMgaXMgdXNlZnVsIGZvclxyXG4gICAgICogcmVjb3ZlcmluZyB3aGVuIGF0dGVtcHRpbmcgdG8gc2V0IGEgdXNlcidzIHBob25lIG51bWJlciBidXQgdGhlIG51bWJlclxyXG4gICAgICogaW4gcXVlc3Rpb24gaXMgYWxyZWFkeSB0aWVkIHRvIGFub3RoZXIgYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmdcclxuICAgICAqIGNvZGUgdHJpZXMgdG8gdXBkYXRlIHRoZSBjdXJyZW50IHVzZXIncyBwaG9uZSBudW1iZXIsIGFuZCBpZiB0aGF0XHJcbiAgICAgKiBmYWlscywgbGlua3MgdGhlIHVzZXIgd2l0aCB0aGUgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhhdCBudW1iZXI6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihudW1iZXIsIHZlcmlmaWVyKTtcclxuICAgICAqIHRyeSB7XHJcbiAgICAgKiAgIGNvbnN0IGNvZGUgPSAnJzsgLy8gUHJvbXB0IHRoZSB1c2VyIGZvciB0aGUgdmVyaWZpY2F0aW9uIGNvZGVcclxuICAgICAqICAgYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIoXHJcbiAgICAgKiAgICAgICBhdXRoLmN1cnJlbnRVc2VyLFxyXG4gICAgICogICAgICAgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgY29kZSkpO1xyXG4gICAgICogfSBjYXRjaCAoZSkge1xyXG4gICAgICogICBpZiAoZS5jb2RlID09PSAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJykge1xyXG4gICAgICogICAgIGNvbnN0IGNyZWQgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbUVycm9yKGUpO1xyXG4gICAgICogICAgIGF3YWl0IGxpbmtXaXRoQ3JlZGVudGlhbChhdXRoLmN1cnJlbnRVc2VyLCBjcmVkKTtcclxuICAgICAqICAgfVxyXG4gICAgICogfVxyXG4gICAgICpcclxuICAgICAqIC8vIEF0IHRoaXMgcG9pbnQsIGF1dGguY3VycmVudFVzZXIucGhvbmVOdW1iZXIgPT09IG51bWJlci5cclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlcnJvciAtIFRoZSBlcnJvciB0byBnZW5lcmF0ZSBhIGNyZWRlbnRpYWwgZnJvbS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmIChwaG9uZU51bWJlciAmJiB0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBIT05FLiAqL1xyXG5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGhvbmVcIiAvKiBQSE9ORSAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EID0gXCJwaG9uZVwiIC8qIFBIT05FICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hvb3NlcyBhIHBvcHVwL3JlZGlyZWN0IHJlc29sdmVyIHRvIHVzZS4gVGhpcyBwcmVmZXJzIHRoZSBvdmVycmlkZSAod2hpY2hcclxuICogaXMgZGlyZWN0bHkgcGFzc2VkIGluKSwgYW5kIGZhbGxzIGJhY2sgdG8gdGhlIHByb3BlcnR5IHNldCBvbiB0aGUgYXV0aFxyXG4gKiBvYmplY3QuIElmIG5laXRoZXIgYXJlIGF2YWlsYWJsZSwgdGhpcyBmdW5jdGlvbiBlcnJvcnMgdy8gYW4gYXJndW1lbnQgZXJyb3IuXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoLCByZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICBpZiAocmVzb2x2ZXJPdmVycmlkZSkge1xyXG4gICAgICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXJPdmVycmlkZSk7XHJcbiAgICB9XHJcbiAgICBfYXNzZXJ0KGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIHJldHVybiBhdXRoLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgSWRwQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwiY3VzdG9tXCIgLyogQ1VTVE9NICovLCBcImN1c3RvbVwiIC8qIENVU1RPTSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KGlkVG9rZW4pKTtcclxuICAgIH1cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IHRoaXMucGFyYW1zLnJlcXVlc3RVcmksXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogdGhpcy5wYXJhbXMuc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogdGhpcy5wYXJhbXMucG9zdEJvZHksXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0aGlzLnBhcmFtcy50ZW5hbnRJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBhcmFtcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICByZXR1cm5JZHBDcmVkZW50aWFsOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAoaWRUb2tlbikge1xyXG4gICAgICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVxdWVzdDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfc2lnbkluKHBhcmFtcykge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChwYXJhbXMuYXV0aCwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cclxuZnVuY3Rpb24gX3JlYXV0aChwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZSh1c2VyLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGluayhwYXJhbXMpIHtcclxuICAgIGNvbnN0IHsgYXV0aCwgdXNlciB9ID0gcGFyYW1zO1xyXG4gICAgX2Fzc2VydCh1c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlciwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKi9cclxuY2xhc3MgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcmVzb2x2ZXIsIHVzZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZXI7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmJ5cGFzc0F1dGhTdGF0ZSA9IGJ5cGFzc0F1dGhTdGF0ZTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBBcnJheS5pc0FycmF5KGZpbHRlcikgPyBmaWx0ZXIgOiBbZmlsdGVyXTtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX2luaXRpYWxpemUodGhpcy5hdXRoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25FeGVjdXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkF1dGhFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdXJsUmVzcG9uc2UsIHNlc3Npb25JZCwgcG9zdEJvZHksIHRlbmFudElkLCBlcnJvciwgdHlwZSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGF1dGg6IHRoaXMuYXV0aCxcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdXJsUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGVuYW50SWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogcG9zdEJvZHkgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXHJcbiAgICAgICAgICAgIGJ5cGFzc0F1dGhTdGF0ZTogdGhpcy5ieXBhc3NBdXRoU3RhdGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShhd2FpdCB0aGlzLmdldElkcFRhc2sodHlwZSkocGFyYW1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICB9XHJcbiAgICBnZXRJZHBUYXNrKHR5cGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVBvcHVwXCIgLyogU0lHTl9JTl9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9zaWduSW47XHJcbiAgICAgICAgICAgIGNhc2UgXCJsaW5rVmlhUG9wdXBcIiAvKiBMSU5LX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9saW5rO1xyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBSRUFVVEhfVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWF1dGg7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbCh0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVzb2x2ZShjcmVkKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZXNvbHZlKGNyZWQpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHJlamVjdChlcnJvcikge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMucGVuZGluZ1Byb21pc2UsICdQZW5kaW5nIHByb21pc2Ugd2FzIG5ldmVyIHNldCcpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBbmRDbGVhblVwKCk7XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIudW5yZWdpc3RlckNvbnN1bWVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsZWFuVXAoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCA9IG5ldyBEZWxheSgyMDAwLCAxMDAwMCk7XHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgcG9wdXAtYmFzZWQgT0F1dGggYXV0aGVudGljYXRpb24gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc3VjY2VlZHMsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyIGFsb25nIHdpdGggdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC4gSWYgc2lnbiBpbiB3YXNcclxuICogdW5zdWNjZXNzZnVsLCByZXR1cm5zIGFuIGVycm9yIG9iamVjdCBjb250YWluaW5nIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGVycm9yLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24oYXV0aEludGVybmFsLCBcInNpZ25JblZpYVBvcHVwXCIgLyogU0lHTl9JTl9WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogUmVhdXRoZW50aWNhdGVzIHRoZSBjdXJyZW50IHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIHtAbGluayBPQXV0aFByb3ZpZGVyfSB1c2luZyBhIHBvcC11cCBiYXNlZFxyXG4gKiBPQXV0aCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGUgcmVhdXRoZW50aWNhdGlvbiBpcyBzdWNjZXNzZnVsLCB0aGUgcmV0dXJuZWQgcmVzdWx0IHdpbGwgY29udGFpbiB0aGUgdXNlciBhbmQgdGhlXHJcbiAqIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFJlYXV0aGVudGljYXRlIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGF3YWl0IHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwicmVhdXRoVmlhUG9wdXBcIiAvKiBSRUFVVEhfVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIGF1dGhlbnRpY2F0ZWQgcHJvdmlkZXIgdG8gdGhlIHVzZXIgYWNjb3VudCB1c2luZyBhIHBvcC11cCBiYXNlZCBPQXV0aCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGUgbGlua2luZyBpcyBzdWNjZXNzZnVsLCB0aGUgcmV0dXJuZWQgcmVzdWx0IHdpbGwgY29udGFpbiB0aGUgdXNlciBhbmQgdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC5cclxuICpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhQb3B1cChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwibGlua1ZpYVBvcHVwXCIgLyogTElOS19WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBQb3B1cCBldmVudCBtYW5hZ2VyLiBIYW5kbGVzIHRoZSBwb3B1cCdzIGVudGlyZSBsaWZlY3ljbGU7IGxpc3RlbnMgdG8gYXV0aFxyXG4gKiBldmVudHNcclxuICpcclxuICovXHJcbmNsYXNzIFBvcHVwT3BlcmF0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcHJvdmlkZXIsIHJlc29sdmVyLCB1c2VyKSB7XHJcbiAgICAgICAgc3VwZXIoYXV0aCwgZmlsdGVyLCByZXNvbHZlciwgdXNlcik7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlciA9IHByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIGlmIChQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24pIHtcclxuICAgICAgICAgICAgUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uLmNhbmNlbCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSB0aGlzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZU5vdE51bGwoKSB7XHJcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgX2Fzc2VydChyZXN1bHQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5maWx0ZXIubGVuZ3RoID09PSAxLCAnUG9wdXAgb3BlcmF0aW9ucyBvbmx5IGhhbmRsZSBvbmUgZXZlbnQnKTtcclxuICAgICAgICBjb25zdCBldmVudElkID0gX2dlbmVyYXRlRXZlbnRJZCgpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX29wZW5Qb3B1cCh0aGlzLmF1dGgsIHRoaXMucHJvdmlkZXIsIHRoaXMuZmlsdGVyWzBdLCAvLyBUaGVyZSdzIGFsd2F5cyBvbmUsIHNlZSBjb25zdHJ1Y3RvclxyXG4gICAgICAgIGV2ZW50SWQpO1xyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdy5hc3NvY2lhdGVkRXZlbnQgPSBldmVudElkO1xyXG4gICAgICAgIC8vIENoZWNrIGZvciB3ZWIgc3RvcmFnZSBzdXBwb3J0IGFuZCBvcmlnaW4gdmFsaWRhdGlvbiBfYWZ0ZXJfIHRoZSBwb3B1cCBpc1xyXG4gICAgICAgIC8vIGxvYWRlZC4gVGhlc2Ugb3BlcmF0aW9ucyBhcmUgc2xvdyAofjEgc2Vjb25kIG9yIHNvKSBSYXRoZXIgdGhhblxyXG4gICAgICAgIC8vIHdhaXRpbmcgb24gdGhlbSBiZWZvcmUgb3BlbmluZyB0aGUgd2luZG93LCBvcHRpbWlzdGljYWxseSBvcGVuIHRoZSBwb3B1cFxyXG4gICAgICAgIC8vIGFuZCBjaGVjayBmb3Igc3RvcmFnZSBzdXBwb3J0IGF0IHRoZSBzYW1lIHRpbWUuIElmIHN0b3JhZ2Ugc3VwcG9ydCBpc1xyXG4gICAgICAgIC8vIG5vdCBhdmFpbGFibGUsIHRoaXMgd2lsbCBjYXVzZSB0aGUgd2hvbGUgdGhpbmcgdG8gcmVqZWN0IHByb3Blcmx5LiBJdFxyXG4gICAgICAgIC8vIHdpbGwgYWxzbyBjbG9zZSB0aGUgcG9wdXAsIGJ1dCBzaW5jZSB0aGUgcHJvbWlzZSBoYXMgYWxyZWFkeSByZWplY3RlZCxcclxuICAgICAgICAvLyB0aGUgcG9wdXAgY2xvc2VkIGJ5IHVzZXIgcG9sbCB3aWxsIHJlamVjdCBpbnRvIHRoZSB2b2lkLlxyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIuX29yaWdpblZhbGlkYXRpb24odGhpcy5hdXRoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5faXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKHRoaXMuYXV0aCwgaXNTdXBwb3J0ZWQgPT4ge1xyXG4gICAgICAgICAgICBpZiAoIWlzU3VwcG9ydGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcIndlYi1zdG9yYWdlLXVuc3VwcG9ydGVkXCIgLyogV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQgKi8pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEhhbmRsZSB1c2VyIGNsb3N1cmUuIE5vdGljZSB0aGlzIGRvZXMgKm5vdCogdXNlIGF3YWl0XHJcbiAgICAgICAgdGhpcy5wb2xsVXNlckNhbmNlbGxhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGV2ZW50SWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXNzb2NpYXRlZEV2ZW50KSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgY2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiAvKiBFWFBJUkVEX1BPUFVQX1JFUVVFU1QgKi8pKTtcclxuICAgIH1cclxuICAgIGNsZWFuVXAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aFdpbmRvdykge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhXaW5kb3cuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbElkKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5wb2xsSWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBudWxsO1xyXG4gICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgcG9sbFVzZXJDYW5jZWxsYXRpb24oKSB7XHJcbiAgICAgICAgY29uc3QgcG9sbCA9ICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKChfYiA9IChfYSA9IHRoaXMuYXV0aFdpbmRvdykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLndpbmRvdykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLmNsb3NlZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHRoYXQgdGhlcmUgaXMgc3VmZmljaWVudCB0aW1lIGZvciB3aGF0ZXZlciBhY3Rpb24gdG9cclxuICAgICAgICAgICAgICAgIC8vIGNvbXBsZXRlLiBUaGUgd2luZG93IGNvdWxkIGhhdmUgY2xvc2VkIGJ1dCB0aGUgc2lnbiBpbiBuZXR3b3JrXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsIGNvdWxkIHN0aWxsIGJlIGluIGZsaWdodC5cclxuICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9sbElkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBcInBvcHVwLWNsb3NlZC1ieS11c2VyXCIgLyogUE9QVVBfQ0xPU0VEX0JZX1VTRVIgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sIDIwMDAgLyogQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dChwb2xsLCBfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBwb2xsKCk7XHJcbiAgICB9XHJcbn1cclxuLy8gT25seSBvbmUgcG9wdXAgaXMgZXZlciBzaG93biBhdCBvbmNlLiBUaGUgbGlmZWN5Y2xlIG9mIHRoZSBjdXJyZW50IHBvcHVwXHJcbi8vIGNhbiBiZSBtYW5hZ2VkIC8gY2FuY2VsbGVkIGJ5IHRoZSBjb25zdHJ1Y3Rvci5cclxuUG9wdXBPcGVyYXRpb24uY3VycmVudFBvcHVwQWN0aW9uID0gbnVsbDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUEVORElOR19SRURJUkVDVF9LRVkgPSAncGVuZGluZ1JlZGlyZWN0JztcclxuLy8gV2Ugb25seSBnZXQgb25lIHJlZGlyZWN0IG91dGNvbWUgZm9yIGFueSBvbmUgYXV0aCwgc28ganVzdCBzdG9yZSBpdFxyXG4vLyBpbiBoZXJlLlxyXG5jb25zdCByZWRpcmVjdE91dGNvbWVNYXAgPSBuZXcgTWFwKCk7XHJcbmNsYXNzIFJlZGlyZWN0QWN0aW9uIGV4dGVuZHMgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIHJlc29sdmVyLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgICAgIHN1cGVyKGF1dGgsIFtcclxuICAgICAgICAgICAgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogUkVBVVRIX1ZJQV9SRURJUkVDVCAqLyxcclxuICAgICAgICAgICAgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqL1xyXG4gICAgICAgIF0sIHJlc29sdmVyLCB1bmRlZmluZWQsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5ldmVudElkID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3ZlcnJpZGUgdGhlIGV4ZWN1dGUgZnVuY3Rpb247IGlmIHdlIGFscmVhZHkgaGF2ZSBhIHJlZGlyZWN0IHJlc3VsdCwgdGhlblxyXG4gICAgICoganVzdCByZXR1cm4gaXQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgbGV0IHJlYWR5T3V0Y29tZSA9IHJlZGlyZWN0T3V0Y29tZU1hcC5nZXQodGhpcy5hdXRoLl9rZXkoKSk7XHJcbiAgICAgICAgaWYgKCFyZWFkeU91dGNvbWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1BlbmRpbmdSZWRpcmVjdCA9IGF3YWl0IF9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyh0aGlzLnJlc29sdmVyLCB0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaGFzUGVuZGluZ1JlZGlyZWN0ID8gYXdhaXQgc3VwZXIuZXhlY3V0ZSgpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWFkeU91dGNvbWUgPSAoKSA9PiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksIHJlYWR5T3V0Y29tZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlJ3JlIG5vdCBieXBhc3NpbmcgYXV0aCBzdGF0ZSwgdGhlIHJlYWR5IG91dGNvbWUgc2hvdWxkIGJlIHNldCB0b1xyXG4gICAgICAgIC8vIG51bGwuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWFkeU91dGNvbWUoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLykge1xyXG4gICAgICAgICAgICByZXR1cm4gc3VwZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChldmVudC50eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzZW50aW5lbCB2YWx1ZSBpbmRpY2F0aW5nIHRoZXJlJ3Mgbm8gcGVuZGluZyByZWRpcmVjdFxyXG4gICAgICAgICAgICB0aGlzLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGV2ZW50LmV2ZW50SWQpIHtcclxuICAgICAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHRoaXMuYXV0aC5fcmVkaXJlY3RVc2VyRm9ySWQoZXZlbnQuZXZlbnRJZCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN1cGVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIG9uRXhlY3V0aW9uKCkgeyB9XHJcbiAgICBjbGVhblVwKCkgeyB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICBjb25zdCBrZXkgPSBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCk7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpO1xyXG4gICAgaWYgKCEoYXdhaXQgcGVyc2lzdGVuY2UuX2lzQXZhaWxhYmxlKCkpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gKGF3YWl0IHBlcnNpc3RlbmNlLl9nZXQoa2V5KSkgPT09ICd0cnVlJztcclxuICAgIGF3YWl0IHBlcnNpc3RlbmNlLl9yZW1vdmUoa2V5KTtcclxuICAgIHJldHVybiBoYXNQZW5kaW5nUmVkaXJlY3Q7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlciwgYXV0aCkge1xyXG4gICAgcmV0dXJuIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpLl9zZXQocGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpLCAndHJ1ZScpO1xyXG59XHJcbmZ1bmN0aW9uIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMoKSB7XHJcbiAgICByZWRpcmVjdE91dGNvbWVNYXAuY2xlYXIoKTtcclxufVxyXG5mdW5jdGlvbiByZXNvbHZlclBlcnNpc3RlbmNlKHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2dldEluc3RhbmNlKHJlc29sdmVyLl9yZWRpcmVjdFBlcnNpc3RlbmNlKTtcclxufVxyXG5mdW5jdGlvbiBwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCkge1xyXG4gICAgcmV0dXJuIF9wZXJzaXN0ZW5jZUtleU5hbWUoUEVORElOR19SRURJUkVDVF9LRVksIGF1dGguY29uZmlnLmFwaUtleSwgYXV0aC5uYW1lKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXV0aGVudGljYXRlcyBhIEZpcmViYXNlIGNsaWVudCB1c2luZyBhIGZ1bGwtcGFnZSByZWRpcmVjdCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBoYW5kbGUgdGhlIHJlc3VsdHMgYW5kIGVycm9ycyBmb3IgdGhpcyBvcGVyYXRpb24sIHJlZmVyIHRvIHtAbGluayBnZXRSZWRpcmVjdFJlc3VsdH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcik7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKGF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCBhdXRoSW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdChhdXRoSW50ZXJuYWwsIHByb3ZpZGVyLCBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8pO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogLy8gTGluayB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBhd2FpdCBsaW5rV2l0aFJlZGlyZWN0KHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCBhZ2FpbiB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICAvLyBBbGxvdyB0aGUgcmVzb2x2ZXIgdG8gZXJyb3IgYmVmb3JlIHBlcnNpc3RpbmcgdGhlIHJlZGlyZWN0IHVzZXJcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovLCBldmVudElkKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHtAbGluayBPQXV0aFByb3ZpZGVyfSB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBzb21lIG90aGVyIHByb3ZpZGVyLlxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGxpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2xpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIC8vIEFsbG93IHRoZSByZXNvbHZlciB0byBlcnJvciBiZWZvcmUgcGVyc2lzdGluZyB0aGUgcmVkaXJlY3QgdXNlclxyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVyLnByb3ZpZGVySWQpO1xyXG4gICAgYXdhaXQgX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwuYXV0aCk7XHJcbiAgICBjb25zdCBldmVudElkID0gYXdhaXQgcHJlcGFyZVVzZXJGb3JSZWRpcmVjdCh1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIHJlc29sdmVySW50ZXJuYWwuX29wZW5SZWRpcmVjdCh1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfSBmcm9tIHRoZSByZWRpcmVjdC1iYXNlZCBzaWduLWluIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHNpZ24taW4gc3VjY2VlZGVkLCByZXR1cm5zIHRoZSBzaWduZWQgaW4gdXNlci4gSWYgc2lnbi1pbiB3YXMgdW5zdWNjZXNzZnVsLCBmYWlscyB3aXRoIGFuXHJcbiAqIGVycm9yLiBJZiBubyByZWRpcmVjdCBvcGVyYXRpb24gd2FzIGNhbGxlZCwgcmV0dXJucyBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH1cclxuICogd2l0aCBhIG51bGwgYHVzZXJgLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gWW91IGNhbiBhZGQgYWRkaXRpb25hbCBzY29wZXMgdG8gdGhlIHByb3ZpZGVyOlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIC8vIEFzIHRoaXMgQVBJIGNhbiBiZSB1c2VkIGZvciBzaWduLWluLCBsaW5raW5nIGFuZCByZWF1dGhlbnRpY2F0aW9uLFxyXG4gKiAvLyBjaGVjayB0aGUgb3BlcmF0aW9uVHlwZSB0byBkZXRlcm1pbmUgd2hhdCB0cmlnZ2VyZWQgdGhpcyByZWRpcmVjdFxyXG4gKiAvLyBvcGVyYXRpb24uXHJcbiAqIGNvbnN0IG9wZXJhdGlvblR5cGUgPSByZXN1bHQub3BlcmF0aW9uVHlwZTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldFJlZGlyZWN0UmVzdWx0KGF1dGgsIHJlc29sdmVyKSB7XHJcbiAgICBhd2FpdCBfY2FzdEF1dGgoYXV0aCkuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIHJldHVybiBfZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIsIGZhbHNlKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXJFeHRlcm4sIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCByZXNvbHZlciA9IF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFJlZGlyZWN0QWN0aW9uKGF1dGhJbnRlcm5hbCwgcmVzb2x2ZXIsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhY3Rpb24uZXhlY3V0ZSgpO1xyXG4gICAgaWYgKHJlc3VsdCAmJiAhYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgZGVsZXRlIHJlc3VsdC51c2VyLl9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9wZXJzaXN0VXNlcklmQ3VycmVudChyZXN1bHQudXNlcik7XHJcbiAgICAgICAgYXdhaXQgYXV0aEludGVybmFsLl9zZXRSZWRpcmVjdFVzZXIobnVsbCwgcmVzb2x2ZXJFeHRlcm4pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXIpIHtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKGAke3VzZXIudWlkfTo6OmApO1xyXG4gICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gZXZlbnRJZDtcclxuICAgIGF3YWl0IHVzZXIuYXV0aC5fc2V0UmVkaXJlY3RVc2VyKHVzZXIpO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyKTtcclxuICAgIHJldHVybiBldmVudElkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZSBhbW91bnQgb2YgdGltZSB0byBzdG9yZSB0aGUgVUlEcyBvZiBzZWVuIGV2ZW50czsgdGhpcyBpc1xyXG4vLyBzZXQgdG8gMTAgbWluIGJ5IGRlZmF1bHRcclxuY29uc3QgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMgPSAxMCAqIDYwICogMTAwMDtcclxuY2xhc3MgQXV0aEV2ZW50TWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0ID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxuICAgIHJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5hZGQoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgIGlmICh0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgJiZcclxuICAgICAgICAgICAgdGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50LCBhdXRoRXZlbnRDb25zdW1lcikpIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kVG9Db25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgICAgICAgICAgdGhpcy5zYXZlRXZlbnRUb0NhY2hlKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCk7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdW5yZWdpc3RlckNvbnN1bWVyKGF1dGhFdmVudENvbnN1bWVyKSB7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZGVsZXRlKGF1dGhFdmVudENvbnN1bWVyKTtcclxuICAgIH1cclxuICAgIG9uRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgZXZlbnQgaGFzIGFscmVhZHkgYmVlbiBoYW5kbGVkXHJcbiAgICAgICAgaWYgKHRoaXMuaGFzRXZlbnRCZWVuSGFuZGxlZChldmVudCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgaGFuZGxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmZvckVhY2goY29uc3VtZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0V2ZW50Rm9yQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKGV2ZW50LCBjb25zdW1lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IHx8ICFpc1JlZGlyZWN0RXZlbnQoZXZlbnQpKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlJ3ZlIGFscmVhZHkgc2VlbiBhIHJlZGlyZWN0IGJlZm9yZSwgb3IgdGhpcyBpcyBhIHBvcHVwIGV2ZW50LFxyXG4gICAgICAgICAgICAvLyBiYWlsIG5vd1xyXG4gICAgICAgICAgICByZXR1cm4gaGFuZGxlZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSB0cnVlO1xyXG4gICAgICAgIC8vIElmIHRoZSByZWRpcmVjdCB3YXNuJ3QgaGFuZGxlZCwgaGFuZyBvbiB0byBpdFxyXG4gICAgICAgIGlmICghaGFuZGxlZCkge1xyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgaGFuZGxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgfVxyXG4gICAgc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmIChldmVudC5lcnJvciAmJiAhaXNOdWxsUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgY29uc3QgY29kZSA9ICgoX2EgPSBldmVudC5lcnJvci5jb2RlKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3BsaXQoJ2F1dGgvJylbMV0pIHx8XHJcbiAgICAgICAgICAgICAgICBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi87XHJcbiAgICAgICAgICAgIGNvbnN1bWVyLm9uRXJyb3IoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgY29kZSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3VtZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICBjb25zdCBldmVudElkTWF0Y2hlcyA9IGNvbnN1bWVyLmV2ZW50SWQgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgKCEhZXZlbnQuZXZlbnRJZCAmJiBldmVudC5ldmVudElkID09PSBjb25zdW1lci5ldmVudElkKTtcclxuICAgICAgICByZXR1cm4gY29uc3VtZXIuZmlsdGVyLmluY2x1ZGVzKGV2ZW50LnR5cGUpICYmIGV2ZW50SWRNYXRjaGVzO1xyXG4gICAgfVxyXG4gICAgaGFzRXZlbnRCZWVuSGFuZGxlZChldmVudCkge1xyXG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID49XHJcbiAgICAgICAgICAgIEVWRU5UX0RVUExJQ0FUSU9OX0NBQ0hFX0RVUkFUSU9OX01TKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmNsZWFyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmNhY2hlZEV2ZW50VWlkcy5oYXMoZXZlbnRVaWQoZXZlbnQpKTtcclxuICAgIH1cclxuICAgIHNhdmVFdmVudFRvQ2FjaGUoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcy5hZGQoZXZlbnRVaWQoZXZlbnQpKTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGV2ZW50VWlkKGUpIHtcclxuICAgIHJldHVybiBbZS50eXBlLCBlLmV2ZW50SWQsIGUuc2Vzc2lvbklkLCBlLnRlbmFudElkXS5maWx0ZXIodiA9PiB2KS5qb2luKCctJyk7XHJcbn1cclxuZnVuY3Rpb24gaXNOdWxsUmVkaXJlY3RFdmVudCh7IHR5cGUsIGVycm9yIH0pIHtcclxuICAgIHJldHVybiAodHlwZSA9PT0gXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLyAmJlxyXG4gICAgICAgIChlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuY29kZSkgPT09IGBhdXRoLyR7XCJuby1hdXRoLWV2ZW50XCIgLyogTk9fQVVUSF9FVkVOVCAqL31gKTtcclxufVxyXG5mdW5jdGlvbiBpc1JlZGlyZWN0RXZlbnQoZXZlbnQpIHtcclxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xyXG4gICAgICAgIGNhc2UgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgIGNhc2UgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICBjYXNlIFwidW5rbm93blwiIC8qIFVOS05PV04gKi86XHJcbiAgICAgICAgICAgIHJldHVybiBpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2dldFByb2plY3RDb25maWcoYXV0aCwgcmVxdWVzdCA9IHt9KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiR0VUXCIgLyogR0VUICovLCBcIi92MS9wcm9qZWN0c1wiIC8qIEdFVF9QUk9KRUNUX0NPTkZJRyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSVBfQUREUkVTU19SRUdFWCA9IC9eXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM30kLztcclxuY29uc3QgSFRUUF9SRUdFWCA9IC9eaHR0cHM/LztcclxuYXN5bmMgZnVuY3Rpb24gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpIHtcclxuICAgIC8vIFNraXAgb3JpZ2luIHZhbGlkYXRpb24gaWYgd2UgYXJlIGluIGFuIGVtdWxhdGVkIGVudmlyb25tZW50XHJcbiAgICBpZiAoYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGF1dGhvcml6ZWREb21haW5zIH0gPSBhd2FpdCBfZ2V0UHJvamVjdENvbmZpZyhhdXRoKTtcclxuICAgIGZvciAoY29uc3QgZG9tYWluIG9mIGF1dGhvcml6ZWREb21haW5zKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoRG9tYWluKGRvbWFpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGVyZSdzIGEgVVJMIGVycm9yOyBqdXN0IGNvbnRpbnVlIHNlYXJjaGluZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEluIHRoZSBvbGQgU0RLLCB0aGlzIGVycm9yIGFsc28gcHJvdmlkZXMgaGVscGZ1bCBtZXNzYWdlcy5cclxuICAgIF9mYWlsKGF1dGgsIFwidW5hdXRob3JpemVkLWRvbWFpblwiIC8qIElOVkFMSURfT1JJR0lOICovKTtcclxufVxyXG5mdW5jdGlvbiBtYXRjaERvbWFpbihleHBlY3RlZCkge1xyXG4gICAgY29uc3QgY3VycmVudFVybCA9IF9nZXRDdXJyZW50VXJsKCk7XHJcbiAgICBjb25zdCB7IHByb3RvY29sLCBob3N0bmFtZSB9ID0gbmV3IFVSTChjdXJyZW50VXJsKTtcclxuICAgIGlmIChleHBlY3RlZC5zdGFydHNXaXRoKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJykpIHtcclxuICAgICAgICBjb25zdCBjZVVybCA9IG5ldyBVUkwoZXhwZWN0ZWQpO1xyXG4gICAgICAgIGlmIChjZVVybC5ob3N0bmFtZSA9PT0gJycgJiYgaG9zdG5hbWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiB3ZSdyZSBub3QgcGFyc2luZyBjaHJvbWUgVVJMcyBwcm9wZXJseVxyXG4gICAgICAgICAgICByZXR1cm4gKHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmXHJcbiAgICAgICAgICAgICAgICBleHBlY3RlZC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpID09PVxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRVcmwucmVwbGFjZSgnY2hyb21lLWV4dGVuc2lvbjovLycsICcnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm90b2NvbCA9PT0gJ2Nocm9tZS1leHRlbnNpb246JyAmJiBjZVVybC5ob3N0bmFtZSA9PT0gaG9zdG5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoIUhUVFBfUkVHRVgudGVzdChwcm90b2NvbCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBpZiAoSVBfQUREUkVTU19SRUdFWC50ZXN0KGV4cGVjdGVkKSkge1xyXG4gICAgICAgIC8vIFRoZSBkb21haW4gaGFzIHRvIGJlIGV4YWN0bHkgZXF1YWwgdG8gdGhlIHBhdHRlcm4sIGFzIGFuIElQIGRvbWFpbiB3aWxsXHJcbiAgICAgICAgLy8gb25seSBjb250YWluIHRoZSBJUCwgbm8gZXh0cmEgY2hhcmFjdGVyLlxyXG4gICAgICAgIHJldHVybiBob3N0bmFtZSA9PT0gZXhwZWN0ZWQ7XHJcbiAgICB9XHJcbiAgICAvLyBEb3RzIGluIHBhdHRlcm4gc2hvdWxkIGJlIGVzY2FwZWQuXHJcbiAgICBjb25zdCBlc2NhcGVkRG9tYWluUGF0dGVybiA9IGV4cGVjdGVkLnJlcGxhY2UoL1xcLi9nLCAnXFxcXC4nKTtcclxuICAgIC8vIE5vbiBpcCBhZGRyZXNzIGRvbWFpbnMuXHJcbiAgICAvLyBkb21haW4uY29tID0gKi5kb21haW4uY29tIE9SIGRvbWFpbi5jb21cclxuICAgIGNvbnN0IHJlID0gbmV3IFJlZ0V4cCgnXiguK1xcXFwuJyArIGVzY2FwZWREb21haW5QYXR0ZXJuICsgJ3wnICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnKSQnLCAnaScpO1xyXG4gICAgcmV0dXJuIHJlLnRlc3QoaG9zdG5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBORVRXT1JLX1RJTUVPVVQgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuLyoqXHJcbiAqIFJlc2V0IHVubGFvZGVkIEdBcGkgbW9kdWxlcy4gSWYgZ2FwaS5sb2FkIGZhaWxzIGR1ZSB0byBhIG5ldHdvcmsgZXJyb3IsXHJcbiAqIGl0IHdpbGwgc3RvcCB3b3JraW5nIGFmdGVyIGEgcmV0cmlhbC4gVGhpcyBpcyBhIGhhY2sgdG8gZml4IHRoaXMgaXNzdWUuXHJcbiAqL1xyXG5mdW5jdGlvbiByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKSB7XHJcbiAgICAvLyBDbGVhciBsYXN0IGZhaWxlZCBnYXBpLmxvYWQgc3RhdGUgdG8gZm9yY2UgbmV4dCBnYXBpLmxvYWQgdG8gZmlyc3RcclxuICAgIC8vIGxvYWQgdGhlIGZhaWxlZCBnYXBpLmlmcmFtZXMgbW9kdWxlLlxyXG4gICAgLy8gR2V0IGdhcGl4LmJlYWNvbiBjb250ZXh0LlxyXG4gICAgY29uc3QgYmVhY29uID0gX3dpbmRvdygpLl9fX2pzbDtcclxuICAgIC8vIEdldCBjdXJyZW50IGhpbnQuXHJcbiAgICBpZiAoYmVhY29uID09PSBudWxsIHx8IGJlYWNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogYmVhY29uLkgpIHtcclxuICAgICAgICAvLyBHZXQgZ2FwaSBoaW50LlxyXG4gICAgICAgIGZvciAoY29uc3QgaGludCBvZiBPYmplY3Qua2V5cyhiZWFjb24uSCkpIHtcclxuICAgICAgICAgICAgLy8gUmVxdWVzdGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBiZWFjb24uSFtoaW50XS5yIHx8IFtdO1xyXG4gICAgICAgICAgICAvLyBMb2FkZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uTCA9IGJlYWNvbi5IW2hpbnRdLkwgfHwgW107XHJcbiAgICAgICAgICAgIC8vIFNldCByZXF1ZXN0ZWQgbW9kdWxlcyB0byBhIGNvcHkgb2YgdGhlIGxvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5yID0gWy4uLmJlYWNvbi5IW2hpbnRdLkxdO1xyXG4gICAgICAgICAgICAvLyBDbGVhciBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgaWYgKGJlYWNvbi5DUCkge1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBiZWFjb24uQ1AubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGZhaWxlZCBwZW5kaW5nIGNhbGxiYWNrcy5cclxuICAgICAgICAgICAgICAgICAgICBiZWFjb24uQ1BbaV0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGxvYWRHYXBpKGF1dGgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2M7XHJcbiAgICAgICAgLy8gRnVuY3Rpb24gdG8gcnVuIHdoZW4gZ2FwaS5sb2FkIGlzIHJlYWR5LlxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRHYXBpSWZyYW1lKCkge1xyXG4gICAgICAgICAgICAvLyBUaGUgZGV2ZWxvcGVyIG1heSBoYXZlIHRyaWVkIHRvIHByZXZpb3VzbHkgcnVuIGdhcGkubG9hZCBhbmQgZmFpbGVkLlxyXG4gICAgICAgICAgICAvLyBSdW4gdGhpcyB0byBmaXggdGhhdC5cclxuICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgIGdhcGkubG9hZCgnZ2FwaS5pZnJhbWVzJywge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9udGltZW91dDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBhYm92ZSByZXNldCBtYXkgYmUgc3VmZmljaWVudCwgYnV0IGhhdmluZyB0aGlzIHJlc2V0IGFmdGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gZmFpbHVyZSBlbnN1cmVzIHRoYXQgaWYgdGhlIGRldmVsb3BlciBjYWxscyBnYXBpLmxvYWQgYWZ0ZXIgdGhlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ubmVjdGlvbiBpcyByZS1lc3RhYmxpc2hlZCBhbmQgYmVmb3JlIGFub3RoZXIgYXR0ZW1wdCB0byBlbWJlZFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpZnJhbWUsIGl0IHdvdWxkIHdvcmsgYW5kIHdvdWxkIG5vdCBiZSBicm9rZW4gYmVjYXVzZSBvZiBvdXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsZWQgYXR0ZW1wdC5cclxuICAgICAgICAgICAgICAgICAgICAvLyBUaW1lb3V0IHdoZW4gZ2FwaS5pZnJhbWVzLklmcmFtZSBub3QgbG9hZGVkLlxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQ6IE5FVFdPUktfVElNRU9VVC5nZXQoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChfYiA9IChfYSA9IF93aW5kb3coKS5nYXBpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaWZyYW1lcykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLklmcmFtZSkge1xyXG4gICAgICAgICAgICAvLyBJZiBnYXBpLmlmcmFtZXMuSWZyYW1lIGF2YWlsYWJsZSwgcmVzb2x2ZS5cclxuICAgICAgICAgICAgcmVzb2x2ZShnYXBpLmlmcmFtZXMuZ2V0Q29udGV4dCgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoISEoKF9jID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5sb2FkKSkge1xyXG4gICAgICAgICAgICAvLyBHYXBpIGxvYWRlciByZWFkeSwgbG9hZCBnYXBpLmlmcmFtZXMuXHJcbiAgICAgICAgICAgIGxvYWRHYXBpSWZyYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBDcmVhdGUgYSBuZXcgaWZyYW1lIGNhbGxiYWNrIHdoZW4gdGhpcyBpcyBjYWxsZWQgc28gYXMgbm90IHRvIG92ZXJ3cml0ZVxyXG4gICAgICAgICAgICAvLyBhbnkgcHJldmlvdXMgZGVmaW5lZCBjYWxsYmFjay4gVGhpcyBoYXBwZW5zIGlmIHRoaXMgbWV0aG9kIGlzIGNhbGxlZFxyXG4gICAgICAgICAgICAvLyBtdWx0aXBsZSB0aW1lcyBpbiBwYXJhbGxlbCBhbmQgY291bGQgcmVzdWx0IGluIHRoZSBsYXRlciBjYWxsYmFja1xyXG4gICAgICAgICAgICAvLyBvdmVyd3JpdGluZyB0aGUgcHJldmlvdXMgb25lLiBUaGlzIHdvdWxkIGVuZCB1cCB3aXRoIGEgaWZyYW1lXHJcbiAgICAgICAgICAgIC8vIHRpbWVvdXQuXHJcbiAgICAgICAgICAgIGNvbnN0IGNiTmFtZSA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgnaWZyYW1lZmNiJyk7XHJcbiAgICAgICAgICAgIC8vIEdBcGkgbG9hZGVyIG5vdCBhdmFpbGFibGUsIGR5bmFtaWNhbGx5IGxvYWQgcGxhdGZvcm0uanMuXHJcbiAgICAgICAgICAgIF93aW5kb3coKVtjYk5hbWVdID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgc2hvdWxkIGJlIHJlYWR5LlxyXG4gICAgICAgICAgICAgICAgaWYgKCEhZ2FwaS5sb2FkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIGZhaWxlZCwgdGhyb3cgZXJyb3IuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIExvYWQgR0FwaSBsb2FkZXIuXHJcbiAgICAgICAgICAgIHJldHVybiBfbG9hZEpTKGBodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanM/b25sb2FkPSR7Y2JOYW1lfWApLmNhdGNoKGUgPT4gcmVqZWN0KGUpKTtcclxuICAgICAgICB9XHJcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXQgY2FjaGVkIHByb21pc2UgdG8gYWxsb3cgZm9yIHJldHJpYWwuXHJcbiAgICAgICAgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxyXG5sZXQgY2FjaGVkR0FwaUxvYWRlciA9IG51bGw7XHJcbmZ1bmN0aW9uIF9sb2FkR2FwaShhdXRoKSB7XHJcbiAgICBjYWNoZWRHQXBpTG9hZGVyID0gY2FjaGVkR0FwaUxvYWRlciB8fCBsb2FkR2FwaShhdXRoKTtcclxuICAgIHJldHVybiBjYWNoZWRHQXBpTG9hZGVyO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQSU5HX1RJTUVPVVQgPSBuZXcgRGVsYXkoNTAwMCwgMTUwMDApO1xyXG5jb25zdCBJRlJBTUVfUEFUSCA9ICdfXy9hdXRoL2lmcmFtZSc7XHJcbmNvbnN0IEVNVUxBVEVEX0lGUkFNRV9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaWZyYW1lJztcclxuY29uc3QgSUZSQU1FX0FUVFJJQlVURVMgPSB7XHJcbiAgICBzdHlsZToge1xyXG4gICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxyXG4gICAgICAgIHRvcDogJy0xMDBweCcsXHJcbiAgICAgICAgd2lkdGg6ICcxcHgnLFxyXG4gICAgICAgIGhlaWdodDogJzFweCdcclxuICAgIH0sXHJcbiAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScsXHJcbiAgICB0YWJpbmRleDogJy0xJ1xyXG59O1xyXG4vLyBNYXAgZnJvbSBhcGlIb3N0IHRvIGVuZHBvaW50IElEIGZvciBwYXNzaW5nIGludG8gaWZyYW1lLiBJbiBjdXJyZW50IFNESywgYXBpSG9zdCBjYW4gYmUgc2V0IHRvXHJcbi8vIGFueXRoaW5nIChub3QgZnJvbSBhIGxpc3Qgb2YgZW5kcG9pbnRzIHdpdGggSURzIGFzIGluIGxlZ2FjeSksIHNvIHRoaXMgaXMgdGhlIGNsb3Nlc3Qgd2UgY2FuIGdldC5cclxuY29uc3QgRUlEX0ZST01fQVBJSE9TVCA9IG5ldyBNYXAoW1xyXG4gICAgW1wiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogQVBJX0hPU1QgKi8sICdwJ10sXHJcbiAgICBbJ3N0YWdpbmctaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAncyddLFxyXG4gICAgWyd0ZXN0LWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tJywgJ3QnXSAvLyB0ZXN0XHJcbl0pO1xyXG5mdW5jdGlvbiBnZXRJZnJhbWVVcmwoYXV0aCkge1xyXG4gICAgY29uc3QgY29uZmlnID0gYXV0aC5jb25maWc7XHJcbiAgICBfYXNzZXJ0KGNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgY29uc3QgdXJsID0gY29uZmlnLmVtdWxhdG9yXHJcbiAgICAgICAgPyBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRFRF9JRlJBTUVfUEFUSClcclxuICAgICAgICA6IGBodHRwczovLyR7YXV0aC5jb25maWcuYXV0aERvbWFpbn0vJHtJRlJBTUVfUEFUSH1gO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT05cclxuICAgIH07XHJcbiAgICBjb25zdCBlaWQgPSBFSURfRlJPTV9BUElIT1NULmdldChhdXRoLmNvbmZpZy5hcGlIb3N0KTtcclxuICAgIGlmIChlaWQpIHtcclxuICAgICAgICBwYXJhbXMuZWlkID0gZWlkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhbWV3b3JrcyA9IGF1dGguX2dldEZyYW1ld29ya3MoKTtcclxuICAgIGlmIChmcmFtZXdvcmtzLmxlbmd0aCkge1xyXG4gICAgICAgIHBhcmFtcy5mdyA9IGZyYW1ld29ya3Muam9pbignLCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0/JHtxdWVyeXN0cmluZyhwYXJhbXMpLnNsaWNlKDEpfWA7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX29wZW5JZnJhbWUoYXV0aCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IF9sb2FkR2FwaShhdXRoKTtcclxuICAgIGNvbnN0IGdhcGkgPSBfd2luZG93KCkuZ2FwaTtcclxuICAgIF9hc3NlcnQoZ2FwaSwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBjb250ZXh0Lm9wZW4oe1xyXG4gICAgICAgIHdoZXJlOiBkb2N1bWVudC5ib2R5LFxyXG4gICAgICAgIHVybDogZ2V0SWZyYW1lVXJsKGF1dGgpLFxyXG4gICAgICAgIG1lc3NhZ2VIYW5kbGVyc0ZpbHRlcjogZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUixcclxuICAgICAgICBhdHRyaWJ1dGVzOiBJRlJBTUVfQVRUUklCVVRFUyxcclxuICAgICAgICBkb250Y2xlYXI6IHRydWVcclxuICAgIH0sIChpZnJhbWUpID0+IG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBhd2FpdCBpZnJhbWUucmVzdHlsZSh7XHJcbiAgICAgICAgICAgIC8vIFByZXZlbnQgaWZyYW1lIGZyb20gY2xvc2luZyBvbiBtb3VzZSBvdXQuXHJcbiAgICAgICAgICAgIHNldEhpZGVPbkxlYXZlOiBmYWxzZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtFcnJvciA9IF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKTtcclxuICAgICAgICAvLyBDb25maXJtIGlmcmFtZSBpcyBjb3JyZWN0bHkgbG9hZGVkLlxyXG4gICAgICAgIC8vIFRvIGZhbGxiYWNrIG9uIGZhaWx1cmUsIHNldCBhIHRpbWVvdXQuXHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yVGltZXIgPSBfd2luZG93KCkuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0sIFBJTkdfVElNRU9VVC5nZXQoKSk7XHJcbiAgICAgICAgLy8gQ2xlYXIgdGltZXIgYW5kIHJlc29sdmUgcGVuZGluZyBpZnJhbWUgcmVhZHkgcHJvbWlzZS5cclxuICAgICAgICBmdW5jdGlvbiBjbGVhclRpbWVyQW5kUmVzb2x2ZSgpIHtcclxuICAgICAgICAgICAgX3dpbmRvdygpLmNsZWFyVGltZW91dChuZXR3b3JrRXJyb3JUaW1lcik7XHJcbiAgICAgICAgICAgIHJlc29sdmUoaWZyYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVGhpcyByZXR1cm5zIGFuIElUaGVuYWJsZS4gSG93ZXZlciB0aGUgcmVqZWN0IHBhcnQgZG9lcyBub3QgY2FsbFxyXG4gICAgICAgIC8vIHdoZW4gdGhlIGlmcmFtZSBpcyBub3QgbG9hZGVkLlxyXG4gICAgICAgIGlmcmFtZS5waW5nKGNsZWFyVGltZXJBbmRSZXNvbHZlKS50aGVuKGNsZWFyVGltZXJBbmRSZXNvbHZlLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXR3b3JrRXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBCQVNFX1BPUFVQX09QVElPTlMgPSB7XHJcbiAgICBsb2NhdGlvbjogJ3llcycsXHJcbiAgICByZXNpemFibGU6ICd5ZXMnLFxyXG4gICAgc3RhdHVzYmFyOiAneWVzJyxcclxuICAgIHRvb2xiYXI6ICdubydcclxufTtcclxuY29uc3QgREVGQVVMVF9XSURUSCA9IDUwMDtcclxuY29uc3QgREVGQVVMVF9IRUlHSFQgPSA2MDA7XHJcbmNvbnN0IFRBUkdFVF9CTEFOSyA9ICdfYmxhbmsnO1xyXG5jb25zdCBGSVJFRk9YX0VNUFRZX1VSTCA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuY2xhc3MgQXV0aFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHdpbmRvdykge1xyXG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xyXG4gICAgICAgIHRoaXMuYXNzb2NpYXRlZEV2ZW50ID0gbnVsbDtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbmRvdykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3cuY2xvc2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9vcGVuKGF1dGgsIHVybCwgbmFtZSwgd2lkdGggPSBERUZBVUxUX1dJRFRILCBoZWlnaHQgPSBERUZBVUxUX0hFSUdIVCkge1xyXG4gICAgY29uc3QgdG9wID0gTWF0aC5tYXgoKHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgLSBoZWlnaHQpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGNvbnN0IGxlZnQgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbFdpZHRoIC0gd2lkdGgpIC8gMiwgMCkudG9TdHJpbmcoKTtcclxuICAgIGxldCB0YXJnZXQgPSAnJztcclxuICAgIGNvbnN0IG9wdGlvbnMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIEJBU0VfUE9QVVBfT1BUSU9OUyksIHsgd2lkdGg6IHdpZHRoLnRvU3RyaW5nKCksIGhlaWdodDogaGVpZ2h0LnRvU3RyaW5nKCksIHRvcCxcclxuICAgICAgICBsZWZ0IH0pO1xyXG4gICAgLy8gQ2hyb21lIGlPUyA3IGFuZCA4IGlzIHJldHVybmluZyBhbiB1bmRlZmluZWQgcG9wdXAgd2luIHdoZW4gdGFyZ2V0IGlzXHJcbiAgICAvLyBzcGVjaWZpZWQsIGV2ZW4gdGhvdWdoIHRoZSBwb3B1cCBpcyBub3QgbmVjZXNzYXJpbHkgYmxvY2tlZC5cclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgaWYgKG5hbWUpIHtcclxuICAgICAgICB0YXJnZXQgPSBfaXNDaHJvbWVJT1ModWEpID8gVEFSR0VUX0JMQU5LIDogbmFtZTtcclxuICAgIH1cclxuICAgIGlmIChfaXNGaXJlZm94KHVhKSkge1xyXG4gICAgICAgIC8vIEZpcmVmb3ggY29tcGxhaW5zIHdoZW4gaW52YWxpZCBVUkxzIGFyZSBwb3BwZWQgb3V0LiBIYWNreSB3YXkgdG8gYnlwYXNzLlxyXG4gICAgICAgIHVybCA9IHVybCB8fCBGSVJFRk9YX0VNUFRZX1VSTDtcclxuICAgICAgICAvLyBGaXJlZm94IGRpc2FibGVzIGJ5IGRlZmF1bHQgc2Nyb2xsaW5nIG9uIHBvcHVwIHdpbmRvd3MsIHdoaWNoIGNhbiBjcmVhdGVcclxuICAgICAgICAvLyBpc3N1ZXMgd2hlbiB0aGUgdXNlciBoYXMgbWFueSBHb29nbGUgYWNjb3VudHMsIGZvciBpbnN0YW5jZS5cclxuICAgICAgICBvcHRpb25zLnNjcm9sbGJhcnMgPSAneWVzJztcclxuICAgIH1cclxuICAgIGNvbnN0IG9wdGlvbnNTdHJpbmcgPSBPYmplY3QuZW50cmllcyhvcHRpb25zKS5yZWR1Y2UoKGFjY3VtLCBba2V5LCB2YWx1ZV0pID0+IGAke2FjY3VtfSR7a2V5fT0ke3ZhbHVlfSxgLCAnJyk7XHJcbiAgICBpZiAoX2lzSU9TU3RhbmRhbG9uZSh1YSkgJiYgdGFyZ2V0ICE9PSAnX3NlbGYnKSB7XHJcbiAgICAgICAgb3BlbkFzTmV3V2luZG93SU9TKHVybCB8fCAnJywgdGFyZ2V0KTtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChudWxsKTtcclxuICAgIH1cclxuICAgIC8vIGFib3V0OmJsYW5rIGdldHRpbmcgc2FuaXRpemVkIGNhdXNpbmcgYnJvd3NlcnMgbGlrZSBJRS9FZGdlIHRvIGRpc3BsYXlcclxuICAgIC8vIGJyaWVmIGVycm9yIG1lc3NhZ2UgYmVmb3JlIHJlZGlyZWN0aW5nIHRvIGhhbmRsZXIuXHJcbiAgICBjb25zdCBuZXdXaW4gPSB3aW5kb3cub3Blbih1cmwgfHwgJycsIHRhcmdldCwgb3B0aW9uc1N0cmluZyk7XHJcbiAgICBfYXNzZXJ0KG5ld1dpbiwgYXV0aCwgXCJwb3B1cC1ibG9ja2VkXCIgLyogUE9QVVBfQkxPQ0tFRCAqLyk7XHJcbiAgICAvLyBGbGFreSBvbiBJRSBlZGdlLCBlbmNhcHN1bGF0ZSB3aXRoIGEgdHJ5IGFuZCBjYXRjaC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbmV3V2luLmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChuZXdXaW4pO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5Bc05ld1dpbmRvd0lPUyh1cmwsIHRhcmdldCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBlbC5ocmVmID0gdXJsO1xyXG4gICAgZWwudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgY29uc3QgY2xpY2sgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudCcpO1xyXG4gICAgY2xpY2suaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAxLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMSwgbnVsbCk7XHJcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGNsaWNrKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVVJMIGZvciBBdXRoZW50aWNhdGlvbiB3aWRnZXQgd2hpY2ggd2lsbCBpbml0aWF0ZSB0aGUgT0F1dGggaGFuZHNoYWtlXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgV0lER0VUX1BBVEggPSAnX18vYXV0aC9oYW5kbGVyJztcclxuLyoqXHJcbiAqIFVSTCBmb3IgZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBFTVVMQVRPUl9XSURHRVRfUEFUSCA9ICdlbXVsYXRvci9hdXRoL2hhbmRsZXInO1xyXG5mdW5jdGlvbiBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCByZWRpcmVjdFVybCwgZXZlbnRJZCwgYWRkaXRpb25hbFBhcmFtcykge1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIE1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgsIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovKTtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICBhcGlLZXk6IGF1dGguY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgYXV0aFR5cGUsXHJcbiAgICAgICAgcmVkaXJlY3RVcmwsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT04sXHJcbiAgICAgICAgZXZlbnRJZFxyXG4gICAgfTtcclxuICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIEZlZGVyYXRlZEF1dGhQcm92aWRlcikge1xyXG4gICAgICAgIHByb3ZpZGVyLnNldERlZmF1bHRMYW5ndWFnZShhdXRoLmxhbmd1YWdlQ29kZSk7XHJcbiAgICAgICAgcGFyYW1zLnByb3ZpZGVySWQgPSBwcm92aWRlci5wcm92aWRlcklkIHx8ICcnO1xyXG4gICAgICAgIGlmICghaXNFbXB0eShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5jdXN0b21QYXJhbWV0ZXJzID0gSlNPTi5zdHJpbmdpZnkocHJvdmlkZXIuZ2V0Q3VzdG9tUGFyYW1ldGVycygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETyBzZXQgYWRkaXRpb25hbFBhcmFtcyBmcm9tIHRoZSBwcm92aWRlciBhcyB3ZWxsP1xyXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGFkZGl0aW9uYWxQYXJhbXMgfHwge30pKSB7XHJcbiAgICAgICAgICAgIHBhcmFtc1trZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgQmFzZU9BdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICBjb25zdCBzY29wZXMgPSBwcm92aWRlci5nZXRTY29wZXMoKS5maWx0ZXIoc2NvcGUgPT4gc2NvcGUgIT09ICcnKTtcclxuICAgICAgICBpZiAoc2NvcGVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcGFyYW1zLnNjb3BlcyA9IHNjb3Blcy5qb2luKCcsJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGF1dGgudGVuYW50SWQpIHtcclxuICAgICAgICBwYXJhbXMudGlkID0gYXV0aC50ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBlaWQgYXMgZW5kaXBvaW50SWRcclxuICAgIC8vIFRPRE86IG1heWJlIHNldCBmdyBhcyBGcmFtZXdvcmtzLmpvaW4oXCIsXCIpXHJcbiAgICBjb25zdCBwYXJhbXNEaWN0ID0gcGFyYW1zO1xyXG4gICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMocGFyYW1zRGljdCkpIHtcclxuICAgICAgICBpZiAocGFyYW1zRGljdFtrZXldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZGVsZXRlIHBhcmFtc0RpY3Rba2V5XTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7Z2V0SGFuZGxlckJhc2UoYXV0aCl9PyR7cXVlcnlzdHJpbmcocGFyYW1zRGljdCkuc2xpY2UoMSl9YDtcclxufVxyXG5mdW5jdGlvbiBnZXRIYW5kbGVyQmFzZSh7IGNvbmZpZyB9KSB7XHJcbiAgICBpZiAoIWNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke2NvbmZpZy5hdXRoRG9tYWlufS8ke1dJREdFVF9QQVRIfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGNvbmZpZywgRU1VTEFUT1JfV0lER0VUX1BBVEgpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgc3BlY2lhbCB3ZWIgc3RvcmFnZSBldmVudFxyXG4gKlxyXG4gKi9cclxuY29uc3QgV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgPSAnd2ViU3RvcmFnZVN1cHBvcnQnO1xyXG5jbGFzcyBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lcyA9IHt9O1xyXG4gICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzID0ge307XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVSZWRpcmVjdEZuID0gX2dldFJlZGlyZWN0UmVzdWx0O1xyXG4gICAgfVxyXG4gICAgLy8gV3JhcHBpbmcgaW4gYXN5bmMgZXZlbiB0aG91Z2ggd2UgZG9uJ3QgYXdhaXQgYW55d2hlcmUgaW4gb3JkZXJcclxuICAgIC8vIHRvIG1ha2Ugc3VyZSBlcnJvcnMgYXJlIHJhaXNlZCBhcyBwcm9taXNlIHJlamVjdGlvbnNcclxuICAgIGFzeW5jIF9vcGVuUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KChfYSA9IHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYW5hZ2VyLCAnX2luaXRpYWxpemUoKSBub3QgY2FsbGVkIGJlZm9yZSBfb3BlblBvcHVwKCknKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKTtcclxuICAgICAgICByZXR1cm4gX29wZW4oYXV0aCwgdXJsLCBfZ2VuZXJhdGVFdmVudElkKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgICAgIF9zZXRXaW5kb3dMb2NhdGlvbihfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKSk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgpID0+IHsgfSk7XHJcbiAgICB9XHJcbiAgICBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgbWFuYWdlciwgcHJvbWlzZSB9ID0gdGhpcy5ldmVudE1hbmFnZXJzW2tleV07XHJcbiAgICAgICAgICAgIGlmIChtYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG1hbmFnZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVidWdBc3NlcnQocHJvbWlzZSwgJ0lmIG1hbmFnZXIgaXMgbm90IHNldCwgcHJvbWlzZSBzaG91bGQgYmUnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLmluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldID0geyBwcm9taXNlIH07XHJcbiAgICAgICAgLy8gSWYgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQsIHRoZSBrZXkgc2hvdWxkIGJlIHJlbW92ZWQgc28gdGhhdCB0aGVcclxuICAgICAgICAvLyBvcGVyYXRpb24gY2FuIGJlIHJldHJpZWQgbGF0ZXIuXHJcbiAgICAgICAgcHJvbWlzZS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIGluaXRBbmRHZXRNYW5hZ2VyKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBpZnJhbWUgPSBhd2FpdCBfb3BlbklmcmFtZShhdXRoKTtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IEF1dGhFdmVudE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgaWZyYW1lLnJlZ2lzdGVyKCdhdXRoRXZlbnQnLCAoaWZyYW1lRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgX2Fzc2VydChpZnJhbWVFdmVudCA9PT0gbnVsbCB8fCBpZnJhbWVFdmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWZyYW1lRXZlbnQuYXV0aEV2ZW50LCBhdXRoLCBcImludmFsaWQtYXV0aC1ldmVudFwiIC8qIElOVkFMSURfQVVUSF9FVkVOVCAqLyk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IENvbnNpZGVyIHNwbGl0dGluZyByZWRpcmVjdCBhbmQgcG9wdXAgZXZlbnRzIGVhcmxpZXIgb25cclxuICAgICAgICAgICAgY29uc3QgaGFuZGxlZCA9IG1hbmFnZXIub25FdmVudChpZnJhbWVFdmVudC5hdXRoRXZlbnQpO1xyXG4gICAgICAgICAgICByZXR1cm4geyBzdGF0dXM6IGhhbmRsZWQgPyBcIkFDS1wiIC8qIEFDSyAqLyA6IFwiRVJST1JcIiAvKiBFUlJPUiAqLyB9O1xyXG4gICAgICAgIH0sIGdhcGkuaWZyYW1lcy5DUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIpO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vyc1thdXRoLl9rZXkoKV0gPSB7IG1hbmFnZXIgfTtcclxuICAgICAgICB0aGlzLmlmcmFtZXNbYXV0aC5fa2V5KCldID0gaWZyYW1lO1xyXG4gICAgICAgIHJldHVybiBtYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYikge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV07XHJcbiAgICAgICAgaWZyYW1lLnNlbmQoV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVksIHsgdHlwZTogV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgfSwgcmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICBjb25zdCBpc1N1cHBvcnRlZCA9IChfYSA9IHJlc3VsdCA9PT0gbnVsbCB8fCByZXN1bHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc3VsdFswXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hW1dFQl9TVE9SQUdFX1NVUFBPUlRfS0VZXTtcclxuICAgICAgICAgICAgaWYgKGlzU3VwcG9ydGVkICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGNiKCEhaXNTdXBwb3J0ZWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0gPSBfdmFsaWRhdGVPcmlnaW4oYXV0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgLy8gTW9iaWxlIGJyb3dzZXJzIGFuZCBTYWZhcmkgbmVlZCB0byBvcHRpbWlzdGljYWxseSBpbml0aWFsaXplXHJcbiAgICAgICAgcmV0dXJuIF9pc01vYmlsZUJyb3dzZXIoKSB8fCBfaXNTYWZhcmkoKSB8fCBfaXNJT1MoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGJyb3dzZXJcclxuICogYmFzZWQgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyID0gQnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcjtcblxuY2xhc3MgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgfVxyXG4gICAgX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHNlc3Npb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZW5yb2xsXCIgLyogRU5ST0xMICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplRW5yb2xsKGF1dGgsIHNlc3Npb24uY3JlZGVudGlhbCwgZGlzcGxheU5hbWUpO1xyXG4gICAgICAgICAgICBjYXNlIFwic2lnbmluXCIgLyogU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maW5hbGl6ZVNpZ25JbihhdXRoLCBzZXNzaW9uLmNyZWRlbnRpYWwpO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgndW5leHBlY3RlZCBNdWx0aUZhY3RvclNlc3Npb25UeXBlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiB7QGluaGVyaXRkb2MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwgZXh0ZW5kcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLyk7XHJcbiAgICAgICAgdGhpcy5jcmVkZW50aWFsID0gY3JlZGVudGlhbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUNyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZmluYWxpemVFbnJvbGwoYXV0aCwgaWRUb2tlbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gZmluYWxpemVFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IHRoaXMuY3JlZGVudGlhbC5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2ZpbmFsaXplU2lnbkluKGF1dGgsIG1mYVBlbmRpbmdDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplU2lnbkluUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbCxcclxuICAgICAgICAgICAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiB0aGlzLmNyZWRlbnRpYWwuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3Ige1xyXG4gICAgY29uc3RydWN0b3IoKSB7IH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gdG8gY29uZmlybSBvd25lcnNoaXAgb2YgdGhlIHBob25lIHNlY29uZCBmYWN0b3IuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBob25lQXV0aENyZWRlbnRpYWwgLSBBIGNyZWRlbnRpYWwgcHJvdmlkZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWx9LlxyXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxyXG4gICAgICoge0BsaW5rIE11bHRpRmFjdG9yUmVzb2x2ZXIucmVzb2x2ZVNpZ25Jbn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzc2VydGlvbihjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsLl9mcm9tQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhlIGlkZW50aWZpZXIgb2YgdGhlIHBob25lIHNlY29uZCBmYWN0b3I6IGBwaG9uZWAuXHJcbiAqL1xyXG5QaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yLkZBQ1RPUl9JRCA9ICdwaG9uZSc7XG5cbnZhciBuYW1lID0gXCJAZmlyZWJhc2UvYXV0aFwiO1xudmFyIHZlcnNpb24gPSBcIjAuMTkuMTFcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQXV0aEludGVyb3Age1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIGdldFVpZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgICAgIGlmICghdGhpcy5hdXRoLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IHRoaXMuYXV0aC5jdXJyZW50VXNlci5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICAgICAgcmV0dXJuIHsgYWNjZXNzVG9rZW4gfTtcclxuICAgIH1cclxuICAgIGFkZEF1dGhUb2tlbkxpc3RlbmVyKGxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnRBdXRoQ29uZmlndXJlZCgpO1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLmhhcyhsaXN0ZW5lcikpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuYXV0aC5vbklkVG9rZW5DaGFuZ2VkKHVzZXIgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGxpc3RlbmVyKCgoX2EgPSB1c2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB8fCBudWxsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzLnNldChsaXN0ZW5lciwgdW5zdWJzY3JpYmUpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgfVxyXG4gICAgcmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmludGVybmFsTGlzdGVuZXJzLmdldChsaXN0ZW5lcik7XHJcbiAgICAgICAgaWYgKCF1bnN1YnNjcmliZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICB1bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZSwgXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2l6ZSA+IDApIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICAgICAgY2FzZSBcIk5vZGVcIiAvKiBOT0RFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ25vZGUnO1xyXG4gICAgICAgIGNhc2UgXCJSZWFjdE5hdGl2ZVwiIC8qIFJFQUNUX05BVElWRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdybic7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICd3ZWJ3b3JrZXInO1xyXG4gICAgICAgIGNhc2UgXCJDb3Jkb3ZhXCIgLyogQ09SRE9WQSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdjb3Jkb3ZhJztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG59XHJcbi8qKiBAaW50ZXJuYWwgKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJBdXRoKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImF1dGhcIiAvKiBBVVRIICovLCAoY29udGFpbmVyLCB7IG9wdGlvbnM6IGRlcHMgfSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKTtcclxuICAgICAgICBjb25zdCB7IGFwaUtleSwgYXV0aERvbWFpbiB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICAgICAgcmV0dXJuICgoYXBwLCBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIpID0+IHtcclxuICAgICAgICAgICAgX2Fzc2VydChhcGlLZXkgJiYgIWFwaUtleS5pbmNsdWRlcygnOicpLCBcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqLywgeyBhcHBOYW1lOiBhcHAubmFtZSB9KTtcclxuICAgICAgICAgICAgLy8gQXV0aCBkb21haW4gaXMgb3B0aW9uYWwgaWYgSWRQIHNpZ24gaW4gaXNuJ3QgYmVpbmcgdXNlZFxyXG4gICAgICAgICAgICBfYXNzZXJ0KCEoYXV0aERvbWFpbiA9PT0gbnVsbCB8fCBhdXRoRG9tYWluID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhdXRoRG9tYWluLmluY2x1ZGVzKCc6JykpLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB7XHJcbiAgICAgICAgICAgICAgICBhcGlLZXksXHJcbiAgICAgICAgICAgICAgICBhdXRoRG9tYWluLFxyXG4gICAgICAgICAgICAgICAgY2xpZW50UGxhdGZvcm0sXHJcbiAgICAgICAgICAgICAgICBhcGlIb3N0OiBcImlkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbVwiIC8qIEFQSV9IT1NUICovLFxyXG4gICAgICAgICAgICAgICAgdG9rZW5BcGlIb3N0OiBcInNlY3VyZXRva2VuLmdvb2dsZWFwaXMuY29tXCIgLyogVE9LRU5fQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgICAgICBhcGlTY2hlbWU6IFwiaHR0cHNcIiAvKiBBUElfU0NIRU1FICovLFxyXG4gICAgICAgICAgICAgICAgc2RrQ2xpZW50VmVyc2lvbjogX2dldENsaWVudFZlcnNpb24oY2xpZW50UGxhdGZvcm0pXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhJbnN0YW5jZSA9IG5ldyBBdXRoSW1wbChhcHAsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciwgY29uZmlnKTtcclxuICAgICAgICAgICAgX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoYXV0aEluc3RhbmNlLCBkZXBzKTtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGhJbnN0YW5jZTtcclxuICAgICAgICB9KShhcHAsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlcik7XHJcbiAgICB9LCBcIlBVQkxJQ1wiIC8qIFBVQkxJQyAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBdXRoIGNhbiBvbmx5IGJlIGluaXRpYWxpemVkIGJ5IGV4cGxpY2l0bHkgY2FsbGluZyBnZXRBdXRoKCkgb3IgaW5pdGlhbGl6ZUF1dGgoKVxyXG4gICAgICAgICAqIEZvciB3aHkgd2UgZG8gdGhpcywgU2VlIGdvL2ZpcmViYXNlLW5leHQtYXV0aC1pbml0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbnRpYXRpb25Nb2RlKFwiRVhQTElDSVRcIiAvKiBFWFBMSUNJVCAqLylcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBCZWNhdXNlIGFsbCBmaXJlYmFzZSBwcm9kdWN0cyB0aGF0IGRlcGVuZCBvbiBhdXRoIGRlcGVuZCBvbiBhdXRoLWludGVybmFsIGRpcmVjdGx5LFxyXG4gICAgICAgICAqIHdlIG5lZWQgdG8gaW5pdGlhbGl6ZSBhdXRoLWludGVybmFsIGFmdGVyIGF1dGggaXMgaW5pdGlhbGl6ZWQgdG8gbWFrZSBpdCBhdmFpbGFibGUgdG8gb3RoZXIgZmlyZWJhc2UgcHJvZHVjdHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLnNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKChjb250YWluZXIsIF9pbnN0YW5jZUlkZW50aWZpZXIsIF9pbnN0YW5jZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGhJbnRlcm5hbFByb3ZpZGVyID0gY29udGFpbmVyLmdldFByb3ZpZGVyKFwiYXV0aC1pbnRlcm5hbFwiIC8qIEFVVEhfSU5URVJOQUwgKi8pO1xyXG4gICAgICAgIGF1dGhJbnRlcm5hbFByb3ZpZGVyLmluaXRpYWxpemUoKTtcclxuICAgIH0pKTtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiYXV0aC1pbnRlcm5hbFwiIC8qIEFVVEhfSU5URVJOQUwgKi8sIGNvbnRhaW5lciA9PiB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IF9jYXN0QXV0aChjb250YWluZXIuZ2V0UHJvdmlkZXIoXCJhdXRoXCIgLyogQVVUSCAqLykuZ2V0SW1tZWRpYXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAoYXV0aCA9PiBuZXcgQXV0aEludGVyb3AoYXV0aCkpKGF1dGgpO1xyXG4gICAgfSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKSk7XHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEF1dGggaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0uXHJcbiAqIElmIG5vIGluc3RhbmNlIGV4aXN0cywgaW5pdGlhbGl6ZXMgYW4gQXV0aCBpbnN0YW5jZSB3aXRoIHBsYXRmb3JtLXNwZWNpZmljIGRlZmF1bHQgZGVwZW5kZW5jaWVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIEZpcmViYXNlIEFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXV0aChhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBpbml0aWFsaXplQXV0aChhcHAsIHtcclxuICAgICAgICBwb3B1cFJlZGlyZWN0UmVzb2x2ZXI6IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIsXHJcbiAgICAgICAgcGVyc2lzdGVuY2U6IFtcclxuICAgICAgICAgICAgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VcclxuICAgICAgICBdXHJcbiAgICB9KTtcclxufVxyXG5yZWdpc3RlckF1dGgoXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLyk7XG5cbmV4cG9ydCB7IHNlbmRQYXNzd29yZFJlc2V0RW1haWwgYXMgJCwgQWN0aW9uQ29kZU9wZXJhdGlvbiBhcyBBLCBwcm9kRXJyb3JNYXAgYXMgQiwgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZIGFzIEMsIGluaXRpYWxpemVBdXRoIGFzIEQsIGNvbm5lY3RBdXRoRW11bGF0b3IgYXMgRSwgRmFjdG9ySWQgYXMgRiwgQXV0aENyZWRlbnRpYWwgYXMgRywgRW1haWxBdXRoQ3JlZGVudGlhbCBhcyBILCBPQXV0aENyZWRlbnRpYWwgYXMgSSwgUGhvbmVBdXRoQ3JlZGVudGlhbCBhcyBKLCBpbk1lbW9yeVBlcnNpc3RlbmNlIGFzIEssIEVtYWlsQXV0aFByb3ZpZGVyIGFzIEwsIEZhY2Vib29rQXV0aFByb3ZpZGVyIGFzIE0sIEdvb2dsZUF1dGhQcm92aWRlciBhcyBOLCBPcGVyYXRpb25UeXBlIGFzIE8sIFBob25lQXV0aFByb3ZpZGVyIGFzIFAsIEdpdGh1YkF1dGhQcm92aWRlciBhcyBRLCBSZWNhcHRjaGFWZXJpZmllciBhcyBSLCBTaWduSW5NZXRob2QgYXMgUywgT0F1dGhQcm92aWRlciBhcyBULCBTQU1MQXV0aFByb3ZpZGVyIGFzIFUsIFR3aXR0ZXJBdXRoUHJvdmlkZXIgYXMgViwgc2lnbkluQW5vbnltb3VzbHkgYXMgVywgc2lnbkluV2l0aENyZWRlbnRpYWwgYXMgWCwgbGlua1dpdGhDcmVkZW50aWFsIGFzIFksIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwgYXMgWiwgc2lnbkluV2l0aEN1c3RvbVRva2VuIGFzIF8sIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UgYXMgYSwgY29uZmlybVBhc3N3b3JkUmVzZXQgYXMgYTAsIGFwcGx5QWN0aW9uQ29kZSBhcyBhMSwgY2hlY2tBY3Rpb25Db2RlIGFzIGEyLCB2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZSBhcyBhMywgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGE0LCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZCBhcyBhNSwgc2VuZFNpZ25JbkxpbmtUb0VtYWlsIGFzIGE2LCBpc1NpZ25JbldpdGhFbWFpbExpbmsgYXMgYTcsIHNpZ25JbldpdGhFbWFpbExpbmsgYXMgYTgsIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsIGFzIGE5LCBfZ2V0UmVkaXJlY3RSZXN1bHQgYXMgYUEsIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMgYXMgYUIsIF9jYXN0QXV0aCBhcyBhQywgVXNlckltcGwgYXMgYUQsIEF1dGhJbXBsIGFzIGFFLCBfZ2V0Q2xpZW50VmVyc2lvbiBhcyBhRiwgX2dlbmVyYXRlRXZlbnRJZCBhcyBhRywgQXV0aFBvcHVwIGFzIGFILCBGZXRjaFByb3ZpZGVyIGFzIGFJLCBTQU1MQXV0aENyZWRlbnRpYWwgYXMgYUosIHNlbmRFbWFpbFZlcmlmaWNhdGlvbiBhcyBhYSwgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwgYXMgYWIsIEFjdGlvbkNvZGVVUkwgYXMgYWMsIHBhcnNlQWN0aW9uQ29kZVVSTCBhcyBhZCwgdXBkYXRlUHJvZmlsZSBhcyBhZSwgdXBkYXRlRW1haWwgYXMgYWYsIHVwZGF0ZVBhc3N3b3JkIGFzIGFnLCBnZXRJZFRva2VuIGFzIGFoLCBnZXRJZFRva2VuUmVzdWx0IGFzIGFpLCB1bmxpbmsgYXMgYWosIGdldEFkZGl0aW9uYWxVc2VySW5mbyBhcyBhaywgcmVsb2FkIGFzIGFsLCBnZXRNdWx0aUZhY3RvclJlc29sdmVyIGFzIGFtLCBtdWx0aUZhY3RvciBhcyBhbiwgX2lzSU9TN09yOCBhcyBhbywgZGVidWdBc3NlcnQgYXMgYXAsIF9pc0lPUyBhcyBhcSwgX2lzQW5kcm9pZCBhcyBhciwgX2ZhaWwgYXMgYXMsIF9nZXRSZWRpcmVjdFVybCBhcyBhdCwgX2dldFByb2plY3RDb25maWcgYXMgYXUsIF9jcmVhdGVFcnJvciBhcyBhdiwgX2Fzc2VydCBhcyBhdywgX2dldEluc3RhbmNlIGFzIGF4LCBfcGVyc2lzdGVuY2VLZXlOYW1lIGFzIGF5LCBBdXRoRXZlbnRNYW5hZ2VyIGFzIGF6LCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBhcyBiLCBzaWduSW5XaXRoUG9wdXAgYXMgYywgbGlua1dpdGhQb3B1cCBhcyBkLCByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCBhcyBlLCBzaWduSW5XaXRoUmVkaXJlY3QgYXMgZiwgbGlua1dpdGhSZWRpcmVjdCBhcyBnLCByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCBhcyBoLCBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIGFzIGksIGdldFJlZGlyZWN0UmVzdWx0IGFzIGosIGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgYXMgaywgbGlua1dpdGhQaG9uZU51bWJlciBhcyBsLCBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yIGFzIG0sIGdldEF1dGggYXMgbiwgUHJvdmlkZXJJZCBhcyBvLCBzZXRQZXJzaXN0ZW5jZSBhcyBwLCBvbklkVG9rZW5DaGFuZ2VkIGFzIHEsIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyIGFzIHIsIHNpZ25JbldpdGhQaG9uZU51bWJlciBhcyBzLCBvbkF1dGhTdGF0ZUNoYW5nZWQgYXMgdCwgdXBkYXRlUGhvbmVOdW1iZXIgYXMgdSwgdXNlRGV2aWNlTGFuZ3VhZ2UgYXMgdiwgdXBkYXRlQ3VycmVudFVzZXIgYXMgdywgc2lnbk91dCBhcyB4LCBkZWxldGVVc2VyIGFzIHksIGRlYnVnRXJyb3JNYXAgYXMgeiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgtNmRlNGNiYjkuanMubWFwXG4iLCJpbXBvcnQgeyBib2R5LCBoZWFkZXIsIGN1cnNvciwgY29yb25hQ2lyY2xlLCBleWVzIH0gZnJvbSAnLi9jdXJzb3JBbmRDb3JvbmEnO1xuXG5jb25zdCBpbnN0cnVjdGlvbnNQVGFnID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luc3RydWN0aW9ucyBwJyk7XG5cbmNvbnN0IHNlY29uZHNGb3JFYWNoU3RhZ2UgPSBbMTEsIDE0LCAxMywgMTgsIDEzLCAxNiwgMjAsIDE4XTtcbi8vIFxuY29uc3QgZmlndXJlc1BlclN0YWdlID0gWzcsIDEwLCAxMCwgMTQsIDEwLCAyMCwgMjAsIDIwXTtcblxuY29uc3QgcEZhaWx1cmUgPSBcInlvdSBmYWlsZWQgYW5kIGEgbmV3IHZhcmlhbnQgaXMgc3ByZWFkaW5nIG5vdywgYnV0IGRvbid0IHdvcnJ5LCB5b3UgY2FuIHRyeSBhZ2FpbiBhbmQgcHJldmVudCBhIHdvcmxkIGNhdGFzdHJvcGhlXCI7XG5jb25zdCBwRmFpbHVyZUFub24gPSBcIllvdSBmYWlsZWQgYW5kIGEgbmV3IHZhcmlhbnQgaXMgc3ByZWFkaW5nIG5vdywgYnV0IGRvbid0IHdvcnJ5LCB5b3UgY2FuIHRyeSBhZ2FpbiBhbmQgcHJldmVudCBhIHdvcmxkIGNhdGFzdHJvcGhlXCI7XG5cbmNvbnN0IHAgPSBbXG5cInZhY2NpbmF0ZSB3b3JsZCdzIHBvcHVsYXRpb24gYW5kIGhlbHAgZmlnaHQgdGhlIGNvcm9uYXZpcnVzIGRpc2Vhc2UuIElmIHlvdSdsbCBmYWlsLCBhIG5ldyB2YXJpYW50IHdpbGwgYXJyaXZlLi4uXCIsXG5cInlvdSBtYWRlIGl0ISBCdXQgdGhlIHBvcHVsYXRpb24gZ3JldyBhbmQgeW91IG5lZWQgdG8gdmFjY2luYXRlIG1vcmUgcGVvcGxlIG5vdyFcIixcblwieW91IG1hZGUgaXQgYWdhaW4hIE5vdyBsZXRzIHNlZSBpZiB5b3UgY2FuIGRvIGl0IGV2ZW4gZmFzdGVyIVwiLFxuXCJncmVhdCBqb2IhIEJ1dCBiYXRzIGFyZSBjYW1taW5nLiBDYW4geW91IHZhY2NpbmF0ZSB0aGVtIHRvbz9cIixcblwieW91IGFyZSBhd2Vzb21lISBOb3cgbGV0cyBzZWUgaWYgeW91IGNhbiBkbyBpdCB3aXRoIHBlb3BsZSB0aGF0IGFyZSBpbiBhIGh1cnJ5IVwiLFxuXCJhbWF6aW5nIHdvcmshIENhbiB5b3UgYWxzbyB2YWNjaW5hdGUgZWFjaCBwZXJzb24gaW4gb25seSBvbmUgc2Vjb25kP1wiLFxuXCJ0aGUgQ29yb25hIGNhbid0IGJlYXQgeW91ISBMZXRzIHRyeSBpdCBub3cgd2l0aCB0aGUgYmF0cyBhbmQgZmFzdGVyIVwiLFxuXCJ5b3UncmUgYWxtb3N0IGF0IHRoZSBlbmQgb2YgeW91ciBqb3VybnksIG9ubHkgb25lIHN0YWdlIHRvIGdvIVwiLFxuXCJ5b3UgZGlkIGl0ISBZb3Ugc2F2ZWQgaHVtYW5pdHkhIFlvdSBlbmRlZCB0aGUgY29yb25hdmlydXMgZGlzZWFzZSBhbmQgbWFkZSBYWFggcG9pbnQuXCJcbl1cblxuY29uc3QgcEFub24gPSBbXG4gICAgXCJWYWNjaW5hdGUgd29ybGQncyBwb3B1bGF0aW9uIGFuZCBoZWxwIGZpZ2h0IHRoZSBjb3JvbmF2aXJ1cyBkaXNlYXNlLiBJZiB5b3UnbGwgZmFpbCwgYSBuZXcgdmFyaWFudCB3aWxsIGFycml2ZS4uLlwiLFxuICAgIFwiWW91IG1hZGUgaXQhIEJ1dCB0aGUgcG9wdWxhdGlvbiBncmV3IGFuZCB5b3UgbmVlZCB0byB2YWNjaW5hdGUgbW9yZSBwZW9wbGUgbm93IVwiLFxuICAgIFwiWW91IG1hZGUgaXQgYWdhaW4hIE5vdyBsZXRzIHNlZSBpZiB5b3UgY2FuIGRvIGl0IGV2ZW4gZmFzdGVyIVwiLFxuICAgIFwiR3JlYXQgam9iISBCdXQgYmF0cyBhcmUgY2FtbWluZy4gQ2FuIHlvdSB2YWNjaW5hdGUgdGhlbSB0b28/XCIsXG4gICAgXCJZb3UgYXJlIGF3ZXNvbWUhIE5vdyBsZXRzIHNlZSBpZiB5b3UgY2FuIGRvIGl0IHdpdGggcGVvcGxlIHRoYXQgYXJlIGluIGEgaHVycnkhXCIsXG4gICAgXCJBbWF6aW5nIHdvcmshIENhbiB5b3UgYWxzbyB2YWNjaW5hdGUgZWFjaCBwZXJzb24gaW4gb25seSBvbmUgc2Vjb25kP1wiLFxuICAgIFwiVGhlIENvcm9uYSBjYW4ndCBiZWF0IHlvdSEgTGV0cyB0cnkgaXQgbm93IHdpdGggdGhlIGJhdHMhXCIsXG4gICAgXCJZb3UncmUgYWxtb3N0IGF0IHRoZSBlbmQgb2YgeW91ciBqb3VybnksIG9ubHkgb25lIHN0YWdlIHRvIGdvIVwiLFxuICAgIFwiWW91IGRpZCBpdCEgWW91IHNhdmVkIGh1bWFuaXR5ISBZb3UgZW5kZWQgdGhlIGNvcm9uYXZpcnVzIGRpc2Vhc2UgYW5kIG1hZGUgWFhYIHBvaW50LlwiXG5dXG5cbmV4cG9ydCB7IGluc3RydWN0aW9uc1BUYWcsIHNlY29uZHNGb3JFYWNoU3RhZ2UsIGZpZ3VyZXNQZXJTdGFnZSwgcEZhaWx1cmUsIHBGYWlsdXJlQW5vbiwgcCwgcEFub24gfTsiLCJjb25zdCBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5zdHJ1Y3Rpb25zJyk7XG5jb25zdCBtZWRhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtZWRhbCcpO1xuY29uc3QgbWVkYWxTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lZGFsIHNwYW4nKTtcbmNvbnN0IHNhdmVkTmlja25hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpOy8vbmFtZSB0aGF0IHdhcyBzYXZlZCBmcm9tIGxhc3QgZ2FtZVxuXG4vL1B1dHRpbmcgdGhlIG5hbWUgZnJvbSB0aGUgbG9jYWxTdG9yYWdlIGluIHRoZSBuaWNrbmFtZUZvcm0gKFRoZSBmb3JtIHRoYXQgYXBwZWFycyBhdCB0aGUgaG9tZXBhZ2UpXG5pZigoc2F2ZWROaWNrbmFtZSAhPSAnJykgJiYgKHNhdmVkTmlja25hbWUgIT0gbnVsbCkpIHtcbiAgICBkb2N1bWVudC5mb3Jtcy5uaWNrbmFtZUZvcm0ubmlja25hbWUuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgbG9jYWxTdG9yYWdlLm5hbWUpO1xuICAgIGRvY3VtZW50LmZvcm1zLm5pY2tuYW1lRm9ybS5uaWNrbmFtZS5zdHlsZS5jb2xvciA9IFwiIzU1NTU1NVwiO1xuICAgIC8vYW5kIGlmIGJlc3RTY29yZSBleGlzdHMsIEknbGwgbWFrZSBpdCBhcHBlYXIgd2l0aCB0aGUgbWVkYWwgYXQgdGhlIHRvcCBvZiB0aGUgc2NyZWVuXG4gICAgaWYgKChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJykgIT0gbnVsbCkgJiYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKSAhPSAnJykgJiYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKSAhPSAwKSkge1xuICAgICAgICBtZWRhbFNwYW4udGV4dENvbnRlbnQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJyk7XG4gICAgICAgIG1lZGFsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH0gXG4gICAgXG59XG5cblxuZXhwb3J0IHsgaW5zdHJ1Y3Rpb25zLCBtZWRhbCwgbWVkYWxTcGFuLCBzYXZlZE5pY2tuYW1lIH07IiwiaW1wb3J0IHsgaW5pdGlhbGl6ZUFwcCB9IGZyb20gXCJmaXJlYmFzZS9hcHBcIjtcblxuaW1wb3J0IHtcbiAgICBnZXRGaXJlc3RvcmUsIGNvbGxlY3Rpb24sIGdldERvY3MsIG9uU25hcHNob3QsIHNldERvYywgYWRkRG9jLCBkZWxldGVEb2MsIGRvYywgXG4gICAgcXVlcnksIHdoZXJlLCBvcmRlckJ5LCBzZXJ2ZXJUaW1lc3RhbXAsIGdldERvYywgdXBkYXRlRG9jXG59IGZyb20gXCJmaXJlYmFzZS9maXJlc3RvcmVcIjtcblxuaW1wb3J0IHtcbiAgICBnZXRBdXRoLCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHVwZGF0ZVByb2ZpbGUsIHNpZ25PdXQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsLCBvbkF1dGhTdGF0ZUNoYW5nZWRcbn0gZnJvbSBcImZpcmViYXNlL2F1dGhcIjtcblxuaW1wb3J0IHsgaW5zdHJ1Y3Rpb25zUFRhZywgc2Vjb25kc0ZvckVhY2hTdGFnZSwgZmlndXJlc1BlclN0YWdlLCBwRmFpbHVyZSwgcEZhaWx1cmVBbm9uLCBwLCBwQW5vbiB9IGZyb20gJy4vc3RvcnlMaW5lJztcblxuaW1wb3J0IHsgaW5zdHJ1Y3Rpb25zLCBtZWRhbCwgbWVkYWxTcGFuLCBzYXZlZE5pY2tuYW1lIH0gZnJvbSAnLi9sb2NhbFN0b3JhZ2UnO1xuXG5cbmNvbnN0IGZpcmViYXNlQ29uZmlnID0ge1xuICAgIGFwaUtleTogXCJBSXphU3lBUThid1YyTUNwbnN5VGFzWFpMS25zM29zNWRrUjFkZThcIixcbiAgICBhdXRoRG9tYWluOiBcImNvcm9uYS1nYW1lLWZiZjZkLmZpcmViYXNlYXBwLmNvbVwiLFxuICAgIHByb2plY3RJZDogXCJjb3JvbmEtZ2FtZS1mYmY2ZFwiLFxuICAgIHN0b3JhZ2VCdWNrZXQ6IFwiY29yb25hLWdhbWUtZmJmNmQuYXBwc3BvdC5jb21cIixcbiAgICBtZXNzYWdpbmdTZW5kZXJJZDogXCIyNjA3MjM1MDE5OFwiLFxuICAgIGFwcElkOiBcIjE6MjYwNzIzNTAxOTg6d2ViOjA5ZTljYzg2ZmNmNTJlZGExYzFiZDdcIlxufTtcblxuY29uc3QgYXBwID0gaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7XG5jb25zdCBhdXRoID0gZ2V0QXV0aCgpO1xuY29uc3QgZGF0YWJhc2UgPSBnZXRGaXJlc3RvcmUoKTtcbmNvbnN0IGNvbGxlY3Rpb25SZWYgPSBjb2xsZWN0aW9uKGRhdGFiYXNlLCAnbmlja25hbWVzQ29sbGVjdGlvbicpO1xuXG5cbmxldCBjdXJyZW50U3RhZ2UgPSAwO1xuLy9JIGNhbid0IGltcG9ydCBcImxldCBjdXJyZW50U3RhZ2UgPSAwXCIgYmVjYXVzZSBJIGNhbiBpbXBvcnQgb25seSBjb25zdCB2YXJpYWJsZXMsXG4vL3NvIEkgaW1wb3J0IHRoZSBmdW5jdGlvbiB1c2Vyc0N1cnJlbnRTdGFnZSwgd2hpY2ggd2lsbCBsZXQgc2lnbkluQW5kUmVnaXN0ZXJGb3JtLmpzIGtub3dcbi8vaW4gd2hpY2ggc3RhZ2Ugd2UgYXJlIG5vdyAoaXQgd2lsbCBiZSBjYWxsZWQgaW4gZXZlcnkgc3RhZ2UgY2hhbmdlIGZyb20gc3RhcnRHYW1lLmpzKVxuY29uc3QgdXNlcnNDdXJyZW50U3RhZ2UgPSAoc3RhZ2UpID0+IGN1cnJlbnRTdGFnZSA9IHN0YWdlOyBcblxuY29uc3QgcmVnaXN0ZXJCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3JlZ2lzdGVyXCIpO1xuY29uc3QgcmVnaXN0ZXJGb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNyZWdpc3RlckZvcm1Db250YWluZXJcIik7XG5jb25zdCByZWdpc3RlckZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3JlZ2lzdGVyRm9ybVwiKTtcbmNvbnN0IHJlZ2lzdGVyRm9ybUlucHV0RmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3JlZ2lzdGVyRm9ybUNvbnRhaW5lciAjcmVnaXN0ZXJGb3JtIGlucHV0Jyk7XG5jb25zdCByZWdpc3RlckZvcm1QRmllbGRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI3JlZ2lzdGVyRm9ybUNvbnRhaW5lciAjcmVnaXN0ZXJGb3JtIHAnKTtcbmNvbnN0IHJlZ2lzdGVyTGFzdE5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVnaXN0ZXJGb3JtQ29udGFpbmVyICNyZWdpc3RlckZvcm0gI2xhc3ROYW1lJyk7XG5jb25zdCByZWdpc3RlckZpcnN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZWdpc3RlckZvcm1Db250YWluZXIgI3JlZ2lzdGVyRm9ybSAjZmlyc3ROYW1lJyk7XG5jb25zdCBsYXN0TmFtZVAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcmVnaXN0ZXJGb3JtQ29udGFpbmVyICNyZWdpc3RlckZvcm0gI2xhc3ROYW1lUCcpO1xuY29uc3QgZmlyc3ROYW1lUCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZWdpc3RlckZvcm1Db250YWluZXIgI3JlZ2lzdGVyRm9ybSAjZmlyc3ROYW1lUCcpO1xuY29uc3Qgc2lnbkluQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpZ25JbicpO1xuY29uc3Qgc2lnbkluRm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWduSW5Gb3JtQ29udGFpbmVyJyk7XG5jb25zdCBzaWduSW5Gb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpZ25JbkZvcm0nKTtcbmNvbnN0IGNsb3NlWCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIueFwiKTsvL3RoZSBYIGZvciBzaWduSW5Gb3JtQ29udGFpbmVyIGFuZCByZWdpc3RlckZvcm1Db250YWluZXJcbmNvbnN0IGluc3RydWN0aW9uc1AgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5zdHJ1Y3Rpb25zIHAnKTtcbmNvbnN0IG5pY2tuYW1lRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0cnVjdGlvbnMgZm9ybScpO1xuY29uc3Qgbmlja25hbWVGb3JtTGFiZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5zdHJ1Y3Rpb25zIGZvcm0gbGFiZWwnKTtcbmNvbnN0IG5pY2tuYW1lRm9ybVRleHRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0cnVjdGlvbnMgZm9ybSAjbmlja25hbWUnKTtcbmNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0cnVjdGlvbnMgZm9ybSAjc3RhcnRCdXR0b24nKTtcbmNvbnN0IHNpZ25PdXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2lnbk91dCcpO1xuY29uc3QgaG91cmdsYXNzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2hvdXJnbGFzcycpO1xuY29uc3QgZm9yZ290UGFzc3dvcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2lnbkluRm9ybUNvbnRhaW5lciAjc2lnbkluRm9ybSBwJyk7IFxuY29uc3QgZm9yZ290Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3Jnb3RDb250YWluZXJcIik7XG5jb25zdCBmb3Jnb3RGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNmb3Jnb3RDb250YWluZXIgI2ZvcmdvdEZvcm1cIik7XG5jb25zdCBjbG9zZVgyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi54MlwiKTsgLy90aGUgWCBmb3IgZm9yZ290Q29udGFpbmVyXG5jb25zdCBiYWNrVG9HYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2JhY2tUb0dhbWUnKTtcbmNvbnN0IGVtYWlsU2VudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbWFpbFNlbnQnKTtcbmNvbnN0IGVtYWlsU2VudFAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZW1haWxTZW50IHAnKTtcbmNvbnN0IHF1aXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcXVpdCcpO1xuXG5jb25zdCByZWdpc3RlckJ1dHRvbkV2ZW50ID0gKCkgPT4ge1xuICAgIHJlZ2lzdGVyRm9ybUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBjbG9zZVguc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG59XG5cbnJlZ2lzdGVyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZWdpc3RlckJ1dHRvbkV2ZW50KTtcblxuY29uc3Qgc2lnbkluQnV0dG9uRXZlbnQgPSAoKSA9PiB7XG4gICAgc2lnbkluRm9ybUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBjbG9zZVguc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG59XG5cbnNpZ25JbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2lnbkluQnV0dG9uRXZlbnQpO1xuXG5cbmNsb3NlWC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHNpZ25JbkZvcm1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBzaWduSW5Gb3JtLnJlc2V0KCk7IC8vY2xlYW5pbmcgdGhlIGZvcm1cbiAgICByZWdpc3RlckZvcm1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICByZWdpc3RlckZvcm0ucmVzZXQoKTsgLy9jbGVhbmluZyB0aGUgZm9ybVxuICAgIGNsb3NlWC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGJhY2tUb0dhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAvL2NsZWFuaW5nIHRoZSBiYWNrZ3JvdW5kIHJlZCBjb2xvciBvZiB0aGUgcmVnaXN0ZXJGb3JtSW5wdXRGaWVsZHMgKGlmIHRoZSB1c2VyIHR5cGVkIGFuIGVycm9yKVxuICAgIHJlZ2lzdGVyRm9ybUlucHV0RmllbGRzLmZvckVhY2goaW5wdXRGaWVsZCA9PiB7XG4gICAgICAgIGlucHV0RmllbGQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xuICAgIH0pO1xuICAgIC8vY2xlYW5pbmcgdGhlIHJlZCBjb2xvciA8cD4gdGFnIG9mIHRoZSByZWdpc3RlckZvcm1JbnB1dEZpZWxkcyAoaWYgdGhlIHVzZXIgdHlwZWQgYW4gZXJyb3IpXG4gICAgcmVnaXN0ZXJGb3JtUEZpZWxkcy5mb3JFYWNoKHBGaWVsZCA9PiB7XG4gICAgICAgIHBGaWVsZC5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgfSk7XG59KTtcblxucXVpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBsb2NhdGlvbi5yZWxvYWQoKVxufSk7XG4gICAgXG4vL3RoZSByZWdleCBvZiBldmVyeSByZWdpc3RlckZvcm0gaW5wdXQgZmllbGRcbmNvbnN0IHJlZyA9IHtcbiAgICBmaXJzdE5hbWU6L15bYS16QS1aXSsoKCggLSApfCggLSl8KC0gKXwtfCApP1thLXpBLVpdKykqJC8sXG4gICAgbGFzdE5hbWU6L15bYS16QS1aXSsoKCggLSApfCggLSl8KC0gKXwtfCApP1thLXpBLVpdKykqJC8sXG4gICAgbmlja25hbWVSZWdpc3RlcmVkVXNlcjovXlthLXpBLVowLTldKyggPyhffC18XFwuKT8gP1thLXpBLVowLTldKykqJC8sXG4gICAgZW1haWw6L14oW1xcd1xcZFxcLi1dKylAKFtcXHdcXGQtXSspXFwuKFthLXpBLVpdezIsMTJ9KShcXC5bYS16QS1aXXsyLDh9KT8kLyxcbiAgICBwYXNzd29yZDovXltcXHdcXGQtQFxcLl17OCwyMH0kL1xufTtcblxuXG5cbi8vYWRkaW5nIHJlZCBiYWNrZ3JvdW5kIGFuZCByZWQgdGV4dCBmb3IgZXJyb3JzIGluIHJlZ2lzdGVyIGZvcm1cbnJlZ2lzdGVyRm9ybUlucHV0RmllbGRzLmZvckVhY2goaW5wdXRGaWVsZCA9PiB7XG5cbiAgICBjb25zdCBpZElucHV0ID0gaW5wdXRGaWVsZC5nZXRBdHRyaWJ1dGUoJ2lkJyk7IC8vZmluZGluZyB0aGUgaWQgb2YgdGhlIGlucHV0IFxuXG4gICAgaW5wdXRGaWVsZC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgZSA9PiB7XG5cbiAgICAgICAgaWYgKGlucHV0RmllbGQuZ2V0QXR0cmlidXRlKCdpZCcpICE9PSAnc3VibWl0UmVnaXN0ZXJGb3JtJykge1xuICAgICAgICAgICAgLy93ZSB3aWxsIGNoZWNrIGlmIHRoZSB2YWx1ZSB0aGF0IHRoZSB1c2VyIGVudGVyZWQgbWF0Y2ggdGhlIGZpZWxkcycgcmVnZXgsIHdpdGggdGVzdCgpIG1ldGhvZC5cbiAgICAgICAgICAgIC8vZmlyc3Qgd2Ugd2lsbCBzYXkgd2hhdCB3aWxsIGhhcHBlbmVkIGlmIHRoZXJlIGlzbid0IGEgbWF0Y2hcbiAgICAgICAgICAgIGlmKHJlZ1tlLnRhcmdldC5uYW1lXS50ZXN0KGUudGFyZ2V0LnZhbHVlKSA9PSBmYWxzZSkgeyAvL2UudGFyZ2V0Lm5hbWUgaXMgdGhlIG5hbWUgb2YgdGhlIGlucHV0IGZpZWxkLiBlLnRhcmdldC52YWx1ZSBpcyB0aGUgdGV4dCB0aGUgdXNlciBlbnRlcmVkXG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlICE9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGlucHV0RmllbGQuY2xhc3NMaXN0LmFkZCgnaW52YWxpZCcpOyAvL3RoZSBpbnZhbGlkIGNsYXNzIG1ha2UgdGhlIGJhY2tncm91bmQgb2YgdGhlIGlucHV0IHJlZFxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy9ub3cgd2Ugd2lsbCBzYXkgd2hhdCB0byBkbyB3aXRoIHRoZSA8cD4gdGFnIHRoYXQgZml0cyB0aGUgaW5wdXRcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJGb3JtUEZpZWxkcy5mb3JFYWNoKHBGaWVsZCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZigoaW5wdXRGaWVsZC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PSAnZmlyc3ROYW1lJyB8fCBpbnB1dEZpZWxkLmdldEF0dHJpYnV0ZSgnbmFtZScpID09ICdsYXN0TmFtZScpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAoKHJlZ2lzdGVyTGFzdE5hbWUuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnZhbGlkJykgPT0gdHJ1ZSkgJiYgKHJlZ2lzdGVyRmlyc3ROYW1lLmNsYXNzTGlzdC5jb250YWlucygnaW52YWxpZCcpID09IHRydWUpKSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZFAgPSBwRmllbGQuZ2V0QXR0cmlidXRlKCdpZCcpOy8vbG9va2luZyBmb3IgdGhlIGlkIG9mIHRoZSA8cD4gdGFnc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZFAgPT0gKGlkSW5wdXQgKyAnUCcpKSB7ICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBGaWVsZC5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vaWYgdGhlIHZhbHVlIHRoYXQgdGhlIHVzZXIgZW50ZXJlZCBtYXRjaCB0aGUgcmVnZXhcbiAgICAgICAgICAgICAgICBpbnB1dEZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcblxuICAgICAgICAgICAgICAgIHJlZ2lzdGVyRm9ybVBGaWVsZHMuZm9yRWFjaChwRmllbGQgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKChpbnB1dEZpZWxkLmdldEF0dHJpYnV0ZSgnbmFtZScpID09ICdmaXJzdE5hbWUnIHx8IGlucHV0RmllbGQuZ2V0QXR0cmlidXRlKCduYW1lJykgPT0gJ2xhc3ROYW1lJykgJiZcbiAgICAgICAgICAgICAgICAgICAgKChyZWdpc3Rlckxhc3ROYW1lLmNsYXNzTGlzdC5jb250YWlucygnaW52YWxpZCcpID09IHRydWUpIHx8IChyZWdpc3RlckZpcnN0TmFtZS5jbGFzc0xpc3QuY29udGFpbnMoJ2ludmFsaWQnKSA9PSB0cnVlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCcnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICgoaW5wdXRGaWVsZC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PSAnZmlyc3ROYW1lJyB8fCBpbnB1dEZpZWxkLmdldEF0dHJpYnV0ZSgnbmFtZScpID09ICdsYXN0TmFtZScpICYmXG4gICAgICAgICAgICAgICAgICAgICgocmVnaXN0ZXJMYXN0TmFtZS5jbGFzc0xpc3QuY29udGFpbnMoJ2ludmFsaWQnKSA9PSBmYWxzZSkgJiYgKHJlZ2lzdGVyRmlyc3ROYW1lLmNsYXNzTGlzdC5jb250YWlucygnaW52YWxpZCcpID09IGZhbHNlKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhc3ROYW1lUC5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaXJzdE5hbWVQLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkUCA9IHBGaWVsZC5nZXRBdHRyaWJ1dGUoJ2lkJyk7Ly9sb29raW5nIGZvciB0aGUgaWQgb2YgdGhlIDxwPiB0YWdzXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaWRQID09IChpZElucHV0ICsgJ1AnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBGaWVsZC5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9IFxuICAgICAgICBcbiAgICB9KTtcbn0pO1xuXG5cblxucmVnaXN0ZXJGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBcbiAgICAvL2EgZnVuY3Rpb24gdGhhdCB3aWxsIHJldHVybiB0cnVlIGlmIHRoZSBpbnB1dHMgaGFzICdpbnZhbGlkJyBjbGFzc1xuICAgIC8vYWZ0ZXJ3YXJkcyBpdCB3aWxsIGNoZWNrIGlmIHNvbWUgb2YgdGhlIGZvcm0ncyA8cD4gdGFncyBoYXMgJ2ludmFsaWQnIGNsYXNzXG4gICAgY29uc3QgY2xhc3NMaXN0Q2hlY2sgPSAoZWxlbWVudCkgPT4ge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoJ2ludmFsaWQnKTtcbiAgICB9XG5cbiAgICAvL3NvbWUoKSBtZXRob2Qgd29ya3Mgb24gYXJyYXkgb3IgTm9kZUxpc3QsIGJ1dCByZWdpc3RlckZvcm1JbnB1dEZpZWxkcyBhbmQgcmVnaXN0ZXJGb3JtUEZpZWxkc1xuICAgIC8vYXJlIEhUTUwgQ29sbGVjdGlvbiwgc28gZmlyc3QgaSdtIGNoYW5naW5nIHRoZW0gdG8gYW4gYXJyYXkgYW5kIHRoZW4gSSBhZGQgc29tZSgpIG1ldGhvZCBcbiAgICBpZigoQXJyYXkuZnJvbShyZWdpc3RlckZvcm1JbnB1dEZpZWxkcykuc29tZShjbGFzc0xpc3RDaGVjaykpIHx8IChBcnJheS5mcm9tKHJlZ2lzdGVyRm9ybVBGaWVsZHMpLnNvbWUoY2xhc3NMaXN0Q2hlY2spKSl7IC8vY2hlY2tpbmcgaWYgc29tZSBvZiB0aGUgaW5wdXQgZmllbGRzIGNvbnRhaW4gJ2ludmFsaWQnIGNsYXNzXG4gICAgICAgIGNvbnNvbGUubG9nKCdkbyBub3RoaW5nJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjb25zdCBlbWFpbCA9IHJlZ2lzdGVyRm9ybS5lbWFpbC52YWx1ZTtcbiAgICAgICAgY29uc3QgcGFzc3dvcmQgPSByZWdpc3RlckZvcm0ucGFzc3dvcmQudmFsdWU7XG4gICAgICAgIGNvbnN0IHJlZ2lzdGVyZWROaWNrbmFtZSA9IHJlZ2lzdGVyRm9ybS5uaWNrbmFtZVJlZ2lzdGVyZWRVc2VyLnZhbHVlO1xuICAgICAgICBjb25zdCBkb2NSZWYgPSBkb2MoZGF0YWJhc2UsICduaWNrbmFtZXNDb2xsZWN0aW9uJywgcmVnaXN0ZXJlZE5pY2tuYW1lKTtcblxuXG4gICAgICAgIC8vV2Ugd2FuJ3QgdGhlIE5pY2tuYW1lIHRvIGJlIHVuaXF1ZSwgc28gd2UnbGwgdXNlIGdldERvYyBpbiBvcmRlciB0byBjaGVjayBpZiB0aGVcbiAgICAgICAgLy9uaWNrbmFtZXNDb2xsZWN0aW9uIGFscmVhZHkgaGFzIHRoZSByZWdpc3RlcmVkTmlja25hbWUgaW4gaXRcbiAgICAgICAgZ2V0RG9jKGRvY1JlZikgXG4gICAgICAgICAgICAudGhlbigoZmlyZURvYykgPT4geyAvL2ZpcmVEb2MgaXMgdGhlIG5hbWUgdGhhdCBJIGdhdmUgdG8gdGhlIGRvYywgYmVjYXVzZSBJIGRpZG4ndCB3YW50IHRvIGNvbmZ1c2UgdGhlIGJyb3dzZXIgd2l0aCB0aGUgZG9jIGZ1bmN0aW9uICh0aGF0IGJlbG9uZ3MgdG8gZmlyZWJhc2UpXG4gICAgICAgICAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgaWYgKGZpcmVEb2MuZGF0YSgpID09IG51bGwpIHsgLy9pdCBtZWFucyB0aGF0IHRoZXJlIGlzbid0IGFueSB1c2VyIHdpdGggdGhpcyBOaWNrbmFtZVxuICAgICAgICAgICAgICAgICAgICAvL3NvIHdlJ2xsIGNvbnRpbnVlIHdpdGggdGhlIHJlZ2lzdHJhdGlvbiBvZiB0aGUgbmV3IHVzZXI6XG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpLy9maXJlYmFzZSBtZXRob2RcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKChjcmVkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cgKCcgdXNlciByZWdpc3RlcmVkOiAnLCBjcmVkLnVzZXIpOy8vbmV3IHVzZXIncyBpbmZvKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Njb3JlJywgMCk7Ly9hZGRpbmcgc2NvcmUgdG8gbG9jYWwgc3RvcmFnZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgcmVnaXN0ZXJlZE5pY2tuYW1lKTsvL2FkZGluZyB0aGUgcmVnaXN0ZXJlZE5pY2tuYW1lIHRvIHRoZSBsb2NhbCBzdG9yYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2Jlc3RTY29yZScsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdzY29yZScsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdXBkYXRlUHJvZmlsZShhdXRoLmN1cnJlbnRVc2VyLCB7IGRpc3BsYXlOYW1lOiByZWdpc3RlcmVkTmlja25hbWUgfSkpIC8vdXBkYXRlUHJvZmlsZSBpcyBhIGZpcmViYXNlIG1ldGhvZCwgd2hpY2ggY3JlYXRlcyB0aGUgdXNlcidzIGRpc3BsYXlOYW1lLiBPbmx5IFwicmVnaXN0ZXJlZE5pY2tuYW1lXCIgaXMgYSB2YXJpZW50IHRoYXQgSSBjcmVhdGVkLiBcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5mb3Jtcy5uaWNrbmFtZUZvcm0ubmlja25hbWUuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSk7Ly9JIGRlZmluZWQgdGhhdCwgc28gdGhlcmUgd29uJ3QgYmUgYSBtaXN0YWtlIHdoZW4gdGhlIHVzZXIgd2lsbCBzdGFydCBwbGF5aW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cgKCduaWNrbmFtZTogJyArIGF1dGguY3VycmVudFVzZXIuZGlzcGxheU5hbWUgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyBlbWFpbDogJyArIGF1dGguY3VycmVudFVzZXIuZW1haWwgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIHVzZXJJRDogJyArIGF1dGguY3VycmVudFVzZXIudWlkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9zZXR0aW5nIGEgbmV3IGRvYyAod2l0aCB1c2VyJ3MgTmlja25hbWUpIHRvIGZpcmViYXNlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RG9jKGRvY1JlZiwgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTmlja25hbWU6IHJlZ2lzdGVyZWROaWNrbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1dlIGhhdmUgc2V0IHRoZSBuZXcgZG9jcycpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4geyAgLy9jYXRjaCBmb3Igc2V0RG9jXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1RoZXJlIHdhcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJnbGFzcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldERvYyhkb2MoZGF0YWJhc2UsICd1c2Vyc1Njb3JlJywgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSksIHsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjb3JlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOaWNrbmFtZTogcmVnaXN0ZXJlZE5pY2tuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV2UgaGF2ZSBzZXQgdGhlIG90aGVyIGRvY3MnKTsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyRm9ybS5yZXNldCgpOy8vY2xlYW5pbmcgdGhlIGZvcm1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyRm9ybUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZUZvcm1MYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuaWNrbmFtZUZvcm1UZXh0SW5wdXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbkluQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb3NlWC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zUFRhZy50ZXh0Q29udGVudCA9IHJlZ2lzdGVyZWROaWNrbmFtZSArICcsICcgKyBwW2N1cnJlbnRTdGFnZV07ICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc3R5bGUuZm9udFNpemUgPSAnMTdweCc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjNTU1JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2lnbk91dEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyID0+IHsgIC8vY2F0Y2ggZm9yIHNldERvY1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGVyZSB3YXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0LicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4geyAgLy9jYXRjaCBmb3IgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrLXJlcXVlc3QtZmFpbGVkJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9pJ20gcHV0dGluZyB0aGUgYWxlcnQgaW5zaWRlIHNldFRpbWVvdXQsIHNvIGl0IHdpbGwgd29yayBhZnRlciBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy90aGUgaG91cmdsYXNzIGRpc2FwcGVyYXMgYW5kIG5vdCBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQsIHBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gb3IgdHJ5IGFnYWluIGxhdGVyLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCdlbWFpbC1hbHJlYWR5LWluLXVzZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJFbWFpbCBhbHJlYWR5IGluIHVzZSwgcGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCBvbmUuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3dlYWstcGFzc3dvcmQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiUGFzc3dvcmQgc2hvdWxkIGJlIGF0IGxlYXN0IDYgY2hhcmFjdGVycy5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIlRoZXJlIHdhcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7IC8vaWYgdGhlIE5pY2tuYW1lIGFscmVhZHkgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOaWNrbmFtZSBhbHJlYWR5IGV4aXN0czonLCBmaXJlRG9jLmRhdGEoKSk7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KCdUaGlzIG5pY2tuYW1lIGlzIGFscmVhZHkgdGFrZW4sIHBsZWFzZSBjaG9vc2UgYSBkaWZmZXJlbnQgb25lJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaChlcnIgPT4geyAvL2NhdGNoIGZvciBnZXREb2NcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgbWVzc2FnZSBmb3IgZ2V0RG9jOicsIGVyci5tZXNzYWdlKTtcbiAgICAgICAgXG4gICAgICAgICAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIik7XG4gICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxufSk7XG5cblxuc2lnbkluRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZW1haWwgPSBzaWduSW5Gb3JtLmVtYWlsLnZhbHVlO1xuICAgIGNvbnN0IHBhc3N3b3JkID0gc2lnbkluRm9ybS5wYXNzd29yZC52YWx1ZTtcbiAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpXG4gICAgLnRoZW4oY3JlZCA9PiB7XG4gICAgICAgIGhvdXJnbGFzcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaWduSW5Gb3JtLnJlc2V0KCk7IC8vY2xlYW5pbmcgdGhlIGZvcm1cbiAgICAgICAgY29uc29sZS5sb2coJ3VzZXIgc2lnbmVkIGluOiAnLCBjcmVkLnVzZXIsICduaWNrbmFtZTogJywgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSk7Ly9jcmVkLnVzZXIgc2hvd3MgdXMgdGhlIHVzZXIncyBkZXRhaWxzXG4gICAgICAgIGluc3RydWN0aW9uc1BUYWcudGV4dENvbnRlbnQgPSBhdXRoLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lICsgJywgJyArIHBbY3VycmVudFN0YWdlXTtcbiAgICAgICAgZG9jdW1lbnQuZm9ybXMubmlja25hbWVGb3JtLm5pY2tuYW1lLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsIGF1dGguY3VycmVudFVzZXIuZGlzcGxheU5hbWUpOy8vSSBkZWZpbmVkIHRoYXQsIHNvIHRoZXJlIHdvbid0IGJlIGEgbWlzdGFrZSB3aGVuIHRoZSB1c2VyIHdpbGwgc3RhcnQgcGxheWluZ1xuICAgICAgICBzaWduSW5Gb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIG5pY2tuYW1lRm9ybUxhYmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIG5pY2tuYW1lRm9ybVRleHRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICByZWdpc3RlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaWduSW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgc2lnbk91dEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgY2xvc2VYLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxN3B4JztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmNvbG9yID0gJyM1NTUnO1xuICAgICAgICBiYWNrVG9HYW1lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIG1lZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpO1xuICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUnKTsvL0knbSBkb2luZyBpdCBhZnRlciBjbGVhcigpLCBiZWNhdXNlIGl0IGNsZWFucyB0aGUgc2NvcmUgKHNvIGl0IHdvbid0IGFwcGVhciBpZiBJJ2xsIGRvIGNvbnNvbGUubG9nKCkpXG4gICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKTsvL0knbSBkb2luZyBpdCBhZnRlciBjbGVhcigpLCBiZWNhdXNlIGl0IGNsZWFucyB0aGUgYmVzdFNjb3JlIChzbyBpdCB3b24ndCBhcHBlYXIgaWYgSSdsbCBkbyBjb25zb2xlLmxvZygpKVxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnbmFtZScsIGF1dGguY3VycmVudFVzZXIuZGlzcGxheU5hbWUpOy8vYWRkaW5nIHRoZSByZWdpc3RlcmVkTmlja25hbWUgdG8gdGhlIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgLy9Ob3cgSSdsbCBzZXQgdGhlIHVzZXIncyBiZXN0U2NvcmUgZnJvbSBmaXJlYmFzZSBpbnRvIHRoZSBsb2NhbCBzdG9yYWdlXG4gICAgICAgIGdldERvYyhkb2MoZGF0YWJhc2UsICd1c2Vyc1Njb3JlJywgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSkpXG4gICAgICAgICAgICAudGhlbigoZG9jdW0pID0+IHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmVzdFNjb3JlJywgZG9jdW0uZGF0YSgpLlNjb3JlKTsvL2FkZGluZyB0aGUgcmVnaXN0ZXJlZE5pY2tuYW1lIHRvIHRoZSBsb2NhbCBzdG9yYWdlXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy9hbmQgaWYgYmVzdFNjb3JlIGV4aXN0cywgSSdsbCBtYWtlIGl0IGFwcGVhciB3aXRoIHRoZSBtZWRhbCBhdCB0aGUgdG9wIG9mIHRoZSBzY3JlZW5cbiAgICAgICAgICAgICAgICBpZiAoKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKSAhPSBudWxsKSAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpICE9ICcnKSAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpICE9IDApKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lZGFsU3Bhbi50ZXh0Q29udGVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKTtcbiAgICAgICAgICAgICAgICAgICAgbWVkYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy9pZiB0aGVyZSBhcmVuJ3QgYW55IHNjb3Jlc1xuICAgICAgICAgICAgICAgICAgICBtZWRhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgIH0pXG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcblxuICAgICAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3dyb25nLXBhc3N3b3JkJykpe1xuICAgICAgICAgICAgLy9pJ20gcHV0dGluZyB0aGUgYWxlcnQgaW5zaWRlIHNldFRpbWVvdXQsIHNvIGl0IHdpbGwgd29yayBhZnRlciBcbiAgICAgICAgICAgIC8vdGhlIGhvdXJnbGFzcyBkaXNhcHBlcmFzIGFuZCBub3QgYmVmb3JlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGVydChcIldyb25nIHBhc3N3b3JkLlwiKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ3VzZXItbm90LWZvdW5kJykpe1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJVc2VyIG5vdCBmb3VuZC5cIik7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9IGVsc2UgaWYgKGVyci5tZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrLXJlcXVlc3QtZmFpbGVkJykpe1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkLlwiKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlNpZ25pbmcgaW4gZXJyb3IsIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfVxuXG4gICAgfSlcblxufSk7XG5cblxuXG4vL1doZW4gdGhlIHVzZXIgY2xpY2sgdGhlIHNlbnRhbmNlIFwiRm9yZ290IHlvdXIgcGFzc3dvcmQ/XCI6XG5mb3Jnb3RQYXNzd29yZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGZvcmdvdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBzaWduSW5Gb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgY2xvc2VYLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgY2xvc2VYMi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgLy90aGUgWCBmb3IgZm9yZ290Q29udGFpbmVyXG4gICAgYmFja1RvR2FtZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbn0pO1xuXG5cbmNsb3NlWDIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBmb3Jnb3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBzaWduSW5Gb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGNsb3NlWC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBjbG9zZVgyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgYmFja1RvR2FtZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBmb3Jnb3RGb3JtLnJlc2V0KCk7XG59KTtcblxuYmFja1RvR2FtZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBmb3Jnb3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBzaWduSW5Gb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgY2xvc2VYLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgY2xvc2VYMi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGJhY2tUb0dhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBmb3Jnb3RGb3JtLnJlc2V0KCk7XG59KTtcblxuXG5mb3Jnb3RGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcmdvdEVtYWlsVmFsdWUgPSBmb3Jnb3RGb3JtLmVtYWlsLnZhbHVlO1xuICAgIGNvbnNvbGUubG9nKGZvcmdvdEVtYWlsVmFsdWUpO1xuICAgIGhvdXJnbGFzcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICBlbWFpbFNlbnRQLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGlvbklzT24nKTtcbiAgICBlbWFpbFNlbnRQLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGlvblJlbW92ZWQnKTtcblxuICAgIHNlbmRQYXNzd29yZFJlc2V0RW1haWwoYXV0aCwgZm9yZ290RW1haWxWYWx1ZSlcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGhvdXJnbGFzcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAvLyBQYXNzd29yZCByZXNldCBlbWFpbCBzZW50IVxuICAgICAgICBjb25zb2xlLmxvZyhcIkVtYWlsIHNlbnQhXCIpO1xuICAgICAgICBlbWFpbFNlbnQuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgZW1haWxTZW50UC5zdHlsZS5hbmltYXRpb24gPSAnZW1haWxTZW50IDIuNXMgZWFzZSBmb3J3YXJkcyBub3JtYWwnOyBcblxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGVtYWlsU2VudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgZW1haWxTZW50UC5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25SZW1vdmVkJyk7XG4gICAgICAgICAgICBlbWFpbFNlbnRQLmNsYXNzTGlzdC5yZW1vdmUoJ2FuaW1hdGlvbklzT24nKTsvL2l0IHdpbGwgcmVzZXQgdGhlIGVtYWlsU2VudCBhbmltYXRpb25cbiAgICAgICAgfSwgMjUwMCk7XG5cbiAgICAgICAgZm9yZ290Rm9ybS5yZXNldCgpO1xuICAgICAgICBmb3Jnb3RDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgc2lnbkluRm9ybUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgY2xvc2VYLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjbG9zZVgyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vdGhlIFggZm9yIGZvcmdvdENvbnRhaW5lclxuICAgICAgICBiYWNrVG9HYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZXJyb3IubWVzc2FnZTtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IubWVzc2FnZSk7XG4gICAgICAgIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrLXJlcXVlc3QtZmFpbGVkJykpIHtcbiAgICAgICAgICAgIC8vaSdtIHB1dHRpbmcgdGhlIGFsZXJ0IGluc2lkZSBzZXRUaW1lb3V0LCBzbyBpdCB3aWxsIHdvcmsgYWZ0ZXIgXG4gICAgICAgICAgICAvL3RoZSBob3VyZ2xhc3MgZGlzYXBwZXJhcyBhbmQgbm90IGJlZm9yZVxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkLCBwbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uIG9yIHRyeSBhZ2FpbiBsYXRlci5cIik7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ludmFsaWQtZW1haWwnKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJJbnZhbGlkIGVtYWlsLCBwbGVhc2UgdmVyaWZ5IHlvdXIgZW1haWwgYmVsb3cgYW5kIHJlc2VuZCBpdC5cIik7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ3VzZXItbm90LWZvdW5kJykpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiQWNjb3VudCBkb2VzIG5vdCBleGlzdC5cIik7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0LlwiKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5cbnNpZ25PdXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgc2lnbk91dEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHJlZ2lzdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICBzaWduSW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgIGxvY2FsU3RvcmFnZS5jbGVhcigpOyAvL2NsZWFycyBhbGwgbG9jYWxTdG9yYWdlIGl0ZW1zXG4gICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ25hbWUnKTsvL3ByZXZlbnRpbmcgdGhlIGNsZWFyZWQgbmFtZSB0byBhcHBlYXIgaW4gdGhlIGNvbnNvbGUgKGlmIHdlIHdpbGwgZG8gY29uc29sZS5sb2coKSlcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUnKTsvL3ByZXZlbnRpbmcgdGhlIGNsZWFyZWQgc2NvcmUgdG8gYXBwZWFyIGluIHRoZSBjb25zb2xlIChpZiB3ZSB3aWxsIGRvIGNvbnNvbGUubG9nKCkpXG5cbiAgICAvLyBpZiAodW5zdWJzY3JpYmUgIT0gbnVsbCkge1xuICAgIC8vICAgICB1bnN1YnNjcmliZSgpO1xuICAgIC8vIH1cblxuICAgIHNpZ25PdXQoYXV0aClcbiAgICAudGhlbiAoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygndGhlIHVzZXIgbG9nZ2VkIG91dCcpO1xuICAgICAgICBpbnN0cnVjdGlvbnNQVGFnLnRleHRDb250ZW50ID0gcEFub25bY3VycmVudFN0YWdlXTtcbiAgICAgICAgbWVkYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgbmlja25hbWVGb3JtTGFiZWwuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICBuaWNrbmFtZUZvcm1MYWJlbC5zdHlsZS5yaWdodCA9ICczcHgnO1xuICAgICAgICBuaWNrbmFtZUZvcm1UZXh0SW5wdXQuc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgICAgICBidXR0b24uc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5jb2xvciA9ICdidXR0b250ZXh0JztcbiAgICAgICAgZG9jdW1lbnQuZm9ybXMubmlja25hbWVGb3JtLm5pY2tuYW1lLnNldEF0dHJpYnV0ZShcInZhbHVlXCIsICcnKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG4gICAgfSlcbn0pO1xuXG5cbi8vY2hlY2tpbmcgaWYgdGhlIHVzZXIgc2lnbmVkIGluIChpdCdzIGltcG9ydGFudCBmb3IgY2FzZXMgd2hlcmUgdGhlIHVzZXIgcmVmcmVzaGVzIHRoZSBwYWdlKVxubGV0IHN0YXR1cyA9IDA7XG5cbm9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCAodXNlcikgPT4ge1xuICAgIGlmICh1c2VyKSB7IC8vaWYgQXV0aCB1c2VyIGV4aXN0cywgd2Ugd2FudCB0aGUgc2lnbk91dCBidXR0b24gdG8gYmUgb24sIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGdhbWUgKGluc3RlYWQgb2YgdGhlIHJlZ2lzdGVyIGFuZCBzaWduSW4gYnV0dG9ucylcbiAgICAgICAgc3RhdHVzID0gMTtcbiAgICAgICAgY29uc29sZS5sb2coc3RhdHVzLCB1c2VyKTtcbiAgICAgICAgcmVnaXN0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgc2lnbkluQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IFxuICAgICAgICBzaWduT3V0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBpbnN0cnVjdGlvbnNQVGFnLnRleHRDb250ZW50ID0gYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSArICcsICcgKyBwW2N1cnJlbnRTdGFnZV07XG4gICAgICAgIG5pY2tuYW1lRm9ybUxhYmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIG5pY2tuYW1lRm9ybVRleHRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBidXR0b24uc3R5bGUuZm9udFNpemUgPSAnMTdweCc7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjNTU1JztcbiAgICB9IGVsc2UgeyAvL2lmIHRoZXJlIGlzbid0IGFueSB1c2VyXG4gICAgICAgIHN0YXR1cyA9IDA7XG4gICAgICAgIGNvbnNvbGUubG9nKHN0YXR1cywgdXNlcik7XG4gICAgfVxufSlcblxuXG5cbmV4cG9ydCB7IGZpcmViYXNlQ29uZmlnLCBhcHAsIGF1dGgsIGRhdGFiYXNlLCB1c2Vyc0N1cnJlbnRTdGFnZSwgcmVnaXN0ZXJCdXR0b24sIHJlZ2lzdGVyQnV0dG9uRXZlbnQsIHJlZ2lzdGVyRm9ybUNvbnRhaW5lciwgcmVnaXN0ZXJGb3JtLCByZWdpc3RlckZvcm1JbnB1dEZpZWxkcywgcmVnaXN0ZXJGb3JtUEZpZWxkcywgcmVnaXN0ZXJMYXN0TmFtZSwgcmVnaXN0ZXJGaXJzdE5hbWUsIGxhc3ROYW1lUCwgZmlyc3ROYW1lUCwgc2lnbkluQnV0dG9uLCBzaWduSW5CdXR0b25FdmVudCwgc2lnbkluRm9ybUNvbnRhaW5lciwgc2lnbkluRm9ybSwgY2xvc2VYLCBpbnN0cnVjdGlvbnNQLCBuaWNrbmFtZUZvcm0sIG5pY2tuYW1lRm9ybUxhYmVsLCBuaWNrbmFtZUZvcm1UZXh0SW5wdXQsIGJ1dHRvbiwgc2lnbk91dEJ1dHRvbiwgaG91cmdsYXNzLCByZWcsIHN0YXR1cywgcXVpdCB9OyIsImltcG9ydCB7IGJvZHksIGhlYWRlciwgY3Vyc29yLCBjb3JvbmFDaXJjbGUsIGV5ZXMgfSBmcm9tICcuL2N1cnNvckFuZENvcm9uYSc7XG5pbXBvcnQgeyBzZWNvbmRzRm9yRWFjaFN0YWdlLCBwRmFpbHVyZSwgcEZhaWx1cmVBbm9uLCBwLCBwQW5vbiB9IGZyb20gJy4vc3RvcnlMaW5lJztcblxuXG5jb25zdCB0cmlhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50cmlhbCcpO1xuXG5sZXQgc3RvcCA9IDA7XG5jb25zdCBzdG9wV29ya2luZyA9IChiaW5hcnkpID0+IHN0b3AgPSBiaW5hcnk7IC8vd2UgY2FuJ3QgZXhwb3J0IFwic3RvcFwiIGFzIGxldCwgc28gd2UgbWFrZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2EgZnVuY3Rpb24gdGhhdCB3ZSBjYW4gZXhwb3J0LCBhbmQgaXQnbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jaGFuZ2UgdGhlIHZhbHVlIG9mIHN0b3BcblxubGV0IG91clZpZXdQb3J0V2lkdGggPSBib2R5LmNsaWVudFdpZHRoOyAvL2NsaWVudFdpZHRoIHNob3dzIHRoZSB3aWR0aCBvZiB0aGUgZWxlbWVudCB3ZSBjaG9vc2Vcbi8vY29uc3Qgb3VyVmlld1BvcnRIZWlnaHQgPSBib2R5LmNsaWVudEhlaWdodDtcbmNvbnNvbGUubG9nICgnb3VyVmlld1BvcnRXaWR0aDogJyArIG91clZpZXdQb3J0V2lkdGggKyAnIG91clZpZXdQb3J0SGVpZ2h0OiAnICtib2R5LmNsaWVudEhlaWdodClcblxuLy9JZiBzb21lb25lIGNoYW5nZXMgdGhlIHNjcmVlbiBzaXplLCB3ZSB3YW4ndCB0byBwcmV2ZW50IGJ1Z3M6XG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgIG91clZpZXdQb3J0V2lkdGggPSBib2R5LmNsaWVudFdpZHRoO1xufSk7XG5cblxuXG4vL3RoZSBidXR0b24ncyBldmVudCBsaXN0ZW5lciB3aWxsIGNhbGwgdGhpcyBmdW5jdGlvbiwgd2hpY2ggd2lsbCBtb3ZlIHRoZSBmaWd1cmVzIGluIHJhbmRvbSBkaXJlY3Rpb25zXG5jb25zdCBtb3ZlID0gKGZpZ3VyZSwgc3BlZWQpID0+IHtcbiAgICAvL21ha2luZyByYW5kb24gaW50ZWdlcnMgZm9yIHRoZSBmaWd1cmVzIHRvIG1vdmUgaW4gZGlmZmVyZW50IGRpcmVjdGlvbnNcbiAgICBsZXQgcmFuZG9tSW50WCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgyIC0gKC0yKSArIDEpKSAtMjsgLy90aGlzIGNvbnN0IHdpbGwgZ2l2ZSBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gLTIgYW5kICsyXG4gICAgbGV0IHJhbmRvbUludFkgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMiAtICgtMikgKyAxKSkgLTI7IC8vdGhpcyBjb25zdCB3aWxsIGdpdmUgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIC0yIGFuZCArMlxuICAgIGlmIChyYW5kb21JbnRYID09IDAgJiYgcmFuZG9tSW50WSA9PSAwKXtcbiAgICAgICAgcmFuZG9tSW50WCA9IDI7XG4gICAgfVxuICAgXG4gICAgLy9jb25zdCBjdXJyZW50RmlndXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycrZmlndXJlKTtcblxuICAgIC8vdGhlIHdheSB0aGUgZmlndXJlcyBtb3ZlXG4gICAgY29uc3QgZmlndXJlTW92ZW1lbnQgPSAocmFuZG9tSW50WCwgcmFuZG9tSW50WSkgPT4ge1xuICAgICAgIFxuICAgICAgICBpZiAoc3RvcCA9PSAxKXtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwobW92ZW1lbnRJbnRlcnZhbCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLzQgcnVsZXMgZm9yIHRoZSBjb3JuZXJzJyBjYXNlczpcbiAgICAgICAgaWYgKChmaWd1cmUub2Zmc2V0VG9wIDw9IDEpICYmIChmaWd1cmUub2Zmc2V0TGVmdCA+PSAoYm9keS5jbGllbnRXaWR0aCAtNTYgLSAxKSkpIHtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS50b3AgPSAoKGJvZHkuY2xpZW50SGVpZ2h0IC01NiAtIDIpICsgJ3B4Jyk7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUubGVmdCA9ICcycHgnO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChmaWd1cmUub2Zmc2V0VG9wIDw9IDEpICYmIChmaWd1cmUub2Zmc2V0TGVmdCA8PSAxKSkge1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLnRvcCA9ICgoYm9keS5jbGllbnRIZWlnaHQgLTU2IC0gMikgKyAncHgnKTtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS5sZWZ0ID0gKChvdXJWaWV3UG9ydFdpZHRoIC01NiAtMikgKyAncHgnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgoZmlndXJlLm9mZnNldFRvcCA+PSAoYm9keS5jbGllbnRIZWlnaHQgLTU2IC0gMSkpICYmIChmaWd1cmUub2Zmc2V0TGVmdCA8PSAxKSkge1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLnRvcCA9ICcycHgnO1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLmxlZnQgPSAoKG91clZpZXdQb3J0V2lkdGggLTU2IC0yKSArICdweCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChmaWd1cmUub2Zmc2V0VG9wID49IChib2R5LmNsaWVudEhlaWdodCAtNTYgLSAxKSkgJiYgKGZpZ3VyZS5vZmZzZXRMZWZ0ID49IChib2R5LmNsaWVudFdpZHRoIC01NiAtIDEpKSkge1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLnRvcCA9ICcycHgnO1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLmxlZnQgPSAnMnB4JztcbiAgICAgICAgfVxuICAgICAgICAvL2ZvdXIgXCJpZlwiIHJ1bGVzIGZvciBjYXNlcyB0aGF0IHRoZSBmaWd1cmVzIHJlYWNoIHRoZSBzY3JlZW4gZWRnZXM6XG4gICAgICAgIGVsc2UgaWYgKGZpZ3VyZS5vZmZzZXRUb3AgPD0gMSkgeyAvL29mZnNldFRvcCBzaG93cyB0aGUgbG9jYXRpb24gY29tcGFyaW5nIHRvIHRoZSBmYXRoZXIgKHRoZSBib2R5KS4gV2UgbmVlZCB0aGF0IG9mZnNldFRvcCB3aWxsIGJlIDAgb3IgMSAoYW5kIG5vdCBvbmx5IG9mZnNldFRvcD0wKSwgYmVjYXVzZSBzb21ldGltZXMgdGhlIGZpZ3VyZXMgZG8gMiBzdGVwcyAoMiBwaXhlbHMpIGF0IGEgdGltZVxuICAgICAgICAgICAgZmlndXJlLnN0eWxlLnRvcCA9ICgoYm9keS5jbGllbnRIZWlnaHQgLTU2IC0gMikgKyAncHgnKTsvL01pbnVzIDIsIGJlY2F1c2UgdGhlIGZpZ3VyZXMgd2lsbCBiZSBzdHVja2VkIGlmIHdlIHdpbGwgc2VuZCB0aGVtIHRvIG91clZpZXdQb3J0SGVpZ2h0TWludXMxIG9yIG91clZpZXdQb3J0SGVpZ2h0LiBBbmQgbWludXMgNTYgYmVjYXVzZSBvZiB0aGUgc2l6ZSBvZiB0aGUgZmlndXJlcyAod2Ugd2FudCB0aGVtIHRvIGRpc2FwcGVhciBhdCB0aGUgZWRnZSBvZiB0aGUgc2NyZWVuIGFuZCBub3QgNTZweCBhZnRlciBpdClcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS5sZWZ0ID0gKGJvZHkuY2xpZW50V2lkdGggLTU2IC0gcGFyc2VJbnQoZmlndXJlLnN0eWxlLmxlZnQpKSArICdweCc7XG4gICAgICAgIH0gXG4gICAgICAgIGVsc2UgaWYgKGZpZ3VyZS5vZmZzZXRUb3AgPj0gKGJvZHkuY2xpZW50SGVpZ2h0IC01NiAtIDEpKSB7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUudG9wID0gJzJweCc7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUubGVmdCA9IChib2R5LmNsaWVudFdpZHRoIC01NiAtIHBhcnNlSW50KGZpZ3VyZS5zdHlsZS5sZWZ0KSkgKyAncHgnO1xuICAgICAgICB9IFxuICAgICAgICBlbHNlIGlmIChmaWd1cmUub2Zmc2V0TGVmdCA8PSAxKSB7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUubGVmdCA9ICgob3VyVmlld1BvcnRXaWR0aCAtNTYgLTIpICsgJ3B4Jyk7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUudG9wID0gKGJvZHkuY2xpZW50SGVpZ2h0IC01NiAtIHBhcnNlSW50KGZpZ3VyZS5zdHlsZS50b3ApKSArICdweCc7XG4gICAgICAgIH0gXG4gICAgICAgIGVsc2UgaWYgKGZpZ3VyZS5vZmZzZXRMZWZ0ID49IChib2R5LmNsaWVudFdpZHRoIC01NiAtIDEpKSB7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUubGVmdCA9ICcycHgnO1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLnRvcCA9IChib2R5LmNsaWVudEhlaWdodCAtNTYgLSBwYXJzZUludChmaWd1cmUuc3R5bGUudG9wKSkgKyAncHgnO1xuICAgICAgICB9IFxuICAgICAgICAvL2lmIHRoZSBmaWd1cmUgaXMgbm90IGluIHRoZSBlZGdlIG9yIGluIHRoZSBjb3JuZXIsXG4gICAgICAgIC8vdGhlbiB0aGF0J3MgdGhlIHdheSBpdCB3aWxsIG1vdmUgb24gc2NyZWVuOlxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS50b3AgPSBwYXJzZUludChmaWd1cmUuc3R5bGUudG9wKSArIHJhbmRvbUludFkgKyAncHgnOyAvL3RoZSBtZXRob2QgcGFyc2VJbnQgdGFrZXMgb25seSB0aGUgbnVtYmVyIChhbmQgbGVhdmVzIG91dCB0aGUgc3RyaW5nICdweCcgYXR0YWNoZWQgdG8gaXQ6KSBcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS5sZWZ0ID0gcGFyc2VJbnQoZmlndXJlLnN0eWxlLmxlZnQpICsgcmFuZG9tSW50WCArICdweCc7XG4gICAgICAgIH1cbiAgICAgICAgLy9jb25zb2xlLmxvZyhmaWd1cmUuc3R5bGUuYmFja2dyb3VuZCArICcgWDogJysgZmlndXJlLnN0eWxlLmxlZnQgKyAnIFk6ICcgKyBmaWd1cmUuc3R5bGUudG9wKTtcblxuICAgIH1cbiAgICBcbiAgICAvL25vdyB3ZSdsbCBjYWxsIHRoZSBmaWd1cmVNb3ZlbWVudCBmdW5jdGlvbiwgYnV0IHRoZSBpbnRlcnZhbCBmb3IgdGhpcyBmdW5jdGlvblxuICAgIC8vd2lsbCBiZSBoaWdoZXIgZnJlcXVlbmN5IGZvciBmaWd1cmVzIDExLTE0ICh0aGUgYmF0cykuIFxuICAgIGxldCBtb3ZlbWVudEludGVydmFsO1xuICAgIGNvbnN0IGJhdEFycmF5ID0gWzExLCAxMiwgMTMsIDE0XTtcbiAgICAvL3dlIHdpbGwgdXNlIHNvbWUoKSBtZXRob2QsIHdoaWNoIGNoZWNrcyBpZiAgYXQgbGVhc3Qgb25lIGVsZW1lbnQgaW4gdGhlIGFycmF5XG4gICAgLy9wYXNzZXMgdGhlIHRlc3QgaW1wbGVtZW50ZWQgaW5zaWRlIHNvbWUoKVxuICAgIGlmIChiYXRBcnJheS5zb21lKGVsZW1lbnQgPT4gZmlndXJlLnN0eWxlLmJhY2tncm91bmQuaW5jbHVkZXMoZWxlbWVudCkpKSB7XG4gICAgICAgIG1vdmVtZW50SW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiBmaWd1cmVNb3ZlbWVudChyYW5kb21JbnRYLCByYW5kb21JbnRZKSwgOSk7XG4gICAgfSBlbHNlIGlmIChzcGVlZCA9PSAnZmFzdCcpIHsgLy9mb3IgY2FzZXMgdGhhdCBhcmUgbm90IGJhdHNcbiAgICAgICAgbW92ZW1lbnRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGZpZ3VyZU1vdmVtZW50KHJhbmRvbUludFgsIHJhbmRvbUludFkpLCAxMik7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiZ29pbmcgZmFzdCBub3dcIik7XG4gICAgfSBlbHNlIGlmIChzcGVlZCA9PSAnc2xvdycpIHsgLy9mb3IgY2FzZXMgdGhhdCBhcmUgbm90IGJhdHNcbiAgICAgICAgbW92ZW1lbnRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGZpZ3VyZU1vdmVtZW50KHJhbmRvbUludFgsIHJhbmRvbUludFkpLCA0MCk7XG4gICAgfSBlbHNlIHsgLy9mb3IgY2FzZXMgdGhhdCBhcmUgbm90IGJhdHNcbiAgICAgICAgbW92ZW1lbnRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGZpZ3VyZU1vdmVtZW50KHJhbmRvbUludFgsIHJhbmRvbUludFkpLCAyMCk7XG4gICAgfVxuICAgIFxuXG59O1xuXG5cbmNvbnN0IHNsb3cgPSAnc2xvdyc7XG5cbkFycmF5LmZyb20odHJpYWwpLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgZWxlbWVudC5zdHlsZS50b3AgPSBNYXRoLnJhbmRvbSgpKihib2R5LmNsaWVudEhlaWdodCAtIDU2KSArICdweCc7IC8vNTYgaXMgdGhlIHNpemUgb2YgdGhlIGZpZ3VyZXMuIGJvZHkuY2xpZW50SGVpZ2h0IGdpdmVzIHRoZSB2aWV3cG9ydCBzaXplIHdpdGhvdXQgdGhlIHNjcm9sbCBiYXJcbiAgICBlbGVtZW50LnN0eWxlLmxlZnQgPSBNYXRoLnJhbmRvbSgpKihib2R5LmNsaWVudFdpZHRoIC0gNTYpICsgJ3B4JzsgLy81NiBpcyB0aGUgc2l6ZSBvZiB0aGUgZmlndXJlcy5cbiAgICBtb3ZlKGVsZW1lbnQsIHNsb3cpO1xufSk7XG5cblxuZXhwb3J0IHsgc3RvcFdvcmtpbmcsIG91clZpZXdQb3J0V2lkdGgsIG1vdmUsIHRyaWFsLCBzbG93IH07IiwiaW1wb3J0IHsgcmVnaXN0ZXJCdXR0b24sIHJlZ2lzdGVyQnV0dG9uRXZlbnQsIHNpZ25JbkJ1dHRvbiwgc2lnbkluQnV0dG9uRXZlbnQsIGluc3RydWN0aW9uc1AsIG5pY2tuYW1lRm9ybSB9IGZyb20gJy4vc2lnbkluQW5kUmVnaXN0ZXJGb3Jtcyc7XHJcbmltcG9ydCB7IG1lZGFsIH0gZnJvbSAnLi9sb2NhbFN0b3JhZ2UnO1xyXG5pbXBvcnQgeyBib2R5IH0gZnJvbSAnLi9jdXJzb3JBbmRDb3JvbmEnO1xyXG5pbXBvcnQgeyBtb3ZlLCBzbG93IH0gZnJvbSAnLi9maWd1cmVzTW92ZW1lbnQnO1xyXG5cclxuXHJcblxyXG5jb25zdCBpbnN0cnVjdGlvbnNINCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0cnVjdGlvbnMgaDQnKTtcclxuY29uc3QgdHJpYWwzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RyaWFsMycpO1xyXG5jb25zdCB0cmlhbDQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xyXG5cclxuY29uc3QgbW9iaWxlQW5kVGFibGV0cyA9ICgpID0+IHtcclxuICAgIHJlZ2lzdGVyQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZWdpc3RlckJ1dHRvbkV2ZW50KTtcclxuICAgIHNpZ25JbkJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2lnbkluQnV0dG9uRXZlbnQpO1xyXG4gICAgbWVkYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICB0cmlhbDQuY2xhc3NMaXN0LmFkZCgndHJpYWwnLCAndHJpYWw0Jyk7XHJcbiAgICBib2R5Lmluc2VydEJlZm9yZSh0cmlhbDQsIHRyaWFsMyk7XHJcbiAgICB0cmlhbDQuc3R5bGUuekluZGV4ID0gJzExJztcclxuICAgIHRyaWFsNC5zdHlsZS50b3AgPSBNYXRoLnJhbmRvbSgpKihib2R5LmNsaWVudEhlaWdodCAtIDU2KSArICdweCc7IC8vNTYgaXMgdGhlIHNpemUgb2YgdGhlIGZpZ3VyZXMuIGJvZHkuY2xpZW50SGVpZ2h0IGdpdmVzIHRoZSB2aWV3cG9ydCBzaXplIHdpdGhvdXQgdGhlIHNjcm9sbCBiYXJcclxuICAgIHRyaWFsNC5zdHlsZS5sZWZ0ID0gTWF0aC5yYW5kb20oKSooYm9keS5jbGllbnRXaWR0aCAtIDU2KSArICdweCc7IC8vNTYgaXMgdGhlIHNpemUgb2YgdGhlIGZpZ3VyZXMuXHJcbiAgICBtb3ZlKHRyaWFsNCwgJ3JlZ3VsYXInKTtcclxufVxyXG5cclxuXHJcbi8vbWVkaWFRdWVyeSBmb3IgcGhvbmVzIGFuZCB0YWJsZXRzIGluIHBvcnRyYWl0IG9yaWVudGF0aW9uXHJcbmNvbnN0IG1lZGlhcTEgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG9yaWVudGF0aW9uOiBwb3J0cmFpdCknKTtcclxuLy9mb3IgY2FzZXMgd2hlbiB1c2VyIGxvYWRzIHRoZSBnYW1lIG9uIHBob25lXHJcbmNvbnN0IGZvclBob25lc0FuZFRhYmxldHMgPSAobXEpID0+IHtcclxuICAgIGlmIChtcS5tYXRjaGVzKSB7XHJcbiAgICAgICAgbW9iaWxlQW5kVGFibGV0cygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mb3JQaG9uZXNBbmRUYWJsZXRzKG1lZGlhcTEpO1xyXG5cclxuXHJcbi8vZXZlbnRMaXN0ZW5lciBmb3Igc3RhdGUgY2hhbmdlc1xyXG5tZWRpYXExLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICBpZiAoZS5tYXRjaGVzKSB7XHJcbiAgICAgICAgbW9iaWxlQW5kVGFibGV0cygpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5cclxuLy9DaGVja2luZyBpZiB0aGUgdXNlciBpcyBvbiBhIG1vYmlsZS90YWJsZXQgZGV2aWNlXHJcbi8vSSB0b29rIHRoaXMgY29kZSBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM1MTQ3ODQvd2hhdC1pcy10aGUtYmVzdC13YXktdG8tZGV0ZWN0LWEtbW9iaWxlLWRldmljZVxyXG5pZigvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXBhZHxpcmlzfGtpbmRsZXxBbmRyb2lkfFNpbGt8bGdlIHxtYWVtb3xtaWRwfG1tcHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyAoY2V8cGhvbmUpfHhkYXx4aWluby9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgLy9uYXZpZ2F0b3IudXNlckFnZW50IHJldHVybnMgYSBzdHJpbmcgZm9yIHRoZSBjdXJyZW50IGJyb3dzZXIuIEl0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBicm93c2VyIG5hbWUsIHZlcnNpb24gYW5kIHBsYXRmb3JtIGFuZCB0aGlzIHdheSB3ZSBjYW4ga25vdyBpZiBpdCdzIGEgbW9iaWxlIGRldmljZSBvciBub3QuIFNvIGluIHRoaXMgY2FzZSB3ZSBjaGVjayBpZiB0aGUgc3RyaW5nIG9mIG5hdmlnYXRvci51c2VyQWdlbnQgY29udGFpbnMgb25lIG9mIHRoZSByZWdleCBwYXR0ZXJucyBvbiB0aGUgbGVmdCAodGhlc2UgcGF0dGVybnMgYXBwZWFycyBpbiBtb2JpbGUgYW5kIHRhYmxldCBkZXZpY2VzKS4gV2UgY2FuIHJlYWQgbW9yZSBhYm91dCBpdCBpbjogaHR0cHM6Ly93d3cudzNzY2hvb2xzLmNvbS9qc3JlZi9qc3JlZl9yZWdleHBfdGVzdC5hc3BcclxuICAgIHx8IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHJpbmcoMCw1KSkpIHsgLy9JIGNoZWNrIGlmIHRoZSBmaXJzdCA1IGxldHRlcnMgb2YgdGhlIHN0cmluZyBvZiB0aGUgbmF2aWdhdG9yLnVzZXJBZ2VudCBjb250YWlucyBvbmUgb2YgdGhlIHJlZ2V4IHBhdHRlcm5zIG9uIHRoZSBsZWZ0LlxyXG4gICAgXHJcbiAgICBpbnN0cnVjdGlvbnNQLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vVGhpcyBkb2Vzbid0IGFwcGVhciBpbiB0aGUgY3NzIGZpbGVcclxuICAgIG5pY2tuYW1lRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAgIC8vVGhpcyBkb2Vzbid0IGFwcGVhciBpbiB0aGUgY3NzIGZpbGUgXHJcbiAgICBpbnN0cnVjdGlvbnNINC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgLy9UaGlzIGRvZXNuJ3QgYXBwZWFyIGluIHRoZSBjc3MgZmlsZVxyXG4gICAgbW9iaWxlQW5kVGFibGV0cygpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHsgaW5zdHJ1Y3Rpb25zSDQsIG1lZGlhcTEsIGZvclBob25lc0FuZFRhYmxldHMgfTsiLCIvL2ltcG9ydCBzdHlsZSBmcm9tICcuLi9jc3MvY3Vyc29yLmNzcyc7XG5pbXBvcnQgJy4uL2Nzcy9jdXJzb3IuY3NzJztcbmltcG9ydCBmaWd1cmUxIGZyb20gJy4uL2ltYWdlcy9maWd1cmUxLnN2Zyc7XG5pbXBvcnQgZmlndXJlMiBmcm9tICcuLi9pbWFnZXMvZmlndXJlMi5zdmcnO1xuaW1wb3J0IGZpZ3VyZTMgZnJvbSAnLi4vaW1hZ2VzL2ZpZ3VyZTMuc3ZnJztcbmltcG9ydCBmaWd1cmU0IGZyb20gJy4uL2ltYWdlcy9maWd1cmU0LnN2Zyc7XG5pbXBvcnQgZmlndXJlNSBmcm9tICcuLi9pbWFnZXMvZmlndXJlNS5zdmcnO1xuaW1wb3J0IGZpZ3VyZTYgZnJvbSAnLi4vaW1hZ2VzL2ZpZ3VyZTYuc3ZnJztcbmltcG9ydCBmaWd1cmU3IGZyb20gJy4uL2ltYWdlcy9maWd1cmU3LnN2Zyc7XG5pbXBvcnQgZmlndXJlOCBmcm9tICcuLi9pbWFnZXMvZmlndXJlOC5zdmcnO1xuaW1wb3J0IGZpZ3VyZTkgZnJvbSAnLi4vaW1hZ2VzL2ZpZ3VyZTkuc3ZnJztcbmltcG9ydCBmaWd1cmUxMCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTAuc3ZnJztcbmltcG9ydCBmaWd1cmUxMSBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTEuc3ZnJztcbmltcG9ydCBmaWd1cmUxMiBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTIuc3ZnJztcbmltcG9ydCBmaWd1cmUxMyBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTMuc3ZnJztcbmltcG9ydCBmaWd1cmUxNCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTQuc3ZnJztcbmltcG9ydCBmaWd1cmUxNSBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTUuc3ZnJztcbmltcG9ydCBmaWd1cmUxNiBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTYuc3ZnJztcbmltcG9ydCBmaWd1cmUxNyBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTcuc3ZnJztcbmltcG9ydCBmaWd1cmUxOCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTguc3ZnJztcbmltcG9ydCBmaWd1cmUxOSBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTkuc3ZnJztcbmltcG9ydCBmaWd1cmUyMCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMjAuc3ZnJztcbmltcG9ydCBzdGFycyBmcm9tICcuLi9pbWFnZXMvc3RhcnMuc3ZnJztcbmltcG9ydCBmYXZpY29uIGZyb20gJy4uL2ltYWdlcy9mYXZpY29uLmljbyc7XG5pbXBvcnQgeyBib2R5LCBoZWFkZXIsIGN1cnNvciwgY29yb25hQ2lyY2xlLCBleWVzIH0gZnJvbSAnLi9jdXJzb3JBbmRDb3JvbmEnO1xuaW1wb3J0IHsgZmlyZWJhc2VDb25maWcsIGFwcCwgYXV0aCwgZGF0YWJhc2UsIHVzZXJzQ3VycmVudFN0YWdlLCByZWdpc3RlckZvcm1Db250YWluZXIsIHJlZ2lzdGVyRm9ybSwgc2lnbkluRm9ybUNvbnRhaW5lciwgc2lnbkluRm9ybSwgY2xvc2VYLCByZWdpc3RlckJ1dHRvbiwgc2lnbkluQnV0dG9uLCBpbnN0cnVjdGlvbnNQLCBuaWNrbmFtZUZvcm0sIG5pY2tuYW1lRm9ybUxhYmVsLCBuaWNrbmFtZUZvcm1UZXh0SW5wdXQsIGJ1dHRvbiwgc2lnbk91dEJ1dHRvbiwgaG91cmdsYXNzLCByZWcsIHN0YXR1cywgcXVpdCB9IGZyb20gJy4vc2lnbkluQW5kUmVnaXN0ZXJGb3Jtcyc7XG5pbXBvcnQgeyBpbnN0cnVjdGlvbnNQVGFnLCBzZWNvbmRzRm9yRWFjaFN0YWdlLCBmaWd1cmVzUGVyU3RhZ2UsIHBGYWlsdXJlLCBwRmFpbHVyZUFub24sIHAsIHBBbm9uIH0gZnJvbSAnLi9zdG9yeUxpbmUnO1xuaW1wb3J0IHsgc3RvcFdvcmtpbmcsIG91clZpZXdQb3J0V2lkdGgsIG1vdmUsIHRyaWFsLCBzbG93IH0gZnJvbSAnLi9maWd1cmVzTW92ZW1lbnQnO1xuaW1wb3J0IHsgaW5zdHJ1Y3Rpb25zLCBtZWRhbCwgc2F2ZWROaWNrbmFtZSB9IGZyb20gJy4vbG9jYWxTdG9yYWdlJztcbmltcG9ydCB7IGRvYywgdXBkYXRlRG9jIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgaW5zdHJ1Y3Rpb25zSDQsIG1lZGlhcTEsIGZvclBob25lc0FuZFRhYmxldHMgfSBmcm9tIFwiLi9tb2JpbGVcIjtcblxuY29uc3QgZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyJyk7XG5jb25zdCB0b3BFeWVzaGFkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b3BFeWVzaGFkZScpO1xuY29uc3QgYm90dG9tRXllc2hhZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm90dG9tRXllc2hhZGUnKTtcbmNvbnN0IHRpbnlDaXJjbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpbnlDaXJjbGUnKTtcbmNvbnN0IGNvcm9uYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb3JvbmEnKTtcbmNvbnN0IHRpbnlDaXJjbGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGlueUNpcmNsZUNvbnRhaW5lcicpO1xuY29uc3Qgc2lnbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWduJyk7XG5jb25zdCBoZWFkbGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWFkbGluZScpOy8vLy8vLy8vLy8vLy8vLy8hISEhISEhISEhISEhISEhISEhXG5sZXQgbmlja25hbWU7XG5sZXQgc3RhZ2UgPSAwOy8vd2lsbCBnbyBpbnNpZGUgdGhlIGxldmVsIHRhZ1xubGV0IGZpZ3VyZXMgPSBbXTsgLy9maWd1cmUxLCBmaWd1cmUyLi4uXG5sZXQgZmlndXJlc0RpdnMgPSBbXTtcbmxldCBudW1zT2ZGaWdzID0gW107Ly9mb3IgZXhhbXBsZTogWzEsIDIsIDMsIDQsIDUsIDYsIDddIGRlcGVuZHMgb24gdGhlIG1heCBudW1iZXIgb2YgZmlndXJlcyBpbiBlYWNoIGxldmVsXG5sZXQgdXNlclNjb3JlID0gMDtcbmNvbnN0IGJvbnVzQXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgI2JvbnVzQXJyb3cnKTtcbmxldCBzcGVlZDsgLy9maWd1cmVzJyBzcGVlZCAoQ29udHJvbHMgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgaW50ZXJ2YWwgaW4gdGhlIGZ1bmN0aW9uIG1vdmUpXG5sZXQgY3VycmVudExldmVsQ2xpY2tzU3VjY2VzcyA9IDA7XG5cblxuLy9zdGFydGluZyB0aGUgZ2FtZVxuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIFxuICAgIGUucHJldmVudERlZmF1bHQoKTsvL3ByZXZlbnQgcmVmcmVzaGluZyB0aGUgcGFnZSAoZHVlIHRvIHRoZSBmb3JtKVxuXG4gICAgc2lnbk91dEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIG1lZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgcXVpdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGhlYWRsaW5lLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbiAgICAvL1RoZSB0cmlhbCBmaWd1cmVzIGF0IHRoZSBob21lIHBhZ2Ugd2lsbCBzdG9wIHdvcmtpbmdcbiAgICBBcnJheS5mcm9tKHRyaWFsKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBcbiAgICAgICAgc3RvcFdvcmtpbmcoMSk7ICBcbiAgICB9KTtcblxuICAgIHN0b3BXb3JraW5nKDApO1xuXG4gICAgLy9maWxsaW5nIHVwIG51bXNPZkZpZ3MgYXJyYXkgYWNjb3JkaW5nIHRvIGZpZ3VyZXNQZXJTdGFnZSBhcnJheVxuICAgIGZvciAobGV0IHogPSAxOyB6IDw9IGZpZ3VyZXNQZXJTdGFnZVtzdGFnZV07IHorKyl7XG4gICAgICAgIGlmICgoc3RhZ2UgPT0gNSkgJiYgKHogPT0gMTEgfHwgeiA9PSAxMiB8fCB6ID09IDEzIHx8IHogPT0gMTQpKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbnVtc09mRmlncy5wdXNoKHopO1xuICAgICAgICB9XG4gICAgfSBcblxuICAgICAgXG4gICAgLy9kZWZpbmluZyB0aGUgZmlndXJlcycgYXJyYXlzXG4gICAgbnVtc09mRmlncy5mb3JFYWNoKG51bSA9PiB7XG4gICAgICAgIC8vYWRkaW5nIGZpZ3VyZXMgaW50byB0aGUgZmlndXJlcyBhcnJheVxuICAgICAgICBmaWd1cmVzLnB1c2goJ2ZpZ3VyZScrbnVtKTtcbiAgICAgICAgXG4gICAgICAgIC8vY3JlYXRpbmcgZmlndXJlcyBkaXYgdGFncyBpbiB0aGUgaHRtbFxuICAgICAgICBjb25zdCBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGkuY2xhc3NMaXN0LmFkZCgnZmlndXJlcycpO1xuICAgICAgICBpLnNldEF0dHJpYnV0ZSgnaWQnLCAnZmlndXJlJytudW0pO1xuICAgICAgICBib2R5Lmluc2VydEJlZm9yZShpLCBmb290ZXIpO1xuICAgICAgICBmaWd1cmVzRGl2cy5wdXNoKGkpO1xuXG4gICAgfSk7XG5cbiAgICBmaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcblxuICAgICAgICBjb25zdCBjdXJyZW50RmlndXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycrZmlndXJlKTtcblxuICAgICAgICAvL2FkZGluZyBhIGJhY2tncm91bmQgaW1hZ2UgZm9yIGVhY2ggZmlndXJlOlxuICAgICAgICBjdXJyZW50RmlndXJlLnN0eWxlLmJhY2tncm91bmQgPSBgdXJsKCcuLyR7ZmlndXJlfS5zdmcnKWA7IFxuICAgICAgICAvL3B1dHRpbmcgdGhlIGZpZ3VyZXMgaW4gZGlmZmVyZW50IHBsYWNlcyBhdCBzdGFydGluZyBwb2ludFxuICAgICAgICBjdXJyZW50RmlndXJlLnN0eWxlLnRvcCA9IE1hdGgucmFuZG9tKCkqKGJvZHkuY2xpZW50SGVpZ2h0IC0gNTYpICsgJ3B4JzsgLy81NiBpcyB0aGUgc2l6ZSBvZiB0aGUgZmlndXJlcy4gYm9keS5jbGllbnRIZWlnaHQgZ2l2ZXMgdGhlIHZpZXdwb3J0IHNpemUgd2l0aG91dCB0aGUgc2Nyb2xsIGJhclxuICAgICAgICBjdXJyZW50RmlndXJlLnN0eWxlLmxlZnQgPSBNYXRoLnJhbmRvbSgpKihib2R5LmNsaWVudFdpZHRoIC0gNTYpICsgJ3B4JzsgLy81NiBpcyB0aGUgc2l6ZSBvZiB0aGUgZmlndXJlcy5cbiAgICAgICAgY3VycmVudEZpZ3VyZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgLy9zdGFydGluZyB0byBtb3ZlIHRoZSBmaWd1cmVzIGluIGRpZmZlcmVudCBkaXJlY3Rpb25zOlxuICAgICAgICBpZiAoc3RhZ2UgPT0gNCB8fCBzdGFnZSA9PSA2IHx8IHN0YWdlID09IDcpe1xuICAgICAgICAgICAgc3BlZWQgPSAnZmFzdCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZCA9ICdyZWd1bGFyJztcbiAgICAgICAgfVxuICAgICAgICBtb3ZlKGN1cnJlbnRGaWd1cmUsIHNwZWVkKTtcblxuXG4gICAgICAgIC8vZnVuY3Rpb24gZm9yIGNsaWNraW5nIGEgZmlndXJlXG4gICAgICAgIGNvbnN0IHN0YXJzQW5kUG9pbnRzID0gKCkgPT4ge1xuICAgICAgICAgICAgY3VycmVudEZpZ3VyZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJzQW5kUG9pbnRzKTtcbiAgICAgICAgICAgIGN1cnJlbnRGaWd1cmUuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoLi9zdGFycy5zdmcpJztcbiAgICAgICAgICAgIGN1cnJlbnRGaWd1cmUuc3R5bGUuYW5pbWF0aW9uID0gJ2ZpcmV3b3JrcyAwLjc1cyBlYXNlIGZvcndhcmRzIG5vcm1hbCc7XG4gICAgICAgICAgICB1c2VyU2NvcmUgKz0gMTA7XG4gICAgICAgICAgICBjdXJyZW50TGV2ZWxDbGlja3NTdWNjZXNzICs9IDE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50TGV2ZWxDbGlja3NTdWNjZXNzKTtcbiAgICAgICAgICAgIHNjb3JlLnRleHRDb250ZW50ID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNjb3JlID0gdXNlclNjb3JlO1xuXG4gICAgICAgICAgICAvL2RlbGV0aW5nIHRoZSBmaWd1cmUgZnJvbSB0aGUgRE9NXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlndXJlLnJlbW92ZSgpOyBcbiAgICAgICAgICAgIH0sIDc1MSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2FkZGluZyBldmVudExpc3RlbmVyIGZvciBlYWNoIGZpZ3VyZSBhbmQgYWRqdXN0aW5nIHRoZSBzY29yZVxuICAgICAgICBjdXJyZW50RmlndXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnNBbmRQb2ludHMpO1xuXG4gICAgICAgIC8vZnVuY3Rpb24gdGhhdCBwcmV2ZW50cyBjbGlja2luZyBvbiBmaWd1cmVzLCB3aGlsZSB0aGUgYW1idWxhbmNlcyBjb21lXG4gICAgICAgIGNvbnN0IHByZXZlbnRDbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGN1cnJlbnRGaWd1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFyc0FuZFBvaW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2F0IHRoZSBlbmQgb2YgdGhlIHN0YWdlIHRoZSB1c2VyIHdvbid0IGJlIGFibGUgdG8gY2xpY2sgdGhlIGZpZ3VyZXNcbiAgICAgICAgc2V0VGltZW91dChwcmV2ZW50Q2xpY2ssIHNlY29uZHNGb3JFYWNoU3RhZ2Vbc3RhZ2VdKjEwMDApO1xuXG4gICAgfSlcblxuICAgICBcbiAgICAvL3B1dHRpbmcgdGhlIG5ldyBuaWNrbmFtZSBpbiBsb2NhbCBzdG9yYWdlIGFuZCByZW1vdmluZyBiZXN0IHNjb3JlIG9mIG9sZCB1c2Vyc1xuICAgIG5pY2tuYW1lID0gZG9jdW1lbnQuZm9ybXMubmlja25hbWVGb3JtLm5pY2tuYW1lLnZhbHVlO1xuXG4gICAgaWYgKChuaWNrbmFtZSAhPSAnJykgJiYgKG5pY2tuYW1lICE9IG51bGwpKSB7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpICE9IG5pY2tuYW1lKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYmVzdFNjb3JlJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJyk7Ly9JdCdzIHBhcnQgb2YgdGhlIHJlbW92aW5nIG1ldGhvZCAoV2UgZG8gaXQgaW4gb3JkZXIgdG8gcHJldmVudCBjb25zb2xlLmxvZyB0byBzaG93IHRoZSBpdGVtIHRoYXQgd2UgaGF2ZSByZW1vdmVkKVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Njb3JlJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUnKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgbmlja25hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25hbWUnLCBuaWNrbmFtZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChuaWNrbmFtZSA9PSAnJykgfHwgKG5pY2tuYW1lID09IG51bGwpKSB7XG4gICAgICAgIGlmIChzdGFnZSA9PSAwKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduYW1lJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUnKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy93ZSB3aWxsIHJlbW92ZSBwYXJ0cyBvZiB0aGUgZm9ybSB0aGF0IHdlIHdvbid0IG5lZWQgYW55IG1vcmVcbiAgICBuaWNrbmFtZUZvcm1MYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIG5pY2tuYW1lRm9ybVRleHRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIFxuICAgIC8vd2Ugd2lsbCByZW1vdmUgc2lnbkluLCBzaWduVXAgYW5kIHF1aXQgYnV0dG9uc1xuICAgIHNpZ24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBxdWl0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgXG4gICAgLy93ZSB3aWxsIG1ha2UgdGhlIGJ1dHRvbiBiaWdnZXIgYW5kIHdpdGggbGlnaHRlciB0ZXh0IGNvbG9yXG4gICAgYnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzE3cHgnO1xuICAgIGJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjNTU1JztcblxuICAgIC8vdGhlIGNvcm9uYSBhcHBlYXJzXG4gICAgY29yb25hLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfSlcbiAgICAvL3RoZSBzbWFsbCBjaXJjbGVzIG9mIHRoZSBjb3JvbmEgYXBwZWFyXG4gICAgdGlueUNpcmNsZUNvbnRhaW5lci5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICB9KVxuICAgIFxuICAgIGluc3RydWN0aW9ucy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy90aGUgY29yb25hJ3MgZXllcyB3aWxsIGdldCBjbG9zZWQgYW5kIHR1cm4vbG9vayB0byB0aGUgb3RoZXIgc2lkZVxuICAgIHRvcEV5ZXNoYWRlLnN0eWxlLmFuaW1hdGlvbiA9ICdzaHV0VG9wRXllc2hhZGUgMi41cyAwLjY1cyBlYXNlIGluZmluaXRlIG5vcm1hbCc7XG4gICAgYm90dG9tRXllc2hhZGUuc3R5bGUuYW5pbWF0aW9uID0gJ3NodXRCb3R0b21FeWVzaGFkZSAyLjVzIDAuNjVzIGVhc2UgaW5maW5pdGUgbm9ybWFsJztcbiAgICBleWVzLnN0eWxlLmFuaW1hdGlvbiA9ICd0dXJuRXllcyA1cyAwLjkyNXMgZWFzZSBpbmZpbml0ZSBub3JtYWwnOyBcblxuICAgIC8vdGhlIHNjb3JlIHNlY3Rpb24gYXBwZWFyczpcbiAgICBoZWFkZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICBoZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgXG4gICAgY29uc3Qgc2NvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgI3Njb3JlIHNwYW4nKTtcbiAgICBzY29yZS50ZXh0Q29udGVudCA9IHVzZXJTY29yZTtcbiAgICBsZXQgeSA9IDA7XG4gICAgLy90aGUgbmV4dCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBieTogd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShvcGFjaXR5Q2hhbmdlKTtcbiAgICAvL2FuZCBpdCB3aWxsIHRlbGwgdGhlIGJyb3dzZXIgdGhhdCBJIHdpc2ggdG8gcGVyZm9ybSBhbiBhbmltYXRpb24gd2l0aCB0aGUgb3BhY2l0eVxuICAgIGNvbnN0IG9wYWNpdHlDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIHkgPSB5ICsgMC4wMztcbiAgICAgICAgaGVhZGVyLnN0eWxlLm9wYWNpdHkgPSBgJHt5fWA7XG5cbiAgICAgICAgaWYgKGhlYWRlci5zdHlsZS5vcGFjaXR5IDwgJzEnKXtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShvcGFjaXR5Q2hhbmdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUob3BhY2l0eUNoYW5nZSk7XG5cblxuICAgIC8vdGhlIHRpbWVyIGFwcGVhcnNcbiAgICBjb25zdCB0aW1lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lcicpO1xuICAgIHRpbWVyLnN0eWxlLmFuaW1hdGlvbiA9ICdub25lJzsvL2luIG9yZGVyIHRvIHJlc2V0IHRoZSBhbmltYXRpb24gb2YgdGhlIGVuZCBvZiB0aGUgbGV2ZWxcbiAgICB0aW1lci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25Jc09uJyk7Ly9icmluZ2luZyBiYWNrIHRoZSBvcmlnaW5hbCBjbGFzc05hbWVcbiAgICB0aW1lci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25SZW1vdmVkJyk7Ly9hIHRlbXBvcmFyeSBjbGFzc05hbWUgd2UgYWRkZWQgdG8gdGhlIHRpbWVyIGF0IHRoZSBlbmQgb2YgdGhlIGxldmVsIChub3cgd2UncmUgcmVtb3ZpbmcgaXQpXG4gICAgbGV0IHNlY29uZHMgPSBzZWNvbmRzRm9yRWFjaFN0YWdlW3N0YWdlXTtcbiAgICB0aW1lci50ZXh0Q29udGVudCA9IHNlY29uZHM7ICBcbiAgICB0aW1lci5zdHlsZS5hbmltYXRpb24gPSBgdGltZXJHcm93cyAxcyAke3NlY29uZHMrMX0gZWFzZSBub3JtYWxgO1xuICAgIFxuICAgIC8vdGhlIHN0YWdlIGFwcGVhcnMgb24gc2NyZWVuXG4gICAgY29uc3QgbGV2ZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgI2xldmVsIHNwYW4nKTtcbiAgICBsZXZlbC50ZXh0Q29udGVudCA9IHN0YWdlKzE7XG5cbiAgICAvL3Jlc2V0dGluZyB0aGUgYm9udXNBcnJvdyBhbmltYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBsZXZlbCwgc28gaXQnbGwgYmUgYWJsZSB0byB3b3JrIGFnYWluXG4gICAgYm9udXNBcnJvdy5zdHlsZS5hbmltYXRpb24gPSAnbm9uZSc7XG4gICAgYm9udXNBcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25SZW1vdmVkJyk7XG4gICAgYm9udXNBcnJvdy5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25Jc09uJyk7XG5cblxuICAgIC8vZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBmcm9tIHRoZSBjb3VudERvd24gZnVuY3Rpb24gXG4gICAgLy9hbmQgYWxzbyBmcm9tIHRoZSBjaGVjayBmdW5jdGlvblxuICAgIGNvbnN0IGNoZWNrQmFja2dyb3VuZCA9IChmaWd1cmVEaXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGZpZ3VyZURpdi5zdHlsZS5iYWNrZ3JvdW5kLmluY2x1ZGVzKCdzdGFycy5zdmcnKTtcbiAgICB9XG5cblxuICAgIC8vY291bnREb3duIGZ1bmN0aW9uIGZvciB0aGUgdGltZXIgYW5kIGNoYW5naW5nIHRoZSBjb3JvbmEncyBjb2xvciB3aGVuIG5vdCBhbGwgZmlndXJlcyB3ZXJlIGNsaWNrZWRcbiAgICBjb25zdCBjb3VudERvd24gPSAoKSA9PiB7XG4gICAgICAgIHNlY29uZHMgPSBzZWNvbmRzIC0gMTsgIFxuICAgICAgICB0aW1lci50ZXh0Q29udGVudCA9IHNlY29uZHM7XG4gICAgfVxuXG4gICAgY29uc3QgY291bnREb3duSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjb3VudERvd24sIDEwMDApOyAvL2Z1bmN0aW9uIGZvciB0aGUgdGltZXJcblxuICAgIFxuICAgIGxldCBsb2NhbE5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpO1xuXG5cbiAgICAvL2Z1bmN0aW9uIHRoYXQgd29ya3MgYWZ0ZXIgdGhlIHVzZXIgZmFpbGVkXG4gICAgY29uc3QgZmFpbGluZ1Byb2NlZHVyZSA9ICgpID0+IHtcblxuICAgICAgICBzdG9wV29ya2luZygxKTsgICBcblxuICAgICAgICAvL21ha2luZyB0aGUgY29sb3Igb2YgdGhlIGNvcm9uYSByYW5kb21seSBkaWZmZXJlbnRcbiAgICAgICAgbGV0IGggPSBNYXRoLnJhbmRvbSgpICogMzU5OyAvL3RoZSBIIG9nIHRoZSBoc2wgaXMgMC0zNTlcbiAgICAgICAgbGV0IHMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoODAgLSAyNiArIDEpICsgMjYpOy8vSSBkZWNpZGVkIHRoYXQgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIFMgaW4gaHNsIHdpbGwgYmUgYmV0d2VlbiAyNiBhbmQgODAgKGJlY2F1c2UgaSBkb24ndCBsaWtlIG1pbiBzYXR1cmF0aW9uIGFuZCBtYXggc2F0dXJhdGlvbilcbiAgICAgICAgbGV0IGwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoNzUgLSAzNSArIDEpICsgMzUpOy8vSSBkZWNpZGVkIHRoYXQgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIEwgaW4gaHNsIHdpbGwgYmUgYmV0d2VlbiAzNSBhbmQgNzUgKG5vdCB0b28gbGlnaHQgYW5kIG5vdCB0b28gZGFyaylcbiAgICAgICAgdGlueUNpcmNsZXMuZm9yRWFjaChjaXJjbGUgPT4ge1xuICAgICAgICAgICAgY2lyY2xlLnN0eWxlLmJhY2tncm91bmQgPSBgaHNsKCR7aH0sICR7c30lLCAke2x9JSlgO1xuICAgICAgICB9KTsgICBcbiAgICAgICAgXG4gICAgICAgIC8vcmVtb3ZpbmcgdGhlIG9yaWdpbmFsIGNsYXNzIGZyb20gdGhlIHRpbWVyLCByZXNldHMgaXRzIGFuaW1hdGlvblxuICAgICAgICAvL2FuZCBsZXRzIHRoZSBhbmltYXRpb24gd29yayBhZ2FpbiBuZXh0IGxldmVsIChhZnRlciBhZGRpbmcgdGhlIG9sZCBjbGFzc05hbWUgYmFjaylcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aW1lci5zdHlsZS5hbmltYXRpb24gPSAnbm9uZSc7XG4gICAgICAgICAgICB0aW1lci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25SZW1vdmVkJyk7XG4gICAgICAgICAgICB0aW1lci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25Jc09uJyk7XG4gICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICBcbiAgICAgICAgZmlndXJlc0RpdnMuZm9yRWFjaChmaWd1cmVEaXYgPT4ge1xuXG4gICAgICAgICAgICBpZiAoZmlndXJlRGl2LnN0eWxlLmJhY2tncm91bmQuaW5jbHVkZXMoJ2ZpZ3VyZScpKXtcbiAgICAgICAgICAgICAgICBmaWd1cmVEaXYuc3R5bGUudG9wID0gcGFyc2VJbnQoZmlndXJlRGl2LnN0eWxlLnRvcCkgKyAncHgnOyAvL3RoZSBtZXRob2QgcGFyc2VJbnQgdGFrZXMgb25seSB0aGUgbnVtYmVyIChhbmQgbGVhdmVzIG91dCB0aGUgc3RyaW5nICdweCcgYXR0YWNoZWQgdG8gaXQpIFxuICAgICAgICAgICAgICAgIGZpZ3VyZURpdi5zdHlsZS5sZWZ0ID0gcGFyc2VJbnQoZmlndXJlRGl2LnN0eWxlLmxlZnQpICsgJ3B4JztcblxuICAgICAgICAgICAgICAgIC8vY3JlYXRpbmcgYW1idWxhbmNlcyBhbmQgcHV0dGluZyB0aGVtIDgwcHggbGVmdCB0byBlYWNoIGZpZ3VyZVxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBpLmNsYXNzTGlzdC5hZGQoJ2FtYnVsYW5jZScpO1xuICAgICAgICAgICAgICAgIGJvZHkuaW5zZXJ0QmVmb3JlKGksIGZvb3Rlcik7XG4gICAgICAgICAgICAgICAgaS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgaS5zdHlsZS50b3AgPSBmaWd1cmVEaXYuc3R5bGUudG9wO1xuICAgICAgICAgICAgICAgIGkuc3R5bGUubGVmdCA9IChwYXJzZUludChmaWd1cmVEaXYuc3R5bGUubGVmdCkgLSA4MCkgKyBcInB4XCI7XG5cblxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZ3VyZUVudGVyc0FtYnVsYW5jZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHogPSAwO1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiA8IDIwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWd1cmVEaXYuc3R5bGUudG9wID0gcGFyc2VJbnQoZmlndXJlRGl2LnN0eWxlLnRvcCkgKyAxICsgJ3B4J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgNSAgXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9tb3ZpbmcgdGhlIGFtYnVsYW5jZSBmcm9tIHRoZSBsZWZ0IG9mIHRoZSBmaWd1cmUgdG93YXJkcyB0aGUgZmlndXJlXG4gICAgICAgICAgICAgICAgY29uc3QgbW92aW5nQW1idWxhbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcnNlSW50KGkuc3R5bGUubGVmdCkgPCBwYXJzZUludChmaWd1cmVEaXYuc3R5bGUubGVmdCkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkuc3R5bGUubGVmdCA9IChwYXJzZUludChpLnN0eWxlLmxlZnQpICsgMSkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvL21vdmluZ0FtYnVsYW5jZVBhcnQyIHdpbGwgY2FsbCB0aGlzIGZ1bmN0aW9uOlxuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVSaWdodCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaS5zdHlsZS5sZWZ0ID0gKHBhcnNlSW50KGkuc3R5bGUubGVmdCkgKyAxKSArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vbW92aW5nIHRoZSBhbWJ1bGFuY2UgZnJvbSB0aGUgZmlndXJlIHRvIHRoZSByaWdodCBzaWRlIG9mIHRoZSBzY3JlZW5cbiAgICAgICAgICAgICAgICBjb25zdCBtb3ZpbmdBbWJ1bGFuY2VQYXJ0MiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYocGFyc2VJbnQoaS5zdHlsZS5sZWZ0KSA8IG91clZpZXdQb3J0V2lkdGgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW92aW5nUmlnaHQgPSBzZXRJbnRlcnZhbChtb3ZlUmlnaHQsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkuc3R5bGUuYW5pbWF0aW9uID0gJ2Rpc2FwcGVhcnMgM3MgZWFzZSBmb3J3YXJkcyBub3JtYWwnO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gY2xlYXJJbnRlcnZhbChtb3ZpbmdSaWdodCksIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZpZ3VyZUVudGVyc0FtYnVsYW5jZSwgMTIwMCk7XG4gICAgICAgICAgICAgICAgZmlndXJlRGl2LnN0eWxlLmFuaW1hdGlvbiA9ICdmaWd1cmVCZWNvbWVzTWluaSAwLjVzIDEuMnMgZWFzZSBmb3J3YXJkcyBub3JtYWwnO1xuICAgICAgICAgICAgICAgIHNldEludGVydmFsKG1vdmluZ0FtYnVsYW5jZSwgMTUpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobW92aW5nQW1idWxhbmNlUGFydDIsIDE3MDApO1xuICAgICAgICAgICAgICAgIC8vY2xlYW5pbmcgYWxsIGZpZ3VyZXMgYW5kIGZpZ3VyZXMgYXJyYXlzIGFmdGVyIHRoZXkgZW50ZXJlZCB0aGUgYW1idWxhbmNlXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZ3VyZXNEaXZzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZ3VyZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgZmlndXJlcyA9IFtdOyBcbiAgICAgICAgICAgICAgICAgICAgZmlndXJlc0RpdnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbnVtc09mRmlncyA9IFtdO1xuICAgICAgICAgICAgICAgIH0sIDE3MDApO1xuICAgICAgICAgICAgICAgIC8vY2xlYW5pbmcgdGhlIGFtYnVsYW5jZXMgYWZ0ZXIgdGhleSBmaW5pc2hlZCB0aGVpciB3b3JrXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtYnVsYW5jZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYW1idWxhbmNlJyk7XG4gICAgICAgICAgICAgICAgICAgIGFtYnVsYW5jZXMuZm9yRWFjaChhbWJ1bGFuY2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW1idWxhbmNlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIDQ3MDApO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgfSlcblxuICAgICAgICAvL2JyaW5naW5nIGJhY2sgdGhlIGluc3RyYWN0aW9uJ3MgYm94XG4gICAgICAgIGNvbnN0IGJyaW5naW5nQmFja0luc3RydWN0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoKGxvY2FsTmFtZSA9PSAnJykgfHwgKGxvY2FsTmFtZSA9PSBudWxsKSl7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zUFRhZy50ZXh0Q29udGVudCA9IFwiWW91IGZhaWxlZCBhbmQgYSBuZXcgdmFyaWFudCBpcyBzcHJlYWRpbmcgbm93LCBidXQgZG9uJ3Qgd29ycnksIHlvdSBjYW4gdHJ5IGFnYWluIGFuZCBwcmV2ZW50IGEgd29ybGQgY2F0YXN0cm9waGUuXCI7XG4gICAgICAgICAgICB9IGVsc2UgeyAgICBcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNQVGFnLnRleHRDb250ZW50ID0gbG9jYWxOYW1lICsgJywnICsgXCIgeW91IGZhaWxlZCBhbmQgYSBuZXcgdmFyaWFudCBpcyBzcHJlYWRpbmcgbm93LCBidXQgZG9uJ3Qgd29ycnksIHlvdSBjYW4gdHJ5IGFnYWluIGFuZCBwcmV2ZW50IGEgd29ybGQgY2F0YXN0cm9waGUuXCI7IFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5zdHlsZS50b3AgPSAnY2FsYygzMCUgKyA0cHgpJztcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5zdHlsZS5hbmltYXRpb24gPSAnaW5zdHJ1Y3Rpb25zQXBwZWFycyAyLjVzIGVhc2UgZm9yd2FyZHMgbm9ybWFsJztcbiAgICAgICAgICAgIHF1aXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7Ly9xdWl0IGJ1dHRvbiBhcHBlYXJzXG4gICAgICAgICAgICBxdWl0LnN0eWxlLmFuaW1hdGlvbiA9ICdpbnN0cnVjdGlvbnNBcHBlYXJzIDIuNXMgZWFzZSBmb3J3YXJkcyBub3JtYWwnOyAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoYnJpbmdpbmdCYWNrSW5zdHJ1Y3Rpb25zLCAyMDAwKTtcblxuICAgICAgICBcbiAgICAgICAgdXNlclNjb3JlID0gdXNlclNjb3JlIC0gKGN1cnJlbnRMZXZlbENsaWNrc1N1Y2Nlc3MgKiAxMCk7Ly9UYWtpbmcgYmFjayB0aGUgc2NvcmVzIG9mIHRoaXMgbGV2ZWxcbiAgICAgICAgY29uc29sZS5sb2coJ3VzZXJTY29yZScgKyB1c2VyU2NvcmUpXG4gICAgICAgIGN1cnJlbnRMZXZlbENsaWNrc1N1Y2Nlc3MgPSAwO1xuICAgICAgICAvL3Njb3JlLnRleHRDb250ZW50ID0gdXNlclNjb3JlO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2NvcmUgPSB1c2VyU2NvcmU7Ly9DaGFuZ2luZyB0aGUgc2NvcmVzIGJhY2sgaW4gdGhlIGxvY2FsU3RvcmFnZVxuICAgIH1cbiAgIFxuXG4gICAgLy9mdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiBhbGwgdGhlIGZpZ3VyZXMgd2VyZSBjbGlja2VkIG9yIGlmIHRoZSB0aW1lIG9mIHRoZSBsZXZlbCBlbmRlZFxuICAgIGNvbnN0IGVuZExldmVsQ2hlY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmIChmaWd1cmVzRGl2cy5ldmVyeShjaGVja0JhY2tncm91bmQpKSB7ICAvL1wiZXZlcnlcIiByZXR1cm5zIHRydWUgaWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSBmb3IgYWxsIGVsZW1lbnRzIGluIHRoZSBhcnJheSAoaWYgYWxsIGZpZ3VyZXMgYmVjYW1lIHN0YXJzKVxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChlbmRMZXZlbCk7XG4gICAgICAgICAgICBzdG9wV29ya2luZygxKTsgLy90aGUgc3RhcnMgd2lsbCBzdG9wIG1vdmluZ1xuICAgICAgICAgICAgc3RhZ2UgKz0gMTtcbiAgICAgICAgICAgIHVzZXJzQ3VycmVudFN0YWdlKHN0YWdlKTsvL3VwZGF0aW5nIFwiY3VycmVudFN0YWdlXCIgdmFyaWFibGUsIHdoaWNoIGlzIGxvY2F0ZWQgaW4gc3RvcnlMaW5lLmpzIFxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudERvd25JbnRlcnZhbCk7IC8vdGhlIGNsb2NrIHdpbGwgc3RvcFxuICAgICAgICAgICAgdGltZXIuc3R5bGUuYW5pbWF0aW9uID0gJ25vbmUnO1xuICAgICAgICAgICAgdGltZXIuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9uUmVtb3ZlZCcpO1xuICAgICAgICAgICAgdGltZXIuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uSXNPbicpOy8vcmVtb3ZpbmcgdGhpcyBjbGFzcyByZXNldHMgdGhlIGFuaW1hdGlvbiBmb3IgdGhpcyBlbGVtZW50IGFuZCBsZXRzIHVzIHVzZSBpdCBhZ2FpbiBhZnRlciBhZGRpbmcgdGhpcyBjbGFzcyBiYWNrXG5cbiAgICAgICAgICAgIGlmIChzZWNvbmRzICE9IDApIHtcbiAgICAgICAgICAgICAgICB0aW1lci5zdHlsZS5hbmltYXRpb24gPSBgdGltZXJHcm93c0FnYWluIDFzICR7c2Vjb25kc30gZWFzZSBub3JtYWxgO1xuXG4gICAgICAgICAgICAgICAgYm9udXNBcnJvdy5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgIGJvbnVzQXJyb3cuc3R5bGUuYW5pbWF0aW9uID0gYGFycm93R3Jvd3MgMXMgJHtzZWNvbmRzfSBlYXNlIG5vcm1hbGA7XG4gICAgICAgICAgICAgICAgYm9udXNBcnJvdy5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25SZW1vdmVkJyk7XG4gICAgICAgICAgICAgICAgYm9udXNBcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25Jc09uJyk7Ly9yZW1vdmluZyB0aGlzIGNsYXNzIHJlc2V0cyB0aGUgYW5pbWF0aW9uIGZvciB0aGlzIGVsZW1lbnQgYW5kIGxldHMgdXMgdXNlIGl0IGFnYWluIGFmdGVyIGFkZGluZyB0aGlzIGNsYXNzIGJhY2tcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYm9udXNBcnJvdy5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICAgICAgICAgIH0sIChzZWNvbmRzKjEwMDApKTtcblxuICAgICAgICAgICAgICAgIGxldCBib251cyA9IChzZWNvbmRzICogMTApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSAxO1xuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCk9PntcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIGk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA8PSBib251cyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyU2NvcmUgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlLnRleHRDb250ZW50ID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNjb3JlID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5iZXN0U2NvcmUgPCB1c2VyU2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuYmVzdFNjb3JlID0gdXNlclNjb3JlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSAxKSB7IC8vaWYgdGhlcmUgaXMgYW4gQXV0aCB1c2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURvYyhkb2MoZGF0YWJhc2UsICd1c2Vyc1Njb3JlJywgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjb3JlOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Njb3JlIHVwZGF0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vY2xlYW5pbmcgdGhlIGZpZ3VyZXMgYXJyYXlzIChpbiBvcmRlciB0byBnZXQgcmVhZHkgZm9yIG5leHQgbGV2ZWwpOlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZmlndXJlcyA9IFtdOyBcbiAgICAgICAgICAgICAgICBmaWd1cmVzRGl2cyA9IFtdO1xuICAgICAgICAgICAgICAgIG51bXNPZkZpZ3MgPSBbXTtcbiAgICAgICAgICAgIH0sIDc1MSk7IC8vYWZ0ZXIgdGhlIGxhc3QgZmlyZXdvcmsgZW5kZWQgaXRzIHdvcmtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9oaWRpbmcgdGhlIGNvcm9uYVxuICAgICAgICAgICAgY29yb25hLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9icmluZ2luZyBiYWNrIHRoZSBpbnN0cmFjdGlvbidzIGJveFxuICAgICAgICAgICAgaWYoKGxvY2FsTmFtZSA9PSAnJykgfHwgKGxvY2FsTmFtZSA9PSBudWxsKSl7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zUFRhZy50ZXh0Q29udGVudCA9IHBBbm9uW3N0YWdlXTsgLy9wQW5vbiBpcyB0aGUgdGV4dCBhcHBlYXJzIGluIHN0b3J5TGluZS5qc1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNQVGFnLnRleHRDb250ZW50ID0gbG9jYWxOYW1lICsgJywgJyArIHBbc3RhZ2VdOyAvLy8vcCBpcyB0aGUgdGV4dCBhcHBlYXJzIGluIHN0b3J5TGluZS5qc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUuYW5pbWF0aW9uID0gJ2luc3RydWN0aW9uc0FwcGVhcnMgMnMgZWFzZSBmb3J3YXJkcyBub3JtYWwnOyBcbiAgICAgICAgICAgIHF1aXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7Ly9xdWl0IGJ1dHRvbiBhcHBlYXJzXG4gICAgICAgICAgICBxdWl0LnN0eWxlLmFuaW1hdGlvbiA9ICdpbnN0cnVjdGlvbnNBcHBlYXJzIDJzIGVhc2UgZm9yd2FyZHMgbm9ybWFsJztcblxuICAgICAgICAgICAgLy9EZWZpbmluZyB0aGUgYmVzdFNjb3JlIGluIHRoZSBsb2NhbFN0b3JhZ2UsIGFmdGVyIGNvbXBsZXRpbmcgdGhlIGxldmVsIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgaWYgKChsb2NhbFN0b3JhZ2UuYmVzdFNjb3JlID09ICcnKSB8fCAobG9jYWxTdG9yYWdlLmJlc3RTY29yZSA9PSBudWxsKSkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5iZXN0U2NvcmUgPSB1c2VyU2NvcmU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvY2FsU3RvcmFnZS5iZXN0U2NvcmUgPCB1c2VyU2NvcmUpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuYmVzdFNjb3JlID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudExldmVsQ2xpY2tzU3VjY2VzcyA9IDA7XG5cblxuICAgICAgICB9IGVsc2UgaWYgKHNlY29uZHMgPT0gMCAmJiBmaWd1cmVzRGl2cy5ldmVyeShjaGVja0JhY2tncm91bmQpID09IGZhbHNlKSB7IC8vaWYgbm90IGFsbCBmaWd1cmVzIGJlY2FtZSBzdGFycyBhbmQgdGhlIHNlY29uZHMgZW5kZWRcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZW5kTGV2ZWwpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudERvd25JbnRlcnZhbCk7IC8vdGhlIGNsb2NrIHdpbGwgc3RvcFxuICAgICAgICAgICAgZmFpbGluZ1Byb2NlZHVyZSgpOy8vZnVuY3Rpb24gdGhhdCBicmluZ3MgdGhlIGFtYnVsYW5jZXNcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgY29uc3QgZW5kTGV2ZWwgPSBzZXRJbnRlcnZhbChlbmRMZXZlbENoZWNrLCAxKTsgXG5cbn0pO1xuXG5cblxuXG5cblxuXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJoZWFkZXIiLCJjdXJzb3IiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0QXR0cmlidXRlIiwicGFnZVkiLCJwYWdlWCIsImNvcm9uYUNpcmNsZSIsImFuZ2xlIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJpIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJuIiwidG9wIiwiYm90dG9tIiwicmlnaHQiLCJsZWZ0IiwiY29udGFpbmVyQW5nbGUiLCJtIiwibCIsImN1cnJlbnRDb250YWluZXIiLCJhcHBlbmQiLCJleWVzIiwieiIsInkiLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwiYyIsImNoYXJDb2RlQXQiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsInB1c2giLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsIkRlZmVycmVkIiwiY29uc3RydWN0b3IiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsImVycm9yIiwidmFsdWUiLCJjYXRjaCIsIm5hdmlnYXRvciIsImlzTW9iaWxlQ29yZG92YSIsInRlc3QiLCJpc0Jyb3dzZXJFeHRlbnNpb24iLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImlkIiwiaXNSZWFjdE5hdGl2ZSIsImlzSUUiLCJ1YSIsImluZGV4T2YiLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJjdXN0b21EYXRhIiwic3VwZXIiLCJuYW1lIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsImNyZWF0ZSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJrZXkiLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImEiLCJiIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJrIiwiaW5jbHVkZXMiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsInF1ZXJ5c3RyaW5nUGFyYW1zIiwicGFyYW1zIiwiZW50cmllcyIsImFycmF5VmFsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicXVlcnlzdHJpbmdEZWNvZGUiLCJxdWVyeXN0cmluZyIsIm9iaiIsInNwbGl0IiwidG9rZW4iLCJkZWNvZGVVUklDb21wb25lbnQiLCJleHRyYWN0UXVlcnlzdHJpbmciLCJ1cmwiLCJxdWVyeVN0YXJ0IiwiZnJhZ21lbnRTdGFydCIsInN1YnN0cmluZyIsIk9ic2VydmVyUHJveHkiLCJleGVjdXRvciIsIm9uTm9PYnNlcnZlcnMiLCJvYnNlcnZlcnMiLCJ1bnN1YnNjcmliZXMiLCJvYnNlcnZlckNvdW50IiwidGFzayIsImZpbmFsaXplZCIsInRoZW4iLCJuZXh0IiwiZm9yRWFjaE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJjbG9zZSIsImNvbXBsZXRlIiwic3Vic2NyaWJlIiwibmV4dE9yT2JzZXJ2ZXIiLCJtZXRob2RzIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJub29wIiwidW5zdWIiLCJ1bnN1YnNjcmliZU9uZSIsImJpbmQiLCJmaW5hbEVycm9yIiwiZm4iLCJzZW5kT25lIiwiY29uc29sZSIsImVyciIsIl9kZWxlZ2F0ZSIsInByb21pc2lmeVJlcXVlc3QiLCJyZXF1ZXN0IiwiZXJyb3JNZXNzYWdlIiwib25zdWNjZXNzIiwiZXZlbnQiLCJ0YXJnZXQiLCJyZXN1bHQiLCJvbmVycm9yIiwiX2EiLCJEQldyYXBwZXIiLCJfZGIiLCJvYmplY3RTdG9yZU5hbWVzIiwidHJhbnNhY3Rpb24iLCJzdG9yZU5hbWVzIiwibW9kZSIsIlRyYW5zYWN0aW9uV3JhcHBlciIsImNhbGwiLCJjcmVhdGVPYmplY3RTdG9yZSIsInN0b3JlTmFtZSIsIm9wdGlvbnMiLCJPYmplY3RTdG9yZVdyYXBwZXIiLCJfdHJhbnNhY3Rpb24iLCJvbmNvbXBsZXRlIiwib25hYm9ydCIsIm9iamVjdFN0b3JlIiwiX3N0b3JlIiwiaW5kZXgiLCJJbmRleFdyYXBwZXIiLCJjcmVhdGVJbmRleCIsImtleXBhdGgiLCJnZXQiLCJwdXQiLCJkZWxldGUiLCJjbGVhciIsIl9pbmRleCIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIkRFRkFVTFRfRU5UUllfTkFNRSIsIlByb3ZpZGVyIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwiaW5zdGFuY2VzIiwiTWFwIiwiaW5zdGFuY2VzRGVmZXJyZWQiLCJpbnN0YW5jZXNPcHRpb25zIiwib25Jbml0Q2FsbGJhY2tzIiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiY2xlYXJJbnN0YW5jZSIsImFzeW5jIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwibWFwIiwiSU5URVJOQUwiLCJfZGVsZXRlIiwiaXNDb21wb25lbnRTZXQiLCJnZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJhcmdzIiwibG9nTGV2ZWwiLCJub3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJsb2ciLCJpbmZvIiwid2FybiIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJjb25maWciLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsIlNES19WRVJTSU9OIiwiZ2V0QXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwidXBncmFkZUNhbGxiYWNrIiwiZGIiLCJvbGRWZXJzaW9uIiwiaW5kZXhlZERCIiwib3BlbiIsIm9udXBncmFkZW5lZWRlZCIsIm5ld1ZlcnNpb24iLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwidHgiLCJjb21wdXRlS2V5IiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsImhlYXJ0YmVhdHMiLCJzb21lIiwic2luZ2xlRGF0ZUhlYXJ0YmVhdCIsImhiVGltZXN0YW1wIiwidmFsdWVPZiIsIm92ZXJ3cml0ZSIsImhlYXJ0YmVhdHNUb1NlbmQiLCJ1bnNlbnRFbnRyaWVzIiwiaGVhcnRiZWF0c0NhY2hlIiwibWF4U2l6ZSIsInNsaWNlIiwiaGVhcnRiZWF0RW50cnkiLCJmaW5kIiwiaGIiLCJkYXRlcyIsImNvdW50Qnl0ZXMiLCJwb3AiLCJleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlciIsImhlYWRlclN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJfY2FuVXNlSW5kZXhlZERCUHJvbWlzZSIsInJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2siLCJwcmVFeGlzdCIsIkRCX0NIRUNLX05BTUUiLCJzZWxmIiwiZGVsZXRlRGF0YWJhc2UiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiY29tbW9uanNHbG9iYWwiLCJlc20iLCJnb29nIiwiYWEiLCJiYSIsImVhIiwiTWF0aCIsInJhbmRvbSIsImZhIiwiaGEiLCJhcHBseSIsImFyZ3VtZW50cyIsImlhIiwiZCIsInVuc2hpZnQiLCJxIiwidG9TdHJpbmciLCJqYSIsInQiLCJaIiwiVmIiLCJmIiwiaCIsInYiLCJzIiwibyIsImxhIiwibmEiLCJNIiwiaGFzT3duUHJvcGVydHkiLCJkYSIsInNoaWZ0IiwibWEiLCJxYSIsImNvbmNhdCIsInJhIiwic2EiLCJ4IiwidGEiLCJ0cmltIiwiZXhlYyIsInciLCJ2YSIsIndhIiwidXNlckFnZW50IiwieGEiLCJ5YSIsInphIiwiQWEiLCJDYSIsIk5hIiwiSGEiLCJJYSIsIkphIiwiS2EiLCJ0b0xvd2VyQ2FzZSIsIkxhIiwiTWEiLCJkb2N1bWVudE1vZGUiLCJPYSIsIlBhIiwiUWEiLCJwYXJzZUZsb2F0IiwiU2EiLCJHYSIsIlJhIiwibWF4IiwicGFyc2VJbnQiLCJVYSIsIlZhIiwiZGVmaW5lUHJvcGVydHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVmYXVsdFByZXZlbnRlZCIsIkEiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJzdGF0ZSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwiY2hhbmdlZFRvdWNoZXMiLCJzcmNFbGVtZW50Iiwibm9kZU5hbWUiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsIldhIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsIkIiLCJYYSIsIllhIiwibGlzdGVuZXIiLCJwcm94eSIsImNhcHR1cmUiLCJjYSIsIlphIiwiJGEiLCJiYiIsInNwbGljZSIsImFiIiwiY2IiLCJmYiIsIm9uY2UiLCJnYiIsIk4iLCJpYiIsImpiIiwibWIiLCJrYiIsImF0dGFjaEV2ZW50IiwibGIiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiTyIsIm5iIiwib2IiLCJkZXRhY2hFdmVudCIsInBiIiwiaGFuZGxlRXZlbnQiLCJDIiwiUCIsIkkiLCJEIiwicWIiLCJyYiIsInNiIiwidGIiLCJBYiIsInZiIiwiaiIsIndiIiwicmVzZXQiLCJ5YiIsInNldFRpbWVvdXQiLCJ6YiIsIkRiIiwiQmIiLCJDYiIsIkViIiwiRmIiLCJTIiwiY2xlYXJUaW1lb3V0IiwiR2IiLCJOdW1iZXIiLCJIYiIsInN0YXJ0IiwiSWIiLCJFIiwiSmIiLCJLYiIsIkxiIiwiTWIiLCJGIiwicGFyc2UiLCJQYiIsIkgiLCJSYiIsIlNiIiwiVGIiLCJVYiIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiSiIsInNpemUiLCJLIiwiV2IiLCJOT19FUlJPUiIsInhiIiwiVElNRU9VVCIsIlhiIiwiWWIiLCJaYiIsIiRiIiwiY2MiLCJMIiwiT1BFTiIsImFjIiwiYmMiLCJkYyIsIlgiLCJWIiwiZWMiLCJXIiwiWSIsIiQiLCJVIiwiZmMiLCJYTUxIdHRwUmVxdWVzdCIsImdjIiwiaGMiLCJpYyIsImpjIiwia2MiLCJsYyIsIm1jIiwibmMiLCJyIiwiRyIsIk5iIiwicWMiLCJCYSIsInRjIiwidmMiLCJzYyIsIndjIiwicmMiLCJpc05hTiIsInN1YnN0ciIsInhjIiwiZWIiLCJwYyIsInVjIiwiYWJvcnQiLCJ5YyIsInpjIiwiQWMiLCJCYyIsIkNjIiwia2EiLCJRIiwiRGEiLCJFYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiRGMiLCJSIiwib2EiLCJFYyIsIkZjIiwiR2MiLCJIYyIsIkljIiwiS2MiLCJUIiwiSmMiLCJMYyIsImdhIiwib2MiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsInN0cmVhbSIsIk9iIiwiY2FuY2VsIiwiUWIiLCJNYyIsIk9jIiwiUGMiLCJRYyIsIlJjIiwiU2MiLCJUYyIsImRkIiwiWmMiLCJVYyIsIiRjIiwiZmxvb3IiLCJhYnMiLCJkZWNvZGVVUkkiLCJlbmNvZGVVUkkiLCJjZCIsIlZjIiwiV2MiLCJYYyIsIlljIiwiTmMiLCJlZCIsImdkIiwiaGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJqZCIsImtkIiwibGQiLCJtZCIsIm9kIiwib25sb2FkIiwib250aW1lb3V0IiwicGQiLCJxZCIsInJlYWR5U3RhdGUiLCJyZCIsInN0YXR1cyIsInJlc3BvbnNlVHlwZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIkhlYWRlcnMiLCJ1ZCIsInRkIiwic2QiLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJmZXRjaCIsIlJlcXVlc3QiLCJhcnJheUJ1ZmZlciIsIlRhIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJ0ZXh0IiwiVWludDhBcnJheSIsImRvbmUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwidmQiLCJ3ZCIsInhkIiwieWQiLCJwYSIsInpkIiwiQ2QiLCJEZCIsIkVkIiwiRmEiLCJwcm90b2NvbCIsIkFkIiwibW96UmVzcG9uc2VBcnJheUJ1ZmZlciIsIkdkIiwiRmQiLCJIZCIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsIklkIiwieG1sSHR0cEZhY3RvcnkiLCJzdXBwb3J0c0Nyb3NzRG9tYWluWGhyIiwiY29uY3VycmVudFJlcXVlc3RMaW1pdCIsImZhc3RIYW5kc2hha2UiLCJmb3JjZUxvbmdQb2xsaW5nIiwiZGV0ZWN0QnVmZmVyaW5nUHJveHkiLCJKZCIsIktkIiwic2VuZEJlYWNvbiIsIkltYWdlIiwiTGQiLCJNZCIsIlFkIiwiUGQiLCJyb3VuZCIsIm1pbiIsIk9kIiwiUmQiLCJOZCIsIm5kIiwiYWQiLCJiZCIsImhvc3RuYW1lIiwicG9ydCIsIlNkIiwiVGQiLCJtZXNzYWdlVXJsUGFyYW1zIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwiaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSIsInNlbmRSYXdKc29uIiwiaHR0cFNlc3Npb25JZFBhcmFtIiwiVWQiLCJfX3NtX18iLCJWZCIsInRvVXBwZXJDYXNlIiwiRm9ybURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ0aW1lb3V0IiwiQmQiLCJfX2RhdGFfXyIsImNyZWF0ZVdlYkNoYW5uZWwiLCJIVFRQX0VSUk9SIiwiQ09NUExFVEUiLCJFdmVudFR5cGUiLCJDTE9TRSIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsImNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQiLCJnZXRTdGF0RXZlbnRUYXJnZXQiLCJFcnJvckNvZGUiLCJFdmVudCIsIlN0YXQiLCJ1YiIsIlBST1hZIiwiTk9QUk9YWSIsIkZldGNoWG1sSHR0cEZhY3RvcnkiLCJXZWJDaGFubmVsIiwiWGhySW8iLCJ1aWQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ0b0tleSIsImlzRXF1YWwiLCJVTkFVVEhFTlRJQ0FURUQiLCJHT09HTEVfQ1JFREVOVElBTFMiLCJGSVJTVF9QQVJUWSIsIk1PQ0tfVVNFUiIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJVTkFWQUlMQUJMRSIsIkRBVEFfTE9TUyIsInVzZXIiLCJnZXRUb2tlbiIsImludmFsaWRhdGVUb2tlbiIsImVucXVldWVSZXRyeWFibGUiLCJzaHV0ZG93biIsImN1cnJlbnRVc2VyIiwiZm9yY2VSZWZyZXNoIiwiYXV0aCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImdldFVpZCIsImdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkiLCJ0dCIsImFwcENoZWNrIiwiYWRkVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuTGlzdGVuZXIiLCJudCIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwic3QiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsIml0Iiwic3RhdGljIiwicnQiLCJvdCIsImV2ZXJ5IiwiYXQiLCJzZWNvbmRzIiwibmFub3NlY29uZHMiLCJmcm9tTWlsbGlzIiwiZ2V0VGltZSIsInRvRGF0ZSIsInRvTWlsbGlzIiwiX2NvbXBhcmVUbyIsInRvSlNPTiIsInBhZFN0YXJ0IiwiY3QiLCJ0aW1lc3RhbXAiLCJjb21wYXJlVG8iLCJ0b01pY3Jvc2Vjb25kcyIsInRvVGltZXN0YW1wIiwiaHQiLCJsdCIsImZ0IiwiZHQiLCJzZWdtZW50cyIsIm9mZnNldCIsImxlbiIsImNvbXBhcmF0b3IiLCJjaGlsZCIsImxpbWl0IiwiY29uc3RydWN0IiwicG9wRmlyc3QiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc0VtcHR5IiwiaXNQcmVmaXhPZiIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJ0b0FycmF5IiwiX3QiLCJjYW5vbmljYWxTdHJpbmciLCJ3dCIsIm10IiwiaXNWYWxpZElkZW50aWZpZXIiLCJpc0tleUZpZWxkIiwiZ3QiLCJmaWVsZHMiLCJzb3J0IiwiY292ZXJzIiwicHQiLCJiaW5hcnlTdHJpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiSXQiLCJSZWdFeHAiLCJUdCIsIm5hbm9zIiwiRXQiLCJBdCIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlJ0IiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwiYnQiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJQdCIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJWdCIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJ1c2VGZXRjaFN0cmVhbXMiLCJ2dCIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiaXNEZWZhdWx0RGF0YWJhc2UiLCJTdCIsIkR0IiwieHQiLCJwYXRoIiwiZnJvbVN0cmluZyIsImVtcHR5UGF0aCIsImNvbGxlY3Rpb25Hcm91cCIsImhhc0NvbGxlY3Rpb25JZCIsImdldENvbGxlY3Rpb25Hcm91cCIsImdldENvbGxlY3Rpb25QYXRoIiwiTXQiLCJIdCIsIk90IiwiYm9vbGVhblZhbHVlIiwiYnl0ZXNWYWx1ZSIsInJlZmVyZW5jZVZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJhcnJheVZhbHVlIiwiRnQiLCIkdCIsIkJ0IiwiTHQiLCJVdCIsImZyb21OYW1lIiwiR3QiLCJLdCIsIlF0IiwianQiLCJXdCIsInp0IiwiWHQiLCJmaWVsZCIsImdldEZpZWxkc01hcCIsInNldEFsbCIsImFwcGx5Q2hhbmdlcyIsImNsb25lIiwiWnQiLCJ0ZSIsImRvY3VtZW50VHlwZSIsInJlYWRUaW1lIiwiZG9jdW1lbnRTdGF0ZSIsImVtcHR5IiwiY29udmVydFRvRm91bmREb2N1bWVudCIsImNvbnZlcnRUb05vRG9jdW1lbnQiLCJjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQiLCJzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJzZXRIYXNMb2NhbE11dGF0aW9ucyIsInNldFJlYWRUaW1lIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNQZW5kaW5nV3JpdGVzIiwiaXNWYWxpZERvY3VtZW50IiwiaXNGb3VuZERvY3VtZW50IiwiaXNOb0RvY3VtZW50IiwiaXNVbmtub3duRG9jdW1lbnQiLCJtdXRhYmxlQ29weSIsInVlIiwiYWUiLCJkb2N1bWVudEtleSIsImxhcmdlc3RCYXRjaElkIiwiY2UiLCJoZSIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwibGUiLCJmZSIsIm9wIiwiZGlyIiwiaW5jbHVzaXZlIiwicG9zaXRpb24iLCJfZSIsInZlIiwiRGUiLCJ3ZSIsImlzRG9jdW1lbnRLZXkiLCJnZSIsInllIiwiRWUiLCJBZSIsIlJlIiwiYmUiLCJwZSIsIkllIiwibWF0Y2hlcyIsIlRlIiwibnVsbFZhbHVlIiwiUGUiLCJWZSIsIlNlIiwiQ2UiLCJleHBsaWNpdE9yZGVyQnkiLCJsaW1pdFR5cGUiLCJOZSIsImtlIiwiTWUiLCJCZSIsIkZlIiwiT2UiLCJrZXlGaWVsZCIsIkxlIiwicWUiLCJHZSIsIktlIiwiZGUiLCJRZSIsIldlIiwiemUiLCJIZSIsIkplIiwiWWUiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIkN0IiwiWGUiLCJaZSIsIm5uIiwic24iLCJybiIsIm9uIiwidW4iLCJlbiIsImNuIiwidG4iLCJhbiIsImVsZW1lbnRzIiwiaG4iLCJkbiIsInRyYW5zZm9ybVJlc3VsdHMiLCJfbiIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJpc05vbmUiLCJ3biIsIm1uIiwiZ24iLCJFbiIsImJuIiwiZmllbGRUcmFuc2Zvcm1zIiwiQW4iLCJwcmVjb25kaXRpb24iLCJSbiIsInluIiwiUG4iLCJUbiIsInBuIiwiSW4iLCJmaWVsZE1hc2siLCJWbiIsInZuIiwiU24iLCJjb3VudCIsIkRuIiwiQ24iLCJObiIsImtuIiwibWFwS2V5Rm4iLCJlcXVhbHNGbiIsImlubmVyIiwiaW5uZXJTaXplIiwiTW4iLCJyb290IiwiRm4iLCJFTVBUWSIsImluc2VydCIsImNvcHkiLCJCTEFDSyIsInJlbW92ZSIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwiZ2V0SXRlcmF0b3IiLCJPbiIsImdldEl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvciIsImdldFJldmVyc2VJdGVyYXRvckZyb20iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrTWF4RGVwdGgiLCJjaGVjayIsInBvdyIsIiRuIiwiZmlyc3QiLCJsYXN0IiwiZm9yRWFjaEluUmFuZ2UiLCJmb3JFYWNoV2hpbGUiLCJmaXJzdEFmdGVyT3JFcXVhbCIsIkJuIiwidW5pb25XaXRoIiwiaXRlciIsIlVuIiwicW4iLCJHbiIsIktuIiwiUW4iLCJqbiIsIlduIiwiem4iLCJIbiIsIkpuIiwiWW4iLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJYbiIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiWm4iLCJyZW1vdmVkVGFyZ2V0SWRzIiwidHMiLCJ0YXJnZXRJZCIsImVzIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJucyIsInJzIiwiZXQiLCJzcyIsImlzIiwidXQiLCJmb3JFYWNoVGFyZ2V0IiwicmVtb3ZlVGFyZ2V0IiwibmV3Tm9Eb2N1bWVudCIsInl0IiwicHVycG9zZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJvcyIsImFzYyIsImRlc2MiLCJ1cyIsImluIiwiYXMiLCJjcyIsImhzIiwibHMiLCJmcyIsImZyb21UaW1lc3RhbXAiLCJkcyIsIl9zIiwiTHMiLCJ3cyIsIm1zIiwiSXMiLCJncyIsInBzIiwiVHMiLCJ2cyIsImRvY3VtZW50cyIsIlNzIiwic3RydWN0dXJlZFF1ZXJ5IiwicGFyZW50IiwiY29sbGVjdGlvbklkIiwiYWxsRGVzY2VuZGFudHMiLCJ1bmFyeUZpbHRlciIsIk1zIiwiZmllbGRGaWx0ZXIiLCJrcyIsImNvbXBvc2l0ZUZpbHRlciIsIndoZXJlIiwiZGlyZWN0aW9uIiwiTnMiLCJiZWZvcmUiLCJEcyIsInlzIiwieHMiLCJPcyIsInhlIiwiJHMiLCJGcyIsInJlZHVjZSIsImZpZWxkUGF0aCIsImZyb21TZXJ2ZXJGb3JtYXQiLCJOYU4iLCJCcyIsImZpZWxkUGF0aHMiLCJ3aSIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiSWkiLCJWaSIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZSIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJtdXRhdGlvblJlc3VsdHMiLCJhcHBseVRvTG9jYWxWaWV3IiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJ2aSIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsImRvY1ZlcnNpb25zIiwiU2kiLCJtdXRhdGlvbiIsImdldEtleSIsIkRpIiwic2VxdWVuY2VOdW1iZXIiLCJsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwid2l0aFNlcXVlbmNlTnVtYmVyIiwid2l0aFJlc3VtZVRva2VuIiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJDaSIsIkp0IiwiTGkiLCJVZSIsInppIiwiZWUiLCJuZSIsInNlIiwiaWUiLCJyZSIsIm9lIiwicnIiLCJvciIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRFbnRyaWVzIiwiYWRkRmllbGRJbmRleCIsImRlbGV0ZUZpZWxkSW5kZXgiLCJnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCIsImdldEZpZWxkSW5kZXgiLCJnZXRGaWVsZEluZGV4ZXMiLCJnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUiLCJ1cGRhdGVDb2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVJbmRleEVudHJpZXMiLCJfciIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiRXIiLCJWciIsIkhyIiwiaW5kZXhNYW5hZ2VyIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJnZXRFbnRyeSIsIlVzIiwicXMiLCJHcyIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsIktzIiwiUXMiLCIkZSIsImpzIiwiV3MiLCJnZXRBbGxGcm9tQ29sbGVjdGlvbiIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwibmV3SW52YWxpZERvY3VtZW50IiwiSnIiLCJmcm9tQ2FjaGUiLCJ6cyIsIkhzIiwiZG9jQ2hhbmdlcyIsImRvYyIsIllyIiwiWXMiLCJYcyIsIlpzIiwidGkiLCJlaSIsIlhyIiwicGVyc2lzdGVuY2UiLCJuaSIsInNpIiwiaWkiLCJyaSIsIm9pIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldFRhcmdldENhY2hlIiwiZ2V0QnVuZGxlQ2FjaGUiLCJ1aSIsImdldEluZGV4TWFuYWdlciIsImdldE11dGF0aW9uUXVldWUiLCJhaSIsInNldEluZGV4TWFuYWdlciIsImNvbGxlY3RHYXJiYWdlIiwicnVuVHJhbnNhY3Rpb24iLCJjb2xsZWN0IiwidG8iLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJjaSIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJubyIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJybyIsImdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkIiwidW8iLCJyZWZlcmVuY2VEZWxlZ2F0ZSIsImFvIiwiZ2V0VGFyZ2V0RGF0YSIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwibG8iLCJqZSIsImhpIiwid28iLCJfaSIsImdldEJ1bmRsZU1ldGFkYXRhIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiY3JlYXRlVGltZSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsInF1ZXJ5IiwiYnVuZGxlZFF1ZXJ5IiwibW8iLCJvdmVybGF5cyIsIm1pIiwiZ2V0T3ZlcmxheSIsInNhdmVPdmVybGF5cyIsInJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbiIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwIiwiZ28iLCJnaSIsInlvIiwieWkiLCJwaSIsImFkZFJlZmVyZW5jZSIsIlRpIiwicmVtb3ZlUmVmZXJlbmNlIiwiRWkiLCJBaSIsIlJpIiwiYmkiLCJQaSIsImNvbnRhaW5zS2V5IiwicG8iLCJjaGVja0VtcHR5IiwiYWRkTXV0YXRpb25CYXRjaCIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJ4aSIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJOaSIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJJbyIsImtpIiwiZG9jcyIsImFkZEVudHJ5IiwicmVtb3ZlRW50cnkiLCJnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwIiwiTWkiLCJuZXdDaGFuZ2VCdWZmZXIiLCJUbyIsImdldFNpemUiLCJjaGFuZ2VzIiwiY2hhbmdlc0FwcGxpZWQiLCJhc3NlcnROb3RBcHBsaWVkIiwiZ2V0RnJvbUNhY2hlIiwiZ2V0QWxsRnJvbUNhY2hlIiwiRW8iLCJPaSIsImxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJoaWdoZXN0VGFyZ2V0SWQiLCJGaSIsIiRpIiwidGFyZ2V0Q291bnQiLCJCaSIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJhZGRUYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXRzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJnZXRUYXJnZXRDb3VudCIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsIkFvIiwiVWkiLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsImdldERvY3VtZW50T3ZlcmxheUNhY2hlIiwiUm8iLCJxaSIsIkdpIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiS2kiLCJvbkNvbW1pdHRlZExpc3RlbmVycyIsImFkZE9uQ29tbWl0dGVkTGlzdGVuZXIiLCJjdXJyZW50U2VxdWVuY2VOdW1iZXIiLCJibyIsIlFpIiwiamkiLCJmcm9tUGF0aCIsIkhpIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIk5vIiwiYWN0aXZlVGFyZ2V0SWRzIiwiWGkiLCJaaSIsIllpIiwidXBkYXRlVGltZU1zIiwiTW8iLCJGciIsIiRyIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJPbyIsIkJyIiwiRm8iLCJMciIsIlVyIiwicXIiLCJHciIsIktyIiwiUXIiLCIkbyIsIkJhdGNoR2V0RG9jdW1lbnRzIiwiQ29tbWl0IiwiUnVuUXVlcnkiLCJCbyIsImpyIiwiV3IiLCJ6ciIsIm9uTWVzc2FnZSIsIlpyIiwiZW8iLCJMbyIsImRhdGFiYXNlSW5mbyIsInNvIiwiaW8iLCJvbyIsImNvIiwiaG8iLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJxbyIsIkdvIiwiS28iLCJ0aW1lcklkIiwiZm8iLCJfbyIsImVucXVldWVBZnRlckRlbGF5Iiwic2tpcERlbGF5IiwiUW8iLCJhdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciIsIlBvIiwiVm8iLCJ2byIsIlNvIiwiRG8iLCJDbyIsInhvIiwia28iLCJVbyIsImVucXVldWVBbmRGb3JnZXQiLCJqbyIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwiUnMiLCJhZGRUYXJnZXQiLCJDcyIsImxhYmVscyIsIldvIiwiem8iLCJsYXN0U3RyZWFtVG9rZW4iLCJIbyIsInN0cmVhbVRva2VuIiwiVnMiLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwiSm8iLCJZbyIsIlhvIiwid3JpdGVzIiwidXBkYXRlIiwidXBkYXRlTWFzayIsInZlcmlmeSIsInVwZGF0ZVRyYW5zZm9ybXMiLCJzZXRUb1NlcnZlclZhbHVlIiwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzIiwicmVtb3ZlQWxsRnJvbUFycmF5IiwiaW5jcmVtZW50IiwiY3VycmVudERvY3VtZW50IiwiYnMiLCJhdXRoQ3JlZGVudGlhbHMiLCJhcHBDaGVja0NyZWRlbnRpYWxzIiwiWm8iLCJ0dSIsInRlcm1pbmF0ZSIsImFzeW5jUXVldWUiLCJldSIsIm51Iiwic3UiLCJpdSIsInJ1Iiwib3UiLCJ1dSIsImF1IiwibG9jYWxTdG9yZSIsImRhdGFzdG9yZSIsInJlbW90ZVN5bmNlciIsImN1IiwiaHUiLCJsdSIsImZ1IiwiZHUiLCJfdSIsIkF1Iiwid3UiLCJyZWplY3RMaXN0ZW4iLCJhcHBseVJlbW90ZUV2ZW50IiwiUnUiLCJtdSIsImd1IiwieXUiLCJwdSIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiSXUiLCJ4biIsInJlamVjdEZhaWxlZFdyaXRlIiwiVHUiLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsInN0b3AiLCJidSIsInRhcmdldFRpbWVNcyIsInJlbW92YWxDYWxsYmFjayIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwiUHUiLCJWdSIsImtleWVkTWFwIiwic29ydGVkU2V0IiwidnUiLCJ0cmFjayIsIlN1Iiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiZW1wdHlTZXQiLCJEdSIsImxpc3RlbmVycyIsIkN1IiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwia3UiLCJPdSIsIk11Iiwib25FcnJvciIsIkZ1IiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIkV1IiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJxdSIsIkd1IiwiS3UiLCIkdSIsIkJ1IiwiTHUiLCJVdSIsIlF1IiwianUiLCJXdSIsInNuYXBzaG90IiwienUiLCJIdSIsIkp1IiwiWXUiLCJ2aWV3IiwiWHUiLCJyZW1vdGVTdG9yZSIsImV2ZW50TWFuYWdlciIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJadSIsImlzUHJpbWFyeUNsaWVudCIsInRyYWNrUmVtb3ZhbHMiLCJKcyIsInN5bmNocm9uaXplVGFicyIsImdjU2NoZWR1bGVyIiwiaW5pdGlhbFVzZXIiLCJXaSIsImNyZWF0ZURhdGFzdG9yZSIsImNyZWF0ZVJlbW90ZVN0b3JlIiwiY3JlYXRlRXZlbnRNYW5hZ2VyIiwic3luY0VuZ2luZSIsImNyZWF0ZVN5bmNFbmdpbmUiLCJtdXRlZCIsImNsaWVudElkIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsImFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyIiwic2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIiwic2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsImlzU2h1dHRpbmdEb3duIiwiZW50ZXJSZXN0cmljdGVkTW9kZSIsImVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkIiwib25saW5lQ29tcG9uZW50cyIsIm9mZmxpbmVDb21wb25lbnRzIiwiZ2V0Q29uZmlndXJhdGlvbiIsIm9uTGlzdGVuIiwib25Vbmxpc3RlbiIsIk51Iiwic291cmNlIiwieHUiLCJpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIiwiY2FjaGVTaXplQnl0ZXMiLCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nIiwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nIiwiX2F1dGhDcmVkZW50aWFscyIsIl9hcHBDaGVja0NyZWRlbnRpYWxzIiwiX3BlcnNpc3RlbmNlS2V5IiwiX3NldHRpbmdzIiwiX3NldHRpbmdzRnJvemVuIiwiX2RhdGFiYXNlSWQiLCJfYXBwIiwiX2luaXRpYWxpemVkIiwiX3Rlcm1pbmF0ZWQiLCJfdGVybWluYXRlVGFzayIsIl9zZXRTZXR0aW5ncyIsImNsaWVudCIsInNlc3Npb25JbmRleCIsImlhbVRva2VuIiwiX2dldFNldHRpbmdzIiwiX2ZyZWV6ZVNldHRpbmdzIiwiX3Rlcm1pbmF0ZSIsInNldHRpbmdzIiwiY29udmVydGVyIiwiX2tleSIsImZpcmVzdG9yZSIsIl9wYXRoIiwiX2MiLCJ3aXRoQ29udmVydGVyIiwiX3F1ZXJ5IiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsInN0YWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2ludGVybmFsUGF0aCIsIl9ieXRlU3RyaW5nIiwiX21ldGhvZE5hbWUiLCJpc0Zpbml0ZSIsIl9sYXQiLCJfbG9uZyIsInRvTXV0YXRpb24iLCJ3aCIsIm1ldGhvZE5hbWUiLCJjb250YWlucyIsIm1lcmdlIiwibWVyZ2VGaWVsZHMiLCJsaCIsImNoIiwiZmgiLCJtaCIsIl90b0ZpZWxkVHJhbnNmb3JtIiwiYWgiLCJoaCIsImZyb21EYXRlIiwiZ2V0UHJvdG90eXBlT2YiLCJfaCIsImRoIiwic2VhcmNoIiwiZ2giLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsInJlZiIsInloIiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsInBoIiwiSWgiLCJUaCIsIl9maXJlc3RvcmVJbXBsIiwibWV0YWRhdGEiLCJFaCIsInNlcnZlclRpbWVzdGFtcHMiLCJZaCIsIlhoIiwibGwiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydERvY3VtZW50S2V5IiwiaWwiLCJ0b0ZpcmVzdG9yZSIsIldoIiwiaGwiLCJub25lIiwiX19yZXN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJwcm9kRXJyb3JNYXAiLCJfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkiLCJsb2dDbGllbnQiLCJfbG9nRXJyb3IiLCJtc2ciLCJfZmFpbCIsImF1dGhPckNvZGUiLCJyZXN0IiwiY3JlYXRlRXJyb3JJbnRlcm5hbCIsIl9jcmVhdGVFcnJvciIsImZ1bGxQYXJhbXMiLCJfZXJyb3JGYWN0b3J5IiwiX2Fzc2VydCIsImFzc2VydGlvbiIsImRlYnVnRmFpbCIsImZhaWx1cmUiLCJkZWJ1Z0Fzc2VydCIsImluc3RhbmNlQ2FjaGUiLCJfZ2V0SW5zdGFuY2UiLCJjbHMiLCJfZ2V0Q3VycmVudFVybCIsImhyZWYiLCJfZ2V0Q3VycmVudFNjaGVtZSIsIkRlbGF5Iiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiX2VtdWxhdG9yVXJsIiwiZW11bGF0b3IiLCJzdGFydHNXaXRoIiwiRmV0Y2hQcm92aWRlciIsImZldGNoSW1wbCIsImhlYWRlcnNJbXBsIiwicmVzcG9uc2VJbXBsIiwiUmVzcG9uc2UiLCJTRVJWRVJfRVJST1JfTUFQIiwiREVGQVVMVF9BUElfVElNRU9VVF9NUyIsIl9hZGRUaWRJZk5lY2Vzc2FyeSIsInRlbmFudElkIiwiX3BlcmZvcm1BcGlSZXF1ZXN0IiwiY3VzdG9tRXJyb3JNYXAiLCJfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmciLCJhcGlLZXkiLCJfZ2V0QWRkaXRpb25hbEhlYWRlcnMiLCJsYW5ndWFnZUNvZGUiLCJfZ2V0RmluYWxUYXJnZXQiLCJhcGlIb3N0IiwicmVmZXJyZXJQb2xpY3kiLCJmZXRjaEZuIiwiX2NhbkluaXRFbXVsYXRvciIsImVycm9yTWFwIiwibmV0d29ya1RpbWVvdXQiLCJOZXR3b3JrVGltZW91dCIsInJhY2UiLCJjbGVhck5ldHdvcmtUaW1lb3V0IiwianNvbiIsIl9tYWtlVGFnZ2VkRXJyb3IiLCJvayIsInNlcnZlckVycm9yQ29kZSIsInNlcnZlckVycm9yTWVzc2FnZSIsImF1dGhFcnJvciIsIl9lcnJvcldpdGhDdXN0b21NZXNzYWdlIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJiYXNlIiwiYXBpU2NoZW1lIiwidGltZXIiLCJlcnJvclBhcmFtcyIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJfdG9rZW5SZXNwb25zZSIsInV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyIsInV0Y1RpbWVzdGFtcCIsInRvVVRDU3RyaW5nIiwic2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzIiwiX3BhcnNlVG9rZW4iLCJhbGdvcml0aG0iLCJwYXlsb2FkIiwic2lnbmF0dXJlIiwiZGVjb2RlZCIsImJhc2U2NERlY29kZSIsIl9sb2dvdXRJZkludmFsaWRhdGVkIiwiYnlwYXNzQXV0aFN0YXRlIiwiaXNVc2VySW52YWxpZGF0ZWQiLCJzaWduT3V0IiwiUHJvYWN0aXZlUmVmcmVzaCIsImlzUnVubmluZyIsImVycm9yQmFja29mZiIsIl9zdGFydCIsInNjaGVkdWxlIiwiX3N0b3AiLCJnZXRJbnRlcnZhbCIsIndhc0Vycm9yIiwiaW50ZXJ2YWwiLCJzdHNUb2tlbk1hbmFnZXIiLCJleHBpcmF0aW9uVGltZSIsIml0ZXJhdGlvbiIsImdldElkVG9rZW4iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwiX2NvcHkiLCJfcmVsb2FkV2l0aG91dFNhdmluZyIsImlkVG9rZW4iLCJnZXRBY2NvdW50SW5mbyIsInVzZXJzIiwiY29yZUFjY291bnQiLCJfbm90aWZ5UmVsb2FkTGlzdGVuZXIiLCJuZXdQcm92aWRlckRhdGEiLCJwcm92aWRlclVzZXJJbmZvIiwicHJvdmlkZXJJZCIsInJhd0lkIiwiZGlzcGxheU5hbWUiLCJwaG90b1VSTCIsInBob3RvVXJsIiwicHJvdmlkZXJEYXRhIiwib3JpZ2luYWwiLCJuZXdEYXRhIiwib2xkSXNBbm9ueW1vdXMiLCJpc0Fub255bW91cyIsIm5ld0lzQW5vbnltb3VzIiwicGFzc3dvcmRIYXNoIiwidXBkYXRlcyIsImxvY2FsSWQiLCJlbWFpbFZlcmlmaWVkIiwiU3RzVG9rZW5NYW5hZ2VyIiwicmVmcmVzaFRva2VuIiwiaXNFeHBpcmVkIiwidXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlIiwiZXhwaXJlc0luIiwicGFyc2VkVG9rZW4iLCJleHAiLCJpYXQiLCJfdG9rZW5FeHBpcmVzSW4iLCJ1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uIiwicmVmcmVzaCIsImNsZWFyUmVmcmVzaFRva2VuIiwib2xkVG9rZW4iLCJ0b2tlbkFwaUhvc3QiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2luIiwicmVmcmVzaF90b2tlbiIsInJlcXVlc3RTdHNUb2tlbiIsImV4cGlyZXNJblNlYyIsIm9iamVjdCIsIm1hbmFnZXIiLCJfYXNzaWduIiwiX2Nsb25lIiwiX3BlcmZvcm1SZWZyZXNoIiwiYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQiLCJVc2VySW1wbCIsIm9wdCIsInByb2FjdGl2ZVJlZnJlc2giLCJyZWxvYWRVc2VySW5mbyIsInJlbG9hZExpc3RlbmVyIiwiX3BlcnNpc3RVc2VySWZDdXJyZW50IiwiX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCIsImdldElkVG9rZW5SZXN1bHQiLCJ1c2VySW50ZXJuYWwiLCJjbGFpbXMiLCJhdXRoX3RpbWUiLCJmaXJlYmFzZSIsInNpZ25JblByb3ZpZGVyIiwiYXV0aFRpbWUiLCJpc3N1ZWRBdFRpbWUiLCJzaWduSW5TZWNvbmRGYWN0b3IiLCJyZWxvYWQiLCJ1c2VySW5mbyIsIl9vblJlbG9hZCIsIl9zdGFydFByb2FjdGl2ZVJlZnJlc2giLCJfc3RvcFByb2FjdGl2ZVJlZnJlc2giLCJ0b2tlbnNSZWZyZXNoZWQiLCJkZWxldGVBY2NvdW50IiwiX3JlZGlyZWN0RXZlbnRJZCIsIl9iIiwiX2QiLCJfZiIsIl9nIiwicGxhaW5PYmplY3RUb2tlbk1hbmFnZXIiLCJmcm9tSlNPTiIsImlkVG9rZW5SZXNwb25zZSIsIkluTWVtb3J5UGVyc2lzdGVuY2UiLCJzdG9yYWdlIiwiX2FkZExpc3RlbmVyIiwiX2xpc3RlbmVyIiwiX3JlbW92ZUxpc3RlbmVyIiwiaW5NZW1vcnlQZXJzaXN0ZW5jZSIsIl9wZXJzaXN0ZW5jZUtleU5hbWUiLCJQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJzZXRDdXJyZW50VXNlciIsIl9zZXQiLCJibG9iIiwiX2dldCIsIl9mcm9tSlNPTiIsInJlbW92ZUN1cnJlbnRVc2VyIiwiX3JlbW92ZSIsInNhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0IiwibmV3UGVyc2lzdGVuY2UiLCJnZXRDdXJyZW50VXNlciIsInBlcnNpc3RlbmNlSGllcmFyY2h5IiwiYXZhaWxhYmxlUGVyc2lzdGVuY2VzIiwiX2lzQXZhaWxhYmxlIiwic2VsZWN0ZWRQZXJzaXN0ZW5jZSIsInVzZXJUb01pZ3JhdGUiLCJtaWdyYXRpb25IaWVyYXJjaHkiLCJfc2hvdWxkQWxsb3dNaWdyYXRpb24iLCJfZ2V0QnJvd3Nlck5hbWUiLCJfaXNJRU1vYmlsZSIsIl9pc0ZpcmVmb3giLCJfaXNCbGFja0JlcnJ5IiwiX2lzV2ViT1MiLCJfaXNTYWZhcmkiLCJfaXNDaHJvbWVJT1MiLCJfaXNBbmRyb2lkIiwiX2lzSU9TIiwiX2lzTW9iaWxlQnJvd3NlciIsIl9nZXRDbGllbnRWZXJzaW9uIiwiY2xpZW50UGxhdGZvcm0iLCJmcmFtZXdvcmtzIiwicmVwb3J0ZWRQbGF0Zm9ybSIsIkF1dGhJbXBsIiwiaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyIiwiZW11bGF0b3JDb25maWciLCJvcGVyYXRpb25zIiwiYXV0aFN0YXRlU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwiaWRUb2tlblN1YnNjcmlwdGlvbiIsInJlZGlyZWN0VXNlciIsImlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQiLCJfaXNJbml0aWFsaXplZCIsIl9kZWxldGVkIiwiX2luaXRpYWxpemF0aW9uUHJvbWlzZSIsIl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJsYXN0Tm90aWZpZWRVaWQiLCJhcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmciLCJjbGllbnRWZXJzaW9uIiwic2RrQ2xpZW50VmVyc2lvbiIsIl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlIiwicG9wdXBSZWRpcmVjdFJlc29sdmVyIiwicXVldWUiLCJwZXJzaXN0ZW5jZU1hbmFnZXIiLCJfc2hvdWxkSW5pdFByb2FjdGl2ZWx5IiwiX2luaXRpYWxpemUiLCJpbml0aWFsaXplQ3VycmVudFVzZXIiLCJhc3NlcnRlZFBlcnNpc3RlbmNlIiwiX2N1cnJlbnRVc2VyIiwiX3VwZGF0ZUN1cnJlbnRVc2VyIiwic3RvcmVkVXNlciIsImF1dGhEb21haW4iLCJnZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciIsInJlZGlyZWN0VXNlckV2ZW50SWQiLCJzdG9yZWRVc2VyRXZlbnRJZCIsInRyeVJlZGlyZWN0U2lnbkluIiwiZGlyZWN0bHlTZXRDdXJyZW50VXNlciIsInJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhciIsInJlZGlyZWN0UmVzb2x2ZXIiLCJfY29tcGxldGVSZWRpcmVjdEZuIiwiX3NldFJlZGlyZWN0VXNlciIsInVzZURldmljZUxhbmd1YWdlIiwibmF2aWdhdG9yTGFuZ3VhZ2UiLCJsYW5ndWFnZXMiLCJsYW5ndWFnZSIsIl9nZXRVc2VyTGFuZ3VhZ2UiLCJ1c2VyRXh0ZXJuIiwibm90aWZ5QXV0aExpc3RlbmVycyIsInJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIiwic2V0UGVyc2lzdGVuY2UiLCJfZ2V0UGVyc2lzdGVuY2UiLCJfdXBkYXRlRXJyb3JNYXAiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJjb21wbGV0ZWQiLCJyZWdpc3RlclN0YXRlTGlzdGVuZXIiLCJvbklkVG9rZW5DaGFuZ2VkIiwicmVkaXJlY3RNYW5hZ2VyIiwicmVzb2x2ZXIiLCJfcmVkaXJlY3RQZXJzaXN0ZW5jZSIsImN1cnJlbnRVaWQiLCJzdWJzY3JpcHRpb24iLCJhZGRPYnNlcnZlciIsImFjdGlvbiIsIl9sb2dGcmFtZXdvcmsiLCJmcmFtZXdvcmsiLCJfZ2V0RnJhbWV3b3JrcyIsImhlYXJ0YmVhdHNIZWFkZXIiLCJnZXRIZWFydGJlYXRzSGVhZGVyIiwiX2Nhc3RBdXRoIiwiY3JlYXRlU3Vic2NyaWJlIiwiQXV0aENyZWRlbnRpYWwiLCJzaWduSW5NZXRob2QiLCJfZ2V0SWRUb2tlblJlc3BvbnNlIiwiX2F1dGgiLCJfbGlua1RvSWRUb2tlbiIsIl9pZFRva2VuIiwiX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlciIsIkVtYWlsQXV0aENyZWRlbnRpYWwiLCJfZW1haWwiLCJfcGFzc3dvcmQiLCJfdGVuYW50SWQiLCJwYXNzd29yZCIsIm9vYkNvZGUiLCJfZnJvbUVtYWlsQW5kUGFzc3dvcmQiLCJfZnJvbUVtYWlsQW5kQ29kZSIsInNpZ25JbldpdGhQYXNzd29yZCIsInJldHVyblNlY3VyZVRva2VuIiwic2lnbkluV2l0aEVtYWlsTGluayQxIiwidXBkYXRlRW1haWxQYXNzd29yZCIsInNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nIiwic2lnbkluV2l0aElkcCIsIk9BdXRoQ3JlZGVudGlhbCIsInBlbmRpbmdUb2tlbiIsImNyZWQiLCJub25jZSIsIm9hdXRoVG9rZW4iLCJvYXV0aFRva2VuU2VjcmV0Iiwic2VjcmV0IiwiYnVpbGRSZXF1ZXN0IiwiYXV0b0NyZWF0ZSIsInJlcXVlc3RVcmkiLCJwb3N0Qm9keSIsIlZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8iLCJQaG9uZUF1dGhDcmVkZW50aWFsIiwidmVyaWZpY2F0aW9uSWQiLCJ2ZXJpZmljYXRpb25Db2RlIiwidGVtcG9yYXJ5UHJvb2YiLCJzaWduSW5XaXRoUGhvbmVOdW1iZXIkMSIsIl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCIsImxpbmtXaXRoUGhvbmVOdW1iZXIkMSIsIm9wZXJhdGlvbiIsInZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmciLCJzZXNzaW9uSW5mbyIsIkFjdGlvbkNvZGVVUkwiLCJhY3Rpb25MaW5rIiwic2VhcmNoUGFyYW1zIiwicGFyc2VNb2RlIiwiY29udGludWVVcmwiLCJsaW5rIiwiZG91YmxlRGVlcExpbmsiLCJpT1NEZWVwTGluayIsInBhcnNlRGVlcExpbmsiLCJFbWFpbEF1dGhQcm92aWRlciIsIlBST1ZJREVSX0lEIiwiZW1haWxMaW5rIiwiYWN0aW9uQ29kZVVybCIsInBhcnNlTGluayIsIkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EIiwiRU1BSUxfTElOS19TSUdOX0lOX01FVEhPRCIsIkZlZGVyYXRlZEF1dGhQcm92aWRlciIsImRlZmF1bHRMYW5ndWFnZUNvZGUiLCJjdXN0b21QYXJhbWV0ZXJzIiwic2V0RGVmYXVsdExhbmd1YWdlIiwic2V0Q3VzdG9tUGFyYW1ldGVycyIsImN1c3RvbU9BdXRoUGFyYW1ldGVycyIsImdldEN1c3RvbVBhcmFtZXRlcnMiLCJCYXNlT0F1dGhQcm92aWRlciIsInNjb3BlcyIsImFkZFNjb3BlIiwic2NvcGUiLCJnZXRTY29wZXMiLCJGYWNlYm9va0F1dGhQcm92aWRlciIsIl9mcm9tUGFyYW1zIiwiRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QiLCJ1c2VyQ3JlZGVudGlhbCIsImNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0IiwidG9rZW5SZXNwb25zZSIsIm9hdXRoQWNjZXNzVG9rZW4iLCJjcmVkZW50aWFsIiwiR29vZ2xlQXV0aFByb3ZpZGVyIiwiR09PR0xFX1NJR05fSU5fTUVUSE9EIiwib2F1dGhJZFRva2VuIiwiR2l0aHViQXV0aFByb3ZpZGVyIiwiR0lUSFVCX1NJR05fSU5fTUVUSE9EIiwiVHdpdHRlckF1dGhQcm92aWRlciIsIlRXSVRURVJfU0lHTl9JTl9NRVRIT0QiLCJVc2VyQ3JlZGVudGlhbEltcGwiLCJvcGVyYXRpb25UeXBlIiwiX2Zyb21JZFRva2VuUmVzcG9uc2UiLCJwcm92aWRlcklkRm9yUmVzcG9uc2UiLCJfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkiLCJNdWx0aUZhY3RvckVycm9yIiwiX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5IiwiX2Zyb21FcnJvckFuZE9wZXJhdGlvbiIsIl9zaWduSW5XaXRoQ3JlZGVudGlhbCIsInNlbmRQYXNzd29yZFJlc2V0RW1haWwiLCJhY3Rpb25Db2RlU2V0dGluZ3MiLCJhdXRoTW9kdWxhciIsInJlcXVlc3RUeXBlIiwiZHluYW1pY0xpbmtEb21haW4iLCJjYW5IYW5kbGVDb2RlSW5BcHAiLCJoYW5kbGVDb2RlSW5BcHAiLCJpT1MiLCJidW5kbGVJZCIsImlPU0J1bmRsZUlkIiwiYW5kcm9pZCIsInBhY2thZ2VOYW1lIiwiYW5kcm9pZEluc3RhbGxBcHAiLCJpbnN0YWxsQXBwIiwiYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSIsIm1pbmltdW1WZXJzaW9uIiwiYW5kcm9pZFBhY2thZ2VOYW1lIiwiX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCIsInNlbmRPb2JDb2RlIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxIiwiV2Vha01hcCIsIlNUT1JBR0VfQVZBSUxBQkxFX0tFWSIsIkJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIiwic3RvcmFnZVJldHJpZXZlciIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsIkJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwibG9jYWxTdG9yYWdlIiwicG9sbCIsIm9uU3RvcmFnZUV2ZW50IiwibG9jYWxDYWNoZSIsInBvbGxUaW1lciIsInNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCIsIl9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSIsIl9pc0lmcmFtZSIsImZhbGxiYWNrVG9Qb2xsaW5nIiwiZm9yQWxsQ2hhbmdlZEtleXMiLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiX29sZFZhbHVlIiwibm90aWZ5TGlzdGVuZXJzIiwiZGV0YWNoTGlzdGVuZXIiLCJzdG9wUG9sbGluZyIsInN0b3JlZFZhbHVlIiwidHJpZ2dlckxpc3RlbmVycyIsInN0YXJ0UG9sbGluZyIsInNldEludGVydmFsIiwiU3RvcmFnZUV2ZW50IiwiY2xlYXJJbnRlcnZhbCIsImF0dGFjaExpc3RlbmVyIiwiYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIiwic2Vzc2lvblN0b3JhZ2UiLCJicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIiwiUmVjZWl2ZXIiLCJldmVudFRhcmdldCIsImhhbmRsZXJzTWFwIiwicmVjZWl2ZXJzIiwicmVjZWl2ZXIiLCJpc0xpc3RlbmluZ3RvIiwibmV3SW5zdGFuY2UiLCJtZXNzYWdlRXZlbnQiLCJldmVudElkIiwiZXZlbnRUeXBlIiwiaGFuZGxlcnMiLCJwb3J0cyIsInBvc3RNZXNzYWdlIiwicHJvbWlzZXMiLCJoYW5kbGVyIiwib3JpZ2luIiwiZnVsZmlsbGVkIiwicmVhc29uIiwiX2FsbFNldHRsZWQiLCJfc3Vic2NyaWJlIiwiZXZlbnRIYW5kbGVyIiwiX3Vuc3Vic2NyaWJlIiwiX2dlbmVyYXRlRXZlbnRJZCIsInByZWZpeCIsImRpZ2l0cyIsIlNlbmRlciIsInJlbW92ZU1lc3NhZ2VIYW5kbGVyIiwibWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIk1lc3NhZ2VDaGFubmVsIiwiY29tcGxldGlvblRpbWVyIiwiYWNrVGltZXIiLCJwb3J0MiIsImZpbmFsbHkiLCJfd2luZG93IiwiX2lzV29ya2VyIiwiREJfT0JKRUNUU1RPUkVfTkFNRSIsIkRCX0RBVEFfS0VZUEFUSCIsIkRCUHJvbWlzZSIsImdldE9iamVjdFN0b3JlIiwiaXNSZWFkV3JpdGUiLCJfb3BlbkRhdGFiYXNlIiwia2V5UGF0aCIsIl9kZWxldGVEYXRhYmFzZSIsIl9wdXRPYmplY3QiLCJfZGVsZXRlT2JqZWN0IiwiSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSIsInBlbmRpbmdXcml0ZXMiLCJzZW5kZXIiLCJzZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUiLCJhY3RpdmVTZXJ2aWNlV29ya2VyIiwiX3dvcmtlckluaXRpYWxpemF0aW9uUHJvbWlzZSIsImluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nIiwibnVtQXR0ZW1wdHMiLCJfb3BlbkRiIiwiaW5pdGlhbGl6ZVJlY2VpdmVyIiwiaW5pdGlhbGl6ZVNlbmRlciIsIl9vcmlnaW4iLCJrZXlQcm9jZXNzZWQiLCJfcG9sbCIsIl9kYXRhIiwic2VydmljZVdvcmtlciIsInJlYWR5IiwiYWN0aXZlIiwiX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJyZXN1bHRzIiwiX3NlbmQiLCJjb250cm9sbGVyIiwid3JpdGUiLCJfd2l0aFBlbmRpbmdXcml0ZSIsIl93aXRoUmV0cmllcyIsIm5vdGlmeVNlcnZpY2VXb3JrZXIiLCJnZXRPYmplY3QiLCJnZXRBbGxSZXF1ZXN0IiwiZ2V0QWxsIiwia2V5c0luUmVzdWx0IiwiZmJhc2Vfa2V5IiwibG9jYWxLZXkiLCJpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwiX2dlbmVyYXRlQ2FsbGJhY2tOYW1lIiwiUGhvbmVBdXRoUHJvdmlkZXIiLCJ2ZXJpZnlQaG9uZU51bWJlciIsInBob25lT3B0aW9ucyIsImFwcGxpY2F0aW9uVmVyaWZpZXIiLCJ2ZXJpZmllciIsInJlY2FwdGNoYVRva2VuIiwicGhvbmVJbmZvT3B0aW9ucyIsInNlc3Npb24iLCJzdGFydEVucm9sbFBob25lTWZhIiwicGhvbmVFbnJvbGxtZW50SW5mbyIsInBob25lU2Vzc2lvbkluZm8iLCJtZmFFbnJvbGxtZW50SWQiLCJtdWx0aUZhY3RvckhpbnQiLCJtdWx0aUZhY3RvclVpZCIsInN0YXJ0U2lnbkluUGhvbmVNZmEiLCJtZmFQZW5kaW5nQ3JlZGVudGlhbCIsInBob25lU2lnbkluSW5mbyIsInBob25lUmVzcG9uc2VJbmZvIiwic2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZSIsIl9yZXNldCIsIl92ZXJpZnlQaG9uZU51bWJlciIsIl9mcm9tVmVyaWZpY2F0aW9uIiwiX2Zyb21Ub2tlblJlc3BvbnNlIiwiUEhPTkVfU0lHTl9JTl9NRVRIT0QiLCJJZHBDcmVkZW50aWFsIiwiX2J1aWxkSWRwUmVxdWVzdCIsInNlc3Npb25JZCIsInJldHVybklkcENyZWRlbnRpYWwiLCJfc2lnbkluIiwiX3JlYXV0aCIsInBhcnNlZCIsInN1YiIsIl9mb3JPcGVyYXRpb24iLCJfcmVhdXRoZW50aWNhdGUiLCJfbGluayIsIl9saW5rJDEiLCJBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24iLCJwZW5kaW5nUHJvbWlzZSIsImV4ZWN1dGUiLCJvbkV4ZWN1dGlvbiIsInJlZ2lzdGVyQ29uc3VtZXIiLCJ1cmxSZXNwb25zZSIsImdldElkcFRhc2siLCJ1bnJlZ2lzdGVyQW5kQ2xlYW5VcCIsInVucmVnaXN0ZXJDb25zdW1lciIsImNsZWFuVXAiLCJfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCIsIlBvcHVwT3BlcmF0aW9uIiwiYXV0aFdpbmRvdyIsInBvbGxJZCIsImN1cnJlbnRQb3B1cEFjdGlvbiIsIl9vcGVuUG9wdXAiLCJhc3NvY2lhdGVkRXZlbnQiLCJfb3JpZ2luVmFsaWRhdGlvbiIsIl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQiLCJpc1N1cHBvcnRlZCIsInBvbGxVc2VyQ2FuY2VsbGF0aW9uIiwiY2xvc2VkIiwicmVkaXJlY3RPdXRjb21lTWFwIiwiUmVkaXJlY3RBY3Rpb24iLCJyZWFkeU91dGNvbWUiLCJoYXNQZW5kaW5nUmVkaXJlY3QiLCJwZW5kaW5nUmVkaXJlY3RLZXkiLCJyZXNvbHZlclBlcnNpc3RlbmNlIiwiX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzIiwib25BdXRoRXZlbnQiLCJfcmVkaXJlY3RVc2VyRm9ySWQiLCJfZ2V0UmVkaXJlY3RSZXN1bHQiLCJyZXNvbHZlckV4dGVybiIsImF1dGhJbnRlcm5hbCIsInJlc29sdmVyT3ZlcnJpZGUiLCJfd2l0aERlZmF1bHRSZXNvbHZlciIsIkF1dGhFdmVudE1hbmFnZXIiLCJjYWNoZWRFdmVudFVpZHMiLCJjb25zdW1lcnMiLCJxdWV1ZWRSZWRpcmVjdEV2ZW50IiwiaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IiwibGFzdFByb2Nlc3NlZEV2ZW50VGltZSIsImF1dGhFdmVudENvbnN1bWVyIiwiaXNFdmVudEZvckNvbnN1bWVyIiwic2VuZFRvQ29uc3VtZXIiLCJzYXZlRXZlbnRUb0NhY2hlIiwib25FdmVudCIsImhhc0V2ZW50QmVlbkhhbmRsZWQiLCJoYW5kbGVkIiwiY29uc3VtZXIiLCJpc051bGxSZWRpcmVjdEV2ZW50IiwiaXNSZWRpcmVjdEV2ZW50IiwiZXZlbnRJZE1hdGNoZXMiLCJldmVudFVpZCIsIklQX0FERFJFU1NfUkVHRVgiLCJIVFRQX1JFR0VYIiwibWF0Y2hEb21haW4iLCJleHBlY3RlZCIsImN1cnJlbnRVcmwiLCJVUkwiLCJjZVVybCIsImVzY2FwZWREb21haW5QYXR0ZXJuIiwiTkVUV09SS19USU1FT1VUIiwicmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzIiwiYmVhY29uIiwiX19fanNsIiwiaGludCIsIkNQIiwiY2FjaGVkR0FwaUxvYWRlciIsIl9sb2FkR2FwaSIsImxvYWRHYXBpSWZyYW1lIiwiZ2FwaSIsImxvYWQiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIklmcmFtZSIsImNiTmFtZSIsImVsIiwiY2hhcnNldCIsImFwcGVuZENoaWxkIiwibG9hZEdhcGkiLCJQSU5HX1RJTUVPVVQiLCJJRlJBTUVfQVRUUklCVVRFUyIsIndpZHRoIiwiaGVpZ2h0IiwidGFiaW5kZXgiLCJFSURfRlJPTV9BUElIT1NUIiwiZ2V0SWZyYW1lVXJsIiwiZWlkIiwiZnciLCJCQVNFX1BPUFVQX09QVElPTlMiLCJyZXNpemFibGUiLCJzdGF0dXNiYXIiLCJ0b29sYmFyIiwiQXV0aFBvcHVwIiwiX2dldFJlZGlyZWN0VXJsIiwiYXV0aFR5cGUiLCJyZWRpcmVjdFVybCIsImFkZGl0aW9uYWxQYXJhbXMiLCJ0aWQiLCJwYXJhbXNEaWN0IiwiZ2V0SGFuZGxlckJhc2UiLCJXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSIsImJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJldmVudE1hbmFnZXJzIiwib3JpZ2luVmFsaWRhdGlvblByb21pc2VzIiwic2NyZWVuIiwiYXZhaWxIZWlnaHQiLCJhdmFpbFdpZHRoIiwic2Nyb2xsYmFycyIsIm9wdGlvbnNTdHJpbmciLCJhY2N1bSIsInN0YW5kYWxvbmUiLCJfaXNJT1NTdGFuZGFsb25lIiwiY2xpY2siLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsIm9wZW5Bc05ld1dpbmRvd0lPUyIsIm5ld1dpbiIsImZvY3VzIiwiX29wZW4iLCJpbml0QW5kR2V0TWFuYWdlciIsImlmcmFtZSIsImNvbnRleHQiLCJtZXNzYWdlSGFuZGxlcnNGaWx0ZXIiLCJDUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIiLCJhdHRyaWJ1dGVzIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJhdXRob3JpemVkRG9tYWlucyIsIl9nZXRQcm9qZWN0Q29uZmlnIiwiZG9tYWluIiwiX3ZhbGlkYXRlT3JpZ2luIiwiQXV0aEludGVyb3AiLCJpbnRlcm5hbExpc3RlbmVycyIsImFzc2VydEF1dGhDb25maWd1cmVkIiwidW5zdWJzY3JpYmUiLCJ1cGRhdGVQcm9hY3RpdmVSZWZyZXNoIiwiZGVwcyIsImF1dGhJbnN0YW5jZSIsImhpZXJhcmNoeSIsIl9pbml0aWFsaXplQXV0aEluc3RhbmNlIiwiX2luc3RhbmNlSWRlbnRpZmllciIsIl9pbnN0YW5jZSIsImdldFZlcnNpb25Gb3JQbGF0Zm9ybSIsImluc3RydWN0aW9uc1BUYWciLCJzZWNvbmRzRm9yRWFjaFN0YWdlIiwiZmlndXJlc1BlclN0YWdlIiwicEFub24iLCJpbnN0cnVjdGlvbnMiLCJtZWRhbCIsIm1lZGFsU3BhbiIsInNhdmVkTmlja25hbWUiLCJmb3JtcyIsIm5pY2tuYW1lRm9ybSIsIm5pY2tuYW1lIiwidGV4dENvbnRlbnQiLCJkaXNwbGF5IiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJpbml0aWFsaXplQXBwIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiaW5pdGlhbGl6ZUF1dGgiLCJnZXRBdXRoIiwiZ2V0RmlyZXN0b3JlIiwiY3VycmVudFN0YWdlIiwiY29sbGVjdGlvbiIsInJlZ2lzdGVyQnV0dG9uIiwicmVnaXN0ZXJGb3JtQ29udGFpbmVyIiwicmVnaXN0ZXJGb3JtIiwicmVnaXN0ZXJGb3JtSW5wdXRGaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVnaXN0ZXJGb3JtUEZpZWxkcyIsInJlZ2lzdGVyTGFzdE5hbWUiLCJyZWdpc3RlckZpcnN0TmFtZSIsImxhc3ROYW1lUCIsImZpcnN0TmFtZVAiLCJzaWduSW5CdXR0b24iLCJzaWduSW5Gb3JtQ29udGFpbmVyIiwic2lnbkluRm9ybSIsImNsb3NlWCIsImluc3RydWN0aW9uc1AiLCJuaWNrbmFtZUZvcm1MYWJlbCIsIm5pY2tuYW1lRm9ybVRleHRJbnB1dCIsInNpZ25PdXRCdXR0b24iLCJob3VyZ2xhc3MiLCJmb3Jnb3RQYXNzd29yZCIsImZvcmdvdENvbnRhaW5lciIsImZvcmdvdEZvcm0iLCJjbG9zZVgyIiwiYmFja1RvR2FtZSIsImVtYWlsU2VudCIsImVtYWlsU2VudFAiLCJxdWl0IiwicmVnaXN0ZXJCdXR0b25FdmVudCIsInNpZ25JbkJ1dHRvbkV2ZW50IiwiaW5wdXRGaWVsZCIsInBGaWVsZCIsInJlZyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwibmlja25hbWVSZWdpc3RlcmVkVXNlciIsImlkSW5wdXQiLCJnZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3RDaGVjayIsInJlZ2lzdGVyZWROaWNrbmFtZSIsImRvY1JlZiIsImdldERvYyIsImZpcmVEb2MiLCJzaWduVXAiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJwcm9maWxlUmVxdWVzdCIsInVwZGF0ZVByb2ZpbGUkMSIsInBhc3N3b3JkUHJvdmlkZXIiLCJ1cGRhdGVQcm9maWxlIiwic2V0RG9jIiwiTmlja25hbWUiLCJhbGVydCIsIlNjb3JlIiwiZm9udFNpemUiLCJzaWduSW5XaXRoQ3JlZGVudGlhbCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwiZG9jdW0iLCJmb3Jnb3RFbWFpbFZhbHVlIiwiYW5pbWF0aW9uIiwidHJpYWwiLCJzdG9wV29ya2luZyIsImJpbmFyeSIsIm91clZpZXdQb3J0V2lkdGgiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsIm1vdmUiLCJmaWd1cmUiLCJzcGVlZCIsInJhbmRvbUludFgiLCJyYW5kb21JbnRZIiwibW92ZW1lbnRJbnRlcnZhbCIsImZpZ3VyZU1vdmVtZW50Iiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsImJhY2tncm91bmQiLCJpbnN0cnVjdGlvbnNINCIsInRyaWFsMyIsInRyaWFsNCIsIm1vYmlsZUFuZFRhYmxldHMiLCJ6SW5kZXgiLCJtZWRpYXExIiwibWF0Y2hNZWRpYSIsImZvb3RlciIsInRvcEV5ZXNoYWRlIiwiYm90dG9tRXllc2hhZGUiLCJ0aW55Q2lyY2xlcyIsImNvcm9uYSIsInRpbnlDaXJjbGVDb250YWluZXIiLCJzaWduIiwiaGVhZGxpbmUiLCJzdGFnZSIsImZpZ3VyZXMiLCJmaWd1cmVzRGl2cyIsIm51bXNPZkZpZ3MiLCJ1c2VyU2NvcmUiLCJib251c0Fycm93IiwiY3VycmVudExldmVsQ2xpY2tzU3VjY2VzcyIsIm9wYWNpdHkiLCJudW0iLCJjdXJyZW50RmlndXJlIiwic3RhcnNBbmRQb2ludHMiLCJzY29yZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9wYWNpdHlDaGFuZ2UiLCJjaGVja0JhY2tncm91bmQiLCJmaWd1cmVEaXYiLCJjb3VudERvd25JbnRlcnZhbCIsImxvY2FsTmFtZSIsImVuZExldmVsIiwidXNlcnNDdXJyZW50U3RhZ2UiLCJib251cyIsImJlc3RTY29yZSIsIm9oIiwicmgiLCJ1cGRhdGVEb2MiLCJjaXJjbGUiLCJtb3ZlUmlnaHQiLCJtb3ZpbmdSaWdodCIsImFtYnVsYW5jZSIsImZhaWxpbmdQcm9jZWR1cmUiXSwic291cmNlUm9vdCI6IiJ9