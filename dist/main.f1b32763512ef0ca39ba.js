/*! For license information please see main.f1b32763512ef0ca39ba.js.LICENSE.txt */
(()=>{"use strict";var e={16:(e,t,n)=>{e.exports=n.p+"favicon.ico"},52:(e,t,n)=>{e.exports=n.p+"figure1.svg"},660:(e,t,n)=>{e.exports=n.p+"figure10.svg"},101:(e,t,n)=>{e.exports=n.p+"figure11.svg"},389:(e,t,n)=>{e.exports=n.p+"figure12.svg"},36:(e,t,n)=>{e.exports=n.p+"figure13.svg"},304:(e,t,n)=>{e.exports=n.p+"figure14.svg"},803:(e,t,n)=>{e.exports=n.p+"figure15.svg"},103:(e,t,n)=>{e.exports=n.p+"figure16.svg"},834:(e,t,n)=>{e.exports=n.p+"figure17.svg"},648:(e,t,n)=>{e.exports=n.p+"figure18.svg"},787:(e,t,n)=>{e.exports=n.p+"figure19.svg"},74:(e,t,n)=>{e.exports=n.p+"figure2.svg"},411:(e,t,n)=>{e.exports=n.p+"figure20.svg"},691:(e,t,n)=>{e.exports=n.p+"figure3.svg"},559:(e,t,n)=>{e.exports=n.p+"figure4.svg"},863:(e,t,n)=>{e.exports=n.p+"figure5.svg"},571:(e,t,n)=>{e.exports=n.p+"figure6.svg"},982:(e,t,n)=>{e.exports=n.p+"figure7.svg"},290:(e,t,n)=>{e.exports=n.p+"figure8.svg"},840:(e,t,n)=>{e.exports=n.p+"figure9.svg"},51:(e,t,n)=>{e.exports=n.p+"stars.svg"}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,n),r.exports}n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");i.length&&(e=i[i.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{n(52),n(74),n(691),n(559),n(863),n(571),n(982),n(290),n(840),n(660),n(101),n(389),n(36),n(304),n(803),n(103),n(834),n(648),n(787),n(411),n(51),n(16);var e=document.querySelector("body"),t=document.querySelector("header"),i=document.querySelector(".cursor");document.addEventListener("mousemove",(function(e){i.setAttribute("style","top: "+(e.pageY+4)+"px; left: "+(e.pageX-5)+"px;")}));var s=document.querySelector("#circle"),r=0;[1,2,3,4,5,6].forEach((function(n){var i=document.createElement("div");i.classList.add("corona","axis"),i.setAttribute("id","axis"+n),e.insertBefore(i,s.nextSibling),i.style.transform="rotateZ(".concat(r,"deg)"),r+=30;var o=document.createElement("div");o.classList.add("corona","tinyCircleContainer"),o.setAttribute("id","tinyCircleContainer"+n),e.insertBefore(o,t),o.style.top="calc(30% - 110px)",o.style.bottom="calc(70% + 110px)",o.style.right="calc(50% + ".concat(10+22*(n-1),"px)"),o.style.left="calc(50% - ".concat(10+22*(n-1),"px)");var a=30*(n-1);o.style.transform="rotateZ(".concat(a,"deg)");var c=document.createElement("div"),l=document.createElement("div");c.classList.add("corona","tinyCircle"),c.setAttribute("id","tinyCircle"+n),c.style.top="0",c.style.right="0",l.classList.add("corona","tinyCircle"),l.setAttribute("id","tinyCircle"+(n+6)),l.style.top="calc(100% - 24px)",l.style.right="0";var u=document.querySelector("#tinyCircleContainer".concat(n));u.append(c),u.append(l)}));var o=document.createElement("div");o.classList.add("eyes","corona"),document.querySelector("#tinyCircleContainer1").append(o);var a=document.createElement("div"),c=document.createElement("div");a.classList.add("corona","eyeShades"),c.classList.add("corona","eyeShades"),a.setAttribute("id","topEyeshade"),c.setAttribute("id","bottomEyeshade"),document.querySelector("#tinyCircleContainer1").append(a),document.querySelector("#tinyCircleContainer1").append(c);const l=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296==(64512&s)&&i+1<e.length&&56320==(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){const s=e[t],r=t+1<e.length,o=r?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,l=s>>2,u=(3&s)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(l(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(r>>10)),t[i++]=String.fromCharCode(56320+(1023&r))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){const s=n[e.charAt(t++)],r=t<e.length?n[e.charAt(t)]:0;++t;const o=t<e.length?n[e.charAt(t)]:64;++t;const a=t<e.length?n[e.charAt(t)]:64;if(++t,null==s||null==r||null==o||null==a)throw Error();const c=s<<2|r>>4;if(i.push(c),64!==o){const e=r<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){return function(e){const t=l(e);return u.encodeByteArray(t,!0)}(e).replace(/\./g,"")};class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function g(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function y(){const e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}class v extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,v.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,w.prototype.create)}}class w{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?function(e,t){return e.replace(b,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`;return new v(i,o,n)}}const b=/\{\$([^}]+)}/g;function I(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(E(n)&&E(r)){if(!I(n,r))return!1}else if(n!==r)return!1}for(const e of i)if(!n.includes(e))return!1;return!0}function E(e){return null!==e&&"object"==typeof e}function T(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function S(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function _(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class k{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!=typeof e||null===e)return!1;for(const t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=C),void 0===i.error&&(i.error=C),void 0===i.complete&&(i.complete=C);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function C(){}function A(e){return e&&e._delegate?e._delegate:e}function N(e,t){return new Promise(((n,i)=>{e.onsuccess=e=>{n(e.target.result)},e.onerror=e=>{var n;i(`${t}: ${null===(n=e.target.error)||void 0===n?void 0:n.message}`)}}))}class R{constructor(e){this._db=e,this.objectStoreNames=this._db.objectStoreNames}transaction(e,t){return new D(this._db.transaction.call(this._db,e,t))}createObjectStore(e,t){return new L(this._db.createObjectStore(e,t))}close(){this._db.close()}}class D{constructor(e){this._transaction=e,this.complete=new Promise(((e,t)=>{this._transaction.oncomplete=function(){e()},this._transaction.onerror=()=>{t(this._transaction.error)},this._transaction.onabort=()=>{t(this._transaction.error)}}))}objectStore(e){return new L(this._transaction.objectStore(e))}}class L{constructor(e){this._store=e}index(e){return new O(this._store.index(e))}createIndex(e,t,n){return new O(this._store.createIndex(e,t,n))}get(e){return N(this._store.get(e),"Error reading from IndexedDB")}put(e,t){return N(this._store.put(e,t),"Error writing to IndexedDB")}delete(e){return N(this._store.delete(e),"Error deleting from IndexedDB")}clear(){return N(this._store.clear(),"Error clearing IndexedDB object store")}}class O{constructor(e){this._index=e}get(e){return N(this._index.get(e),"Error reading from IndexedDB")}}class P{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const x="[DEFAULT]";class M{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new d;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(i)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:x})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(i=e,i===x?void 0:i),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var i;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:x:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class U{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new M(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const F=[];var V,q;(q=V||(V={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT";const j={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},B=V.INFO,$={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},z=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=$[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class H{constructor(e){this.name=e,this._logLevel=B,this._logHandler=z,this._userLogHandler=null,F.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in V))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...e),this._logHandler(this,V.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...e),this._logHandler(this,V.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,V.INFO,...e),this._logHandler(this,V.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,V.WARN,...e),this._logHandler(this,V.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...e),this._logHandler(this,V.ERROR,...e)}}class K{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const G="@firebase/app",W="0.7.20",X=new H("@firebase/app"),Y={[G]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},J=new Map,Q=new Map;function Z(e,t){try{e.container.addComponent(t)}catch(n){X.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ee(e){const t=e.name;if(Q.has(t))return X.debug(`There were multiple attempts to register component ${t}.`),!1;Q.set(t,e);for(const t of J.values())Z(t,e);return!0}function te(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const ne=new w("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ie{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new P("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ne.create("app-deleted",{appName:this._name})}}const se="9.6.10";function re(e="[DEFAULT]"){const t=J.get(e);if(!t)throw ne.create("no-app",{appName:e});return t}function oe(e,t,n){var i;let s=null!==(i=Y[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const r=s.match(/\s|\//),o=t.match(/\s|\//);if(r||o){const e=[`Unable to register library "${s}" with version "${t}":`];return r&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void X.warn(e.join(" "))}ee(new P(`${s}-version`,(()=>({library:s,version:t})),"VERSION"))}const ae="firebase-heartbeat-store";let ce=null;function le(){var e;return ce||(ce=("firebase-heartbeat-database",1,e=(e,t)=>{0===t&&e.createObjectStore(ae)},new Promise(((t,n)=>{try{const i=indexedDB.open("firebase-heartbeat-database",1);i.onsuccess=e=>{t(new R(e.target.result))},i.onerror=e=>{var t;n(`Error opening indexedDB: ${null===(t=e.target.error)||void 0===t?void 0:t.message}`)},i.onupgradeneeded=t=>{e(new R(i.result),t.oldVersion,t.newVersion,new D(i.transaction))}}catch(e){n(`Error opening indexedDB: ${e.message}`)}}))).catch((e=>{throw ne.create("storage-open",{originalErrorMessage:e.message})}))),ce}async function ue(e,t){try{const n=(await le()).transaction(ae,"readwrite"),i=n.objectStore(ae);return await i.put(t,he(e)),n.complete}catch(e){throw ne.create("storage-set",{originalErrorMessage:e.message})}}function he(e){return`${e.name}!${e.options.appId}`}class de{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new pe(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=fe();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some((e=>e.date===t)))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=fe(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),me(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),me(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),i=h(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function fe(){return(new Date).toISOString().substring(0,10)}class pe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return"object"==typeof indexedDB&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{return(await le()).transaction(ae).objectStore(ae).get(he(e))}catch(e){throw ne.create("storage-get",{originalErrorMessage:e.message})}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ue(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ue(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function me(e){return h(JSON.stringify({version:2,heartbeats:e})).length}ee(new P("platform-logger",(e=>new K(e)),"PRIVATE")),ee(new P("heartbeat",(e=>new de(e)),"PRIVATE")),oe(G,W,""),oe(G,W,"esm2017"),oe("fire-js",""),oe("firebase","9.6.10","app");var ge,ye="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},ve={},we=we||{},be=ye||self;function Ie(){}function Ee(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Te(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Se="closure_uid_"+(1e9*Math.random()>>>0),_e=0;function ke(e,t,n){return e.call.apply(e.bind,arguments)}function Ce(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Ae(e,t,n){return(Ae=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ke:Ce).apply(null,arguments)}function Ne(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Re(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return t.prototype[n].apply(e,s)}}function De(){this.s=this.s,this.o=this.o}var Le={};De.prototype.s=!1,De.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Se)&&e[Se]||(e[Se]=++_e)}(this);delete Le[e]}},De.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Oe=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Pe=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const i=e.length,s="string"==typeof e?e.split(""):e;for(let r=0;r<i;r++)r in s&&t.call(n,s[r],r,e)};function xe(e){return Array.prototype.concat.apply([],arguments)}function Me(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Ue(e){return/^[\s\xa0]*$/.test(e)}var Fe,Ve=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function qe(e,t){return-1!=e.indexOf(t)}function je(e,t){return e<t?-1:e>t?1:0}e:{var Be=be.navigator;if(Be){var $e=Be.userAgent;if($e){Fe=$e;break e}}Fe=""}function ze(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function He(e){const t={};for(const n in e)t[n]=e[n];return t}var Ke="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ge(e,t){let n,i;for(let t=1;t<arguments.length;t++){for(n in i=arguments[t],i)e[n]=i[n];for(let t=0;t<Ke.length;t++)n=Ke[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function We(e){return We[" "](e),e}We[" "]=Ie;var Xe,Ye,Je=qe(Fe,"Opera"),Qe=qe(Fe,"Trident")||qe(Fe,"MSIE"),Ze=qe(Fe,"Edge"),et=Ze||Qe,tt=qe(Fe,"Gecko")&&!(qe(Fe.toLowerCase(),"webkit")&&!qe(Fe,"Edge"))&&!(qe(Fe,"Trident")||qe(Fe,"MSIE"))&&!qe(Fe,"Edge"),nt=qe(Fe.toLowerCase(),"webkit")&&!qe(Fe,"Edge");function it(){var e=be.document;return e?e.documentMode:void 0}e:{var st="",rt=(Ye=Fe,tt?/rv:([^\);]+)(\)|;)/.exec(Ye):Ze?/Edge\/([\d\.]+)/.exec(Ye):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ye):nt?/WebKit\/(\S+)/.exec(Ye):Je?/(?:Version)[ \/]?(\S+)/.exec(Ye):void 0);if(rt&&(st=rt?rt[1]:""),Qe){var ot=it();if(null!=ot&&ot>parseFloat(st)){Xe=String(ot);break e}}Xe=st}var at,ct={};function lt(){return e=ct,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=Ve(String(Xe)).split("."),n=Ve("9").split("."),i=Math.max(t.length,n.length);for(let o=0;0==e&&o<i;o++){var s=t[o]||"",r=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;e=je(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||je(0==s[2].length,0==r[2].length)||je(s[2],r[2]),s=s[3],r=r[3]}while(0==e)}return 0<=e}();var e}be.document&&Qe?at=it()||parseInt(Xe,10)||void 0:at=void 0;var ut=at,ht=function(){if(!be.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{be.addEventListener("test",Ie,t),be.removeEventListener("test",Ie,t)}catch(e){}return e}();function dt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ft(e,t){if(dt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(tt){e:{try{We(t.nodeName);var s=!0;break e}catch(e){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:pt[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ft.Z.h.call(this)}}dt.prototype.h=function(){this.defaultPrevented=!0},Re(ft,dt);var pt={2:"touch",3:"pen",4:"mouse"};ft.prototype.h=function(){ft.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var mt="closure_listenable_"+(1e6*Math.random()|0),gt=0;function yt(e,t,n,i,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ia=s,this.key=++gt,this.ca=this.fa=!1}function vt(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function wt(e){this.src=e,this.g={},this.h=0}function bt(e,t){var n=t.type;if(n in e.g){var i,s=e.g[n],r=Oe(s,t);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(vt(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function It(e,t,n,i){for(var s=0;s<e.length;++s){var r=e[s];if(!r.ca&&r.listener==t&&r.capture==!!n&&r.ia==i)return s}return-1}wt.prototype.add=function(e,t,n,i,s){var r=e.toString();(e=this.g[r])||(e=this.g[r]=[],this.h++);var o=It(e,t,i,s);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new yt(t,this.src,r,!!i,s)).fa=n,e.push(t)),t};var Et="closure_lm_"+(1e6*Math.random()|0),Tt={};function St(e,t,n,i,s){if(i&&i.once)return kt(e,t,n,i,s);if(Array.isArray(t)){for(var r=0;r<t.length;r++)St(e,t[r],n,i,s);return null}return n=Ot(n),e&&e[mt]?e.N(t,n,Te(i)?!!i.capture:!!i,s):_t(e,t,n,!1,i,s)}function _t(e,t,n,i,s,r){if(!t)throw Error("Invalid event type");var o=Te(s)?!!s.capture:!!s,a=Dt(e);if(a||(e[Et]=a=new wt(e)),(n=a.add(t,n,i,o,r)).proxy)return n;if(i=function(){var e=Rt;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)ht||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),i,s);else if(e.attachEvent)e.attachEvent(Nt(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function kt(e,t,n,i,s){if(Array.isArray(t)){for(var r=0;r<t.length;r++)kt(e,t[r],n,i,s);return null}return n=Ot(n),e&&e[mt]?e.O(t,n,Te(i)?!!i.capture:!!i,s):_t(e,t,n,!0,i,s)}function Ct(e,t,n,i,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)Ct(e,t[r],n,i,s);else i=Te(i)?!!i.capture:!!i,n=Ot(n),e&&e[mt]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=It(r=e.g[t],n,i,s))&&(vt(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete e.g[t],e.h--))):e&&(e=Dt(e))&&(t=e.g[t.toString()],e=-1,t&&(e=It(t,n,i,s)),(n=-1<e?t[e]:null)&&At(n))}function At(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[mt])bt(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Nt(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Dt(t))?(bt(n,e),0==n.h&&(n.src=null,t[Et]=null)):vt(e)}}}function Nt(e){return e in Tt?Tt[e]:Tt[e]="on"+e}function Rt(e,t){if(e.ca)e=!0;else{t=new ft(t,this);var n=e.listener,i=e.ia||e.src;e.fa&&At(e),e=n.call(i,t)}return e}function Dt(e){return(e=e[Et])instanceof wt?e:null}var Lt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ot(e){return"function"==typeof e?e:(e[Lt]||(e[Lt]=function(t){return e.handleEvent(t)}),e[Lt])}function Pt(){De.call(this),this.i=new wt(this),this.P=this,this.I=null}function xt(e,t){var n,i=e.I;if(i)for(n=[];i;i=i.I)n.push(i);if(e=e.P,i=t.type||t,"string"==typeof t)t=new dt(t,e);else if(t instanceof dt)t.target=t.target||e;else{var s=t;Ge(t=new dt(i,e),s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=t.g=n[r];s=Mt(o,i,!0,t)&&s}if(s=Mt(o=t.g=e,i,!0,t)&&s,s=Mt(o,i,!1,t)&&s,n)for(r=0;r<n.length;r++)s=Mt(o=t.g=n[r],i,!1,t)&&s}function Mt(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&bt(e.i,o),s=!1!==a.call(c,i)&&s}}return s&&!i.defaultPrevented}Re(Pt,De),Pt.prototype[mt]=!0,Pt.prototype.removeEventListener=function(e,t,n,i){Ct(this,e,t,n,i)},Pt.prototype.M=function(){if(Pt.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)vt(n[i]);delete t.g[e],t.h--}}this.I=null},Pt.prototype.N=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Pt.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Ut=be.JSON.stringify;function Ft(){var e=Ht;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Vt,qt=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new jt),(e=>e.reset()));class jt{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Bt(e){be.setTimeout((()=>{throw e}),0)}function $t(e,t){Vt||function(){var e=be.Promise.resolve(void 0);Vt=function(){e.then(Kt)}}(),zt||(Vt(),zt=!0),Ht.add(e,t)}var zt=!1,Ht=new class{constructor(){this.h=this.g=null}add(e,t){const n=qt.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Kt(){for(var e;e=Ft();){try{e.h.call(e.g)}catch(e){Bt(e)}var t=qt;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}zt=!1}function Gt(e,t){Pt.call(this),this.h=e||1,this.g=t||be,this.j=Ae(this.kb,this),this.l=Date.now()}function Wt(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function Xt(e,t,n){if("function"==typeof e)n&&(e=Ae(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Ae(e.handleEvent,e)}return 2147483647<Number(t)?-1:be.setTimeout(e,t||0)}function Yt(e){e.g=Xt((()=>{e.g=null,e.i&&(e.i=!1,Yt(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Re(Gt,Pt),(ge=Gt.prototype).da=!1,ge.S=null,ge.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),xt(this,"tick"),this.da&&(Wt(this),this.start()))}},ge.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ge.M=function(){Gt.Z.M.call(this),Wt(this),delete this.g};class Jt extends De{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Yt(this)}M(){super.M(),this.g&&(be.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qt(e){De.call(this),this.h=e,this.g={}}Re(Qt,De);var Zt=[];function en(e,t,n,i){Array.isArray(n)||(n&&(Zt[0]=n.toString()),n=Zt);for(var s=0;s<n.length;s++){var r=St(t,n[s],i||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function tn(e){ze(e.g,(function(e,t){this.g.hasOwnProperty(t)&&At(e)}),e),e.g={}}function nn(){this.g=!0}function sn(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return Ut(n)}catch(e){return t}}(e,n)+(i?" "+i:"")}))}Qt.prototype.M=function(){Qt.Z.M.call(this),tn(this)},Qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},nn.prototype.Aa=function(){this.g=!1},nn.prototype.info=function(){};var rn={},on=null;function an(){return on=on||new Pt}function cn(e){dt.call(this,rn.Ma,e)}function ln(e){const t=an();xt(t,new cn(t,e))}function un(e,t){dt.call(this,rn.STAT_EVENT,e),this.stat=t}function hn(e){const t=an();xt(t,new un(t,e))}function dn(e,t){dt.call(this,rn.Na,e),this.size=t}function fn(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return be.setTimeout((function(){e()}),t)}rn.Ma="serverreachability",Re(cn,dt),rn.STAT_EVENT="statevent",Re(un,dt),rn.Na="timingevent",Re(dn,dt);var pn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},mn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function gn(){}function yn(e){return e.h||(e.h=e.i())}function vn(){}gn.prototype.h=null;var wn,bn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function In(){dt.call(this,"d")}function En(){dt.call(this,"c")}function Tn(){}function Sn(e,t,n,i){this.l=e,this.j=t,this.m=n,this.X=i||1,this.V=new Qt(this),this.P=kn,e=et?125:void 0,this.W=new Gt(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new _n}function _n(){this.i=null,this.g="",this.h=!1}Re(In,dt),Re(En,dt),Re(Tn,gn),Tn.prototype.g=function(){return new XMLHttpRequest},Tn.prototype.i=function(){return{}},wn=new Tn;var kn=45e3,Cn={},An={};function Nn(e,t,n){e.K=1,e.v=Qn(Kn(t)),e.s=n,e.U=!0,Rn(e,null)}function Rn(e,t){e.F=Date.now(),Pn(e),e.A=Kn(e.v);var n=e.A,i=e.X;Array.isArray(i)||(i=[String(i)]),hi(n.h,"t",i),e.C=0,n=e.l.H,e.h=new _n,e.g=hs(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Jt(Ae(e.Ia,e,e.g),e.O)),en(e.V,e.g,"readystatechange",e.gb),t=e.H?He(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),ln(1),function(e,t,n,i,s,r){e.info((function(){if(e.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Dn(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Ln(e,t,n){let i,s=!0;for(;!e.I&&e.C<n.length;){if(i=On(e,n),i==An){4==t&&(e.o=4,hn(14),s=!1),sn(e.j,e.m,null,"[Incomplete Response]");break}if(i==Cn){e.o=4,hn(15),sn(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}sn(e.j,e.m,i,null),Vn(e,i)}Dn(e)&&i!=An&&i!=Cn&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,hn(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),is(t),t.L=!0,hn(11))):(sn(e.j,e.m,n,"[Invalid Chunked Response]"),Fn(e),Un(e))}function On(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?An:(n=Number(t.substring(n,i)),isNaN(n)?Cn:(i+=1)+n>t.length?An:(t=t.substr(i,n),e.C=i+n,t))}function Pn(e){e.Y=Date.now()+e.P,xn(e,e.P)}function xn(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=fn(Ae(e.eb,e),t)}function Mn(e){e.B&&(be.clearTimeout(e.B),e.B=null)}function Un(e){0==e.l.G||e.I||os(e.l,e)}function Fn(e){Mn(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Wt(e.W),tn(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Vn(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||yi(n.i,e)))if(n.I=e.N,!e.J&&yi(n.i,e)&&3==n.G){try{var i=n.Ca.g.parse(t)}catch(e){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;rs(n),Wi(n)}ns(n),hn(18)}}else n.ta=s[1],0<n.ta-n.U&&37500>s[2]&&n.N&&0==n.A&&!n.v&&(n.v=fn(Ae(n.ab,n),6e3));if(1>=gi(n.i)&&n.ka){try{n.ka()}catch(e){}n.ka=void 0}}else cs(n,11)}else if((e.J||n.g==e)&&rs(n),!Ue(t))for(s=n.Ca.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const t=l[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const s=l[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(i=1.5*u,n.K=i,n.h.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=i.i;!r.g&&(qe(e,"spdy")||qe(e,"quic")||qe(e,"h2"))&&(r.j=r.l,r.g=new Set,r.h&&(vi(r,r.h),r.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.sa=e,Jn(i.F,i.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((i=n).oa=us(i,i.H?i.la:null,i.W),o.J){wi(i.i,o);var a=o,c=i.K;c&&a.setTimeout(c),a.B&&(Mn(a),Pn(a)),i.g=o}else ts(i);0<n.l.length&&Ji(n)}else"stop"!=l[0]&&"close"!=l[0]||cs(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?cs(n,7):Gi(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}ln(4)}catch(e){}}function qn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ee(e)||"string"==typeof e)Pe(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ee(e)||"string"==typeof e){n=[];for(var i=e.length,s=0;s<i;s++)n.push(s)}else for(s in n=[],i=0,e)n[i++]=s;i=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Ee(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),s=i.length;for(var r=0;r<s;r++)t.call(void 0,i[r],n&&n[r],e)}}function jn(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var i=0;i<n;i+=2)this.set(arguments[i],arguments[i+1])}else if(e)if(e instanceof jn)for(n=e.T(),i=0;i<n.length;i++)this.set(n[i],e.get(n[i]));else for(i in e)this.set(i,e[i])}function Bn(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var i=e.g[t];$n(e.h,i)&&(e.g[n++]=i),t++}e.g.length=n}if(e.i!=e.g.length){var s={};for(n=t=0;t<e.g.length;)$n(s,i=e.g[t])||(e.g[n++]=i,s[i]=1),t++;e.g.length=n}}function $n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(ge=Sn.prototype).setTimeout=function(e){this.P=e},ge.gb=function(e){e=e.target;const t=this.L;t&&3==Bi(e)?t.l():this.Ia(e)},ge.Ia=function(e){try{if(e==this.g)e:{const u=Bi(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>u)&&(3!=u||et||this.g&&(this.h.h||this.g.ga()||$i(this.g)))){this.I||4!=u||7==t||ln(8==t||0>=h?3:2),Mn(this);var n=this.g.ba();this.N=n;t:if(Dn(this)){var i=$i(this.g);e="";var s=i.length,r=4==Bi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Fn(this),Un(this);var o="";break t}this.h.i=new be.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:r&&t==s-1});i.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,i,s,r,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+r+" "+o}))}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ue(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,hn(12),Fn(this),Un(this);break e}sn(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Vn(this,n)}this.U?(Ln(this,u,o),et&&this.i&&3==u&&(en(this.V,this.W,"tick",this.fb),this.W.start())):(sn(this.j,this.m,o,null),Vn(this,o)),4==u&&Fn(this),this.i&&!this.I&&(4==u?os(this.l,this):(this.i=!1,Pn(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,hn(12)):(this.o=0,hn(13)),Fn(this),Un(this)}}}catch(e){}},ge.fb=function(){if(this.g){var e=Bi(this.g),t=this.g.ga();this.C<t.length&&(Mn(this),Ln(this,e,t),this.i&&4!=e&&Pn(this))}},ge.cancel=function(){this.I=!0,Fn(this)},ge.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(ln(3),hn(17)),Fn(this),this.o=2,Un(this)):xn(this,this.Y-e)},(ge=jn.prototype).R=function(){Bn(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},ge.T=function(){return Bn(this),this.g.concat()},ge.get=function(e,t){return $n(this.h,e)?this.h[e]:t},ge.set=function(e,t){$n(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},ge.forEach=function(e,t){for(var n=this.T(),i=0;i<n.length;i++){var s=n[i],r=this.get(s);e.call(t,r,s,this)}};var zn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Hn(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Hn){this.g=void 0!==t?t:e.g,Gn(this,e.j),this.s=e.s,Wn(this,e.i),Xn(this,e.m),this.l=e.l,t=e.h;var n=new ai;n.i=t.i,t.g&&(n.g=new jn(t.g),n.h=t.h),Yn(this,n),this.o=e.o}else e&&(n=String(e).match(zn))?(this.g=!!t,Gn(this,n[1]||"",!0),this.s=Zn(n[2]||""),Wn(this,n[3]||"",!0),Xn(this,n[4]),this.l=Zn(n[5]||"",!0),Yn(this,n[6]||"",!0),this.o=Zn(n[7]||"")):(this.g=!!t,this.h=new ai(null,this.g))}function Kn(e){return new Hn(e)}function Gn(e,t,n){e.j=n?Zn(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Wn(e,t,n){e.i=n?Zn(t,!0):t}function Xn(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Yn(e,t,n){t instanceof ai?(e.h=t,function(e,t){t&&!e.j&&(ci(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(li(this,t),hi(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=ei(t,ri)),e.h=new ai(t,e.g))}function Jn(e,t,n){e.h.set(t,n)}function Qn(e){return Jn(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Zn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ei(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,ti),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ti(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Hn.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ei(t,ni,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ei(t,ni,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ei(n,"/"==n.charAt(0)?si:ii,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ei(n,oi)),e.join("")};var ni=/[#\/\?@]/g,ii=/[#\?:]/g,si=/[#\?]/g,ri=/[#\?@]/g,oi=/#/g;function ai(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ci(e){e.g||(e.g=new jn,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),s=null;if(0<=i){var r=e[n].substring(0,i);s=e[n].substring(i+1)}else r=e[n];t(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function li(e,t){ci(e),t=di(e,t),$n(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,$n((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Bn(e)))}function ui(e,t){return ci(e),t=di(e,t),$n(e.g.h,t)}function hi(e,t,n){li(e,t),0<n.length&&(e.i=null,e.g.set(di(e,t),Me(n)),e.h+=n.length)}function di(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function fi(e){this.l=e||pi,e=be.PerformanceNavigationTiming?0<(e=be.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(be.g&&be.g.Ea&&be.g.Ea()&&be.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ge=ai.prototype).add=function(e,t){ci(this),this.i=null,e=di(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},ge.forEach=function(e,t){ci(this),this.g.forEach((function(n,i){Pe(n,(function(n){e.call(t,n,i,this)}),this)}),this)},ge.T=function(){ci(this);for(var e=this.g.R(),t=this.g.T(),n=[],i=0;i<t.length;i++)for(var s=e[i],r=0;r<s.length;r++)n.push(t[i]);return n},ge.R=function(e){ci(this);var t=[];if("string"==typeof e)ui(this,e)&&(t=xe(t,this.g.get(di(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=xe(t,e[n])}return t},ge.set=function(e,t){return ci(this),this.i=null,ui(this,e=di(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},ge.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var i=t[n],s=encodeURIComponent(String(i));i=this.R(i);for(var r=0;r<i.length;r++){var o=s;""!==i[r]&&(o+="="+encodeURIComponent(String(i[r]))),e.push(o)}}return this.i=e.join("&")};var pi=10;function mi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function gi(e){return e.h?1:e.g?e.g.size:0}function yi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function vi(e,t){e.g?e.g.add(t):e.h=t}function wi(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function bi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Me(e.i)}function Ii(){}function Ei(){this.g=new Ii}function Ti(e,t,n){const i=n||"";try{qn(e,(function(e,n){let s=e;Te(e)&&(s=Ut(e)),t.push(i+n+"="+encodeURIComponent(s))}))}catch(e){throw t.push(i+"type="+encodeURIComponent("_badmap")),e}}function Si(e,t,n,i,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(i)}catch(e){}}function _i(e){this.l=e.$b||null,this.j=e.ib||!1}function ki(e,t){Pt.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ci,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fi.prototype.cancel=function(){if(this.i=bi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Ii.prototype.stringify=function(e){return be.JSON.stringify(e,void 0)},Ii.prototype.parse=function(e){return be.JSON.parse(e,void 0)},Re(_i,gn),_i.prototype.g=function(){return new ki(this.l,this.j)},_i.prototype.i=function(e){return function(){return e}}({}),Re(ki,Pt);var Ci=0;function Ai(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Ni(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ri(e)}function Ri(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(ge=ki.prototype).open=function(e,t){if(this.readyState!=Ci)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ri(this)},ge.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||be).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ni(this)),this.readyState=Ci},ge.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==be.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ai(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},ge.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ni(this):Ri(this),3==this.readyState&&Ai(this)}},ge.Ua=function(e){this.g&&(this.response=this.responseText=e,Ni(this))},ge.Ta=function(e){this.g&&(this.response=e,Ni(this))},ge.ha=function(){this.g&&Ni(this)},ge.setRequestHeader=function(e,t){this.v.append(e,t)},ge.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},ge.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ki.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Di=be.JSON.parse;function Li(e){Pt.call(this),this.headers=new jn,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oi,this.K=this.L=!1}Re(Li,Pt);var Oi="",Pi=/^https?$/i,xi=["POST","PUT"];function Mi(e){return"content-type"==e.toLowerCase()}function Ui(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Fi(e),qi(e)}function Fi(e){e.D||(e.D=!0,xt(e,"complete"),xt(e,"error"))}function Vi(e){if(e.h&&void 0!==we&&(!e.C[1]||4!=Bi(e)||2!=e.ba()))if(e.v&&4==Bi(e))Xt(e.Fa,0,e);else if(xt(e,"readystatechange"),4==Bi(e)){e.h=!1;try{const a=e.ba();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var s=String(e.H).match(zn)[1]||null;if(!s&&be.self&&be.self.location){var r=be.self.location.protocol;s=r.substr(0,r.length-1)}i=!Pi.test(s?s.toLowerCase():"")}n=i}if(n)xt(e,"complete"),xt(e,"success");else{e.m=6;try{var o=2<Bi(e)?e.g.statusText:""}catch(e){o=""}e.j=o+" ["+e.ba()+"]",Fi(e)}}finally{qi(e)}}}function qi(e,t){if(e.g){ji(e);const n=e.g,i=e.C[0]?Ie:null;e.g=null,e.C=null,t||xt(e,"ready");try{n.onreadystatechange=i}catch(e){}}}function ji(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(be.clearTimeout(e.A),e.A=null)}function Bi(e){return e.g?e.g.readyState:0}function $i(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Oi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function zi(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=function(e){let t="";return ze(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Jn(e,t,n))}function Hi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ki(e){this.za=0,this.l=[],this.h=new nn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Hi("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Hi("baseRetryDelayMs",5e3,e),this.$a=Hi("retryDelaySeedMs",1e4,e),this.Ya=Hi("forwardChannelMaxRetries",2,e),this.ra=Hi("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new fi(e&&e.concurrentRequestLimit),this.Ca=new Ei,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Gi(e){if(Xi(e),3==e.G){var t=e.V++,n=Kn(e.F);Jn(n,"SID",e.J),Jn(n,"RID",t),Jn(n,"TYPE","terminate"),Zi(e,n),(t=new Sn(e,e.h,t,void 0)).K=2,t.v=Qn(Kn(n)),n=!1,be.navigator&&be.navigator.sendBeacon&&(n=be.navigator.sendBeacon(t.v.toString(),"")),!n&&be.Image&&((new Image).src=t.v,n=!0),n||(t.g=hs(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Pn(t)}ls(e)}function Wi(e){e.g&&(is(e),e.g.cancel(),e.g=null)}function Xi(e){Wi(e),e.u&&(be.clearTimeout(e.u),e.u=null),rs(e),e.i.cancel(),e.m&&("number"==typeof e.m&&be.clearTimeout(e.m),e.m=null)}function Yi(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&Ji(e)}function Ji(e){mi(e.i)||e.m||(e.m=!0,$t(e.Ha,e),e.C=0)}function Qi(e,t){var n;n=t?t.m:e.V++;const i=Kn(e.F);Jn(i,"SID",e.J),Jn(i,"RID",n),Jn(i,"AID",e.U),Zi(e,i),e.o&&e.s&&zi(i,e.o,e.s),n=new Sn(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=es(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),vi(e.i,n),Nn(n,i,t)}function Zi(e,t){e.j&&qn({},(function(e,n){Jn(t,n,e)}))}function es(e,t,n){n=Math.min(e.l.length,n);var i=e.j?Ae(e.j.Oa,e.j,e):null;e:{var s=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let r=!0;for(let o=0;o<n;o++){let n=s[o].h;const a=s[o].g;if(n-=t,0>n)t=Math.max(0,s[o].h-100),r=!1;else try{Ti(a,e,"req"+n+"_")}catch(e){i&&i(a)}}if(r){i=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,i}function ts(e){e.g||e.u||(e.Y=1,$t(e.Ga,e),e.A=0)}function ns(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=fn(Ae(e.Ga,e),as(e,e.A)),e.A++,0))}function is(e){null!=e.B&&(be.clearTimeout(e.B),e.B=null)}function ss(e){e.g=new Sn(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Kn(e.oa);Jn(t,"RID","rpc"),Jn(t,"SID",e.J),Jn(t,"CI",e.N?"0":"1"),Jn(t,"AID",e.U),Zi(e,t),Jn(t,"TYPE","xmlhttp"),e.o&&e.s&&zi(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Qn(Kn(t)),n.s=null,n.U=!0,Rn(n,e)}function rs(e){null!=e.v&&(be.clearTimeout(e.v),e.v=null)}function os(e,t){var n=null;if(e.g==t){rs(e),is(e),e.g=null;var i=2}else{if(!yi(e.i,t))return;n=t.D,wi(e.i,t),i=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.F;var s=e.C;xt(i=an(),new dn(i,n,t,s)),Ji(e)}else ts(e);else if(3==(s=t.o)||0==s&&0<e.I||!(1==i&&function(e,t){return!(gi(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=fn(Ae(e.Ha,e,t),as(e,e.C)),e.C++,0)))}(e,t)||2==i&&ns(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:cs(e,5);break;case 4:cs(e,10);break;case 3:cs(e,6);break;default:cs(e,2)}}function as(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function cs(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var i=Ae(e.jb,e);n||(n=new Hn("//www.google.com/images/cleardot.gif"),be.location&&"http"==be.location.protocol||Gn(n,"https"),Qn(n)),function(e,t){const n=new nn;if(be.Image){const i=new Image;i.onload=Ne(Si,n,i,"TestLoadImage: loaded",!0,t),i.onerror=Ne(Si,n,i,"TestLoadImage: error",!1,t),i.onabort=Ne(Si,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=Ne(Si,n,i,"TestLoadImage: timeout",!1,t),be.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else hn(2);e.G=0,e.j&&e.j.va(t),ls(e),Xi(e)}function ls(e){e.G=0,e.I=-1,e.j&&(0==bi(e.i).length&&0==e.l.length||(e.i.i.length=0,Me(e.l),e.l.length=0),e.j.ua())}function us(e,t,n){let i=function(e){return e instanceof Hn?Kn(e):new Hn(e,void 0)}(n);if(""!=i.i)t&&Wn(i,t+"."+i.i),Xn(i,i.m);else{const e=be.location;i=function(e,t,n,i){var s=new Hn(null,void 0);return e&&Gn(s,e),t&&Wn(s,t),n&&Xn(s,n),i&&(s.l=i),s}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&ze(e.aa,(function(e,t){Jn(i,t,e)})),t=e.D,n=e.sa,t&&n&&Jn(i,t,n),Jn(i,"VER",e.ma),Zi(e,i),i}function hs(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Li(new _i({ib:!0})):new Li(e.qa)).L=e.H,t}function ds(){}function fs(){if(Qe&&!(10<=Number(ut)))throw Error("Environmental error: no available transport.")}function ps(e,t){Pt.call(this),this.g=new Ki(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ue(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ue(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ys(this)}function ms(e){In.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function gs(){En.call(this),this.status=1}function ys(e){this.g=e}(ge=Li.prototype).ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():wn.g(),this.C=this.u?yn(this.u):yn(wn),this.g.onreadystatechange=Ae(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(e){return void Ui(this,e)}e=n||"";const s=new jn(this.headers);i&&qn(i,(function(e,t){s.set(t,e)})),i=function(e){e:{var t=Mi;const n=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<n;s++)if(s in i&&t.call(void 0,i[s],s,e)){t=s;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(s.T()),n=be.FormData&&e instanceof be.FormData,!(0<=Oe(xi,t))||i||n||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ji(this),0<this.B&&((this.K=function(e){return Qe&&lt()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ae(this.pa,this)):this.A=Xt(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){Ui(this,e)}},ge.pa=function(){void 0!==we&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xt(this,"timeout"),this.abort(8))},ge.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,xt(this,"complete"),xt(this,"abort"),qi(this))},ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qi(this,!0)),Li.Z.M.call(this)},ge.Fa=function(){this.s||(this.F||this.v||this.l?Vi(this):this.cb())},ge.cb=function(){Vi(this)},ge.ba=function(){try{return 2<Bi(this)?this.g.status:-1}catch(e){return-1}},ge.ga=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},ge.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Di(t)}},ge.Da=function(){return this.m},ge.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(ge=Ki.prototype).ma=8,ge.G=1,ge.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(e){}},ge.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new Sn(this,this.h,e,void 0);let r=this.s;if(this.P&&(r?(r=He(r),Ge(r,this.P)):r=this.P),null===this.o&&(s.H=r),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var i=this.l[n];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=es(this,s,t),Jn(n=Kn(this.F),"RID",e),Jn(n,"CVER",22),this.D&&Jn(n,"X-HTTP-Session-Id",this.D),Zi(this,n),this.o&&r&&zi(n,this.o,r),vi(this.i,s),this.Ra&&Jn(n,"TYPE","init"),this.ja?(Jn(n,"$req",t),Jn(n,"SID","null"),s.$=!0,Nn(s,n,null)):Nn(s,n,t),this.G=2}}else 3==this.G&&(e?Qi(this,e):0==this.l.length||mi(this.i)||Qi(this))},ge.Ga=function(){if(this.u=null,ss(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=fn(Ae(this.bb,this),e)}},ge.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,hn(10),Wi(this),ss(this))},ge.ab=function(){null!=this.v&&(this.v=null,Wi(this),ns(this),hn(19))},ge.jb=function(e){e?(this.h.info("Successfully pinged google.com"),hn(2)):(this.h.info("Failed to ping google.com"),hn(1))},(ge=ds.prototype).xa=function(){},ge.wa=function(){},ge.va=function(){},ge.ua=function(){},ge.Oa=function(){},fs.prototype.g=function(e,t){return new ps(e,t)},Re(ps,Pt),ps.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),$t(Ae(e.hb,e,t))),hn(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=us(e,null,e.W),Ji(e)},ps.prototype.close=function(){Gi(this.g)},ps.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,Yi(this.g,t)}else this.v?((t={}).__data__=Ut(e),Yi(this.g,t)):Yi(this.g,e)},ps.prototype.M=function(){this.g.j=null,delete this.j,Gi(this.g),delete this.g,ps.Z.M.call(this)},Re(ms,In),Re(gs,En),Re(ys,ds),ys.prototype.xa=function(){xt(this.g,"a")},ys.prototype.wa=function(e){xt(this.g,new ms(e))},ys.prototype.va=function(e){xt(this.g,new gs(e))},ys.prototype.ua=function(){xt(this.g,"b")},fs.prototype.createWebChannel=fs.prototype.g,ps.prototype.send=ps.prototype.u,ps.prototype.open=ps.prototype.m,ps.prototype.close=ps.prototype.close,pn.NO_ERROR=0,pn.TIMEOUT=8,pn.HTTP_ERROR=6,mn.COMPLETE="complete",vn.EventType=bn,bn.OPEN="a",bn.CLOSE="b",bn.ERROR="c",bn.MESSAGE="d",Pt.prototype.listen=Pt.prototype.N,Li.prototype.listenOnce=Li.prototype.O,Li.prototype.getLastError=Li.prototype.La,Li.prototype.getLastErrorCode=Li.prototype.Da,Li.prototype.getStatus=Li.prototype.ba,Li.prototype.getResponseJson=Li.prototype.Qa,Li.prototype.getResponseText=Li.prototype.ga,Li.prototype.send=Li.prototype.ea;var vs=ve.createWebChannelTransport=function(){return new fs},ws=ve.getStatEventTarget=function(){return an()},bs=ve.ErrorCode=pn,Is=ve.EventType=mn,Es=ve.Event=rn,Ts=ve.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Ss=ve.FetchXmlHttpFactory=_i,_s=ve.WebChannel=vn,ks=ve.XhrIo=Li;const Cs="@firebase/firestore";class As{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}As.UNAUTHENTICATED=new As(null),As.GOOGLE_CREDENTIALS=new As("google-credentials-uid"),As.FIRST_PARTY=new As("first-party-uid"),As.MOCK_USER=new As("mock-user");let Ns="9.6.10";const Rs=new H("@firebase/firestore");function Ds(){return Rs.logLevel}function Ls(e,...t){if(Rs.logLevel<=V.DEBUG){const n=t.map(xs);Rs.debug(`Firestore (${Ns}): ${e}`,...n)}}function Os(e,...t){if(Rs.logLevel<=V.ERROR){const n=t.map(xs);Rs.error(`Firestore (${Ns}): ${e}`,...n)}}function Ps(e,...t){if(Rs.logLevel<=V.WARN){const n=t.map(xs);Rs.warn(`Firestore (${Ns}): ${e}`,...n)}}function xs(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ms(e="Unexpected state"){const t=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: `+e;throw Os(t),new Error(t)}function Us(e,t){e||Ms()}function Fs(e,t){return e}const Vs={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qs extends v{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class js{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Bs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $s{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(As.UNAUTHENTICATED)))}shutdown(){}}class zs{constructor(e){this.t=e,this.currentUser=As.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new js;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new js,e.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Ls("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ls("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new js)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ls("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Us("string"==typeof t.accessToken),new Bs(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Us(null===e||"string"==typeof e),new As(e)}}class Hs{constructor(e,t,n){this.type="FirstParty",this.user=As.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class Ks{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Hs(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable((()=>t(As.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Gs{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ws{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const n=e=>{null!=e.error&&Ls("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.p;return this.p=e.token,Ls("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Ls("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?i(e):Ls("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Us("string"==typeof e.token),this.p=e.token,new Gs(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Xs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.I(e),this.T=e=>t.writeSequenceNumber(e))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Ys(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}Xs.A=-1;class Js{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Ys(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function Qs(e,t){return e<t?-1:e>t?1:0}function Zs(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}class er{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qs(Vs.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return er.fromMillis(Date.now())}static fromDate(e){return er.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new er(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Qs(this.nanoseconds,e.nanoseconds):Qs(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class tr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new tr(e)}static min(){return new tr(new er(0,0))}static max(){return new tr(new er(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function nr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ir(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function sr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class rr{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ms(),void 0===n?n=e.length-t:n>e.length-t&&Ms(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===rr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rr?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),s=t.get(i);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class or extends rr{construct(e,t,n){return new or(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new qs(Vs.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new or(t)}static emptyPath(){return new or([])}}const ar=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cr extends rr{construct(e,t,n){return new cr(e,t,n)}static isValidIdentifier(e){return ar.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new cr(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(0===n.length)throw new qs(Vs.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new qs(Vs.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new qs(Vs.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(r=!r,i++):"."!==t||r?(n+=t,i++):(s(),i++)}if(s(),r)throw new qs(Vs.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cr(t)}static emptyPath(){return new cr([])}}class lr{constructor(e){this.fields=e,e.sort(cr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ur(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qs(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const hr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dr(e){if(Us(!!e),"string"==typeof e){let t=0;const n=hr.exec(e);if(Us(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fr(e.seconds),nanos:fr(e.nanos)}}function fr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function pr(e){return"string"==typeof e?ur.fromBase64String(e):ur.fromUint8Array(e)}function mr(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gr(e){const t=e.mapValue.fields.__previous_value__;return mr(t)?gr(t):t}function yr(e){const t=dr(e.mapValue.fields.__local_write_time__.timestampValue);return new er(t.seconds,t.nanos)}class vr{constructor(e,t,n,i,s,r,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class wr{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wr("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wr&&e.projectId===this.projectId&&e.database===this.database}}function br(e){return null==e}function Ir(e){return 0===e&&1/e==-1/0}class Er{constructor(e){this.path=e}static fromPath(e){return new Er(or.fromString(e))}static fromName(e){return new Er(or.fromString(e).popFirst(5))}static empty(){return new Er(or.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===or.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return or.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Er(new or(e.slice()))}}function Tr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mr(e)?4:Mr(e)?9:10:Ms()}function Sr(e,t){if(e===t)return!0;const n=Tr(e);if(n!==Tr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return yr(e).isEqual(yr(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=dr(e.timestampValue),i=dr(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return pr(e.bytesValue).isEqual(pr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fr(e.geoPointValue.latitude)===fr(t.geoPointValue.latitude)&&fr(e.geoPointValue.longitude)===fr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fr(e.integerValue)===fr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=fr(e.doubleValue),i=fr(t.doubleValue);return n===i?Ir(n)===Ir(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Zs(e.arrayValue.values||[],t.arrayValue.values||[],Sr);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(nr(n)!==nr(i))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===i[e]||!Sr(n[e],i[e])))return!1;return!0}(e,t);default:return Ms()}}function _r(e,t){return void 0!==(e.values||[]).find((e=>Sr(e,t)))}function kr(e,t){if(e===t)return 0;const n=Tr(e),i=Tr(t);if(n!==i)return Qs(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Qs(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=fr(e.integerValue||e.doubleValue),i=fr(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Cr(e.timestampValue,t.timestampValue);case 4:return Cr(yr(e),yr(t));case 5:return Qs(e.stringValue,t.stringValue);case 6:return function(e,t){const n=pr(e),i=pr(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let e=0;e<n.length&&e<i.length;e++){const t=Qs(n[e],i[e]);if(0!==t)return t}return Qs(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Qs(fr(e.latitude),fr(t.latitude));return 0!==n?n:Qs(fr(e.longitude),fr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let e=0;e<n.length&&e<i.length;++e){const t=kr(n[e],i[e]);if(t)return t}return Qs(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},i=Object.keys(n),s=t.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let e=0;e<i.length&&e<r.length;++e){const t=Qs(i[e],r[e]);if(0!==t)return t;const o=kr(n[i[e]],s[r[e]]);if(0!==o)return o}return Qs(i.length,r.length)}(e.mapValue,t.mapValue);default:throw Ms()}}function Cr(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Qs(e,t);const n=dr(e),i=dr(t),s=Qs(n.seconds,i.seconds);return 0!==s?s:Qs(n.nanos,i.nanos)}function Ar(e){return Nr(e)}function Nr(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=dr(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?pr(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Er.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Nr(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const s of t)i?i=!1:n+=",",n+=`${s}:${Nr(e.fields[s])}`;return n+"}"}(e.mapValue):Ms();var t,n}function Rr(e){return!!e&&"integerValue"in e}function Dr(e){return!!e&&"arrayValue"in e}function Lr(e){return!!e&&"nullValue"in e}function Or(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pr(e){return!!e&&"mapValue"in e}function xr(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ir(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=xr(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xr(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Mr(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Pr(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xr(t)}setAll(e){let t=cr.emptyPath(),n={},i=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=s.popLast()}e?n[s.lastSegment()]=xr(e):i.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());Pr(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Sr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Pr(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){ir(t,((t,n)=>e[t]=n));for(const t of n)delete e[t]}clone(){return new Ur(xr(this.value))}}function Fr(e){const t=[];return ir(e.fields,((e,n)=>{const i=new cr([e]);if(Pr(n)){const e=Fr(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new lr(t)}class Vr{constructor(e,t,n,i,s,r){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.data=s,this.documentState=r}static newInvalidDocument(e){return new Vr(e,0,tr.min(),tr.min(),Ur.empty(),0)}static newFoundDocument(e,t,n){return new Vr(e,1,t,tr.min(),n,0)}static newNoDocument(e,t){return new Vr(e,2,t,tr.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new Vr(e,3,t,tr.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vr(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function qr(e){return new jr(e.readTime,e.key,-1)}class jr{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new jr(tr.min(),Er.empty(),-1)}static max(){return new jr(tr.max(),Er.empty(),-1)}}function Br(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Er.comparator(e.documentKey,t.documentKey),0!==n?n:Qs(e.largestBatchId,t.largestBatchId))}class $r{constructor(e,t=null,n=[],i=[],s=null,r=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.P=null}}function zr(e,t=null,n=[],i=[],s=null,r=null,o=null){return new $r(e,t,n,i,s,r,o)}function Hr(e){const t=Fs(e);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>{return(t=e).field.canonicalString()+t.op.toString()+Ar(t.value);var t})).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),br(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Ar(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Ar(e))).join(",")),t.P=e}return t.P}function Kr(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ro(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let s=0;s<e.filters.length;s++)if(n=e.filters[s],i=t.filters[s],n.op!==i.op||!n.field.isEqual(i.field)||!Sr(n.value,i.value))return!1;var n,i;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ao(e.startAt,t.startAt)&&ao(e.endAt,t.endAt)}function Gr(e){return Er.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Wr extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,n):new Xr(e,t,n):"array-contains"===t?new Zr(e,n):"in"===t?new eo(e,n):"not-in"===t?new to(e,n):"array-contains-any"===t?new no(e,n):new Wr(e,t,n)}static V(e,t,n){return"in"===t?new Yr(e,n):new Jr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(kr(t,this.value)):null!==t&&Tr(this.value)===Tr(t)&&this.v(kr(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ms()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Xr extends Wr{constructor(e,t,n){super(e,t,n),this.key=Er.fromName(n.referenceValue)}matches(e){const t=Er.comparator(e.key,this.key);return this.v(t)}}class Yr extends Wr{constructor(e,t){super(e,"in",t),this.keys=Qr(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Jr extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=Qr(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Er.fromName(e.referenceValue)))}class Zr extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Dr(t)&&_r(t.arrayValue,this.value)}}class eo extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_r(this.value.arrayValue,t)}}class to extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(_r(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_r(this.value.arrayValue,t)}}class no extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Dr(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>_r(this.value.arrayValue,e)))}}class io{constructor(e,t){this.position=e,this.inclusive=t}}class so{constructor(e,t="asc"){this.field=e,this.dir=t}}function ro(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function oo(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],o=e.position[s];if(i=r.field.isKeyField()?Er.comparator(Er.fromName(o.referenceValue),n.key):kr(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function ao(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Sr(e.position[n],t.position[n]))return!1;return!0}class co{constructor(e,t=null,n=[],i=[],s=null,r="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.D=null,this.C=null,this.startAt,this.endAt}}function lo(e){return new co(e)}function uo(e){return!br(e.limit)&&"F"===e.limitType}function ho(e){return!br(e.limit)&&"L"===e.limitType}function fo(e){const t=Fs(e);if(null===t.D){t.D=[];const e=function(e){for(const t of e.filters)if(t.S())return t.field;return null}(t),n=function(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}(t);if(null!==e&&null===n)e.isKeyField()||t.D.push(new so(e)),t.D.push(new so(cr.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.D.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new so(cr.keyField(),e))}}}return t.D}function po(e){const t=Fs(e);if(!t.C)if("F"===t.limitType)t.C=zr(t.path,t.collectionGroup,fo(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of fo(t)){const t="desc"===n.dir?"asc":"desc";e.push(new so(n.field,t))}const n=t.endAt?new io(t.endAt.position,!t.endAt.inclusive):null,i=t.startAt?new io(t.startAt.position,!t.startAt.inclusive):null;t.C=zr(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t.C}function mo(e,t){return Kr(po(e),po(t))&&e.limitType===t.limitType}function go(e){return`${Hr(po(e))}|lt:${e.limitType}`}function yo(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Ar(t.value)}`;var t})).join(", ")}]`),br(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Ar(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Ar(e))).join(",")),`Target(${t})`}(po(e))}; limitType=${e.limitType})`}function vo(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Er.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=oo(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,fo(e),t)||e.endAt&&!function(e,t,n){const i=oo(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,fo(e),t))}(e,t)}function wo(e){return(t,n)=>{let i=!1;for(const s of fo(e)){const e=bo(s,t,n);if(0!==e)return e;i=i||s.field.isKeyField()}return 0}}function bo(e,t,n){const i=e.field.isKeyField()?Er.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),s=n.data.field(e);return null!==i&&null!==s?kr(i,s):Ms()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Ms()}}function Io(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ir(t)?"-0":t}}function Eo(e){return{integerValue:""+e}}function To(e,t){return function(e){return"number"==typeof e&&Number.isInteger(e)&&!Ir(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}(t)?Eo(t):Io(e,t)}class So{constructor(){this._=void 0}}function _o(e,t,n){return e instanceof Ao?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof No?Ro(e,t):e instanceof Do?Lo(e,t):function(e,t){const n=Co(e,t),i=Po(n)+Po(e.k);return Rr(n)&&Rr(e.k)?Eo(i):Io(e.M,i)}(e,t)}function ko(e,t,n){return e instanceof No?Ro(e,t):e instanceof Do?Lo(e,t):n}function Co(e,t){return e instanceof Oo?Rr(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Ao extends So{}class No extends So{constructor(e){super(),this.elements=e}}function Ro(e,t){const n=xo(t);for(const t of e.elements)n.some((e=>Sr(e,t)))||n.push(t);return{arrayValue:{values:n}}}class Do extends So{constructor(e){super(),this.elements=e}}function Lo(e,t){let n=xo(t);for(const t of e.elements)n=n.filter((e=>!Sr(e,t)));return{arrayValue:{values:n}}}class Oo extends So{constructor(e,t){super(),this.M=e,this.k=t}}function Po(e){return fr(e.integerValue||e.doubleValue)}function xo(e){return Dr(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Mo{constructor(e,t){this.version=e,this.transformResults=t}}class Uo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Uo}static exists(e){return new Uo(void 0,e)}static updateTime(e){return new Uo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vo{}function qo(e,t,n){e instanceof Ho?function(e,t,n){const i=e.value.clone(),s=Wo(e.fieldTransforms,t,n.transformResults);i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof Ko?function(e,t,n){if(!Fo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=Wo(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Go(e)),s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jo(e,t,n){e instanceof Ho?function(e,t,n){if(!Fo(e.precondition,t))return;const i=e.value.clone(),s=Xo(e.fieldTransforms,n,t);i.setAll(s),t.convertToFoundDocument(zo(t),i).setHasLocalMutations()}(e,t,n):e instanceof Ko?function(e,t,n){if(!Fo(e.precondition,t))return;const i=Xo(e.fieldTransforms,n,t),s=t.data;s.setAll(Go(e)),s.setAll(i),t.convertToFoundDocument(zo(t),s).setHasLocalMutations()}(e,t,n):function(e,t){Fo(e.precondition,t)&&t.convertToNoDocument(tr.min())}(e,t)}function Bo(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),s=Co(i.transform,e||null);null!=s&&(null==n&&(n=Ur.empty()),n.set(i.field,s))}return n||null}function $o(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zs(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof No&&t instanceof No||e instanceof Do&&t instanceof Do?Zs(e.elements,t.elements,Sr):e instanceof Oo&&t instanceof Oo?Sr(e.k,t.k):e instanceof Ao&&t instanceof Ao}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function zo(e){return e.isFoundDocument()?e.version:tr.min()}class Ho extends Vo{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}}class Ko extends Vo{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}}function Go(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function Wo(e,t,n){const i=new Map;Us(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,ko(o,a,n[s]))}return i}function Xo(e,t,n){const i=new Map;for(const s of e){const e=s.transform,r=n.data.field(s.field);i.set(s.field,_o(e,r,t))}return i}class Yo extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Jo extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Qo{constructor(e){this.count=e}}var Zo,ea;function ta(e){if(void 0===e)return Os("GRPC error has no .code"),Vs.UNKNOWN;switch(e){case Zo.OK:return Vs.OK;case Zo.CANCELLED:return Vs.CANCELLED;case Zo.UNKNOWN:return Vs.UNKNOWN;case Zo.DEADLINE_EXCEEDED:return Vs.DEADLINE_EXCEEDED;case Zo.RESOURCE_EXHAUSTED:return Vs.RESOURCE_EXHAUSTED;case Zo.INTERNAL:return Vs.INTERNAL;case Zo.UNAVAILABLE:return Vs.UNAVAILABLE;case Zo.UNAUTHENTICATED:return Vs.UNAUTHENTICATED;case Zo.INVALID_ARGUMENT:return Vs.INVALID_ARGUMENT;case Zo.NOT_FOUND:return Vs.NOT_FOUND;case Zo.ALREADY_EXISTS:return Vs.ALREADY_EXISTS;case Zo.PERMISSION_DENIED:return Vs.PERMISSION_DENIED;case Zo.FAILED_PRECONDITION:return Vs.FAILED_PRECONDITION;case Zo.ABORTED:return Vs.ABORTED;case Zo.OUT_OF_RANGE:return Vs.OUT_OF_RANGE;case Zo.UNIMPLEMENTED:return Vs.UNIMPLEMENTED;case Zo.DATA_LOSS:return Vs.DATA_LOSS;default:return Ms()}}(ea=Zo||(Zo={}))[ea.OK=0]="OK",ea[ea.CANCELLED=1]="CANCELLED",ea[ea.UNKNOWN=2]="UNKNOWN",ea[ea.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ea[ea.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ea[ea.NOT_FOUND=5]="NOT_FOUND",ea[ea.ALREADY_EXISTS=6]="ALREADY_EXISTS",ea[ea.PERMISSION_DENIED=7]="PERMISSION_DENIED",ea[ea.UNAUTHENTICATED=16]="UNAUTHENTICATED",ea[ea.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ea[ea.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ea[ea.ABORTED=10]="ABORTED",ea[ea.OUT_OF_RANGE=11]="OUT_OF_RANGE",ea[ea.UNIMPLEMENTED=12]="UNIMPLEMENTED",ea[ea.INTERNAL=13]="INTERNAL",ea[ea.UNAVAILABLE=14]="UNAVAILABLE",ea[ea.DATA_LOSS=15]="DATA_LOSS";class na{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,i]of n)if(this.equalsFn(t,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<i.length;n++)if(this.equalsFn(i[n][0],e))return void(i[n]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ir(this.inner,((t,n)=>{for(const[t,i]of n)e(t,i)}))}isEmpty(){return sr(this.inner)}size(){return this.innerSize}}class ia{constructor(e,t){this.comparator=e,this.root=t||ra.EMPTY}insert(e,t){return new ia(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ra.BLACK,null,null))}remove(e){return new ia(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ra.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sa(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sa(this.root,e,this.comparator,!1)}getReverseIterator(){return new sa(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sa(this.root,e,this.comparator,!0)}}class sa{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ra{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:ra.RED,this.left=null!=i?i:ra.EMPTY,this.right=null!=s?s:ra.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new ra(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ra.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ra.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ra.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ra.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ms();if(this.right.isRed())throw Ms();const e=this.left.check();if(e!==this.right.check())throw Ms();return e+(this.isRed()?0:1)}}ra.EMPTY=null,ra.RED=!0,ra.BLACK=!1,ra.EMPTY=new class{constructor(){this.size=0}get key(){throw Ms()}get value(){throw Ms()}get color(){throw Ms()}get left(){throw Ms()}get right(){throw Ms()}copy(e,t,n,i,s){return this}insert(e,t,n){return new ra(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class oa{constructor(e){this.comparator=e,this.data=new ia(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new aa(this.data.getIterator())}getIteratorFrom(e){return new aa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof oa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new oa(this.comparator);return t.data=e,t}}class aa{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const ca=new ia(Er.comparator);function la(){return ca}const ua=new ia(Er.comparator);function ha(){return ua}function da(){return new na((e=>e.toString()),((e,t)=>e.isEqual(t)))}const fa=new ia(Er.comparator),pa=new oa(Er.comparator);function ma(...e){let t=pa;for(const n of e)t=t.add(n);return t}const ga=new oa(Qs);function ya(){return ga}class va{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,wa.createSynthesizedTargetChangeForCurrentChange(e,t)),new va(tr.min(),n,ya(),la(),ma())}}class wa{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t){return new wa(ur.EMPTY_BYTE_STRING,t,ma(),ma(),ma())}}class ba{constructor(e,t,n,i){this.O=e,this.removedTargetIds=t,this.key=n,this.F=i}}class Ia{constructor(e,t){this.targetId=e,this.$=t}}class Ea{constructor(e,t,n=ur.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Ta{constructor(){this.B=0,this.L=ka(),this.U=ur.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=ma(),t=ma(),n=ma();return this.L.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:Ms()}})),new wa(this.U,this.q,e,t,n)}J(){this.G=!1,this.L=ka()}Y(e,t){this.G=!0,this.L=this.L.insert(e,t)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Sa{constructor(e){this.nt=e,this.st=new Map,this.it=la(),this.rt=_a(),this.ot=new oa(Qs)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,(t=>{const n=this.lt(t);switch(e.state){case 0:this.ft(t)&&n.W(e.resumeToken);break;case 1:n.tt(),n.K||n.J(),n.W(e.resumeToken);break;case 2:n.tt(),n.K||this.removeTarget(t);break;case 3:this.ft(t)&&(n.et(),n.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),n.W(e.resumeToken));break;default:Ms()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach(((e,n)=>{this.ft(n)&&t(n)}))}_t(e){const t=e.targetId,n=e.$.count,i=this.wt(t);if(i){const e=i.target;if(Gr(e))if(0===n){const n=new Er(e.path);this.ct(t,n,Vr.newNoDocument(n,tr.min()))}else Us(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach(((n,i)=>{const s=this.wt(i);if(s){if(n.current&&Gr(s.target)){const t=new Er(s.target.path);null!==this.it.get(t)||this.It(i,t)||this.ct(i,t,Vr.newNoDocument(t,e))}n.j&&(t.set(i,n.H()),n.J())}}));let n=ma();this.rt.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.wt(e);return!t||2===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.it.forEach(((t,n)=>n.setReadTime(e)));const i=new va(e,t,this.ot,this.it,n);return this.it=la(),this.rt=_a(),this.ot=new oa(Qs),i}at(e,t){if(!this.ft(e))return;const n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ta,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new oa(Qs),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Ls("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new Ta),this.nt.getRemoteKeysForTarget(e).forEach((t=>{this.ct(e,t,null)}))}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function _a(){return new ia(Er.comparator)}function ka(){return new ia(Er.comparator)}const Ca={asc:"ASCENDING",desc:"DESCENDING"},Aa={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Na{constructor(e,t){this.databaseId=e,this.N=t}}function Ra(e,t){return e.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Da(e,t){return e.N?t.toBase64():t.toUint8Array()}function La(e,t){return Ra(e,t.toTimestamp())}function Oa(e){return Us(!!e),tr.fromTimestamp(function(e){const t=dr(e);return new er(t.seconds,t.nanos)}(e))}function Pa(e,t){return function(e){return new or(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xa(e){const t=or.fromString(e);return Us(Za(t)),t}function Ma(e,t){return Pa(e.databaseId,t.path)}function Ua(e,t){const n=xa(t);if(n.get(1)!==e.databaseId.projectId)throw new qs(Vs.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new qs(Vs.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Er(qa(n))}function Fa(e,t){return Pa(e.databaseId,t)}function Va(e){return new or(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qa(e){return Us(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ja(e,t,n){return{name:Ma(e,t),fields:n.value.mapValue.fields}}function Ba(e,t){return{documents:[Fa(e,t.path)]}}function $a(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=Fa(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Fa(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(e){if(0===e.length)return;const t=e.map((e=>function(e){if("=="===e.op){if(Or(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NAN"}};if(Lr(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Or(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NAN"}};if(Lr(e.value))return{unaryFilter:{field:Wa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Wa(e.field),op:Ga(e.op),value:e.value}}}(e)));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);s&&(n.structuredQuery.where=s);const r=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Wa(e.field),direction:Ka(e.dir)}}(e)))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=function(e,t){return e.N||br(t)?t:{value:t}}(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function za(e){let t=function(e){const t=xa(e);return 4===t.length?or.emptyPath():qa(t)}(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Us(1===i);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=Ha(n.where));let o=[];n.orderBy&&(o=n.orderBy.map((e=>function(e){return new so(Xa(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,br(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new io(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new io(n,t)}(n.endAt)),function(e,t,n,i,s,r,o,a){return new co(e,t,n,i,s,r,o,a)}(t,s,o,r,a,"F",c,l)}function Ha(e){return e?void 0!==e.unaryFilter?[Ja(e)]:void 0!==e.fieldFilter?[Ya(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((e=>Ha(e))).reduce(((e,t)=>e.concat(t))):Ms():[]}function Ka(e){return Ca[e]}function Ga(e){return Aa[e]}function Wa(e){return{fieldPath:e.canonicalString()}}function Xa(e){return cr.fromServerFormat(e.fieldPath)}function Ya(e){return Wr.create(Xa(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ms()}}(e.fieldFilter.op),e.fieldFilter.value)}function Ja(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xa(e.unaryFilter.field);return Wr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Xa(e.unaryFilter.field);return Wr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xa(e.unaryFilter.field);return Wr.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xa(e.unaryFilter.field);return Wr.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Ms()}}function Qa(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Za(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ec{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ms(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ec(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ec?t:ec.resolve(t)}catch(e){return ec.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ec.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ec.reject(t)}static resolve(e){return new ec(((t,n)=>{t(e)}))}static reject(e){return new ec(((t,n)=>{n(e)}))}static waitFor(e){return new ec(((t,n)=>{let i=0,s=0,r=!1;e.forEach((e=>{++i,e.next((()=>{++s,r&&s===i&&t()}),(e=>n(e)))})),r=!0,s===i&&t()}))}static or(e){let t=ec.resolve(!1);for(const n of e)t=t.next((e=>e?ec.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}}function tc(e){return"IndexedDbTransactionError"===e.name}class nc{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const i=this.mutations[t];i.key.isEqual(e.key)&&qo(i,e,n[t])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&jo(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&jo(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach((t=>{const n=e.get(t.key),i=n;this.applyToLocalView(i),n.isValidDocument()||i.convertToNoDocument(tr.min())}))}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ma())}isEqual(e){return this.batchId===e.batchId&&Zs(this.mutations,e.mutations,((e,t)=>$o(e,t)))&&Zs(this.baseMutations,e.baseMutations,((e,t)=>$o(e,t)))}}class ic{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Us(e.mutations.length===n.length);let i=fa;const s=e.mutations;for(let e=0;e<s.length;e++)i=i.insert(s[e].key,n[e].version);return new ic(e,t,n,i)}}class sc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class rc{constructor(e,t,n,i,s=tr.min(),r=tr.min(),o=ur.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o}withSequenceNumber(e){return new rc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new rc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class oc{constructor(e){this.Jt=e}}function ac(e){const t=za({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?function(e,t,n){return new co(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}(t,t.limit,"L"):t}class cc{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(fr(e.integerValue));else if("doubleValue"in e){const n=fr(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),Ir(n)?t.se(0):t.se(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ne(t,20),"string"==typeof n?t.ie(n):(t.ie(`${n.seconds||""}`),t.se(n.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(pr(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ne(t,45),t.se(n.latitude||0),t.se(n.longitude||0)}else"mapValue"in e?Mr(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ms()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const n=e.fields||{};this.ne(t,55);for(const e of Object.keys(n))this.re(e,t),this.te(n[e],t)}he(e,t){const n=e.values||[];this.ne(t,50);for(const e of n)this.te(e,t)}ae(e,t){this.ne(t,37),Er.fromName(e).path.forEach((e=>{this.ne(t,60),this.le(e,t)}))}ne(e,t){e.se(t)}oe(e){e.se(2)}}cc.fe=new cc;class lc{constructor(){this.qe=new uc}addToCollectionParentIndex(e,t){return this.qe.add(t),ec.resolve()}getCollectionParents(e,t){return ec.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return ec.resolve()}deleteFieldIndex(e,t){return ec.resolve()}getDocumentsMatchingTarget(e,t){return ec.resolve(null)}getFieldIndex(e,t){return ec.resolve(null)}getFieldIndexes(e,t){return ec.resolve([])}getNextCollectionGroupToUpdate(e){return ec.resolve(null)}updateCollectionGroup(e,t,n){return ec.resolve()}updateIndexEntries(e,t){return ec.resolve()}}class uc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new oa(or.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new oa(or.comparator)).toArray()}}new Uint8Array(0);class hc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new hc(e,hc.DEFAULT_COLLECTION_PERCENTILE,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}hc.DEFAULT_COLLECTION_PERCENTILE=10,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hc.DEFAULT=new hc(41943040,hc.DEFAULT_COLLECTION_PERCENTILE,hc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hc.DISABLED=new hc(-1,0,0);class dc{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new dc(0)}static gn(){return new dc(-1)}}async function fc(e){if(e.code!==Vs.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==e.message)throw e;Ls("LocalStore","Unexpectedly lost primary lease")}class pc{constructor(e,t,n){this.fs=e,this.$s=t,this.indexManager=n}Bs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,t).next((n=>this.Ls(e,t,n)))}Ls(e,t,n){return this.fs.getEntry(e,t).next((e=>{for(const t of n)t.applyToLocalView(e);return e}))}Us(e,t){e.forEach(((e,n)=>{for(const e of t)e.applyToLocalView(n)}))}qs(e,t){return this.fs.getEntries(e,t).next((t=>this.Gs(e,t).next((()=>t))))}Gs(e,t){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>this.Us(t,e)))}Ks(e,t,n){return function(e){return Er.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Qs(e,t.path):function(e){return null!==e.collectionGroup}(t)?this.js(e,t,n):this.Ws(e,t,n)}Qs(e,t){return this.Bs(e,new Er(t)).next((e=>{let t=ha();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}js(e,t,n){const i=t.collectionGroup;let s=ha();return this.indexManager.getCollectionParents(e,i).next((r=>ec.forEach(r,(r=>{const o=function(e,t){return new co(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,r.child(i));return this.Ws(e,o,n).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}Ws(e,t,n){let i;return this.fs.getAllFromCollection(e,t.path,n).next((n=>(i=n,this.$s.getAllMutationBatchesAffectingQuery(e,t)))).next((e=>{for(const t of e)for(const e of t.mutations){const n=e.key;let s=i.get(n);null==s&&(s=Vr.newInvalidDocument(n),i=i.insert(n,s)),jo(e,s,t.localWriteTime),s.isFoundDocument()||(i=i.remove(n))}})).next((()=>(i.forEach(((e,n)=>{vo(t,n)||(i=i.remove(e))})),i)))}}class mc{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.zs=n,this.Hs=i}static Js(e,t){let n=ma(),i=ma();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new mc(e,t.fromCache,n,i)}}class gc{Ys(e){this.Xs=e}Ks(e,t,n,i){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(tr.min())?this.Zs(e,t):this.Xs.qs(e,i).next((s=>{const r=this.ti(t,s);return(uo(t)||ho(t))&&this.ei(t.limitType,r,i,n)?this.Zs(e,t):(Ds()<=V.DEBUG&&Ls("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),yo(t)),this.Xs.Ks(e,t,function(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=tr.fromTimestamp(1e9===i?new er(n+1,0):new er(n,i));return new jr(s,Er.empty(),t)}(n,-1)).next((e=>(r.forEach((t=>{e=e.insert(t.key,t)})),e))))}))}ti(e,t){let n=new oa(wo(e));return t.forEach(((t,i)=>{vo(e,i)&&(n=n.add(i))})),n}ei(e,t,n,i){if(n.size!==t.size)return!0;const s="F"===e?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Zs(e,t){return Ds()<=V.DEBUG&&Ls("QueryEngine","Using full collection scan to execute query:",yo(t)),this.Xs.Ks(e,t,jr.min())}}class yc{constructor(e,t,n,i){this.persistence=e,this.ni=t,this.M=i,this.si=new ia(Qs),this.ii=new na((e=>Hr(e)),Kr),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(n)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new pc(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.si)))}}async function vc(e,t){const n=Fs(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.$s.getAllMutationBatches(e).next((s=>(i=s,n.ui(t),n.$s.getAllMutationBatches(e)))).next((t=>{const s=[],r=[];let o=ma();for(const e of i){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.ai.qs(e,o).next((e=>({ci:e,removedBatchIds:s,addedBatchIds:r})))}))}))}function wc(e){const t=Fs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.ls.getLastRemoteSnapshotVersion(e)))}function bc(e,t){const n=Fs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.$s.getNextMutationBatchAfterBatchId(e,t))))}async function Ic(e,t,n){const i=Fs(e),s=i.si.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(e=>i.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!tc(e))throw e;Ls("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.si=i.si.remove(t),i.ii.delete(s.target)}function Ec(e,t,n){const i=Fs(e);let s=tr.min(),r=ma();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=Fs(e),s=i.ii.get(n);return void 0!==s?ec.resolve(i.si.get(s)):i.ls.getTargetData(t,n)}(i,e,po(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,i.ls.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>i.ni.Ks(e,t,n?s:tr.min(),n?r:ma()))).next((e=>(function(e,t,n){let i=tr.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.ri.set(t,i)}(i,function(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}(t),e),{documents:e,hi:r})))))}class Tc{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,t){return ec.resolve(this._i.get(t))}saveBundleMetadata(e,t){var n;return this._i.set(t.id,{id:(n=t).id,version:n.version,createTime:Oa(n.createTime)}),ec.resolve()}getNamedQuery(e,t){return ec.resolve(this.wi.get(t))}saveNamedQuery(e,t){return this.wi.set(t.name,function(e){return{name:e.name,query:ac(e.bundledQuery),readTime:Oa(e.readTime)}}(t)),ec.resolve()}}class Sc{constructor(){this.overlays=new ia(Er.comparator),this.mi=new Map}getOverlay(e,t){return ec.resolve(this.overlays.get(t))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.Xt(e,t,i)})),ec.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.mi.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.mi.delete(n)),ec.resolve()}getOverlaysForCollection(e,t,n){const i=da(),s=t.length+1,r=new Er(t.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const e=o.getNext().value,r=e.getKey();if(!t.isPrefixOf(r.path))break;r.path.length===s&&e.largestBatchId>n&&i.set(e.getKey(),e)}return ec.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new ia(((e,t)=>e-t));const r=this.overlays.getIterator();for(;r.hasNext();){const e=r.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=da(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=da(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return ec.resolve(o)}Xt(e,t,n){if(null===n)return;const i=this.overlays.get(n.key);if(null!==i){const e=this.mi.get(i.largestBatchId).delete(n.key);this.mi.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new sc(t,n));let s=this.mi.get(t);void 0===s&&(s=ma(),this.mi.set(t,s)),this.mi.set(t,s.add(n.key))}}class _c{constructor(){this.gi=new oa(kc.yi),this.pi=new oa(kc.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,t){const n=new kc(e,t);this.gi=this.gi.add(n),this.pi=this.pi.add(n)}Ti(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ei(new kc(e,t))}Ai(e,t){e.forEach((e=>this.removeReference(e,t)))}Ri(e){const t=new Er(new or([])),n=new kc(t,e),i=new kc(t,e+1),s=[];return this.pi.forEachInRange([n,i],(e=>{this.Ei(e),s.push(e.key)})),s}bi(){this.gi.forEach((e=>this.Ei(e)))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const t=new Er(new or([])),n=new kc(t,e),i=new kc(t,e+1);let s=ma();return this.pi.forEachInRange([n,i],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new kc(e,0),n=this.gi.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class kc{constructor(e,t){this.key=e,this.Vi=t}static yi(e,t){return Er.comparator(e.key,t.key)||Qs(e.Vi,t.Vi)}static Ii(e,t){return Qs(e.Vi,t.Vi)||Er.comparator(e.key,t.key)}}class Cc{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.$s=[],this.vi=1,this.Si=new oa(kc.yi)}checkEmpty(e){return ec.resolve(0===this.$s.length)}addMutationBatch(e,t,n,i){const s=this.vi;this.vi++,this.$s.length>0&&this.$s[this.$s.length-1];const r=new nc(s,t,n,i);this.$s.push(r);for(const t of i)this.Si=this.Si.add(new kc(t.key,s)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ec.resolve(r)}lookupMutationBatch(e,t){return ec.resolve(this.Di(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Ci(n),s=i<0?0:i;return ec.resolve(this.$s.length>s?this.$s[s]:null)}getHighestUnacknowledgedBatchId(){return ec.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return ec.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new kc(t,0),i=new kc(t,Number.POSITIVE_INFINITY),s=[];return this.Si.forEachInRange([n,i],(e=>{const t=this.Di(e.Vi);s.push(t)})),ec.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new oa(Qs);return t.forEach((e=>{const t=new kc(e,0),i=new kc(e,Number.POSITIVE_INFINITY);this.Si.forEachInRange([t,i],(e=>{n=n.add(e.Vi)}))})),ec.resolve(this.xi(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;Er.isDocumentKey(s)||(s=s.child(""));const r=new kc(new Er(s),0);let o=new oa(Qs);return this.Si.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.Vi)),!0)}),r),ec.resolve(this.xi(o))}xi(e){const t=[];return e.forEach((e=>{const n=this.Di(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Us(0===this.Ni(t.batchId,"removed")),this.$s.shift();let n=this.Si;return ec.forEach(t.mutations,(i=>{const s=new kc(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Si=n}))}dn(e){}containsKey(e,t){const n=new kc(t,0),i=this.Si.firstAfterOrEqual(n);return ec.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.$s.length,ec.resolve()}Ni(e,t){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const t=this.Ci(e);return t<0||t>=this.$s.length?null:this.$s[t]}}class Ac{constructor(e){this.ki=e,this.docs=new ia(Er.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,r=this.ki(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ec.resolve(n?n.document.mutableCopy():Vr.newInvalidDocument(t))}getEntries(e,t){let n=la();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Vr.newInvalidDocument(e))})),ec.resolve(n)}getAllFromCollection(e,t,n){let i=la();const s=new Er(t.child("")),r=this.docs.getIteratorFrom(s);for(;r.hasNext();){const{key:e,value:{document:s}}=r.getNext();if(!t.isPrefixOf(e.path))break;e.path.length>t.length+1||Br(qr(s),n)<=0||(i=i.insert(s.key,s.mutableCopy()))}return ec.resolve(i)}getAllFromCollectionGroup(e,t,n,i){Ms()}Mi(e,t){return ec.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Nc(this)}getSize(e){return ec.resolve(this.size)}}class Nc extends class{constructor(){this.changes=new na((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ec.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}{constructor(e){super(),this.qn=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.qn.addEntry(e,i)):this.qn.removeEntry(n)})),ec.waitFor(t)}getFromCache(e,t){return this.qn.getEntry(e,t)}getAllFromCache(e,t){return this.qn.getEntries(e,t)}}class Rc{constructor(e){this.persistence=e,this.Oi=new na((e=>Hr(e)),Kr),this.lastRemoteSnapshotVersion=tr.min(),this.highestTargetId=0,this.Fi=0,this.$i=new _c,this.targetCount=0,this.Bi=dc.mn()}forEachTarget(e,t){return this.Oi.forEach(((e,n)=>t(n))),ec.resolve()}getLastRemoteSnapshotVersion(e){return ec.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ec.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),ec.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fi&&(this.Fi=t),ec.resolve()}In(e){this.Oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Bi=new dc(t),this.highestTargetId=t),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,t){return this.In(t),this.targetCount+=1,ec.resolve()}updateTargetData(e,t){return this.In(t),ec.resolve()}removeTargetData(e,t){return this.Oi.delete(t.target),this.$i.Ri(t.targetId),this.targetCount-=1,ec.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Oi.forEach(((r,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Oi.delete(r),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),ec.waitFor(s).next((()=>i))}getTargetCount(e){return ec.resolve(this.targetCount)}getTargetData(e,t){const n=this.Oi.get(t)||null;return ec.resolve(n)}addMatchingKeys(e,t,n){return this.$i.Ti(t,n),ec.resolve()}removeMatchingKeys(e,t,n){this.$i.Ai(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((t=>{s.push(i.markPotentiallyOrphaned(e,t))})),ec.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.$i.Ri(t),ec.resolve()}getMatchingKeysForTargetId(e,t){const n=this.$i.Pi(t);return ec.resolve(n)}containsKey(e,t){return ec.resolve(this.$i.containsKey(t))}}class Dc{constructor(e,t){this.Li={},this.overlays={},this.ts=new Xs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new Rc(this),this.indexManager=new lc,this.fs=function(e){return new Ac(e)}((e=>this.referenceDelegate.Ui(e))),this.M=new oc(t),this.ds=new Tc(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Li[e.toKey()];return n||(n=new Cc(t,this.referenceDelegate),this.Li[e.toKey()]=n),n}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,t,n){Ls("MemoryPersistence","Starting transaction:",e);const i=new Lc(this.ts.next());return this.referenceDelegate.qi(),n(i).next((e=>this.referenceDelegate.Gi(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Ki(e,t){return ec.or(Object.values(this.Li).map((n=>()=>n.containsKey(e,t))))}}class Lc extends class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}{constructor(e){super(),this.currentSequenceNumber=e}}class Oc{constructor(e){this.persistence=e,this.Qi=new _c,this.ji=null}static Wi(e){return new Oc(e)}get zi(){if(this.ji)return this.ji;throw Ms()}addReference(e,t,n){return this.Qi.addReference(n,t),this.zi.delete(n.toString()),ec.resolve()}removeReference(e,t,n){return this.Qi.removeReference(n,t),this.zi.add(n.toString()),ec.resolve()}markPotentiallyOrphaned(e,t){return this.zi.add(t.toString()),ec.resolve()}removeTarget(e,t){this.Qi.Ri(t.targetId).forEach((e=>this.zi.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.zi.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}qi(){this.ji=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ec.forEach(this.zi,(n=>{const i=Er.fromPath(n);return this.Hi(e,i).next((e=>{e||t.removeEntry(i,tr.min())}))})).next((()=>(this.ji=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hi(e,t).next((e=>{e?this.zi.delete(t.toString()):this.zi.add(t.toString())}))}Ui(e){return 0}Hi(e,t){return ec.or([()=>ec.resolve(this.Qi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ki(e,t)])}}class Pc{constructor(){this.activeTargetIds=ya()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xc{constructor(){this.Fr=new Pc,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,t,n){this.$r[e]=t}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Pc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Mc{Br(e){}shutdown(){}}class Uc{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){Ls("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){Ls("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Fc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Vc{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class qc extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.so=t+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,t,n,i,s){const r=this.oo(e,t);Ls("RestConnection","Sending: ",r,n);const o={};return this.uo(o,i,s),this.ao(e,r,o,n).then((e=>(Ls("RestConnection","Received: ",e),e)),(t=>{throw Ps("RestConnection",`${e} failed with error: `,t,"url: ",r,"request:",n),t}))}co(e,t,n,i,s){return this.ro(e,t,n,i,s)}uo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ns,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}oo(e,t){const n=Fc[e];return`${this.so}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,t,n,i){return new Promise(((s,r)=>{const o=new ks;o.listenOnce(Is.COMPLETE,(()=>{try{switch(o.getLastErrorCode()){case bs.NO_ERROR:const t=o.getResponseJson();Ls("Connection","XHR received:",JSON.stringify(t)),s(t);break;case bs.TIMEOUT:Ls("Connection",'RPC "'+e+'" timed out'),r(new qs(Vs.DEADLINE_EXCEEDED,"Request time out"));break;case bs.HTTP_ERROR:const n=o.getStatus();if(Ls("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Vs).indexOf(t)>=0?t:Vs.UNKNOWN}(e.status);r(new qs(t,e.message))}else r(new qs(Vs.UNKNOWN,"Server responded with status "+o.getStatus()))}else r(new qs(Vs.UNAVAILABLE,"Connection failed."));break;default:Ms()}}finally{Ls("Connection",'RPC "'+e+'" completed.')}}));const a=JSON.stringify(i);o.send(t,"POST",a,n,15)}))}ho(e,t,n){const i=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=vs(),r=ws(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Ss({})),this.uo(o.initMessageHeaders,t,n),p()||g()||f().indexOf("Electron/")>=0||y()||f().indexOf("MSAppHost/")>=0||m()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=i.join("");Ls("Connection","Creating WebChannel: "+a,o);const c=s.createWebChannel(a,o);let l=!1,u=!1;const h=new Vc({jr:e=>{u?Ls("Connection","Not sending because WebChannel is closed:",e):(l||(Ls("Connection","Opening WebChannel transport."),c.open(),l=!0),Ls("Connection","WebChannel sending:",e),c.send(e))},Wr:()=>c.close()}),d=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return d(c,_s.EventType.OPEN,(()=>{u||Ls("Connection","WebChannel transport opened.")})),d(c,_s.EventType.CLOSE,(()=>{u||(u=!0,Ls("Connection","WebChannel transport closed"),h.eo())})),d(c,_s.EventType.ERROR,(e=>{u||(u=!0,Ps("Connection","WebChannel transport errored:",e),h.eo(new qs(Vs.UNAVAILABLE,"The operation could not be completed")))})),d(c,_s.EventType.MESSAGE,(e=>{var t;if(!u){const n=e.data[0];Us(!!n);const i=n,s=i.error||(null===(t=i[0])||void 0===t?void 0:t.error);if(s){Ls("Connection","WebChannel received error:",s);const e=s.status;let t=function(e){const t=Zo[e];if(void 0!==t)return ta(t)}(e),n=s.message;void 0===t&&(t=Vs.INTERNAL,n="Unknown error status: "+e+" with message "+s.message),u=!0,h.eo(new qs(t,n)),c.close()}else Ls("Connection","WebChannel received:",n),h.no(n)}})),d(r,Es.STAT_EVENT,(e=>{e.stat===Ts.PROXY?Ls("Connection","Detected buffering proxy"):e.stat===Ts.NOPROXY&&Ls("Connection","Detected no buffering proxy")})),setTimeout((()=>{h.Zr()}),0),h}}function jc(){return"undefined"!=typeof document?document:null}function Bc(e){return new Na(e,!0)}class $c{constructor(e,t,n=1e3,i=1.5,s=6e4){this.Jn=e,this.timerId=t,this.lo=n,this.fo=i,this._o=s,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const t=Math.floor(this.wo+this.To()),n=Math.max(0,Date.now()-this.yo),i=Math.max(0,t-n);i>0&&Ls("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.wo} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,i,(()=>(this.yo=Date.now(),e()))),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class zc{constructor(e,t,n,i,s,r,o,a){this.Jn=e,this.Ao=n,this.Ro=i,this.bo=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new $c(e,t)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}async stop(){this.Do()&&await this.close(0)}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,(()=>this.Mo())))}Oo(e){this.Fo(),this.stream.send(e)}async Mo(){if(this.Co())return this.close(0)}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}async close(e,t){this.Fo(),this.$o(),this.So.cancel(),this.Po++,4!==e?this.So.reset():t&&t.code===Vs.RESOURCE_EXHAUSTED?(Os(t.toString()),Os("Using maximum backoff delay to prevent overloading the backend."),this.So.po()):t&&t.code===Vs.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Bo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Jr(t)}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),t=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Po===t&&this.Uo(e,n)}),(t=>{e((()=>{const e=new qs(Vs.UNKNOWN,"Fetching auth token failed: "+t.message);return this.qo(e)}))}))}Uo(e,t){const n=this.Lo(this.Po);this.stream=this.Go(e,t),this.stream.zr((()=>{n((()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,(()=>(this.Co()&&(this.state=3),Promise.resolve()))),this.listener.zr())))})),this.stream.Jr((e=>{n((()=>this.qo(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}xo(){this.state=5,this.So.Io((async()=>{this.state=0,this.start()}))}qo(e){return Ls("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return t=>{this.Jn.enqueueAndForget((()=>this.Po===e?t():(Ls("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Hc extends zc{constructor(e,t,n,i,s,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,r),this.M=s}Go(e,t){return this.bo.ho("Listen",e,t)}onMessage(e){this.So.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ms()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(e,t){return e.N?(Us(void 0===t||"string"==typeof t),ur.fromBase64String(t||"")):(Us(void 0===t||t instanceof Uint8Array),ur.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Vs.UNKNOWN:ta(e.code);return new qs(t,e.message||"")}(o);n=new Ea(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ua(e,i.document.name),r=Oa(i.document.updateTime),o=new Ur({mapValue:{fields:i.document.fields}}),a=Vr.newFoundDocument(s,r,o),c=i.targetIds||[],l=i.removedTargetIds||[];n=new ba(c,l,a.key,a)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=Ua(e,i.document),r=i.readTime?Oa(i.readTime):tr.min(),o=Vr.newNoDocument(s,r),a=i.removedTargetIds||[];n=new ba([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=Ua(e,i.document),r=i.removedTargetIds||[];n=new ba([],r,s,null)}else{if(!("filter"in t))return Ms();{t.filter;const e=t.filter;e.targetId;const i=e.count||0,s=new Qo(i),r=e.targetId;n=new Ia(r,s)}}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return tr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?tr.min():t.readTime?Oa(t.readTime):tr.min()}(e);return this.listener.Ko(t,n)}Qo(e){const t={};t.database=Va(this.M),t.addTarget=function(e,t){let n;const i=t.target;return n=Gr(i)?{documents:Ba(e,i)}:{query:$a(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Da(e,t.resumeToken):t.snapshotVersion.compareTo(tr.min())>0&&(n.readTime=Ra(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ms()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Oo(t)}jo(e){const t={};t.database=Va(this.M),t.removeTarget=e,this.Oo(t)}}class Kc extends zc{constructor(e,t,n,i,s,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,r),this.M=s,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,t){return this.bo.ho("Write",e,t)}onMessage(e){if(Us(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const t=function(e,t){return e&&e.length>0?(Us(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Oa(e.updateTime):Oa(t);return n.isEqual(tr.min())&&(n=Oa(t)),new Mo(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Oa(e.commitTime);return this.listener.Jo(n,t)}return Us(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Va(this.M),this.Oo(e)}Ho(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>function(e,t){let n;if(t instanceof Ho)n={update:ja(e,t.key,t.value)};else if(t instanceof Yo)n={delete:Ma(e,t.key)};else if(t instanceof Ko)n={update:ja(e,t.key,t.data),updateMask:Qa(t.fieldMask)};else{if(!(t instanceof Jo))return Ms();n={verify:Ma(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ao)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof No)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Do)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Oo)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ms()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:La(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ms()}(e,t.precondition)),n}(this.M,e)))};this.Oo(t)}}class Gc extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=n,this.M=i,this.Zo=!1}tu(){if(this.Zo)throw new qs(Vs.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.bo.ro(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qs(Vs.UNKNOWN,e.toString())}))}co(e,t,n){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.bo.co(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===Vs.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qs(Vs.UNKNOWN,e.toString())}))}terminate(){this.Zo=!0}}class Wc{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve()))))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Os(t),this.su=!1):Ls("OnlineStateTracker",t)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Xc{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=s,this.du.Br((e=>{n.enqueueAndForget((async()=>{sl(this)&&(Ls("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Fs(e);t.lu.add(4),await Jc(t),t._u.set("Unknown"),t.lu.delete(4),await Yc(t)}(this))}))})),this._u=new Wc(n,i)}}async function Yc(e){if(sl(e))for(const t of e.fu)await t(!0)}async function Jc(e){for(const t of e.fu)await t(!1)}function Qc(e,t){const n=Fs(e);n.hu.has(t.targetId)||(n.hu.set(t.targetId,t),il(n)?nl(n):Il(n).Co()&&el(n,t))}function Zc(e,t){const n=Fs(e),i=Il(n);n.hu.delete(t),i.Co()&&tl(n,t),0===n.hu.size&&(i.Co()?i.ko():sl(n)&&n._u.set("Unknown"))}function el(e,t){e.wu.Z(t.targetId),Il(e).Qo(t)}function tl(e,t){e.wu.Z(t),Il(e).jo(t)}function nl(e){e.wu=new Sa({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.hu.get(t)||null}),Il(e).start(),e._u.iu()}function il(e){return sl(e)&&!Il(e).Do()&&e.hu.size>0}function sl(e){return 0===Fs(e).lu.size}function rl(e){e.wu=void 0}async function ol(e){e.hu.forEach(((t,n)=>{el(e,t)}))}async function al(e,t){rl(e),il(e)?(e._u.uu(t),nl(e)):e._u.set("Unknown")}async function cl(e,t,n){if(e._u.set("Online"),t instanceof Ea&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.hu.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.hu.delete(i),e.wu.removeTarget(i))}(e,t)}catch(n){Ls("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ll(e,n)}else if(t instanceof ba?e.wu.ut(t):t instanceof Ia?e.wu._t(t):e.wu.ht(t),!n.isEqual(tr.min()))try{const t=await wc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.wu.yt(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.hu.get(i);s&&e.hu.set(i,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((t=>{const n=e.hu.get(t);if(!n)return;e.hu.set(t,n.withResumeToken(ur.EMPTY_BYTE_STRING,n.snapshotVersion)),tl(e,t);const i=new rc(n.target,t,1,n.sequenceNumber);el(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ls("RemoteStore","Failed to raise snapshot:",t),await ll(e,t)}}async function ll(e,t,n){if(!tc(t))throw t;e.lu.add(1),await Jc(e),e._u.set("Offline"),n||(n=()=>wc(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ls("RemoteStore","Retrying IndexedDB access"),await n(),e.lu.delete(1),await Yc(e)}))}function ul(e,t){return t().catch((n=>ll(e,n,t)))}async function hl(e){const t=Fs(e),n=El(t);let i=t.cu.length>0?t.cu[t.cu.length-1].batchId:-1;for(;dl(t);)try{const e=await bc(t.localStore,i);if(null===e){0===t.cu.length&&n.ko();break}i=e.batchId,fl(t,e)}catch(e){await ll(t,e)}pl(t)&&ml(t)}function dl(e){return sl(e)&&e.cu.length<10}function fl(e,t){e.cu.push(t);const n=El(e);n.Co()&&n.zo&&n.Ho(t.mutations)}function pl(e){return sl(e)&&!El(e).Do()&&e.cu.length>0}function ml(e){El(e).start()}async function gl(e){El(e).Xo()}async function yl(e){const t=El(e);for(const n of e.cu)t.Ho(n.mutations)}async function vl(e,t,n){const i=e.cu.shift(),s=ic.from(i,t,n);await ul(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await hl(e)}async function wl(e,t){t&&El(e).zo&&await async function(e,t){if(function(e){switch(e){default:return Ms();case Vs.CANCELLED:case Vs.UNKNOWN:case Vs.DEADLINE_EXCEEDED:case Vs.RESOURCE_EXHAUSTED:case Vs.INTERNAL:case Vs.UNAVAILABLE:case Vs.UNAUTHENTICATED:return!1;case Vs.INVALID_ARGUMENT:case Vs.NOT_FOUND:case Vs.ALREADY_EXISTS:case Vs.PERMISSION_DENIED:case Vs.FAILED_PRECONDITION:case Vs.ABORTED:case Vs.OUT_OF_RANGE:case Vs.UNIMPLEMENTED:case Vs.DATA_LOSS:return!0}}(n=t.code)&&n!==Vs.ABORTED){const n=e.cu.shift();El(e).No(),await ul(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await hl(e)}var n}(e,t),pl(e)&&ml(e)}async function bl(e,t){const n=Fs(e);n.asyncQueue.verifyOperationInProgress(),Ls("RemoteStore","RemoteStore received new credentials");const i=sl(n);n.lu.add(3),await Jc(n),i&&n._u.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.lu.delete(3),await Yc(n)}function Il(e){return e.mu||(e.mu=function(e,t,n){const i=Fs(e);return i.tu(),new Hc(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(e.datastore,e.asyncQueue,{zr:ol.bind(null,e),Jr:al.bind(null,e),Ko:cl.bind(null,e)}),e.fu.push((async t=>{t?(e.mu.No(),il(e)?nl(e):e._u.set("Unknown")):(await e.mu.stop(),rl(e))}))),e.mu}function El(e){return e.gu||(e.gu=function(e,t,n){const i=Fs(e);return i.tu(),new Kc(t,i.bo,i.authCredentials,i.appCheckCredentials,i.M,n)}(e.datastore,e.asyncQueue,{zr:gl.bind(null,e),Jr:wl.bind(null,e),Yo:yl.bind(null,e),Jo:vl.bind(null,e)}),e.fu.push((async t=>{t?(e.gu.No(),await hl(e)):(await e.gu.stop(),e.cu.length>0&&(Ls("RemoteStore",`Stopping write stream with ${e.cu.length} pending writes`),e.cu=[]))}))),e.gu}class Tl{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new js,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,s){const r=Date.now()+n,o=new Tl(e,t,r,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qs(Vs.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sl(e,t){if(Os("AsyncQueue",`${t}: ${e}`),tc(e))return new qs(Vs.UNAVAILABLE,`${t}: ${e}`);throw e}class _l{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Er.comparator(t.key,n.key):(e,t)=>Er.comparator(e.key,t.key),this.keyedMap=ha(),this.sortedSet=new ia(this.comparator)}static emptySet(e){return new _l(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof _l))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new _l;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class kl{constructor(){this.yu=new ia(Er.comparator)}track(e){const t=e.doc.key,n=this.yu.get(t);n?0!==e.type&&3===n.type?this.yu=this.yu.insert(t,e):3===e.type&&1!==n.type?this.yu=this.yu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.yu=this.yu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.yu=this.yu.remove(t):1===e.type&&2===n.type?this.yu=this.yu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.yu=this.yu.insert(t,{type:2,doc:e.doc}):Ms():this.yu=this.yu.insert(t,e)}pu(){const e=[];return this.yu.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Cl{constructor(e,t,n,i,s,r,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new Cl(e,t,_l.emptySet(t),s,n,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}class Al{constructor(){this.Iu=void 0,this.listeners=[]}}class Nl{constructor(){this.queries=new na((e=>go(e)),mo),this.onlineState="Unknown",this.Tu=new Set}}function Rl(e,t){const n=Fs(e);let i=!1;for(const e of t){const t=e.query,s=n.queries.get(t);if(s){for(const t of s.listeners)t.Au(e)&&(i=!0);s.Iu=e}}i&&Ll(n)}function Dl(e,t,n){const i=Fs(e),s=i.queries.get(t);if(s)for(const e of s.listeners)e.onError(n);i.queries.delete(t)}function Ll(e){e.Tu.forEach((e=>{e.next()}))}class Ol{constructor(e,t,n){this.query=e,this.Ru=t,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=n||{}}Au(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Cl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),t=!0):this.vu(e,this.onlineState)&&(this.Su(e),t=!0),this.Pu=e,t}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let t=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),t=!0),t}vu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return!(this.options.Du&&n||e.docs.isEmpty()&&"Offline"!==t)}Vu(e){if(e.docChanges.length>0)return!0;const t=this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Su(e){e=Cl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class Pl{constructor(e){this.key=e}}class xl{constructor(e){this.key=e}}class Ml{constructor(e,t){this.query=e,this.Fu=t,this.$u=null,this.current=!1,this.Bu=ma(),this.mutatedKeys=ma(),this.Lu=wo(e),this.Uu=new _l(this.Lu)}get qu(){return this.Fu}Gu(e,t){const n=t?t.Ku:new kl,i=t?t.Uu:this.Uu;let s=t?t.mutatedKeys:this.mutatedKeys,r=i,o=!1;const a=uo(this.query)&&i.size===this.query.limit?i.last():null,c=ho(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const l=i.get(e),u=vo(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.Qu(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.Lu(u,a)>0||c&&this.Lu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(r=r.add(u),s=d?s.add(e):s.delete(e)):(r=r.delete(e),s=s.delete(e)))})),uo(this.query)||ho(this.query))for(;r.size>this.query.limit;){const e=uo(this.query)?r.last():r.first();r=r.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{Uu:r,Ku:n,ei:o,mutatedKeys:s}}Qu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const s=e.Ku.pu();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ms()}};return n(e)-n(t)}(e.type,t.type)||this.Lu(e.doc,t.doc))),this.ju(n);const r=t?this.Wu():[],o=0===this.Bu.size&&this.current?1:0,a=o!==this.$u;return this.$u=o,0!==s.length||a?{snapshot:new Cl(this.query,e.Uu,i,s,e.mutatedKeys,0===o,a,!1),zu:r}:{zu:r}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new kl,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach((e=>this.Fu=this.Fu.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Fu=this.Fu.delete(e))),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=ma(),this.Uu.forEach((e=>{this.Hu(e.key)&&(this.Bu=this.Bu.add(e.key))}));const t=[];return e.forEach((e=>{this.Bu.has(e)||t.push(new xl(e))})),this.Bu.forEach((n=>{e.has(n)||t.push(new Pl(n))})),t}Ju(e){this.Fu=e.hi,this.Bu=ma();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Yu(){return Cl.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class Ul{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Fl{constructor(e){this.key=e,this.Xu=!1}}class Vl{constructor(e,t,n,i,s,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Zu={},this.ta=new na((e=>go(e)),mo),this.ea=new Map,this.na=new Set,this.sa=new ia(Er.comparator),this.ia=new Map,this.ra=new _c,this.oa={},this.ua=new Map,this.aa=dc.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}async function ql(e,t){const n=function(e){const t=Fs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Bl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=nu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=zl.bind(null,t),t.Zu.Ko=Rl.bind(null,t.eventManager),t.Zu.la=Dl.bind(null,t.eventManager),t}(e);let i,s;const r=n.ta.get(t);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.Yu();else{const e=await function(e,t){const n=Fs(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.ls.getTargetData(e,t).next((s=>s?(i=s,ec.resolve(i)):n.ls.allocateTargetId(e).next((s=>(i=new rc(t,s,0,e.currentSequenceNumber),n.ls.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.si.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.si=n.si.insert(e.targetId,e),n.ii.set(t,e.targetId)),e}))}(n.localStore,po(t));n.isPrimaryClient&&Qc(n.remoteStore,e);const r=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,s=await async function(e,t,n,i){e.ha=(t,n,i)=>async function(e,t,n,i){let s=t.view.Gu(n);s.ei&&(s=await Ec(e.localStore,t.query,!1).then((({documents:e})=>t.view.Gu(e,s))));const r=i&&i.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,r);return Jl(e,t.targetId,o.zu),o.snapshot}(e,t,n,i);const s=await Ec(e.localStore,t,!0),r=new Ml(t,s.hi),o=r.Gu(s.documents),a=wa.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState),c=r.applyChanges(o,e.isPrimaryClient,a);Jl(e,n,c.zu);const l=new Ul(t,n,r);return e.ta.set(t,l),e.ea.has(n)?e.ea.get(n).push(t):e.ea.set(n,[t]),c.snapshot}(n,t,i,"current"===r)}return s}async function jl(e,t){const n=Fs(e),i=n.ta.get(t),s=n.ea.get(i.targetId);if(s.length>1)return n.ea.set(i.targetId,s.filter((e=>!mo(e,t)))),void n.ta.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Ic(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),Zc(n.remoteStore,i.targetId),Xl(n,i.targetId)})).catch(fc)):(Xl(n,i.targetId),await Ic(n.localStore,i.targetId,!0))}async function Bl(e,t){const n=Fs(e);try{const e=await function(e,t){const n=Fs(e),i=t.snapshotVersion;let s=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.oi.newChangeBuffer({trackRemovals:!0});s=n.si;const o=[];t.targetChanges.forEach(((r,a)=>{const c=s.get(a);if(!c)return;o.push(n.ls.removeMatchingKeys(e,r.removedDocuments,a).next((()=>n.ls.addMatchingKeys(e,r.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(a)?l=l.withResumeToken(ur.EMPTY_BYTE_STRING,tr.min()).withLastLimboFreeSnapshotVersion(tr.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(c,l,r)&&o.push(n.ls.updateTargetData(e,l))}));let a=la();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(function(e,t,n){let i=ma();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=la();return n.forEach(((n,s)=>{const r=e.get(n);s.isNoDocument()&&s.version.isEqual(tr.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!r.isValidDocument()||s.version.compareTo(r.version)>0||0===s.version.compareTo(r.version)&&r.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):Ls("LocalStore","Ignoring outdated watch update for ",n,". Current version:",r.version," Watch version:",s.version)})),i}))}(e,r,t.documentUpdates).next((e=>{a=e}))),!i.isEqual(tr.min())){const t=n.ls.getLastRemoteSnapshotVersion(e).next((t=>n.ls.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return ec.waitFor(o).next((()=>r.apply(e))).next((()=>n.ai.Gs(e,a))).next((()=>a))})).then((e=>(n.si=s,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.ia.get(t);i&&(Us(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.Xu=!0:e.modifiedDocuments.size>0?Us(i.Xu):e.removedDocuments.size>0&&(Us(i.Xu),i.Xu=!1))})),await eu(n,e,t)}catch(e){await fc(e)}}function $l(e,t,n){const i=Fs(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.ta.forEach(((n,i)=>{const s=i.view.Eu(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=Fs(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const e of n.listeners)e.Eu(t)&&(i=!0)})),i&&Ll(n)}(i.eventManager,t),e.length&&i.Zu.Ko(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function zl(e,t,n){const i=Fs(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.ia.get(t),r=s&&s.key;if(r){let e=new ia(Er.comparator);e=e.insert(r,Vr.newNoDocument(r,tr.min()));const n=ma().add(r),s=new va(tr.min(),new Map,new oa(Qs),e,n);await Bl(i,s),i.sa=i.sa.remove(r),i.ia.delete(t),Zl(i)}else await Ic(i.localStore,t,!1).then((()=>Xl(i,t,n))).catch(fc)}async function Hl(e,t){const n=Fs(e),i=t.batch.batchId;try{const e=await function(e,t){const n=Fs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),s=n.oi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const s=n.batch,r=s.keys();let o=ec.resolve();return r.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);Us(null!==r),t.version.compareTo(r)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.$s.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.$s.performConsistencyCheck(e))).next((()=>n.ai.qs(e,i)))}))}(n.localStore,t);Wl(n,i,null),Gl(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await eu(n,e)}catch(e){await fc(e)}}async function Kl(e,t,n){const i=Fs(e);try{const e=await function(e,t){const n=Fs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.$s.lookupMutationBatch(e,t).next((t=>(Us(null!==t),i=t.keys(),n.$s.removeMutationBatch(e,t)))).next((()=>n.$s.performConsistencyCheck(e))).next((()=>n.ai.qs(e,i)))}))}(i.localStore,t);Wl(i,t,n),Gl(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await eu(i,e)}catch(n){await fc(n)}}function Gl(e,t){(e.ua.get(t)||[]).forEach((e=>{e.resolve()})),e.ua.delete(t)}function Wl(e,t,n){const i=Fs(e);let s=i.oa[i.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),i.oa[i.currentUser.toKey()]=s}}function Xl(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.ea.get(t))e.ta.delete(i),n&&e.Zu.la(i,n);e.ea.delete(t),e.isPrimaryClient&&e.ra.Ri(t).forEach((t=>{e.ra.containsKey(t)||Yl(e,t)}))}function Yl(e,t){e.na.delete(t.path.canonicalString());const n=e.sa.get(t);null!==n&&(Zc(e.remoteStore,n),e.sa=e.sa.remove(t),e.ia.delete(n),Zl(e))}function Jl(e,t,n){for(const i of n)i instanceof Pl?(e.ra.addReference(i.key,t),Ql(e,i)):i instanceof xl?(Ls("SyncEngine","Document no longer in limbo: "+i.key),e.ra.removeReference(i.key,t),e.ra.containsKey(i.key)||Yl(e,i.key)):Ms()}function Ql(e,t){const n=t.key,i=n.path.canonicalString();e.sa.get(n)||e.na.has(i)||(Ls("SyncEngine","New document in limbo: "+n),e.na.add(i),Zl(e))}function Zl(e){for(;e.na.size>0&&e.sa.size<e.maxConcurrentLimboResolutions;){const t=e.na.values().next().value;e.na.delete(t);const n=new Er(or.fromString(t)),i=e.aa.next();e.ia.set(i,new Fl(n)),e.sa=e.sa.insert(n,i),Qc(e.remoteStore,new rc(po(lo(n.path)),i,2,Xs.A))}}async function eu(e,t,n){const i=Fs(e),s=[],r=[],o=[];i.ta.isEmpty()||(i.ta.forEach(((e,a)=>{o.push(i.ha(a,t,n).then((e=>{if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),s.push(e);const t=mc.Js(a.targetId,e);r.push(t)}})))})),await Promise.all(o),i.Zu.Ko(s),await async function(e,t){const n=Fs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>ec.forEach(t,(t=>ec.forEach(t.zs,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>ec.forEach(t.Hs,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!tc(e))throw e;Ls("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.si.get(t),i=e.snapshotVersion,s=e.withLastLimboFreeSnapshotVersion(i);n.si=n.si.insert(t,s)}}}(i.localStore,r))}async function tu(e,t){const n=Fs(e);if(!n.currentUser.isEqual(t)){Ls("SyncEngine","User change. New user:",t.toKey());const e=await vc(n.localStore,t);n.currentUser=t,function(e,t){e.ua.forEach((e=>{e.forEach((e=>{e.reject(new qs(Vs.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.ua.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await eu(n,e.ci)}}function nu(e,t){const n=Fs(e),i=n.ia.get(t);if(i&&i.Xu)return ma().add(i.key);{let e=ma();const i=n.ea.get(t);if(!i)return e;for(const t of i){const i=n.ta.get(t);e=e.unionWith(i.view.qu)}return e}}function iu(e){const t=Fs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Hl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Kl.bind(null,t),t}class su{constructor(){this.synchronizeTabs=!1}async initialize(e){this.M=Bc(e.databaseInfo.databaseId),this.sharedClientState=this.da(e),this.persistence=this._a(e),await this.persistence.start(),this.gcScheduler=this.wa(e),this.localStore=this.ma(e)}wa(e){return null}ma(e){return function(e,t,n,i){return new yc(e,t,n,i)}(this.persistence,new gc,e.initialUser,this.M)}_a(e){return new Dc(Oc.Wi,this.M)}da(e){return new xc}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class ru{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>$l(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=tu.bind(null,this.syncEngine),await async function(e,t){const n=Fs(e);t?(n.lu.delete(2),await Yc(n)):t||(n.lu.add(2),await Jc(n),n._u.set("Unknown"))}(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Nl}createDatastore(e){const t=Bc(e.databaseInfo.databaseId),n=(i=e.databaseInfo,new qc(i));var i;return function(e,t,n,i){return new Gc(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,i=e.asyncQueue,s=e=>$l(this.syncEngine,e,0),r=Uc.vt()?new Uc:new Mc,new Xc(t,n,i,s,r);var t,n,i,s,r}createSyncEngine(e,t){return function(e,t,n,i,s,r,o){const a=new Vl(e,t,n,i,s,r);return o&&(a.ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Fs(e);Ls("RemoteStore","RemoteStore shutting down."),t.lu.add(5),await Jc(t),t.du.shutdown(),t._u.set("Unknown")}(this.remoteStore)}}class ou{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class au{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=As.UNAUTHENTICATED,this.clientId=Js.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ls("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ls("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qs(Vs.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new js;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Sl(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function cu(e,t){e.asyncQueue.verifyOperationInProgress();const n=await async function(e){return e.offlineComponents||(Ls("FirestoreClient","Using default OfflineComponentProvider"),await async function(e,t){e.asyncQueue.verifyOperationInProgress(),Ls("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await vc(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e.offlineComponents=t}(e,new su)),e.offlineComponents}(e);Ls("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>bl(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>bl(t.remoteStore,n))),e.onlineComponents=t}async function lu(e){return e.onlineComponents||(Ls("FirestoreClient","Using default OnlineComponentProvider"),await cu(e,new ru)),e.onlineComponents}async function uu(e){const t=await lu(e),n=t.eventManager;return n.onListen=ql.bind(null,t.syncEngine),n.onUnlisten=jl.bind(null,t.syncEngine),n}function hu(e,t,n={}){const i=new js;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,s){const r=new ou({next:r=>{t.enqueueAndForget((()=>async function(e,t){const n=Fs(e),i=t.query;let s=!1;const r=n.queries.get(i);if(r){const e=r.listeners.indexOf(t);e>=0&&(r.listeners.splice(e,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}(e,o)));const a=r.docs.has(n);!a&&r.fromCache?s.reject(new qs(Vs.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&i&&"server"===i.source?s.reject(new qs(Vs.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(r)},error:e=>s.reject(e)}),o=new Ol(lo(n.path),r,{includeMetadataChanges:!0,Du:!0});return async function(e,t){const n=Fs(e),i=t.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new Al),s)try{r.Iu=await n.onListen(i)}catch(e){const n=Sl(e,`Initialization of query '${yo(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,r),r.listeners.push(t),t.Eu(n.onlineState),r.Iu&&t.Au(r.Iu)&&Ll(n)}(e,o)}(await uu(e),e.asyncQueue,t,n,i))),i.promise}const du=new Map;function fu(e,t,n){if(!n)throw new qs(Vs.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function pu(e){if(!Er.isDocumentKey(e))throw new qs(Vs.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function mu(e){if(Er.isDocumentKey(e))throw new qs(Vs.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function gu(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Ms()}function yu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qs(Vs.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gu(e);throw new qs(Vs.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class vu{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new qs(Vs.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qs(Vs.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,function(e,t,n,i){if(!0===t&&!0===i)throw new qs(Vs.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,e.experimentalForceLongPolling,0,e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wu{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vu({}),this._settingsFrozen=!1,e instanceof wr?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new qs(Vs.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wr(e.options.projectId)}(e))}get app(){if(!this._app)throw new qs(Vs.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qs(Vs.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new $s;switch(e.type){case"gapi":const t=e.client;return Us(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Ks(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new qs(Vs.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=du.get(e);t&&(Ls("ComponentProvider","Removing Datastore"),du.delete(e),t.terminate())}(this),Promise.resolve()}}class bu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bu(this.firestore,e,this._key)}}class Iu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Iu(this.firestore,e,this._query)}}class Eu extends Iu{constructor(e,t,n){super(e,t,lo(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bu(this.firestore,null,new Er(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function Tu(e,t,...n){if(e=A(e),1===arguments.length&&(t=Js.R()),fu("doc","path",t),e instanceof wu){const i=or.fromString(t,...n);return pu(i),new bu(e,null,new Er(i))}{if(!(e instanceof bu||e instanceof Eu))throw new qs(Vs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(or.fromString(t,...n));return pu(i),new bu(e.firestore,e instanceof Eu?e.converter:null,new Er(i))}}class Su{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new $c(this,"async_queue_retry"),this.Ua=()=>{const e=jc();e&&Ls("AsyncQueue","Visibility state changed to "+e.visibilityState),this.So.Eo()};const e=jc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const t=jc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise((()=>{}));const t=new js;return this.Ga((()=>this.Ma&&this.Ba?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ka.push(e),this.Ka())))}async Ka(){if(0!==this.ka.length){try{await this.ka[0](),this.ka.shift(),this.So.reset()}catch(e){if(!tc(e))throw e;Ls("AsyncQueue","Operation failed with retryable error: "+e)}this.ka.length>0&&this.So.Io((()=>this.Ka()))}}Ga(e){const t=this.Na.then((()=>(this.$a=!0,e().catch((e=>{this.Fa=e,this.$a=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Os("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.$a=!1,e))))));return this.Na=t,t}enqueueAfterDelay(e,t,n){this.qa(),this.La.indexOf(e)>-1&&(t=0);const i=Tl.createAndSchedule(this,e,t,n,(e=>this.Qa(e)));return this.Oa.push(i),i}qa(){this.Fa&&Ms()}verifyOperationInProgress(){}async ja(){let e;do{e=this.Na,await e}while(e!==this.Na)}Wa(e){for(const t of this.Oa)if(t.timerId===e)return!0;return!1}za(e){return this.ja().then((()=>{this.Oa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Oa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ja()}))}Ha(e){this.La.push(e)}Qa(e){const t=this.Oa.indexOf(e);this.Oa.splice(t,1)}}class _u extends wu{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new Su,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Cu(this),this._firestoreClient.terminate()}}function ku(e){return e._firestoreClient||Cu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Cu(e){var t;const n=e._freezeSettings(),i=function(e,t,n,i){return new vr(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new au(e._authCredentials,e._appCheckCredentials,e._queue,i)}class Au{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new qs(Vs.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nu(ur.fromBase64String(e))}catch(e){throw new qs(Vs.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Nu(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ru{constructor(e){this._methodName=e}}class Du{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qs(Vs.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qs(Vs.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Qs(this._lat,e._lat)||Qs(this._long,e._long)}}const Lu=/^__.*__$/;class Ou{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ho(e,this.data,t,this.fieldTransforms)}}class Pu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ko(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ms()}}class Mu{constructor(e,t,n,i,s,r){this.settings=e,this.databaseId=t,this.M=n,this.ignoreUndefinedProperties=i,void 0===s&&this.Ja(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Mu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:n,tc:!1});return i.ec(e),i}nc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Xa({path:n,tc:!1});return i.Ja(),i}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Wu(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(xu(this.Ya)&&Lu.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Uu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=n||Bc(e)}uc(e,t,n,i=!1){return new Mu({Ya:e,methodName:t,oc:n,path:cr.emptyPath(),tc:!1,rc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Fu(e){const t=e._freezeSettings(),n=Bc(e._databaseId);return new Uu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Vu(e,t,n,i,s,r={}){const o=e.uc(r.merge||r.mergeFields?2:0,t,n,s);zu("Data must be an object, but it was:",o,i);const a=Bu(i,o);let c,l;if(r.merge)c=new lr(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const e=[];for(const i of r.mergeFields){const s=Hu(t,i,n);if(!o.contains(s))throw new qs(Vs.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Xu(e,s)||e.push(s)}c=new lr(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new Ou(new Ur(a),c,l)}class qu extends Ru{_toFieldTransform(e){if(2!==e.Ya)throw 1===e.Ya?e.ic(`${this._methodName}() can only appear at the top level of your update data`):e.ic(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof qu}}function ju(e,t){if($u(e=A(e)))return zu("Unsupported field value:",t,e),Bu(e,t);if(e instanceof Ru)return function(e,t){if(!xu(t.Ya))throw t.ic(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.ic(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.tc&&4!==t.Ya)throw t.ic("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const s of e){let e=ju(s,t.sc(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=A(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return To(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=er.fromDate(e);return{timestampValue:Ra(t.M,n)}}if(e instanceof er){const n=new er(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ra(t.M,n)}}if(e instanceof Du)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Nu)return{bytesValue:Da(t.M,e._byteString)};if(e instanceof bu){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.ic(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Pa(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ic(`Unsupported field value: ${gu(e)}`)}(e,t)}function Bu(e,t){const n={};return sr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ir(e,((e,i)=>{const s=ju(i,t.Za(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function $u(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof er||e instanceof Du||e instanceof Nu||e instanceof bu||e instanceof Ru)}function zu(e,t,n){if(!$u(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=gu(n);throw"an object"===i?t.ic(e+" a custom object"):t.ic(e+" "+i)}}function Hu(e,t,n){if((t=A(t))instanceof Au)return t._internalPath;if("string"==typeof t)return Gu(e,t);throw Wu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Ku=new RegExp("[~\\*/\\[\\]]");function Gu(e,t,n){if(t.search(Ku)>=0)throw Wu(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Au(...t.split("."))._internalPath}catch(i){throw Wu(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Wu(e,t,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new qs(Vs.INVALID_ARGUMENT,a+e+c)}function Xu(e,t){return e.some((e=>e.isEqual(t)))}class Yu{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new bu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ju(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ju extends Yu{data(){return super.data()}}function Qu(e,t){return"string"==typeof t?Gu(e,t):t instanceof Au?t._internalPath:t._delegate._internalPath}class Zu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eh extends Yu{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Qu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class th extends eh{data(e={}){return super.data(e)}}function nh(e){e=yu(e,bu);const t=yu(e.firestore,_u);return hu(ku(t),e._key).then((n=>function(e,t,n){const i=n.docs.get(t._key),s=new ih(e);return new eh(e,s,t._key,i,new Zu(n.hasPendingWrites,n.fromCache),t.converter)}(t,e,n)))}class ih extends class{convertValue(e,t="none"){switch(Tr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(pr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ms()}}convertObject(e,t){const n={};return ir(e.fields,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Du(fr(e.latitude),fr(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=gr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(yr(e));default:return null}}convertTimestamp(e){const t=dr(e);return new er(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=or.fromString(e);Us(Za(n));const i=new wr(n.get(1),n.get(3)),s=new Er(n.popFirst(5));return i.isEqual(t)||Os(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new bu(this.firestore,null,t)}}function sh(e,t,n){e=yu(e,bu);const i=yu(e.firestore,_u),s=function(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}(e.converter,t,n);return rh(i,[Vu(Fu(i),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Uo.none())])}function rh(e,t){return function(e,t){const n=new js;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=iu(e);try{const e=await function(e,t){const n=Fs(e),i=er.now(),s=t.reduce(((e,t)=>e.add(t.key)),ma());let r;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>n.ai.qs(e,s).next((s=>{r=s;const o=[];for(const e of t){const t=Bo(e,r.get(e.key));null!=t&&o.push(new Ko(e.key,t,Fr(t.value.mapValue),Uo.exists(!0)))}return n.$s.addMutationBatch(e,i,o,t)})))).then((e=>(e.applyToLocalDocumentSet(r),{batchId:e.batchId,changes:r})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.oa[e.currentUser.toKey()];i||(i=new ia(Qs)),i=i.insert(t,n),e.oa[e.currentUser.toKey()]=i}(i,e.batchId,n),await eu(i,e.changes),await hl(i.remoteStore)}catch(e){const t=Sl(e,"Failed to persist write");n.reject(t)}}(await function(e){return lu(e).then((e=>e.syncEngine))}(e),t,n))),n.promise}(ku(e),t)}function oh(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}!function(e,t=!0){Ns="9.6.10",ee(new P("firestore",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=new _u(i,new zs(e.getProvider("auth-internal")),new Ws(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),s._setSettings(n),s}),"PUBLIC")),oe(Cs,"3.4.7",e),oe(Cs,"3.4.7","esm2017")}(),Object.create,Object.create;const ah=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ch=new w("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),lh=new H("@firebase/auth");function uh(e,...t){lh.logLevel<=V.ERROR&&lh.error(`Auth (9.6.10): ${e}`,...t)}function hh(e,...t){throw fh(e,...t)}function dh(e,...t){return fh(e,...t)}function fh(e,...t){if("string"!=typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return ch.create(e,...t)}function ph(e,t,...n){if(!e)throw fh(t,...n)}function mh(e){const t="INTERNAL ASSERTION FAILED: "+e;throw uh(t),new Error(t)}function gh(e,t){e||mh(t)}const yh=new Map;function vh(e){gh(e instanceof Function,"Expected a class definition");let t=yh.get(e);return t?(gh(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,yh.set(e,t),t)}function wh(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function bh(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ih{constructor(e,t){this.shortDelay=e,this.longDelay=t,gh(t>e,"Short delay should be less than long delay!"),this.isMobile=p()||g()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===bh()||"https:"===bh()||m()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Eh(e,t){gh(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Th{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void mh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void mh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void mh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Sh={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},_h=new Ih(3e4,6e4);function kh(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ch(e,t,n,i,s={}){return Ah(e,s,(async()=>{let s={},r={};i&&("GET"===t?r=i:s={body:JSON.stringify(i)});const o=T(Object.assign({key:e.config.apiKey},r)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Th.fetch()(Rh(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},s))}))}async function Ah(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Sh),t);try{const t=new Dh(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const r=await s.json();if("needConfirmation"in r)throw Lh(e,"account-exists-with-different-credential",r);if(s.ok&&!("errorMessage"in r))return r;{const t=s.ok?r.errorMessage:r.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Lh(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw Lh(e,"email-already-in-use",r);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw function(e,t,n){const i=Object.assign(Object.assign({},ah()),{[t]:n});return new w("auth","Firebase",i).create(t,{appName:e.name})}(e,a,o);hh(e,a)}}catch(t){if(t instanceof v)throw t;hh(e,"network-request-failed")}}async function Nh(e,t,n,i,s={}){const r=await Ch(e,t,n,i,s);return"mfaPendingCredential"in r&&hh(e,"multi-factor-auth-required",{_serverResponse:r}),r}function Rh(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?Eh(e.config,s):`${e.config.apiScheme}://${s}`}class Dh{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(dh(this.auth,"network-request-failed"))),_h.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Lh(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=dh(e,t,i);return s.customData._tokenResponse=n,s}function Oh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}function Ph(e){return 1e3*Number(e)}function xh(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return uh("JWT malformed, contained fewer than 3 sections"),null;try{const e=function(e){try{return u.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}(n);return e?JSON.parse(e):(uh("Failed to decode base64 JWT payload"),null)}catch(e){return uh("Caught error parsing JWT payload as JSON",e),null}}async function Mh(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof v&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class Uh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class Fh{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oh(this.lastLoginAt),this.creationTime=Oh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vh(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Mh(e,async function(e,t){return Ch(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:i}));ph(null==s?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const o=(null===(t=r.providerUserInfo)||void 0===t?void 0:t.length)?r.providerUserInfo.map((e=>{var{providerId:t}=e,n=oh(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],a=(c=e.providerData,l=o,[...c.filter((e=>!l.some((t=>t.providerId===e.providerId)))),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&r.passwordHash||(null==a?void 0:a.length)),d=!!u&&h,f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Fh(r.createdAt,r.lastLoginAt),isAnonymous:d};Object.assign(e,f)}class qh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ph(e.idToken,"internal-error"),ph(void 0!==e.idToken,"internal-error"),ph(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=xh(e);return ph(t,"internal-error"),ph(void 0!==t.exp,"internal-error"),ph(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return ph(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await Ah(e,{},(async()=>{const n=T({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,r=Rh(e,i,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Th.fetch()(r,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,r=new qh;return n&&(ph("string"==typeof n,"internal-error",{appName:e}),r.refreshToken=n),i&&(ph("string"==typeof i,"internal-error",{appName:e}),r.accessToken=i),s&&(ph("number"==typeof s,"internal-error",{appName:e}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qh,this.toJSON())}_performRefresh(){return mh("not implemented")}}function jh(e,t){ph("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Bh{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=oh(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Fh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Mh(this,this.stsTokenManager.getToken(this.auth,e));return ph(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=A(e),i=await n.getIdToken(t),s=xh(i);ph(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const r="object"==typeof s.firebase?s.firebase:void 0,o=null==r?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Oh(Ph(s.auth_time)),issuedAtTime:Oh(Ph(s.iat)),expirationTime:Oh(Ph(s.exp)),signInProvider:o||null,signInSecondFactor:(null==r?void 0:r.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=A(e);await Vh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ph(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new Bh(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){ph(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Vh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Mh(this,async function(e,t){return Ch(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,r,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(r=t.photoURL)&&void 0!==r?r:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:E}=t;ph(v&&E,e,"internal-error");const T=qh.fromJSON(this.name,E);ph("string"==typeof v,e,"internal-error"),jh(u,e.name),jh(h,e.name),ph("boolean"==typeof w,e,"internal-error"),ph("boolean"==typeof b,e,"internal-error"),jh(d,e.name),jh(f,e.name),jh(p,e.name),jh(m,e.name),jh(g,e.name),jh(y,e.name);const S=new Bh({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:T,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&(S.providerData=I.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t,n=!1){const i=new qh;i.updateFromServerResponse(t);const s=new Bh({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Vh(s),s}}class $h{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}$h.type="NONE";const zh=$h;function Hh(e,t,n){return`firebase:${e}:${t}:${n}`}class Kh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=Hh(this.userKey,i.apiKey,s),this.fullPersistenceKey=Hh("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Bh._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Kh(vh(zh),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=i[0]||vh(zh);const r=Hh(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(r);if(t){const i=Bh._fromJSON(e,t);n!==s&&(o=i),s=n;break}}catch(e){}const a=i.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(r)}catch(e){}}))),new Kh(s,e,n)):new Kh(s,e,n)}}function Gh(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Jh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Wh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Zh(t))return"Blackberry";if(ed(t))return"Webos";if(Xh(t))return"Safari";if((t.includes("chrome/")||Yh(t))&&!t.includes("edge/"))return"Chrome";if(Qh(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function Wh(e=f()){return/firefox\//i.test(e)}function Xh(e=f()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Yh(e=f()){return/crios\//i.test(e)}function Jh(e=f()){return/iemobile/i.test(e)}function Qh(e=f()){return/android/i.test(e)}function Zh(e=f()){return/blackberry/i.test(e)}function ed(e=f()){return/webos/i.test(e)}function td(e=f()){return/iphone|ipad|ipod/i.test(e)}function nd(e=f()){return td(e)||Qh(e)||ed(e)||Zh(e)||/windows phone/i.test(e)||Jh(e)}function id(e,t=[]){let n;switch(e){case"Browser":n=Gh(f());break;case"Worker":n=`${Gh(f())}-${e}`;break;default:n=e}return`${n}/JsCore/9.6.10/${t.length?t.join(","):"FirebaseCore-web"}`}class sd{constructor(e,t,n){this.app=e,this.heartbeatServiceProvider=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new od(this),this.idTokenSubscription=new od(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ch,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=n.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=vh(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Kh.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==n?void 0:n._redirectEventId,r=await this.tryRedirectSignIn(e);i&&i!==s||!(null==r?void 0:r.user)||(n=r.user)}return n?n._redirectEventId?(ph(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(e){if("auth/network-request-failed"!==e.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?A(e):null;return t&&ph(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&ph(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(vh(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new w("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&vh(e)||this._popupRedirectResolver;ph(t,this,"argument-error"),this.redirectPersistenceManager=await Kh.create(this,[vh(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s="function"==typeof t?t:t.next.bind(t),r=this._isInitialized?Promise.resolve():this._initializationPromise;return ph(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"==typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ph(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=id(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());return n&&(t["X-Firebase-Client"]=n),t}}function rd(e){return A(e)}class od{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new k(e,void 0);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return ph(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class ad{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mh("not implemented")}_getIdTokenResponse(e){return mh("not implemented")}_linkToIdToken(e,t){return mh("not implemented")}_getReauthenticationResolver(e){return mh("not implemented")}}class cd extends ad{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new cd(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new cd(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithPassword",kh(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithEmailLink",kh(e,t))}(e,{email:this._email,oobCode:this._password});default:hh(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return async function(e,t){return Ch(e,"POST","/v1/accounts:update",t)}(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithEmailLink",kh(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:hh(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ld(e,t){return Nh(e,"POST","/v1/accounts:signInWithIdp",kh(e,t))}class ud extends ad{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ud(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hh("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=oh(t,["providerId","signInMethod"]);if(!n||!i)return null;const r=new ud(n,i);return r.idToken=s.idToken||void 0,r.accessToken=s.accessToken||void 0,r.secret=s.secret,r.nonce=s.nonce,r.pendingToken=s.pendingToken||null,r}_getIdTokenResponse(e){return ld(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ld(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ld(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=T(t)}return e}}const hd={USER_NOT_FOUND:"user-not-found"};class dd extends ad{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new dd({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new dd({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithPhoneNumber",kh(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Nh(e,"POST","/v1/accounts:signInWithPhoneNumber",kh(e,t));if(n.temporaryProof)throw Lh(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Nh(e,"POST","/v1/accounts:signInWithPhoneNumber",kh(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),hd)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||t||i||s?new dd({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}class fd{constructor(e){var t,n,i,s,r,o;const a=S(_(e)),c=null!==(t=a.apiKey)&&void 0!==t?t:null,l=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);ph(c&&l&&u,"argument-error"),this.apiKey=c,this.operation=u,this.code=l,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(r=a.languageCode)&&void 0!==r?r:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=S(_(e)).link,n=t?S(_(t)).deep_link_id:null,i=S(_(e)).deep_link_id;return(i?S(_(i)).link:null)||i||n||t||e}(e);try{return new fd(t)}catch(e){return null}}}class pd{constructor(){this.providerId=pd.PROVIDER_ID}static credential(e,t){return cd._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=fd.parseLink(t);return ph(n,"argument-error"),cd._fromEmailAndCode(e,n.code,n.tenantId)}}pd.PROVIDER_ID="password",pd.EMAIL_PASSWORD_SIGN_IN_METHOD="password",pd.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class md{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class gd extends md{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class yd extends gd{constructor(){super("facebook.com")}static credential(e){return ud._fromParams({providerId:yd.PROVIDER_ID,signInMethod:yd.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yd.credentialFromTaggedObject(e)}static credentialFromError(e){return yd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return yd.credential(e.oauthAccessToken)}catch(e){return null}}}yd.FACEBOOK_SIGN_IN_METHOD="facebook.com",yd.PROVIDER_ID="facebook.com";class vd extends gd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ud._fromParams({providerId:vd.PROVIDER_ID,signInMethod:vd.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return vd.credentialFromTaggedObject(e)}static credentialFromError(e){return vd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return vd.credential(t,n)}catch(e){return null}}}vd.GOOGLE_SIGN_IN_METHOD="google.com",vd.PROVIDER_ID="google.com";class wd extends gd{constructor(){super("github.com")}static credential(e){return ud._fromParams({providerId:wd.PROVIDER_ID,signInMethod:wd.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wd.credentialFromTaggedObject(e)}static credentialFromError(e){return wd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return wd.credential(e.oauthAccessToken)}catch(e){return null}}}wd.GITHUB_SIGN_IN_METHOD="github.com",wd.PROVIDER_ID="github.com";class bd extends gd{constructor(){super("twitter.com")}static credential(e,t){return ud._fromParams({providerId:bd.PROVIDER_ID,signInMethod:bd.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return bd.credentialFromTaggedObject(e)}static credentialFromError(e){return bd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return bd.credential(t,n)}catch(e){return null}}}bd.TWITTER_SIGN_IN_METHOD="twitter.com",bd.PROVIDER_ID="twitter.com";class Id{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await Bh._fromIdTokenResponse(e,n,i),r=Ed(n);return new Id({user:s,providerId:r,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Ed(n);return new Id({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Ed(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Td extends v{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Td.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Td(e,t,n,i)}}function Sd(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Td._fromErrorAndOperation(e,n,t,i);throw n}))}async function _d(e,t,n=!1){const i="signIn",s=await Sd(e,i,t),r=await Id._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function kd(e,t,n){const i=A(e),s={requestType:"PASSWORD_RESET",email:t};n&&function(e,t,n){var i;ph((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),ph(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ph(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ph(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}(i,s,n),await async function(e,t){return async function(e,t){return Ch(e,"POST","/v1/accounts:sendOobCode",kh(e,t))}(e,t)}(i,s)}new WeakMap;const Cd="__sak";class Ad{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Nd extends Ad{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=f();return Xh(e)||td(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=nd(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);y()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Nd.type="LOCAL";const Rd=Nd;class Dd extends Ad{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Dd.type="SESSION";const Ld=Dd;class Od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Od(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,r=this.handlersMap[i];if(!(null==r?void 0:r.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async e=>e(t.origin,s))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Pd(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}Od.receivers=[];class xd{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=Pd("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}function Md(){return window}function Ud(){return void 0!==Md().WorkerGlobalScope&&"function"==typeof Md().importScripts}const Fd="firebaseLocalStorageDb",Vd="firebaseLocalStorage",qd="fbase_key";class jd{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Bd(e,t){return e.transaction([Vd],t?"readwrite":"readonly").objectStore(Vd)}function $d(){const e=indexedDB.open(Fd,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Vd,{keyPath:qd})}catch(e){n(e)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Vd)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Fd);return new jd(e).toPromise()}(),t(await $d()))}))}))}async function zd(e,t,n){const i=Bd(e,!0).put({[qd]:t,value:n});return new jd(i).toPromise()}function Hd(e,t){const n=Bd(e,!0).delete(t);return new jd(n).toPromise()}class Kd{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await $d()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ud()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Od._getInstance(Ud()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new xd(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}var t}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $d();return await zd(e,Cd,"1"),await Hd(e,Cd),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>zd(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Bd(e,!1).get(t),i=await new jd(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Hd(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Bd(e,!1).getAll();return new jd(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Kd.type="LOCAL";const Gd=Kd;function Wd(e){return`__${e}${Math.floor(1e6*Math.random())}`}Wd("rcb"),new Ih(3e4,6e4);class Xd{constructor(e){this.providerId=Xd.PROVIDER_ID,this.auth=rd(e)}verifyPhoneNumber(e,t){return async function(e,t,n){var i;const s=await n.verify();try{let r;if(ph("string"==typeof s,e,"argument-error"),ph("recaptcha"===n.type,e,"argument-error"),r="string"==typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){ph("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ch(e,"POST","/v2/accounts/mfaEnrollment:start",kh(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{ph("signin"===t.type,e,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;ph(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ch(e,"POST","/v2/accounts/mfaSignIn:start",kh(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ch(e,"POST","/v1/accounts:sendVerificationCode",kh(e,t))}(e,{phoneNumber:r.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}(this.auth,e,A(t))}static credential(e,t){return dd._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Xd.credentialFromTaggedObject(t)}static credentialFromError(e){return Xd.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?dd._fromTokenResponse(t,n):null}}Xd.PROVIDER_ID="phone",Xd.PHONE_SIGN_IN_METHOD="phone";class Yd extends ad{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ld(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ld(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ld(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Jd(e){return _d(e.auth,new Yd(e),e.bypassAuthState)}function Qd(e){const{auth:t,user:n}=e;return ph(n,t,"internal-error"),async function(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await Mh(e,Sd(i,s,t,e),n);ph(r.idToken,i,"internal-error");const o=xh(r.idToken);ph(o,i,"internal-error");const{sub:a}=o;return ph(e.uid===a,i,"user-mismatch"),Id._forOperation(e,s,r)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&hh(i,"user-mismatch"),e}}(n,new Yd(e),e.bypassAuthState)}async function Zd(e){const{auth:t,user:n}=e;return ph(n,t,"internal-error"),async function(e,t,n=!1){const i=await Mh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Id._forOperation(e,"link",i)}(n,new Yd(e),e.bypassAuthState)}class ef{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=e;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Jd;case"linkViaPopup":case"linkViaRedirect":return Zd;case"reauthViaPopup":case"reauthViaRedirect":return Qd;default:hh(this.auth,"internal-error")}}resolve(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const tf=new Ih(2e3,1e4);class nf extends ef{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,nf.currentPopupAction&&nf.currentPopupAction.cancel(),nf.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ph(e,this.auth,"internal-error"),e}async onExecution(){gh(1===this.filter.length,"Popup operations only handle one event");const e=Pd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(dh(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(dh(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,nf.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(dh(this.auth,"popup-closed-by-user"))}),2e3):this.pollId=window.setTimeout(e,tf.get())};e()}}nf.currentPopupAction=null;const sf=new Map;class rf extends ef{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=sf.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=function(e){return Hh("pendingRedirect",e.config.apiKey,e.name)}(t),i=function(e){return vh(e._redirectPersistence)}(e);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}sf.set(this.auth._key(),e)}return this.bypassAuthState||sf.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function of(e,t,n=!1){const i=rd(e),s=function(e,t){return t?vh(t):(ph(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}(i,t),r=new rf(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class af{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return lf(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!lf(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(dh(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(cf(e))}saveEventToCache(e){this.cachedEventUids.add(cf(e)),this.lastProcessedEventTime=Date.now()}}function cf(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function lf({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}const uf=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hf=/^https?/;function df(e){const t=wh(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!hf.test(n))return!1;if(uf.test(e))return i===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}const ff=new Ih(3e4,6e4);function pf(){const e=Md().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let mf=null;function gf(e){return mf=mf||function(e){return new Promise(((t,n)=>{var i,s,r,o;function a(){pf(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{pf(),n(dh(e,"network-request-failed"))},timeout:ff.get()})}if(null===(s=null===(i=Md().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(r=Md().gapi)||void 0===r?void 0:r.load)){const t=Wd("iframefcb");return Md()[t]=()=>{gapi.load?a():n(dh(e,"network-request-failed"))},(o=`https://apis.google.com/js/api.js?onload=${t}`,new Promise(((e,t)=>{const n=document.createElement("script");var i,s;n.setAttribute("src",o),n.onload=e,n.onerror=e=>{const n=dh("internal-error");n.customData=e,t(n)},n.type="text/javascript",n.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(n)}))).catch((e=>n(e)))}a()}})).catch((e=>{throw mf=null,e}))}(e),mf}const yf=new Ih(5e3,15e3),vf={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wf=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function bf(e){const t=e.config;ph(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Eh(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,i={apiKey:t.apiKey,appName:e.name,v:se},s=wf.get(e.config.apiHost);s&&(i.eid=s);const r=e._getFrameworks();return r.length&&(i.fw=r.join(",")),`${n}?${T(i).slice(1)}`}const If={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ef{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Tf(e,t,n,i,s,r){ph(e.config.authDomain,e,"auth-domain-config-required"),ph(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:se,eventId:s};if(t instanceof md){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(r||{}))o[e]=t}if(t instanceof gd){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const e of Object.keys(a))void 0===a[e]&&delete a[e];return`${function({config:e}){return e.emulator?Eh(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${T(a).slice(1)}`}const Sf="webStorageSupport",_f=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ld,this._completeRedirectFn=of}async _openPopup(e,t,n,i){var s;return gh(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const c=Object.assign(Object.assign({},If),{width:i.toString(),height:s.toString(),top:r,left:o}),l=f().toLowerCase();n&&(a=Yh(l)?"_blank":n),Wh(l)&&(t=t||"http://localhost",c.scrollbars="yes");const u=Object.entries(c).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=f()){var t;return td(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new Ef(null);const h=window.open(t||"",a,u);ph(h,e,"popup-blocked");try{h.focus()}catch(e){}return new Ef(h)}(e,Tf(e,t,n,wh(),i),Pd())}async _openRedirect(e,t,n,i){var s;return await this._originValidation(e),s=Tf(e,t,n,wh(),i),Md().location.href=s,new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(gh(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await gf(e),n=Md().gapi;return ph(n,e,"internal-error"),t.open({where:document.body,url:bf(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vf,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const s=dh(e,"network-request-failed"),r=Md().setTimeout((()=>{i(s)}),yf.get());function o(){Md().clearTimeout(r),n(t)}t.ping(o).then(o,(()=>{i(s)}))}))))}(e),n=new af(e);return t.register("authEvent",(t=>(ph(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sf,{type:Sf},(n=>{var i;const s=null===(i=null==n?void 0:n[0])||void 0===i?void 0:i.webStorageSupport;void 0!==s&&t(!!s),hh(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e,t={}){return Ch(e,"GET","/v1/projects",t)}(e);for(const e of t)try{if(df(e))return}catch(e){}hh(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return nd()||Xh()||td()}};var kf,Cf="@firebase/auth",Af="0.19.11";class Nf{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ph(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}kf="Browser",ee(new P("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),{apiKey:s,authDomain:r}=n.options;return((e,n)=>{ph(s&&!s.includes(":"),"invalid-api-key",{appName:e.name}),ph(!(null==r?void 0:r.includes(":")),"argument-error",{appName:e.name});const i={apiKey:s,authDomain:r,clientPlatform:kf,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:id(kf)},o=new sd(e,n,i);return function(e,t){const n=(null==t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(vh);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null==t?void 0:t.popupRedirectResolver)}(o,t),o})(n,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),ee(new P("auth-internal",(e=>(e=>new Nf(e))(rd(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),oe(Cf,Af,void 0),oe(Cf,Af,"esm2017");var Rf=document.querySelector("#instructions p"),Df=[11,14,13,18,13,16,20,18],Lf=[7,10,10,14,10,20,20,20],Of=["vaccinate world's population and help fight the coronavirus disease. If you'll fail, a new variant will arrive...","you made it! But the population grew and you need to vaccinate more people now!","you made it again! Now lets see if you can do it even faster!","great job! But bats are camming. Can you vaccinate them too?","you are awesome! Now lets see if you can do it with people that are in a hurry!","amazing work! Can you also vaccinate each person in only one second?","the Corona can't beat you! Lets try it now with the bats and faster!","you're almost at the end of your journy, only one stage to go!","you did it! You saved humanity! You ended the coronavirus disease and made XXX point."],Pf=["Vaccinate world's population and help fight the coronavirus disease. If you'll fail, a new variant will arrive...","You made it! But the population grew and you need to vaccinate more people now!","You made it again! Now lets see if you can do it even faster!","Great job! But bats are camming. Can you vaccinate them too?","You are awesome! Now lets see if you can do it with people that are in a hurry!","Amazing work! Can you also vaccinate each person in only one second?","The Corona can't beat you! Lets try it now with the bats!","You're almost at the end of your journy, only one stage to go!","You did it! You saved humanity! You ended the coronavirus disease and made XXX point."],xf=document.querySelector("#instructions"),Mf=document.querySelector("#medal"),Uf=document.querySelector("#medal span"),Ff=localStorage.getItem("name");""!=Ff&&null!=Ff&&(document.forms.nicknameForm.nickname.setAttribute("value",localStorage.name),document.forms.nicknameForm.nickname.style.color="#555555",null!=localStorage.getItem("bestScore")&&""!=localStorage.getItem("bestScore")&&0!=localStorage.getItem("bestScore")&&(Uf.textContent=localStorage.getItem("bestScore"),Mf.style.display="block")),function(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw ne.create("bad-app-name",{appName:String(i)});const s=J.get(i);if(s){if(I(e,s.options)&&I(n,s.config))return s;throw ne.create("duplicate-app",{appName:i})}const r=new U(i);for(const e of Q.values())r.addComponent(e);const o=new ie(e,n,r);J.set(i,o)}({apiKey:"AIzaSyAQ8bwV2MCpnsyTasXZLKns3os5dkR1de8",authDomain:"corona-game-fbf6d.firebaseapp.com",projectId:"corona-game-fbf6d",storageBucket:"corona-game-fbf6d.appspot.com",messagingSenderId:"26072350198",appId:"1:26072350198:web:09e9cc86fcf52eda1c1bd7"});var Vf=function(e=re()){const t=te(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=te(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(I(n.getOptions(),null!=t?t:{}))return e;hh(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:_f,persistence:[Gd,Rd,Ld]})}(),qf=function(e=re()){return te(e,"firestore").getImmediate()}(),jf=(function(e,t,...n){if(e=A(e),fu("collection","path",t),e instanceof wu){const i=or.fromString(t,...n);return mu(i),new Eu(e,null,i)}{if(!(e instanceof bu||e instanceof Eu))throw new qs(Vs.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(or.fromString(t,...n));mu(i),new Eu(e.firestore,null,i)}}(qf,"nicknamesCollection"),0),Bf=document.querySelector("#register"),$f=document.querySelector("#registerFormContainer"),zf=document.querySelector("#registerForm"),Hf=document.querySelectorAll("#registerFormContainer #registerForm input"),Kf=document.querySelectorAll("#registerFormContainer #registerForm p"),Gf=document.querySelector("#registerFormContainer #registerForm #lastName"),Wf=document.querySelector("#registerFormContainer #registerForm #firstName"),Xf=document.querySelector("#registerFormContainer #registerForm #lastNameP"),Yf=document.querySelector("#registerFormContainer #registerForm #firstNameP"),Jf=document.querySelector("#signIn"),Qf=document.querySelector("#signInFormContainer"),Zf=document.querySelector("#signInForm"),ep=document.querySelector(".x"),tp=document.querySelector("#instructions p"),np=document.querySelector("#instructions form"),ip=document.querySelector("#instructions form label"),sp=document.querySelector("#instructions form #nickname"),rp=document.querySelector("#instructions form #startButton"),op=document.querySelector("#signOut"),ap=document.querySelector("#hourglass"),cp=document.querySelector("#signInFormContainer #signInForm p"),lp=document.querySelector("#forgotContainer"),up=document.querySelector("#forgotContainer #forgotForm"),hp=document.querySelector(".x2"),dp=document.querySelector("#backToGame"),fp=document.querySelector("#emailSent"),pp=document.querySelector("#emailSent p"),mp=document.querySelector("#quit"),gp=function(){$f.style.display="block",ep.style.display="block"};Bf.addEventListener("click",gp);var yp=function(){Qf.style.display="block",ep.style.display="block"};Jf.addEventListener("click",yp),ep.addEventListener("click",(function(){Qf.style.display="none",Zf.reset(),$f.style.display="none",zf.reset(),ep.style.display="none",dp.style.display="none",Hf.forEach((function(e){e.classList.remove("invalid")})),Kf.forEach((function(e){e.classList.remove("invalid")}))})),mp.addEventListener("click",(function(){location.reload()}));var vp={firstName:/^[a-zA-Z]+((( - )|( -)|(- )|-| )?[a-zA-Z]+)*$/,lastName:/^[a-zA-Z]+((( - )|( -)|(- )|-| )?[a-zA-Z]+)*$/,nicknameRegisteredUser:/^[a-zA-Z0-9]+( ?(_|-|\.)? ?[a-zA-Z0-9]+)*$/,email:/^([\w\d\.-]+)@([\w\d-]+)\.([a-zA-Z]{2,12})(\.[a-zA-Z]{2,8})?$/,password:/^[\w\d-@\.]{8,20}$/};Hf.forEach((function(e){var t=e.getAttribute("id");e.addEventListener("focusout",(function(n){"submitRegisterForm"!==e.getAttribute("id")&&(0==vp[n.target.name].test(n.target.value)?""!==n.target.value&&(e.classList.add("invalid"),Kf.forEach((function(n){"firstName"!=e.getAttribute("name")&&"lastName"!=e.getAttribute("name")||1!=Gf.classList.contains("invalid")||1!=Wf.classList.contains("invalid")?n.getAttribute("id")==t+"P"&&n.classList.add("invalid"):console.log("")}))):(e.classList.remove("invalid"),Kf.forEach((function(n){"firstName"!=e.getAttribute("name")&&"lastName"!=e.getAttribute("name")||1!=Gf.classList.contains("invalid")&&1!=Wf.classList.contains("invalid")?"firstName"!=e.getAttribute("name")&&"lastName"!=e.getAttribute("name")||0!=Gf.classList.contains("invalid")||0!=Wf.classList.contains("invalid")?n.getAttribute("id")==t+"P"&&n.classList.remove("invalid"):(Xf.classList.remove("invalid"),Yf.classList.remove("invalid")):console.log("")}))))}))})),zf.addEventListener("submit",(function(e){e.preventDefault();var t=function(e){return e.classList.contains("invalid")};if(Array.from(Hf).some(t)||Array.from(Kf).some(t))console.log("do nothing");else{ap.style.display="block";var n=zf.email.value,i=zf.password.value,s=zf.nicknameRegisteredUser.value,r=Tu(qf,"nicknamesCollection",s);nh(r).then((function(e){ap.style.display="none",null==e.data()?async function(e,t,n){const i=rd(e),s=await async function(e,t){return Nh(e,"POST","/v1/accounts:signUp",kh(e,t))}(i,{returnSecureToken:!0,email:t,password:n}),r=await Id._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(r.user),r}(Vf,n,i).then((function(e){console.log(" user registered: ",e.user),localStorage.setItem("name",s),localStorage.setItem("bestScore",0),localStorage.setItem("score",0),Mf.style.display="none"})).then((function(){return async function(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=A(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},r=await Mh(i,async function(e,t){return Ch(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=r.displayName||null,i.photoURL=r.photoUrl||null;const o=i.providerData.find((({providerId:e})=>"password"===e));o&&(o.displayName=i.displayName,o.photoURL=i.photoURL),await i._updateTokensIfNecessary(r)}(Vf.currentUser,{displayName:s})})).then((function(){document.forms.nicknameForm.nickname.setAttribute("value",Vf.currentUser.displayName),console.log("nickname: "+Vf.currentUser.displayName+" email: "+Vf.currentUser.email+" userID: "+Vf.currentUser.uid)})).then((function(){sh(r,{Nickname:s}).then((function(){console.log("We have set the new docs")})).catch((function(e){console.log(e.message),alert("There was a problem processing your request."),ap.style.display="none"}))})).then((function(){sh(Tu(qf,"usersScore",Vf.currentUser.displayName),{Score:0,Nickname:s}).then((function(){console.log("We have set the other docs"),zf.reset(),ap.style.display="none",$f.style.display="none",ip.style.display="none",sp.style.display="none",Bf.style.display="none",Jf.style.display="none",ep.style.display="none",Rf.textContent=s+", "+Of[jf],rp.style.fontSize="17px",rp.style.color="#555",op.style.display="block"})).catch((function(e){console.log(e.message),alert("There was a problem processing your request."),ap.style.display="none"}))})).catch((function(e){ap.style.display="none",console.log(e.message),e.message.includes("network-request-failed")?setTimeout((function(){alert("Network request failed, please check your internet connection or try again later.")}),300):e.message.includes("email-already-in-use")?setTimeout((function(){alert("Email already in use, please choose a different one.")}),300):e.message.includes("weak-password")?setTimeout((function(){alert("Password should be at least 6 characters.")}),300):setTimeout((function(){alert("There was a problem processing your request.")}),300)})):(console.log("Nickname already exists:",e.data()),alert("This nickname is already taken, please choose a different one"))})).catch((function(e){console.log("Error message for getDoc:",e.message),ap.style.display="none",setTimeout((function(){alert("There was a problem processing your request. Please try again later.")}),300)}))}})),Zf.addEventListener("submit",(function(e){e.preventDefault();var t=Zf.email.value,n=Zf.password.value;ap.style.display="block",function(e,t,n){return async function(e,t){return _d(rd(e),t)}(A(e),pd.credential(t,n))}(Vf,t,n).then((function(e){ap.style.display="none",Zf.reset(),console.log("user signed in: ",e.user,"nickname: ",Vf.currentUser.displayName),Rf.textContent=Vf.currentUser.displayName+", "+Of[jf],document.forms.nicknameForm.nickname.setAttribute("value",Vf.currentUser.displayName),Qf.style.display="none",ip.style.display="none",sp.style.display="none",Bf.style.display="none",Jf.style.display="none",op.style.display="block",ep.style.display="none",rp.style.fontSize="17px",rp.style.color="#555",dp.style.display="none",Mf.style.display="none",localStorage.clear(),localStorage.getItem("score"),localStorage.getItem("bestScore"),localStorage.setItem("name",Vf.currentUser.displayName),nh(Tu(qf,"usersScore",Vf.currentUser.displayName)).then((function(e){localStorage.setItem("bestScore",e.data().Score),null!=localStorage.getItem("bestScore")&&""!=localStorage.getItem("bestScore")&&0!=localStorage.getItem("bestScore")?(Uf.textContent=localStorage.getItem("bestScore"),Mf.style.display="block"):Mf.style.display="none"})).catch((function(e){console.log(e.message)}))})).catch((function(e){ap.style.display="none",console.log(e.message),e.message.includes("wrong-password")?setTimeout((function(){alert("Wrong password.")}),300):e.message.includes("user-not-found")?setTimeout((function(){alert("User not found.")}),300):e.message.includes("network-request-failed")?setTimeout((function(){alert("Network request failed.")}),300):setTimeout((function(){alert("Signing in error, please try again later.")}),300)}))})),cp.addEventListener("click",(function(){lp.style.display="block",Qf.style.display="none",ep.style.display="none",hp.style.display="block",dp.style.display="block"})),hp.addEventListener("click",(function(){lp.style.display="none",Qf.style.display="block",ep.style.display="block",hp.style.display="none",dp.style.display="block",up.reset()})),dp.addEventListener("click",(function(){lp.style.display="none",Qf.style.display="none",ep.style.display="none",hp.style.display="none",dp.style.display="none",up.reset()})),up.addEventListener("submit",(function(e){e.preventDefault();var t=up.email.value;console.log(t),ap.style.display="block",pp.classList.add("animationIsOn"),pp.classList.remove("animationRemoved"),kd(Vf,t).then((function(){ap.style.display="none",console.log("Email sent!"),fp.style.display="flex",pp.style.animation="emailSent 2.5s ease forwards normal",setTimeout((function(){fp.style.display="none",pp.classList.add("animationRemoved"),pp.classList.remove("animationIsOn")}),2500),up.reset(),lp.style.display="none",Qf.style.display="block",ep.style.display="block",hp.style.display="none",dp.style.display="block"})).catch((function(e){ap.style.display="none",e.message,console.log(e.message),e.message.includes("network-request-failed")?setTimeout((function(){alert("Network request failed, please check your internet connection or try again later.")}),300):e.message.includes("invalid-email")?setTimeout((function(){alert("Invalid email, please verify your email below and resend it.")}),300):e.message.includes("user-not-found")?setTimeout((function(){alert("Account does not exist.")}),300):setTimeout((function(){alert("There was a problem processing your request.")}),300)}))})),op.addEventListener("click",(function(){op.style.display="none",Bf.style.display="inline-block",Jf.style.display="inline-block",localStorage.clear(),localStorage.getItem("name"),localStorage.getItem("score"),function(e){return A(e).signOut()}(Vf).then((function(){console.log("the user logged out"),Rf.textContent=Pf[jf],Mf.style.display="none",ip.style.display="inline-block",ip.style.right="3px",sp.style.display="inline-block",rp.style.fontSize="14px",rp.style.color="buttontext",document.forms.nicknameForm.nickname.setAttribute("value","")})).catch((function(e){console.log(e.message)}))}));var wp=0;!function(e,t,n,i){A(e).onAuthStateChanged(t,void 0,void 0)}(Vf,(function(e){e?(wp=1,console.log(wp,e),Bf.style.display="none",Jf.style.display="none",op.style.display="block",Rf.textContent=Vf.currentUser.displayName+", "+Of[jf],ip.style.display="none",sp.style.display="none",rp.style.fontSize="17px",rp.style.color="#555"):(wp=0,console.log(wp,e))}));var bp=document.querySelectorAll(".trial"),Ip=0,Ep=function(e){return Ip=e},Tp=e.clientWidth;console.log("ourViewPortWidth: "+Tp+" ourViewPortHeight: "+e.clientHeight),window.addEventListener("resize",(function(){Tp=e.clientWidth}));var Sp=function(t,n){var i=Math.floor(5*Math.random())-2,s=Math.floor(5*Math.random())-2;0==i&&0==s&&(i=2);var r,o=function(n,i){1!=Ip?t.offsetTop<=1&&t.offsetLeft>=e.clientWidth-56-1?(t.style.top=e.clientHeight-56-2+"px",t.style.left="2px"):t.offsetTop<=1&&t.offsetLeft<=1?(t.style.top=e.clientHeight-56-2+"px",t.style.left=Tp-56-2+"px"):t.offsetTop>=e.clientHeight-56-1&&t.offsetLeft<=1?(t.style.top="2px",t.style.left=Tp-56-2+"px"):t.offsetTop>=e.clientHeight-56-1&&t.offsetLeft>=e.clientWidth-56-1?(t.style.top="2px",t.style.left="2px"):t.offsetTop<=1?(t.style.top=e.clientHeight-56-2+"px",t.style.left=e.clientWidth-56-parseInt(t.style.left)+"px"):t.offsetTop>=e.clientHeight-56-1?(t.style.top="2px",t.style.left=e.clientWidth-56-parseInt(t.style.left)+"px"):t.offsetLeft<=1?(t.style.left=Tp-56-2+"px",t.style.top=e.clientHeight-56-parseInt(t.style.top)+"px"):t.offsetLeft>=e.clientWidth-56-1?(t.style.left="2px",t.style.top=e.clientHeight-56-parseInt(t.style.top)+"px"):(t.style.top=parseInt(t.style.top)+i+"px",t.style.left=parseInt(t.style.left)+n+"px"):clearInterval(r)};[11,12,13,14].some((function(e){return t.style.background.includes(e)}))?r=setInterval((function(){return o(i,s)}),9):"fast"==n?(r=setInterval((function(){return o(i,s)}),12),console.log("going fast now")):r="slow"==n?setInterval((function(){return o(i,s)}),40):setInterval((function(){return o(i,s)}),20)};Array.from(bp).forEach((function(t){t.style.top=Math.random()*(e.clientHeight-56)+"px",t.style.left=Math.random()*(e.clientWidth-56)+"px",Sp(t,"slow")}));var _p=document.querySelector("#instructions h4"),kp=document.querySelector("#trial3"),Cp=document.createElement("div"),Ap=function(){Bf.removeEventListener("click",gp),Jf.removeEventListener("click",yp),Mf.style.display="none",Cp.classList.add("trial","trial4"),e.insertBefore(Cp,kp),Cp.style.top=Math.random()*(e.clientHeight-56)+"px",Cp.style.left=Math.random()*(e.clientWidth-56)+"px",Sp(Cp,"fast")},Np=window.matchMedia("(orientation: portrait)");Np.matches&&Ap(),Np.addEventListener("change",(function(e){e.matches&&Ap()})),(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substring(0,5)))&&(tp.style.display="none",np.style.display="none",_p.style.display="block",Ap());var Rp,Dp=document.querySelector("footer"),Lp=document.querySelector("#topEyeshade"),Op=document.querySelector("#bottomEyeshade"),Pp=document.querySelectorAll(".tinyCircle"),xp=document.querySelectorAll(".corona"),Mp=document.querySelectorAll(".tinyCircleContainer"),Up=document.querySelector("#sign"),Fp=document.querySelector("#headline"),Vp=0,qp=[],jp=[],Bp=[],$p=0,zp=document.querySelector("header #bonusArrow"),Hp=0;rp.addEventListener("click",(function(n){n.preventDefault(),op.style.display="none",Mf.style.display="none",mp.style.display="none",Fp.style.opacity="0",Array.from(bp).forEach((function(e){console.log(e),e.style.display="none",Ep(1)})),Ep(0);for(var i=1;i<=Lf[Vp];i++)5!=Vp||11!=i&&12!=i&&13!=i&&14!=i?Bp.push(i):console.log("");Bp.forEach((function(t){qp.push("figure"+t);var n=document.createElement("div");n.classList.add("figures"),n.setAttribute("id","figure"+t),e.insertBefore(n,Dp),jp.push(n)})),qp.forEach((function(t){var n=document.querySelector("#"+t);n.style.background="url('./".concat(t,".svg')"),n.style.top=Math.random()*(e.clientHeight-56)+"px",n.style.left=Math.random()*(e.clientWidth-56)+"px",n.style.display="block",Sp(n,4==Vp||6==Vp||7==Vp?"fast":"regular");var i=function e(){n.removeEventListener("click",e),n.style.background="url(./stars.svg)",n.style.animation="fireworks 0.75s ease forwards normal",$p+=10,Hp+=1,console.log(Hp),s.textContent=$p,localStorage.score=$p,setTimeout((function(){n.remove()}),751)};n.addEventListener("click",i),setTimeout((function(){n.removeEventListener("click",i)}),1e3*Df[Vp])})),""!=(Rp=document.forms.nicknameForm.nickname.value)&&null!=Rp?localStorage.getItem("name")!=Rp?(localStorage.removeItem("bestScore"),localStorage.getItem("bestScore"),localStorage.removeItem("score"),localStorage.getItem("score"),localStorage.setItem("name",Rp)):localStorage.setItem("name",Rp):""!=Rp&&null!=Rp||0==Vp&&(localStorage.clear(),localStorage.getItem("name"),localStorage.getItem("score"),localStorage.getItem("bestScore")),ip.style.display="none",sp.style.display="none",Up.style.display="none",mp.style.display="none",rp.style.fontSize="17px",rp.style.color="#555",xp.forEach((function(e){e.style.display="block"})),Mp.forEach((function(e){e.style.display="inline-block"})),xf.style.display="none",Lp.style.animation="shutTopEyeshade 2.5s 0.65s ease infinite normal",Op.style.animation="shutBottomEyeshade 2.5s 0.65s ease infinite normal",o.style.animation="turnEyes 5s 0.925s ease infinite normal",t.style.opacity="0",t.style.display="flex";var s=document.querySelector("header #score span");s.textContent=$p;var r=0;window.requestAnimationFrame((function e(){r+=.03,t.style.opacity="".concat(r),t.style.opacity<"1"&&requestAnimationFrame(e)}));var a=document.querySelector("#timer");a.style.animation="none",a.classList.add("animationIsOn"),a.classList.remove("animationRemoved");var c=Df[Vp];a.textContent=c,a.style.animation="timerGrows 1s ".concat(c+1," ease normal"),document.querySelector("header #level span").textContent=Vp+1,zp.style.animation="none",zp.classList.remove("animationRemoved"),zp.classList.add("animationIsOn");var l=function(e){return e.style.background.includes("stars.svg")},u=setInterval((function(){c-=1,a.textContent=c}),1e3),h=localStorage.getItem("name"),d=setInterval((function(){if(jp.every(l)){if(clearInterval(d),Ep(1),function(e){jf=e}(Vp+=1),clearInterval(u),a.style.animation="none",a.classList.add("animationRemoved"),a.classList.remove("animationIsOn"),0!=c){a.style.animation="timerGrowsAgain 1s ".concat(c," ease normal"),zp.style.opacity="1",zp.style.animation="arrowGrows 1s ".concat(c," ease normal"),zp.classList.add("animationRemoved"),zp.classList.remove("animationIsOn"),setTimeout((function(){zp.style.opacity="0"}),1e3*c);var t=10*c,n=0;setInterval((function(){(n+=1)<=t&&($p+=1,s.textContent=$p,localStorage.score=$p,localStorage.bestScore<$p&&(localStorage.bestScore=$p,1==wp&&function(e,t,n,...i){e=yu(e,bu);const s=yu(e.firestore,_u),r=Fu(s);let o;return o="string"==typeof(t=A(t))||t instanceof Au?function(e,t,n,i,s,r){const o=e.uc(1,t,n),a=[Hu(t,i,n)],c=[s];if(r.length%2!=0)throw new qs(Vs.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<r.length;e+=2)a.push(Hu(t,r[e])),c.push(r[e+1]);const l=[],u=Ur.empty();for(let e=a.length-1;e>=0;--e)if(!Xu(l,a[e])){const t=a[e];let n=c[e];n=A(n);const i=o.nc(t);if(n instanceof qu)l.push(t);else{const e=ju(n,i);null!=e&&(l.push(t),u.set(t,e))}}const h=new lr(l);return new Pu(u,h,o.fieldTransforms)}(r,"updateDoc",e._key,t,n,i):function(e,t,n,i){const s=e.uc(1,t,n);zu("Data must be an object, but it was:",s,i);const r=[],o=Ur.empty();ir(i,((e,i)=>{const a=Gu(t,e,n);i=A(i);const c=s.nc(a);if(i instanceof qu)r.push(a);else{const e=ju(i,c);null!=e&&(r.push(a),o.set(a,e))}}));const a=new lr(r);return new Pu(o,a,s.fieldTransforms)}(r,"updateDoc",e._key,t),rh(s,[o.toMutation(e._key,Uo.exists(!0))])}(Tu(qf,"usersScore",Vf.currentUser.displayName),{Score:localStorage.getItem("bestScore")}).then((function(){console.log("Score updated")})).catch((function(e){console.log(e.message)}))))}),100)}setTimeout((function(){qp=[],jp=[],Bp=[]}),751),xp.forEach((function(e){e.style.display="none"})),Rf.textContent=""==h||null==h?Pf[Vp]:h+", "+Of[Vp],xf.style.opacity="0",xf.style.display="block",xf.style.animation="instructionsAppears 2s ease forwards normal",mp.style.display="block",mp.style.animation="instructionsAppears 2s ease forwards normal",(""==localStorage.bestScore||null==localStorage.bestScore||localStorage.bestScore<$p)&&(localStorage.bestScore=$p),Hp=0}else 0==c&&0==jp.every(l)&&(clearInterval(d),clearInterval(u),function(){Ep(1);var t=359*Math.random(),n=Math.floor(55*Math.random()+26),i=Math.floor(41*Math.random()+35);Pp.forEach((function(e){e.style.background="hsl(".concat(t,", ").concat(n,"%, ").concat(i,"%)")})),setTimeout((function(){a.style.animation="none",a.classList.add("animationRemoved"),a.classList.remove("animationIsOn")}),1e3),jp.forEach((function(t){if(t.style.background.includes("figure")){t.style.top=parseInt(t.style.top)+"px",t.style.left=parseInt(t.style.left)+"px";var n=document.createElement("div");n.classList.add("ambulance"),e.insertBefore(n,Dp),n.style.position="absolute",n.style.top=t.style.top,n.style.left=parseInt(t.style.left)-80+"px";var i=function(){n.style.left=parseInt(n.style.left)+1+"px"};setTimeout((function(){var e=0;setInterval((function(){e<20&&(t.style.top=parseInt(t.style.top)+1+"px",e+=1)}),5)}),1200),t.style.animation="figureBecomesMini 0.5s 1.2s ease forwards normal",setInterval((function(){parseInt(n.style.left)<parseInt(t.style.left)&&(n.style.left=parseInt(n.style.left)+1+"px")}),15),setTimeout((function(){if(parseInt(n.style.left)<Tp){var e=setInterval(i,10);n.style.animation="disappears 3s ease forwards normal",setInterval((function(){return clearInterval(e)}),3e3)}}),1700),setTimeout((function(){jp.forEach((function(e){e.remove()})),qp=[],jp=[],Bp=[]}),1700),setTimeout((function(){document.querySelectorAll(".ambulance").forEach((function(e){e.remove()}))}),4700)}})),setTimeout((function(){Rf.textContent=""==h||null==h?"You failed and a new variant is spreading now, but don't worry, you can try again and prevent a world catastrophe.":h+", you failed and a new variant is spreading now, but don't worry, you can try again and prevent a world catastrophe.",xf.style.opacity="0",xf.style.display="block",xf.style.top="calc(30% + 4px)",xf.style.animation="instructionsAppears 2.5s ease forwards normal",mp.style.display="block",mp.style.animation="instructionsAppears 2.5s ease forwards normal"}),2e3),$p-=10*Hp,console.log("userScore"+$p),Hp=0,localStorage.score=$p}())}),1)}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YkEsRUFDVSxxSEFFQUEsRUFBQUEsdUhBR25DN0gsR0FBYWw4RSxNQUFNcWpGLFFBQVUsSUFDN0JuSCxHQUFhbDhFLE1BQU0wOEUsUUFBVSxRQUM3QlIsR0FBYWw4RSxNQUFNRyxJQUFNLGtCQUN6Qis3RSxHQUFhbDhFLE1BQU0rZ0YsVUFBWSxnREFDL0IvQixHQUFLaC9FLE1BQU0wOEUsUUFBVSxRQUNyQnNDLEdBQUtoL0UsTUFBTStnRixVQUFZLGtEQUdVLEtBR3JDbUMsSUFBcUQsR0FBNUJFLEdBQ3pCNzRFLFFBQVFrSSxJQUFJLFlBQWN5d0UsSUFDMUJFLEdBQTRCLEVBRTVCaGEsYUFBYXFhLE1BQVFQLEdBK0ZqQnlCLE1BS29DIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9zcmMvc2NyaXB0cy9jdXJzb3JBbmRDb3JvbmEuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS91dGlsL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2NvbXBvbmVudC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hcHAvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9ub2RlX21vZHVsZXMvZmlyZWJhc2UvYXBwL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL25vZGVfbW9kdWxlcy9AZmlyZWJhc2Uvd2ViY2hhbm5lbC13cmFwcGVyL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2ZpcmVzdG9yZS9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2F1dGgvZGlzdC9lc20yMDE3L2luZGV4LTZkZTRjYmI5LmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL3NyYy9zY3JpcHRzL3N0b3J5TGluZS5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9zcmMvc2NyaXB0cy9sb2NhbFN0b3JhZ2UuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vc3JjL3NjcmlwdHMvc2lnbkluQW5kUmVnaXN0ZXJGb3Jtcy5qcyIsIndlYnBhY2s6Ly9jb3JvbmEtZ2FtZS5iaXRidWNrZXQuaW8vLi9zcmMvc2NyaXB0cy9maWd1cmVzTW92ZW1lbnQuanMiLCJ3ZWJwYWNrOi8vY29yb25hLWdhbWUuYml0YnVja2V0LmlvLy4vc3JjL3NjcmlwdHMvbW9iaWxlLmpzIiwid2VicGFjazovL2Nvcm9uYS1nYW1lLmJpdGJ1Y2tldC5pby8uL3NyYy9zY3JpcHRzL3N0YXJ0R2FtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmNcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSBzY3JpcHRVcmwgPSBzY3JpcHRzW3NjcmlwdHMubGVuZ3RoIC0gMV0uc3JjXG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImNvbnN0IGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5jb25zdCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXInKTtcbmNvbnN0IGN1cnNvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jdXJzb3InKTtcblxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBlID0+IHtcbiAgICAvL3RoZSBsb2NhdGlvbiBvZiB0aGUgc3lyaW5nZSBjdXJzb3JcbiAgICBjdXJzb3Iuc2V0QXR0cmlidXRlKFwic3R5bGVcIiwgXCJ0b3A6IFwiICsgKGUucGFnZVkgKyA0KSArIFwicHg7IGxlZnQ6IFwiICsgKGUucGFnZVggLSA1KSArIFwicHg7XCIpO1xufSk7XG5cblxuXG5jb25zdCBheGlzID0gWzEsIDIsIDMsIDQsIDUsIDZdOyAvL2ZvciB0aGUgbGluZXMgdGhhdCBnbyBvdXQgb2YgdGhlIGNvcm9uYSdzIGNlbnRlclxuLy9jb25zdCBheGlzRGl2cyA9IFtdOyAvL2NvbnRhaW5zIGFsbCB0aGUgYXhpc0RpdnMgb2YgdGhlIGNvcm9uYVxuLy9jb25zdCB0aW55Q2lyY2xlc0NvbnRhaW5lcnNEaXZzID0gW107XG5jb25zdCBjb3JvbmFDaXJjbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2lyY2xlJyk7XG5sZXQgYW5nbGUgPSAwO1xuXG5cbmF4aXMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAvL2NyZWF0aW5nIGRpdiBmb3IgZWFjaCBjb3JvbmEgYXhpc1xuICAgIGNvbnN0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGkuY2xhc3NMaXN0LmFkZCgnY29yb25hJywgJ2F4aXMnKTsgLy9hZGRpbmcgY2xhc3MgbmFtZXMgZm9yIG91ciBkaXZcbiAgICBpLnNldEF0dHJpYnV0ZSgnaWQnLCAnYXhpcycrZWxlbWVudCk7IC8vYWRkaW5nIGlkIGZvciBvdXIgZGl2XG4gICAgYm9keS5pbnNlcnRCZWZvcmUoaSwgY29yb25hQ2lyY2xlLm5leHRTaWJsaW5nKTsvL3B1dHRpbmcgXCJpXCIgYWZ0ZXIgY29yb25hQ2lyY2xlXG4gICAgLy9heGlzRGl2cy5wdXNoKGkpOyAvL3B1dHRpbmcgb3VyIGRpdiBpbnNpZGUgYXhpc0RpdnMgYXJyYXlcbiAgICBpLnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGVaKCR7YW5nbGV9ZGVnKWA7XG4gICAgYW5nbGUgKz0gMzA7XG5cbiAgICAvL2NyZWF0aW5nIGRpdiBmb3IgZWFjaCBjb250YWluZXIgKGNvbnRhaW5lcnMgZm9yIHRoZSB0aW55IGNpcmNsZXMpXG4gICAgLy90aGVzZSBjb250YWluZXJzIHdpbGwgaGF2ZSBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgY29uc3QgbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgbi5jbGFzc0xpc3QuYWRkKCdjb3JvbmEnLCAndGlueUNpcmNsZUNvbnRhaW5lcicpOyAvL2FkZGluZyBjbGFzcyBuYW1lcyBmb3Igb3VyIGRpdlxuICAgIG4uc2V0QXR0cmlidXRlKCdpZCcsICd0aW55Q2lyY2xlQ29udGFpbmVyJytlbGVtZW50KTsgLy9hZGRpbmcgaWQgZm9yIG91ciBkaXZcbiAgICBib2R5Lmluc2VydEJlZm9yZShuLCBoZWFkZXIpOy8vcHV0dGluZyBcIm5cIiBhdCB0aGUgdG9wIG9mIHRoZSBwYWdlLCBzbyBpdCB3aWxsIGJlIGVhc2llciB0byBwdXQgaXQgb24gdGhlIGJpZyBjaXJjbGVcbiAgICAvL3RpbnlDaXJjbGVzQ29udGFpbmVyc0RpdnMucHVzaChuKTsgLy9wdXR0aW5nIG91ciBkaXYgaW5zaWRlIHRpbnlDaXJjbGVzQ29udGFpbmVyc0RpdnMgYXJyYXlcbiAgICBuLnN0eWxlLnRvcCA9IFwiY2FsYygzMCUgLSAxMTBweClcIjsgLy9sb2NhdGluZyBpdCBhdCB0aGUgY2VudGVyIG9mIHRoZSBjb3JvbmEncyBiaWcgY2lyY2xlXG4gICAgbi5zdHlsZS5ib3R0b20gPSBcImNhbGMoNzAlICsgMTEwcHgpXCI7IFxuICAgIG4uc3R5bGUucmlnaHQgPSBgY2FsYyg1MCUgKyAkezEwICsgMjIqKGVsZW1lbnQgLTEpfXB4KWA7ICAgLy9sb2NhdGluZyBlYWNoIGNvbnRhaW5lciBhdCB0aGUgbG9jYXRpb24gb2YgdGhlIGZpcnN0IGNvbnRhaW5lclxuICAgIG4uc3R5bGUubGVmdCA9IGBjYWxjKDUwJSAtICR7MTAgKyAyMiooZWxlbWVudCAtMSl9cHgpYDsgIFxuICAgIGNvbnN0IGNvbnRhaW5lckFuZ2xlID0gMzAgKiAoZWxlbWVudCAtIDEpOyBcbiAgICBuLnN0eWxlLnRyYW5zZm9ybSA9IGByb3RhdGVaKCR7Y29udGFpbmVyQW5nbGV9ZGVnKWA7IC8vY2hhbmdpbmcgdGhlIGFuZ2xlIG9mIGVhY2ggY29udGFpbmVyLCBzbyBlYWNoIGNvbnRhaW5lciB3aWxsIGJlIGxvY2F0ZWQgYmVoaW5kIG9mIGVhY2ggYXhpc1xuICAgIFxuXG4gICAgLy9jcmVhdGluZyBkaXYgZm9yIGVhY2ggY29yb25hJ3MgdGlueSBjaXJjbGVcbiAgICAvL3RoZXNlIGNpcmNsZXMgd2lsbCBoYXZlIHBvc2l0aW9uOiBhYnNvbHV0ZTsgb24gdGhlaXIgZmF0aGVyICh0aGUgY29udGFpbmVyKVxuICAgIGNvbnN0IG0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGNvbnN0IGwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpOy8vd2UgbmVlZCAxMiB0aW55IGNpcmNsZXMgYW5kIHdlIGhhdmUgb25seSA2IGNvbnRhaW5lcnNcbiAgICBtLmNsYXNzTGlzdC5hZGQoJ2Nvcm9uYScsICd0aW55Q2lyY2xlJyk7XG4gICAgbS5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3RpbnlDaXJjbGUnK2VsZW1lbnQpO1xuICAgIG0uc3R5bGUudG9wID0gJzAnO1xuICAgIG0uc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgbC5jbGFzc0xpc3QuYWRkKCdjb3JvbmEnLCAndGlueUNpcmNsZScpO1xuICAgIGwuc2V0QXR0cmlidXRlKCdpZCcsICd0aW55Q2lyY2xlJysoZWxlbWVudCs2KSk7XG4gICAgbC5zdHlsZS50b3AgPSAnY2FsYygxMDAlIC0gMjRweCknO1xuICAgIGwuc3R5bGUucmlnaHQgPSAnMCc7XG4gICAgY29uc3QgY3VycmVudENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCN0aW55Q2lyY2xlQ29udGFpbmVyJHtlbGVtZW50fWApO1xuICAgIGN1cnJlbnRDb250YWluZXIuYXBwZW5kKG0pOyAvL3B1dGluZyBlYWNoIHRpbnlDaXJjbGUgaW5zaWRlIGl0cyByaWdodCBjb250YWluZXJcbiAgICBjdXJyZW50Q29udGFpbmVyLmFwcGVuZChsKTsgLy9wdXRpbmcgZWFjaCB0aW55Q2lyY2xlIGluc2lkZSBpdHMgcmlnaHQgY29udGFpbmVyXG5cbn0pO1xuXG5cbi8vY3JlYXRpbmcgZGl2IGZvciB0aGUgY29yb25hJ3MgZXllc1xuY29uc3QgZXllcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5leWVzLmNsYXNzTGlzdC5hZGQoJ2V5ZXMnLCAnY29yb25hJyk7XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGlueUNpcmNsZUNvbnRhaW5lcjEnKS5hcHBlbmQoZXllcyk7XG5cbi8vLy9jcmVhdGluZyBkaXZzIGZvciB0aGUgY29yb25hJ3MgZXllIHNoYWRlc1xuY29uc3QgeiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG5jb25zdCB5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbnouY2xhc3NMaXN0LmFkZCgnY29yb25hJywgJ2V5ZVNoYWRlcycpO1xueS5jbGFzc0xpc3QuYWRkKCdjb3JvbmEnLCAnZXllU2hhZGVzJyk7XG56LnNldEF0dHJpYnV0ZSgnaWQnLCAndG9wRXllc2hhZGUnKTtcbnkuc2V0QXR0cmlidXRlKCdpZCcsICdib3R0b21FeWVzaGFkZScpO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbnlDaXJjbGVDb250YWluZXIxJykuYXBwZW5kKHopO1xuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3RpbnlDaXJjbGVDb250YWluZXIxJykuYXBwZW5kKHkpO1xuXG5cbmV4cG9ydCB7IGJvZHksIGhlYWRlciwgY3Vyc29yLCBjb3JvbmFDaXJjbGUsIGV5ZXMgfTtcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUxID0gKGJ5dGUxIDw8IDIpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBvdXRwdXQucHVzaChvdXRCeXRlMSk7XHJcbiAgICAgICAgICAgIGlmIChieXRlMyAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMiA8PCA0KSAmIDB4ZjApIHwgKGJ5dGUzID4+IDIpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGJ5dGU0ICE9PSA2NCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUzID0gKChieXRlMyA8PCA2KSAmIDB4YzApIHwgYnl0ZTQ7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiBMYXp5IHN0YXRpYyBpbml0aWFsaXphdGlvbiBmdW5jdGlvbi4gQ2FsbGVkIGJlZm9yZVxyXG4gICAgICogYWNjZXNzaW5nIGFueSBvZiB0aGUgc3RhdGljIG1hcCB2YXJpYWJsZXMuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBpbml0XygpIHtcclxuICAgICAgICBpZiAoIXRoaXMuYnl0ZVRvQ2hhck1hcF8pIHtcclxuICAgICAgICAgICAgdGhpcy5ieXRlVG9DaGFyTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcFdlYlNhZmVfID0ge307XHJcbiAgICAgICAgICAgIC8vIFdlIHdhbnQgcXVpY2sgbWFwcGluZ3MgYmFjayBhbmQgZm9ydGgsIHNvIHdlIHByZWNvbXB1dGUgdHdvIG1hcHMuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5FTkNPREVEX1ZBTFMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF9baV0gPSB0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuYnl0ZVRvQ2hhck1hcF9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcFdlYlNhZmVfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXV0gPSBpO1xyXG4gICAgICAgICAgICAgICAgLy8gQmUgZm9yZ2l2aW5nIHdoZW4gZGVjb2RpbmcgYW5kIGNvcnJlY3RseSBkZWNvZGUgYm90aCBlbmNvZGluZ3MuXHJcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSB0aGlzLkVOQ09ERURfVkFMU19CQVNFLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hhclRvQnl0ZU1hcF9bdGhpcy5FTkNPREVEX1ZBTFNfV0VCU0FGRS5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlX1t0aGlzLkVOQ09ERURfVkFMUy5jaGFyQXQoaSldID0gaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRGVmZXJyZWQge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QgPSAoKSA9PiB7IH07XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QgPSByZWplY3Q7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE91ciBBUEkgaW50ZXJuYWxzIGFyZSBub3QgcHJvbWlzZWlmaWVkIGFuZCBjYW5ub3QgYmVjYXVzZSBvdXIgY2FsbGJhY2sgQVBJcyBoYXZlIHN1YnRsZSBleHBlY3RhdGlvbnMgYXJvdW5kXHJcbiAgICAgKiBpbnZva2luZyBwcm9taXNlcyBpbmxpbmUsIHdoaWNoIFByb21pc2VzIGFyZSBmb3JiaWRkZW4gdG8gZG8uIFRoaXMgbWV0aG9kIGFjY2VwdHMgYW4gb3B0aW9uYWwgbm9kZS1zdHlsZSBjYWxsYmFja1xyXG4gICAgICogYW5kIHJldHVybnMgYSBub2RlLXN0eWxlIGNhbGxiYWNrIHdoaWNoIHdpbGwgcmVzb2x2ZSBvciByZWplY3QgdGhlIERlZmVycmVkJ3MgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgd3JhcENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuIChlcnJvciwgdmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIC8vIEF0dGFjaGluZyBub29wIGhhbmRsZXIganVzdCBpbiBjYXNlIGRldmVsb3BlciB3YXNuJ3QgZXhwZWN0aW5nXHJcbiAgICAgICAgICAgICAgICAvLyBwcm9taXNlc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9taXNlLmNhdGNoKCgpID0+IHsgfSk7XHJcbiAgICAgICAgICAgICAgICAvLyBTb21lIG9mIG91ciBjYWxsYmFja3MgZG9uJ3QgZXhwZWN0IGEgdmFsdWUgYW5kIG91ciBvd24gdGVzdHNcclxuICAgICAgICAgICAgICAgIC8vIGFzc2VydCB0aGF0IHRoZSBwYXJhbWV0ZXIgbGVuZ3RoIGlzIDFcclxuICAgICAgICAgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhlcnJvciwgdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVNb2NrVXNlclRva2VuKHRva2VuLCBwcm9qZWN0SWQpIHtcclxuICAgIGlmICh0b2tlbi51aWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBcInVpZFwiIGZpZWxkIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQgYnkgbW9ja1VzZXJUb2tlbi4gUGxlYXNlIHVzZSBcInN1YlwiIGluc3RlYWQgZm9yIEZpcmViYXNlIEF1dGggVXNlciBJRC4nKTtcclxuICAgIH1cclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSBcIm5vbmVcIiBhcyB0aGUgYWxnb3JpdGhtLlxyXG4gICAgY29uc3QgaGVhZGVyID0ge1xyXG4gICAgICAgIGFsZzogJ25vbmUnLFxyXG4gICAgICAgIHR5cGU6ICdKV1QnXHJcbiAgICB9O1xyXG4gICAgY29uc3QgcHJvamVjdCA9IHByb2plY3RJZCB8fCAnZGVtby1wcm9qZWN0JztcclxuICAgIGNvbnN0IGlhdCA9IHRva2VuLmlhdCB8fCAwO1xyXG4gICAgY29uc3Qgc3ViID0gdG9rZW4uc3ViIHx8IHRva2VuLnVzZXJfaWQ7XHJcbiAgICBpZiAoIXN1Yikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIm1vY2tVc2VyVG9rZW4gbXVzdCBjb250YWluICdzdWInIG9yICd1c2VyX2lkJyBmaWVsZCFcIik7XHJcbiAgICB9XHJcbiAgICBjb25zdCBwYXlsb2FkID0gT2JqZWN0LmFzc2lnbih7IFxyXG4gICAgICAgIC8vIFNldCBhbGwgcmVxdWlyZWQgZmllbGRzIHRvIGRlY2VudCBkZWZhdWx0c1xyXG4gICAgICAgIGlzczogYGh0dHBzOi8vc2VjdXJldG9rZW4uZ29vZ2xlLmNvbS8ke3Byb2plY3R9YCwgYXVkOiBwcm9qZWN0LCBpYXQsIGV4cDogaWF0ICsgMzYwMCwgYXV0aF90aW1lOiBpYXQsIHN1YiwgdXNlcl9pZDogc3ViLCBmaXJlYmFzZToge1xyXG4gICAgICAgICAgICBzaWduX2luX3Byb3ZpZGVyOiAnY3VzdG9tJyxcclxuICAgICAgICAgICAgaWRlbnRpdGllczoge31cclxuICAgICAgICB9IH0sIHRva2VuKTtcclxuICAgIC8vIFVuc2VjdXJlZCBKV1RzIHVzZSB0aGUgZW1wdHkgc3RyaW5nIGFzIGEgc2lnbmF0dXJlLlxyXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gJyc7XHJcbiAgICByZXR1cm4gW1xyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KGhlYWRlcikpLFxyXG4gICAgICAgIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHBheWxvYWQpKSxcclxuICAgICAgICBzaWduYXR1cmVcclxuICAgIF0uam9pbignLicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIG5hdmlnYXRvci51c2VyQWdlbnQgc3RyaW5nIG9yICcnIGlmIGl0J3Mgbm90IGRlZmluZWQuXHJcbiAqIEByZXR1cm4gdXNlciBhZ2VudCBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIGdldFVBKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvclsndXNlckFnZW50J10gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvclsndXNlckFnZW50J107XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBDb3Jkb3ZhIC8gUGhvbmVHYXAgLyBJb25pYyBmcmFtZXdvcmtzIG9uIGEgbW9iaWxlIGRldmljZS5cclxuICpcclxuICogRGVsaWJlcmF0ZWx5IGRvZXMgbm90IHJlbHkgb24gY2hlY2tpbmcgYGZpbGU6Ly9gIFVSTHMgKGFzIHRoaXMgZmFpbHMgUGhvbmVHYXBcclxuICogaW4gdGhlIFJpcHBsZSBlbXVsYXRvcikgbm9yIENvcmRvdmEgYG9uRGV2aWNlUmVhZHlgLCB3aGljaCB3b3VsZCBub3JtYWxseVxyXG4gKiB3YWl0IGZvciBhIGNhbGxiYWNrLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNNb2JpbGVDb3Jkb3ZhKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmUgU2V0dGluZyB1cCBhbiBicm9hZGx5IGFwcGxpY2FibGUgaW5kZXggc2lnbmF0dXJlIGZvciBXaW5kb3dcclxuICAgICAgICAvLyBqdXN0IHRvIGRlYWwgd2l0aCB0aGlzIGNhc2Ugd291bGQgcHJvYmFibHkgYmUgYSBiYWQgaWRlYS5cclxuICAgICAgICAhISh3aW5kb3dbJ2NvcmRvdmEnXSB8fCB3aW5kb3dbJ3Bob25lZ2FwJ10gfHwgd2luZG93WydQaG9uZUdhcCddKSAmJlxyXG4gICAgICAgIC9pb3N8aXBob25lfGlwb2R8aXBhZHxhbmRyb2lkfGJsYWNrYmVycnl8aWVtb2JpbGUvaS50ZXN0KGdldFVBKCkpKTtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IE5vZGUuanMuXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBOb2RlLmpzIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuLy8gTm9kZSBkZXRlY3Rpb24gbG9naWMgZnJvbTogaHR0cHM6Ly9naXRodWIuY29tL2lsaWFrYW4vZGV0ZWN0LW5vZGUvXHJcbmZ1bmN0aW9uIGlzTm9kZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZ2xvYmFsLnByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXScpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBCcm93c2VyIEVudmlyb25tZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0Jyb3dzZXIoKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZjtcclxufVxyXG5mdW5jdGlvbiBpc0Jyb3dzZXJFeHRlbnNpb24oKSB7XHJcbiAgICBjb25zdCBydW50aW1lID0gdHlwZW9mIGNocm9tZSA9PT0gJ29iamVjdCdcclxuICAgICAgICA/IGNocm9tZS5ydW50aW1lXHJcbiAgICAgICAgOiB0eXBlb2YgYnJvd3NlciA9PT0gJ29iamVjdCdcclxuICAgICAgICAgICAgPyBicm93c2VyLnJ1bnRpbWVcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdHlwZW9mIHJ1bnRpbWUgPT09ICdvYmplY3QnICYmIHJ1bnRpbWUuaWQgIT09IHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IFJlYWN0IE5hdGl2ZS5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIFJlYWN0TmF0aXZlIGVudmlyb25tZW50IGlzIGRldGVjdGVkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNSZWFjdE5hdGl2ZSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ29iamVjdCcgJiYgbmF2aWdhdG9yWydwcm9kdWN0J10gPT09ICdSZWFjdE5hdGl2ZScpO1xyXG59XHJcbi8qKiBEZXRlY3RzIEVsZWN0cm9uIGFwcHMuICovXHJcbmZ1bmN0aW9uIGlzRWxlY3Ryb24oKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdFbGVjdHJvbi8nKSA+PSAwO1xyXG59XHJcbi8qKiBEZXRlY3RzIEludGVybmV0IEV4cGxvcmVyLiAqL1xyXG5mdW5jdGlvbiBpc0lFKCkge1xyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpO1xyXG4gICAgcmV0dXJuIHVhLmluZGV4T2YoJ01TSUUgJykgPj0gMCB8fCB1YS5pbmRleE9mKCdUcmlkZW50LycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgVW5pdmVyc2FsIFdpbmRvd3MgUGxhdGZvcm0gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNVV1AoKSB7XHJcbiAgICByZXR1cm4gZ2V0VUEoKS5pbmRleE9mKCdNU0FwcEhvc3QvJykgPj0gMDtcclxufVxyXG4vKipcclxuICogRGV0ZWN0IHdoZXRoZXIgdGhlIGN1cnJlbnQgU0RLIGJ1aWxkIGlzIHRoZSBOb2RlIHZlcnNpb24uXHJcbiAqXHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpdCdzIHRoZSBOb2RlIFNESyBidWlsZC5cclxuICovXHJcbmZ1bmN0aW9uIGlzTm9kZVNkaygpIHtcclxuICAgIHJldHVybiBDT05TVEFOVFMuTk9ERV9DTElFTlQgPT09IHRydWUgfHwgQ09OU1RBTlRTLk5PREVfQURNSU4gPT09IHRydWU7XHJcbn1cclxuLyoqIFJldHVybnMgdHJ1ZSBpZiB3ZSBhcmUgcnVubmluZyBpbiBTYWZhcmkuICovXHJcbmZ1bmN0aW9uIGlzU2FmYXJpKCkge1xyXG4gICAgcmV0dXJuICghaXNOb2RlKCkgJiZcclxuICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdTYWZhcmknKSAmJlxyXG4gICAgICAgICFuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdDaHJvbWUnKSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgbWV0aG9kIGNoZWNrcyBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqIEByZXR1cm4gdHJ1ZSBpZiBpbmRleGVkREIgaXMgc3VwcG9ydGVkIGJ5IGN1cnJlbnQgYnJvd3Nlci9zZXJ2aWNlIHdvcmtlciBjb250ZXh0XHJcbiAqL1xyXG5mdW5jdGlvbiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgaW5kZXhlZERCID09PSAnb2JqZWN0JztcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0R2xvYmFsKCkge1xyXG4gICAgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBzZWxmO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWw7XHJcbiAgICB9XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBsb2NhdGUgZ2xvYmFsIG9iamVjdC4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTdGFuZGFyZGl6ZWQgRmlyZWJhc2UgRXJyb3IuXHJcbiAqXHJcbiAqIFVzYWdlOlxyXG4gKlxyXG4gKiAgIC8vIFR5cGVzY3JpcHQgc3RyaW5nIGxpdGVyYWxzIGZvciB0eXBlLXNhZmUgY29kZXNcclxuICogICB0eXBlIEVyciA9XHJcbiAqICAgICAndW5rbm93bicgfFxyXG4gKiAgICAgJ29iamVjdC1ub3QtZm91bmQnXHJcbiAqICAgICA7XHJcbiAqXHJcbiAqICAgLy8gQ2xvc3VyZSBlbnVtIGZvciB0eXBlLXNhZmUgZXJyb3IgY29kZXNcclxuICogICAvLyBhdC1lbnVtIHtzdHJpbmd9XHJcbiAqICAgdmFyIEVyciA9IHtcclxuICogICAgIFVOS05PV046ICd1bmtub3duJyxcclxuICogICAgIE9CSkVDVF9OT1RfRk9VTkQ6ICdvYmplY3Qtbm90LWZvdW5kJyxcclxuICogICB9XHJcbiAqXHJcbiAqICAgbGV0IGVycm9yczogTWFwPEVyciwgc3RyaW5nPiA9IHtcclxuICogICAgICdnZW5lcmljLWVycm9yJzogXCJVbmtub3duIGVycm9yXCIsXHJcbiAqICAgICAnZmlsZS1ub3QtZm91bmQnOiBcIkNvdWxkIG5vdCBmaW5kIGZpbGU6IHskZmlsZX1cIixcclxuICogICB9O1xyXG4gKlxyXG4gKiAgIC8vIFR5cGUtc2FmZSBmdW5jdGlvbiAtIG11c3QgcGFzcyBhIHZhbGlkIGVycm9yIGNvZGUgYXMgcGFyYW0uXHJcbiAqICAgbGV0IGVycm9yID0gbmV3IEVycm9yRmFjdG9yeTxFcnI+KCdzZXJ2aWNlJywgJ1NlcnZpY2UnLCBlcnJvcnMpO1xyXG4gKlxyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuR0VORVJJQyk7XHJcbiAqICAgLi4uXHJcbiAqICAgdGhyb3cgZXJyb3IuY3JlYXRlKEVyci5GSUxFX05PVF9GT1VORCwgeydmaWxlJzogZmlsZU5hbWV9KTtcclxuICogICAuLi5cclxuICogICAvLyBTZXJ2aWNlOiBDb3VsZCBub3QgZmlsZSBmaWxlOiBmb28udHh0IChzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kKS5cclxuICpcclxuICogICBjYXRjaCAoZSkge1xyXG4gKiAgICAgYXNzZXJ0KGUubWVzc2FnZSA9PT0gXCJDb3VsZCBub3QgZmluZCBmaWxlOiBmb28udHh0LlwiKTtcclxuICogICAgIGlmIChlLmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybnMgYSBxdWVyeXN0cmluZy1mb3JtYXR0ZWQgc3RyaW5nIChlLmcuICZhcmc9dmFsJmFyZzI9dmFsMikgZnJvbSBhXHJcbiAqIHBhcmFtcyBvYmplY3QgKGUuZy4ge2FyZzogJ3ZhbCcsIGFyZzI6ICd2YWwyJ30pXHJcbiAqIE5vdGU6IFlvdSBtdXN0IHByZXBlbmQgaXQgd2l0aCA/IHdoZW4gYWRkaW5nIGl0IHRvIGEgVVJMLlxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmcocXVlcnlzdHJpbmdQYXJhbXMpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IFtdO1xyXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMocXVlcnlzdHJpbmdQYXJhbXMpKSB7XHJcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHZhbHVlLmZvckVhY2goYXJyYXlWYWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KGtleSkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQoYXJyYXlWYWwpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwYXJhbXMubGVuZ3RoID8gJyYnICsgcGFyYW1zLmpvaW4oJyYnKSA6ICcnO1xyXG59XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgcXVlcnlzdHJpbmcgKGUuZy4gP2FyZz12YWwmYXJnMj12YWwyKSBpbnRvIGEgcGFyYW1zIG9iamVjdFxyXG4gKiAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICovXHJcbmZ1bmN0aW9uIHF1ZXJ5c3RyaW5nRGVjb2RlKHF1ZXJ5c3RyaW5nKSB7XHJcbiAgICBjb25zdCBvYmogPSB7fTtcclxuICAgIGNvbnN0IHRva2VucyA9IHF1ZXJ5c3RyaW5nLnJlcGxhY2UoL15cXD8vLCAnJykuc3BsaXQoJyYnKTtcclxuICAgIHRva2Vucy5mb3JFYWNoKHRva2VuID0+IHtcclxuICAgICAgICBpZiAodG9rZW4pIHtcclxuICAgICAgICAgICAgY29uc3QgW2tleSwgdmFsdWVdID0gdG9rZW4uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgb2JqW2RlY29kZVVSSUNvbXBvbmVudChrZXkpXSA9IGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gb2JqO1xyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0IHRoZSBxdWVyeSBzdHJpbmcgcGFydCBvZiBhIFVSTCwgaW5jbHVkaW5nIHRoZSBsZWFkaW5nIHF1ZXN0aW9uIG1hcmsgKGlmIHByZXNlbnQpLlxyXG4gKi9cclxuZnVuY3Rpb24gZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkge1xyXG4gICAgY29uc3QgcXVlcnlTdGFydCA9IHVybC5pbmRleE9mKCc/Jyk7XHJcbiAgICBpZiAoIXF1ZXJ5U3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFnbWVudFN0YXJ0ID0gdXJsLmluZGV4T2YoJyMnLCBxdWVyeVN0YXJ0KTtcclxuICAgIHJldHVybiB1cmwuc3Vic3RyaW5nKHF1ZXJ5U3RhcnQsIGZyYWdtZW50U3RhcnQgPiAwID8gZnJhZ21lbnRTdGFydCA6IHVuZGVmaW5lZCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoLlxyXG4gKiBWYXJpYWJsZSBuYW1lcyBmb2xsb3cgdGhlIG5vdGF0aW9uIGluIEZJUFMgUFVCIDE4MC0zOlxyXG4gKiBodHRwOi8vY3NyYy5uaXN0Lmdvdi9wdWJsaWNhdGlvbnMvZmlwcy9maXBzMTgwLTMvZmlwczE4MC0zX2ZpbmFsLnBkZi5cclxuICpcclxuICogVXNhZ2U6XHJcbiAqICAgdmFyIHNoYTEgPSBuZXcgc2hhMSgpO1xyXG4gKiAgIHNoYTEudXBkYXRlKGJ5dGVzKTtcclxuICogICB2YXIgaGFzaCA9IHNoYTEuZGlnZXN0KCk7XHJcbiAqXHJcbiAqIFBlcmZvcm1hbmNlOlxyXG4gKiAgIENocm9tZSAyMzogICB+NDAwIE1iaXQvc1xyXG4gKiAgIEZpcmVmb3ggMTY6ICB+MjUwIE1iaXQvc1xyXG4gKlxyXG4gKi9cclxuLyoqXHJcbiAqIFNIQS0xIGNyeXB0b2dyYXBoaWMgaGFzaCBjb25zdHJ1Y3Rvci5cclxuICpcclxuICogVGhlIHByb3BlcnRpZXMgZGVjbGFyZWQgaGVyZSBhcmUgZGlzY3Vzc2VkIGluIHRoZSBhYm92ZSBhbGdvcml0aG0gZG9jdW1lbnQuXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKiBAZmluYWxcclxuICogQHN0cnVjdFxyXG4gKi9cclxuY2xhc3MgU2hhMSB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIb2xkcyB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIGFjY3VtdWxhdGVkIHZhcmlhYmxlcyBhLWUgaW4gdGhlIGNvbXByZXNzX1xyXG4gICAgICAgICAqIGZ1bmN0aW9uLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5jaGFpbl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBIGJ1ZmZlciBob2xkaW5nIHRoZSBwYXJ0aWFsbHkgY29tcHV0ZWQgaGFzaCByZXN1bHQuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmJ1Zl8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBbiBhcnJheSBvZiA4MCBieXRlcywgZWFjaCBhIHBhcnQgb2YgdGhlIG1lc3NhZ2UgdG8gYmUgaGFzaGVkLiAgUmVmZXJyZWQgdG9cclxuICAgICAgICAgKiBhcyB0aGUgbWVzc2FnZSBzY2hlZHVsZSBpbiB0aGUgZG9jcy5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuV18gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb250YWlucyBkYXRhIG5lZWRlZCB0byBwYWQgbWVzc2FnZXMgbGVzcyB0aGFuIDY0IGJ5dGVzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wYWRfID0gW107XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQHByaXZhdGUge251bWJlcn1cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICAgICAgdGhpcy5ibG9ja1NpemUgPSA1MTIgLyA4O1xyXG4gICAgICAgIHRoaXMucGFkX1swXSA9IDEyODtcclxuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRoaXMuYmxvY2tTaXplOyArK2kpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWRfW2ldID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfVxyXG4gICAgcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMF0gPSAweDY3NDUyMzAxO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gMHhlZmNkYWI4OTtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9IDB4OThiYWRjZmU7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bM10gPSAweDEwMzI1NDc2O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gMHhjM2QyZTFmMDtcclxuICAgICAgICB0aGlzLmluYnVmXyA9IDA7XHJcbiAgICAgICAgdGhpcy50b3RhbF8gPSAwO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbnRlcm5hbCBjb21wcmVzcyBoZWxwZXIgZnVuY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gYnVmIEJsb2NrIHRvIGNvbXByZXNzLlxyXG4gICAgICogQHBhcmFtIG9mZnNldCBPZmZzZXQgb2YgdGhlIGJsb2NrIGluIHRoZSBidWZmZXIuXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb21wcmVzc18oYnVmLCBvZmZzZXQpIHtcclxuICAgICAgICBpZiAoIW9mZnNldCkge1xyXG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBXID0gdGhpcy5XXztcclxuICAgICAgICAvLyBnZXQgMTYgYmlnIGVuZGlhbiB3b3Jkc1xyXG4gICAgICAgIGlmICh0eXBlb2YgYnVmID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE8odXNlcik6IFtidWcgODE0MDEyMl0gUmVjZW50IHZlcnNpb25zIG9mIFNhZmFyaSBmb3IgTWFjIE9TIGFuZCBpT1NcclxuICAgICAgICAgICAgICAgIC8vIGhhdmUgYSBidWcgdGhhdCB0dXJucyB0aGUgcG9zdC1pbmNyZW1lbnQgKysgb3BlcmF0b3IgaW50byBwcmUtaW5jcmVtZW50XHJcbiAgICAgICAgICAgICAgICAvLyBkdXJpbmcgSklUIGNvbXBpbGF0aW9uLiAgV2UgaGF2ZSBjb2RlIHRoYXQgZGVwZW5kcyBoZWF2aWx5IG9uIFNIQS0xIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gY29ycmVjdG5lc3MgYW5kIHdoaWNoIGlzIGFmZmVjdGVkIGJ5IHRoaXMgYnVnLCBzbyBJJ3ZlIHJlbW92ZWQgYWxsIHVzZXNcclxuICAgICAgICAgICAgICAgIC8vIG9mIHBvc3QtaW5jcmVtZW50ICsrIGluIHdoaWNoIHRoZSByZXN1bHQgdmFsdWUgaXMgdXNlZC4gIFdlIGNhbiByZXZlcnRcclxuICAgICAgICAgICAgICAgIC8vIHRoaXMgY2hhbmdlIG9uY2UgdGhlIFNhZmFyaSBidWdcclxuICAgICAgICAgICAgICAgIC8vIChodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTA5MDM2KSBoYXMgYmVlbiBmaXhlZCBhbmRcclxuICAgICAgICAgICAgICAgIC8vIG1vc3QgY2xpZW50cyBoYXZlIGJlZW4gdXBkYXRlZC5cclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQpIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAxKSA8PCAxNikgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmLmNoYXJDb2RlQXQob2Zmc2V0ICsgMikgPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWYuY2hhckNvZGVBdChvZmZzZXQgKyAzKTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDE2OyBpKyspIHtcclxuICAgICAgICAgICAgICAgIFdbaV0gPVxyXG4gICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0XSA8PCAyNCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoYnVmW29mZnNldCArIDFdIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMl0gPDwgOCkgfFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBidWZbb2Zmc2V0ICsgM107XHJcbiAgICAgICAgICAgICAgICBvZmZzZXQgKz0gNDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBleHBhbmQgdG8gODAgd29yZHNcclxuICAgICAgICBmb3IgKGxldCBpID0gMTY7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSBXW2kgLSAzXSBeIFdbaSAtIDhdIF4gV1tpIC0gMTRdIF4gV1tpIC0gMTZdO1xyXG4gICAgICAgICAgICBXW2ldID0gKCh0IDw8IDEpIHwgKHQgPj4+IDMxKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYSA9IHRoaXMuY2hhaW5fWzBdO1xyXG4gICAgICAgIGxldCBiID0gdGhpcy5jaGFpbl9bMV07XHJcbiAgICAgICAgbGV0IGMgPSB0aGlzLmNoYWluX1syXTtcclxuICAgICAgICBsZXQgZCA9IHRoaXMuY2hhaW5fWzNdO1xyXG4gICAgICAgIGxldCBlID0gdGhpcy5jaGFpbl9bNF07XHJcbiAgICAgICAgbGV0IGYsIGs7XHJcbiAgICAgICAgLy8gVE9ETyh1c2VyKTogVHJ5IHRvIHVucm9sbCB0aGlzIGxvb3AgdG8gc3BlZWQgdXAgdGhlIGNvbXB1dGF0aW9uLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODA7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoaSA8IDQwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaSA8IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGQgXiAoYiAmIChjIF4gZCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDVhODI3OTk5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZiA9IGIgXiBjIF4gZDtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg2ZWQ5ZWJhMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgNjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gKGIgJiBjKSB8IChkICYgKGIgfCBjKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4OGYxYmJjZGM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweGNhNjJjMWQ2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IHQgPSAoKChhIDw8IDUpIHwgKGEgPj4+IDI3KSkgKyBmICsgZSArIGsgKyBXW2ldKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgICAgIGUgPSBkO1xyXG4gICAgICAgICAgICBkID0gYztcclxuICAgICAgICAgICAgYyA9ICgoYiA8PCAzMCkgfCAoYiA+Pj4gMikpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgYiA9IGE7XHJcbiAgICAgICAgICAgIGEgPSB0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9ICh0aGlzLmNoYWluX1swXSArIGEpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1sxXSA9ICh0aGlzLmNoYWluX1sxXSArIGIpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1syXSA9ICh0aGlzLmNoYWluX1syXSArIGMpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9ICh0aGlzLmNoYWluX1szXSArIGQpICYgMHhmZmZmZmZmZjtcclxuICAgICAgICB0aGlzLmNoYWluX1s0XSA9ICh0aGlzLmNoYWluX1s0XSArIGUpICYgMHhmZmZmZmZmZjtcclxuICAgIH1cclxuICAgIHVwZGF0ZShieXRlcywgbGVuZ3RoKSB7XHJcbiAgICAgICAgLy8gVE9ETyhqb2hubGVueik6IHRpZ2h0ZW4gdGhlIGZ1bmN0aW9uIHNpZ25hdHVyZSBhbmQgcmVtb3ZlIHRoaXMgY2hlY2tcclxuICAgICAgICBpZiAoYnl0ZXMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBsZW5ndGggPSBieXRlcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGxlbmd0aE1pbnVzQmxvY2sgPSBsZW5ndGggLSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgLy8gVXNpbmcgbG9jYWwgaW5zdGVhZCBvZiBtZW1iZXIgdmFyaWFibGVzIGdpdmVzIH41JSBzcGVlZHVwIG9uIEZpcmVmb3ggMTYuXHJcbiAgICAgICAgY29uc3QgYnVmID0gdGhpcy5idWZfO1xyXG4gICAgICAgIGxldCBpbmJ1ZiA9IHRoaXMuaW5idWZfO1xyXG4gICAgICAgIC8vIFRoZSBvdXRlciB3aGlsZSBsb29wIHNob3VsZCBleGVjdXRlIGF0IG1vc3QgdHdpY2UuXHJcbiAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gV2hlbiB3ZSBoYXZlIG5vIGRhdGEgaW4gdGhlIGJsb2NrIHRvIHRvcCB1cCwgd2UgY2FuIGRpcmVjdGx5IHByb2Nlc3MgdGhlXHJcbiAgICAgICAgICAgIC8vIGlucHV0IGJ1ZmZlciAoYXNzdW1pbmcgaXQgY29udGFpbnMgc3VmZmljaWVudCBkYXRhKS4gVGhpcyBnaXZlcyB+MjUlXHJcbiAgICAgICAgICAgIC8vIHNwZWVkdXAgb24gQ2hyb21lIDIzIGFuZCB+MTUlIHNwZWVkdXAgb24gRmlyZWZveCAxNiwgYnV0IHJlcXVpcmVzIHRoYXRcclxuICAgICAgICAgICAgLy8gdGhlIGRhdGEgaXMgcHJvdmlkZWQgaW4gbGFyZ2UgY2h1bmtzIChvciBpbiBtdWx0aXBsZXMgb2YgNjQgYnl0ZXMpLlxyXG4gICAgICAgICAgICBpZiAoaW5idWYgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDw9IGxlbmd0aE1pbnVzQmxvY2spIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbXByZXNzXyhieXRlcywgbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbiArPSB0aGlzLmJsb2NrU2l6ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGJ5dGVzID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPCBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBidWZbaW5idWZdID0gYnl0ZXMuY2hhckNvZGVBdChuKTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlc1tuXTtcclxuICAgICAgICAgICAgICAgICAgICArK2luYnVmO1xyXG4gICAgICAgICAgICAgICAgICAgICsrbjtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5idWYgPT09IHRoaXMuYmxvY2tTaXplKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ1Zik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluYnVmID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSnVtcCB0byB0aGUgb3V0ZXIgbG9vcCBzbyB3ZSB1c2UgdGhlIGZ1bGwtYmxvY2sgb3B0aW1pemF0aW9uLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbmJ1Zl8gPSBpbmJ1ZjtcclxuICAgICAgICB0aGlzLnRvdGFsXyArPSBsZW5ndGg7XHJcbiAgICB9XHJcbiAgICAvKiogQG92ZXJyaWRlICovXHJcbiAgICBkaWdlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgZGlnZXN0ID0gW107XHJcbiAgICAgICAgbGV0IHRvdGFsQml0cyA9IHRoaXMudG90YWxfICogODtcclxuICAgICAgICAvLyBBZGQgcGFkIDB4ODAgMHgwMCouXHJcbiAgICAgICAgaWYgKHRoaXMuaW5idWZfIDwgNTYpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCA1NiAtIHRoaXMuaW5idWZfKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKHRoaXMucGFkXywgdGhpcy5ibG9ja1NpemUgLSAodGhpcy5pbmJ1Zl8gLSA1NikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBZGQgIyBiaXRzLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSB0aGlzLmJsb2NrU2l6ZSAtIDE7IGkgPj0gNTY7IGktLSkge1xyXG4gICAgICAgICAgICB0aGlzLmJ1Zl9baV0gPSB0b3RhbEJpdHMgJiAyNTU7XHJcbiAgICAgICAgICAgIHRvdGFsQml0cyAvPSAyNTY7IC8vIERvbid0IHVzZSBiaXQtc2hpZnRpbmcgaGVyZSFcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb21wcmVzc18odGhpcy5idWZfKTtcclxuICAgICAgICBsZXQgbiA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI0OyBqID49IDA7IGogLT0gOCkge1xyXG4gICAgICAgICAgICAgICAgZGlnZXN0W25dID0gKHRoaXMuY2hhaW5fW2ldID4+IGopICYgMjU1O1xyXG4gICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBkaWdlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEhlbHBlciB0byBtYWtlIGEgU3Vic2NyaWJlIGZ1bmN0aW9uIChqdXN0IGxpa2UgUHJvbWlzZSBoZWxwcyBtYWtlIGFcclxuICogVGhlbmFibGUpLlxyXG4gKlxyXG4gKiBAcGFyYW0gZXhlY3V0b3IgRnVuY3Rpb24gd2hpY2ggY2FuIG1ha2UgY2FsbHMgdG8gYSBzaW5nbGUgT2JzZXJ2ZXJcclxuICogICAgIGFzIGEgcHJveHkuXHJcbiAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZVN1YnNjcmliZShleGVjdXRvciwgb25Ob09ic2VydmVycykge1xyXG4gICAgY29uc3QgcHJveHkgPSBuZXcgT2JzZXJ2ZXJQcm94eShleGVjdXRvciwgb25Ob09ic2VydmVycyk7XHJcbiAgICByZXR1cm4gcHJveHkuc3Vic2NyaWJlLmJpbmQocHJveHkpO1xyXG59XHJcbi8qKlxyXG4gKiBJbXBsZW1lbnQgZmFuLW91dCBmb3IgYW55IG51bWJlciBvZiBPYnNlcnZlcnMgYXR0YWNoZWQgdmlhIGEgc3Vic2NyaWJlXHJcbiAqIGZ1bmN0aW9uLlxyXG4gKi9cclxuY2xhc3MgT2JzZXJ2ZXJQcm94eSB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gICAgICogICAgIGFzIGEgcHJveHkuXHJcbiAgICAgKiBAcGFyYW0gb25Ob09ic2VydmVycyBDYWxsYmFjayB3aGVuIGNvdW50IG9mIE9ic2VydmVycyBnb2VzIHRvIHplcm8uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBbXTtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlcyA9IFtdO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCA9IDA7XHJcbiAgICAgICAgLy8gTWljcm8tdGFzayBzY2hlZHVsaW5nIGJ5IGNhbGxpbmcgdGFzay50aGVuKCkuXHJcbiAgICAgICAgdGhpcy50YXNrID0gUHJvbWlzZS5yZXNvbHZlKCk7XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSBvbk5vT2JzZXJ2ZXJzO1xyXG4gICAgICAgIC8vIENhbGwgdGhlIGV4ZWN1dG9yIGFzeW5jaHJvbm91c2x5IHNvIHN1YnNjcmliZXJzIHRoYXQgYXJlIGNhbGxlZFxyXG4gICAgICAgIC8vIHN5bmNocm9ub3VzbHkgYWZ0ZXIgdGhlIGNyZWF0aW9uIG9mIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb25cclxuICAgICAgICAvLyBjYW4gc3RpbGwgcmVjZWl2ZSB0aGUgdmVyeSBmaXJzdCB2YWx1ZSBnZW5lcmF0ZWQgaW4gdGhlIGV4ZWN1dG9yLlxyXG4gICAgICAgIHRoaXMudGFza1xyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dG9yKHRoaXMpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvcihlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5leHQodmFsdWUpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jbG9zZShlcnJvcik7XHJcbiAgICB9XHJcbiAgICBjb21wbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLmZvckVhY2hPYnNlcnZlcigob2JzZXJ2ZXIpID0+IHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkIHRvIGFkZCBhbiBPYnNlcnZlciB0byB0aGUgZmFuLW91dCBsaXN0LlxyXG4gICAgICpcclxuICAgICAqIC0gV2UgcmVxdWlyZSB0aGF0IG5vIGV2ZW50IGlzIHNlbnQgdG8gYSBzdWJzY3JpYmVyIHN5Y2hyb25vdXNseSB0byB0aGVpclxyXG4gICAgICogICBjYWxsIHRvIHN1YnNjcmliZSgpLlxyXG4gICAgICovXHJcbiAgICBzdWJzY3JpYmUobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgICAgIGxldCBvYnNlcnZlcjtcclxuICAgICAgICBpZiAobmV4dE9yT2JzZXJ2ZXIgPT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgICAgICBlcnJvciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGNvbXBsZXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIE9ic2VydmVyLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBBc3NlbWJsZSBhbiBPYnNlcnZlciBvYmplY3Qgd2hlbiBwYXNzZWQgYXMgY2FsbGJhY2sgZnVuY3Rpb25zLlxyXG4gICAgICAgIGlmIChpbXBsZW1lbnRzQW55TWV0aG9kcyhuZXh0T3JPYnNlcnZlciwgW1xyXG4gICAgICAgICAgICAnbmV4dCcsXHJcbiAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICdjb21wbGV0ZSdcclxuICAgICAgICBdKSkge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IG5leHRPck9ic2VydmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0OiBuZXh0T3JPYnNlcnZlcixcclxuICAgICAgICAgICAgICAgIGVycm9yLFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLm5leHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0ID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9ic2VydmVyLmVycm9yID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3ViID0gdGhpcy51bnN1YnNjcmliZU9uZS5iaW5kKHRoaXMsIHRoaXMub2JzZXJ2ZXJzLmxlbmd0aCk7XHJcbiAgICAgICAgLy8gQXR0ZW1wdCB0byBzdWJzY3JpYmUgdG8gYSB0ZXJtaW5hdGVkIE9ic2VydmFibGUgLSB3ZVxyXG4gICAgICAgIC8vIGp1c3QgcmVzcG9uZCB0byB0aGUgT2JzZXJ2ZXIgd2l0aCB0aGUgZmluYWwgZXJyb3Igb3IgY29tcGxldGVcclxuICAgICAgICAvLyBldmVudC5cclxuICAgICAgICBpZiAodGhpcy5maW5hbGl6ZWQpIHtcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZpbmFsRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IodGhpcy5maW5hbEVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBub3RoaW5nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm9ic2VydmVycy5wdXNoKG9ic2VydmVyKTtcclxuICAgICAgICByZXR1cm4gdW5zdWI7XHJcbiAgICB9XHJcbiAgICAvLyBVbnN1YnNjcmliZSBpcyBzeW5jaHJvbm91cyAtIHdlIGd1YXJhbnRlZSB0aGF0IG5vIGV2ZW50cyBhcmUgc2VudCB0b1xyXG4gICAgLy8gYW55IHVuc3Vic2NyaWJlZCBPYnNlcnZlci5cclxuICAgIHVuc3Vic2NyaWJlT25lKGkpIHtcclxuICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgPT09IHVuZGVmaW5lZCB8fCB0aGlzLm9ic2VydmVyc1tpXSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVsZXRlIHRoaXMub2JzZXJ2ZXJzW2ldO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJDb3VudCAtPSAxO1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVyQ291bnQgPT09IDAgJiYgdGhpcy5vbk5vT2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzKHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvckVhY2hPYnNlcnZlcihmbikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBBbHJlYWR5IGNsb3NlZCBieSBwcmV2aW91cyBldmVudC4uLi5qdXN0IGVhdCB0aGUgYWRkaXRpb25hbCB2YWx1ZXMuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2luY2Ugc2VuZE9uZSBjYWxscyBhc3luY2hyb25vdXNseSAtIHRoZXJlIGlzIG5vIGNoYW5jZSB0aGF0XHJcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlcnMgd2lsbCBiZWNvbWUgdW5kZWZpbmVkLlxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vYnNlcnZlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5zZW5kT25lKGksIGZuKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBDYWxsIHRoZSBPYnNlcnZlciB2aWEgb25lIG9mIGl0J3MgY2FsbGJhY2sgZnVuY3Rpb24uIFdlIGFyZSBjYXJlZnVsIHRvXHJcbiAgICAvLyBjb25maXJtIHRoYXQgdGhlIG9ic2VydmUgaGFzIG5vdCBiZWVuIHVuc3Vic2NyaWJlZCBzaW5jZSB0aGlzIGFzeW5jaHJvbm91c1xyXG4gICAgLy8gZnVuY3Rpb24gaGFkIGJlZW4gcXVldWVkLlxyXG4gICAgc2VuZE9uZShpLCBmbikge1xyXG4gICAgICAgIC8vIEV4ZWN1dGUgdGhlIGNhbGxiYWNrIGFzeW5jaHJvbm91c2x5XHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJzICE9PSB1bmRlZmluZWQgJiYgdGhpcy5vYnNlcnZlcnNbaV0gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBmbih0aGlzLm9ic2VydmVyc1tpXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSBleGNlcHRpb25zIHJhaXNlZCBpbiBPYnNlcnZlcnMgb3IgbWlzc2luZyBtZXRob2RzIG9mIGFuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT2JzZXJ2ZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gTG9nIGVycm9yIHRvIGNvbnNvbGUuIGIvMzE0MDQ4MDZcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGUuZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsb3NlKGVycikge1xyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZmluYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAoZXJyICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5maW5hbEVycm9yID0gZXJyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcm94eSBpcyBubyBsb25nZXIgbmVlZGVkIC0gZ2FyYmFnZSBjb2xsZWN0IHJlZmVyZW5jZXNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9ic2VydmVycyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgdGhpcy5vbk5vT2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKiBUdXJuIHN5bmNocm9ub3VzIGZ1bmN0aW9uIGludG8gb25lIGNhbGxlZCBhc3luY2hyb25vdXNseS4gKi9cclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuZnVuY3Rpb24gYXN5bmMoZm4sIG9uRXJyb3IpIHtcclxuICAgIHJldHVybiAoLi4uYXJncykgPT4ge1xyXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSh0cnVlKVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGZuKC4uLmFyZ3MpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKG9uRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG9uRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm4gdHJ1ZSBpZiB0aGUgb2JqZWN0IHBhc3NlZCBpbiBpbXBsZW1lbnRzIGFueSBvZiB0aGUgbmFtZWQgbWV0aG9kcy5cclxuICovXHJcbmZ1bmN0aW9uIGltcGxlbWVudHNBbnlNZXRob2RzKG9iaiwgbWV0aG9kcykge1xyXG4gICAgaWYgKHR5cGVvZiBvYmogIT09ICdvYmplY3QnIHx8IG9iaiA9PT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWV0aG9kIG9mIG1ldGhvZHMpIHtcclxuICAgICAgICBpZiAobWV0aG9kIGluIG9iaiAmJiB0eXBlb2Ygb2JqW21ldGhvZF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcbmZ1bmN0aW9uIG5vb3AoKSB7XHJcbiAgICAvLyBkbyBub3RoaW5nXHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENoZWNrIHRvIG1ha2Ugc3VyZSB0aGUgYXBwcm9wcmlhdGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgZm9yIGEgcHVibGljIGZ1bmN0aW9uLlxyXG4gKiBUaHJvd3MgYW4gZXJyb3IgaWYgaXQgZmFpbHMuXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIG1pbkNvdW50IFRoZSBtaW5pbXVtIG51bWJlciBvZiBhcmd1bWVudHMgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBtYXhDb3VudCBUaGUgbWF4aW11bSBudW1iZXIgb2YgYXJndW1lbnQgdG8gYWxsb3cgZm9yIHRoZSBmdW5jdGlvbiBjYWxsXHJcbiAqIEBwYXJhbSBhcmdDb3VudCBUaGUgYWN0dWFsIG51bWJlciBvZiBhcmd1bWVudHMgcHJvdmlkZWQuXHJcbiAqL1xyXG5jb25zdCB2YWxpZGF0ZUFyZ0NvdW50ID0gZnVuY3Rpb24gKGZuTmFtZSwgbWluQ291bnQsIG1heENvdW50LCBhcmdDb3VudCkge1xyXG4gICAgbGV0IGFyZ0Vycm9yO1xyXG4gICAgaWYgKGFyZ0NvdW50IDwgbWluQ291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9ICdhdCBsZWFzdCAnICsgbWluQ291bnQ7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhcmdDb3VudCA+IG1heENvdW50KSB7XHJcbiAgICAgICAgYXJnRXJyb3IgPSBtYXhDb3VudCA9PT0gMCA/ICdub25lJyA6ICdubyBtb3JlIHRoYW4gJyArIG1heENvdW50O1xyXG4gICAgfVxyXG4gICAgaWYgKGFyZ0Vycm9yKSB7XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBmbk5hbWUgK1xyXG4gICAgICAgICAgICAnIGZhaWxlZDogV2FzIGNhbGxlZCB3aXRoICcgK1xyXG4gICAgICAgICAgICBhcmdDb3VudCArXHJcbiAgICAgICAgICAgIChhcmdDb3VudCA9PT0gMSA/ICcgYXJndW1lbnQuJyA6ICcgYXJndW1lbnRzLicpICtcclxuICAgICAgICAgICAgJyBFeHBlY3RzICcgK1xyXG4gICAgICAgICAgICBhcmdFcnJvciArXHJcbiAgICAgICAgICAgICcuJztcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogR2VuZXJhdGVzIGEgc3RyaW5nIHRvIHByZWZpeCBhbiBlcnJvciBtZXNzYWdlIGFib3V0IGZhaWxlZCBhcmd1bWVudCB2YWxpZGF0aW9uXHJcbiAqXHJcbiAqIEBwYXJhbSBmbk5hbWUgVGhlIGZ1bmN0aW9uIG5hbWVcclxuICogQHBhcmFtIGFyZ05hbWUgVGhlIG5hbWUgb2YgdGhlIGFyZ3VtZW50XHJcbiAqIEByZXR1cm4gVGhlIHByZWZpeCB0byBhZGQgdG8gdGhlIGVycm9yIHRocm93biBmb3IgdmFsaWRhdGlvbi5cclxuICovXHJcbmZ1bmN0aW9uIGVycm9yUHJlZml4KGZuTmFtZSwgYXJnTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke2ZuTmFtZX0gZmFpbGVkOiAke2FyZ05hbWV9IGFyZ3VtZW50IGA7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSBmbk5hbWVcclxuICogQHBhcmFtIGFyZ3VtZW50TnVtYmVyXHJcbiAqIEBwYXJhbSBuYW1lc3BhY2VcclxuICogQHBhcmFtIG9wdGlvbmFsXHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZU5hbWVzcGFjZShmbk5hbWUsIG5hbWVzcGFjZSwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhbmFtZXNwYWNlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBuYW1lc3BhY2UgIT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgLy9UT0RPOiBJIHNob3VsZCBkbyBtb3JlIHZhbGlkYXRpb24gaGVyZS4gV2Ugb25seSBhbGxvdyBjZXJ0YWluIGNoYXJzIGluIG5hbWVzcGFjZXMuXHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yUHJlZml4KGZuTmFtZSwgJ25hbWVzcGFjZScpICsgJ211c3QgYmUgYSB2YWxpZCBmaXJlYmFzZSBuYW1lc3BhY2UuJyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gdmFsaWRhdGVDYWxsYmFjayhmbk5hbWUsIGFyZ3VtZW50TmFtZSwgXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvYmFuLXR5cGVzXHJcbmNhbGxiYWNrLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBmdW5jdGlvbi4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvbnRleHRPYmplY3QoZm5OYW1lLCBhcmd1bWVudE5hbWUsIGNvbnRleHQsIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNvbnRleHQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnRleHQgIT09ICdvYmplY3QnIHx8IGNvbnRleHQgPT09IG51bGwpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmd1bWVudE5hbWUpICsgJ211c3QgYmUgYSB2YWxpZCBjb250ZXh0IG9iamVjdC4nKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBDb2RlIG9yaWdpbmFsbHkgY2FtZSBmcm9tIGdvb2cuY3J5cHQuc3RyaW5nVG9VdGY4Qnl0ZUFycmF5LCBidXQgZm9yIHNvbWUgcmVhc29uIHRoZXlcclxuLy8gYXV0b21hdGljYWxseSByZXBsYWNlZCAnXFxyXFxuJyB3aXRoICdcXG4nLCBhbmQgdGhleSBkaWRuJ3QgaGFuZGxlIHN1cnJvZ2F0ZSBwYWlycyxcclxuLy8gc28gaXQncyBiZWVuIG1vZGlmaWVkLlxyXG4vLyBOb3RlIHRoYXQgbm90IGFsbCBVbmljb2RlIGNoYXJhY3RlcnMgYXBwZWFyIGFzIHNpbmdsZSBjaGFyYWN0ZXJzIGluIEphdmFTY3JpcHQgc3RyaW5ncy5cclxuLy8gZnJvbUNoYXJDb2RlIHJldHVybnMgdGhlIFVURi0xNiBlbmNvZGluZyBvZiBhIGNoYXJhY3RlciAtIHNvIHNvbWUgVW5pY29kZSBjaGFyYWN0ZXJzXHJcbi8vIHVzZSAyIGNoYXJhY3RlcnMgaW4gSmF2YXNjcmlwdC4gIEFsbCA0LWJ5dGUgVVRGLTggY2hhcmFjdGVycyBiZWdpbiB3aXRoIGEgZmlyc3RcclxuLy8gY2hhcmFjdGVyIGluIHRoZSByYW5nZSAweEQ4MDAgLSAweERCRkYgKHRoZSBmaXJzdCBjaGFyYWN0ZXIgb2YgYSBzby1jYWxsZWQgc3Vycm9nYXRlXHJcbi8vIHBhaXIpLlxyXG4vLyBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzUuMS8jc2VjLTE1LjEuM1xyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHN0clxyXG4gKiBAcmV0dXJuIHtBcnJheX1cclxuICovXHJcbmNvbnN0IHN0cmluZ1RvQnl0ZUFycmF5ID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3Qgb3V0ID0gW107XHJcbiAgICBsZXQgcCA9IDA7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGxldCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgLy8gSXMgdGhpcyB0aGUgbGVhZCBzdXJyb2dhdGUgaW4gYSBzdXJyb2dhdGUgcGFpcj9cclxuICAgICAgICBpZiAoYyA+PSAweGQ4MDAgJiYgYyA8PSAweGRiZmYpIHtcclxuICAgICAgICAgICAgY29uc3QgaGlnaCA9IGMgLSAweGQ4MDA7IC8vIHRoZSBoaWdoIDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGkrKztcclxuICAgICAgICAgICAgYXNzZXJ0KGkgPCBzdHIubGVuZ3RoLCAnU3Vycm9nYXRlIHBhaXIgbWlzc2luZyB0cmFpbCBzdXJyb2dhdGUuJyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvdyA9IHN0ci5jaGFyQ29kZUF0KGkpIC0gMHhkYzAwOyAvLyB0aGUgbG93IDEwIGJpdHMuXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKGhpZ2ggPDwgMTApICsgbG93O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCA2NTUzNikge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDEyKSB8IDIyNDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gNikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjID4+IDE4KSB8IDI0MDtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoKGMgPj4gMTIpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0O1xyXG59O1xyXG4vKipcclxuICogQ2FsY3VsYXRlIGxlbmd0aCB3aXRob3V0IGFjdHVhbGx5IGNvbnZlcnRpbmc7IHVzZWZ1bCBmb3IgZG9pbmcgY2hlYXBlciB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge251bWJlcn1cclxuICovXHJcbmNvbnN0IHN0cmluZ0xlbmd0aCA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIHArKztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgcCArPSAyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICAvLyBMZWFkIHN1cnJvZ2F0ZSBvZiBhIHN1cnJvZ2F0ZSBwYWlyLiAgVGhlIHBhaXIgdG9nZXRoZXIgd2lsbCB0YWtlIDQgYnl0ZXMgdG8gcmVwcmVzZW50LlxyXG4gICAgICAgICAgICBwICs9IDQ7XHJcbiAgICAgICAgICAgIGkrKzsgLy8gc2tpcCB0cmFpbCBzdXJyb2dhdGUuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBwICs9IDM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHA7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgYW1vdW50IG9mIG1pbGxpc2Vjb25kcyB0byBleHBvbmVudGlhbGx5IGluY3JlYXNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JTlRFUlZBTF9NSUxMSVMgPSAxMDAwO1xyXG4vKipcclxuICogVGhlIGZhY3RvciB0byBiYWNrb2ZmIGJ5LlxyXG4gKiBTaG91bGQgYmUgYSBudW1iZXIgZ3JlYXRlciB0aGFuIDEuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0JBQ0tPRkZfRkFDVE9SID0gMjtcclxuLyoqXHJcbiAqIFRoZSBtYXhpbXVtIG1pbGxpc2Vjb25kcyB0byBpbmNyZWFzZSB0by5cclxuICpcclxuICogPHA+VmlzaWJsZSBmb3IgdGVzdGluZ1xyXG4gKi9cclxuY29uc3QgTUFYX1ZBTFVFX01JTExJUyA9IDQgKiA2MCAqIDYwICogMTAwMDsgLy8gRm91ciBob3VycywgbGlrZSBpT1MgYW5kIEFuZHJvaWQuXHJcbi8qKlxyXG4gKiBUaGUgcGVyY2VudGFnZSBvZiBiYWNrb2ZmIHRpbWUgdG8gcmFuZG9taXplIGJ5LlxyXG4gKiBTZWVcclxuICogaHR0cDovL2dvL3NhZmUtY2xpZW50LWJlaGF2aW9yI3N0ZXAtMS1kZXRlcm1pbmUtdGhlLWFwcHJvcHJpYXRlLXJldHJ5LWludGVydmFsLXRvLWhhbmRsZS1zcGlrZS10cmFmZmljXHJcbiAqIGZvciBjb250ZXh0LlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBSQU5ET01fRkFDVE9SID0gMC41O1xyXG4vKipcclxuICogQmFzZWQgb24gdGhlIGJhY2tvZmYgbWV0aG9kIGZyb21cclxuICogaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWxpYnJhcnkvYmxvYi9tYXN0ZXIvY2xvc3VyZS9nb29nL21hdGgvZXhwb25lbnRpYWxiYWNrb2ZmLmpzLlxyXG4gKiBFeHRyYWN0ZWQgaGVyZSBzbyB3ZSBkb24ndCBuZWVkIHRvIHBhc3MgbWV0YWRhdGEgYW5kIGEgc3RhdGVmdWwgRXhwb25lbnRpYWxCYWNrb2ZmIG9iamVjdCBhcm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzKGJhY2tvZmZDb3VudCwgaW50ZXJ2YWxNaWxsaXMgPSBERUZBVUxUX0lOVEVSVkFMX01JTExJUywgYmFja29mZkZhY3RvciA9IERFRkFVTFRfQkFDS09GRl9GQUNUT1IpIHtcclxuICAgIC8vIENhbGN1bGF0ZXMgYW4gZXhwb25lbnRpYWxseSBpbmNyZWFzaW5nIHZhbHVlLlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjYWxjdWxhdGVzIHZhbHVlIGZyb20gY291bnQgYW5kIGEgY29uc3RhbnQgaW50ZXJ2YWwsIHNvIHdlIG9ubHkgbmVlZCB0byBzYXZlIHZhbHVlXHJcbiAgICAvLyBhbmQgY291bnQgdG8gcmVzdG9yZSBzdGF0ZS5cclxuICAgIGNvbnN0IGN1cnJCYXNlVmFsdWUgPSBpbnRlcnZhbE1pbGxpcyAqIE1hdGgucG93KGJhY2tvZmZGYWN0b3IsIGJhY2tvZmZDb3VudCk7XHJcbiAgICAvLyBBIHJhbmRvbSBcImZ1enpcIiB0byBhdm9pZCB3YXZlcyBvZiByZXRyaWVzLlxyXG4gICAgLy8gRGV2aWF0aW9uOiByYW5kb21GYWN0b3IgaXMgcmVxdWlyZWQuXHJcbiAgICBjb25zdCByYW5kb21XYWl0ID0gTWF0aC5yb3VuZChcclxuICAgIC8vIEEgZnJhY3Rpb24gb2YgdGhlIGJhY2tvZmYgdmFsdWUgdG8gYWRkL3N1YnRyYWN0LlxyXG4gICAgLy8gRGV2aWF0aW9uOiBjaGFuZ2VzIG11bHRpcGxpY2F0aW9uIG9yZGVyIHRvIGltcHJvdmUgcmVhZGFiaWxpdHkuXHJcbiAgICBSQU5ET01fRkFDVE9SICpcclxuICAgICAgICBjdXJyQmFzZVZhbHVlICpcclxuICAgICAgICAvLyBBIHJhbmRvbSBmbG9hdCAocm91bmRlZCB0byBpbnQgYnkgTWF0aC5yb3VuZCBhYm92ZSkgaW4gdGhlIHJhbmdlIFstMSwgMV0uIERldGVybWluZXNcclxuICAgICAgICAvLyBpZiB3ZSBhZGQgb3Igc3VidHJhY3QuXHJcbiAgICAgICAgKE1hdGgucmFuZG9tKCkgLSAwLjUpICpcclxuICAgICAgICAyKTtcclxuICAgIC8vIExpbWl0cyBiYWNrb2ZmIHRvIG1heCB0byBhdm9pZCBlZmZlY3RpdmVseSBwZXJtYW5lbnQgYmFja29mZi5cclxuICAgIHJldHVybiBNYXRoLm1pbihNQVhfVkFMVUVfTUlMTElTLCBjdXJyQmFzZVZhbHVlICsgcmFuZG9tV2FpdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGUgRW5nbGlzaCBvcmRpbmFsIGxldHRlcnMgYWZ0ZXIgYSBudW1iZXJcclxuICovXHJcbmZ1bmN0aW9uIG9yZGluYWwoaSkge1xyXG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUoaSkpIHtcclxuICAgICAgICByZXR1cm4gYCR7aX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGkgKyBpbmRpY2F0b3IoaSk7XHJcbn1cclxuZnVuY3Rpb24gaW5kaWNhdG9yKGkpIHtcclxuICAgIGkgPSBNYXRoLmFicyhpKTtcclxuICAgIGNvbnN0IGNlbnQgPSBpICUgMTAwO1xyXG4gICAgaWYgKGNlbnQgPj0gMTAgJiYgY2VudCA8PSAyMCkge1xyXG4gICAgICAgIHJldHVybiAndGgnO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZGVjID0gaSAlIDEwO1xyXG4gICAgaWYgKGRlYyA9PT0gMSkge1xyXG4gICAgICAgIHJldHVybiAnc3QnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMikge1xyXG4gICAgICAgIHJldHVybiAnbmQnO1xyXG4gICAgfVxyXG4gICAgaWYgKGRlYyA9PT0gMykge1xyXG4gICAgICAgIHJldHVybiAncmQnO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuICd0aCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9kdWxhckluc3RhbmNlKHNlcnZpY2UpIHtcclxuICAgIGlmIChzZXJ2aWNlICYmIHNlcnZpY2UuX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2UuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHNlcnZpY2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0LCBlcnJvck1lc3NhZ2UpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVxdWVzdC5vbnN1Y2Nlc3MgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIHJlc29sdmUoZXZlbnQudGFyZ2V0LnJlc3VsdCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgcmVqZWN0KGAke2Vycm9yTWVzc2FnZX06ICR7KF9hID0gZXZlbnQudGFyZ2V0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZX1gKTtcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgREJXcmFwcGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kYikge1xyXG4gICAgICAgIHRoaXMuX2RiID0gX2RiO1xyXG4gICAgICAgIHRoaXMub2JqZWN0U3RvcmVOYW1lcyA9IHRoaXMuX2RiLm9iamVjdFN0b3JlTmFtZXM7XHJcbiAgICB9XHJcbiAgICB0cmFuc2FjdGlvbihzdG9yZU5hbWVzLCBtb2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUcmFuc2FjdGlvbldyYXBwZXIodGhpcy5fZGIudHJhbnNhY3Rpb24uY2FsbCh0aGlzLl9kYiwgc3RvcmVOYW1lcywgbW9kZSkpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lLCBvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBPYmplY3RTdG9yZVdyYXBwZXIodGhpcy5fZGIuY3JlYXRlT2JqZWN0U3RvcmUoc3RvcmVOYW1lLCBvcHRpb25zKSk7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9kYi5jbG9zZSgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIFRyYW5zYWN0aW9uV3JhcHBlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihfdHJhbnNhY3Rpb24pIHtcclxuICAgICAgICB0aGlzLl90cmFuc2FjdGlvbiA9IF90cmFuc2FjdGlvbjtcclxuICAgICAgICB0aGlzLmNvbXBsZXRlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl90cmFuc2FjdGlvbi5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMuX3RyYW5zYWN0aW9uLmVycm9yKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24ub25hYm9ydCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLl90cmFuc2FjdGlvbi5lcnJvcik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvYmplY3RTdG9yZShzdG9yZU5hbWUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE9iamVjdFN0b3JlV3JhcHBlcih0aGlzLl90cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzdG9yZU5hbWUpKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jbGFzcyBPYmplY3RTdG9yZVdyYXBwZXIge1xyXG4gICAgY29uc3RydWN0b3IoX3N0b3JlKSB7XHJcbiAgICAgICAgdGhpcy5fc3RvcmUgPSBfc3RvcmU7XHJcbiAgICB9XHJcbiAgICBpbmRleChuYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBJbmRleFdyYXBwZXIodGhpcy5fc3RvcmUuaW5kZXgobmFtZSkpO1xyXG4gICAgfVxyXG4gICAgY3JlYXRlSW5kZXgobmFtZSwga2V5cGF0aCwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBuZXcgSW5kZXhXcmFwcGVyKHRoaXMuX3N0b3JlLmNyZWF0ZUluZGV4KG5hbWUsIGtleXBhdGgsIG9wdGlvbnMpKTtcclxuICAgIH1cclxuICAgIGdldChrZXkpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fc3RvcmUuZ2V0KGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCwgJ0Vycm9yIHJlYWRpbmcgZnJvbSBJbmRleGVkREInKTtcclxuICAgIH1cclxuICAgIHB1dCh2YWx1ZSwga2V5KSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuX3N0b3JlLnB1dCh2YWx1ZSwga2V5KTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0LCAnRXJyb3Igd3JpdGluZyB0byBJbmRleGVkREInKTtcclxuICAgIH1cclxuICAgIGRlbGV0ZShrZXkpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fc3RvcmUuZGVsZXRlKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCwgJ0Vycm9yIGRlbGV0aW5nIGZyb20gSW5kZXhlZERCJyk7XHJcbiAgICB9XHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5fc3RvcmUuY2xlYXIoKTtcclxuICAgICAgICByZXR1cm4gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0LCAnRXJyb3IgY2xlYXJpbmcgSW5kZXhlZERCIG9iamVjdCBzdG9yZScpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIEluZGV4V3JhcHBlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihfaW5kZXgpIHtcclxuICAgICAgICB0aGlzLl9pbmRleCA9IF9pbmRleDtcclxuICAgIH1cclxuICAgIGdldChrZXkpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5faW5kZXguZ2V0KGtleSk7XHJcbiAgICAgICAgcmV0dXJuIHByb21pc2lmeVJlcXVlc3QocmVxdWVzdCwgJ0Vycm9yIHJlYWRpbmcgZnJvbSBJbmRleGVkREInKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBvcGVuREIoZGJOYW1lLCBkYlZlcnNpb24sIHVwZ3JhZGVDYWxsYmFjaykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4oZGJOYW1lLCBkYlZlcnNpb24pO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9IGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUobmV3IERCV3JhcHBlcihldmVudC50YXJnZXQucmVzdWx0KSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25lcnJvciA9IGV2ZW50ID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIHJlamVjdChgRXJyb3Igb3BlbmluZyBpbmRleGVkREI6ICR7KF9hID0gZXZlbnQudGFyZ2V0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbnVwZ3JhZGVuZWVkZWQgPSBldmVudCA9PiB7XHJcbiAgICAgICAgICAgICAgICB1cGdyYWRlQ2FsbGJhY2sobmV3IERCV3JhcHBlcihyZXF1ZXN0LnJlc3VsdCksIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIG5ldyBUcmFuc2FjdGlvbldyYXBwZXIocmVxdWVzdC50cmFuc2FjdGlvbikpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZWplY3QoYEVycm9yIG9wZW5pbmcgaW5kZXhlZERCOiAke2UubWVzc2FnZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVEQihkYk5hbWUpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShkYk5hbWUpO1xyXG4gICAgICAgICAgICByZXF1ZXN0Lm9uc3VjY2VzcyA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KGBFcnJvciBkZWxldGluZyBpbmRleGVkREIgZGF0YWJhc2UgXCIke2RiTmFtZX1cIjogJHsoX2EgPSBldmVudC50YXJnZXQuZXJyb3IpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZWplY3QoYEVycm9yIGRlbGV0aW5nIGluZGV4ZWREQiBkYXRhYmFzZSBcIiR7ZGJOYW1lfVwiOiAke2UubWVzc2FnZX1gKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERCV3JhcHBlciwgRGVmZXJyZWQsIEVycm9yRmFjdG9yeSwgRmlyZWJhc2VFcnJvciwgTUFYX1ZBTFVFX01JTExJUywgUkFORE9NX0ZBQ1RPUiwgU2hhMSwgYXJlQ29va2llc0VuYWJsZWQsIGFzc2VydCwgYXNzZXJ0aW9uRXJyb3IsIGFzeW5jLCBiYXNlNjQsIGJhc2U2NERlY29kZSwgYmFzZTY0RW5jb2RlLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgY2FsY3VsYXRlQmFja29mZk1pbGxpcywgY29udGFpbnMsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGNyZWF0ZVN1YnNjcmliZSwgZGVjb2RlLCBkZWVwQ29weSwgZGVlcEVxdWFsLCBkZWVwRXh0ZW5kLCBkZWxldGVEQiwgZXJyb3JQcmVmaXgsIGV4dHJhY3RRdWVyeXN0cmluZywgZ2V0R2xvYmFsLCBnZXRNb2R1bGFySW5zdGFuY2UsIGdldFVBLCBpc0FkbWluLCBpc0Jyb3dzZXIsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNFbGVjdHJvbiwgaXNFbXB0eSwgaXNJRSwgaXNJbmRleGVkREJBdmFpbGFibGUsIGlzTW9iaWxlQ29yZG92YSwgaXNOb2RlLCBpc05vZGVTZGssIGlzUmVhY3ROYXRpdmUsIGlzU2FmYXJpLCBpc1VXUCwgaXNWYWxpZEZvcm1hdCwgaXNWYWxpZFRpbWVzdGFtcCwgaXNzdWVkQXRUaW1lLCBqc29uRXZhbCwgbWFwLCBvcGVuREIsIG9yZGluYWwsIHF1ZXJ5c3RyaW5nLCBxdWVyeXN0cmluZ0RlY29kZSwgc2FmZUdldCwgc3RyaW5nTGVuZ3RoLCBzdHJpbmdUb0J5dGVBcnJheSwgc3RyaW5naWZ5LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCIvKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBjb250YWluZXIgZm9yIGFsbCBvZiB0aGUgTG9nZ2VyIGluc3RhbmNlc1xyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VzID0gW107XHJcbi8qKlxyXG4gKiBUaGUgSlMgU0RLIHN1cHBvcnRzIDUgbG9nIGxldmVscyBhbmQgYWxzbyBhbGxvd3MgYSB1c2VyIHRoZSBhYmlsaXR5IHRvXHJcbiAqIHNpbGVuY2UgdGhlIGxvZ3MgYWx0b2dldGhlci5cclxuICpcclxuICogVGhlIG9yZGVyIGlzIGEgZm9sbG93czpcclxuICogREVCVUcgPCBWRVJCT1NFIDwgSU5GTyA8IFdBUk4gPCBFUlJPUlxyXG4gKlxyXG4gKiBBbGwgb2YgdGhlIGxvZyB0eXBlcyBhYm92ZSB0aGUgY3VycmVudCBsb2cgbGV2ZWwgd2lsbCBiZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYElORk9gLCBlcnJvcnMgd2lsbCBzdGlsbCBiZSBsb2dnZWQsIGJ1dCBgREVCVUdgIGFuZFxyXG4gKiBgVkVSQk9TRWAgbG9ncyB3aWxsIG5vdClcclxuICovXHJcbnZhciBMb2dMZXZlbDtcclxuKGZ1bmN0aW9uIChMb2dMZXZlbCkge1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJERUJVR1wiXSA9IDBdID0gXCJERUJVR1wiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJWRVJCT1NFXCJdID0gMV0gPSBcIlZFUkJPU0VcIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiSU5GT1wiXSA9IDJdID0gXCJJTkZPXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIldBUk5cIl0gPSAzXSA9IFwiV0FSTlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJFUlJPUlwiXSA9IDRdID0gXCJFUlJPUlwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJTSUxFTlRcIl0gPSA1XSA9IFwiU0lMRU5UXCI7XHJcbn0pKExvZ0xldmVsIHx8IChMb2dMZXZlbCA9IHt9KSk7XHJcbmNvbnN0IGxldmVsU3RyaW5nVG9FbnVtID0ge1xyXG4gICAgJ2RlYnVnJzogTG9nTGV2ZWwuREVCVUcsXHJcbiAgICAndmVyYm9zZSc6IExvZ0xldmVsLlZFUkJPU0UsXHJcbiAgICAnaW5mbyc6IExvZ0xldmVsLklORk8sXHJcbiAgICAnd2Fybic6IExvZ0xldmVsLldBUk4sXHJcbiAgICAnZXJyb3InOiBMb2dMZXZlbC5FUlJPUixcclxuICAgICdzaWxlbnQnOiBMb2dMZXZlbC5TSUxFTlRcclxufTtcclxuLyoqXHJcbiAqIFRoZSBkZWZhdWx0IGxvZyBsZXZlbFxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0xldmVsID0gTG9nTGV2ZWwuSU5GTztcclxuLyoqXHJcbiAqIEJ5IGRlZmF1bHQsIGBjb25zb2xlLmRlYnVnYCBpcyBub3QgZGlzcGxheWVkIGluIHRoZSBkZXZlbG9wZXIgY29uc29sZSAoaW5cclxuICogY2hyb21lKS4gVG8gYXZvaWQgZm9yY2luZyB1c2VycyB0byBoYXZlIHRvIG9wdC1pbiB0byB0aGVzZSBsb2dzIHR3aWNlXHJcbiAqIChpLmUuIG9uY2UgZm9yIGZpcmViYXNlLCBhbmQgb25jZSBpbiB0aGUgY29uc29sZSksIHdlIGFyZSBzZW5kaW5nIGBERUJVR2BcclxuICogbG9ncyB0byB0aGUgYGNvbnNvbGUubG9nYCBmdW5jdGlvbi5cclxuICovXHJcbmNvbnN0IENvbnNvbGVNZXRob2QgPSB7XHJcbiAgICBbTG9nTGV2ZWwuREVCVUddOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5WRVJCT1NFXTogJ2xvZycsXHJcbiAgICBbTG9nTGV2ZWwuSU5GT106ICdpbmZvJyxcclxuICAgIFtMb2dMZXZlbC5XQVJOXTogJ3dhcm4nLFxyXG4gICAgW0xvZ0xldmVsLkVSUk9SXTogJ2Vycm9yJ1xyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGhhbmRsZXIgd2lsbCBmb3J3YXJkIERFQlVHLCBWRVJCT1NFLCBJTkZPLCBXQVJOLCBhbmQgRVJST1JcclxuICogbWVzc2FnZXMgb24gdG8gdGhlaXIgY29ycmVzcG9uZGluZyBjb25zb2xlIGNvdW50ZXJwYXJ0cyAoaWYgdGhlIGxvZyBtZXRob2RcclxuICogaXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGxvZyBsZXZlbClcclxuICovXHJcbmNvbnN0IGRlZmF1bHRMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsb2dUeXBlLCAuLi5hcmdzKSA9PiB7XHJcbiAgICBpZiAobG9nVHlwZSA8IGluc3RhbmNlLmxvZ0xldmVsKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgY29uc3QgbWV0aG9kID0gQ29uc29sZU1ldGhvZFtsb2dUeXBlXTtcclxuICAgIGlmIChtZXRob2QpIHtcclxuICAgICAgICBjb25zb2xlW21ldGhvZF0oYFske25vd31dICAke2luc3RhbmNlLm5hbWV9OmAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBdHRlbXB0ZWQgdG8gbG9nIGEgbWVzc2FnZSB3aXRoIGFuIGludmFsaWQgbG9nVHlwZSAodmFsdWU6ICR7bG9nVHlwZX0pYCk7XHJcbiAgICB9XHJcbn07XHJcbmNsYXNzIExvZ2dlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdpdmVzIHlvdSBhbiBpbnN0YW5jZSBvZiBhIExvZ2dlciB0byBjYXB0dXJlIG1lc3NhZ2VzIGFjY29yZGluZyB0b1xyXG4gICAgICogRmlyZWJhc2UncyBsb2dnaW5nIHNjaGVtZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSB0aGF0IHRoZSBsb2dzIHdpbGwgYmUgYXNzb2NpYXRlZCB3aXRoXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBsb2cgbGV2ZWwgb2YgdGhlIGdpdmVuIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IGRlZmF1bHRMb2dMZXZlbDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbWFpbiAoaW50ZXJuYWwpIGxvZyBoYW5kbGVyIGZvciB0aGUgTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqIENhbiBiZSBzZXQgdG8gYSBuZXcgZnVuY3Rpb24gaW4gaW50ZXJuYWwgcGFja2FnZSBjb2RlIGJ1dCBub3QgYnkgdXNlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gZGVmYXVsdExvZ0hhbmRsZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9wdGlvbmFsLCBhZGRpdGlvbmFsLCB1c2VyLWRlZmluZWQgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENhcHR1cmUgdGhlIGN1cnJlbnQgaW5zdGFuY2UgZm9yIGxhdGVyIHVzZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluc3RhbmNlcy5wdXNoKHRoaXMpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0xldmVsKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dMZXZlbDtcclxuICAgIH1cclxuICAgIHNldCBsb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICBpZiAoISh2YWwgaW4gTG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYEludmFsaWQgdmFsdWUgXCIke3ZhbH1cIiBhc3NpZ25lZCB0byBcXGBsb2dMZXZlbFxcYGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8vIFdvcmthcm91bmQgZm9yIHNldHRlci9nZXR0ZXIgaGF2aW5nIHRvIGJlIHRoZSBzYW1lIHR5cGUuXHJcbiAgICBzZXRMb2dMZXZlbCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9sb2dMZXZlbCA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8gbGV2ZWxTdHJpbmdUb0VudW1bdmFsXSA6IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBsb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9sb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0hhbmRsZXIodmFsKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiB2YWwgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVmFsdWUgYXNzaWduZWQgdG8gYGxvZ0hhbmRsZXJgIG11c3QgYmUgYSBmdW5jdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IHVzZXJMb2dIYW5kbGVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl91c2VyTG9nSGFuZGxlcjtcclxuICAgIH1cclxuICAgIHNldCB1c2VyTG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhlIGZ1bmN0aW9ucyBiZWxvdyBhcmUgYWxsIGJhc2VkIG9uIHRoZSBgY29uc29sZWAgaW50ZXJmYWNlXHJcbiAgICAgKi9cclxuICAgIGRlYnVnKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5ERUJVRywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBsb2coLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmXHJcbiAgICAgICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLlZFUkJPU0UsIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBpbmZvKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5JTkZPLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgd2FybiguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiYgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuV0FSTiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGVycm9yKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5FUlJPUiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobGV2ZWwpIHtcclxuICAgIGluc3RhbmNlcy5mb3JFYWNoKGluc3QgPT4ge1xyXG4gICAgICAgIGluc3Quc2V0TG9nTGV2ZWwobGV2ZWwpO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGZvciAoY29uc3QgaW5zdGFuY2Ugb2YgaW5zdGFuY2VzKSB7XHJcbiAgICAgICAgbGV0IGN1c3RvbUxvZ0xldmVsID0gbnVsbDtcclxuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmxldmVsKSB7XHJcbiAgICAgICAgICAgIGN1c3RvbUxvZ0xldmVsID0gbGV2ZWxTdHJpbmdUb0VudW1bb3B0aW9ucy5sZXZlbF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChsb2dDYWxsYmFjayA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBpbnN0YW5jZS51c2VyTG9nSGFuZGxlciA9IChpbnN0YW5jZSwgbGV2ZWwsIC4uLmFyZ3MpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBhcmdzXHJcbiAgICAgICAgICAgICAgICAgICAgLm1hcChhcmcgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChhcmcgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGFyZyA9PT0gJ2Jvb2xlYW4nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBhcmcudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy5tZXNzYWdlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShhcmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChpZ25vcmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihhcmcgPT4gYXJnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPj0gKGN1c3RvbUxvZ0xldmVsICE9PSBudWxsICYmIGN1c3RvbUxvZ0xldmVsICE9PSB2b2lkIDAgPyBjdXN0b21Mb2dMZXZlbCA6IGluc3RhbmNlLmxvZ0xldmVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvZ0NhbGxiYWNrKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IExvZ0xldmVsW2xldmVsXS50b0xvd2VyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbnN0YW5jZS5uYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbmV4cG9ydCB7IExvZ0xldmVsLCBMb2dnZXIsIHNldExvZ0xldmVsLCBzZXRVc2VyTG9nSGFuZGxlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IENvbXBvbmVudCwgQ29tcG9uZW50Q29udGFpbmVyIH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5pbXBvcnQgeyBMb2dnZXIsIHNldFVzZXJMb2dIYW5kbGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBFcnJvckZhY3RvcnksIGRlZXBFcXVhbCwgb3BlbkRCLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgaXNJbmRleGVkREJBdmFpbGFibGUsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gaW5pdGlhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3aWxsIGJlIGNhbGxlZCBieSBpbnN0YWxsYXRpb25zIG9uXHJcbiAgICAvLyBhdXRoIHRva2VuIHJlZnJlc2gsIGFuZCBpbnN0YWxsYXRpb25zIHdpbGwgc2VuZCB0aGlzIHN0cmluZy5cclxuICAgIGdldFBsYXRmb3JtSW5mb1N0cmluZygpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcnMoKTtcclxuICAgICAgICAvLyBMb29wIHRocm91Z2ggcHJvdmlkZXJzIGFuZCBnZXQgbGlicmFyeS92ZXJzaW9uIHBhaXJzIGZyb20gYW55IHRoYXQgYXJlXHJcbiAgICAgICAgLy8gdmVyc2lvbiBjb21wb25lbnRzLlxyXG4gICAgICAgIHJldHVybiBwcm92aWRlcnNcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXJ2aWNlID0gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7c2VydmljZS5saWJyYXJ5fS8ke3NlcnZpY2UudmVyc2lvbn1gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmlsdGVyKGxvZ1N0cmluZyA9PiBsb2dTdHJpbmcpXHJcbiAgICAgICAgICAgIC5qb2luKCcgJyk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm92aWRlciBjaGVjayBpZiB0aGlzIHByb3ZpZGVyIHByb3ZpZGVzIGEgVmVyc2lvblNlcnZpY2VcclxuICpcclxuICogTk9URTogVXNpbmcgUHJvdmlkZXI8J2FwcC12ZXJzaW9uJz4gaXMgYSBoYWNrIHRvIGluZGljYXRlIHRoYXQgdGhlIHByb3ZpZGVyXHJcbiAqIHByb3ZpZGVzIFZlcnNpb25TZXJ2aWNlLiBUaGUgcHJvdmlkZXIgaXMgbm90IG5lY2Vzc2FyaWx5IGEgJ2FwcC12ZXJzaW9uJ1xyXG4gKiBwcm92aWRlci5cclxuICovXHJcbmZ1bmN0aW9uIGlzVmVyc2lvblNlcnZpY2VQcm92aWRlcihwcm92aWRlcikge1xyXG4gICAgY29uc3QgY29tcG9uZW50ID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCk7XHJcbiAgICByZXR1cm4gKGNvbXBvbmVudCA9PT0gbnVsbCB8fCBjb21wb25lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbXBvbmVudC50eXBlKSA9PT0gXCJWRVJTSU9OXCIgLyogVkVSU0lPTiAqLztcclxufVxuXG5jb25zdCBuYW1lJG8gPSBcIkBmaXJlYmFzZS9hcHBcIjtcbmNvbnN0IHZlcnNpb24kMSA9IFwiMC43LjIwXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuNi4xMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdENvbnRyb2xsZXIgPSBhcHAuY29udGFpbmVyXHJcbiAgICAgICAgLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKVxyXG4gICAgICAgIC5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgIGlmIChoZWFydGJlYXRDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdm9pZCBoZWFydGJlYXRDb250cm9sbGVyLnRyaWdnZXJIZWFydGJlYXQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgRmlyZWJhc2UgQXBwLmluaXRpYWxpemVBcHAoKScsXHJcbiAgICBbXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi9dOiBcIklsbGVnYWwgQXBwIG5hbWU6ICd7JGFwcE5hbWV9XCIsXHJcbiAgICBbXCJkdXBsaWNhdGUtYXBwXCIgLyogRFVQTElDQVRFX0FQUCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGV4aXN0cyB3aXRoIGRpZmZlcmVudCBvcHRpb25zIG9yIGNvbmZpZ1wiLFxyXG4gICAgW1wiYXBwLWRlbGV0ZWRcIiAvKiBBUFBfREVMRVRFRCAqL106IFwiRmlyZWJhc2UgQXBwIG5hbWVkICd7JGFwcE5hbWV9JyBhbHJlYWR5IGRlbGV0ZWRcIixcclxuICAgIFtcImludmFsaWQtYXBwLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9BUFBfQVJHVU1FTlQgKi9dOiAnZmlyZWJhc2UueyRhcHBOYW1lfSgpIHRha2VzIGVpdGhlciBubyBhcmd1bWVudCBvciBhICcgK1xyXG4gICAgICAgICdGaXJlYmFzZSBBcHAgaW5zdGFuY2UuJyxcclxuICAgIFtcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi9dOiAnRmlyc3QgYXJndW1lbnQgdG8gYG9uTG9nYCBtdXN0IGJlIG51bGwgb3IgYSBmdW5jdGlvbi4nLFxyXG4gICAgW1wic3RvcmFnZS1vcGVuXCIgLyogU1RPUkFHRV9PUEVOICovXTogJ0Vycm9yIHRocm93biB3aGVuIG9wZW5pbmcgc3RvcmFnZS4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJzdG9yYWdlLWdldFwiIC8qIFNUT1JBR0VfR0VUICovXTogJ0Vycm9yIHRocm93biB3aGVuIHJlYWRpbmcgZnJvbSBzdG9yYWdlLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcInN0b3JhZ2Utc2V0XCIgLyogU1RPUkFHRV9XUklURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiB3cml0aW5nIHRvIHN0b3JhZ2UuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wic3RvcmFnZS1kZWxldGVcIiAvKiBTVE9SQUdFX0RFTEVURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiBkZWxldGluZyBmcm9tIHN0b3JhZ2UuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAnLCAnRmlyZWJhc2UnLCBFUlJPUlMpO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGaXJlYmFzZUFwcEltcGwge1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucywgY29uZmlnLCBjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLl9pc0RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9vcHRpb25zID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5fY29uZmlnID0gT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKTtcclxuICAgICAgICB0aGlzLl9uYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID1cclxuICAgICAgICAgICAgY29uZmlnLmF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2FwcCcsICgpID0+IHRoaXMsIFwiUFVCTElDXCIgLyogUFVCTElDICovKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgdGhpcy5fYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IG5hbWUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xyXG4gICAgfVxyXG4gICAgZ2V0IG9wdGlvbnMoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGNvbmZpZygpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjb250YWluZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIGdldCBpc0RlbGV0ZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lzRGVsZXRlZDtcclxuICAgIH1cclxuICAgIHNldCBpc0RlbGV0ZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5faXNEZWxldGVkID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYW4gRXJyb3IgaWYgdGhlIEFwcCBoYXMgYWxyZWFkeSBiZWVuIGRlbGV0ZWQgLVxyXG4gICAgICogdXNlIGJlZm9yZSBwZXJmb3JtaW5nIEFQSSBhY3Rpb25zIG9uIHRoZSBBcHAuXHJcbiAgICAgKi9cclxuICAgIGNoZWNrRGVzdHJveWVkKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzRGVsZXRlZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImFwcC1kZWxldGVkXCIgLyogQVBQX0RFTEVURUQgKi8sIHsgYXBwTmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBjdXJyZW50IFNESyB2ZXJzaW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTREtfVkVSU0lPTiA9IHZlcnNpb247XHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBcHAob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBCQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBleGlzdGluZ0FwcCA9IF9hcHBzLmdldChuYW1lKTtcclxuICAgIGlmIChleGlzdGluZ0FwcCkge1xyXG4gICAgICAgIC8vIHJldHVybiB0aGUgZXhpc3RpbmcgYXBwIGlmIG9wdGlvbnMgYW5kIGNvbmZpZyBkZWVwIGVxdWFsIHRoZSBvbmVzIGluIHRoZSBleGlzdGluZyBhcHAuXHJcbiAgICAgICAgaWYgKGRlZXBFcXVhbChvcHRpb25zLCBleGlzdGluZ0FwcC5vcHRpb25zKSAmJlxyXG4gICAgICAgICAgICBkZWVwRXF1YWwoY29uZmlnLCBleGlzdGluZ0FwcC5jb25maWcpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0FwcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiZHVwbGljYXRlLWFwcFwiIC8qIERVUExJQ0FURV9BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb250YWluZXIgPSBuZXcgQ29tcG9uZW50Q29udGFpbmVyKG5hbWUpO1xyXG4gICAgZm9yIChjb25zdCBjb21wb25lbnQgb2YgX2NvbXBvbmVudHMudmFsdWVzKCkpIHtcclxuICAgICAgICBjb250YWluZXIuYWRkQ29tcG9uZW50KGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdBcHAgPSBuZXcgRmlyZWJhc2VBcHBJbXBsKG9wdGlvbnMsIGNvbmZpZywgY29udGFpbmVyKTtcclxuICAgIF9hcHBzLnNldChuYW1lLCBuZXdBcHApO1xyXG4gICAgcmV0dXJuIG5ld0FwcDtcclxufVxyXG4vKipcclxuICogUmV0cmlldmVzIGEge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBXaGVuIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cywgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLiBXaGVuIGFuIGFwcCBuYW1lXHJcbiAqIGlzIHByb3ZpZGVkLCB0aGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhhdCBuYW1lIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBBbiBleGNlcHRpb24gaXMgdGhyb3duIGlmIHRoZSBhcHAgYmVpbmcgcmV0cmlldmVkIGhhcyBub3QgeWV0IGJlZW5cclxuICogaW5pdGlhbGl6ZWQuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIHRoZSBkZWZhdWx0IGFwcFxyXG4gKiBjb25zdCBhcHAgPSBnZXRBcHAoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gUmV0dXJuIGEgbmFtZWQgYXBwXHJcbiAqIGNvbnN0IG90aGVyQXBwID0gZ2V0QXBwKFwib3RoZXJBcHBcIik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gbmFtZSAtIE9wdGlvbmFsIG5hbWUgb2YgdGhlIGFwcCB0byByZXR1cm4uIElmIG5vIG5hbWUgaXNcclxuICogICBwcm92aWRlZCwgdGhlIGRlZmF1bHQgaXMgYFwiW0RFRkFVTFRdXCJgLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBUaGUgYXBwIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHByb3ZpZGVkIGFwcCBuYW1lLlxyXG4gKiAgIElmIG5vIGFwcCBuYW1lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBhcHAgaXMgcmV0dXJuZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFwcChuYW1lID0gREVGQVVMVF9FTlRSWV9OQU1FKSB7XHJcbiAgICBjb25zdCBhcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoIWFwcCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwO1xyXG59XHJcbi8qKlxyXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXHJcbiAqIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGRlbGV0ZUFwcChhcHApXHJcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICogICB9KVxyXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcclxuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcclxuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcclxuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xyXG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cclxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcclxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxyXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGAke2xpYnJhcnl9LXZlcnNpb25gLCAoKSA9PiAoeyBsaWJyYXJ5LCB2ZXJzaW9uIH0pLCBcIlZFUlNJT05cIiAvKiBWRVJTSU9OICovKSk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGhhbmRsZXIgZm9yIGFsbCBGaXJlYmFzZSBTREtzLlxyXG4gKiBAcGFyYW0gbG9nQ2FsbGJhY2sgLSBBbiBvcHRpb25hbCBjdXN0b20gbG9nIGhhbmRsZXIgdGhhdCBleGVjdXRlcyB1c2VyIGNvZGUgd2hlbmV2ZXJcclxuICogdGhlIEZpcmViYXNlIFNESyBtYWtlcyBhIGxvZ2dpbmcgY2FsbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25Mb2cobG9nQ2FsbGJhY2ssIG9wdGlvbnMpIHtcclxuICAgIGlmIChsb2dDYWxsYmFjayAhPT0gbnVsbCAmJiB0eXBlb2YgbG9nQ2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImludmFsaWQtbG9nLWFyZ3VtZW50XCIgLyogSU5WQUxJRF9MT0dfQVJHVU1FTlQgKi8pO1xyXG4gICAgfVxyXG4gICAgc2V0VXNlckxvZ0hhbmRsZXIobG9nQ2FsbGJhY2ssIG9wdGlvbnMpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIGxvZyBsZXZlbCBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCBhcmUgY2FwdHVyZWQgKGkuZS4gaWZcclxuICogeW91IHNldCB0aGUgbG9nIGxldmVsIHRvIGBpbmZvYCwgZXJyb3JzIGFyZSBsb2dnZWQsIGJ1dCBgZGVidWdgIGFuZFxyXG4gKiBgdmVyYm9zZWAgbG9ncyBhcmUgbm90KS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0TG9nTGV2ZWwobG9nTGV2ZWwpIHtcclxuICAgIHNldExvZ0xldmVsJDEobG9nTGV2ZWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LWRhdGFiYXNlJztcclxuY29uc3QgREJfVkVSU0lPTiA9IDE7XHJcbmNvbnN0IFNUT1JFX05BTUUgPSAnZmlyZWJhc2UtaGVhcnRiZWF0LXN0b3JlJztcclxubGV0IGRiUHJvbWlzZSA9IG51bGw7XHJcbmZ1bmN0aW9uIGdldERiUHJvbWlzZSgpIHtcclxuICAgIGlmICghZGJQcm9taXNlKSB7XHJcbiAgICAgICAgZGJQcm9taXNlID0gb3BlbkRCKERCX05BTUUsIERCX1ZFUlNJT04sIChkYiwgb2xkVmVyc2lvbikgPT4ge1xyXG4gICAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgJ2JyZWFrJyBpbiB0aGlzIHN3aXRjaCBzdGF0ZW1lbnQsIHRoZSBmYWxsLXRocm91Z2hcclxuICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgIC8vIHRoZSBvbGQgdmVyc2lvbiBhbmQgdGhlIGN1cnJlbnQgdmVyc2lvbiwgd2Ugd2FudCBBTEwgdGhlIG1pZ3JhdGlvbnNcclxuICAgICAgICAgICAgLy8gdGhhdCBjb3JyZXNwb25kIHRvIHRob3NlIHZlcnNpb25zIHRvIHJ1biwgbm90IG9ubHkgdGhlIGxhc3Qgb25lLlxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgIHN3aXRjaCAob2xkVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOlxyXG4gICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwic3RvcmFnZS1vcGVuXCIgLyogU1RPUkFHRV9PUEVOICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZS5tZXNzYWdlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRiUHJvbWlzZTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiByZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIoYXBwKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIGRiXHJcbiAgICAgICAgICAgIC50cmFuc2FjdGlvbihTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLmdldChjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcInN0b3JhZ2UtZ2V0XCIgLyogU1RPUkFHRV9HRVQgKi8sIHtcclxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKGFwcCwgaGVhcnRiZWF0T2JqZWN0KSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRiID0gYXdhaXQgZ2V0RGJQcm9taXNlKCk7XHJcbiAgICAgICAgY29uc3QgdHggPSBkYi50cmFuc2FjdGlvbihTVE9SRV9OQU1FLCAncmVhZHdyaXRlJyk7XHJcbiAgICAgICAgY29uc3Qgb2JqZWN0U3RvcmUgPSB0eC5vYmplY3RTdG9yZShTVE9SRV9OQU1FKTtcclxuICAgICAgICBhd2FpdCBvYmplY3RTdG9yZS5wdXQoaGVhcnRiZWF0T2JqZWN0LCBjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIHJldHVybiB0eC5jb21wbGV0ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJzdG9yYWdlLXNldFwiIC8qIFNUT1JBR0VfV1JJVEUgKi8sIHtcclxuICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNvbXB1dGVLZXkoYXBwKSB7XHJcbiAgICByZXR1cm4gYCR7YXBwLm5hbWV9ISR7YXBwLm9wdGlvbnMuYXBwSWR9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBNQVhfSEVBREVSX0JZVEVTID0gMTAyNDtcclxuLy8gMzAgZGF5c1xyXG5jb25zdCBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTID0gMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBIZWFydGJlYXRTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbi1tZW1vcnkgY2FjaGUgZm9yIGhlYXJ0YmVhdHMsIHVzZWQgYnkgZ2V0SGVhcnRiZWF0c0hlYWRlcigpIHRvIGdlbmVyYXRlXHJcbiAgICAgICAgICogdGhlIGhlYWRlciBzdHJpbmcuXHJcbiAgICAgICAgICogU3RvcmVzIG9uZSByZWNvcmQgcGVyIGRhdGUuIFRoaXMgd2lsbCBiZSBjb25zb2xpZGF0ZWQgaW50byB0aGUgc3RhbmRhcmRcclxuICAgICAgICAgKiBmb3JtYXQgb2Ygb25lIHJlY29yZCBwZXIgdXNlciBhZ2VudCBzdHJpbmcgYmVmb3JlIGJlaW5nIHNlbnQgYXMgYSBoZWFkZXIuXHJcbiAgICAgICAgICogUG9wdWxhdGVkIGZyb20gaW5kZXhlZERCIHdoZW4gdGhlIGNvbnRyb2xsZXIgaXMgaW5zdGFudGlhdGVkIGFuZCBzaG91bGRcclxuICAgICAgICAgKiBiZSBrZXB0IGluIHN5bmMgd2l0aCBpbmRleGVkREIuXHJcbiAgICAgICAgICogTGVhdmUgcHVibGljIGZvciBlYXNpZXIgdGVzdGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBudWxsO1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IHRoaXMuY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICB0aGlzLl9zdG9yYWdlID0gbmV3IEhlYXJ0YmVhdFN0b3JhZ2VJbXBsKGFwcCk7XHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZSA9IHRoaXMuX3N0b3JhZ2UucmVhZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gcmVzdWx0O1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgdG8gcmVwb3J0IGEgaGVhcnRiZWF0LiBUaGUgZnVuY3Rpb24gd2lsbCBnZW5lcmF0ZVxyXG4gICAgICogYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgb2JqZWN0LCB1cGRhdGUgaGVhcnRiZWF0c0NhY2hlLCBhbmQgcGVyc2lzdCBpdFxyXG4gICAgICogdG8gSW5kZXhlZERCLlxyXG4gICAgICogTm90ZSB0aGF0IHdlIG9ubHkgc3RvcmUgb25lIGhlYXJ0YmVhdCBwZXIgZGF5LiBTbyBpZiBhIGhlYXJ0YmVhdCBmb3IgdG9kYXkgaXNcclxuICAgICAqIGFscmVhZHkgbG9nZ2VkLCBzdWJzZXF1ZW50IGNhbGxzIHRvIHRoaXMgZnVuY3Rpb24gaW4gdGhlIHNhbWUgZGF5IHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdHJpZ2dlckhlYXJ0YmVhdCgpIHtcclxuICAgICAgICBjb25zdCBwbGF0Zm9ybUxvZ2dlciA9IHRoaXMuY29udGFpbmVyXHJcbiAgICAgICAgICAgIC5nZXRQcm92aWRlcigncGxhdGZvcm0tbG9nZ2VyJylcclxuICAgICAgICAgICAgLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIC8vIFRoaXMgaXMgdGhlIFwiRmlyZWJhc2UgdXNlciBhZ2VudFwiIHN0cmluZyBmcm9tIHRoZSBwbGF0Zm9ybSBsb2dnZXJcclxuICAgICAgICAvLyBzZXJ2aWNlLCBub3QgdGhlIGJyb3dzZXIgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBhZ2VudCA9IHBsYXRmb3JtTG9nZ2VyLmdldFBsYXRmb3JtSW5mb1N0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBnZXRVVENEYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPSBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBEbyBub3Qgc3RvcmUgYSBoZWFydGJlYXQgaWYgb25lIGlzIGFscmVhZHkgc3RvcmVkIGZvciB0aGlzIGRheVxyXG4gICAgICAgIC8vIG9yIGlmIGEgaGVhZGVyIGhhcyBhbHJlYWR5IGJlZW4gc2VudCB0b2RheS5cclxuICAgICAgICBpZiAodGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9PT0gZGF0ZSB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5zb21lKHNpbmdsZURhdGVIZWFydGJlYXQgPT4gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlID09PSBkYXRlKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBUaGVyZSBpcyBubyBlbnRyeSBmb3IgdGhpcyBkYXRlLiBDcmVhdGUgb25lLlxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5wdXNoKHsgZGF0ZSwgYWdlbnQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFJlbW92ZSBlbnRyaWVzIG9sZGVyIHRoYW4gMzAgZGF5cy5cclxuICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzLmZpbHRlcihzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaGJUaW1lc3RhbXAgPSBuZXcgRGF0ZShzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpLnZhbHVlT2YoKTtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vdyAtIGhiVGltZXN0YW1wIDw9IFNUT1JFRF9IRUFSVEJFQVRfUkVURU5USU9OX01BWF9NSUxMSVM7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcgd2hpY2ggY2FuIGJlIGF0dGFjaGVkIHRvIHRoZSBoZWFydGJlYXQtc3BlY2lmaWMgaGVhZGVyIGRpcmVjdGx5LlxyXG4gICAgICogSXQgYWxzbyBjbGVhcnMgYWxsIGhlYXJ0YmVhdHMgZnJvbSBtZW1vcnkgYXMgd2VsbCBhcyBpbiBJbmRleGVkREIuXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogQ29uc3VtaW5nIHByb2R1Y3QgU0RLcyBzaG91bGQgbm90IHNlbmQgdGhlIGhlYWRlciBpZiB0aGlzIG1ldGhvZFxyXG4gICAgICogcmV0dXJucyBhbiBlbXB0eSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBpdCdzIHN0aWxsIG51bGwgb3IgdGhlIGFycmF5IGlzIGVtcHR5LCB0aGVyZSBpcyBubyBkYXRhIHRvIHNlbmQuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIC8vIEV4dHJhY3QgYXMgbWFueSBoZWFydGJlYXRzIGZyb20gdGhlIGNhY2hlIGFzIHdpbGwgZml0IHVuZGVyIHRoZSBzaXplIGxpbWl0LlxyXG4gICAgICAgIGNvbnN0IHsgaGVhcnRiZWF0c1RvU2VuZCwgdW5zZW50RW50cmllcyB9ID0gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIodGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMpO1xyXG4gICAgICAgIGNvbnN0IGhlYWRlclN0cmluZyA9IGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c1RvU2VuZCB9KSk7XHJcbiAgICAgICAgLy8gU3RvcmUgbGFzdCBzZW50IGRhdGUgdG8gcHJldmVudCBhbm90aGVyIGJlaW5nIGxvZ2dlZC9zZW50IGZvciB0aGUgc2FtZSBkYXkuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmxhc3RTZW50SGVhcnRiZWF0RGF0ZSA9IGRhdGU7XHJcbiAgICAgICAgaWYgKHVuc2VudEVudHJpZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAvLyBTdG9yZSBhbnkgdW5zZW50IGVudHJpZXMgaWYgdGhleSBleGlzdC5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB1bnNlbnRFbnRyaWVzO1xyXG4gICAgICAgICAgICAvLyBUaGlzIHNlZW1zIG1vcmUgbGlrZWx5IHRoYW4gZW1wdHlpbmcgdGhlIGFycmF5IChiZWxvdykgdG8gbGVhZCB0byBzb21lIG9kZCBzdGF0ZVxyXG4gICAgICAgICAgICAvLyBzaW5jZSB0aGUgY2FjaGUgaXNuJ3QgZW1wdHkgYW5kIHRoaXMgd2lsbCBiZSBjYWxsZWQgYWdhaW4gb24gdGhlIG5leHQgcmVxdWVzdCxcclxuICAgICAgICAgICAgLy8gYW5kIGlzIHByb2JhYmx5IHNhZmVzdCBpZiB3ZSBhd2FpdCBpdC5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gW107XHJcbiAgICAgICAgICAgIC8vIERvIG5vdCB3YWl0IGZvciB0aGlzLCB0byByZWR1Y2UgbGF0ZW5jeS5cclxuICAgICAgICAgICAgdm9pZCB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaGVhZGVyU3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldFVUQ0RhdGVTdHJpbmcoKSB7XHJcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XHJcbiAgICAvLyBSZXR1cm5zIGRhdGUgZm9ybWF0ICdZWVlZLU1NLUREJ1xyXG4gICAgcmV0dXJuIHRvZGF5LnRvSVNPU3RyaW5nKCkuc3Vic3RyaW5nKDAsIDEwKTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlcihoZWFydGJlYXRzQ2FjaGUsIG1heFNpemUgPSBNQVhfSEVBREVSX0JZVEVTKSB7XHJcbiAgICAvLyBIZWFydGJlYXRzIGdyb3VwZWQgYnkgdXNlciBhZ2VudCBpbiB0aGUgc3RhbmRhcmQgZm9ybWF0IHRvIGJlIHNlbnQgaW5cclxuICAgIC8vIHRoZSBoZWFkZXIuXHJcbiAgICBjb25zdCBoZWFydGJlYXRzVG9TZW5kID0gW107XHJcbiAgICAvLyBTaW5nbGUgZGF0ZSBmb3JtYXQgaGVhcnRiZWF0cyB0aGF0IGFyZSBub3Qgc2VudC5cclxuICAgIGxldCB1bnNlbnRFbnRyaWVzID0gaGVhcnRiZWF0c0NhY2hlLnNsaWNlKCk7XHJcbiAgICBmb3IgKGNvbnN0IHNpbmdsZURhdGVIZWFydGJlYXQgb2YgaGVhcnRiZWF0c0NhY2hlKSB7XHJcbiAgICAgICAgLy8gTG9vayBmb3IgYW4gZXhpc3RpbmcgZW50cnkgd2l0aCB0aGUgc2FtZSB1c2VyIGFnZW50LlxyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdEVudHJ5ID0gaGVhcnRiZWF0c1RvU2VuZC5maW5kKGhiID0+IGhiLmFnZW50ID09PSBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50KTtcclxuICAgICAgICBpZiAoIWhlYXJ0YmVhdEVudHJ5KSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGVudHJ5IGZvciB0aGlzIHVzZXIgYWdlbnQgZXhpc3RzLCBjcmVhdGUgb25lLlxyXG4gICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgYWdlbnQ6IHNpbmdsZURhdGVIZWFydGJlYXQuYWdlbnQsXHJcbiAgICAgICAgICAgICAgICBkYXRlczogW3NpbmdsZURhdGVIZWFydGJlYXQuZGF0ZV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChjb3VudEJ5dGVzKGhlYXJ0YmVhdHNUb1NlbmQpID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgaGVhcnRiZWF0XHJcbiAgICAgICAgICAgICAgICAvLyBlbnRyeSBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQucG9wKCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgaGVhcnRiZWF0RW50cnkuZGF0ZXMucHVzaChzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGUpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgaGVhZGVyIHdvdWxkIGV4Y2VlZCBtYXggc2l6ZSwgcmVtb3ZlIHRoZSBhZGRlZCBkYXRlXHJcbiAgICAgICAgICAgIC8vIGFuZCBzdG9wIGFkZGluZyB0byB0aGUgaGVhZGVyLlxyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gUG9wIHVuc2VudCBlbnRyeSBmcm9tIHF1ZXVlLiAoU2tpcHBlZCBpZiBhZGRpbmcgdGhlIGVudHJ5IGV4Y2VlZGVkXHJcbiAgICAgICAgLy8gcXVvdGEgYW5kIHRoZSBsb29wIGJyZWFrcyBlYXJseS4pXHJcbiAgICAgICAgdW5zZW50RW50cmllcyA9IHVuc2VudEVudHJpZXMuc2xpY2UoMSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGhlYXJ0YmVhdHNUb1NlbmQsXHJcbiAgICAgICAgdW5zZW50RW50cmllc1xyXG4gICAgfTtcclxufVxyXG5jbGFzcyBIZWFydGJlYXRTdG9yYWdlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHApIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlID0gdGhpcy5ydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBydW5JbmRleGVkREJFbnZpcm9ubWVudENoZWNrKCkge1xyXG4gICAgICAgIGlmICghaXNJbmRleGVkREJBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0cnVlKVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlYWQgYWxsIGhlYXJ0YmVhdHMuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHJlYWQoKSB7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm4geyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiSGVhcnRiZWF0T2JqZWN0ID0gYXdhaXQgcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKHRoaXMuYXBwKTtcclxuICAgICAgICAgICAgcmV0dXJuIGlkYkhlYXJ0YmVhdE9iamVjdCB8fCB7IGhlYXJ0YmVhdHM6IFtdIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gb3ZlcndyaXRlIHRoZSBzdG9yYWdlIHdpdGggdGhlIHByb3ZpZGVkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIG92ZXJ3cml0ZShoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBhZGQgaGVhcnRiZWF0c1xyXG4gICAgYXN5bmMgYWRkKGhlYXJ0YmVhdHNPYmplY3QpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgY2FuVXNlSW5kZXhlZERCID0gYXdhaXQgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZTtcclxuICAgICAgICBpZiAoIWNhblVzZUluZGV4ZWREQikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QgPSBhd2FpdCB0aGlzLnJlYWQoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHdyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCKHRoaXMuYXBwLCB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U2VudEhlYXJ0YmVhdERhdGU6IChfYSA9IGhlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBleGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QubGFzdFNlbnRIZWFydGJlYXREYXRlLFxyXG4gICAgICAgICAgICAgICAgaGVhcnRiZWF0czogW1xyXG4gICAgICAgICAgICAgICAgICAgIC4uLmV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5oZWFydGJlYXRzLFxyXG4gICAgICAgICAgICAgICAgICAgIC4uLmhlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0c1xyXG4gICAgICAgICAgICAgICAgXVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENhbGN1bGF0ZSBieXRlcyBvZiBhIEhlYXJ0YmVhdHNCeVVzZXJBZ2VudCBhcnJheSBhZnRlciBiZWluZyB3cmFwcGVkXHJcbiAqIGluIGEgcGxhdGZvcm0gbG9nZ2luZyBoZWFkZXIgSlNPTiBvYmplY3QsIHN0cmluZ2lmaWVkLCBhbmQgY29udmVydGVkXHJcbiAqIHRvIGJhc2UgNjQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjb3VudEJ5dGVzKGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgLy8gYmFzZTY0IGhhcyBhIHJlc3RyaWN0ZWQgc2V0IG9mIGNoYXJhY3RlcnMsIGFsbCBvZiB3aGljaCBzaG91bGQgYmUgMSBieXRlLlxyXG4gICAgcmV0dXJuIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nKFxyXG4gICAgLy8gaGVhcnRiZWF0c0NhY2hlIHdyYXBwZXIgcHJvcGVydGllc1xyXG4gICAgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAyLCBoZWFydGJlYXRzOiBoZWFydGJlYXRzQ2FjaGUgfSkpLmxlbmd0aDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckNvcmVDb21wb25lbnRzKHZhcmlhbnQpIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KCdwbGF0Zm9ybS1sb2dnZXInLCBjb250YWluZXIgPT4gbmV3IFBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2hlYXJ0YmVhdCcsIGNvbnRhaW5lciA9PiBuZXcgSGVhcnRiZWF0U2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogUFJJVkFURSAqLykpO1xyXG4gICAgLy8gUmVnaXN0ZXIgYGFwcGAgcGFja2FnZS5cclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lJG8sIHZlcnNpb24kMSwgdmFyaWFudCk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCAnZXNtMjAxNycpO1xyXG4gICAgLy8gUmVnaXN0ZXIgcGxhdGZvcm0gU0RLIGlkZW50aWZpZXIgKG5vIHZlcnNpb24pLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKCdmaXJlLWpzJywgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBGaXJlYmFzZSBBcHBcclxuICpcclxuICogQHJlbWFya3MgVGhpcyBwYWNrYWdlIGNvb3JkaW5hdGVzIHRoZSBjb21tdW5pY2F0aW9uIGJldHdlZW4gdGhlIGRpZmZlcmVudCBGaXJlYmFzZSBjb21wb25lbnRzXHJcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxyXG4gKi9cclxucmVnaXN0ZXJDb3JlQ29tcG9uZW50cygnJyk7XG5cbmV4cG9ydCB7IFNES19WRVJTSU9OLCBERUZBVUxUX0VOVFJZX05BTUUgYXMgX0RFRkFVTFRfRU5UUllfTkFNRSwgX2FkZENvbXBvbmVudCwgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50LCBfYXBwcywgX2NsZWFyQ29tcG9uZW50cywgX2NvbXBvbmVudHMsIF9nZXRQcm92aWRlciwgX3JlZ2lzdGVyQ29tcG9uZW50LCBfcmVtb3ZlU2VydmljZUluc3RhbmNlLCBkZWxldGVBcHAsIGdldEFwcCwgZ2V0QXBwcywgaW5pdGlhbGl6ZUFwcCwgb25Mb2csIHJlZ2lzdGVyVmVyc2lvbiwgc2V0TG9nTGV2ZWwgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyByZWdpc3RlclZlcnNpb24gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmV4cG9ydCAqIGZyb20gJ0BmaXJlYmFzZS9hcHAnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjYuMTBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAnKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbS5qcy5tYXBcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgZXNtID0ge307XG5cbi8qXG5cbiBDb3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4qL1xudmFyIGssZ29vZz1nb29nfHx7fSxsPWNvbW1vbmpzR2xvYmFsfHxzZWxmO2Z1bmN0aW9uIGFhKCl7fWZ1bmN0aW9uIGJhKGEpe3ZhciBiPXR5cGVvZiBhO2I9XCJvYmplY3RcIiE9Yj9iOmE/QXJyYXkuaXNBcnJheShhKT9cImFycmF5XCI6YjpcIm51bGxcIjtyZXR1cm4gXCJhcnJheVwiPT1ifHxcIm9iamVjdFwiPT1iJiZcIm51bWJlclwiPT10eXBlb2YgYS5sZW5ndGh9ZnVuY3Rpb24gcChhKXt2YXIgYj10eXBlb2YgYTtyZXR1cm4gXCJvYmplY3RcIj09YiYmbnVsbCE9YXx8XCJmdW5jdGlvblwiPT1ifWZ1bmN0aW9uIGRhKGEpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYSxlYSkmJmFbZWFdfHwoYVtlYV09KytmYSl9dmFyIGVhPVwiY2xvc3VyZV91aWRfXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCksZmE9MDtmdW5jdGlvbiBoYShhLGIsYyl7cmV0dXJuIGEuY2FsbC5hcHBseShhLmJpbmQsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGlhKGEsYixjKXtpZighYSl0aHJvdyBFcnJvcigpO2lmKDI8YXJndW1lbnRzLmxlbmd0aCl7dmFyIGQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDIpO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7QXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoZSxkKTtyZXR1cm4gYS5hcHBseShiLGUpfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYS5hcHBseShiLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIHEoYSxiLGMpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kJiYtMSE9RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQudG9TdHJpbmcoKS5pbmRleE9mKFwibmF0aXZlIGNvZGVcIik/cT1oYTpxPWlhO3JldHVybiBxLmFwcGx5KG51bGwsYXJndW1lbnRzKX1cbmZ1bmN0aW9uIGphKGEsYil7dmFyIGM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciBkPWMuc2xpY2UoKTtkLnB1c2guYXBwbHkoZCxhcmd1bWVudHMpO3JldHVybiBhLmFwcGx5KHRoaXMsZCl9fWZ1bmN0aW9uIHQoYSxiKXtmdW5jdGlvbiBjKCl7fWMucHJvdG90eXBlPWIucHJvdG90eXBlO2EuWj1iLnByb3RvdHlwZTthLnByb3RvdHlwZT1uZXcgYzthLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1hO2EuVmI9ZnVuY3Rpb24oZCxlLGYpe2Zvcih2YXIgaD1BcnJheShhcmd1bWVudHMubGVuZ3RoLTIpLG49MjtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKWhbbi0yXT1hcmd1bWVudHNbbl07cmV0dXJuIGIucHJvdG90eXBlW2VdLmFwcGx5KGQsaCl9O31mdW5jdGlvbiB2KCl7dGhpcy5zPXRoaXMuczt0aGlzLm89dGhpcy5vO312YXIga2E9MCxsYT17fTt2LnByb3RvdHlwZS5zPSExO3YucHJvdG90eXBlLm5hPWZ1bmN0aW9uKCl7aWYoIXRoaXMucyYmKHRoaXMucz0hMCx0aGlzLk0oKSwwIT1rYSkpe3ZhciBhPWRhKHRoaXMpO2RlbGV0ZSBsYVthXTt9fTt2LnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7aWYodGhpcy5vKWZvcig7dGhpcy5vLmxlbmd0aDspdGhpcy5vLnNoaWZ0KCkoKTt9O2NvbnN0IG1hPUFycmF5LnByb3RvdHlwZS5pbmRleE9mP2Z1bmN0aW9uKGEsYil7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYSxiLHZvaWQgMCl9OmZ1bmN0aW9uKGEsYil7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBcInN0cmluZ1wiIT09dHlwZW9mIGJ8fDEhPWIubGVuZ3RoPy0xOmEuaW5kZXhPZihiLDApO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKWlmKGMgaW4gYSYmYVtjXT09PWIpcmV0dXJuIGM7cmV0dXJuIC0xfSxuYT1BcnJheS5wcm90b3R5cGUuZm9yRWFjaD9mdW5jdGlvbihhLGIsYyl7QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChhLGIsYyk7fTpmdW5jdGlvbihhLGIsYyl7Y29uc3QgZD1hLmxlbmd0aCxlPVwic3RyaW5nXCI9PT10eXBlb2YgYT9hLnNwbGl0KFwiXCIpOmE7Zm9yKGxldCBmPTA7ZjxkO2YrKylmIGluIGUmJmIuY2FsbChjLGVbZl0sZixhKTt9O1xuZnVuY3Rpb24gb2EoYSl7YTp7dmFyIGI9cGE7Y29uc3QgYz1hLmxlbmd0aCxkPVwic3RyaW5nXCI9PT10eXBlb2YgYT9hLnNwbGl0KFwiXCIpOmE7Zm9yKGxldCBlPTA7ZTxjO2UrKylpZihlIGluIGQmJmIuY2FsbCh2b2lkIDAsZFtlXSxlLGEpKXtiPWU7YnJlYWsgYX1iPS0xO31yZXR1cm4gMD5iP251bGw6XCJzdHJpbmdcIj09PXR5cGVvZiBhP2EuY2hhckF0KGIpOmFbYl19ZnVuY3Rpb24gcWEoYSl7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sYXJndW1lbnRzKX1mdW5jdGlvbiByYShhKXtjb25zdCBiPWEubGVuZ3RoO2lmKDA8Yil7Y29uc3QgYz1BcnJheShiKTtmb3IobGV0IGQ9MDtkPGI7ZCsrKWNbZF09YVtkXTtyZXR1cm4gY31yZXR1cm4gW119ZnVuY3Rpb24gc2EoYSl7cmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpfXZhciB0YT1TdHJpbmcucHJvdG90eXBlLnRyaW0/ZnVuY3Rpb24oYSl7cmV0dXJuIGEudHJpbSgpfTpmdW5jdGlvbihhKXtyZXR1cm4gL15bXFxzXFx4YTBdKihbXFxzXFxTXSo/KVtcXHNcXHhhMF0qJC8uZXhlYyhhKVsxXX07ZnVuY3Rpb24gdyhhLGIpe3JldHVybiAtMSE9YS5pbmRleE9mKGIpfWZ1bmN0aW9uIHVhKGEsYil7cmV0dXJuIGE8Yj8tMTphPmI/MTowfXZhciB4O2E6e3ZhciB2YT1sLm5hdmlnYXRvcjtpZih2YSl7dmFyIHdhPXZhLnVzZXJBZ2VudDtpZih3YSl7eD13YTticmVhayBhfX14PVwiXCI7fWZ1bmN0aW9uIHhhKGEsYixjKXtmb3IoY29uc3QgZCBpbiBhKWIuY2FsbChjLGFbZF0sZCxhKTt9ZnVuY3Rpb24geWEoYSl7Y29uc3QgYj17fTtmb3IoY29uc3QgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn12YXIgemE9XCJjb25zdHJ1Y3RvciBoYXNPd25Qcm9wZXJ0eSBpc1Byb3RvdHlwZU9mIHByb3BlcnR5SXNFbnVtZXJhYmxlIHRvTG9jYWxlU3RyaW5nIHRvU3RyaW5nIHZhbHVlT2ZcIi5zcGxpdChcIiBcIik7ZnVuY3Rpb24gQWEoYSxiKXtsZXQgYyxkO2ZvcihsZXQgZT0xO2U8YXJndW1lbnRzLmxlbmd0aDtlKyspe2Q9YXJndW1lbnRzW2VdO2ZvcihjIGluIGQpYVtjXT1kW2NdO2ZvcihsZXQgZj0wO2Y8emEubGVuZ3RoO2YrKyljPXphW2ZdLE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChkLGMpJiYoYVtjXT1kW2NdKTt9fWZ1bmN0aW9uIENhKGEpe0NhW1wiIFwiXShhKTtyZXR1cm4gYX1DYVtcIiBcIl09YWE7ZnVuY3Rpb24gRmEoYSl7dmFyIGI9R2E7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLDkpP2JbOV06Yls5XT1hKDkpfXZhciBIYT13KHgsXCJPcGVyYVwiKSx5PXcoeCxcIlRyaWRlbnRcIil8fHcoeCxcIk1TSUVcIiksSWE9dyh4LFwiRWRnZVwiKSxKYT1JYXx8eSxLYT13KHgsXCJHZWNrb1wiKSYmISh3KHgudG9Mb3dlckNhc2UoKSxcIndlYmtpdFwiKSYmIXcoeCxcIkVkZ2VcIikpJiYhKHcoeCxcIlRyaWRlbnRcIil8fHcoeCxcIk1TSUVcIikpJiYhdyh4LFwiRWRnZVwiKSxMYT13KHgudG9Mb3dlckNhc2UoKSxcIndlYmtpdFwiKSYmIXcoeCxcIkVkZ2VcIik7ZnVuY3Rpb24gTWEoKXt2YXIgYT1sLmRvY3VtZW50O3JldHVybiBhP2EuZG9jdW1lbnRNb2RlOnZvaWQgMH12YXIgTmE7XG5hOnt2YXIgT2E9XCJcIixQYT1mdW5jdGlvbigpe3ZhciBhPXg7aWYoS2EpcmV0dXJuIC9ydjooW15cXCk7XSspKFxcKXw7KS8uZXhlYyhhKTtpZihJYSlyZXR1cm4gL0VkZ2VcXC8oW1xcZFxcLl0rKS8uZXhlYyhhKTtpZih5KXJldHVybiAvXFxiKD86TVNJRXxydilbOiBdKFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYoTGEpcmV0dXJuIC9XZWJLaXRcXC8oXFxTKykvLmV4ZWMoYSk7aWYoSGEpcmV0dXJuIC8oPzpWZXJzaW9uKVsgXFwvXT8oXFxTKykvLmV4ZWMoYSl9KCk7UGEmJihPYT1QYT9QYVsxXTpcIlwiKTtpZih5KXt2YXIgUWE9TWEoKTtpZihudWxsIT1RYSYmUWE+cGFyc2VGbG9hdChPYSkpe05hPVN0cmluZyhRYSk7YnJlYWsgYX19TmE9T2E7fXZhciBHYT17fTtcbmZ1bmN0aW9uIFJhKCl7cmV0dXJuIEZhKGZ1bmN0aW9uKCl7bGV0IGE9MDtjb25zdCBiPXRhKFN0cmluZyhOYSkpLnNwbGl0KFwiLlwiKSxjPXRhKFwiOVwiKS5zcGxpdChcIi5cIiksZD1NYXRoLm1heChiLmxlbmd0aCxjLmxlbmd0aCk7Zm9yKGxldCBoPTA7MD09YSYmaDxkO2grKyl7dmFyIGU9YltoXXx8XCJcIixmPWNbaF18fFwiXCI7ZG97ZT0vKFxcZCopKFxcRCopKC4qKS8uZXhlYyhlKXx8W1wiXCIsXCJcIixcIlwiLFwiXCJdO2Y9LyhcXGQqKShcXEQqKSguKikvLmV4ZWMoZil8fFtcIlwiLFwiXCIsXCJcIixcIlwiXTtpZigwPT1lWzBdLmxlbmd0aCYmMD09ZlswXS5sZW5ndGgpYnJlYWs7YT11YSgwPT1lWzFdLmxlbmd0aD8wOnBhcnNlSW50KGVbMV0sMTApLDA9PWZbMV0ubGVuZ3RoPzA6cGFyc2VJbnQoZlsxXSwxMCkpfHx1YSgwPT1lWzJdLmxlbmd0aCwwPT1mWzJdLmxlbmd0aCl8fHVhKGVbMl0sZlsyXSk7ZT1lWzNdO2Y9ZlszXTt9d2hpbGUoMD09YSl9cmV0dXJuIDA8PWF9KX12YXIgU2E7XG5pZihsLmRvY3VtZW50JiZ5KXt2YXIgVGE9TWEoKTtTYT1UYT9UYTpwYXJzZUludChOYSwxMCl8fHZvaWQgMDt9ZWxzZSBTYT12b2lkIDA7dmFyIFVhPVNhO3ZhciBWYT1mdW5jdGlvbigpe2lmKCFsLmFkZEV2ZW50TGlzdGVuZXJ8fCFPYmplY3QuZGVmaW5lUHJvcGVydHkpcmV0dXJuICExO3ZhciBhPSExLGI9T2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LFwicGFzc2l2ZVwiLHtnZXQ6ZnVuY3Rpb24oKXthPSEwO319KTt0cnl7bC5hZGRFdmVudExpc3RlbmVyKFwidGVzdFwiLGFhLGIpLGwucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRlc3RcIixhYSxiKTt9Y2F0Y2goYyl7fXJldHVybiBhfSgpO2Z1bmN0aW9uIHooYSxiKXt0aGlzLnR5cGU9YTt0aGlzLmc9dGhpcy50YXJnZXQ9Yjt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITE7fXoucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7fTtmdW5jdGlvbiBBKGEsYil7ei5jYWxsKHRoaXMsYT9hLnR5cGU6XCJcIik7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuZz10aGlzLnRhcmdldD1udWxsO3RoaXMuYnV0dG9uPXRoaXMuc2NyZWVuWT10aGlzLnNjcmVlblg9dGhpcy5jbGllbnRZPXRoaXMuY2xpZW50WD0wO3RoaXMua2V5PVwiXCI7dGhpcy5tZXRhS2V5PXRoaXMuc2hpZnRLZXk9dGhpcy5hbHRLZXk9dGhpcy5jdHJsS2V5PSExO3RoaXMuc3RhdGU9bnVsbDt0aGlzLnBvaW50ZXJJZD0wO3RoaXMucG9pbnRlclR5cGU9XCJcIjt0aGlzLmk9bnVsbDtpZihhKXt2YXIgYz10aGlzLnR5cGU9YS50eXBlLGQ9YS5jaGFuZ2VkVG91Y2hlcyYmYS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/YS5jaGFuZ2VkVG91Y2hlc1swXTpudWxsO3RoaXMudGFyZ2V0PWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7dGhpcy5nPWI7aWYoYj1hLnJlbGF0ZWRUYXJnZXQpe2lmKEthKXthOnt0cnl7Q2EoYi5ub2RlTmFtZSk7dmFyIGU9ITA7YnJlYWsgYX1jYXRjaChmKXt9ZT1cbiExO31lfHwoYj1udWxsKTt9fWVsc2UgXCJtb3VzZW92ZXJcIj09Yz9iPWEuZnJvbUVsZW1lbnQ6XCJtb3VzZW91dFwiPT1jJiYoYj1hLnRvRWxlbWVudCk7dGhpcy5yZWxhdGVkVGFyZ2V0PWI7ZD8odGhpcy5jbGllbnRYPXZvaWQgMCE9PWQuY2xpZW50WD9kLmNsaWVudFg6ZC5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09ZC5jbGllbnRZP2QuY2xpZW50WTpkLnBhZ2VZLHRoaXMuc2NyZWVuWD1kLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWQuc2NyZWVuWXx8MCk6KHRoaXMuY2xpZW50WD12b2lkIDAhPT1hLmNsaWVudFg/YS5jbGllbnRYOmEucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWEuY2xpZW50WT9hLmNsaWVudFk6YS5wYWdlWSx0aGlzLnNjcmVlblg9YS5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1hLnNjcmVlbll8fDApO3RoaXMuYnV0dG9uPWEuYnV0dG9uO3RoaXMua2V5PWEua2V5fHxcIlwiO3RoaXMuY3RybEtleT1hLmN0cmxLZXk7dGhpcy5hbHRLZXk9YS5hbHRLZXk7dGhpcy5zaGlmdEtleT1cbmEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PWEubWV0YUtleTt0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZHx8MDt0aGlzLnBvaW50ZXJUeXBlPVwic3RyaW5nXCI9PT10eXBlb2YgYS5wb2ludGVyVHlwZT9hLnBvaW50ZXJUeXBlOldhW2EucG9pbnRlclR5cGVdfHxcIlwiO3RoaXMuc3RhdGU9YS5zdGF0ZTt0aGlzLmk9YTthLmRlZmF1bHRQcmV2ZW50ZWQmJkEuWi5oLmNhbGwodGhpcyk7fX10KEEseik7dmFyIFdhPXsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9O0EucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtBLlouaC5jYWxsKHRoaXMpO3ZhciBhPXRoaXMuaTthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExO307dmFyIEI9XCJjbG9zdXJlX2xpc3RlbmFibGVfXCIrKDFFNipNYXRoLnJhbmRvbSgpfDApO3ZhciBYYT0wO2Z1bmN0aW9uIFlhKGEsYixjLGQsZSl7dGhpcy5saXN0ZW5lcj1hO3RoaXMucHJveHk9bnVsbDt0aGlzLnNyYz1iO3RoaXMudHlwZT1jO3RoaXMuY2FwdHVyZT0hIWQ7dGhpcy5pYT1lO3RoaXMua2V5PSsrWGE7dGhpcy5jYT10aGlzLmZhPSExO31mdW5jdGlvbiBaYShhKXthLmNhPSEwO2EubGlzdGVuZXI9bnVsbDthLnByb3h5PW51bGw7YS5zcmM9bnVsbDthLmlhPW51bGw7fWZ1bmN0aW9uICRhKGEpe3RoaXMuc3JjPWE7dGhpcy5nPXt9O3RoaXMuaD0wO30kYS5wcm90b3R5cGUuYWRkPWZ1bmN0aW9uKGEsYixjLGQsZSl7dmFyIGY9YS50b1N0cmluZygpO2E9dGhpcy5nW2ZdO2F8fChhPXRoaXMuZ1tmXT1bXSx0aGlzLmgrKyk7dmFyIGg9YWIoYSxiLGQsZSk7LTE8aD8oYj1hW2hdLGN8fChiLmZhPSExKSk6KGI9bmV3IFlhKGIsdGhpcy5zcmMsZiwhIWQsZSksYi5mYT1jLGEucHVzaChiKSk7cmV0dXJuIGJ9O2Z1bmN0aW9uIGJiKGEsYil7dmFyIGM9Yi50eXBlO2lmKGMgaW4gYS5nKXt2YXIgZD1hLmdbY10sZT1tYShkLGIpLGY7KGY9MDw9ZSkmJkFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChkLGUsMSk7ZiYmKFphKGIpLDA9PWEuZ1tjXS5sZW5ndGgmJihkZWxldGUgYS5nW2NdLGEuaC0tKSk7fX1cbmZ1bmN0aW9uIGFiKGEsYixjLGQpe2Zvcih2YXIgZT0wO2U8YS5sZW5ndGg7KytlKXt2YXIgZj1hW2VdO2lmKCFmLmNhJiZmLmxpc3RlbmVyPT1iJiZmLmNhcHR1cmU9PSEhYyYmZi5pYT09ZClyZXR1cm4gZX1yZXR1cm4gLTF9dmFyIGNiPVwiY2xvc3VyZV9sbV9cIisoMUU2Kk1hdGgucmFuZG9tKCl8MCksZGI9e307ZnVuY3Rpb24gZmIoYSxiLGMsZCxlKXtpZihkJiZkLm9uY2UpcmV0dXJuIGdiKGEsYixjLGQsZSk7aWYoQXJyYXkuaXNBcnJheShiKSl7Zm9yKHZhciBmPTA7ZjxiLmxlbmd0aDtmKyspZmIoYSxiW2ZdLGMsZCxlKTtyZXR1cm4gbnVsbH1jPWhiKGMpO3JldHVybiBhJiZhW0JdP2EuTihiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6aWIoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGliKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgaD1wKGUpPyEhZS5jYXB0dXJlOiEhZSxuPWpiKGEpO258fChhW2NiXT1uPW5ldyAkYShhKSk7Yz1uLmFkZChiLGMsZCxoLGYpO2lmKGMucHJveHkpcmV0dXJuIGM7ZD1rYigpO2MucHJveHk9ZDtkLnNyYz1hO2QubGlzdGVuZXI9YztpZihhLmFkZEV2ZW50TGlzdGVuZXIpVmF8fChlPWgpLHZvaWQgMD09PWUmJihlPSExKSxhLmFkZEV2ZW50TGlzdGVuZXIoYi50b1N0cmluZygpLGQsZSk7ZWxzZSBpZihhLmF0dGFjaEV2ZW50KWEuYXR0YWNoRXZlbnQobGIoYi50b1N0cmluZygpKSxkKTtlbHNlIGlmKGEuYWRkTGlzdGVuZXImJmEucmVtb3ZlTGlzdGVuZXIpYS5hZGRMaXN0ZW5lcihkKTtlbHNlIHRocm93IEVycm9yKFwiYWRkRXZlbnRMaXN0ZW5lciBhbmQgYXR0YWNoRXZlbnQgYXJlIHVuYXZhaWxhYmxlLlwiKTtyZXR1cm4gY31cbmZ1bmN0aW9uIGtiKCl7ZnVuY3Rpb24gYShjKXtyZXR1cm4gYi5jYWxsKGEuc3JjLGEubGlzdGVuZXIsYyl9dmFyIGI9bWI7cmV0dXJuIGF9ZnVuY3Rpb24gZ2IoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylnYihhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9aGIoYyk7cmV0dXJuIGEmJmFbQl0/YS5PKGIsYyxwKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTppYihhLGIsYywhMCxkLGUpfVxuZnVuY3Rpb24gbmIoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKW5iKGEsYltmXSxjLGQsZSk7ZWxzZSAoZD1wKGQpPyEhZC5jYXB0dXJlOiEhZCxjPWhiKGMpLGEmJmFbQl0pPyhhPWEuaSxiPVN0cmluZyhiKS50b1N0cmluZygpLGIgaW4gYS5nJiYoZj1hLmdbYl0sYz1hYihmLGMsZCxlKSwtMTxjJiYoWmEoZltjXSksQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGYsYywxKSwwPT1mLmxlbmd0aCYmKGRlbGV0ZSBhLmdbYl0sYS5oLS0pKSkpOmEmJihhPWpiKGEpKSYmKGI9YS5nW2IudG9TdHJpbmcoKV0sYT0tMSxiJiYoYT1hYihiLGMsZCxlKSksKGM9LTE8YT9iW2FdOm51bGwpJiZvYihjKSk7fVxuZnVuY3Rpb24gb2IoYSl7aWYoXCJudW1iZXJcIiE9PXR5cGVvZiBhJiZhJiYhYS5jYSl7dmFyIGI9YS5zcmM7aWYoYiYmYltCXSliYihiLmksYSk7ZWxzZSB7dmFyIGM9YS50eXBlLGQ9YS5wcm94eTtiLnJlbW92ZUV2ZW50TGlzdGVuZXI/Yi5yZW1vdmVFdmVudExpc3RlbmVyKGMsZCxhLmNhcHR1cmUpOmIuZGV0YWNoRXZlbnQ/Yi5kZXRhY2hFdmVudChsYihjKSxkKTpiLmFkZExpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyJiZiLnJlbW92ZUxpc3RlbmVyKGQpOyhjPWpiKGIpKT8oYmIoYyxhKSwwPT1jLmgmJihjLnNyYz1udWxsLGJbY2JdPW51bGwpKTpaYShhKTt9fX1mdW5jdGlvbiBsYihhKXtyZXR1cm4gYSBpbiBkYj9kYlthXTpkYlthXT1cIm9uXCIrYX1mdW5jdGlvbiBtYihhLGIpe2lmKGEuY2EpYT0hMDtlbHNlIHtiPW5ldyBBKGIsdGhpcyk7dmFyIGM9YS5saXN0ZW5lcixkPWEuaWF8fGEuc3JjO2EuZmEmJm9iKGEpO2E9Yy5jYWxsKGQsYik7fXJldHVybiBhfVxuZnVuY3Rpb24gamIoYSl7YT1hW2NiXTtyZXR1cm4gYSBpbnN0YW5jZW9mICRhP2E6bnVsbH12YXIgcGI9XCJfX2Nsb3N1cmVfZXZlbnRzX2ZuX1wiKygxRTkqTWF0aC5yYW5kb20oKT4+PjApO2Z1bmN0aW9uIGhiKGEpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKXJldHVybiBhO2FbcGJdfHwoYVtwYl09ZnVuY3Rpb24oYil7cmV0dXJuIGEuaGFuZGxlRXZlbnQoYil9KTtyZXR1cm4gYVtwYl19ZnVuY3Rpb24gQygpe3YuY2FsbCh0aGlzKTt0aGlzLmk9bmV3ICRhKHRoaXMpO3RoaXMuUD10aGlzO3RoaXMuST1udWxsO310KEMsdik7Qy5wcm90b3R5cGVbQl09ITA7Qy5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtuYih0aGlzLGEsYixjLGQpO307XG5mdW5jdGlvbiBEKGEsYil7dmFyIGMsZD1hLkk7aWYoZClmb3IoYz1bXTtkO2Q9ZC5JKWMucHVzaChkKTthPWEuUDtkPWIudHlwZXx8YjtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpYj1uZXcgeihiLGEpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIHopYi50YXJnZXQ9Yi50YXJnZXR8fGE7ZWxzZSB7dmFyIGU9YjtiPW5ldyB6KGQsYSk7QWEoYixlKTt9ZT0hMDtpZihjKWZvcih2YXIgZj1jLmxlbmd0aC0xOzA8PWY7Zi0tKXt2YXIgaD1iLmc9Y1tmXTtlPXFiKGgsZCwhMCxiKSYmZTt9aD1iLmc9YTtlPXFiKGgsZCwhMCxiKSYmZTtlPXFiKGgsZCwhMSxiKSYmZTtpZihjKWZvcihmPTA7ZjxjLmxlbmd0aDtmKyspaD1iLmc9Y1tmXSxlPXFiKGgsZCwhMSxiKSYmZTt9XG5DLnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7Qy5aLk0uY2FsbCh0aGlzKTtpZih0aGlzLmkpe3ZhciBhPXRoaXMuaSxjO2ZvcihjIGluIGEuZyl7Zm9yKHZhciBkPWEuZ1tjXSxlPTA7ZTxkLmxlbmd0aDtlKyspWmEoZFtlXSk7ZGVsZXRlIGEuZ1tjXTthLmgtLTt9fXRoaXMuST1udWxsO307Qy5wcm90b3R5cGUuTj1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMSxjLGQpfTtDLnByb3RvdHlwZS5PPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmkuYWRkKFN0cmluZyhhKSxiLCEwLGMsZCl9O1xuZnVuY3Rpb24gcWIoYSxiLGMsZCl7Yj1hLmkuZ1tTdHJpbmcoYildO2lmKCFiKXJldHVybiAhMDtiPWIuY29uY2F0KCk7Zm9yKHZhciBlPSEwLGY9MDtmPGIubGVuZ3RoOysrZil7dmFyIGg9YltmXTtpZihoJiYhaC5jYSYmaC5jYXB0dXJlPT1jKXt2YXIgbj1oLmxpc3RlbmVyLHU9aC5pYXx8aC5zcmM7aC5mYSYmYmIoYS5pLGgpO2U9ITEhPT1uLmNhbGwodSxkKSYmZTt9fXJldHVybiBlJiYhZC5kZWZhdWx0UHJldmVudGVkfXZhciByYj1sLkpTT04uc3RyaW5naWZ5O2Z1bmN0aW9uIHNiKCl7dmFyIGE9dGI7bGV0IGI9bnVsbDthLmcmJihiPWEuZyxhLmc9YS5nLm5leHQsYS5nfHwoYS5oPW51bGwpLGIubmV4dD1udWxsKTtyZXR1cm4gYn1jbGFzcyB1Yntjb25zdHJ1Y3Rvcigpe3RoaXMuaD10aGlzLmc9bnVsbDt9YWRkKGEsYil7Y29uc3QgYz12Yi5nZXQoKTtjLnNldChhLGIpO3RoaXMuaD90aGlzLmgubmV4dD1jOnRoaXMuZz1jO3RoaXMuaD1jO319dmFyIHZiPW5ldyBjbGFzc3tjb25zdHJ1Y3RvcihhLGIpe3RoaXMuaT1hO3RoaXMuaj1iO3RoaXMuaD0wO3RoaXMuZz1udWxsO31nZXQoKXtsZXQgYTswPHRoaXMuaD8odGhpcy5oLS0sYT10aGlzLmcsdGhpcy5nPWEubmV4dCxhLm5leHQ9bnVsbCk6YT10aGlzLmkoKTtyZXR1cm4gYX19KCgpPT5uZXcgd2IsYT0+YS5yZXNldCgpKTtcbmNsYXNzIHdie2NvbnN0cnVjdG9yKCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9c2V0KGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7dGhpcy5uZXh0PW51bGw7fXJlc2V0KCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9fWZ1bmN0aW9uIHliKGEpe2wuc2V0VGltZW91dCgoKT0+e3Rocm93IGE7fSwwKTt9ZnVuY3Rpb24gemIoYSxiKXtBYnx8QmIoKTtDYnx8KEFiKCksQ2I9ITApO3RiLmFkZChhLGIpO312YXIgQWI7ZnVuY3Rpb24gQmIoKXt2YXIgYT1sLlByb21pc2UucmVzb2x2ZSh2b2lkIDApO0FiPWZ1bmN0aW9uKCl7YS50aGVuKERiKTt9O312YXIgQ2I9ITEsdGI9bmV3IHViO2Z1bmN0aW9uIERiKCl7Zm9yKHZhciBhO2E9c2IoKTspe3RyeXthLmguY2FsbChhLmcpO31jYXRjaChjKXt5YihjKTt9dmFyIGI9dmI7Yi5qKGEpOzEwMD5iLmgmJihiLmgrKyxhLm5leHQ9Yi5nLGIuZz1hKTt9Q2I9ITE7fWZ1bmN0aW9uIEViKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuaD1hfHwxO3RoaXMuZz1ifHxsO3RoaXMuaj1xKHRoaXMua2IsdGhpcyk7dGhpcy5sPURhdGUubm93KCk7fXQoRWIsQyk7az1FYi5wcm90b3R5cGU7ay5kYT0hMTtrLlM9bnVsbDtrLmtiPWZ1bmN0aW9uKCl7aWYodGhpcy5kYSl7dmFyIGE9RGF0ZS5ub3coKS10aGlzLmw7MDxhJiZhPC44KnRoaXMuaD90aGlzLlM9dGhpcy5nLnNldFRpbWVvdXQodGhpcy5qLHRoaXMuaC1hKToodGhpcy5TJiYodGhpcy5nLmNsZWFyVGltZW91dCh0aGlzLlMpLHRoaXMuUz1udWxsKSxEKHRoaXMsXCJ0aWNrXCIpLHRoaXMuZGEmJihGYih0aGlzKSx0aGlzLnN0YXJ0KCkpKTt9fTtrLnN0YXJ0PWZ1bmN0aW9uKCl7dGhpcy5kYT0hMDt0aGlzLlN8fCh0aGlzLlM9dGhpcy5nLnNldFRpbWVvdXQodGhpcy5qLHRoaXMuaCksdGhpcy5sPURhdGUubm93KCkpO307XG5mdW5jdGlvbiBGYihhKXthLmRhPSExO2EuUyYmKGEuZy5jbGVhclRpbWVvdXQoYS5TKSxhLlM9bnVsbCk7fWsuTT1mdW5jdGlvbigpe0ViLlouTS5jYWxsKHRoaXMpO0ZiKHRoaXMpO2RlbGV0ZSB0aGlzLmc7fTtmdW5jdGlvbiBHYihhLGIsYyl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpYyYmKGE9cShhLGMpKTtlbHNlIGlmKGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuaGFuZGxlRXZlbnQpYT1xKGEuaGFuZGxlRXZlbnQsYSk7ZWxzZSB0aHJvdyBFcnJvcihcIkludmFsaWQgbGlzdGVuZXIgYXJndW1lbnRcIik7cmV0dXJuIDIxNDc0ODM2NDc8TnVtYmVyKGIpPy0xOmwuc2V0VGltZW91dChhLGJ8fDApfWZ1bmN0aW9uIEhiKGEpe2EuZz1HYigoKT0+e2EuZz1udWxsO2EuaSYmKGEuaT0hMSxIYihhKSk7fSxhLmopO2NvbnN0IGI9YS5oO2EuaD1udWxsO2EubS5hcHBseShudWxsLGIpO31jbGFzcyBJYiBleHRlbmRzIHZ7Y29uc3RydWN0b3IoYSxiKXtzdXBlcigpO3RoaXMubT1hO3RoaXMuaj1iO3RoaXMuaD1udWxsO3RoaXMuaT0hMTt0aGlzLmc9bnVsbDt9bChhKXt0aGlzLmg9YXJndW1lbnRzO3RoaXMuZz90aGlzLmk9ITA6SGIodGhpcyk7fU0oKXtzdXBlci5NKCk7dGhpcy5nJiYobC5jbGVhclRpbWVvdXQodGhpcy5nKSx0aGlzLmc9bnVsbCx0aGlzLmk9ITEsdGhpcy5oPW51bGwpO319ZnVuY3Rpb24gRShhKXt2LmNhbGwodGhpcyk7dGhpcy5oPWE7dGhpcy5nPXt9O310KEUsdik7dmFyIEpiPVtdO2Z1bmN0aW9uIEtiKGEsYixjLGQpe0FycmF5LmlzQXJyYXkoYyl8fChjJiYoSmJbMF09Yy50b1N0cmluZygpKSxjPUpiKTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9ZmIoYixjW2VdLGR8fGEuaGFuZGxlRXZlbnQsITEsYS5ofHxhKTtpZighZilicmVhazthLmdbZi5rZXldPWY7fX1mdW5jdGlvbiBMYihhKXt4YShhLmcsZnVuY3Rpb24oYixjKXt0aGlzLmcuaGFzT3duUHJvcGVydHkoYykmJm9iKGIpO30sYSk7YS5nPXt9O31FLnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7RS5aLk0uY2FsbCh0aGlzKTtMYih0aGlzKTt9O0UucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpO307ZnVuY3Rpb24gTWIoKXt0aGlzLmc9ITA7fU1iLnByb3RvdHlwZS5BYT1mdW5jdGlvbigpe3RoaXMuZz0hMTt9O2Z1bmN0aW9uIE5iKGEsYixjLGQsZSxmKXthLmluZm8oZnVuY3Rpb24oKXtpZihhLmcpaWYoZil7dmFyIGg9XCJcIjtmb3IodmFyIG49Zi5zcGxpdChcIiZcIiksdT0wO3U8bi5sZW5ndGg7dSsrKXt2YXIgbT1uW3VdLnNwbGl0KFwiPVwiKTtpZigxPG0ubGVuZ3RoKXt2YXIgcj1tWzBdO209bVsxXTt2YXIgRz1yLnNwbGl0KFwiX1wiKTtoPTI8PUcubGVuZ3RoJiZcInR5cGVcIj09R1sxXT9oKyhyK1wiPVwiK20rXCImXCIpOmgrKHIrXCI9cmVkYWN0ZWQmXCIpO319fWVsc2UgaD1udWxsO2Vsc2UgaD1mO3JldHVybiBcIlhNTEhUVFAgUkVRIChcIitkK1wiKSBbYXR0ZW1wdCBcIitlK1wiXTogXCIrYitcIlxcblwiK2MrXCJcXG5cIitofSk7fVxuZnVuY3Rpb24gT2IoYSxiLGMsZCxlLGYsaCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBSRVNQIChcIitkK1wiKSBbIGF0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIrZitcIiBcIitofSk7fWZ1bmN0aW9uIEYoYSxiLGMsZCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBURVhUIChcIitiK1wiKTogXCIrUGIoYSxjKSsoZD9cIiBcIitkOlwiXCIpfSk7fWZ1bmN0aW9uIFFiKGEsYil7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiVElNRU9VVDogXCIrYn0pO31NYi5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbigpe307XG5mdW5jdGlvbiBQYihhLGIpe2lmKCFhLmcpcmV0dXJuIGI7aWYoIWIpcmV0dXJuIG51bGw7dHJ5e3ZhciBjPUpTT04ucGFyc2UoYik7aWYoYylmb3IoYT0wO2E8Yy5sZW5ndGg7YSsrKWlmKEFycmF5LmlzQXJyYXkoY1thXSkpe3ZhciBkPWNbYV07aWYoISgyPmQubGVuZ3RoKSl7dmFyIGU9ZFsxXTtpZihBcnJheS5pc0FycmF5KGUpJiYhKDE+ZS5sZW5ndGgpKXt2YXIgZj1lWzBdO2lmKFwibm9vcFwiIT1mJiZcInN0b3BcIiE9ZiYmXCJjbG9zZVwiIT1mKWZvcih2YXIgaD0xO2g8ZS5sZW5ndGg7aCsrKWVbaF09XCJcIjt9fX1yZXR1cm4gcmIoYyl9Y2F0Y2gobil7cmV0dXJuIGJ9fXZhciBIPXt9LFJiPW51bGw7ZnVuY3Rpb24gU2IoKXtyZXR1cm4gUmI9UmJ8fG5ldyBDfUguTWE9XCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIjtmdW5jdGlvbiBUYihhKXt6LmNhbGwodGhpcyxILk1hLGEpO310KFRiLHopO2Z1bmN0aW9uIEkoYSl7Y29uc3QgYj1TYigpO0QoYixuZXcgVGIoYixhKSk7fUguU1RBVF9FVkVOVD1cInN0YXRldmVudFwiO2Z1bmN0aW9uIFViKGEsYil7ei5jYWxsKHRoaXMsSC5TVEFUX0VWRU5ULGEpO3RoaXMuc3RhdD1iO310KFViLHopO2Z1bmN0aW9uIEooYSl7Y29uc3QgYj1TYigpO0QoYixuZXcgVWIoYixhKSk7fUguTmE9XCJ0aW1pbmdldmVudFwiO2Z1bmN0aW9uIFZiKGEsYil7ei5jYWxsKHRoaXMsSC5OYSxhKTt0aGlzLnNpemU9Yjt9dChWYix6KTtcbmZ1bmN0aW9uIEsoYSxiKXtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgYSl0aHJvdyBFcnJvcihcIkZuIG11c3Qgbm90IGJlIG51bGwgYW5kIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSgpO30sYil9dmFyIFdiPXtOT19FUlJPUjowLGxiOjEseWI6Mix4YjozLHNiOjQsd2I6NSx6Yjo2LEphOjcsVElNRU9VVDo4LENiOjl9O3ZhciBYYj17cWI6XCJjb21wbGV0ZVwiLE1iOlwic3VjY2Vzc1wiLEthOlwiZXJyb3JcIixKYTpcImFib3J0XCIsRWI6XCJyZWFkeVwiLEZiOlwicmVhZHlzdGF0ZWNoYW5nZVwiLFRJTUVPVVQ6XCJ0aW1lb3V0XCIsQWI6XCJpbmNyZW1lbnRhbGRhdGFcIixEYjpcInByb2dyZXNzXCIsdGI6XCJkb3dubG9hZHByb2dyZXNzXCIsVWI6XCJ1cGxvYWRwcm9ncmVzc1wifTtmdW5jdGlvbiBZYigpe31ZYi5wcm90b3R5cGUuaD1udWxsO2Z1bmN0aW9uIFpiKGEpe3JldHVybiBhLmh8fChhLmg9YS5pKCkpfWZ1bmN0aW9uICRiKCl7fXZhciBMPXtPUEVOOlwiYVwiLHBiOlwiYlwiLEthOlwiY1wiLEJiOlwiZFwifTtmdW5jdGlvbiBhYygpe3ouY2FsbCh0aGlzLFwiZFwiKTt9dChhYyx6KTtmdW5jdGlvbiBiYygpe3ouY2FsbCh0aGlzLFwiY1wiKTt9dChiYyx6KTt2YXIgY2M7ZnVuY3Rpb24gZGMoKXt9dChkYyxZYik7ZGMucHJvdG90eXBlLmc9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFhNTEh0dHBSZXF1ZXN0fTtkYy5wcm90b3R5cGUuaT1mdW5jdGlvbigpe3JldHVybiB7fX07Y2M9bmV3IGRjO2Z1bmN0aW9uIE0oYSxiLGMsZCl7dGhpcy5sPWE7dGhpcy5qPWI7dGhpcy5tPWM7dGhpcy5YPWR8fDE7dGhpcy5WPW5ldyBFKHRoaXMpO3RoaXMuUD1lYzthPUphPzEyNTp2b2lkIDA7dGhpcy5XPW5ldyBFYihhKTt0aGlzLkg9bnVsbDt0aGlzLmk9ITE7dGhpcy5zPXRoaXMuQT10aGlzLnY9dGhpcy5LPXRoaXMuRj10aGlzLlk9dGhpcy5CPW51bGw7dGhpcy5EPVtdO3RoaXMuZz1udWxsO3RoaXMuQz0wO3RoaXMubz10aGlzLnU9bnVsbDt0aGlzLk49LTE7dGhpcy5JPSExO3RoaXMuTz0wO3RoaXMuTD1udWxsO3RoaXMuYWE9dGhpcy5KPXRoaXMuJD10aGlzLlU9ITE7dGhpcy5oPW5ldyBmYzt9ZnVuY3Rpb24gZmMoKXt0aGlzLmk9bnVsbDt0aGlzLmc9XCJcIjt0aGlzLmg9ITE7fXZhciBlYz00NUUzLGdjPXt9LGhjPXt9O2s9TS5wcm90b3R5cGU7ay5zZXRUaW1lb3V0PWZ1bmN0aW9uKGEpe3RoaXMuUD1hO307XG5mdW5jdGlvbiBpYyhhLGIsYyl7YS5LPTE7YS52PWpjKE4oYikpO2Eucz1jO2EuVT0hMDtrYyhhLG51bGwpO31mdW5jdGlvbiBrYyhhLGIpe2EuRj1EYXRlLm5vdygpO2xjKGEpO2EuQT1OKGEudik7dmFyIGM9YS5BLGQ9YS5YO0FycmF5LmlzQXJyYXkoZCl8fChkPVtTdHJpbmcoZCldKTttYyhjLmgsXCJ0XCIsZCk7YS5DPTA7Yz1hLmwuSDthLmg9bmV3IGZjO2EuZz1uYyhhLmwsYz9iOm51bGwsIWEucyk7MDxhLk8mJihhLkw9bmV3IEliKHEoYS5JYSxhLGEuZyksYS5PKSk7S2IoYS5WLGEuZyxcInJlYWR5c3RhdGVjaGFuZ2VcIixhLmdiKTtiPWEuSD95YShhLkgpOnt9O2Eucz8oYS51fHwoYS51PVwiUE9TVFwiKSxiW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsYS5nLmVhKGEuQSxhLnUsYS5zLGIpKTooYS51PVwiR0VUXCIsYS5nLmVhKGEuQSxhLnUsbnVsbCxiKSk7SSgxKTtOYihhLmosYS51LGEuQSxhLm0sYS5YLGEucyk7fVxuay5nYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2NvbnN0IGI9dGhpcy5MO2ImJjM9PU8oYSk/Yi5sKCk6dGhpcy5JYShhKTt9O1xuay5JYT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5nKWE6e2NvbnN0IHI9Tyh0aGlzLmcpO3ZhciBiPXRoaXMuZy5EYSgpO2NvbnN0IEc9dGhpcy5nLmJhKCk7aWYoISgzPnIpJiYoMyE9cnx8SmF8fHRoaXMuZyYmKHRoaXMuaC5ofHx0aGlzLmcuZ2EoKXx8b2ModGhpcy5nKSkpKXt0aGlzLkl8fDQhPXJ8fDc9PWJ8fCg4PT1ifHwwPj1HP0koMyk6SSgyKSk7cGModGhpcyk7dmFyIGM9dGhpcy5nLmJhKCk7dGhpcy5OPWM7YjppZihxYyh0aGlzKSl7dmFyIGQ9b2ModGhpcy5nKTthPVwiXCI7dmFyIGU9ZC5sZW5ndGgsZj00PT1PKHRoaXMuZyk7aWYoIXRoaXMuaC5pKXtpZihcInVuZGVmaW5lZFwiPT09dHlwZW9mIFRleHREZWNvZGVyKXtQKHRoaXMpO3JjKHRoaXMpO3ZhciBoPVwiXCI7YnJlYWsgYn10aGlzLmguaT1uZXcgbC5UZXh0RGVjb2Rlcjt9Zm9yKGI9MDtiPGU7YisrKXRoaXMuaC5oPSEwLGErPXRoaXMuaC5pLmRlY29kZShkW2JdLHtzdHJlYW06ZiYmYj09ZS0xfSk7ZC5zcGxpY2UoMCxcbmUpO3RoaXMuaC5nKz1hO3RoaXMuQz0wO2g9dGhpcy5oLmc7fWVsc2UgaD10aGlzLmcuZ2EoKTt0aGlzLmk9MjAwPT1jO09iKHRoaXMuaix0aGlzLnUsdGhpcy5BLHRoaXMubSx0aGlzLlgscixjKTtpZih0aGlzLmkpe2lmKHRoaXMuJCYmIXRoaXMuSil7Yjp7aWYodGhpcy5nKXt2YXIgbix1PXRoaXMuZztpZigobj11Lmc/dS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1IVFRQLUluaXRpYWwtUmVzcG9uc2VcIik6bnVsbCkmJiFzYShuKSl7dmFyIG09bjticmVhayBifX1tPW51bGw7fWlmKGM9bSlGKHRoaXMuaix0aGlzLm0sYyxcIkluaXRpYWwgaGFuZHNoYWtlIHJlc3BvbnNlIHZpYSBYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKSx0aGlzLko9ITAsc2ModGhpcyxjKTtlbHNlIHt0aGlzLmk9ITE7dGhpcy5vPTM7SigxMik7UCh0aGlzKTtyYyh0aGlzKTticmVhayBhfX10aGlzLlU/KHRjKHRoaXMscixoKSxKYSYmdGhpcy5pJiYzPT1yJiYoS2IodGhpcy5WLHRoaXMuVyxcInRpY2tcIix0aGlzLmZiKSxcbnRoaXMuVy5zdGFydCgpKSk6KEYodGhpcy5qLHRoaXMubSxoLG51bGwpLHNjKHRoaXMsaCkpOzQ9PXImJlAodGhpcyk7dGhpcy5pJiYhdGhpcy5JJiYoND09cj91Yyh0aGlzLmwsdGhpcyk6KHRoaXMuaT0hMSxsYyh0aGlzKSkpO31lbHNlIDQwMD09YyYmMDxoLmluZGV4T2YoXCJVbmtub3duIFNJRFwiKT8odGhpcy5vPTMsSigxMikpOih0aGlzLm89MCxKKDEzKSksUCh0aGlzKSxyYyh0aGlzKTt9fX1jYXRjaChyKXt9ZmluYWxseXt9fTtmdW5jdGlvbiBxYyhhKXtyZXR1cm4gYS5nP1wiR0VUXCI9PWEudSYmMiE9YS5LJiZhLmwuQmE6ITF9XG5mdW5jdGlvbiB0YyhhLGIsYyl7bGV0IGQ9ITAsZTtmb3IoOyFhLkkmJmEuQzxjLmxlbmd0aDspaWYoZT12YyhhLGMpLGU9PWhjKXs0PT1iJiYoYS5vPTQsSigxNCksZD0hMSk7RihhLmosYS5tLG51bGwsXCJbSW5jb21wbGV0ZSBSZXNwb25zZV1cIik7YnJlYWt9ZWxzZSBpZihlPT1nYyl7YS5vPTQ7SigxNSk7RihhLmosYS5tLGMsXCJbSW52YWxpZCBDaHVua11cIik7ZD0hMTticmVha31lbHNlIEYoYS5qLGEubSxlLG51bGwpLHNjKGEsZSk7cWMoYSkmJmUhPWhjJiZlIT1nYyYmKGEuaC5nPVwiXCIsYS5DPTApOzQhPWJ8fDAhPWMubGVuZ3RofHxhLmguaHx8KGEubz0xLEooMTYpLGQ9ITEpO2EuaT1hLmkmJmQ7ZD8wPGMubGVuZ3RoJiYhYS5hYSYmKGEuYWE9ITAsYj1hLmwsYi5nPT1hJiZiLiQmJiFiLkwmJihiLmguaW5mbyhcIkdyZWF0LCBubyBidWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQuIEJ5dGVzIHJlY2VpdmVkOiBcIitjLmxlbmd0aCksd2MoYiksYi5MPSEwLEooMTEpKSk6KEYoYS5qLGEubSxcbmMsXCJbSW52YWxpZCBDaHVua2VkIFJlc3BvbnNlXVwiKSxQKGEpLHJjKGEpKTt9ay5mYj1mdW5jdGlvbigpe2lmKHRoaXMuZyl7dmFyIGE9Tyh0aGlzLmcpLGI9dGhpcy5nLmdhKCk7dGhpcy5DPGIubGVuZ3RoJiYocGModGhpcyksdGModGhpcyxhLGIpLHRoaXMuaSYmNCE9YSYmbGModGhpcykpO319O2Z1bmN0aW9uIHZjKGEsYil7dmFyIGM9YS5DLGQ9Yi5pbmRleE9mKFwiXFxuXCIsYyk7aWYoLTE9PWQpcmV0dXJuIGhjO2M9TnVtYmVyKGIuc3Vic3RyaW5nKGMsZCkpO2lmKGlzTmFOKGMpKXJldHVybiBnYztkKz0xO2lmKGQrYz5iLmxlbmd0aClyZXR1cm4gaGM7Yj1iLnN1YnN0cihkLGMpO2EuQz1kK2M7cmV0dXJuIGJ9ay5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLkk9ITA7UCh0aGlzKTt9O2Z1bmN0aW9uIGxjKGEpe2EuWT1EYXRlLm5vdygpK2EuUDt4YyhhLGEuUCk7fVxuZnVuY3Rpb24geGMoYSxiKXtpZihudWxsIT1hLkIpdGhyb3cgRXJyb3IoXCJXYXRjaERvZyB0aW1lciBub3QgbnVsbFwiKTthLkI9SyhxKGEuZWIsYSksYik7fWZ1bmN0aW9uIHBjKGEpe2EuQiYmKGwuY2xlYXJUaW1lb3V0KGEuQiksYS5CPW51bGwpO31rLmViPWZ1bmN0aW9uKCl7dGhpcy5CPW51bGw7Y29uc3QgYT1EYXRlLm5vdygpOzA8PWEtdGhpcy5ZPyhRYih0aGlzLmosdGhpcy5BKSwyIT10aGlzLksmJihJKDMpLEooMTcpKSxQKHRoaXMpLHRoaXMubz0yLHJjKHRoaXMpKTp4Yyh0aGlzLHRoaXMuWS1hKTt9O2Z1bmN0aW9uIHJjKGEpezA9PWEubC5HfHxhLkl8fHVjKGEubCxhKTt9ZnVuY3Rpb24gUChhKXtwYyhhKTt2YXIgYj1hLkw7YiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYi5uYSYmYi5uYSgpO2EuTD1udWxsO0ZiKGEuVyk7TGIoYS5WKTthLmcmJihiPWEuZyxhLmc9bnVsbCxiLmFib3J0KCksYi5uYSgpKTt9XG5mdW5jdGlvbiBzYyhhLGIpe3RyeXt2YXIgYz1hLmw7aWYoMCE9Yy5HJiYoYy5nPT1hfHx5YyhjLmksYSkpKWlmKGMuST1hLk4sIWEuSiYmeWMoYy5pLGEpJiYzPT1jLkcpe3RyeXt2YXIgZD1jLkNhLmcucGFyc2UoYik7fWNhdGNoKG0pe2Q9bnVsbDt9aWYoQXJyYXkuaXNBcnJheShkKSYmMz09ZC5sZW5ndGgpe3ZhciBlPWQ7aWYoMD09ZVswXSlhOntpZighYy51KXtpZihjLmcpaWYoYy5nLkYrM0UzPGEuRil6YyhjKSxBYyhjKTtlbHNlIGJyZWFrIGE7QmMoYyk7SigxOCk7fX1lbHNlIGMudGE9ZVsxXSwwPGMudGEtYy5VJiYzNzUwMD5lWzJdJiZjLk4mJjA9PWMuQSYmIWMudiYmKGMudj1LKHEoYy5hYixjKSw2RTMpKTtpZigxPj1DYyhjLmkpJiZjLmthKXt0cnl7Yy5rYSgpO31jYXRjaChtKXt9Yy5rYT12b2lkIDA7fX1lbHNlIFEoYywxMSk7fWVsc2UgaWYoKGEuSnx8Yy5nPT1hKSYmemMoYyksIXNhKGIpKWZvcihlPWMuQ2EuZy5wYXJzZShiKSxiPTA7YjxlLmxlbmd0aDtiKyspe2xldCBtPWVbYl07XG5jLlU9bVswXTttPW1bMV07aWYoMj09Yy5HKWlmKFwiY1wiPT1tWzBdKXtjLko9bVsxXTtjLmxhPW1bMl07Y29uc3Qgcj1tWzNdO251bGwhPXImJihjLm1hPXIsYy5oLmluZm8oXCJWRVI9XCIrYy5tYSkpO2NvbnN0IEc9bVs0XTtudWxsIT1HJiYoYy56YT1HLGMuaC5pbmZvKFwiU1ZFUj1cIitjLnphKSk7Y29uc3QgRGE9bVs1XTtudWxsIT1EYSYmXCJudW1iZXJcIj09PXR5cGVvZiBEYSYmMDxEYSYmKGQ9MS41KkRhLGMuSz1kLGMuaC5pbmZvKFwiYmFja0NoYW5uZWxSZXF1ZXN0VGltZW91dE1zXz1cIitkKSk7ZD1jO2NvbnN0IGNhPWEuZztpZihjYSl7Y29uc3QgRWE9Y2EuZz9jYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKTpudWxsO2lmKEVhKXt2YXIgZj1kLmk7IWYuZyYmKHcoRWEsXCJzcGR5XCIpfHx3KEVhLFwicXVpY1wiKXx8dyhFYSxcImgyXCIpKSYmKGYuaj1mLmwsZi5nPW5ldyBTZXQsZi5oJiYoRGMoZixmLmgpLGYuaD1udWxsKSk7fWlmKGQuRCl7Y29uc3QgeGI9XG5jYS5nP2NhLmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtU2Vzc2lvbi1JZFwiKTpudWxsO3hiJiYoZC5zYT14YixSKGQuRixkLkQseGIpKTt9fWMuRz0zO2MuaiYmYy5qLnhhKCk7Yy4kJiYoYy5PPURhdGUubm93KCktYS5GLGMuaC5pbmZvKFwiSGFuZHNoYWtlIFJUVDogXCIrYy5PK1wibXNcIikpO2Q9Yzt2YXIgaD1hO2Qub2E9RWMoZCxkLkg/ZC5sYTpudWxsLGQuVyk7aWYoaC5KKXtGYyhkLmksaCk7dmFyIG49aCx1PWQuSzt1JiZuLnNldFRpbWVvdXQodSk7bi5CJiYocGMobiksbGMobikpO2QuZz1oO31lbHNlIEdjKGQpOzA8Yy5sLmxlbmd0aCYmSGMoYyk7fWVsc2UgXCJzdG9wXCIhPW1bMF0mJlwiY2xvc2VcIiE9bVswXXx8UShjLDcpO2Vsc2UgMz09Yy5HJiYoXCJzdG9wXCI9PW1bMF18fFwiY2xvc2VcIj09bVswXT9cInN0b3BcIj09bVswXT9RKGMsNyk6SWMoYyk6XCJub29wXCIhPW1bMF0mJmMuaiYmYy5qLndhKG0pLGMuQT0wKTt9SSg0KTt9Y2F0Y2gobSl7fX1mdW5jdGlvbiBKYyhhKXtpZihhLlImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuUilyZXR1cm4gYS5SKCk7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBhLnNwbGl0KFwiXCIpO2lmKGJhKGEpKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyliLnB1c2goYVtkXSk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1cbmZ1bmN0aW9uIEtjKGEsYil7aWYoYS5mb3JFYWNoJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmZvckVhY2gpYS5mb3JFYWNoKGIsdm9pZCAwKTtlbHNlIGlmKGJhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpbmEoYSxiLHZvaWQgMCk7ZWxzZSB7aWYoYS5UJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLlQpdmFyIGM9YS5UKCk7ZWxzZSBpZihhLlImJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEuUiljPXZvaWQgMDtlbHNlIGlmKGJhKGEpfHxcInN0cmluZ1wiPT09dHlwZW9mIGEpe2M9W107Zm9yKHZhciBkPWEubGVuZ3RoLGU9MDtlPGQ7ZSsrKWMucHVzaChlKTt9ZWxzZSBmb3IoZSBpbiBjPVtdLGQ9MCxhKWNbZCsrXT1lO2Q9SmMoYSk7ZT1kLmxlbmd0aDtmb3IodmFyIGY9MDtmPGU7ZisrKWIuY2FsbCh2b2lkIDAsZFtmXSxjJiZjW2ZdLGEpO319ZnVuY3Rpb24gUyhhLGIpe3RoaXMuaD17fTt0aGlzLmc9W107dGhpcy5pPTA7dmFyIGM9YXJndW1lbnRzLmxlbmd0aDtpZigxPGMpe2lmKGMlMil0aHJvdyBFcnJvcihcIlVuZXZlbiBudW1iZXIgb2YgYXJndW1lbnRzXCIpO2Zvcih2YXIgZD0wO2Q8YztkKz0yKXRoaXMuc2V0KGFyZ3VtZW50c1tkXSxhcmd1bWVudHNbZCsxXSk7fWVsc2UgaWYoYSlpZihhIGluc3RhbmNlb2YgUylmb3IoYz1hLlQoKSxkPTA7ZDxjLmxlbmd0aDtkKyspdGhpcy5zZXQoY1tkXSxhLmdldChjW2RdKSk7ZWxzZSBmb3IoZCBpbiBhKXRoaXMuc2V0KGQsYVtkXSk7fWs9Uy5wcm90b3R5cGU7ay5SPWZ1bmN0aW9uKCl7TGModGhpcyk7Zm9yKHZhciBhPVtdLGI9MDtiPHRoaXMuZy5sZW5ndGg7YisrKWEucHVzaCh0aGlzLmhbdGhpcy5nW2JdXSk7cmV0dXJuIGF9O2suVD1mdW5jdGlvbigpe0xjKHRoaXMpO3JldHVybiB0aGlzLmcuY29uY2F0KCl9O1xuZnVuY3Rpb24gTGMoYSl7aWYoYS5pIT1hLmcubGVuZ3RoKXtmb3IodmFyIGI9MCxjPTA7YjxhLmcubGVuZ3RoOyl7dmFyIGQ9YS5nW2JdO1QoYS5oLGQpJiYoYS5nW2MrK109ZCk7YisrO31hLmcubGVuZ3RoPWM7fWlmKGEuaSE9YS5nLmxlbmd0aCl7dmFyIGU9e307Zm9yKGM9Yj0wO2I8YS5nLmxlbmd0aDspZD1hLmdbYl0sVChlLGQpfHwoYS5nW2MrK109ZCxlW2RdPTEpLGIrKzthLmcubGVuZ3RoPWM7fX1rLmdldD1mdW5jdGlvbihhLGIpe3JldHVybiBUKHRoaXMuaCxhKT90aGlzLmhbYV06Yn07ay5zZXQ9ZnVuY3Rpb24oYSxiKXtUKHRoaXMuaCxhKXx8KHRoaXMuaSsrLHRoaXMuZy5wdXNoKGEpKTt0aGlzLmhbYV09Yjt9O2suZm9yRWFjaD1mdW5jdGlvbihhLGIpe2Zvcih2YXIgYz10aGlzLlQoKSxkPTA7ZDxjLmxlbmd0aDtkKyspe3ZhciBlPWNbZF0sZj10aGlzLmdldChlKTthLmNhbGwoYixmLGUsdGhpcyk7fX07XG5mdW5jdGlvbiBUKGEsYil7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGIpfXZhciBNYz0vXig/OihbXjovPyMuXSspOik/KD86XFwvXFwvKD86KFteXFxcXC8/I10qKUApPyhbXlxcXFwvPyNdKj8pKD86OihbMC05XSspKT8oPz1bXFxcXC8/I118JCkpPyhbXj8jXSspPyg/OlxcPyhbXiNdKikpPyg/OiMoW1xcc1xcU10qKSk/JC87ZnVuY3Rpb24gTmMoYSxiKXtpZihhKXthPWEuc3BsaXQoXCImXCIpO2Zvcih2YXIgYz0wO2M8YS5sZW5ndGg7YysrKXt2YXIgZD1hW2NdLmluZGV4T2YoXCI9XCIpLGU9bnVsbDtpZigwPD1kKXt2YXIgZj1hW2NdLnN1YnN0cmluZygwLGQpO2U9YVtjXS5zdWJzdHJpbmcoZCsxKTt9ZWxzZSBmPWFbY107YihmLGU/ZGVjb2RlVVJJQ29tcG9uZW50KGUucmVwbGFjZSgvXFwrL2csXCIgXCIpKTpcIlwiKTt9fX1mdW5jdGlvbiBVKGEsYil7dGhpcy5pPXRoaXMucz10aGlzLmo9XCJcIjt0aGlzLm09bnVsbDt0aGlzLm89dGhpcy5sPVwiXCI7dGhpcy5nPSExO2lmKGEgaW5zdGFuY2VvZiBVKXt0aGlzLmc9dm9pZCAwIT09Yj9iOmEuZztPYyh0aGlzLGEuaik7dGhpcy5zPWEucztQYyh0aGlzLGEuaSk7UWModGhpcyxhLm0pO3RoaXMubD1hLmw7Yj1hLmg7dmFyIGM9bmV3IFJjO2MuaT1iLmk7Yi5nJiYoYy5nPW5ldyBTKGIuZyksYy5oPWIuaCk7U2ModGhpcyxjKTt0aGlzLm89YS5vO31lbHNlIGEmJihjPVN0cmluZyhhKS5tYXRjaChNYykpPyh0aGlzLmc9ISFiLE9jKHRoaXMsY1sxXXx8XCJcIiwhMCksdGhpcy5zPVRjKGNbMl18fFwiXCIpLFBjKHRoaXMsY1szXXx8XCJcIiwhMCksUWModGhpcyxjWzRdKSx0aGlzLmw9VGMoY1s1XXx8XCJcIiwhMCksU2ModGhpcyxjWzZdfHxcIlwiLCEwKSx0aGlzLm89VGMoY1s3XXx8XCJcIikpOih0aGlzLmc9ISFiLHRoaXMuaD1uZXcgUmMobnVsbCx0aGlzLmcpKTt9XG5VLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciBhPVtdLGI9dGhpcy5qO2ImJmEucHVzaChVYyhiLFZjLCEwKSxcIjpcIik7dmFyIGM9dGhpcy5pO2lmKGN8fFwiZmlsZVwiPT1iKWEucHVzaChcIi8vXCIpLChiPXRoaXMucykmJmEucHVzaChVYyhiLFZjLCEwKSxcIkBcIiksYS5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpLnJlcGxhY2UoLyUyNShbMC05YS1mQS1GXXsyfSkvZyxcIiUkMVwiKSksYz10aGlzLm0sbnVsbCE9YyYmYS5wdXNoKFwiOlwiLFN0cmluZyhjKSk7aWYoYz10aGlzLmwpdGhpcy5pJiZcIi9cIiE9Yy5jaGFyQXQoMCkmJmEucHVzaChcIi9cIiksYS5wdXNoKFVjKGMsXCIvXCI9PWMuY2hhckF0KDApP1djOlhjLCEwKSk7KGM9dGhpcy5oLnRvU3RyaW5nKCkpJiZhLnB1c2goXCI/XCIsYyk7KGM9dGhpcy5vKSYmYS5wdXNoKFwiI1wiLFVjKGMsWWMpKTtyZXR1cm4gYS5qb2luKFwiXCIpfTtmdW5jdGlvbiBOKGEpe3JldHVybiBuZXcgVShhKX1cbmZ1bmN0aW9uIE9jKGEsYixjKXthLmo9Yz9UYyhiLCEwKTpiO2EuaiYmKGEuaj1hLmoucmVwbGFjZSgvOiQvLFwiXCIpKTt9ZnVuY3Rpb24gUGMoYSxiLGMpe2EuaT1jP1RjKGIsITApOmI7fWZ1bmN0aW9uIFFjKGEsYil7aWYoYil7Yj1OdW1iZXIoYik7aWYoaXNOYU4oYil8fDA+Yil0aHJvdyBFcnJvcihcIkJhZCBwb3J0IG51bWJlciBcIitiKTthLm09Yjt9ZWxzZSBhLm09bnVsbDt9ZnVuY3Rpb24gU2MoYSxiLGMpe2IgaW5zdGFuY2VvZiBSYz8oYS5oPWIsWmMoYS5oLGEuZykpOihjfHwoYj1VYyhiLCRjKSksYS5oPW5ldyBSYyhiLGEuZykpO31mdW5jdGlvbiBSKGEsYixjKXthLmguc2V0KGIsYyk7fWZ1bmN0aW9uIGpjKGEpe1IoYSxcInp4XCIsTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpLnRvU3RyaW5nKDM2KStNYXRoLmFicyhNYXRoLmZsb29yKDIxNDc0ODM2NDgqTWF0aC5yYW5kb20oKSleRGF0ZS5ub3coKSkudG9TdHJpbmcoMzYpKTtyZXR1cm4gYX1cbmZ1bmN0aW9uIGFkKGEpe3JldHVybiBhIGluc3RhbmNlb2YgVT9OKGEpOm5ldyBVKGEsdm9pZCAwKX1mdW5jdGlvbiBiZChhLGIsYyxkKXt2YXIgZT1uZXcgVShudWxsLHZvaWQgMCk7YSYmT2MoZSxhKTtiJiZQYyhlLGIpO2MmJlFjKGUsYyk7ZCYmKGUubD1kKTtyZXR1cm4gZX1mdW5jdGlvbiBUYyhhLGIpe3JldHVybiBhP2I/ZGVjb2RlVVJJKGEucmVwbGFjZSgvJTI1L2csXCIlMjUyNVwiKSk6ZGVjb2RlVVJJQ29tcG9uZW50KGEpOlwiXCJ9ZnVuY3Rpb24gVWMoYSxiLGMpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIGE/KGE9ZW5jb2RlVVJJKGEpLnJlcGxhY2UoYixjZCksYyYmKGE9YS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGEpOm51bGx9ZnVuY3Rpb24gY2QoYSl7YT1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIFwiJVwiKyhhPj40JjE1KS50b1N0cmluZygxNikrKGEmMTUpLnRvU3RyaW5nKDE2KX1cbnZhciBWYz0vWyNcXC9cXD9AXS9nLFhjPS9bI1xcPzpdL2csV2M9L1sjXFw/XS9nLCRjPS9bI1xcP0BdL2csWWM9LyMvZztmdW5jdGlvbiBSYyhhLGIpe3RoaXMuaD10aGlzLmc9bnVsbDt0aGlzLmk9YXx8bnVsbDt0aGlzLmo9ISFiO31mdW5jdGlvbiBWKGEpe2EuZ3x8KGEuZz1uZXcgUyxhLmg9MCxhLmkmJk5jKGEuaSxmdW5jdGlvbihiLGMpe2EuYWRkKGRlY29kZVVSSUNvbXBvbmVudChiLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSksYyk7fSkpO31rPVJjLnByb3RvdHlwZTtrLmFkZD1mdW5jdGlvbihhLGIpe1YodGhpcyk7dGhpcy5pPW51bGw7YT1XKHRoaXMsYSk7dmFyIGM9dGhpcy5nLmdldChhKTtjfHx0aGlzLmcuc2V0KGEsYz1bXSk7Yy5wdXNoKGIpO3RoaXMuaCs9MTtyZXR1cm4gdGhpc307XG5mdW5jdGlvbiBkZChhLGIpe1YoYSk7Yj1XKGEsYik7VChhLmcuaCxiKSYmKGEuaT1udWxsLGEuaC09YS5nLmdldChiKS5sZW5ndGgsYT1hLmcsVChhLmgsYikmJihkZWxldGUgYS5oW2JdLGEuaS0tLGEuZy5sZW5ndGg+MiphLmkmJkxjKGEpKSk7fWZ1bmN0aW9uIGVkKGEsYil7VihhKTtiPVcoYSxiKTtyZXR1cm4gVChhLmcuaCxiKX1rLmZvckVhY2g9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7bmEoYyxmdW5jdGlvbihlKXthLmNhbGwoYixlLGQsdGhpcyk7fSx0aGlzKTt9LHRoaXMpO307ay5UPWZ1bmN0aW9uKCl7Vih0aGlzKTtmb3IodmFyIGE9dGhpcy5nLlIoKSxiPXRoaXMuZy5UKCksYz1bXSxkPTA7ZDxiLmxlbmd0aDtkKyspZm9yKHZhciBlPWFbZF0sZj0wO2Y8ZS5sZW5ndGg7ZisrKWMucHVzaChiW2RdKTtyZXR1cm4gY307XG5rLlI9ZnVuY3Rpb24oYSl7Vih0aGlzKTt2YXIgYj1bXTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpZWQodGhpcyxhKSYmKGI9cWEoYix0aGlzLmcuZ2V0KFcodGhpcyxhKSkpKTtlbHNlIHthPXRoaXMuZy5SKCk7Zm9yKHZhciBjPTA7YzxhLmxlbmd0aDtjKyspYj1xYShiLGFbY10pO31yZXR1cm4gYn07ay5zZXQ9ZnVuY3Rpb24oYSxiKXtWKHRoaXMpO3RoaXMuaT1udWxsO2E9Vyh0aGlzLGEpO2VkKHRoaXMsYSkmJih0aGlzLmgtPXRoaXMuZy5nZXQoYSkubGVuZ3RoKTt0aGlzLmcuc2V0KGEsW2JdKTt0aGlzLmgrPTE7cmV0dXJuIHRoaXN9O2suZ2V0PWZ1bmN0aW9uKGEsYil7aWYoIWEpcmV0dXJuIGI7YT10aGlzLlIoYSk7cmV0dXJuIDA8YS5sZW5ndGg/U3RyaW5nKGFbMF0pOmJ9O2Z1bmN0aW9uIG1jKGEsYixjKXtkZChhLGIpOzA8Yy5sZW5ndGgmJihhLmk9bnVsbCxhLmcuc2V0KFcoYSxiKSxyYShjKSksYS5oKz1jLmxlbmd0aCk7fVxuay50b1N0cmluZz1mdW5jdGlvbigpe2lmKHRoaXMuaSlyZXR1cm4gdGhpcy5pO2lmKCF0aGlzLmcpcmV0dXJuIFwiXCI7Zm9yKHZhciBhPVtdLGI9dGhpcy5nLlQoKSxjPTA7YzxiLmxlbmd0aDtjKyspe3ZhciBkPWJbY10sZT1lbmNvZGVVUklDb21wb25lbnQoU3RyaW5nKGQpKTtkPXRoaXMuUihkKTtmb3IodmFyIGY9MDtmPGQubGVuZ3RoO2YrKyl7dmFyIGg9ZTtcIlwiIT09ZFtmXSYmKGgrPVwiPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoZFtmXSkpKTthLnB1c2goaCk7fX1yZXR1cm4gdGhpcy5pPWEuam9pbihcIiZcIil9O2Z1bmN0aW9uIFcoYSxiKXtiPVN0cmluZyhiKTthLmomJihiPWIudG9Mb3dlckNhc2UoKSk7cmV0dXJuIGJ9ZnVuY3Rpb24gWmMoYSxiKXtiJiYhYS5qJiYoVihhKSxhLmk9bnVsbCxhLmcuZm9yRWFjaChmdW5jdGlvbihjLGQpe3ZhciBlPWQudG9Mb3dlckNhc2UoKTtkIT1lJiYoZGQodGhpcyxkKSxtYyh0aGlzLGUsYykpO30sYSkpO2Euaj1iO312YXIgZmQ9Y2xhc3N7Y29uc3RydWN0b3IoYSxiKXt0aGlzLmg9YTt0aGlzLmc9Yjt9fTtmdW5jdGlvbiBnZChhKXt0aGlzLmw9YXx8aGQ7bC5QZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmc/KGE9bC5wZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKSxhPTA8YS5sZW5ndGgmJihcImhxXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sfHxcImgyXCI9PWFbMF0ubmV4dEhvcFByb3RvY29sKSk6YT0hIShsLmcmJmwuZy5FYSYmbC5nLkVhKCkmJmwuZy5FYSgpLlpiKTt0aGlzLmo9YT90aGlzLmw6MTt0aGlzLmc9bnVsbDsxPHRoaXMuaiYmKHRoaXMuZz1uZXcgU2V0KTt0aGlzLmg9bnVsbDt0aGlzLmk9W107fXZhciBoZD0xMDtmdW5jdGlvbiBpZChhKXtyZXR1cm4gYS5oPyEwOmEuZz9hLmcuc2l6ZT49YS5qOiExfWZ1bmN0aW9uIENjKGEpe3JldHVybiBhLmg/MTphLmc/YS5nLnNpemU6MH1mdW5jdGlvbiB5YyhhLGIpe3JldHVybiBhLmg/YS5oPT1iOmEuZz9hLmcuaGFzKGIpOiExfWZ1bmN0aW9uIERjKGEsYil7YS5nP2EuZy5hZGQoYik6YS5oPWI7fVxuZnVuY3Rpb24gRmMoYSxiKXthLmgmJmEuaD09Yj9hLmg9bnVsbDphLmcmJmEuZy5oYXMoYikmJmEuZy5kZWxldGUoYik7fWdkLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLmk9amQodGhpcyk7aWYodGhpcy5oKXRoaXMuaC5jYW5jZWwoKSx0aGlzLmg9bnVsbDtlbHNlIGlmKHRoaXMuZyYmMCE9PXRoaXMuZy5zaXplKXtmb3IoY29uc3QgYSBvZiB0aGlzLmcudmFsdWVzKCkpYS5jYW5jZWwoKTt0aGlzLmcuY2xlYXIoKTt9fTtmdW5jdGlvbiBqZChhKXtpZihudWxsIT1hLmgpcmV0dXJuIGEuaS5jb25jYXQoYS5oLkQpO2lmKG51bGwhPWEuZyYmMCE9PWEuZy5zaXplKXtsZXQgYj1hLmk7Zm9yKGNvbnN0IGMgb2YgYS5nLnZhbHVlcygpKWI9Yi5jb25jYXQoYy5EKTtyZXR1cm4gYn1yZXR1cm4gcmEoYS5pKX1mdW5jdGlvbiBrZCgpe31rZC5wcm90b3R5cGUuc3RyaW5naWZ5PWZ1bmN0aW9uKGEpe3JldHVybiBsLkpTT04uc3RyaW5naWZ5KGEsdm9pZCAwKX07a2QucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGEpe3JldHVybiBsLkpTT04ucGFyc2UoYSx2b2lkIDApfTtmdW5jdGlvbiBsZCgpe3RoaXMuZz1uZXcga2Q7fWZ1bmN0aW9uIG1kKGEsYixjKXtjb25zdCBkPWN8fFwiXCI7dHJ5e0tjKGEsZnVuY3Rpb24oZSxmKXtsZXQgaD1lO3AoZSkmJihoPXJiKGUpKTtiLnB1c2goZCtmK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChoKSk7fSk7fWNhdGNoKGUpe3Rocm93IGIucHVzaChkK1widHlwZT1cIitlbmNvZGVVUklDb21wb25lbnQoXCJfYmFkbWFwXCIpKSxlO319ZnVuY3Rpb24gbmQoYSxiKXtjb25zdCBjPW5ldyBNYjtpZihsLkltYWdlKXtjb25zdCBkPW5ldyBJbWFnZTtkLm9ubG9hZD1qYShvZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiKTtkLm9uZXJyb3I9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwhMSxiKTtkLm9uYWJvcnQ9amEob2QsYyxkLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxiKTtkLm9udGltZW91dD1qYShvZCxjLGQsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYik7bC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZC5vbnRpbWVvdXQpZC5vbnRpbWVvdXQoKTt9LDFFNCk7ZC5zcmM9YTt9ZWxzZSBiKCExKTt9ZnVuY3Rpb24gb2QoYSxiLGMsZCxlKXt0cnl7Yi5vbmxvYWQ9bnVsbCxiLm9uZXJyb3I9bnVsbCxiLm9uYWJvcnQ9bnVsbCxiLm9udGltZW91dD1udWxsLGUoZCk7fWNhdGNoKGYpe319ZnVuY3Rpb24gcGQoYSl7dGhpcy5sPWEuJGJ8fG51bGw7dGhpcy5qPWEuaWJ8fCExO310KHBkLFliKTtwZC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgcWQodGhpcy5sLHRoaXMuail9O3BkLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX0oe30pO2Z1bmN0aW9uIHFkKGEsYil7Qy5jYWxsKHRoaXMpO3RoaXMuRD1hO3RoaXMudT1iO3RoaXMubT12b2lkIDA7dGhpcy5yZWFkeVN0YXRlPXJkO3RoaXMuc3RhdHVzPTA7dGhpcy5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVRleHQ9dGhpcy5yZXNwb25zZT10aGlzLnN0YXR1c1RleHQ9XCJcIjt0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLmg9bnVsbDt0aGlzLkM9XCJHRVRcIjt0aGlzLkI9XCJcIjt0aGlzLmc9ITE7dGhpcy5BPXRoaXMuaj10aGlzLmw9bnVsbDt9dChxZCxDKTt2YXIgcmQ9MDtrPXFkLnByb3RvdHlwZTtcbmsub3Blbj1mdW5jdGlvbihhLGIpe2lmKHRoaXMucmVhZHlTdGF0ZSE9cmQpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwiRXJyb3IgcmVvcGVuaW5nIGEgY29ubmVjdGlvblwiKTt0aGlzLkM9YTt0aGlzLkI9Yjt0aGlzLnJlYWR5U3RhdGU9MTtzZCh0aGlzKTt9O2suc2VuZD1mdW5jdGlvbihhKXtpZigxIT10aGlzLnJlYWR5U3RhdGUpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwibmVlZCB0byBjYWxsIG9wZW4oKSBmaXJzdC4gXCIpO3RoaXMuZz0hMDtjb25zdCBiPXtoZWFkZXJzOnRoaXMudixtZXRob2Q6dGhpcy5DLGNyZWRlbnRpYWxzOnRoaXMubSxjYWNoZTp2b2lkIDB9O2EmJihiLmJvZHk9YSk7KHRoaXMuRHx8bCkuZmV0Y2gobmV3IFJlcXVlc3QodGhpcy5CLGIpKS50aGVuKHRoaXMuVmEuYmluZCh0aGlzKSx0aGlzLmhhLmJpbmQodGhpcykpO307XG5rLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLnN0YXR1cz0wO3RoaXMuaiYmdGhpcy5qLmNhbmNlbChcIlJlcXVlc3Qgd2FzIGFib3J0ZWQuXCIpOzE8PXRoaXMucmVhZHlTdGF0ZSYmdGhpcy5nJiY0IT10aGlzLnJlYWR5U3RhdGUmJih0aGlzLmc9ITEsdGQodGhpcykpO3RoaXMucmVhZHlTdGF0ZT1yZDt9O1xuay5WYT1mdW5jdGlvbihhKXtpZih0aGlzLmcmJih0aGlzLmw9YSx0aGlzLmh8fCh0aGlzLnN0YXR1cz10aGlzLmwuc3RhdHVzLHRoaXMuc3RhdHVzVGV4dD10aGlzLmwuc3RhdHVzVGV4dCx0aGlzLmg9YS5oZWFkZXJzLHRoaXMucmVhZHlTdGF0ZT0yLHNkKHRoaXMpKSx0aGlzLmcmJih0aGlzLnJlYWR5U3RhdGU9MyxzZCh0aGlzKSx0aGlzLmcpKSlpZihcImFycmF5YnVmZmVyXCI9PT10aGlzLnJlc3BvbnNlVHlwZSlhLmFycmF5QnVmZmVyKCkudGhlbih0aGlzLlRhLmJpbmQodGhpcyksdGhpcy5oYS5iaW5kKHRoaXMpKTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgbC5SZWFkYWJsZVN0cmVhbSYmXCJib2R5XCJpbiBhKXt0aGlzLmo9YS5ib2R5LmdldFJlYWRlcigpO2lmKHRoaXMudSl7aWYodGhpcy5yZXNwb25zZVR5cGUpdGhyb3cgRXJyb3IoJ3Jlc3BvbnNlVHlwZSBtdXN0IGJlIGVtcHR5IGZvciBcInN0cmVhbUJpbmFyeUNodW5rc1wiIG1vZGUgcmVzcG9uc2VzLicpO3RoaXMucmVzcG9uc2U9XG5bXTt9ZWxzZSB0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0PVwiXCIsdGhpcy5BPW5ldyBUZXh0RGVjb2Rlcjt1ZCh0aGlzKTt9ZWxzZSBhLnRleHQoKS50aGVuKHRoaXMuVWEuYmluZCh0aGlzKSx0aGlzLmhhLmJpbmQodGhpcykpO307ZnVuY3Rpb24gdWQoYSl7YS5qLnJlYWQoKS50aGVuKGEuU2EuYmluZChhKSkuY2F0Y2goYS5oYS5iaW5kKGEpKTt9ay5TYT1mdW5jdGlvbihhKXtpZih0aGlzLmcpe2lmKHRoaXMudSYmYS52YWx1ZSl0aGlzLnJlc3BvbnNlLnB1c2goYS52YWx1ZSk7ZWxzZSBpZighdGhpcy51KXt2YXIgYj1hLnZhbHVlP2EudmFsdWU6bmV3IFVpbnQ4QXJyYXkoMCk7aWYoYj10aGlzLkEuZGVjb2RlKGIse3N0cmVhbTohYS5kb25lfSkpdGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dCs9Yjt9YS5kb25lP3RkKHRoaXMpOnNkKHRoaXMpOzM9PXRoaXMucmVhZHlTdGF0ZSYmdWQodGhpcyk7fX07XG5rLlVhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9YSx0ZCh0aGlzKSk7fTtrLlRhPWZ1bmN0aW9uKGEpe3RoaXMuZyYmKHRoaXMucmVzcG9uc2U9YSx0ZCh0aGlzKSk7fTtrLmhhPWZ1bmN0aW9uKCl7dGhpcy5nJiZ0ZCh0aGlzKTt9O2Z1bmN0aW9uIHRkKGEpe2EucmVhZHlTdGF0ZT00O2EubD1udWxsO2Euaj1udWxsO2EuQT1udWxsO3NkKGEpO31rLnNldFJlcXVlc3RIZWFkZXI9ZnVuY3Rpb24oYSxiKXt0aGlzLnYuYXBwZW5kKGEsYik7fTtrLmdldFJlc3BvbnNlSGVhZGVyPWZ1bmN0aW9uKGEpe3JldHVybiB0aGlzLmg/dGhpcy5oLmdldChhLnRvTG93ZXJDYXNlKCkpfHxcIlwiOlwiXCJ9O1xuay5nZXRBbGxSZXNwb25zZUhlYWRlcnM9ZnVuY3Rpb24oKXtpZighdGhpcy5oKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj10aGlzLmguZW50cmllcygpO2Zvcih2YXIgYz1iLm5leHQoKTshYy5kb25lOyljPWMudmFsdWUsYS5wdXNoKGNbMF0rXCI6IFwiK2NbMV0pLGM9Yi5uZXh0KCk7cmV0dXJuIGEuam9pbihcIlxcclxcblwiKX07ZnVuY3Rpb24gc2QoYSl7YS5vbnJlYWR5c3RhdGVjaGFuZ2UmJmEub25yZWFkeXN0YXRlY2hhbmdlLmNhbGwoYSk7fU9iamVjdC5kZWZpbmVQcm9wZXJ0eShxZC5wcm90b3R5cGUsXCJ3aXRoQ3JlZGVudGlhbHNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIFwiaW5jbHVkZVwiPT09dGhpcy5tfSxzZXQ6ZnVuY3Rpb24oYSl7dGhpcy5tPWE/XCJpbmNsdWRlXCI6XCJzYW1lLW9yaWdpblwiO319KTt2YXIgdmQ9bC5KU09OLnBhcnNlO2Z1bmN0aW9uIFgoYSl7Qy5jYWxsKHRoaXMpO3RoaXMuaGVhZGVycz1uZXcgUzt0aGlzLnU9YXx8bnVsbDt0aGlzLmg9ITE7dGhpcy5DPXRoaXMuZz1udWxsO3RoaXMuSD1cIlwiO3RoaXMubT0wO3RoaXMuaj1cIlwiO3RoaXMubD10aGlzLkY9dGhpcy52PXRoaXMuRD0hMTt0aGlzLkI9MDt0aGlzLkE9bnVsbDt0aGlzLko9d2Q7dGhpcy5LPXRoaXMuTD0hMTt9dChYLEMpO3ZhciB3ZD1cIlwiLHhkPS9eaHR0cHM/JC9pLHlkPVtcIlBPU1RcIixcIlBVVFwiXTtrPVgucHJvdG90eXBlO1xuay5lYT1mdW5jdGlvbihhLGIsYyxkKXtpZih0aGlzLmcpdGhyb3cgRXJyb3IoXCJbZ29vZy5uZXQuWGhySW9dIE9iamVjdCBpcyBhY3RpdmUgd2l0aCBhbm90aGVyIHJlcXVlc3Q9XCIrdGhpcy5IK1wiOyBuZXdVcmk9XCIrYSk7Yj1iP2IudG9VcHBlckNhc2UoKTpcIkdFVFwiO3RoaXMuSD1hO3RoaXMuaj1cIlwiO3RoaXMubT0wO3RoaXMuRD0hMTt0aGlzLmg9ITA7dGhpcy5nPXRoaXMudT90aGlzLnUuZygpOmNjLmcoKTt0aGlzLkM9dGhpcy51P1piKHRoaXMudSk6WmIoY2MpO3RoaXMuZy5vbnJlYWR5c3RhdGVjaGFuZ2U9cSh0aGlzLkZhLHRoaXMpO3RyeXt0aGlzLkY9ITAsdGhpcy5nLm9wZW4oYixTdHJpbmcoYSksITApLHRoaXMuRj0hMTt9Y2F0Y2goZil7emQodGhpcyxmKTtyZXR1cm59YT1jfHxcIlwiO2NvbnN0IGU9bmV3IFModGhpcy5oZWFkZXJzKTtkJiZLYyhkLGZ1bmN0aW9uKGYsaCl7ZS5zZXQoaCxmKTt9KTtkPW9hKGUuVCgpKTtjPWwuRm9ybURhdGEmJmEgaW5zdGFuY2VvZiBsLkZvcm1EYXRhO1xuISgwPD1tYSh5ZCxiKSl8fGR8fGN8fGUuc2V0KFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD11dGYtOFwiKTtlLmZvckVhY2goZnVuY3Rpb24oZixoKXt0aGlzLmcuc2V0UmVxdWVzdEhlYWRlcihoLGYpO30sdGhpcyk7dGhpcy5KJiYodGhpcy5nLnJlc3BvbnNlVHlwZT10aGlzLkopO1wid2l0aENyZWRlbnRpYWxzXCJpbiB0aGlzLmcmJnRoaXMuZy53aXRoQ3JlZGVudGlhbHMhPT10aGlzLkwmJih0aGlzLmcud2l0aENyZWRlbnRpYWxzPXRoaXMuTCk7dHJ5e0FkKHRoaXMpLDA8dGhpcy5CJiYoKHRoaXMuSz1CZCh0aGlzLmcpKT8odGhpcy5nLnRpbWVvdXQ9dGhpcy5CLHRoaXMuZy5vbnRpbWVvdXQ9cSh0aGlzLnBhLHRoaXMpKTp0aGlzLkE9R2IodGhpcy5wYSx0aGlzLkIsdGhpcykpLHRoaXMudj0hMCx0aGlzLmcuc2VuZChhKSx0aGlzLnY9ITE7fWNhdGNoKGYpe3pkKHRoaXMsZik7fX07XG5mdW5jdGlvbiBCZChhKXtyZXR1cm4geSYmUmEoKSYmXCJudW1iZXJcIj09PXR5cGVvZiBhLnRpbWVvdXQmJnZvaWQgMCE9PWEub250aW1lb3V0fWZ1bmN0aW9uIHBhKGEpe3JldHVybiBcImNvbnRlbnQtdHlwZVwiPT1hLnRvTG93ZXJDYXNlKCl9ay5wYT1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiZ0aGlzLmcmJih0aGlzLmo9XCJUaW1lZCBvdXQgYWZ0ZXIgXCIrdGhpcy5CK1wibXMsIGFib3J0aW5nXCIsdGhpcy5tPTgsRCh0aGlzLFwidGltZW91dFwiKSx0aGlzLmFib3J0KDgpKTt9O2Z1bmN0aW9uIHpkKGEsYil7YS5oPSExO2EuZyYmKGEubD0hMCxhLmcuYWJvcnQoKSxhLmw9ITEpO2Euaj1iO2EubT01O0NkKGEpO0RkKGEpO31mdW5jdGlvbiBDZChhKXthLkR8fChhLkQ9ITAsRChhLFwiY29tcGxldGVcIiksRChhLFwiZXJyb3JcIikpO31cbmsuYWJvcnQ9ZnVuY3Rpb24oYSl7dGhpcy5nJiZ0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSx0aGlzLm09YXx8NyxEKHRoaXMsXCJjb21wbGV0ZVwiKSxEKHRoaXMsXCJhYm9ydFwiKSxEZCh0aGlzKSk7fTtrLk09ZnVuY3Rpb24oKXt0aGlzLmcmJih0aGlzLmgmJih0aGlzLmg9ITEsdGhpcy5sPSEwLHRoaXMuZy5hYm9ydCgpLHRoaXMubD0hMSksRGQodGhpcywhMCkpO1guWi5NLmNhbGwodGhpcyk7fTtrLkZhPWZ1bmN0aW9uKCl7dGhpcy5zfHwodGhpcy5GfHx0aGlzLnZ8fHRoaXMubD9FZCh0aGlzKTp0aGlzLmNiKCkpO307ay5jYj1mdW5jdGlvbigpe0VkKHRoaXMpO307XG5mdW5jdGlvbiBFZChhKXtpZihhLmgmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBnb29nJiYoIWEuQ1sxXXx8NCE9TyhhKXx8MiE9YS5iYSgpKSlpZihhLnYmJjQ9PU8oYSkpR2IoYS5GYSwwLGEpO2Vsc2UgaWYoRChhLFwicmVhZHlzdGF0ZWNoYW5nZVwiKSw0PT1PKGEpKXthLmg9ITE7dHJ5e2NvbnN0IG49YS5iYSgpO2E6c3dpdGNoKG4pe2Nhc2UgMjAwOmNhc2UgMjAxOmNhc2UgMjAyOmNhc2UgMjA0OmNhc2UgMjA2OmNhc2UgMzA0OmNhc2UgMTIyMzp2YXIgYj0hMDticmVhayBhO2RlZmF1bHQ6Yj0hMTt9dmFyIGM7aWYoIShjPWIpKXt2YXIgZDtpZihkPTA9PT1uKXt2YXIgZT1TdHJpbmcoYS5IKS5tYXRjaChNYylbMV18fG51bGw7aWYoIWUmJmwuc2VsZiYmbC5zZWxmLmxvY2F0aW9uKXt2YXIgZj1sLnNlbGYubG9jYXRpb24ucHJvdG9jb2w7ZT1mLnN1YnN0cigwLGYubGVuZ3RoLTEpO31kPSF4ZC50ZXN0KGU/ZS50b0xvd2VyQ2FzZSgpOlwiXCIpO31jPWQ7fWlmKGMpRChhLFwiY29tcGxldGVcIiksRChhLFxuXCJzdWNjZXNzXCIpO2Vsc2Uge2EubT02O3RyeXt2YXIgaD0yPE8oYSk/YS5nLnN0YXR1c1RleHQ6XCJcIjt9Y2F0Y2godSl7aD1cIlwiO31hLmo9aCtcIiBbXCIrYS5iYSgpK1wiXVwiO0NkKGEpO319ZmluYWxseXtEZChhKTt9fX1mdW5jdGlvbiBEZChhLGIpe2lmKGEuZyl7QWQoYSk7Y29uc3QgYz1hLmcsZD1hLkNbMF0/YWE6bnVsbDthLmc9bnVsbDthLkM9bnVsbDtifHxEKGEsXCJyZWFkeVwiKTt0cnl7Yy5vbnJlYWR5c3RhdGVjaGFuZ2U9ZDt9Y2F0Y2goZSl7fX19ZnVuY3Rpb24gQWQoYSl7YS5nJiZhLksmJihhLmcub250aW1lb3V0PW51bGwpO2EuQSYmKGwuY2xlYXJUaW1lb3V0KGEuQSksYS5BPW51bGwpO31mdW5jdGlvbiBPKGEpe3JldHVybiBhLmc/YS5nLnJlYWR5U3RhdGU6MH1rLmJhPWZ1bmN0aW9uKCl7dHJ5e3JldHVybiAyPE8odGhpcyk/dGhpcy5nLnN0YXR1czotMX1jYXRjaChhKXtyZXR1cm4gLTF9fTtcbmsuZ2E9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIHRoaXMuZz90aGlzLmcucmVzcG9uc2VUZXh0OlwiXCJ9Y2F0Y2goYSl7cmV0dXJuIFwiXCJ9fTtrLlFhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7dmFyIGI9dGhpcy5nLnJlc3BvbnNlVGV4dDthJiYwPT1iLmluZGV4T2YoYSkmJihiPWIuc3Vic3RyaW5nKGEubGVuZ3RoKSk7cmV0dXJuIHZkKGIpfX07ZnVuY3Rpb24gb2MoYSl7dHJ5e2lmKCFhLmcpcmV0dXJuIG51bGw7aWYoXCJyZXNwb25zZVwiaW4gYS5nKXJldHVybiBhLmcucmVzcG9uc2U7c3dpdGNoKGEuSil7Y2FzZSB3ZDpjYXNlIFwidGV4dFwiOnJldHVybiBhLmcucmVzcG9uc2VUZXh0O2Nhc2UgXCJhcnJheWJ1ZmZlclwiOmlmKFwibW96UmVzcG9uc2VBcnJheUJ1ZmZlclwiaW4gYS5nKXJldHVybiBhLmcubW96UmVzcG9uc2VBcnJheUJ1ZmZlcn1yZXR1cm4gbnVsbH1jYXRjaChiKXtyZXR1cm4gbnVsbH19ay5EYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm19O1xuay5MYT1mdW5jdGlvbigpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIHRoaXMuaj90aGlzLmo6U3RyaW5nKHRoaXMuail9O2Z1bmN0aW9uIEZkKGEpe2xldCBiPVwiXCI7eGEoYSxmdW5jdGlvbihjLGQpe2IrPWQ7Yis9XCI6XCI7Yis9YztiKz1cIlxcclxcblwiO30pO3JldHVybiBifWZ1bmN0aW9uIEdkKGEsYixjKXthOntmb3IoZCBpbiBjKXt2YXIgZD0hMTticmVhayBhfWQ9ITA7fWR8fChjPUZkKGMpLFwic3RyaW5nXCI9PT10eXBlb2YgYT8obnVsbCE9YyYmZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkpOlIoYSxiLGMpKTt9ZnVuY3Rpb24gSGQoYSxiLGMpe3JldHVybiBjJiZjLmludGVybmFsQ2hhbm5lbFBhcmFtcz9jLmludGVybmFsQ2hhbm5lbFBhcmFtc1thXXx8YjpifVxuZnVuY3Rpb24gSWQoYSl7dGhpcy56YT0wO3RoaXMubD1bXTt0aGlzLmg9bmV3IE1iO3RoaXMubGE9dGhpcy5vYT10aGlzLkY9dGhpcy5XPXRoaXMuZz10aGlzLnNhPXRoaXMuRD10aGlzLmFhPXRoaXMubz10aGlzLlA9dGhpcy5zPW51bGw7dGhpcy5aYT10aGlzLlY9MDt0aGlzLlhhPUhkKFwiZmFpbEZhc3RcIiwhMSxhKTt0aGlzLk49dGhpcy52PXRoaXMudT10aGlzLm09dGhpcy5qPW51bGw7dGhpcy5YPSEwO3RoaXMuST10aGlzLnRhPXRoaXMuVT0tMTt0aGlzLlk9dGhpcy5BPXRoaXMuQz0wO3RoaXMuUGE9SGQoXCJiYXNlUmV0cnlEZWxheU1zXCIsNUUzLGEpO3RoaXMuJGE9SGQoXCJyZXRyeURlbGF5U2VlZE1zXCIsMUU0LGEpO3RoaXMuWWE9SGQoXCJmb3J3YXJkQ2hhbm5lbE1heFJldHJpZXNcIiwyLGEpO3RoaXMucmE9SGQoXCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXNcIiwyRTQsYSk7dGhpcy5xYT1hJiZhLnhtbEh0dHBGYWN0b3J5fHx2b2lkIDA7dGhpcy5CYT1hJiZhLllifHwhMTtcbnRoaXMuSz12b2lkIDA7dGhpcy5IPWEmJmEuc3VwcG9ydHNDcm9zc0RvbWFpblhocnx8ITE7dGhpcy5KPVwiXCI7dGhpcy5pPW5ldyBnZChhJiZhLmNvbmN1cnJlbnRSZXF1ZXN0TGltaXQpO3RoaXMuQ2E9bmV3IGxkO3RoaXMuamE9YSYmYS5mYXN0SGFuZHNoYWtlfHwhMTt0aGlzLlJhPWEmJmEuV2J8fCExO2EmJmEuQWEmJnRoaXMuaC5BYSgpO2EmJmEuZm9yY2VMb25nUG9sbGluZyYmKHRoaXMuWD0hMSk7dGhpcy4kPSF0aGlzLmphJiZ0aGlzLlgmJmEmJmEuZGV0ZWN0QnVmZmVyaW5nUHJveHl8fCExO3RoaXMua2E9dm9pZCAwO3RoaXMuTz0wO3RoaXMuTD0hMTt0aGlzLkI9bnVsbDt0aGlzLldhPSFhfHwhMSE9PWEuWGI7fWs9SWQucHJvdG90eXBlO2subWE9ODtrLkc9MTtcbmZ1bmN0aW9uIEljKGEpe0pkKGEpO2lmKDM9PWEuRyl7dmFyIGI9YS5WKyssYz1OKGEuRik7UihjLFwiU0lEXCIsYS5KKTtSKGMsXCJSSURcIixiKTtSKGMsXCJUWVBFXCIsXCJ0ZXJtaW5hdGVcIik7S2QoYSxjKTtiPW5ldyBNKGEsYS5oLGIsdm9pZCAwKTtiLks9MjtiLnY9amMoTihjKSk7Yz0hMTtsLm5hdmlnYXRvciYmbC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbiYmKGM9bC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbihiLnYudG9TdHJpbmcoKSxcIlwiKSk7IWMmJmwuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9Yi52LGM9ITApO2N8fChiLmc9bmMoYi5sLG51bGwpLGIuZy5lYShiLnYpKTtiLkY9RGF0ZS5ub3coKTtsYyhiKTt9TGQoYSk7fWsuaGI9ZnVuY3Rpb24oYSl7dHJ5e3RoaXMuaC5pbmZvKFwiT3JpZ2luIFRyaWFscyBpbnZva2VkOiBcIithKTt9Y2F0Y2goYil7fX07ZnVuY3Rpb24gQWMoYSl7YS5nJiYod2MoYSksYS5nLmNhbmNlbCgpLGEuZz1udWxsKTt9XG5mdW5jdGlvbiBKZChhKXtBYyhhKTthLnUmJihsLmNsZWFyVGltZW91dChhLnUpLGEudT1udWxsKTt6YyhhKTthLmkuY2FuY2VsKCk7YS5tJiYoXCJudW1iZXJcIj09PXR5cGVvZiBhLm0mJmwuY2xlYXJUaW1lb3V0KGEubSksYS5tPW51bGwpO31mdW5jdGlvbiBNZChhLGIpe2EubC5wdXNoKG5ldyBmZChhLlphKyssYikpOzM9PWEuRyYmSGMoYSk7fWZ1bmN0aW9uIEhjKGEpe2lkKGEuaSl8fGEubXx8KGEubT0hMCx6YihhLkhhLGEpLGEuQz0wKTt9ZnVuY3Rpb24gTmQoYSxiKXtpZihDYyhhLmkpPj1hLmkuai0oYS5tPzE6MCkpcmV0dXJuICExO2lmKGEubSlyZXR1cm4gYS5sPWIuRC5jb25jYXQoYS5sKSwhMDtpZigxPT1hLkd8fDI9PWEuR3x8YS5DPj0oYS5YYT8wOmEuWWEpKXJldHVybiAhMTthLm09SyhxKGEuSGEsYSxiKSxPZChhLGEuQykpO2EuQysrO3JldHVybiAhMH1cbmsuSGE9ZnVuY3Rpb24oYSl7aWYodGhpcy5tKWlmKHRoaXMubT1udWxsLDE9PXRoaXMuRyl7aWYoIWEpe3RoaXMuVj1NYXRoLmZsb29yKDFFNSpNYXRoLnJhbmRvbSgpKTthPXRoaXMuVisrO2NvbnN0IGU9bmV3IE0odGhpcyx0aGlzLmgsYSx2b2lkIDApO2xldCBmPXRoaXMuczt0aGlzLlAmJihmPyhmPXlhKGYpLEFhKGYsdGhpcy5QKSk6Zj10aGlzLlApO251bGw9PT10aGlzLm8mJihlLkg9Zik7aWYodGhpcy5qYSlhOnt2YXIgYj0wO2Zvcih2YXIgYz0wO2M8dGhpcy5sLmxlbmd0aDtjKyspe2I6e3ZhciBkPXRoaXMubFtjXTtpZihcIl9fZGF0YV9fXCJpbiBkLmcmJihkPWQuZy5fX2RhdGFfXyxcInN0cmluZ1wiPT09dHlwZW9mIGQpKXtkPWQubGVuZ3RoO2JyZWFrIGJ9ZD12b2lkIDA7fWlmKHZvaWQgMD09PWQpYnJlYWs7Yis9ZDtpZig0MDk2PGIpe2I9YzticmVhayBhfWlmKDQwOTY9PT1ifHxjPT09dGhpcy5sLmxlbmd0aC0xKXtiPWMrMTticmVhayBhfX1iPTFFMzt9ZWxzZSBiPTFFMztiPVxuUGQodGhpcyxlLGIpO2M9Tih0aGlzLkYpO1IoYyxcIlJJRFwiLGEpO1IoYyxcIkNWRVJcIiwyMik7dGhpcy5EJiZSKGMsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiLHRoaXMuRCk7S2QodGhpcyxjKTt0aGlzLm8mJmYmJkdkKGMsdGhpcy5vLGYpO0RjKHRoaXMuaSxlKTt0aGlzLlJhJiZSKGMsXCJUWVBFXCIsXCJpbml0XCIpO3RoaXMuamE/KFIoYyxcIiRyZXFcIixiKSxSKGMsXCJTSURcIixcIm51bGxcIiksZS4kPSEwLGljKGUsYyxudWxsKSk6aWMoZSxjLGIpO3RoaXMuRz0yO319ZWxzZSAzPT10aGlzLkcmJihhP1FkKHRoaXMsYSk6MD09dGhpcy5sLmxlbmd0aHx8aWQodGhpcy5pKXx8UWQodGhpcykpO307XG5mdW5jdGlvbiBRZChhLGIpe3ZhciBjO2I/Yz1iLm06Yz1hLlYrKztjb25zdCBkPU4oYS5GKTtSKGQsXCJTSURcIixhLkopO1IoZCxcIlJJRFwiLGMpO1IoZCxcIkFJRFwiLGEuVSk7S2QoYSxkKTthLm8mJmEucyYmR2QoZCxhLm8sYS5zKTtjPW5ldyBNKGEsYS5oLGMsYS5DKzEpO251bGw9PT1hLm8mJihjLkg9YS5zKTtiJiYoYS5sPWIuRC5jb25jYXQoYS5sKSk7Yj1QZChhLGMsMUUzKTtjLnNldFRpbWVvdXQoTWF0aC5yb3VuZCguNSphLnJhKStNYXRoLnJvdW5kKC41KmEucmEqTWF0aC5yYW5kb20oKSkpO0RjKGEuaSxjKTtpYyhjLGQsYik7fWZ1bmN0aW9uIEtkKGEsYil7YS5qJiZLYyh7fSxmdW5jdGlvbihjLGQpe1IoYixkLGMpO30pO31cbmZ1bmN0aW9uIFBkKGEsYixjKXtjPU1hdGgubWluKGEubC5sZW5ndGgsYyk7dmFyIGQ9YS5qP3EoYS5qLk9hLGEuaixhKTpudWxsO2E6e3ZhciBlPWEubDtsZXQgZj0tMTtmb3IoOzspe2NvbnN0IGg9W1wiY291bnQ9XCIrY107LTE9PWY/MDxjPyhmPWVbMF0uaCxoLnB1c2goXCJvZnM9XCIrZikpOmY9MDpoLnB1c2goXCJvZnM9XCIrZik7bGV0IG49ITA7Zm9yKGxldCB1PTA7dTxjO3UrKyl7bGV0IG09ZVt1XS5oO2NvbnN0IHI9ZVt1XS5nO20tPWY7aWYoMD5tKWY9TWF0aC5tYXgoMCxlW3VdLmgtMTAwKSxuPSExO2Vsc2UgdHJ5e21kKHIsaCxcInJlcVwiK20rXCJfXCIpO31jYXRjaChHKXtkJiZkKHIpO319aWYobil7ZD1oLmpvaW4oXCImXCIpO2JyZWFrIGF9fX1hPWEubC5zcGxpY2UoMCxjKTtiLkQ9YTtyZXR1cm4gZH1mdW5jdGlvbiBHYyhhKXthLmd8fGEudXx8KGEuWT0xLHpiKGEuR2EsYSksYS5BPTApO31cbmZ1bmN0aW9uIEJjKGEpe2lmKGEuZ3x8YS51fHwzPD1hLkEpcmV0dXJuICExO2EuWSsrO2EudT1LKHEoYS5HYSxhKSxPZChhLGEuQSkpO2EuQSsrO3JldHVybiAhMH1rLkdhPWZ1bmN0aW9uKCl7dGhpcy51PW51bGw7UmQodGhpcyk7aWYodGhpcy4kJiYhKHRoaXMuTHx8bnVsbD09dGhpcy5nfHwwPj10aGlzLk8pKXt2YXIgYT0yKnRoaXMuTzt0aGlzLmguaW5mbyhcIkJQIGRldGVjdGlvbiB0aW1lciBlbmFibGVkOiBcIithKTt0aGlzLkI9SyhxKHRoaXMuYmIsdGhpcyksYSk7fX07ay5iYj1mdW5jdGlvbigpe3RoaXMuQiYmKHRoaXMuQj1udWxsLHRoaXMuaC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksdGhpcy5oLmluZm8oXCJCdWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQgYW5kIHN3aXRjaCB0byBsb25nLXBvbGxpbmchXCIpLHRoaXMuTj0hMSx0aGlzLkw9ITAsSigxMCksQWModGhpcyksUmQodGhpcykpO307XG5mdW5jdGlvbiB3YyhhKXtudWxsIT1hLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ZnVuY3Rpb24gUmQoYSl7YS5nPW5ldyBNKGEsYS5oLFwicnBjXCIsYS5ZKTtudWxsPT09YS5vJiYoYS5nLkg9YS5zKTthLmcuTz0wO3ZhciBiPU4oYS5vYSk7UihiLFwiUklEXCIsXCJycGNcIik7UihiLFwiU0lEXCIsYS5KKTtSKGIsXCJDSVwiLGEuTj9cIjBcIjpcIjFcIik7UihiLFwiQUlEXCIsYS5VKTtLZChhLGIpO1IoYixcIlRZUEVcIixcInhtbGh0dHBcIik7YS5vJiZhLnMmJkdkKGIsYS5vLGEucyk7YS5LJiZhLmcuc2V0VGltZW91dChhLkspO3ZhciBjPWEuZzthPWEubGE7Yy5LPTE7Yy52PWpjKE4oYikpO2Mucz1udWxsO2MuVT0hMDtrYyhjLGEpO31rLmFiPWZ1bmN0aW9uKCl7bnVsbCE9dGhpcy52JiYodGhpcy52PW51bGwsQWModGhpcyksQmModGhpcyksSigxOSkpO307ZnVuY3Rpb24gemMoYSl7bnVsbCE9YS52JiYobC5jbGVhclRpbWVvdXQoYS52KSxhLnY9bnVsbCk7fVxuZnVuY3Rpb24gdWMoYSxiKXt2YXIgYz1udWxsO2lmKGEuZz09Yil7emMoYSk7d2MoYSk7YS5nPW51bGw7dmFyIGQ9Mjt9ZWxzZSBpZih5YyhhLmksYikpYz1iLkQsRmMoYS5pLGIpLGQ9MTtlbHNlIHJldHVybjthLkk9Yi5OO2lmKDAhPWEuRylpZihiLmkpaWYoMT09ZCl7Yz1iLnM/Yi5zLmxlbmd0aDowO2I9RGF0ZS5ub3coKS1iLkY7dmFyIGU9YS5DO2Q9U2IoKTtEKGQsbmV3IFZiKGQsYyxiLGUpKTtIYyhhKTt9ZWxzZSBHYyhhKTtlbHNlIGlmKGU9Yi5vLDM9PWV8fDA9PWUmJjA8YS5JfHwhKDE9PWQmJk5kKGEsYil8fDI9PWQmJkJjKGEpKSlzd2l0Y2goYyYmMDxjLmxlbmd0aCYmKGI9YS5pLGIuaT1iLmkuY29uY2F0KGMpKSxlKXtjYXNlIDE6UShhLDUpO2JyZWFrO2Nhc2UgNDpRKGEsMTApO2JyZWFrO2Nhc2UgMzpRKGEsNik7YnJlYWs7ZGVmYXVsdDpRKGEsMik7fX1cbmZ1bmN0aW9uIE9kKGEsYil7bGV0IGM9YS5QYStNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqYS4kYSk7YS5qfHwoYyo9Mik7cmV0dXJuIGMqYn1mdW5jdGlvbiBRKGEsYil7YS5oLmluZm8oXCJFcnJvciBjb2RlIFwiK2IpO2lmKDI9PWIpe3ZhciBjPW51bGw7YS5qJiYoYz1udWxsKTt2YXIgZD1xKGEuamIsYSk7Y3x8KGM9bmV3IFUoXCIvL3d3dy5nb29nbGUuY29tL2ltYWdlcy9jbGVhcmRvdC5naWZcIiksbC5sb2NhdGlvbiYmXCJodHRwXCI9PWwubG9jYXRpb24ucHJvdG9jb2x8fE9jKGMsXCJodHRwc1wiKSxqYyhjKSk7bmQoYy50b1N0cmluZygpLGQpO31lbHNlIEooMik7YS5HPTA7YS5qJiZhLmoudmEoYik7TGQoYSk7SmQoYSk7fWsuamI9ZnVuY3Rpb24oYSl7YT8odGhpcy5oLmluZm8oXCJTdWNjZXNzZnVsbHkgcGluZ2VkIGdvb2dsZS5jb21cIiksSigyKSk6KHRoaXMuaC5pbmZvKFwiRmFpbGVkIHRvIHBpbmcgZ29vZ2xlLmNvbVwiKSxKKDEpKTt9O1xuZnVuY3Rpb24gTGQoYSl7YS5HPTA7YS5JPS0xO2lmKGEuail7aWYoMCE9amQoYS5pKS5sZW5ndGh8fDAhPWEubC5sZW5ndGgpYS5pLmkubGVuZ3RoPTAscmEoYS5sKSxhLmwubGVuZ3RoPTA7YS5qLnVhKCk7fX1mdW5jdGlvbiBFYyhhLGIsYyl7bGV0IGQ9YWQoYyk7aWYoXCJcIiE9ZC5pKWImJlBjKGQsYitcIi5cIitkLmkpLFFjKGQsZC5tKTtlbHNlIHtjb25zdCBlPWwubG9jYXRpb247ZD1iZChlLnByb3RvY29sLGI/YitcIi5cIitlLmhvc3RuYW1lOmUuaG9zdG5hbWUsK2UucG9ydCxjKTt9YS5hYSYmeGEoYS5hYSxmdW5jdGlvbihlLGYpe1IoZCxmLGUpO30pO2I9YS5EO2M9YS5zYTtiJiZjJiZSKGQsYixjKTtSKGQsXCJWRVJcIixhLm1hKTtLZChhLGQpO3JldHVybiBkfVxuZnVuY3Rpb24gbmMoYSxiLGMpe2lmKGImJiFhLkgpdGhyb3cgRXJyb3IoXCJDYW4ndCBjcmVhdGUgc2Vjb25kYXJ5IGRvbWFpbiBjYXBhYmxlIFhocklvIG9iamVjdC5cIik7Yj1jJiZhLkJhJiYhYS5xYT9uZXcgWChuZXcgcGQoe2liOiEwfSkpOm5ldyBYKGEucWEpO2IuTD1hLkg7cmV0dXJuIGJ9ZnVuY3Rpb24gU2QoKXt9az1TZC5wcm90b3R5cGU7ay54YT1mdW5jdGlvbigpe307ay53YT1mdW5jdGlvbigpe307ay52YT1mdW5jdGlvbigpe307ay51YT1mdW5jdGlvbigpe307ay5PYT1mdW5jdGlvbigpe307ZnVuY3Rpb24gVGQoKXtpZih5JiYhKDEwPD1OdW1iZXIoVWEpKSl0aHJvdyBFcnJvcihcIkVudmlyb25tZW50YWwgZXJyb3I6IG5vIGF2YWlsYWJsZSB0cmFuc3BvcnQuXCIpO31UZC5wcm90b3R5cGUuZz1mdW5jdGlvbihhLGIpe3JldHVybiBuZXcgWShhLGIpfTtcbmZ1bmN0aW9uIFkoYSxiKXtDLmNhbGwodGhpcyk7dGhpcy5nPW5ldyBJZChiKTt0aGlzLmw9YTt0aGlzLmg9YiYmYi5tZXNzYWdlVXJsUGFyYW1zfHxudWxsO2E9YiYmYi5tZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLmNsaWVudFByb3RvY29sSGVhZGVyUmVxdWlyZWQmJihhP2FbXCJYLUNsaWVudC1Qcm90b2NvbFwiXT1cIndlYmNoYW5uZWxcIjphPXtcIlgtQ2xpZW50LVByb3RvY29sXCI6XCJ3ZWJjaGFubmVsXCJ9KTt0aGlzLmcucz1hO2E9YiYmYi5pbml0TWVzc2FnZUhlYWRlcnN8fG51bGw7YiYmYi5tZXNzYWdlQ29udGVudFR5cGUmJihhP2FbXCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCJdPWIubWVzc2FnZUNvbnRlbnRUeXBlOmE9e1wiWC1XZWJDaGFubmVsLUNvbnRlbnQtVHlwZVwiOmIubWVzc2FnZUNvbnRlbnRUeXBlfSk7YiYmYi55YSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1DbGllbnQtUHJvZmlsZVwiXT1iLnlhOmE9e1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCI6Yi55YX0pO3RoaXMuZy5QPVxuYTsoYT1iJiZiLmh0dHBIZWFkZXJzT3ZlcndyaXRlUGFyYW0pJiYhc2EoYSkmJih0aGlzLmcubz1hKTt0aGlzLkE9YiYmYi5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLnY9YiYmYi5zZW5kUmF3SnNvbnx8ITE7KGI9YiYmYi5odHRwU2Vzc2lvbklkUGFyYW0pJiYhc2EoYikmJih0aGlzLmcuRD1iLGE9dGhpcy5oLG51bGwhPT1hJiZiIGluIGEmJihhPXRoaXMuaCxiIGluIGEmJmRlbGV0ZSBhW2JdKSk7dGhpcy5qPW5ldyBaKHRoaXMpO310KFksQyk7WS5wcm90b3R5cGUubT1mdW5jdGlvbigpe3RoaXMuZy5qPXRoaXMuajt0aGlzLkEmJih0aGlzLmcuSD0hMCk7dmFyIGE9dGhpcy5nLGI9dGhpcy5sLGM9dGhpcy5ofHx2b2lkIDA7YS5XYSYmKGEuaC5pbmZvKFwiT3JpZ2luIFRyaWFscyBlbmFibGVkLlwiKSx6YihxKGEuaGIsYSxiKSkpO0ooMCk7YS5XPWI7YS5hYT1jfHx7fTthLk49YS5YO2EuRj1FYyhhLG51bGwsYS5XKTtIYyhhKTt9O1kucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7SWModGhpcy5nKTt9O1xuWS5wcm90b3R5cGUudT1mdW5jdGlvbihhKXtpZihcInN0cmluZ1wiPT09dHlwZW9mIGEpe3ZhciBiPXt9O2IuX19kYXRhX189YTtNZCh0aGlzLmcsYik7fWVsc2UgdGhpcy52PyhiPXt9LGIuX19kYXRhX189cmIoYSksTWQodGhpcy5nLGIpKTpNZCh0aGlzLmcsYSk7fTtZLnByb3RvdHlwZS5NPWZ1bmN0aW9uKCl7dGhpcy5nLmo9bnVsbDtkZWxldGUgdGhpcy5qO0ljKHRoaXMuZyk7ZGVsZXRlIHRoaXMuZztZLlouTS5jYWxsKHRoaXMpO307ZnVuY3Rpb24gVWQoYSl7YWMuY2FsbCh0aGlzKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IoY29uc3QgYyBpbiBiKXthPWM7YnJlYWsgYX1hPXZvaWQgMDt9aWYodGhpcy5pPWEpYT10aGlzLmksYj1udWxsIT09YiYmYSBpbiBiP2JbYV06dm9pZCAwO3RoaXMuZGF0YT1iO31lbHNlIHRoaXMuZGF0YT1hO310KFVkLGFjKTtmdW5jdGlvbiBWZCgpe2JjLmNhbGwodGhpcyk7dGhpcy5zdGF0dXM9MTt9dChWZCxiYyk7ZnVuY3Rpb24gWihhKXt0aGlzLmc9YTt9XG50KFosU2QpO1oucHJvdG90eXBlLnhhPWZ1bmN0aW9uKCl7RCh0aGlzLmcsXCJhXCIpO307Wi5wcm90b3R5cGUud2E9ZnVuY3Rpb24oYSl7RCh0aGlzLmcsbmV3IFVkKGEpKTt9O1oucHJvdG90eXBlLnZhPWZ1bmN0aW9uKGEpe0QodGhpcy5nLG5ldyBWZChhKSk7fTtaLnByb3RvdHlwZS51YT1mdW5jdGlvbigpe0QodGhpcy5nLFwiYlwiKTt9Oy8qXG5cbiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG5cbiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcblxuICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG5cbiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiovXG5UZC5wcm90b3R5cGUuY3JlYXRlV2ViQ2hhbm5lbD1UZC5wcm90b3R5cGUuZztZLnByb3RvdHlwZS5zZW5kPVkucHJvdG90eXBlLnU7WS5wcm90b3R5cGUub3Blbj1ZLnByb3RvdHlwZS5tO1kucHJvdG90eXBlLmNsb3NlPVkucHJvdG90eXBlLmNsb3NlO1diLk5PX0VSUk9SPTA7V2IuVElNRU9VVD04O1diLkhUVFBfRVJST1I9NjtYYi5DT01QTEVURT1cImNvbXBsZXRlXCI7JGIuRXZlbnRUeXBlPUw7TC5PUEVOPVwiYVwiO0wuQ0xPU0U9XCJiXCI7TC5FUlJPUj1cImNcIjtMLk1FU1NBR0U9XCJkXCI7Qy5wcm90b3R5cGUubGlzdGVuPUMucHJvdG90eXBlLk47WC5wcm90b3R5cGUubGlzdGVuT25jZT1YLnByb3RvdHlwZS5PO1gucHJvdG90eXBlLmdldExhc3RFcnJvcj1YLnByb3RvdHlwZS5MYTtYLnByb3RvdHlwZS5nZXRMYXN0RXJyb3JDb2RlPVgucHJvdG90eXBlLkRhO1gucHJvdG90eXBlLmdldFN0YXR1cz1YLnByb3RvdHlwZS5iYTtYLnByb3RvdHlwZS5nZXRSZXNwb25zZUpzb249WC5wcm90b3R5cGUuUWE7XG5YLnByb3RvdHlwZS5nZXRSZXNwb25zZVRleHQ9WC5wcm90b3R5cGUuZ2E7WC5wcm90b3R5cGUuc2VuZD1YLnByb3RvdHlwZS5lYTt2YXIgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCA9IGVzbS5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBUZH07dmFyIGdldFN0YXRFdmVudFRhcmdldCA9IGVzbS5nZXRTdGF0RXZlbnRUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gU2IoKX07dmFyIEVycm9yQ29kZSA9IGVzbS5FcnJvckNvZGU9V2I7dmFyIEV2ZW50VHlwZSA9IGVzbS5FdmVudFR5cGU9WGI7dmFyIEV2ZW50ID0gZXNtLkV2ZW50PUg7dmFyIFN0YXQgPSBlc20uU3RhdD17cmI6MCx1YjoxLHZiOjIsT2I6MyxUYjo0LFFiOjUsUmI6NixQYjo3LE5iOjgsU2I6OSxQUk9YWToxMCxOT1BST1hZOjExLExiOjEyLEhiOjEzLEliOjE0LEdiOjE1LEpiOjE2LEtiOjE3LG5iOjE4LG1iOjE5LG9iOjIwfTt2YXIgRmV0Y2hYbWxIdHRwRmFjdG9yeSA9IGVzbS5GZXRjaFhtbEh0dHBGYWN0b3J5PXBkO3ZhciBXZWJDaGFubmVsID0gZXNtLldlYkNoYW5uZWw9JGI7XG52YXIgWGhySW8gPSBlc20uWGhySW89WDtcblxuZXhwb3J0IHsgRXJyb3JDb2RlLCBFdmVudCwgRXZlbnRUeXBlLCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBTdGF0LCBXZWJDaGFubmVsLCBYaHJJbywgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZXNtIGFzIGRlZmF1bHQsIGdldFN0YXRFdmVudFRhcmdldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsImltcG9ydCB7IF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBfZ2V0UHJvdmlkZXIsIGdldEFwcCwgX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSwgU0RLX1ZFUlNJT04gfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgTG9nZ2VyLCBMb2dMZXZlbCB9IGZyb20gJ0BmaXJlYmFzZS9sb2dnZXInO1xuaW1wb3J0IHsgRmlyZWJhc2VFcnJvciwgY3JlYXRlTW9ja1VzZXJUb2tlbiwgZ2V0TW9kdWxhckluc3RhbmNlLCBkZWVwRXF1YWwsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmksIGlzTW9iaWxlQ29yZG92YSwgaXNSZWFjdE5hdGl2ZSwgaXNFbGVjdHJvbiwgaXNJRSwgaXNVV1AsIGlzQnJvd3NlckV4dGVuc2lvbiB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFhocklvLCBFdmVudFR5cGUsIEVycm9yQ29kZSwgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZ2V0U3RhdEV2ZW50VGFyZ2V0LCBGZXRjaFhtbEh0dHBGYWN0b3J5LCBXZWJDaGFubmVsLCBFdmVudCwgU3RhdCB9IGZyb20gJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInO1xuXG5jb25zdCBEID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIEMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy51aWQgPSB0O1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIEMuVU5BVVRIRU5USUNBVEVEID0gbmV3IEMobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuQy5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgQyhcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIEMuRklSU1RfUEFSVFkgPSBuZXcgQyhcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5DLk1PQ0tfVVNFUiA9IG5ldyBDKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IHggPSBcIjkuNi4xMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgTiA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIGsoKSB7XG4gICAgcmV0dXJuIE4ubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiBNKHQpIHtcbiAgICBOLnNldExvZ0xldmVsKHQpO1xufVxuXG5mdW5jdGlvbiBPKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoQik7XG4gICAgICAgIE4uZGVidWcoYEZpcmVzdG9yZSAoJHt4fSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEYodCwgLi4uZSkge1xuICAgIGlmIChOLmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChCKTtcbiAgICAgICAgTi5lcnJvcihgRmlyZXN0b3JlICgke3h9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiAkKHQsIC4uLmUpIHtcbiAgICBpZiAoTi5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcChCKTtcbiAgICAgICAgTi53YXJuKGBGaXJlc3RvcmUgKCR7eH0pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBCKHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGUgPSB0LCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgIHZhciBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIEwodCA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgZSA9IGBGSVJFU1RPUkUgKCR7eH0pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyB0O1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IEYoZSksIG5ldyBFcnJvcihlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBVKHQsIGUpIHtcbiAgICB0IHx8IEwoKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gcSh0LCBlKSB7XG4gICAgdCB8fCBMKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBHKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSyA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgUSBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tlbmQgZXJyb3IgY29kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlcnJvci5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIGN1c3RvbSBlcnJvciBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLmNvZGUgPSB0LCB0aGlzLm1lc3NhZ2UgPSBlLCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgaiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gdCwgdGhpcy5yZWplY3QgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBXIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke3R9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB6IHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShDLlVOQVVUSEVOVElDQVRFRCkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyByZXR1cm5zIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgZm9yXG4gKiBlbXVsYXRvciB0b2tlbiBtb2NraW5nLlxuICovIGNsYXNzIEgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGUsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBKIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudCA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBDLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdCA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgZSh0KSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgLy8gQSBwcm9taXNlIHRoYXQgY2FuIGJlIHdhaXRlZCBvbiB0byBibG9jayBvbiB0aGUgbmV4dCB0b2tlbiBjaGFuZ2UuXG4gICAgICAgIC8vIFRoaXMgcHJvbWlzZSBpcyByZS1jcmVhdGVkIGFmdGVyIGVhY2ggY2hhbmdlLlxuICAgICAgICAgICAgICAgIGxldCBpID0gbmV3IGo7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIGkucmVzb2x2ZSgpLCBpID0gbmV3IGosIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gcyh0aGlzLmN1cnJlbnRVc2VyKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGk7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBlLnByb21pc2UsIGF3YWl0IHModGhpcy5jdXJyZW50VXNlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIG8gPSB0ID0+IHtcbiAgICAgICAgICAgIE8oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gdCwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgcigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KCh0ID0+IG8odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbyh0KSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgIE8oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBqKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCByKCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICAvLyBUYWtlIG5vdGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRva2VuQ291bnRlciBzbyB0aGF0IHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGNhbiBmYWlsICh3aXRoIGFuIEFCT1JURUQgZXJyb3IpIGlmIHRoZXJlIGlzIGEgdG9rZW4gY2hhbmdlIHdoaWxlIHRoZVxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5pLCBlID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPyB0aGlzLmF1dGguZ2V0VG9rZW4oZSkudGhlbigoZSA9PiBcbiAgICAgICAgLy8gQ2FuY2VsIHRoZSByZXF1ZXN0IHNpbmNlIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIHRoZSByZXF1ZXN0IHdhc1xuICAgICAgICAvLyBvdXRzdGFuZGluZyBzbyB0aGUgcmVzcG9uc2UgaXMgcG90ZW50aWFsbHkgZm9yIGEgcHJldmlvdXMgdXNlciAod2hpY2hcbiAgICAgICAgLy8gdXNlciwgd2UgY2FuJ3QgYmUgc3VyZSkuXG4gICAgICAgIHRoaXMuaSAhPT0gdCA/IChPKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcImdldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS5cIiksIFxuICAgICAgICB0aGlzLmdldFRva2VuKCkpIDogZSA/IChVKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuYWNjZXNzVG9rZW4pLCBuZXcgVyhlLmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIFUobnVsbCA9PT0gdCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSwgbmV3IEModCk7XG4gICAgfVxufVxuXG4vKlxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXG4gKi8gY2xhc3MgWSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkZpcnN0UGFydHlcIiwgdGhpcy51c2VyID0gQy5GSVJTVF9QQVJUWSwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIlgtR29vZy1BdXRoVXNlclwiLCBlKTtcbiAgICAgICAgY29uc3QgcyA9IHQuYXV0aC5nZXRBdXRoSGVhZGVyVmFsdWVGb3JGaXJzdFBhcnR5KFtdKTtcbiAgICAgICAgcyAmJiB0aGlzLmhlYWRlcnMuc2V0KFwiQXV0aG9yaXphdGlvblwiLCBzKSwgbiAmJiB0aGlzLmhlYWRlcnMuc2V0KFwiWC1Hb29nLUlhbS1BdXRob3JpemF0aW9uLVRva2VuXCIsIG4pO1xuICAgIH1cbn1cblxuLypcbiAqIFByb3ZpZGVzIHVzZXIgY3JlZGVudGlhbHMgcmVxdWlyZWQgZm9yIHRoZSBGaXJlc3RvcmUgSmF2YVNjcmlwdCBTREtcbiAqIHRvIGF1dGhlbnRpY2F0ZSB0aGUgdXNlciwgdXNpbmcgdGVjaG5pcXVlIHRoYXQgaXMgb25seSBhdmFpbGFibGVcbiAqIHRvIGFwcGxpY2F0aW9ucyBob3N0ZWQgYnkgR29vZ2xlLlxuICovIGNsYXNzIFgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5oID0gdCwgdGhpcy5sID0gZSwgdGhpcy5tID0gbjtcbiAgICB9XG4gICAgZ2V0VG9rZW4oKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IFkodGhpcy5oLCB0aGlzLmwsIHRoaXMubSkpO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVpZC5cbiAgICAgICAgdC5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiBlKEMuRklSU1RfUEFSVFkpKSk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxufVxuXG5jbGFzcyBaIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0LCB0aGlzLnR5cGUgPSBcIkFwcENoZWNrXCIsIHRoaXMuaGVhZGVycyA9IG5ldyBNYXAsIHQgJiYgdC5sZW5ndGggPiAwICYmIHRoaXMuaGVhZGVycy5zZXQoXCJ4LWZpcmViYXNlLWFwcGNoZWNrXCIsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuY2xhc3MgdHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5nID0gdCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA9IG51bGwsIHRoaXMucCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPSB0LmVycm9yICYmIE8oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgRXJyb3IgZ2V0dGluZyBBcHAgQ2hlY2sgdG9rZW47IHVzaW5nIHBsYWNlaG9sZGVyIHRva2VuIGluc3RlYWQuIEVycm9yOiAke3QuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRva2VuICE9PSB0aGlzLnA7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wID0gdC50b2tlbiwgTyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBSZWNlaXZlZCAke24gPyBcIm5ld1wiIDogXCJleGlzdGluZ1wifSB0b2tlbi5gKSwgXG4gICAgICAgICAgICBuID8gZSh0LnRva2VuKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm8gPSBlID0+IHtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gbihlKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzID0gdCA9PiB7XG4gICAgICAgICAgICBPKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBkZXRlY3RlZFwiKSwgdGhpcy5hcHBDaGVjayA9IHQsIHRoaXMuYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmcub25Jbml0KCh0ID0+IHModCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBcHBDaGVjayBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmcuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IHModCkgOiBcbiAgICAgICAgICAgICAgICAvLyBJZiBBcHBDaGVjayBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGhvdXQgaXQuXG4gICAgICAgICAgICAgICAgTyhcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgbm90IHlldCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA/IHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4odCkudGhlbigodCA9PiB0ID8gKFUoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50b2tlbiksIFxuICAgICAgICB0aGlzLnAgPSB0LnRva2VuLCBuZXcgWih0LnRva2VuKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgJiYgdGhpcy5hcHBDaGVjay5yZW1vdmVUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIEFwcENoZWNrIHRva2VuIHByb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGV0IHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgWihcIlwiKSk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHt9XG4gICAgc3RhcnQodCwgZSkge31cbiAgICBzaHV0ZG93bigpIHt9XG59XG5cbi8qKlxuICogQnVpbGRzIGEgQ3JlZGVudGlhbHNQcm92aWRlciBkZXBlbmRpbmcgb24gdGhlIHR5cGUgb2ZcbiAqIHRoZSBjcmVkZW50aWFscyBwYXNzZWQgaW4uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovXG5jbGFzcyBudCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByZXZpb3VzVmFsdWUgPSB0LCBlICYmIChlLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IHQgPT4gdGhpcy5JKHQpLCB0aGlzLlQgPSB0ID0+IGUud3JpdGVTZXF1ZW5jZU51bWJlcih0KSk7XG4gICAgfVxuICAgIEkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmV2aW91c1ZhbHVlID0gTWF0aC5tYXgodCwgdGhpcy5wcmV2aW91c1ZhbHVlKSwgdGhpcy5wcmV2aW91c1ZhbHVlO1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICBjb25zdCB0ID0gKyt0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgICAgIHJldHVybiB0aGlzLlQgJiYgdGhpcy5UKHQpLCB0O1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGBuQnl0ZXNgIG9mIHJhbmRvbSBieXRlcy5cbiAqXG4gKiBJZiBgbkJ5dGVzIDwgMGAgLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZnVuY3Rpb24gc3QodCkge1xuICAgIC8vIFBvbHlmaWxscyBmb3IgSUUgYW5kIFdlYldvcmtlciBieSB1c2luZyBgc2VsZmAgYW5kIGBtc0NyeXB0b2Agd2hlbiBgY3J5cHRvYCBpcyBub3QgYXZhaWxhYmxlLlxuICAgIGNvbnN0IGUgPSBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIHNlbGYgJiYgKHNlbGYuY3J5cHRvIHx8IHNlbGYubXNDcnlwdG8pLCBuID0gbmV3IFVpbnQ4QXJyYXkodCk7XG4gICAgaWYgKGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLmdldFJhbmRvbVZhbHVlcykgZS5nZXRSYW5kb21WYWx1ZXMobik7IGVsc2UgXG4gICAgLy8gRmFsbHMgYmFjayB0byBNYXRoLnJhbmRvbVxuICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdDsgZSsrKSBuW2VdID0gTWF0aC5mbG9vcigyNTYgKiBNYXRoLnJhbmRvbSgpKTtcbiAgICByZXR1cm4gbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gbnQuQSA9IC0xO1xuXG5jbGFzcyBpdCB7XG4gICAgc3RhdGljIFIoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IHQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIGUgPSBNYXRoLmZsb29yKDI1NiAvIHQubGVuZ3RoKSAqIHQubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gc3QoNDApO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzLmxlbmd0aDsgKytpKSBcbiAgICAgICAgICAgIC8vIE9ubHkgYWNjZXB0IHZhbHVlcyB0aGF0IGFyZSBbMCwgbWF4TXVsdGlwbGUpLCB0aGlzIGVuc3VyZXMgdGhleSBjYW5cbiAgICAgICAgICAgIC8vIGJlIGV2ZW5seSBtYXBwZWQgdG8gaW5kaWNlcyBvZiBgY2hhcnNgIHZpYSBhIG1vZHVsbyBvcGVyYXRpb24uXG4gICAgICAgICAgICBuLmxlbmd0aCA8IDIwICYmIHNbaV0gPCBlICYmIChuICs9IHQuY2hhckF0KHNbaV0gJSB0Lmxlbmd0aCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcnQodCwgZSkge1xuICAgIHJldHVybiB0IDwgZSA/IC0xIDogdCA+IGUgPyAxIDogMDtcbn1cblxuLyoqIEhlbHBlciB0byBjb21wYXJlIGFycmF5cyB1c2luZyBpc0VxdWFsKCkuICovIGZ1bmN0aW9uIG90KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdC5sZW5ndGggPT09IGUubGVuZ3RoICYmIHQuZXZlcnkoKCh0LCBzKSA9PiBuKHQsIGVbc10pKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1tZWRpYXRlIGxleGljb2dyYXBoaWNhbGx5LWZvbGxvd2luZyBzdHJpbmcuIFRoaXMgaXMgdXNlZnVsIHRvXG4gKiBjb25zdHJ1Y3QgYW4gaW5jbHVzaXZlIHJhbmdlIGZvciBpbmRleGVkZGIgaXRlcmF0b3JzLlxuICovIGZ1bmN0aW9uIHV0KHQpIHtcbiAgICAvLyBSZXR1cm4gdGhlIGlucHV0IHN0cmluZywgd2l0aCBhbiBhZGRpdGlvbmFsIE5VTCBieXRlIGFwcGVuZGVkLlxuICAgIHJldHVybiB0ICsgXCJcXDBcIjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBlYXJsaWVzdCBkYXRlIHN1cHBvcnRlZCBieSBGaXJlc3RvcmUgdGltZXN0YW1wcyAoMDAwMS0wMS0wMVQwMDowMDowMFopLlxuLyoqXG4gKiBBIGBUaW1lc3RhbXBgIHJlcHJlc2VudHMgYSBwb2ludCBpbiB0aW1lIGluZGVwZW5kZW50IG9mIGFueSB0aW1lIHpvbmUgb3JcbiAqIGNhbGVuZGFyLCByZXByZXNlbnRlZCBhcyBzZWNvbmRzIGFuZCBmcmFjdGlvbnMgb2Ygc2Vjb25kcyBhdCBuYW5vc2Vjb25kXG4gKiByZXNvbHV0aW9uIGluIFVUQyBFcG9jaCB0aW1lLlxuICpcbiAqIEl0IGlzIGVuY29kZWQgdXNpbmcgdGhlIFByb2xlcHRpYyBHcmVnb3JpYW4gQ2FsZW5kYXIgd2hpY2ggZXh0ZW5kcyB0aGVcbiAqIEdyZWdvcmlhbiBjYWxlbmRhciBiYWNrd2FyZHMgdG8geWVhciBvbmUuIEl0IGlzIGVuY29kZWQgYXNzdW1pbmcgYWxsIG1pbnV0ZXNcbiAqIGFyZSA2MCBzZWNvbmRzIGxvbmcsIGkuZS4gbGVhcCBzZWNvbmRzIGFyZSBcInNtZWFyZWRcIiBzbyB0aGF0IG5vIGxlYXAgc2Vjb25kXG4gKiB0YWJsZSBpcyBuZWVkZWQgZm9yIGludGVycHJldGF0aW9uLiBSYW5nZSBpcyBmcm9tIDAwMDEtMDEtMDFUMDA6MDA6MDBaIHRvXG4gKiA5OTk5LTEyLTMxVDIzOjU5OjU5Ljk5OTk5OTk5OVouXG4gKlxuICogRm9yIGV4YW1wbGVzIGFuZCBmdXJ0aGVyIHNwZWNpZmljYXRpb25zLCByZWZlciB0byB0aGVcbiAqIHtAbGluayBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL3Byb3RvYnVmL2Jsb2IvbWFzdGVyL3NyYy9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvIHwgVGltZXN0YW1wIGRlZmluaXRpb259LlxuICovXG5jbGFzcyBhdCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2Vjb25kcyAtIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLiBNdXN0IGJlIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAgICAgKiAgICAgOTk5OS0xMi0zMVQyMzo1OTo1OVogaW5jbHVzaXZlLlxuICAgICAqIEBwYXJhbSBuYW5vc2Vjb25kcyAtIFRoZSBub24tbmVnYXRpdmUgZnJhY3Rpb25zIG9mIGEgc2Vjb25kIGF0IG5hbm9zZWNvbmRcbiAgICAgKiAgICAgcmVzb2x1dGlvbi4gTmVnYXRpdmUgc2Vjb25kIHZhbHVlcyB3aXRoIGZyYWN0aW9ucyBtdXN0IHN0aWxsIGhhdmVcbiAgICAgKiAgICAgbm9uLW5lZ2F0aXZlIG5hbm9zZWNvbmRzIHZhbHVlcyB0aGF0IGNvdW50IGZvcndhcmQgaW4gdGltZS4gTXVzdCBiZVxuICAgICAqICAgICBmcm9tIDAgdG8gOTk5LDk5OSw5OTkgaW5jbHVzaXZlLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2Ygc2Vjb25kcyBvZiBVVEMgdGltZSBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZCByZXNvbHV0aW9uLipcbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIGlmICh0aGlzLnNlY29uZHMgPSB0LCB0aGlzLm5hbm9zZWNvbmRzID0gZSwgZSA8IDApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAoZSA+PSAxZTkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgbmFub3NlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIGUpO1xuICAgICAgICBpZiAodCA8IC02MjEzNTU5NjgwMCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICAgICAgLy8gVGhpcyB3aWxsIGJyZWFrIGluIHRoZSB5ZWFyIDEwLDAwMC5cbiAgICAgICAgICAgICAgICBpZiAodCA+PSAyNTM0MDIzMDA4MDApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUaW1lc3RhbXAgc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIHdpdGggdGhlIGN1cnJlbnQgZGF0ZSwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBhIG5ldyB0aW1lc3RhbXAgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBub3coKSB7XG4gICAgICAgIHJldHVybiBhdC5mcm9tTWlsbGlzKERhdGUubm93KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcCBmcm9tIHRoZSBnaXZlbiBkYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGUgLSBUaGUgZGF0ZSB0byBpbml0aWFsaXplIHRoZSBgVGltZXN0YW1wYCBmcm9tLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBkYXRlLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbURhdGUodCkge1xuICAgICAgICByZXR1cm4gYXQuZnJvbU1pbGxpcyh0LmdldFRpbWUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gbWlsbGlzZWNvbmRzIC0gTnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoXG4gICAgICogICAgIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IGBUaW1lc3RhbXBgIHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzIHRoZSBnaXZlblxuICAgICAqICAgICBudW1iZXIgb2YgbWlsbGlzZWNvbmRzLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbU1pbGxpcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHQgLyAxZTMpLCBuID0gTWF0aC5mbG9vcigxZTYgKiAodCAtIDFlMyAqIGUpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgYSBgVGltZXN0YW1wYCB0byBhIEphdmFTY3JpcHQgYERhdGVgIG9iamVjdC4gVGhpcyBjb252ZXJzaW9uXG4gICAgICogY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24gc2luY2UgYERhdGVgIG9iamVjdHMgb25seSBzdXBwb3J0IG1pbGxpc2Vjb25kXG4gICAgICogcHJlY2lzaW9uLlxuICAgICAqXG4gICAgICogQHJldHVybnMgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc2FtZSBwb2ludCBpbiB0aW1lIGFzXG4gICAgICogICAgIHRoaXMgYFRpbWVzdGFtcGAsIHdpdGggbWlsbGlzZWNvbmQgcHJlY2lzaW9uLlxuICAgICAqLyAgICB0b0RhdGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSh0aGlzLnRvTWlsbGlzKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgbnVtZXJpYyB0aW1lc3RhbXAgKGluIG1pbGxpc2Vjb25kcyBzaW5jZVxuICAgICAqIGVwb2NoKS4gVGhpcyBvcGVyYXRpb24gY2F1c2VzIGEgbG9zcyBvZiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgcG9pbnQgaW4gdGltZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgdGltZXN0YW1wLCByZXByZXNlbnRlZCBhc1xuICAgICAqICAgICB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSBVbml4IGVwb2NoIDE5NzAtMDEtMDFUMDA6MDA6MDBaLlxuICAgICAqLyAgICB0b01pbGxpcygpIHtcbiAgICAgICAgcmV0dXJuIDFlMyAqIHRoaXMuc2Vjb25kcyArIHRoaXMubmFub3NlY29uZHMgLyAxZTY7XG4gICAgfVxuICAgIF9jb21wYXJlVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWNvbmRzID09PSB0LnNlY29uZHMgPyBydCh0aGlzLm5hbm9zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKSA6IHJ0KHRoaXMuc2Vjb25kcywgdC5zZWNvbmRzKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgVGltZXN0YW1wYCB0byBjb21wYXJlIGFnYWluc3QuXG4gICAgICogQHJldHVybnMgdHJ1ZSBpZiB0aGlzIGBUaW1lc3RhbXBgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC5zZWNvbmRzID09PSB0aGlzLnNlY29uZHMgJiYgdC5uYW5vc2Vjb25kcyA9PT0gdGhpcy5uYW5vc2Vjb25kcztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSB0ZXh0dWFsIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJUaW1lc3RhbXAoc2Vjb25kcz1cIiArIHRoaXMuc2Vjb25kcyArIFwiLCBuYW5vc2Vjb25kcz1cIiArIHRoaXMubmFub3NlY29uZHMgKyBcIilcIjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBUaW1lc3RhbXBgLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiB0aGlzLnNlY29uZHMsXG4gICAgICAgICAgICBuYW5vc2Vjb25kczogdGhpcy5uYW5vc2Vjb25kc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIG9iamVjdCB0byBhIHByaW1pdGl2ZSBzdHJpbmcsIHdoaWNoIGFsbG93cyBgVGltZXN0YW1wYCBvYmplY3RzXG4gICAgICogdG8gYmUgY29tcGFyZWQgdXNpbmcgdGhlIGA+YCwgYDw9YCwgYD49YCBhbmQgYD5gIG9wZXJhdG9ycy5cbiAgICAgKi8gICAgdmFsdWVPZigpIHtcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHN0cmluZyBvZiB0aGUgZm9ybSA8c2Vjb25kcz4uPG5hbm9zZWNvbmRzPiB3aGVyZVxuICAgICAgICAvLyA8c2Vjb25kcz4gaXMgdHJhbnNsYXRlZCB0byBoYXZlIGEgbm9uLW5lZ2F0aXZlIHZhbHVlIGFuZCBib3RoIDxzZWNvbmRzPlxuICAgICAgICAvLyBhbmQgPG5hbm9zZWNvbmRzPiBhcmUgbGVmdC1wYWRkZWQgd2l0aCB6ZXJvZXMgdG8gYmUgYSBjb25zaXN0ZW50IGxlbmd0aC5cbiAgICAgICAgLy8gU3RyaW5ncyB3aXRoIHRoaXMgZm9ybWF0IHRoZW4gaGF2ZSBhIGxleGlvZ3JhcGhpY2FsIG9yZGVyaW5nIHRoYXQgbWF0Y2hlc1xuICAgICAgICAvLyB0aGUgZXhwZWN0ZWQgb3JkZXJpbmcuIFRoZSA8c2Vjb25kcz4gdHJhbnNsYXRpb24gaXMgZG9uZSB0byBhdm9pZCBoYXZpbmdcbiAgICAgICAgLy8gYSBsZWFkaW5nIG5lZ2F0aXZlIHNpZ24gKGkuZS4gYSBsZWFkaW5nICctJyBjaGFyYWN0ZXIpIGluIGl0cyBzdHJpbmdcbiAgICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdoaWNoIHdvdWxkIGFmZmVjdCBpdHMgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcuXG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnNlY29uZHMgLSAtNjIxMzU1OTY4MDA7XG4gICAgICAgIC8vIE5vdGU6IFVwIHRvIDEyIGRlY2ltYWwgZGlnaXRzIGFyZSByZXF1aXJlZCB0byByZXByZXNlbnQgYWxsIHZhbGlkXG4gICAgICAgIC8vICdzZWNvbmRzJyB2YWx1ZXMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFN0cmluZyh0KS5wYWRTdGFydCgxMiwgXCIwXCIpICsgXCIuXCIgKyBTdHJpbmcodGhpcy5uYW5vc2Vjb25kcykucGFkU3RhcnQoOSwgXCIwXCIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB2ZXJzaW9uIG9mIGEgZG9jdW1lbnQgaW4gRmlyZXN0b3JlLiBUaGlzIGNvcnJlc3BvbmRzIHRvIHRoZSB2ZXJzaW9uXG4gKiB0aW1lc3RhbXAsIHN1Y2ggYXMgdXBkYXRlX3RpbWUgb3IgcmVhZF90aW1lLlxuICovIGNsYXNzIGN0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gdDtcbiAgICB9XG4gICAgc3RhdGljIGZyb21UaW1lc3RhbXAodCkge1xuICAgICAgICByZXR1cm4gbmV3IGN0KHQpO1xuICAgIH1cbiAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IGN0KG5ldyBhdCgwLCAwKSk7XG4gICAgfVxuICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgY3QobmV3IGF0KDI1MzQwMjMwMDc5OSwgOTk5OTk5OTk5KSk7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5fY29tcGFyZVRvKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcC5pc0VxdWFsKHQudGltZXN0YW1wKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBudW1iZXIgcmVwcmVzZW50YXRpb24gb2YgdGhlIHZlcnNpb24gZm9yIHVzZSBpbiBzcGVjIHRlc3RzLiAqLyAgICB0b01pY3Jvc2Vjb25kcygpIHtcbiAgICAgICAgLy8gQ29udmVydCB0byBtaWNyb3NlY29uZHMuXG4gICAgICAgIHJldHVybiAxZTYgKiB0aGlzLnRpbWVzdGFtcC5zZWNvbmRzICsgdGhpcy50aW1lc3RhbXAubmFub3NlY29uZHMgLyAxZTM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJTbmFwc2hvdFZlcnNpb24oXCIgKyB0aGlzLnRpbWVzdGFtcC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIHRvVGltZXN0YW1wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aW1lc3RhbXA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBodCh0KSB7XG4gICAgbGV0IGUgPSAwO1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZSsrO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBsdCh0LCBlKSB7XG4gICAgZm9yIChjb25zdCBuIGluIHQpIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBuKSAmJiBlKG4sIHRbbl0pO1xufVxuXG5mdW5jdGlvbiBmdCh0KSB7XG4gICAgZm9yIChjb25zdCBlIGluIHQpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgZSkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqL1xuY2xhc3MgZHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdm9pZCAwID09PSBlID8gZSA9IDAgOiBlID4gdC5sZW5ndGggJiYgTCgpLCB2b2lkIDAgPT09IG4gPyBuID0gdC5sZW5ndGggLSBlIDogbiA+IHQubGVuZ3RoIC0gZSAmJiBMKCksIFxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gdCwgdGhpcy5vZmZzZXQgPSBlLCB0aGlzLmxlbiA9IG47XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbjtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiAwID09PSBkdC5jb21wYXJhdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBjaGlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGR0ID8gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0KTtcbiAgICAgICAgfSkpIDogZS5wdXNoKHQpLCB0aGlzLmNvbnN0cnVjdChlKTtcbiAgICB9XG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqLyAgICBsaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIHBvcEZpcnN0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB2b2lkIDAgPT09IHQgPyAxIDogdCwgdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyB0LCB0aGlzLmxlbmd0aCAtIHQpO1xuICAgIH1cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGZpcnN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xuICAgIH1cbiAgICBsYXN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgdF07XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgaXNQcmVmaXhPZih0KSB7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA8IHRoaXMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlzSW1tZWRpYXRlUGFyZW50T2YodCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IHRoaXMub2Zmc2V0LCBuID0gdGhpcy5saW1pdCgpOyBlIDwgbjsgZSsrKSB0KHRoaXMuc2VnbWVudHNbZV0pO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4odC5sZW5ndGgsIGUubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuOyBzKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChzKSwgaSA9IGUuZ2V0KHMpO1xuICAgICAgICAgICAgaWYgKG4gPCBpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAobiA+IGkpIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCA8IGUubGVuZ3RoID8gLTEgOiB0Lmxlbmd0aCA+IGUubGVuZ3RoID8gMSA6IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxuICogd2l0aGluIEZpcmVzdG9yZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBfdCBleHRlbmRzIGR0IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IF90KHQsIGUsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLiBJZiBtdWx0aXBsZVxuICAgICAqIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQsIGFsbCBjb21wb25lbnRzIGFyZSBjb21iaW5lZC4gTGVhZGluZyBhbmQgdHJhaWxpbmdcbiAgICAgKiBzbGFzaGVzIGZyb20gYWxsIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU3RyaW5nKC4uLnQpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkge1xuICAgICAgICAgICAgaWYgKG4uaW5kZXhPZihcIi8vXCIpID49IDApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgc2VnbWVudCAoJHtufSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5gKTtcbiAgICAgICAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKHQgPT4gdC5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgX3QoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgX3QoW10pO1xuICAgIH1cbn1cblxuY29uc3Qgd3QgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcblxuLyoqXG4gKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIG10IGV4dGVuZHMgZHQge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgbXQodCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXG4gICAgICovICAgIHN0YXRpYyBpc1ZhbGlkSWRlbnRpZmllcih0KSB7XG4gICAgICAgIHJldHVybiB3dC50ZXN0KHQpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKHQgPT4gKHQgPSB0LnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBtdC5pc1ZhbGlkSWRlbnRpZmllcih0KSB8fCAodCA9IFwiYFwiICsgdCArIFwiYFwiKSwgdCkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIFwiX19uYW1lX19cIiA9PT0gdGhpcy5nZXQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIHN0YXRpYyBrZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtdChbIFwiX19uYW1lX19cIiBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlcnZlckZvcm1hdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBcIlwiLCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2ApO1xuICAgICAgICAgICAgZS5wdXNoKG4pLCBuID0gXCJcIjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgZm9yICg7cyA8IHQubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0W3NdO1xuICAgICAgICAgICAgaWYgKFwiXFxcXFwiID09PSBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMgKyAxID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRbcyArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gZSAmJiBcIi5cIiAhPT0gZSAmJiBcImBcIiAhPT0gZSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIGludmFsaWQgZXNjYXBlIHNlcXVlbmNlOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIG4gKz0gZSwgcyArPSAyO1xuICAgICAgICAgICAgfSBlbHNlIFwiYFwiID09PSBlID8gKHIgPSAhciwgcysrKSA6IFwiLlwiICE9PSBlIHx8IHIgPyAobiArPSBlLCBzKyspIDogKGkoKSwgcysrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSgpLCByKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogXCIgKyB0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBtdChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBtdChbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyBhIHNldCBvZiBmaWVsZHMgdGhhdCBjYW4gYmUgdXNlZCB0byBwYXJ0aWFsbHkgcGF0Y2ggYSBkb2N1bWVudC5cbiAqIEZpZWxkTWFzayBpcyB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggT2JqZWN0VmFsdWUuXG4gKiBFeGFtcGxlczpcbiAqICAgZm9vIC0gT3ZlcndyaXRlcyBmb28gZW50aXJlbHkgd2l0aCB0aGUgcHJvdmlkZWQgdmFsdWUuIElmIGZvbyBpcyBub3RcbiAqICAgICAgICAgcHJlc2VudCBpbiB0aGUgY29tcGFuaW9uIE9iamVjdFZhbHVlLCB0aGUgZmllbGQgaXMgZGVsZXRlZC5cbiAqICAgZm9vLmJhciAtIE92ZXJ3cml0ZXMgb25seSB0aGUgZmllbGQgYmFyIG9mIHRoZSBvYmplY3QgZm9vLlxuICogICAgICAgICAgICAgSWYgZm9vIGlzIG5vdCBhbiBvYmplY3QsIGZvbyBpcyByZXBsYWNlZCB3aXRoIGFuIG9iamVjdFxuICogICAgICAgICAgICAgY29udGFpbmluZyBmb29cbiAqLyBjbGFzcyBndCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmZpZWxkcyA9IHQsIFxuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IHZhbGlkYXRpb24gb2YgRmllbGRNYXNrXG4gICAgICAgIC8vIFNvcnQgdGhlIGZpZWxkIG1hc2sgdG8gc3VwcG9ydCBgRmllbGRNYXNrLmlzRXF1YWwoKWAgYW5kIGFzc2VydCBiZWxvdy5cbiAgICAgICAgdC5zb3J0KG10LmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWZXJpZmllcyB0aGF0IGBmaWVsZFBhdGhgIGlzIGluY2x1ZGVkIGJ5IGF0IGxlYXN0IG9uZSBmaWVsZCBpbiB0aGlzIGZpZWxkXG4gICAgICogbWFzay5cbiAgICAgKlxuICAgICAqIFRoaXMgaXMgYW4gTyhuKSBvcGVyYXRpb24sIHdoZXJlIGBuYCBpcyB0aGUgc2l6ZSBvZiB0aGUgZmllbGQgbWFzay5cbiAgICAgKi8gICAgY292ZXJzKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuZmllbGRzKSBpZiAoZS5pc1ByZWZpeE9mKHQpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBvdCh0aGlzLmZpZWxkcywgdC5maWVsZHMsICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIENvbnZlcnRzIGEgQmFzZTY0IGVuY29kZWQgc3RyaW5nIHRvIGEgYmluYXJ5IHN0cmluZy4gKi9cbi8qKiBUcnVlIGlmIGFuZCBvbmx5IGlmIHRoZSBCYXNlNjQgY29udmVyc2lvbiBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIHl0KCkge1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBhdG9iO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBJbW11dGFibGUgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgXCJwcm90b1wiIGJ5dGUgc3RyaW5nLlxuICpcbiAqIFByb3RvIGJ5dGUgc3RyaW5ncyBjYW4gZWl0aGVyIGJlIEJhc2U2NC1lbmNvZGVkIHN0cmluZ3Mgb3IgVWludDhBcnJheXMgd2hlblxuICogc2VudCBvbiB0aGUgd2lyZS4gVGhpcyBjbGFzcyBhYnN0cmFjdHMgYXdheSB0aGlzIGRpZmZlcmVudGlhdGlvbiBieSBob2xkaW5nXG4gKiB0aGUgcHJvdG8gYnl0ZSBzdHJpbmcgaW4gYSBjb21tb24gY2xhc3MgdGhhdCBtdXN0IGJlIGNvbnZlcnRlZCBpbnRvIGEgc3RyaW5nXG4gKiBiZWZvcmUgYmVpbmcgc2VudCBhcyBhIHByb3RvLlxuICogQGludGVybmFsXG4gKi8gY2xhc3MgcHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5iaW5hcnlTdHJpbmcgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbUJhc2U2NFN0cmluZyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBhdG9iKHQpO1xuICAgICAgICByZXR1cm4gbmV3IHB0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkodCkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTsgUmVtb3ZlIHRoZSBjb3B5IG9mIHRoZSBieXRlIHN0cmluZyBoZXJlIGFzIHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGlzIGZyZXF1ZW50bHkgY2FsbGVkIGR1cmluZyBpbmRleGluZy5cbiAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAvKipcbiAqIEhlbHBlciBmdW5jdGlvbiB0byBjb252ZXJ0IGFuIFVpbnQ4YXJyYXkgdG8gYSBiaW5hcnkgc3RyaW5nLlxuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gXCJcIjtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikgZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKHRbbl0pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhIGJpbmFyeSBzdHJpbmcgdG8gYW4gVWludDhBcnJheS5cbiAqLyAodCk7XG4gICAgICAgIHJldHVybiBuZXcgcHQoZSk7XG4gICAgfVxuICAgIFtTeW1ib2wuaXRlcmF0b3JdKCkge1xuICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZXh0OiAoKSA9PiB0IDwgdGhpcy5iaW5hcnlTdHJpbmcubGVuZ3RoID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLmJpbmFyeVN0cmluZy5jaGFyQ29kZUF0KHQrKyksXG4gICAgICAgICAgICAgICAgZG9uZTogITFcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB0b0Jhc2U2NCgpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB0aGlzLmJpbmFyeVN0cmluZywgYnRvYSh0KTtcbiAgICAgICAgLyoqIENvbnZlcnRzIGEgYmluYXJ5IHN0cmluZyB0byBhIEJhc2U2NCBlbmNvZGVkIHN0cmluZy4gKi9cbiAgICAgICAgdmFyIHQ7XG4gICAgfVxuICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0Lmxlbmd0aCk7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIGVbbl0gPSB0LmNoYXJDb2RlQXQobik7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvLyBBIFJlZ0V4cCBtYXRjaGluZyBJU08gODYwMSBVVEMgdGltZXN0YW1wcyB3aXRoIG9wdGlvbmFsIGZyYWN0aW9uLlxuICAgICAgICAodGhpcy5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBhcHByb3hpbWF0ZUJ5dGVTaXplKCkge1xuICAgICAgICByZXR1cm4gMiAqIHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aDtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHJ0KHRoaXMuYmluYXJ5U3RyaW5nLCB0LmJpbmFyeVN0cmluZyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5hcnlTdHJpbmcgPT09IHQuYmluYXJ5U3RyaW5nO1xuICAgIH1cbn1cblxucHQuRU1QVFlfQllURV9TVFJJTkcgPSBuZXcgcHQoXCJcIik7XG5cbmNvbnN0IEl0ID0gbmV3IFJlZ0V4cCgvXlxcZHs0fS1cXGRcXGQtXFxkXFxkVFxcZFxcZDpcXGRcXGQ6XFxkXFxkKD86XFwuKFxcZCspKT9aJC8pO1xuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB2YWx1ZXMgZm9yIGEgdGltZXN0YW1wIHZhbHVlIGludG8gYSBcInNlY29uZHMgYW5kXG4gKiBuYW5vc1wiIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIFR0KHQpIHtcbiAgICAvLyBUaGUganNvbiBpbnRlcmZhY2UgKGZvciB0aGUgYnJvd3Nlcikgd2lsbCByZXR1cm4gYW4gaXNvIHRpbWVzdGFtcCBzdHJpbmcsXG4gICAgLy8gd2hpbGUgdGhlIHByb3RvIGpzIGxpYnJhcnkgKGZvciBub2RlKSB3aWxsIHJldHVybiBhXG4gICAgLy8gZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcCBpbnN0YW5jZS5cbiAgICBpZiAoVSghIXQpLCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIC8vIFRoZSBkYXRlIHN0cmluZyBjYW4gaGF2ZSBoaWdoZXIgcHJlY2lzaW9uIChuYW5vcykgdGhhbiB0aGUgRGF0ZSBjbGFzc1xuICAgICAgICAvLyAobWlsbGlzKSwgc28gd2UgZG8gc29tZSBjdXN0b20gcGFyc2luZyBoZXJlLlxuICAgICAgICAvLyBQYXJzZSB0aGUgbmFub3MgcmlnaHQgb3V0IG9mIHRoZSBzdHJpbmcuXG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgY29uc3QgbiA9IEl0LmV4ZWModCk7XG4gICAgICAgIGlmIChVKCEhbiksIG5bMV0pIHtcbiAgICAgICAgICAgIC8vIFBhZCB0aGUgZnJhY3Rpb24gb3V0IHRvIDkgZGlnaXRzIChuYW5vcykuXG4gICAgICAgICAgICBsZXQgdCA9IG5bMV07XG4gICAgICAgICAgICB0ID0gKHQgKyBcIjAwMDAwMDAwMFwiKS5zdWJzdHIoMCwgOSksIGUgPSBOdW1iZXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGFyc2UgdGhlIGRhdGUgdG8gZ2V0IHRoZSBzZWNvbmRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRGF0ZSh0KTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IE1hdGguZmxvb3Iocy5nZXRUaW1lKCkgLyAxZTMpLFxuICAgICAgICAgICAgbmFub3M6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogRXQodC5zZWNvbmRzKSxcbiAgICAgICAgbmFub3M6IEV0KHQubmFub3MpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIG51bWJlcnMgaW50byBhIEphdmFTY3JpcHQgbnVtYmVyLlxuICogUmV0dXJucyAwIGlmIHRoZSB2YWx1ZSBpcyBub3QgbnVtZXJpYy5cbiAqLyBmdW5jdGlvbiBFdCh0KSB7XG4gICAgLy8gVE9ETyhiam9ybmljayk6IEhhbmRsZSBpbnQ2NCBncmVhdGVyIHRoYW4gNTMgYml0cy5cbiAgICByZXR1cm4gXCJudW1iZXJcIiA9PSB0eXBlb2YgdCA/IHQgOiBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gTnVtYmVyKHQpIDogMDtcbn1cblxuLyoqIENvbnZlcnRzIHRoZSBwb3NzaWJsZSBQcm90byB0eXBlcyBmb3IgQmxvYnMgaW50byBhIEJ5dGVTdHJpbmcuICovIGZ1bmN0aW9uIEF0KHQpIHtcbiAgICByZXR1cm4gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IHB0LmZyb21CYXNlNjRTdHJpbmcodCkgOiBwdC5mcm9tVWludDhBcnJheSh0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2FsbHktYXBwbGllZCBTZXJ2ZXJUaW1lc3RhbXAuXG4gKlxuICogU2VydmVyIFRpbWVzdGFtcHMgYXJlIGJhY2tlZCBieSBNYXBWYWx1ZXMgdGhhdCBjb250YWluIGFuIGludGVybmFsIGZpZWxkXG4gKiBgX190eXBlX19gIHdpdGggYSB2YWx1ZSBvZiBgc2VydmVyX3RpbWVzdGFtcGAuIFRoZSBwcmV2aW91cyB2YWx1ZSBhbmQgbG9jYWxcbiAqIHdyaXRlIHRpbWUgYXJlIHN0b3JlZCBpbiBpdHMgYF9fcHJldmlvdXNfdmFsdWVfX2AgYW5kIGBfX2xvY2FsX3dyaXRlX3RpbWVfX2BcbiAqIGZpZWxkcyByZXNwZWN0aXZlbHkuXG4gKlxuICogTm90ZXM6XG4gKiAtIFNlcnZlclRpbWVzdGFtcFZhbHVlIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBhcyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGFcbiAqICAgdHJhbnNmb3JtLiBUaGV5IGNhbiBvbmx5IGV4aXN0IGluIHRoZSBsb2NhbCB2aWV3IG9mIGEgZG9jdW1lbnQuIFRoZXJlZm9yZVxuICogICB0aGV5IGRvIG5vdCBuZWVkIHRvIGJlIHBhcnNlZCBvciBzZXJpYWxpemVkLlxuICogLSBXaGVuIGV2YWx1YXRlZCBsb2NhbGx5IChlLmcuIGZvciBzbmFwc2hvdC5kYXRhKCkpLCB0aGV5IGJ5IGRlZmF1bHRcbiAqICAgZXZhbHVhdGUgdG8gYG51bGxgLiBUaGlzIGJlaGF2aW9yIGNhbiBiZSBjb25maWd1cmVkIGJ5IHBhc3NpbmcgY3VzdG9tXG4gKiAgIEZpZWxkVmFsdWVPcHRpb25zIHRvIHZhbHVlKCkuXG4gKiAtIFdpdGggcmVzcGVjdCB0byBvdGhlciBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMsIHRoZXkgc29ydCBieSB0aGVpclxuICogICBsb2NhbFdyaXRlVGltZS5cbiAqLyBmdW5jdGlvbiBSdCh0KSB7XG4gICAgdmFyIGUsIG47XG4gICAgcmV0dXJuIFwic2VydmVyX3RpbWVzdGFtcFwiID09PSAobnVsbCA9PT0gKG4gPSAoKG51bGwgPT09IChlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5tYXBWYWx1ZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5maWVsZHMpIHx8IHt9KS5fX3R5cGVfXykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdHJpbmdWYWx1ZSk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBTZXJ2ZXJUaW1lc3RhbXAgcHJvdG8gdmFsdWUgKHVzaW5nIHRoZSBpbnRlcm5hbCBmb3JtYXQpLlxuICovXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBmaWVsZCBiZWZvcmUgdGhpcyBTZXJ2ZXJUaW1lc3RhbXAgd2FzIHNldC5cbiAqXG4gKiBQcmVzZXJ2aW5nIHRoZSBwcmV2aW91cyB2YWx1ZXMgYWxsb3dzIHRoZSB1c2VyIHRvIGRpc3BsYXkgdGhlIGxhc3QgcmVzb2xlZFxuICogdmFsdWUgdW50aWwgdGhlIGJhY2tlbmQgcmVzcG9uZHMgd2l0aCB0aGUgdGltZXN0YW1wLlxuICovXG5mdW5jdGlvbiBidCh0KSB7XG4gICAgY29uc3QgZSA9IHQubWFwVmFsdWUuZmllbGRzLl9fcHJldmlvdXNfdmFsdWVfXztcbiAgICByZXR1cm4gUnQoZSkgPyBidChlKSA6IGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbG9jYWwgdGltZSBhdCB3aGljaCB0aGlzIHRpbWVzdGFtcCB3YXMgZmlyc3Qgc2V0LlxuICovIGZ1bmN0aW9uIFB0KHQpIHtcbiAgICBjb25zdCBlID0gVHQodC5tYXBWYWx1ZS5maWVsZHMuX19sb2NhbF93cml0ZV90aW1lX18udGltZXN0YW1wVmFsdWUpO1xuICAgIHJldHVybiBuZXcgYXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgVnQge1xuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdHMgYSBEYXRhYmFzZUluZm8gdXNpbmcgdGhlIHByb3ZpZGVkIGhvc3QsIGRhdGFiYXNlSWQgYW5kXG4gICAgICogcGVyc2lzdGVuY2VLZXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBkYXRhYmFzZSB0byB1c2UuXG4gICAgICogQHBhcmFtIGFwcElkIC0gVGhlIEZpcmViYXNlIEFwcCBJZC5cbiAgICAgKiBAcGFyYW0gcGVyc2lzdGVuY2VLZXkgLSBBIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIEZpcmVzdG9yZSdzIGxvY2FsXG4gICAgICogc3RvcmFnZSAodXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIHRoZSBkYXRhYmFzZUlkKS5cbiAgICAgKiBAcGFyYW0gaG9zdCAtIFRoZSBGaXJlc3RvcmUgYmFja2VuZCBob3N0IHRvIGNvbm5lY3QgdG8uXG4gICAgICogQHBhcmFtIHNzbCAtIFdoZXRoZXIgdG8gdXNlIFNTTCB3aGVuIGNvbm5lY3RpbmcuXG4gICAgICogQHBhcmFtIGZvcmNlTG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZm9yY2VMb25nUG9sbGluZyBvcHRpb25cbiAgICAgKiB3aGVuIHVzaW5nIFdlYkNoYW5uZWwgYXMgdGhlIG5ldHdvcmsgdHJhbnNwb3J0LlxuICAgICAqIEBwYXJhbSBhdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgLSBXaGV0aGVyIHRvIHVzZSB0aGUgZGV0ZWN0QnVmZmVyaW5nUHJveHlcbiAgICAgKiBvcHRpb24gd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gdXNlRmV0Y2hTdHJlYW1zIFdoZXRoZXIgdG8gdXNlIHRoZSBGZXRjaCBBUEkgaW5zdGVhZCBvZlxuICAgICAqIFhNTEhUVFBSZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmFwcElkID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuaG9zdCA9IHMsIHRoaXMuc3NsID0gaSwgXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHIsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gbywgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSB1O1xuICAgIH1cbn1cblxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyB2dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHQsIHRoaXMuZGF0YWJhc2UgPSBlIHx8IFwiKGRlZmF1bHQpXCI7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB2dChcIlwiLCBcIlwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgdnQgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlbnRpbmVsIHZhbHVlIHRoYXQgc29ydHMgYmVmb3JlIGFueSBNdXRhdGlvbiBCYXRjaCBJRC4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBTdCh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyAtMC4gKi8gZnVuY3Rpb24gRHQodCkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSB0ICYmIDEgLyB0ID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBDdCh0KSB7XG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgJiYgTnVtYmVyLmlzSW50ZWdlcih0KSAmJiAhRHQodCkgJiYgdCA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiB0ID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB4dCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgodCkge1xuICAgICAgICByZXR1cm4gbmV3IHh0KF90LmZyb21TdHJpbmcodCkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHh0KF90LmZyb21TdHJpbmcodCkucG9wRmlyc3QoNSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgeHQoX3QuZW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBnZXQgY29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKS5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgKGkuZS4gdGhlIG5hbWUgb2YgdGhlIHBhcmVudCBjb2xsZWN0aW9uKSBmb3IgdGhpcyBrZXkuICovICAgIGdldENvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgZnVsbHkgcXVhbGlmaWVkIHBhdGggdG8gdGhlIHBhcmVudCBjb2xsZWN0aW9uLiAqLyAgICBnZXRDb2xsZWN0aW9uUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiAwID09PSBfdC5jb21wYXJhdG9yKHRoaXMucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICByZXR1cm4gX3QuY29tcGFyYXRvcih0LnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0RvY3VtZW50S2V5KHQpIHtcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoICUgMiA9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyAtIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlZ21lbnRzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB4dChuZXcgX3QodC5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBOdCA9IHtcbiAgICBtYXBWYWx1ZToge1xuICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgIF9fdHlwZV9fOiB7XG4gICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwiX19tYXhfX1wiXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59LCBrdCA9IHtcbiAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG59O1xuXG4vKiogRXh0cmFjdHMgdGhlIGJhY2tlbmQncyB0eXBlIG9yZGVyIGZvciB0aGUgcHJvdmlkZWQgdmFsdWUuICovXG5mdW5jdGlvbiBNdCh0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IDAgLyogTnVsbFZhbHVlICovIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8gMSAvKiBCb29sZWFuVmFsdWUgKi8gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyAyIC8qIE51bWJlclZhbHVlICovIDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQgPyAzIC8qIFRpbWVzdGFtcFZhbHVlICovIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyA1IC8qIFN0cmluZ1ZhbHVlICovIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IDYgLyogQmxvYlZhbHVlICovIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyA3IC8qIFJlZlZhbHVlICovIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gdCA/IDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyA5IC8qIEFycmF5VmFsdWUgKi8gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IFJ0KHQpID8gNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6IEh0KHQpID8gOSAvKiBBcnJheVZhbHVlICovIDogMTAgLyogT2JqZWN0VmFsdWUgKi8gOiBMKCk7XG59XG5cbi8qKiBUZXN0cyBgbGVmdGAgYW5kIGByaWdodGAgZm9yIGVxdWFsaXR5IGJhc2VkIG9uIHRoZSBiYWNrZW5kIHNlbWFudGljcy4gKi8gZnVuY3Rpb24gT3QodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gITA7XG4gICAgY29uc3QgbiA9IE10KHQpO1xuICAgIGlmIChuICE9PSBNdChlKSkgcmV0dXJuICExO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogTWF4VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5ib29sZWFuVmFsdWUgPT09IGUuYm9vbGVhblZhbHVlO1xuXG4gICAgICBjYXNlIDQgLyogU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gUHQodCkuaXNFcXVhbChQdChlKSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50aW1lc3RhbXBWYWx1ZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLnRpbWVzdGFtcFZhbHVlICYmIHQudGltZXN0YW1wVmFsdWUubGVuZ3RoID09PSBlLnRpbWVzdGFtcFZhbHVlLmxlbmd0aCkgXG4gICAgICAgICAgICAvLyBVc2Ugc3RyaW5nIGVxdWFsaXR5IGZvciBJU08gODYwMSB0aW1lc3RhbXBzXG4gICAgICAgICAgICByZXR1cm4gdC50aW1lc3RhbXBWYWx1ZSA9PT0gZS50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBUdCh0LnRpbWVzdGFtcFZhbHVlKSwgcyA9IFR0KGUudGltZXN0YW1wVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uc2Vjb25kcyA9PT0gcy5zZWNvbmRzICYmIG4ubmFub3MgPT09IHMubmFub3M7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNSAvKiBTdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlID09PSBlLnN0cmluZ1ZhbHVlO1xuXG4gICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBBdCh0LmJ5dGVzVmFsdWUpLmlzRXF1YWwoQXQoZS5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LnJlZmVyZW5jZVZhbHVlID09PSBlLnJlZmVyZW5jZVZhbHVlO1xuXG4gICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gRXQodC5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSA9PT0gRXQoZS5nZW9Qb2ludFZhbHVlLmxhdGl0dWRlKSAmJiBFdCh0Lmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKSA9PT0gRXQoZS5nZW9Qb2ludFZhbHVlLmxvbmdpdHVkZSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgMiAvKiBOdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgcmV0dXJuIEV0KHQuaW50ZWdlclZhbHVlKSA9PT0gRXQoZS5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEV0KHQuZG91YmxlVmFsdWUpLCBzID0gRXQoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09IHMgPyBEdChuKSA9PT0gRHQocykgOiBpc05hTihuKSAmJiBpc05hTihzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA5IC8qIEFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gb3QodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSwgT3QpO1xuXG4gICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lm1hcFZhbHVlLmZpZWxkcyB8fCB7fSwgcyA9IGUubWFwVmFsdWUuZmllbGRzIHx8IHt9O1xuICAgICAgICAgICAgaWYgKGh0KG4pICE9PSBodChzKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IGluIG4pIGlmIChuLmhhc093blByb3BlcnR5KHQpICYmICh2b2lkIDAgPT09IHNbdF0gfHwgIU90KG5bdF0sIHNbdF0pKSkgcmV0dXJuICExO1xuICAgICAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIEFycmF5VmFsdWUgY29udGFpbnMgdGhlIHNwZWNpZmllZCBlbGVtZW50LiAqLyAodCwgZSk7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBGdCh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gKHQudmFsdWVzIHx8IFtdKS5maW5kKCh0ID0+IE90KHQsIGUpKSk7XG59XG5cbmZ1bmN0aW9uICR0KHQsIGUpIHtcbiAgICBpZiAodCA9PT0gZSkgcmV0dXJuIDA7XG4gICAgY29uc3QgbiA9IE10KHQpLCBzID0gTXQoZSk7XG4gICAgaWYgKG4gIT09IHMpIHJldHVybiBydChuLCBzKTtcbiAgICBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgMCAvKiBOdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIE1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gcnQodC5ib29sZWFuVmFsdWUsIGUuYm9vbGVhblZhbHVlKTtcblxuICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBFdCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKSwgcyA9IEV0KGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPCBzID8gLTEgOiBuID4gcyA/IDEgOiBuID09PSBzID8gMCA6IFxuICAgICAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cbiAgICAgICAgICAgIGlzTmFOKG4pID8gaXNOYU4ocykgPyAwIDogLTEgOiAxO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDMgLyogVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gQnQodC50aW1lc3RhbXBWYWx1ZSwgZS50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNCAvKiBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBCdChQdCh0KSwgUHQoZSkpO1xuXG4gICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gcnQodC5zdHJpbmdWYWx1ZSwgZS5zdHJpbmdWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNiAvKiBCbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEF0KHQpLCBzID0gQXQoZSk7XG4gICAgICAgICAgICByZXR1cm4gbi5jb21wYXJlVG8ocyk7XG4gICAgICAgIH0odC5ieXRlc1ZhbHVlLCBlLmJ5dGVzVmFsdWUpO1xuXG4gICAgICBjYXNlIDcgLyogUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuc3BsaXQoXCIvXCIpLCBzID0gZS5zcGxpdChcIi9cIik7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgdCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHJ0KG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBydChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQucmVmZXJlbmNlVmFsdWUsIGUucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICBjYXNlIDggLyogR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gcnQoRXQodC5sYXRpdHVkZSksIEV0KGUubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBydChFdCh0LmxvbmdpdHVkZSksIEV0KGUubG9uZ2l0dWRlKSk7XG4gICAgICAgIH0odC5nZW9Qb2ludFZhbHVlLCBlLmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC52YWx1ZXMgfHwgW10sIHMgPSBlLnZhbHVlcyB8fCBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyArK3QpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gJHQoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpO1xuXG4gICAgICBjYXNlIDEwIC8qIE9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpZWxkcyB8fCB7fSwgcyA9IE9iamVjdC5rZXlzKG4pLCBpID0gZS5maWVsZHMgfHwge30sIHIgPSBPYmplY3Qua2V5cyhpKTtcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIE1hcFZhbHVlcyBhcmUgbGlrZWx5IHNvcnRlZCBjb3JyZWN0bHkgYmFzZWQgb24gdGhlaXIgaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBvcmRlciAoZS5nLiB3aGVuIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQpLCBsb2NhbCBtb2RpZmljYXRpb25zIGNhbiBicmluZ1xuICAgICAgICAgICAgLy8gZWxlbWVudHMgb3V0IG9mIG9yZGVyLiBXZSBuZWVkIHRvIHJlLXNvcnQgdGhlIGVsZW1lbnRzIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgICAgICAvLyBjYW5vbmljYWwgSURzIGFyZSBpbmRlcGVuZGVudCBvZiBpbnNlcnRpb24gb3JkZXIuXG4gICAgICAgICAgICBzLnNvcnQoKSwgci5zb3J0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoICYmIHQgPCByLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHJ0KHNbdF0sIHJbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0gJHQobltzW3RdXSwgaVtyW3RdXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJ0KHMubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlIHByb3ZpZGVkIGZpZWxkIHZhbHVlIChhcyB1c2VkIGluIFRhcmdldFxuICogc2VyaWFsaXphdGlvbikuXG4gKi8gKHQubWFwVmFsdWUsIGUubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBCdCh0LCBlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGgpIHJldHVybiBydCh0LCBlKTtcbiAgICBjb25zdCBuID0gVHQodCksIHMgPSBUdChlKSwgaSA9IHJ0KG4uc2Vjb25kcywgcy5zZWNvbmRzKTtcbiAgICByZXR1cm4gMCAhPT0gaSA/IGkgOiBydChuLm5hbm9zLCBzLm5hbm9zKTtcbn1cblxuZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiBVdCh0KTtcbn1cblxuZnVuY3Rpb24gVXQodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFR0KHQpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHtlLnNlY29uZHN9LCR7ZS5uYW5vc30pYDtcbiAgICB9KHQudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB0LnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IEF0KHQuYnl0ZXNWYWx1ZSkudG9CYXNlNjQoKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gKG4gPSB0LnJlZmVyZW5jZVZhbHVlLCBcbiAgICB4dC5mcm9tTmFtZShuKS50b1N0cmluZygpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyBgZ2VvKCR7KGUgPSB0Lmdlb1BvaW50VmFsdWUpLmxhdGl0dWRlfSwke2UubG9uZ2l0dWRlfSlgIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdC52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiBlICs9IFwiLFwiLCBlICs9IFV0KHMpO1xuICAgICAgICByZXR1cm4gZSArIFwiXVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHJlZmVyZW5jZSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIGRhdGFiYXNlIGFuZCBrZXkuICovICh0LmFycmF5VmFsdWUpIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0ZXJhdGlvbiBvcmRlciBpbiBKYXZhU2NyaXB0IGlzIG5vdCBndWFyYW50ZWVkLiBUbyBlbnN1cmUgdGhhdCB3ZSBnZW5lcmF0ZVxuICAgICAgICAvLyBtYXRjaGluZyBjYW5vbmljYWwgSURzIGZvciBpZGVudGljYWwgbWFwcywgd2UgbmVlZCB0byBzb3J0IHRoZSBrZXlzLlxuICAgICAgICBjb25zdCBlID0gT2JqZWN0LmtleXModC5maWVsZHMgfHwge30pLnNvcnQoKTtcbiAgICAgICAgbGV0IG4gPSBcIntcIiwgcyA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZSkgcyA/IHMgPSAhMSA6IG4gKz0gXCIsXCIsIG4gKz0gYCR7aX06JHtVdCh0LmZpZWxkc1tpXSl9YDtcbiAgICAgICAgcmV0dXJuIG4gKyBcIn1cIjtcbiAgICB9KHQubWFwVmFsdWUpIDogTCgpO1xuICAgIHZhciBlLCBuO1xufVxuXG5mdW5jdGlvbiBxdCh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGBwcm9qZWN0cy8ke3QucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0LmRhdGFiYXNlfS9kb2N1bWVudHMvJHtlLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YFxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBJbnRlZ2VyVmFsdWUgLiAqLyBmdW5jdGlvbiBHdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBLdCh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImFycmF5VmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBOdWxsVmFsdWUuICovIGZ1bmN0aW9uIFF0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibnVsbFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24ganQodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgaXNOYU4oTnVtYmVyKHQuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIFd0KHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibWFwVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYC4gKi8gZnVuY3Rpb24genQodCkge1xuICAgIGlmICh0Lmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQuZ2VvUG9pbnRWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0LnRpbWVzdGFtcFZhbHVlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUpIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0LnRpbWVzdGFtcFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQubWFwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gbHQodC5tYXBWYWx1ZS5maWVsZHMsICgodCwgbikgPT4gZS5tYXBWYWx1ZS5maWVsZHNbdF0gPSB6dChuKSkpLCBlO1xuICAgIH1cbiAgICBpZiAodC5hcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8ICh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5sZW5ndGg7ICsrbikgZS5hcnJheVZhbHVlLnZhbHVlc1tuXSA9IHp0KHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHQpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBWYWx1ZSByZXByZXNlbnRzIHRoZSBjYW5vbmljYWwge0BsaW5rICNNQVhfVkFMVUV9IC4gKi8gZnVuY3Rpb24gSHQodCkge1xuICAgIHJldHVybiBcIl9fbWF4X19cIiA9PT0gKCgodC5tYXBWYWx1ZSB8fCB7fSkuZmllbGRzIHx8IHt9KS5fX3R5cGVfXyB8fCB7fSkuc3RyaW5nVmFsdWU7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBsb3dlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChpbmNsdXNpdmUpLiAqLyBmdW5jdGlvbiBKdCh0LCBlKSB7XG4gICAgcmV0dXJuIHZvaWQgMCA9PT0gdCA/IGUgOiB2b2lkIDAgPT09IGUgfHwgJHQodCwgZSkgPiAwID8gdCA6IGU7XG59XG5cbmZ1bmN0aW9uIFl0KHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gZSA6IHZvaWQgMCA9PT0gZSB8fCAkdCh0LCBlKSA8IDAgPyB0IDogZTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gT2JqZWN0VmFsdWUgcmVwcmVzZW50cyBhIE1hcFZhbHVlIGluIHRoZSBGaXJlc3RvcmUgUHJvdG8gYW5kIG9mZmVycyB0aGVcbiAqIGFiaWxpdHkgdG8gYWRkIGFuZCByZW1vdmUgZmllbGRzICh2aWEgdGhlIE9iamVjdFZhbHVlQnVpbGRlcikuXG4gKi8gY2xhc3MgWHQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYdCh7XG4gICAgICAgICAgICBtYXBWYWx1ZToge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHZhbHVlIGF0IHRoZSBnaXZlbiBwYXRoIG9yIG51bGwuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIHRoZSBwYXRoIHRvIHNlYXJjaFxuICAgICAqIEByZXR1cm5zIFRoZSB2YWx1ZSBhdCB0aGUgcGF0aCBvciBudWxsIGlmIHRoZSBwYXRoIGlzIG5vdCBzZXQuXG4gICAgICovICAgIGZpZWxkKHQpIHtcbiAgICAgICAgaWYgKHQuaXNFbXB0eSgpKSByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICAgICAge1xuICAgICAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aCAtIDE7ICsrbikgaWYgKGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QuZ2V0KG4pXSwgXG4gICAgICAgICAgICAhV3QoZSkpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgcmV0dXJuIGUgPSAoZS5tYXBWYWx1ZS5maWVsZHMgfHwge30pW3QubGFzdFNlZ21lbnQoKV0sIGUgfHwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBmaWVsZCB0byB0aGUgcHJvdmlkZWQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHNldC5cbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gc2V0LlxuICAgICAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLmdldEZpZWxkc01hcCh0LnBvcExhc3QoKSlbdC5sYXN0U2VnbWVudCgpXSA9IHp0KGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBwcm92aWRlZCBmaWVsZHMgdG8gdGhlIHByb3ZpZGVkIHZhbHVlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkYXRhIC0gQSBtYXAgb2YgZmllbGRzIHRvIHZhbHVlcyAob3IgbnVsbCBmb3IgZGVsZXRlcykuXG4gICAgICovICAgIHNldEFsbCh0KSB7XG4gICAgICAgIGxldCBlID0gbXQuZW1wdHlQYXRoKCksIG4gPSB7fSwgcyA9IFtdO1xuICAgICAgICB0LmZvckVhY2goKCh0LCBpKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUuaXNJbW1lZGlhdGVQYXJlbnRPZihpKSkge1xuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBhdCB0aGlzIHBhcmVudCBsb2NhdGlvblxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q2hhbmdlcyh0LCBuLCBzKSwgbiA9IHt9LCBzID0gW10sIGUgPSBpLnBvcExhc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPyBuW2kubGFzdFNlZ21lbnQoKV0gPSB6dCh0KSA6IHMucHVzaChpLmxhc3RTZWdtZW50KCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmdldEZpZWxkc01hcChlKTtcbiAgICAgICAgdGhpcy5hcHBseUNoYW5nZXMoaSwgbiwgcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGZpZWxkIGF0IHRoZSBzcGVjaWZpZWQgcGF0aC4gSWYgdGhlcmUgaXMgbm8gZmllbGQgYXQgdGhlXG4gICAgICogc3BlY2lmaWVkIHBhdGgsIG5vdGhpbmcgaXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBwYXRoIC0gVGhlIGZpZWxkIHBhdGggdG8gcmVtb3ZlLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5maWVsZCh0LnBvcExhc3QoKSk7XG4gICAgICAgIFd0KGUpICYmIGUubWFwVmFsdWUuZmllbGRzICYmIGRlbGV0ZSBlLm1hcFZhbHVlLmZpZWxkc1t0Lmxhc3RTZWdtZW50KCldO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIE90KHRoaXMudmFsdWUsIHQudmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBtYXAgdGhhdCBjb250YWlucyB0aGUgbGVhZiBlbGVtZW50IG9mIGBwYXRoYC4gSWYgdGhlIHBhcmVudFxuICAgICAqIGVudHJ5IGRvZXMgbm90IHlldCBleGlzdCwgb3IgaWYgaXQgaXMgbm90IGEgbWFwLCBhIG5ldyBtYXAgd2lsbCBiZSBjcmVhdGVkLlxuICAgICAqLyAgICBnZXRGaWVsZHNNYXAodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGUubWFwVmFsdWUuZmllbGRzIHx8IChlLm1hcFZhbHVlID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICB9KTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IGUubWFwVmFsdWUuZmllbGRzW3QuZ2V0KG4pXTtcbiAgICAgICAgICAgIFd0KHMpICYmIHMubWFwVmFsdWUuZmllbGRzIHx8IChzID0ge1xuICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV0gPSBzKSwgZSA9IHM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGUubWFwVmFsdWUuZmllbGRzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyBgZmllbGRzTWFwYCBieSBhZGRpbmcsIHJlcGxhY2luZyBvciBkZWxldGluZyB0aGUgc3BlY2lmaWVkXG4gICAgICogZW50cmllcy5cbiAgICAgKi8gICAgYXBwbHlDaGFuZ2VzKHQsIGUsIG4pIHtcbiAgICAgICAgbHQoZSwgKChlLCBuKSA9PiB0W2VdID0gbikpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgbikgZGVsZXRlIHRbZV07XG4gICAgfVxuICAgIGNsb25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IFh0KHp0KHRoaXMudmFsdWUpKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEZpZWxkTWFzayBidWlsdCBmcm9tIGFsbCBmaWVsZHMgaW4gYSBNYXBWYWx1ZS5cbiAqLyBmdW5jdGlvbiBadCh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIHJldHVybiBsdCh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgbXQoWyB0IF0pO1xuICAgICAgICBpZiAoV3QobikpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBadChuLm1hcFZhbHVlKS5maWVsZHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gUHJlc2VydmUgdGhlIGVtcHR5IG1hcCBieSBhZGRpbmcgaXQgdG8gdGhlIEZpZWxkTWFzay5cbiAgICAgICAgICAgIGUucHVzaChzKTsgZWxzZSBcbiAgICAgICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZVxuICAgICAgICAgICAgLy8gbGVhZiBub2Rlcy5cbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBlLnB1c2gocy5jaGlsZChuKSk7XG4gICAgICAgIH0gZWxzZSBcbiAgICAgICAgLy8gRm9yIG5lc3RlZCBhbmQgbm9uLWVtcHR5IE9iamVjdFZhbHVlcywgYWRkIHRoZSBGaWVsZFBhdGggb2YgdGhlIGxlYWZcbiAgICAgICAgLy8gbm9kZXMuXG4gICAgICAgIGUucHVzaChzKTtcbiAgICB9KSksIG5ldyBndChlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGRvY3VtZW50IGluIEZpcmVzdG9yZSB3aXRoIGEga2V5LCB2ZXJzaW9uLCBkYXRhIGFuZCB3aGV0aGVyIGl0XG4gKiBoYXMgbG9jYWwgbXV0YXRpb25zIGFwcGxpZWQgdG8gaXQuXG4gKlxuICogRG9jdW1lbnRzIGNhbiB0cmFuc2l0aW9uIGJldHdlZW4gc3RhdGVzIHZpYSBgY29udmVydFRvRm91bmREb2N1bWVudCgpYCxcbiAqIGBjb252ZXJ0VG9Ob0RvY3VtZW50KClgIGFuZCBgY29udmVydFRvVW5rbm93bkRvY3VtZW50KClgLiBJZiBhIGRvY3VtZW50IGRvZXNcbiAqIG5vdCB0cmFuc2l0aW9uIHRvIG9uZSBvZiB0aGVzZSBzdGF0ZXMgZXZlbiBhZnRlciBhbGwgbXV0YXRpb25zIGhhdmUgYmVlblxuICogYXBwbGllZCwgYGlzVmFsaWREb2N1bWVudCgpYCByZXR1cm5zIGZhbHNlIGFuZCB0aGUgZG9jdW1lbnQgc2hvdWxkIGJlIHJlbW92ZWRcbiAqIGZyb20gYWxsIHZpZXdzLlxuICovIGNsYXNzIHRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSBlLCB0aGlzLnZlcnNpb24gPSBuLCB0aGlzLnJlYWRUaW1lID0gcywgdGhpcy5kYXRhID0gaSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IHI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBkb2N1bWVudCB3aXRoIG5vIGtub3duIHZlcnNpb24gb3IgZGF0YSwgYnV0IHdoaWNoIGNhbiBzZXJ2ZSBhc1xuICAgICAqIGJhc2UgZG9jdW1lbnQgZm9yIG11dGF0aW9ucy5cbiAgICAgKi8gICAgc3RhdGljIG5ld0ludmFsaWREb2N1bWVudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdGUodCwgMCAvKiBJTlZBTElEICovICwgY3QubWluKCksIGN0Lm1pbigpLCBYdC5lbXB0eSgpLCAwIC8qIFNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0ZSh0LCAxIC8qIEZPVU5EX0RPQ1VNRU5UICovICwgZSwgY3QubWluKCksIG4sIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBub3QgZXhpc3QgYXQgdGhlIGdpdmVuIHZlcnNpb24uICovICAgIHN0YXRpYyBuZXdOb0RvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0ZSh0LCAyIC8qIE5PX0RPQ1VNRU5UICovICwgZSwgY3QubWluKCksIFh0LmVtcHR5KCksIDAgLyogU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHdob3NlIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgc3RhdGljIG5ld1Vua25vd25Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGUodCwgMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovICwgZSwgY3QubWluKCksIFh0LmVtcHR5KCksIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZXhpc3RzIGFuZCB0aGF0IGl0cyB2ZXJzaW9uXG4gICAgICogYW5kIGRhdGEgYXJlIGtub3duLlxuICAgICAqLyAgICBjb252ZXJ0VG9Gb3VuZERvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMSAvKiBGT1VORF9ET0NVTUVOVCAqLyAsIHRoaXMuZGF0YSA9IGUsIFxuICAgICAgICB0aGlzLmRvY3VtZW50U3RhdGUgPSAwIC8qIFNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBkb2Vzbid0IGV4aXN0IGF0IHRoZSBnaXZlblxuICAgICAqIHZlcnNpb24uXG4gICAgICovICAgIGNvbnZlcnRUb05vRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAyIC8qIE5PX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gWHQuZW1wdHkoKSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogU1lOQ0VEICovICwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hhbmdlcyB0aGUgZG9jdW1lbnQgdHlwZSB0byBpbmRpY2F0ZSB0aGF0IGl0IGV4aXN0cyBhdCBhIGdpdmVuIHZlcnNpb24gYnV0XG4gICAgICogdGhhdCBpdHMgZGF0YSBpcyBub3Qga25vd24gKGUuZy4gYSBkb2N1bWVudCB0aGF0IHdhcyB1cGRhdGVkIHdpdGhvdXQgYSBrbm93blxuICAgICAqIGJhc2UgZG9jdW1lbnQpLlxuICAgICAqLyAgICBjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uID0gdCwgdGhpcy5kb2N1bWVudFR5cGUgPSAzIC8qIFVOS05PV05fRE9DVU1FTlQgKi8gLCB0aGlzLmRhdGEgPSBYdC5lbXB0eSgpLCBcbiAgICAgICAgdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBIQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCB0aGlzO1xuICAgIH1cbiAgICBzZXRIYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDEgLyogSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXM7XG4gICAgfVxuICAgIHNldFJlYWRUaW1lKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZFRpbWUgPSB0LCB0aGlzO1xuICAgIH1cbiAgICBnZXQgaGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEhBU19MT0NBTF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc0NvbW1pdHRlZE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDIgLyogSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgIH1cbiAgICBpc1ZhbGlkRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAwIC8qIElOVkFMSUQgKi8gIT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc0ZvdW5kRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAxIC8qIEZPVU5EX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNOb0RvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMiAvKiBOT19ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzVW5rbm93bkRvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMyAvKiBVTktOT1dOX0RPQ1VNRU5UICovID09PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgdGUgJiYgdGhpcy5rZXkuaXNFcXVhbCh0LmtleSkgJiYgdGhpcy52ZXJzaW9uLmlzRXF1YWwodC52ZXJzaW9uKSAmJiB0aGlzLmRvY3VtZW50VHlwZSA9PT0gdC5kb2N1bWVudFR5cGUgJiYgdGhpcy5kb2N1bWVudFN0YXRlID09PSB0LmRvY3VtZW50U3RhdGUgJiYgdGhpcy5kYXRhLmlzRXF1YWwodC5kYXRhKTtcbiAgICB9XG4gICAgbXV0YWJsZUNvcHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdGUodGhpcy5rZXksIHRoaXMuZG9jdW1lbnRUeXBlLCB0aGlzLnZlcnNpb24sIHRoaXMucmVhZFRpbWUsIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7ZG9jdW1lbnRUeXBlOiAke3RoaXMuZG9jdW1lbnRUeXBlfX0pLCB7ZG9jdW1lbnRTdGF0ZTogJHt0aGlzLmRvY3VtZW50U3RhdGV9fSlgO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0aGUgdmFsdWUgZm9yIGZpZWxkIGBmaWVsZGAgaW4gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gVGhyb3dzIGlmXG4gKiB0aGUgZmllbGQgZG9lcyBub3QgZXhpc3QgaW4gYm90aCBkb2N1bWVudHMuXG4gKi9cbi8qKlxuICogQW4gaW5kZXggZGVmaW5pdGlvbiBmb3IgZmllbGQgaW5kZXhlcyBpbiBGaXJlc3RvcmUuXG4gKlxuICogRXZlcnkgaW5kZXggaXMgYXNzb2NpYXRlZCB3aXRoIGEgY29sbGVjdGlvbi4gVGhlIGRlZmluaXRpb24gY29udGFpbnMgYSBsaXN0XG4gKiBvZiBmaWVsZHMgYW5kIHRoZWlyIGluZGV4IGtpbmQgKHdoaWNoIGNhbiBiZSBgQVNDRU5ESU5HYCwgYERFU0NFTkRJTkdgIG9yXG4gKiBgQ09OVEFJTlNgIGZvciBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgcXVlcmllcykuXG4gKlxuICogVW5saWtlIHRoZSBiYWNrZW5kLCB0aGUgU0RLIGRvZXMgbm90IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb2xsZWN0aW9uIG9yXG4gKiBjb2xsZWN0aW9uIGdyb3VwLXNjb3BlZCBpbmRpY2VzLiBFdmVyeSBpbmRleCBjYW4gYmUgdXNlZCBmb3IgYm90aCBzaW5nbGVcbiAqIGNvbGxlY3Rpb24gYW5kIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcy5cbiAqL1xuY2xhc3MgZWUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBJRC4gUmV0dXJucyAtMSBpZiB0aGUgaW5kZXggSUQgaXMgbm90IGF2YWlsYWJsZSAoZS5nLiB0aGUgaW5kZXhcbiAgICAgKiBoYXMgbm90IHlldCBiZWVuIHBlcnNpc3RlZCkuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uIElEIHRoaXMgaW5kZXggYXBwbGllcyB0by4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGZpZWxkIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqL1xuICAgIG4sIFxuICAgIC8qKiBTaG93cyBob3cgdXAtdG8tZGF0ZSB0aGUgaW5kZXggaXMgZm9yIHRoZSBjdXJyZW50IHVzZXIuICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmluZGV4SWQgPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZmllbGRzID0gbiwgdGhpcy5pbmRleFN0YXRlID0gcztcbiAgICB9XG59XG5cbi8qKiBBbiBJRCBmb3IgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGFkZGVkIHRvIHBlcnNpc3RlbmNlLiAgKi9cbi8qKiBSZXR1cm5zIHRoZSBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgc2VnbWVudCBmb3IgdGhpcyBpbmRleC4gKi9cbmZ1bmN0aW9uIG5lKHQpIHtcbiAgICByZXR1cm4gdC5maWVsZHMuZmluZCgodCA9PiAyIC8qIENPTlRBSU5TICovID09PSB0LmtpbmQpKTtcbn1cblxuLyoqIFJldHVybnMgYWxsIGRpcmVjdGlvbmFsIChhc2NlbmRpbmcvZGVzY2VuZGluZykgc2VnbWVudHMgZm9yIHRoaXMgaW5kZXguICovIGZ1bmN0aW9uIHNlKHQpIHtcbiAgICByZXR1cm4gdC5maWVsZHMuZmlsdGVyKCh0ID0+IDIgLyogQ09OVEFJTlMgKi8gIT09IHQua2luZCkpO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaWVsZCBpbmRleCAqLyBlZS5VTktOT1dOX0lEID0gLTE7XG5cbi8qKiBBbiBpbmRleCBjb21wb25lbnQgY29uc2lzdGluZyBvZiBmaWVsZCBwYXRoIGFuZCBpbmRleCB0eXBlLiAgKi9cbmNsYXNzIGllIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGZpZWxkIHBhdGggb2YgdGhlIGNvbXBvbmVudC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGZpZWxkcyBzb3J0aW5nIG9yZGVyLiAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5maWVsZFBhdGggPSB0LCB0aGlzLmtpbmQgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBTdG9yZXMgdGhlIFwiaGlnaCB3YXRlciBtYXJrXCIgdGhhdCBpbmRpY2F0ZXMgaG93IHVwZGF0ZWQgdGhlIEluZGV4IGlzIGZvciB0aGVcbiAqIGN1cnJlbnQgdXNlci5cbiAqLyBjbGFzcyByZSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogSW5kaWNhdGVzIHdoZW4gdGhlIGluZGV4IHdhcyBsYXN0IHVwZGF0ZWQgKHJlbGF0aXZlIHRvIG90aGVyIGluZGV4ZXMpLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgdGhlIGxhdGVzdCBpbmRleGVkIHJlYWQgdGltZSwgZG9jdW1lbnQgYW5kIGJhdGNoIGlkLiAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5zZXF1ZW5jZU51bWJlciA9IHQsIHRoaXMub2Zmc2V0ID0gZTtcbiAgICB9XG4gICAgLyoqIFRoZSBzdGF0ZSBvZiBhbiBpbmRleCB0aGF0IGhhcyBub3QgeWV0IGJlZW4gYmFja2ZpbGxlZC4gKi8gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IHJlKDAsIGFlLm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZSBoaWdoZXIgdGhhblxuICogYHJlYWRUaW1lYC5cbiAqLyBmdW5jdGlvbiBvZSh0LCBlKSB7XG4gICAgLy8gV2Ugd2FudCB0byBjcmVhdGUgYW4gb2Zmc2V0IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzIHdpdGggYSByZWFkIHRpbWVcbiAgICAvLyBncmVhdGVyIHRoYW4gdGhlIHByb3ZpZGVkIHJlYWQgdGltZS4gVG8gZG8gc28sIHdlIHRlY2huaWNhbGx5IG5lZWQgdG9cbiAgICAvLyBjcmVhdGUgYW4gb2Zmc2V0IGZvciBgKHJlYWRUaW1lLCBNQVhfRE9DVU1FTlRfS0VZKWAuIFdoaWxlIHdlIGNvdWxkIHVzZVxuICAgIC8vIFVuaWNvZGUgY29kZXBvaW50cyB0byBnZW5lcmF0ZSBNQVhfRE9DVU1FTlRfS0VZLCBpdCBpcyBtdWNoIGVhc2llciB0byB1c2VcbiAgICAvLyBgKHJlYWRUaW1lICsgMSwgRG9jdW1lbnRLZXkuZW1wdHkoKSlgIHNpbmNlIGA+IERvY3VtZW50S2V5LmVtcHR5KClgIG1hdGNoZXNcbiAgICAvLyBhbGwgdmFsaWQgZG9jdW1lbnQgSURzLlxuICAgIGNvbnN0IG4gPSB0LnRvVGltZXN0YW1wKCkuc2Vjb25kcywgcyA9IHQudG9UaW1lc3RhbXAoKS5uYW5vc2Vjb25kcyArIDEsIGkgPSBjdC5mcm9tVGltZXN0YW1wKDFlOSA9PT0gcyA/IG5ldyBhdChuICsgMSwgMCkgOiBuZXcgYXQobiwgcykpO1xuICAgIHJldHVybiBuZXcgYWUoaSwgeHQuZW1wdHkoKSwgZSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IG9mZnNldCBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuICovIGZ1bmN0aW9uIHVlKHQpIHtcbiAgICByZXR1cm4gbmV3IGFlKHQucmVhZFRpbWUsIHQua2V5LCAtMSk7XG59XG5cbi8qKlxuICogU3RvcmVzIHRoZSBsYXRlc3QgcmVhZCB0aW1lLCBkb2N1bWVudCBhbmQgYmF0Y2ggSUQgdGhhdCB3ZXJlIHByb2Nlc3NlZCBmb3IgYW5cbiAqIGluZGV4LlxuICovIGNsYXNzIGFlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbGF0ZXN0IHJlYWQgdGltZSB2ZXJzaW9uIHRoYXQgaGFzIGJlZW4gaW5kZXhlZCBieSBGaXJlc3RvcmUgZm9yIHRoaXNcbiAgICAgKiBmaWVsZCBpbmRleC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUga2V5IG9mIHRoZSBsYXN0IGRvY3VtZW50IHRoYXQgd2FzIGluZGV4ZWQgZm9yIHRoaXMgcXVlcnkuIFVzZVxuICAgICAqIGBEb2N1bWVudEtleS5lbXB0eSgpYCBpZiBubyBkb2N1bWVudCBoYXMgYmVlbiBpbmRleGVkLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qXG4gICAgICogVGhlIGxhcmdlc3QgbXV0YXRpb24gYmF0Y2ggaWQgdGhhdCdzIGJlZW4gcHJvY2Vzc2VkIGJ5IEZpcmVzdG9yZS5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMucmVhZFRpbWUgPSB0LCB0aGlzLmRvY3VtZW50S2V5ID0gZSwgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IG47XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFuIG9mZnNldCB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgcmVndWxhciBvZmZzZXRzLiAqLyAgICBzdGF0aWMgbWluKCkge1xuICAgICAgICByZXR1cm4gbmV3IGFlKGN0Lm1pbigpLCB4dC5lbXB0eSgpLCAtMSk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGFuIG9mZnNldCB0aGF0IHNvcnRzIGFmdGVyIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtYXgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgYWUoY3QubWF4KCksIHh0LmVtcHR5KCksIC0xKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNlKHQsIGUpIHtcbiAgICBsZXQgbiA9IHQucmVhZFRpbWUuY29tcGFyZVRvKGUucmVhZFRpbWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0geHQuY29tcGFyYXRvcih0LmRvY3VtZW50S2V5LCBlLmRvY3VtZW50S2V5KSwgMCAhPT0gbiA/IG4gOiBydCh0Lmxhcmdlc3RCYXRjaElkLCBlLmxhcmdlc3RCYXRjaElkKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBoZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgICAgIHRoaXMucGF0aCA9IHQsIHRoaXMuY29sbGVjdGlvbkdyb3VwID0gZSwgdGhpcy5vcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgdGhpcy5saW1pdCA9IGksIFxuICAgICAgICB0aGlzLnN0YXJ0QXQgPSByLCB0aGlzLmVuZEF0ID0gbywgdGhpcy5QID0gbnVsbDtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBUYXJnZXQgd2l0aCBhIHBhdGggYW5kIG9wdGlvbmFsIGFkZGl0aW9uYWwgcXVlcnkgY29uc3RyYWludHMuXG4gKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICpcbiAqIE5PVEU6IHlvdSBzaG91bGQgYWx3YXlzIGNvbnN0cnVjdCBgVGFyZ2V0YCBmcm9tIGBRdWVyeS50b1RhcmdldGAgaW5zdGVhZCBvZlxuICogdXNpbmcgdGhpcyBmYWN0b3J5IG1ldGhvZCwgYmVjYXVzZSBgUXVlcnlgIHByb3ZpZGVzIGFuIGltcGxpY2l0IGBvcmRlckJ5YFxuICogcHJvcGVydHkuXG4gKi8gZnVuY3Rpb24gbGUodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IG51bGwsIG8gPSBudWxsKSB7XG4gICAgcmV0dXJuIG5ldyBoZSh0LCBlLCBuLCBzLCBpLCByLCBvKTtcbn1cblxuZnVuY3Rpb24gZmUodCkge1xuICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgIGlmIChudWxsID09PSBlLlApIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwifGNnOlwiICsgZS5jb2xsZWN0aW9uR3JvdXApLCB0ICs9IFwifGY6XCIsIHQgKz0gZS5maWx0ZXJzLm1hcCgodCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gKGUgPSB0KS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIGUub3AudG9TdHJpbmcoKSArIEx0KGUudmFsdWUpO1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgIH0pKS5qb2luKFwiLFwiKSwgdCArPSBcInxvYjpcIiwgdCArPSBlLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0LmRpcjtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsXCIpLCBTdChlLmxpbWl0KSB8fCAodCArPSBcInxsOlwiLCB0ICs9IGUubGltaXQpLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCJ8bGI6XCIsIFxuICAgICAgICB0ICs9IGUuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIHQgKz0gZS5zdGFydEF0LnBvc2l0aW9uLm1hcCgodCA9PiBMdCh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGUuZW5kQXQgJiYgKHQgKz0gXCJ8dWI6XCIsIHQgKz0gZS5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIHQgKz0gZS5lbmRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gTHQodCkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBlLlAgPSB0O1xuICAgIH1cbiAgICByZXR1cm4gZS5QO1xufVxuXG5mdW5jdGlvbiBkZSh0KSB7XG4gICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwICYmIChlICs9IFwiIGNvbGxlY3Rpb25Hcm91cD1cIiArIHQuY29sbGVjdGlvbkdyb3VwKSwgXG4gICAgdC5maWx0ZXJzLmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgZmlsdGVyczogWyR7dC5maWx0ZXJzLm1hcCgodCA9PiB7XG4gICAgICAgIHJldHVybiBgJHsoZSA9IHQpLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpfSAke2Uub3B9ICR7THQoZS52YWx1ZSl9YDtcbiAgICAgICAgLyoqIFJldHVybnMgYSBkZWJ1ZyBkZXNjcmlwdGlvbiBmb3IgYGZpbHRlcmAuICovXG4gICAgICAgIHZhciBlO1xuICAgICAgICAvKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIChpLmUuICdfX25hbWVfXycpLiAqLyAgICB9KSkuam9pbihcIiwgXCIpfV1gKSwgXG4gICAgU3QodC5saW1pdCkgfHwgKGUgKz0gXCIsIGxpbWl0OiBcIiArIHQubGltaXQpLCB0Lm9yZGVyQnkubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBvcmRlckJ5OiBbJHt0Lm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke3QuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICgke3QuZGlyfSlgO1xuICAgIH0odCkpKS5qb2luKFwiLCBcIil9XWApLCB0LnN0YXJ0QXQgJiYgKGUgKz0gXCIsIHN0YXJ0QXQ6IFwiLCBlICs9IHQuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIFxuICAgIGUgKz0gdC5zdGFydEF0LnBvc2l0aW9uLm1hcCgodCA9PiBMdCh0KSkpLmpvaW4oXCIsXCIpKSwgdC5lbmRBdCAmJiAoZSArPSBcIiwgZW5kQXQ6IFwiLCBcbiAgICBlICs9IHQuZW5kQXQuaW5jbHVzaXZlID8gXCJhOlwiIDogXCJiOlwiLCBlICs9IHQuZW5kQXQucG9zaXRpb24ubWFwKCh0ID0+IEx0KHQpKSkuam9pbihcIixcIikpLCBcbiAgICBgVGFyZ2V0KCR7ZX0pYDtcbn1cblxuZnVuY3Rpb24gX2UodCwgZSkge1xuICAgIGlmICh0LmxpbWl0ICE9PSBlLmxpbWl0KSByZXR1cm4gITE7XG4gICAgaWYgKHQub3JkZXJCeS5sZW5ndGggIT09IGUub3JkZXJCeS5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQub3JkZXJCeS5sZW5ndGg7IG4rKykgaWYgKCF2ZSh0Lm9yZGVyQnlbbl0sIGUub3JkZXJCeVtuXSkpIHJldHVybiAhMTtcbiAgICBpZiAodC5maWx0ZXJzLmxlbmd0aCAhPT0gZS5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuICExO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5maWx0ZXJzLmxlbmd0aDsgaSsrKSBpZiAobiA9IHQuZmlsdGVyc1tpXSwgcyA9IGUuZmlsdGVyc1tpXSwgXG4gICAgbi5vcCAhPT0gcy5vcCB8fCAhbi5maWVsZC5pc0VxdWFsKHMuZmllbGQpIHx8ICFPdChuLnZhbHVlLCBzLnZhbHVlKSkgcmV0dXJuICExO1xuICAgIHZhciBuLCBzO1xuICAgIHJldHVybiB0LmNvbGxlY3Rpb25Hcm91cCA9PT0gZS5jb2xsZWN0aW9uR3JvdXAgJiYgKCEhdC5wYXRoLmlzRXF1YWwoZS5wYXRoKSAmJiAoISFEZSh0LnN0YXJ0QXQsIGUuc3RhcnRBdCkgJiYgRGUodC5lbmRBdCwgZS5lbmRBdCkpKTtcbn1cblxuZnVuY3Rpb24gd2UodCkge1xuICAgIHJldHVybiB4dC5pc0RvY3VtZW50S2V5KHQucGF0aCkgJiYgbnVsbCA9PT0gdC5jb2xsZWN0aW9uR3JvdXAgJiYgMCA9PT0gdC5maWx0ZXJzLmxlbmd0aDtcbn1cblxuLyoqIFJldHVybnMgdGhlIGZpZWxkIGZpbHRlcnMgdGhhdCB0YXJnZXQgdGhlIGdpdmVuIGZpZWxkIHBhdGguICovIGZ1bmN0aW9uIG1lKHQsIGUpIHtcbiAgICByZXR1cm4gdC5maWx0ZXJzLmZpbHRlcigodCA9PiB0IGluc3RhbmNlb2YgZ2UgJiYgdC5maWVsZC5pc0VxdWFsKGUpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgdmFsdWVzIHRoYXQgYXJlIHVzZWQgaW4gQVJSQVlfQ09OVEFJTlMgb3IgQVJSQVlfQ09OVEFJTlNfQU5ZXG4gKiBmaWx0ZXJzLiBSZXR1cm5zIGBudWxsYCBpZiB0aGVyZSBhcmUgbm8gc3VjaCBmaWx0ZXJzLlxuICovIGNsYXNzIGdlIGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIElOICovID09PSBlIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSBlID8gdGhpcy5WKHQsIGUsIG4pIDogbmV3IHllKHQsIGUsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovID09PSBlID8gbmV3IEVlKHQsIG4pIDogXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IEFlKHQsIG4pIDogXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gPT09IGUgPyBuZXcgUmUodCwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZSA/IG5ldyBiZSh0LCBuKSA6IG5ldyBnZSh0LCBlLCBuKTtcbiAgICB9XG4gICAgc3RhdGljIFYodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIElOICovID09PSBlID8gbmV3IHBlKHQsIG4pIDogbmV3IEllKHQsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSBlICYmIHRoaXMudigkdChlLCB0aGlzLnZhbHVlKSkgOiBudWxsICE9PSBlICYmIE10KHRoaXMudmFsdWUpID09PSBNdChlKSAmJiB0aGlzLnYoJHQoZSwgdGhpcy52YWx1ZSkpO1xuICAgICAgICAvLyBPbmx5IGNvbXBhcmUgdHlwZXMgd2l0aCBtYXRjaGluZyBiYWNrZW5kIG9yZGVyIChzdWNoIGFzIGRvdWJsZSBhbmQgaW50KS5cbiAgICAgICAgfVxuICAgIHYodCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIExFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIEVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBTKCkge1xuICAgICAgICByZXR1cm4gWyBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gLCBcIjw9XCIgLyogTEVTU19USEFOX09SX0VRVUFMICovICwgXCI+XCIgLyogR1JFQVRFUl9USEFOICovICwgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyAsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdLmluZGV4T2YodGhpcy5vcCkgPj0gMDtcbiAgICB9XG59XG5cbmNsYXNzIHllIGV4dGVuZHMgZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiksIHRoaXMua2V5ID0geHQuZnJvbU5hbWUobi5yZWZlcmVuY2VWYWx1ZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0geHQuY29tcGFyYXRvcih0LmtleSwgdGhpcy5rZXkpO1xuICAgICAgICByZXR1cm4gdGhpcy52KGUpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIHBlIGV4dGVuZHMgZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIElOICovICwgZSksIHRoaXMua2V5cyA9IFRlKFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbi8qKiBGaWx0ZXIgdGhhdCBtYXRjaGVzIG9uIGtleSBmaWVsZHMgbm90IHByZXNlbnQgd2l0aGluIGFuIGFycmF5LiAqLyBjbGFzcyBJZSBleHRlbmRzIGdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSksIHRoaXMua2V5cyA9IFRlKFwibm90LWluXCIgLyogTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gIXRoaXMua2V5cy5zb21lKChlID0+IGUuaXNFcXVhbCh0LmtleSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFRlKHQsIGUpIHtcbiAgICB2YXIgbjtcbiAgICByZXR1cm4gKChudWxsID09PSAobiA9IGUuYXJyYXlWYWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi52YWx1ZXMpIHx8IFtdKS5tYXAoKHQgPT4geHQuZnJvbU5hbWUodC5yZWZlcmVuY2VWYWx1ZSkpKTtcbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMgb3BlcmF0b3IuICovIGNsYXNzIEVlIGV4dGVuZHMgZ2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gS3QoZSkgJiYgRnQoZS5hcnJheVZhbHVlLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIElOIG9wZXJhdG9yLiAqLyBjbGFzcyBBZSBleHRlbmRzIGdlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiaW5cIiAvKiBJTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IGUgJiYgRnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIG5vdC1pbiBvcGVyYXRvci4gKi8gY2xhc3MgUmUgZXh0ZW5kcyBnZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgaWYgKEZ0KHRoaXMudmFsdWUuYXJyYXlWYWx1ZSwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiAhRnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCBlKTtcbiAgICB9XG59XG5cbi8qKiBBIEZpbHRlciB0aGF0IGltcGxlbWVudHMgdGhlIGFycmF5LWNvbnRhaW5zLWFueSBvcGVyYXRvci4gKi8gY2xhc3MgYmUgZXh0ZW5kcyBnZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIGUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuICEoIUt0KGUpIHx8ICFlLmFycmF5VmFsdWUudmFsdWVzKSAmJiBlLmFycmF5VmFsdWUudmFsdWVzLnNvbWUoKHQgPT4gRnQodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB0KSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgYm91bmQgb2YgYSBxdWVyeS5cbiAqXG4gKiBUaGUgYm91bmQgaXMgc3BlY2lmaWVkIHdpdGggdGhlIGdpdmVuIGNvbXBvbmVudHMgcmVwcmVzZW50aW5nIGEgcG9zaXRpb24gYW5kXG4gKiB3aGV0aGVyIGl0J3MganVzdCBiZWZvcmUgb3IganVzdCBhZnRlciB0aGUgcG9zaXRpb24gKHJlbGF0aXZlIHRvIHdoYXRldmVyIHRoZVxuICogcXVlcnkgb3JkZXIgaXMpLlxuICpcbiAqIFRoZSBwb3NpdGlvbiByZXByZXNlbnRzIGEgbG9naWNhbCBpbmRleCBwb3NpdGlvbiBmb3IgYSBxdWVyeS4gSXQncyBhIHByZWZpeFxuICogb2YgdmFsdWVzIGZvciB0aGUgKHBvdGVudGlhbGx5IGltcGxpY2l0KSBvcmRlciBieSBjbGF1c2VzIG9mIGEgcXVlcnkuXG4gKlxuICogQm91bmQgcHJvdmlkZXMgYSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgd2hldGhlciBhIGRvY3VtZW50IGNvbWVzIGJlZm9yZSBvclxuICogYWZ0ZXIgYSBib3VuZC4gVGhpcyBpcyBpbmZsdWVuY2VkIGJ5IHdoZXRoZXIgdGhlIHBvc2l0aW9uIGlzIGp1c3QgYmVmb3JlIG9yXG4gKiBqdXN0IGFmdGVyIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gKi8gY2xhc3MgUGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHQsIHRoaXMuaW5jbHVzaXZlID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQW4gb3JkZXJpbmcgb24gYSBmaWVsZCwgaW4gc29tZSBEaXJlY3Rpb24uIERpcmVjdGlvbiBkZWZhdWx0cyB0byBBU0NFTkRJTkcuXG4gKi8gY2xhc3MgVmUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBcImFzY1wiIC8qIEFTQ0VORElORyAqLykge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy5kaXIgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdmUodCwgZSkge1xuICAgIHJldHVybiB0LmRpciA9PT0gZS5kaXIgJiYgdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpO1xufVxuXG5mdW5jdGlvbiBTZSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdC5wb3NpdGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gZVtpXSwgbyA9IHQucG9zaXRpb25baV07XG4gICAgICAgIGlmIChyLmZpZWxkLmlzS2V5RmllbGQoKSkgcyA9IHh0LmNvbXBhcmF0b3IoeHQuZnJvbU5hbWUoby5yZWZlcmVuY2VWYWx1ZSksIG4ua2V5KTsgZWxzZSB7XG4gICAgICAgICAgICBzID0gJHQobywgbi5kYXRhLmZpZWxkKHIuZmllbGQpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJkZXNjXCIgLyogREVTQ0VORElORyAqLyA9PT0gci5kaXIgJiYgKHMgKj0gLTEpLCAwICE9PSBzKSBicmVhaztcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGEgZG9jdW1lbnQgc29ydHMgYWZ0ZXIgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi8gZnVuY3Rpb24gRGUodCwgZSkge1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbCA9PT0gZTtcbiAgICBpZiAobnVsbCA9PT0gZSkgcmV0dXJuICExO1xuICAgIGlmICh0LmluY2x1c2l2ZSAhPT0gZS5pbmNsdXNpdmUgfHwgdC5wb3NpdGlvbi5sZW5ndGggIT09IGUucG9zaXRpb24ubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0LnBvc2l0aW9uLmxlbmd0aDsgbisrKSB7XG4gICAgICAgIGlmICghT3QodC5wb3NpdGlvbltuXSwgZS5wb3NpdGlvbltuXSkpIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBRdWVyeSBlbmNhcHN1bGF0ZXMgYWxsIHRoZSBxdWVyeSBhdHRyaWJ1dGVzIHdlIHN1cHBvcnQgaW4gdGhlIFNESy4gSXQgY2FuXG4gKiBiZSBydW4gYWdhaW5zdCB0aGUgTG9jYWxTdG9yZSwgYXMgd2VsbCBhcyBiZSBjb252ZXJ0ZWQgdG8gYSBgVGFyZ2V0YCB0b1xuICogcXVlcnkgdGhlIFJlbW90ZVN0b3JlIHJlc3VsdHMuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqLyBjbGFzcyBDZSB7XG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgYSBRdWVyeSB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAgICAgKiBQYXRoIG11c3QgY3VycmVudGx5IGJlIGVtcHR5IGlmIHRoaXMgaXMgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBcIkZcIiAvKiBGaXJzdCAqLyAsIG8gPSBudWxsLCB1ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHIsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSB1LCB0aGlzLkQgPSBudWxsLCBcbiAgICAgICAgLy8gVGhlIGNvcnJlc3BvbmRpbmcgYFRhcmdldGAgb2YgdGhpcyBgUXVlcnlgIGluc3RhbmNlLlxuICAgICAgICB0aGlzLkMgPSBudWxsLCB0aGlzLnN0YXJ0QXQsIHRoaXMuZW5kQXQ7XG4gICAgfVxufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBpbnN0YW5jZSB3aXRoIHRoZSBvcHRpb25zIHByb3ZpZGVkLiAqLyBmdW5jdGlvbiB4ZSh0LCBlLCBuLCBzLCBpLCByLCBvLCB1KSB7XG4gICAgcmV0dXJuIG5ldyBDZSh0LCBlLCBuLCBzLCBpLCByLCBvLCB1KTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgUXVlcnkgZm9yIGEgcXVlcnkgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgYXQgYHBhdGhgICovIGZ1bmN0aW9uIE5lKHQpIHtcbiAgICByZXR1cm4gbmV3IENlKHQpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IGEgY29sbGVjdGlvbiBncm91cCBxdWVyeSBpbnRvIGEgY29sbGVjdGlvbiBxdWVyeSBhdCBhXG4gKiBzcGVjaWZpYyBwYXRoLiBUaGlzIGlzIHVzZWQgd2hlbiBleGVjdXRpbmcgY29sbGVjdGlvbiBncm91cCBxdWVyaWVzLCBzaW5jZVxuICogd2UgaGF2ZSB0byBzcGxpdCB0aGUgcXVlcnkgaW50byBhIHNldCBvZiBjb2xsZWN0aW9uIHF1ZXJpZXMgYXQgbXVsdGlwbGVcbiAqIHBhdGhzLlxuICovIGZ1bmN0aW9uIGtlKHQpIHtcbiAgICByZXR1cm4gIVN0KHQubGltaXQpICYmIFwiRlwiIC8qIEZpcnN0ICovID09PSB0LmxpbWl0VHlwZTtcbn1cblxuZnVuY3Rpb24gTWUodCkge1xuICAgIHJldHVybiAhU3QodC5saW1pdCkgJiYgXCJMXCIgLyogTGFzdCAqLyA9PT0gdC5saW1pdFR5cGU7XG59XG5cbmZ1bmN0aW9uIE9lKHQpIHtcbiAgICByZXR1cm4gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkIDogbnVsbDtcbn1cblxuZnVuY3Rpb24gRmUodCkge1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIGlmIChlLlMoKSkgcmV0dXJuIGUuZmllbGQ7XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgT3BlcmF0b3JzIGFyZSBpbmNsdWRlZCBpbiB0aGUgcXVlcnkgYW5kXG4gKiByZXR1cm5zIHRoZSBmaXJzdCBvbmUgdGhhdCBpcywgb3IgbnVsbCBpZiBub25lIGFyZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHF1ZXJ5IG1hdGNoZXMgYSBjb2xsZWN0aW9uIGdyb3VwIHJhdGhlciB0aGFuIGEgc3BlY2lmaWNcbiAqIGNvbGxlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uICRlKHQpIHtcbiAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXA7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgaW1wbGljaXQgb3JkZXIgYnkgY29uc3RyYWludCB0aGF0IGlzIHVzZWQgdG8gZXhlY3V0ZSB0aGUgUXVlcnksXG4gKiB3aGljaCBjYW4gYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yZGVyIGJ5IGNvbnN0cmFpbnRzIHRoZSB1c2VyIHByb3ZpZGVkIChlLmcuXG4gKiB0aGUgU0RLIGFuZCBiYWNrZW5kIGFsd2F5cyBvcmRlcnMgYnkgYF9fbmFtZV9fYCkuXG4gKi8gZnVuY3Rpb24gQmUodCkge1xuICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgIGlmIChudWxsID09PSBlLkQpIHtcbiAgICAgICAgZS5EID0gW107XG4gICAgICAgIGNvbnN0IHQgPSBGZShlKSwgbiA9IE9lKGUpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiBudWxsID09PSBuKSBcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gaW1wbGljaXRseSBhZGQga2V5IG9yZGVyaW5nLCB3ZSBtdXN0IGFsc28gYWRkIHRoZVxuICAgICAgICAvLyBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZCBmb3IgaXQgdG8gYmUgYSB2YWxpZCBxdWVyeS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXG4gICAgICAgIHQuaXNLZXlGaWVsZCgpIHx8IGUuRC5wdXNoKG5ldyBWZSh0KSksIGUuRC5wdXNoKG5ldyBWZShtdC5rZXlGaWVsZCgpLCBcImFzY1wiIC8qIEFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5leHBsaWNpdE9yZGVyQnkpIGUuRC5wdXNoKG4pLCBuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiAodCA9ICEwKTtcbiAgICAgICAgICAgIGlmICghdCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBvcmRlciBvZiB0aGUgaW1wbGljaXQga2V5IG9yZGVyaW5nIGFsd2F5cyBtYXRjaGVzIHRoZSBsYXN0XG4gICAgICAgICAgICAgICAgLy8gZXhwbGljaXQgb3JkZXIgYnlcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5leHBsaWNpdE9yZGVyQnkubGVuZ3RoID4gMCA/IGUuZXhwbGljaXRPcmRlckJ5W2UuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAtIDFdLmRpciA6IFwiYXNjXCIgLyogQVNDRU5ESU5HICovO1xuICAgICAgICAgICAgICAgIGUuRC5wdXNoKG5ldyBWZShtdC5rZXlGaWVsZCgpLCB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUuRDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGlzIGBRdWVyeWAgaW5zdGFuY2UgdG8gaXQncyBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIHJlcHJlc2VudGF0aW9uLlxuICovIGZ1bmN0aW9uIExlKHQpIHtcbiAgICBjb25zdCBlID0gRyh0KTtcbiAgICBpZiAoIWUuQykgaWYgKFwiRlwiIC8qIEZpcnN0ICovID09PSBlLmxpbWl0VHlwZSkgZS5DID0gbGUoZS5wYXRoLCBlLmNvbGxlY3Rpb25Hcm91cCwgQmUoZSksIGUuZmlsdGVycywgZS5saW1pdCwgZS5zdGFydEF0LCBlLmVuZEF0KTsgZWxzZSB7XG4gICAgICAgIC8vIEZsaXAgdGhlIG9yZGVyQnkgZGlyZWN0aW9ucyBzaW5jZSB3ZSB3YW50IHRoZSBsYXN0IHJlc3VsdHNcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgQmUoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcImRlc2NcIiAvKiBERVNDRU5ESU5HICovID09PSBuLmRpciA/IFwiYXNjXCIgLyogQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogREVTQ0VORElORyAqLztcbiAgICAgICAgICAgIHQucHVzaChuZXcgVmUobi5maWVsZCwgZSkpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gc3dhcCB0aGUgY3Vyc29ycyB0byBtYXRjaCB0aGUgbm93LWZsaXBwZWQgcXVlcnkgb3JkZXJpbmcuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUuZW5kQXQgPyBuZXcgUGUoZS5lbmRBdC5wb3NpdGlvbiwgIWUuZW5kQXQuaW5jbHVzaXZlKSA6IG51bGwsIHMgPSBlLnN0YXJ0QXQgPyBuZXcgUGUoZS5zdGFydEF0LnBvc2l0aW9uLCAhZS5zdGFydEF0LmluY2x1c2l2ZSkgOiBudWxsO1xuICAgICAgICAvLyBOb3cgcmV0dXJuIGFzIGEgTGltaXRUeXBlLkZpcnN0IHF1ZXJ5LlxuICAgICAgICBlLkMgPSBsZShlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHMpO1xuICAgIH1cbiAgICByZXR1cm4gZS5DO1xufVxuXG5mdW5jdGlvbiBVZSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBDZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgZSwgbiwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbn1cblxuZnVuY3Rpb24gcWUodCwgZSkge1xuICAgIHJldHVybiBfZShMZSh0KSwgTGUoZSkpICYmIHQubGltaXRUeXBlID09PSBlLmxpbWl0VHlwZTtcbn1cblxuLy8gVE9ETyhiLzI5MTgzMTY1KTogVGhpcyBpcyB1c2VkIHRvIGdldCBhIHVuaXF1ZSBzdHJpbmcgZnJvbSBhIHF1ZXJ5IHRvLCBmb3Jcbi8vIGV4YW1wbGUsIHVzZSBhcyBhIGRpY3Rpb25hcnkga2V5LCBidXQgdGhlIGltcGxlbWVudGF0aW9uIGlzIHN1YmplY3QgdG9cbi8vIGNvbGxpc2lvbnMuIE1ha2UgaXQgY29sbGlzaW9uLWZyZWUuXG5mdW5jdGlvbiBHZSh0KSB7XG4gICAgcmV0dXJuIGAke2ZlKExlKHQpKX18bHQ6JHt0LmxpbWl0VHlwZX1gO1xufVxuXG5mdW5jdGlvbiBLZSh0KSB7XG4gICAgcmV0dXJuIGBRdWVyeSh0YXJnZXQ9JHtkZShMZSh0KSl9OyBsaW1pdFR5cGU9JHt0LmxpbWl0VHlwZX0pYDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciBgZG9jYCBtYXRjaGVzIHRoZSBjb25zdHJhaW50cyBvZiBgcXVlcnlgLiAqLyBmdW5jdGlvbiBRZSh0LCBlKSB7XG4gICAgcmV0dXJuIGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5rZXkucGF0aDtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwID8gZS5rZXkuaGFzQ29sbGVjdGlvbklkKHQuY29sbGVjdGlvbkdyb3VwKSAmJiB0LnBhdGguaXNQcmVmaXhPZihuKSA6IHh0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSA/IHQucGF0aC5pc0VxdWFsKG4pIDogdC5wYXRoLmlzSW1tZWRpYXRlUGFyZW50T2Yobik7XG4gICAgfVxuICAgIC8qKlxuICogQSBkb2N1bWVudCBtdXN0IGhhdmUgYSB2YWx1ZSBmb3IgZXZlcnkgb3JkZXJpbmcgY2xhdXNlIGluIG9yZGVyIHRvIHNob3cgdXBcbiAqIGluIHRoZSByZXN1bHRzLlxuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmV4cGxpY2l0T3JkZXJCeSkgXG4gICAgICAgIC8vIG9yZGVyIGJ5IGtleSBhbHdheXMgbWF0Y2hlc1xuICAgICAgICBpZiAoIW4uZmllbGQuaXNLZXlGaWVsZCgpICYmIG51bGwgPT09IGUuZGF0YS5maWVsZChuLmZpZWxkKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfSh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmICghbi5tYXRjaGVzKGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIE1ha2VzIHN1cmUgYSBkb2N1bWVudCBpcyB3aXRoaW4gdGhlIGJvdW5kcywgaWYgcHJvdmlkZWQuICovICh0LCBlKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmICh0LnN0YXJ0QXQgJiYgIVxuICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiBhIGRvY3VtZW50IHNvcnRzIGJlZm9yZSBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gU2UodCwgZSwgbik7XG4gICAgICAgICAgICByZXR1cm4gdC5pbmNsdXNpdmUgPyBzIDw9IDAgOiBzIDwgMDtcbiAgICAgICAgfSh0LnN0YXJ0QXQsIEJlKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodC5lbmRBdCAmJiAhZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IFNlKHQsIGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIHQuaW5jbHVzaXZlID8gcyA+PSAwIDogcyA+IDA7XG4gICAgICAgIH0odC5lbmRBdCwgQmUodCksIGUpKSByZXR1cm4gITE7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBjb2xsZWN0aW9uIGdyb3VwIHRoYXQgdGhpcyBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgaW4gdGhlIFdlYiBTREsgdG8gZmFjaWxpdGF0ZSBtdWx0aS10YWJcbiAqIHN5bmNocm9uaXphdGlvbiBmb3IgcXVlcnkgcmVzdWx0cy5cbiAqLyAodCwgZSk7XG59XG5cbmZ1bmN0aW9uIGplKHQpIHtcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgfHwgKHQucGF0aC5sZW5ndGggJSAyID09IDEgPyB0LnBhdGgubGFzdFNlZ21lbnQoKSA6IHQucGF0aC5nZXQodC5wYXRoLmxlbmd0aCAtIDIpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgbmV3IGNvbXBhcmF0b3IgZnVuY3Rpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBjb21wYXJlIHR3byBkb2N1bWVudHNcbiAqIGJhc2VkIG9uIHRoZSBRdWVyeSdzIG9yZGVyaW5nIGNvbnN0cmFpbnQuXG4gKi8gZnVuY3Rpb24gV2UodCkge1xuICAgIHJldHVybiAoZSwgbikgPT4ge1xuICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2YgQmUodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB6ZShpLCBlLCBuKTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIHMgPSBzIHx8IGkuZmllbGQuaXNLZXlGaWVsZCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIHplKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5maWVsZC5pc0tleUZpZWxkKCkgPyB4dC5jb21wYXJhdG9yKGUua2V5LCBuLmtleSkgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRhdGEuZmllbGQodCksIGkgPSBuLmRhdGEuZmllbGQodCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBzICYmIG51bGwgIT09IGkgPyAkdChzLCBpKSA6IEwoKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFRoZSBpbml0aWFsIG11dGF0aW9uIGJhdGNoIGlkIGZvciBlYWNoIGluZGV4LiBHZXRzIHVwZGF0ZWQgZHVyaW5nIGluZGV4XG4gKiBiYWNrZmlsbC5cbiAqLyAodC5maWVsZCwgZSwgbik7XG4gICAgc3dpdGNoICh0LmRpcikge1xuICAgICAgY2FzZSBcImFzY1wiIC8qIEFTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiBzO1xuXG4gICAgICBjYXNlIFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gOlxuICAgICAgICByZXR1cm4gLTEgKiBzO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhbiBEb3VibGVWYWx1ZSBmb3IgYHZhbHVlYCB0aGF0IGlzIGVuY29kZWQgYmFzZWQgdGhlIHNlcmlhbGl6ZXInc1xuICogYHVzZVByb3RvM0pzb25gIHNldHRpbmcuXG4gKi8gZnVuY3Rpb24gSGUodCwgZSkge1xuICAgIGlmICh0Lk4pIHtcbiAgICAgICAgaWYgKGlzTmFOKGUpKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiTmFOXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IDEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiSW5maW5pdHlcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAoZSA9PT0gLTEgLyAwKSByZXR1cm4ge1xuICAgICAgICAgICAgZG91YmxlVmFsdWU6IFwiLUluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZG91YmxlVmFsdWU6IER0KGUpID8gXCItMFwiIDogZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiBJbnRlZ2VyVmFsdWUgZm9yIGB2YWx1ZWAuXG4gKi8gZnVuY3Rpb24gSmUodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIGludGVnZXJWYWx1ZTogXCJcIiArIHRcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvIGEgcHJvdG8uXG4gKiBUaGUgcmV0dXJuIHZhbHVlIGlzIGFuIEludGVnZXJWYWx1ZSBpZiBpdCBjYW4gc2FmZWx5IHJlcHJlc2VudCB0aGUgdmFsdWUsXG4gKiBvdGhlcndpc2UgYSBEb3VibGVWYWx1ZSBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBZZSh0LCBlKSB7XG4gICAgcmV0dXJuIEN0KGUpID8gSmUoZSkgOiBIZSh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBVc2VkIHRvIHJlcHJlc2VudCBhIGZpZWxkIHRyYW5zZm9ybSBvbiBhIG11dGF0aW9uLiAqLyBjbGFzcyBYZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBzdHJ1Y3R1cmFsIHR5cGUgb2YgYFRyYW5zZm9ybU9wZXJhdGlvbmAgaXMgdW5pcXVlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21pY3Jvc29mdC9UeXBlU2NyaXB0L2lzc3Vlcy81NDUxXG4gICAgICAgIHRoaXMuXyA9IHZvaWQgMDtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgdGhlIGxvY2FsIHRyYW5zZm9ybSByZXN1bHQgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYHByZXZpb3VzVmFsdWVgLFxuICogb3B0aW9uYWxseSB1c2luZyB0aGUgcHJvdmlkZWQgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gWmUodCwgZSwgbikge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2Ygbm4gPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7XG4gICAgICAgICAgICBmaWVsZHM6IHtcbiAgICAgICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgICAgICBzdHJpbmdWYWx1ZTogXCJzZXJ2ZXJfdGltZXN0YW1wXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF9fbG9jYWxfd3JpdGVfdGltZV9fOiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWNvbmRzOiB0LnNlY29uZHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW5vczogdC5uYW5vc2Vjb25kc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZSAmJiAobi5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fID0gZSksIHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiBuXG4gICAgICAgIH07XG4gICAgfShuLCBlKSA6IHQgaW5zdGFuY2VvZiBzbiA/IHJuKHQsIGUpIDogdCBpbnN0YW5jZW9mIG9uID8gdW4odCwgZSkgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogU2luY2UgSmF2YVNjcmlwdCdzIGludGVnZXIgYXJpdGhtZXRpYyBpcyBsaW1pdGVkIHRvIDUzIGJpdFxuICAgICAgICAvLyBwcmVjaXNpb24gYW5kIHJlc29sdmVzIG92ZXJmbG93cyBieSByZWR1Y2luZyBwcmVjaXNpb24sIHdlIGRvIG5vdFxuICAgICAgICAvLyBtYW51YWxseSBjYXAgb3ZlcmZsb3dzIGF0IDJeNjMuXG4gICAgICAgIGNvbnN0IG4gPSBlbih0LCBlKSwgcyA9IGNuKG4pICsgY24odC5rKTtcbiAgICAgICAgcmV0dXJuIEd0KG4pICYmIEd0KHQuaykgPyBKZShzKSA6IEhlKHQuTSwgcyk7XG4gICAgfSh0LCBlKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGZpbmFsIHRyYW5zZm9ybSByZXN1bHQgYWZ0ZXIgdGhlIHRyYW5zZm9ybSBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAqIGJ5IHRoZSBzZXJ2ZXIsIHBvdGVudGlhbGx5IHVzaW5nIHRoZSBzZXJ2ZXItcHJvdmlkZWQgdHJhbnNmb3JtUmVzdWx0LlxuICovIGZ1bmN0aW9uIHRuKHQsIGUsIG4pIHtcbiAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcbiAgICAvLyBhcHBsaWNhdGlvbnMuXG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBzbiA/IHJuKHQsIGUpIDogdCBpbnN0YW5jZW9mIG9uID8gdW4odCwgZSkgOiBuO1xufVxuXG4vKipcbiAqIElmIHRoaXMgdHJhbnNmb3JtIG9wZXJhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0b1xuICogcGVyc2lzdCBmb3IgdGhpcyB0cmFuc2Zvcm0uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIHRyYW5zZm9ybVxuICogb3BlcmF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXNcbiAqIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIEJhc2UgdmFsdWVzIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmRcbiAqIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZSBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmRcbiAqIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlIHRyYW5zZm9ybSBvcGVyYXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMsIGFzIHRoZXkgY2FuIGJlIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhc1xuICogYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLlxuICovIGZ1bmN0aW9uIGVuKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGFuID8gR3QobiA9IGUpIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGVpdGhlciBhbiBJbnRlZ2VyVmFsdWUgb3IgYSBEb3VibGVWYWx1ZS4gKi8gKG4pID8gZSA6IHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiAwXG4gICAgfSA6IG51bGw7XG4gICAgdmFyIG47XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xuY2xhc3Mgbm4gZXh0ZW5kcyBYZSB7fVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovIGNsYXNzIHNuIGV4dGVuZHMgWGUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBybih0LCBlKSB7XG4gICAgY29uc3QgbiA9IGhuKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuLnNvbWUoKHQgPT4gT3QodCwgZSkpKSB8fCBuLnB1c2goZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBvbiBleHRlbmRzIFhlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdW4odCwgZSkge1xuICAgIGxldCBuID0gaG4oZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4gPSBuLmZpbHRlcigodCA9PiAhT3QodCwgZSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxuICovIGNsYXNzIGFuIGV4dGVuZHMgWGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5NID0gdCwgdGhpcy5rID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNuKHQpIHtcbiAgICByZXR1cm4gRXQodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGhuKHQpIHtcbiAgICByZXR1cm4gS3QodCkgJiYgdC5hcnJheVZhbHVlLnZhbHVlcyA/IHQuYXJyYXlWYWx1ZS52YWx1ZXMuc2xpY2UoKSA6IFtdO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgZmllbGQgcGF0aCBhbmQgdGhlIFRyYW5zZm9ybU9wZXJhdGlvbiB0byBwZXJmb3JtIHVwb24gaXQuICovIGNsYXNzIGxuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLnRyYW5zZm9ybSA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmbih0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmllbGQuaXNFcXVhbChlLmZpZWxkKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2Ygc24gJiYgZSBpbnN0YW5jZW9mIHNuIHx8IHQgaW5zdGFuY2VvZiBvbiAmJiBlIGluc3RhbmNlb2Ygb24gPyBvdCh0LmVsZW1lbnRzLCBlLmVsZW1lbnRzLCBPdCkgOiB0IGluc3RhbmNlb2YgYW4gJiYgZSBpbnN0YW5jZW9mIGFuID8gT3QodC5rLCBlLmspIDogdCBpbnN0YW5jZW9mIG5uICYmIGUgaW5zdGFuY2VvZiBubjtcbiAgICB9KHQudHJhbnNmb3JtLCBlLnRyYW5zZm9ybSk7XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xuY2xhc3MgZG4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxuICAgICAqXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhIG11dGF0aW9uXG4gICAgICogY29udGFpbmluZyBmaWVsZCB0cmFuc2Zvcm1zIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWVcbiAgICAgKiBmb3IgZWFjaCBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXG4gICAgICpcbiAgICAgKiBXaWxsIGJlIGVtcHR5IGlmIHRoZSBtdXRhdGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IGZpZWxkIHRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXG4gKi8gY2xhc3MgX24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gdCwgdGhpcy5leGlzdHMgPSBlO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBlbXB0eSBQcmVjb25kaXRpb24uICovICAgIHN0YXRpYyBub25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi8gICAgc3RhdGljIGV4aXN0cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX24odm9pZCAwLCB0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi8gICAgc3RhdGljIHVwZGF0ZVRpbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IF9uKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqLyAgICBnZXQgaXNOb25lKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0aGlzLnVwZGF0ZVRpbWUgJiYgdm9pZCAwID09PSB0aGlzLmV4aXN0cztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gdC5leGlzdHMgJiYgKHRoaXMudXBkYXRlVGltZSA/ICEhdC51cGRhdGVUaW1lICYmIHRoaXMudXBkYXRlVGltZS5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiAhdC51cGRhdGVUaW1lKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gZnVuY3Rpb24gd24odCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6IHZvaWQgMCA9PT0gdC5leGlzdHMgfHwgdC5leGlzdHMgPT09IGUuaXNGb3VuZERvY3VtZW50KCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXG4gKlxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0cyB2ZXJzaW9uLlxuICpcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gRm9yIERlbGV0ZSBtdXRhdGlvbnMsIHdlXG4gKiByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxuICpcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cbiAqXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cbiAqXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcbiAqIFNldE11dGF0aW9uICAgICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgRG9jdW1lbnQodjApXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBVbmtub3duRG9jdW1lbnQodjMpXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIE5vRG9jdW1lbnQodjApXG4gKlxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gQXMgZGVsZXRlcyBoYXZlIG5vXG4gKiBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxuICogRGVsZXRlIG11dGF0aW9ucy5cbiAqXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xuICogbG9jYWxseSwgd2UgdHJhbnNpdGlvbiB0byBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzXG4gKiB0aGUgdXBkYXRlZCB2ZXJzaW9uLlxuICpcbiAqIEZpZWxkIHRyYW5zZm9ybXMgYXJlIHVzZWQgb25seSB3aXRoIFBhdGNoIGFuZCBTZXQgTXV0YXRpb25zLiBXZSB1c2UgdGhlXG4gKiBgdXBkYXRlVHJhbnNmb3Jtc2AgbWVzc2FnZSB0byBzdG9yZSB0cmFuc2Zvcm1zLCByYXRoZXIgdGhhbiB0aGUgYHRyYW5zZm9ybXNgc1xuICogbWVzc2FnZXMuXG4gKlxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcbiAqXG4gKiBFdmVyeSB0eXBlIG9mIG11dGF0aW9uIG5lZWRzIHRvIGltcGxlbWVudCBpdHMgb3duIGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQgKHNlZSBgc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoKWAgZm9yIGFuXG4gKiBleGFtcGxlKS5cbiAqLyBjbGFzcyBtbiB7fVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmcgYVxuICogbmV3IHJlbW90ZSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHN0YXRlXG4gKiAoZS5nLiBpdCBpcyBpbnZhbGlkIG9yIG91dGRhdGVkKSwgdGhlIGRvY3VtZW50IHR5cGUgbWF5IHRyYW5zaXRpb24gdG9cbiAqIHVua25vd24uXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbXV0YXRpb25SZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvbiBmcm9tIHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIGduKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2YgRW4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBzZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYVxuICAgICAgICAvLyByZW1vdGUgZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbXVzdCBoYXZlIGhlbGQuXG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSBibih0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIHMpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiB0IGluc3RhbmNlb2YgQW4gPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghd24odC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXG4gICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIGNvbnZlcnQgdG8gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggYVxuICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxuICAgICAgICByZXR1cm4gdm9pZCBlLmNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChuLnZlcnNpb24pO1xuICAgICAgICBjb25zdCBzID0gYm4odC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKFJuKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIGkpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQobi52ZXJzaW9uKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KDAsIGUsIG4pO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmdcbiAqIHRoZSBuZXcgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGVcbiAqIGV4cGVjdGVkIHN0YXRlLCB0aGUgZG9jdW1lbnQgaXMgbm90IG1vZGlmaWVkLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gQSB0aW1lc3RhbXAgaW5kaWNhdGluZyB0aGUgbG9jYWwgd3JpdGUgdGltZSBvZiB0aGVcbiAqICAgICBiYXRjaCB0aGlzIG11dGF0aW9uIGlzIGEgcGFydCBvZi5cbiAqLyBmdW5jdGlvbiB5bih0LCBlLCBuKSB7XG4gICAgdCBpbnN0YW5jZW9mIEVuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIXduKHQucHJlY29uZGl0aW9uLCBlKSkgXG4gICAgICAgIC8vIFRoZSBtdXRhdGlvbiBmYWlsZWQgdG8gYXBwbHkgKGUuZy4gYSBkb2N1bWVudCBJRCBjcmVhdGVkIHdpdGggYWRkKClcbiAgICAgICAgLy8gY2F1c2VkIGEgbmFtZSBjb2xsaXNpb24pLlxuICAgICAgICByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSBQbih0LmZpZWxkVHJhbnNmb3JtcywgbiwgZSk7XG4gICAgICAgIHMuc2V0QWxsKGkpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoVG4oZSksIHMpLnNldEhhc0xvY2FsTXV0YXRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IG1vZGlmaWVzIGZpZWxkcyBvZiB0aGUgZG9jdW1lbnQgYXQgdGhlIGdpdmVuIGtleSB3aXRoIHRoZVxuICogZ2l2ZW4gdmFsdWVzLiBUaGUgdmFsdWVzIGFyZSBhcHBsaWVkIHRocm91Z2ggYSBmaWVsZCBtYXNrOlxuICpcbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBib3RoIHRoZSBtYXNrIGFuZCB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZyBmaWVsZFxuICogICAgaXMgdXBkYXRlZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiBuZWl0aGVyIHRoZSBtYXNrIG5vciB0aGUgdmFsdWVzLCB0aGUgY29ycmVzcG9uZGluZ1xuICogICAgZmllbGQgaXMgdW5tb2RpZmllZC5cbiAqICAqIFdoZW4gYSBmaWVsZCBpcyBpbiB0aGUgbWFzayBidXQgbm90IGluIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyBkZWxldGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIG5vdCBpbiB0aGUgbWFzayBidXQgaXMgaW4gdGhlIHZhbHVlcywgdGhlIHZhbHVlcyBtYXAgaXNcbiAqICAgIGlnbm9yZWQuXG4gKi8gKHQsIGUsIG4pIDogdCBpbnN0YW5jZW9mIEFuID8gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoIXduKHQucHJlY29uZGl0aW9uLCBlKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gUG4odC5maWVsZFRyYW5zZm9ybXMsIG4sIGUpLCBpID0gZS5kYXRhO1xuICAgICAgICBpLnNldEFsbChSbih0KSksIGkuc2V0QWxsKHMpLCBlLmNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoVG4oZSksIGkpLnNldEhhc0xvY2FsTXV0YXRpb25zKCk7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIEZpZWxkUGF0aC9WYWx1ZSBtYXAgd2l0aCB0aGUgY29udGVudCBvZiB0aGUgUGF0Y2hNdXRhdGlvbi5cbiAqLyAodCwgZSwgbikgOiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHduKHQucHJlY29uZGl0aW9uLCBlKSAmJiBcbiAgICAgICAgLy8gV2UgZG9uJ3QgY2FsbCBgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKWAgc2luY2Ugd2Ugd2FudCB0byBiZSBiYWNrd2FyZHNcbiAgICAgICAgLy8gY29tcGF0aWJsZSB3aXRoIHRoZSBleGlzdGluZyBTREsgYmVoYXZpb3IuXG4gICAgICAgIGUuY29udmVydFRvTm9Eb2N1bWVudChjdC5taW4oKSk7XG4gICAgfVxuICAgIC8qKlxuICogQSBtdXRhdGlvbiB0aGF0IHZlcmlmaWVzIHRoZSBleGlzdGVuY2Ugb2YgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aFxuICogdGhlIHByb3ZpZGVkIHByZWNvbmRpdGlvbi5cbiAqXG4gKiBUaGUgYHZlcmlmeWAgb3BlcmF0aW9uIGlzIG9ubHkgdXNlZCBpbiBUcmFuc2FjdGlvbnMsIGFuZCB0aGlzIGNsYXNzIHNlcnZlc1xuICogcHJpbWFyaWx5IHRvIGZhY2lsaXRhdGUgc2VyaWFsaXphdGlvbiBpbnRvIHByb3Rvcy5cbiAqLyAodCwgZSk7XG59XG5cbi8qKlxuICogSWYgdGhpcyBtdXRhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0byBwZXJzaXN0IHdpdGhcbiAqIHRoaXMgbXV0YXRpb24uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIG11dGF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkXG4gKiB0byB0aGlzIGJhc2UgdmFsdWUsIGV2ZW4gaWYgZG9jdW1lbnQgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIFRoZSBiYXNlIHZhbHVlIGlzIGEgc3BhcnNlIG9iamVjdCB0aGF0IGNvbnNpc3RzIG9mIG9ubHkgdGhlIGRvY3VtZW50XG4gKiBmaWVsZHMgZm9yIHdoaWNoIHRoaXMgbXV0YXRpb24gY29udGFpbnMgYSBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1hdGlvblxuICogKGUuZy4gYSBudW1lcmljIGluY3JlbWVudCkuIFRoZSBwcm92aWRlZCB2YWx1ZSBndWFyYW50ZWVzIGNvbnNpc3RlbnRcbiAqIGJlaGF2aW9yIGZvciBub24taWRlbXBvdGVudCB0cmFuc2Zvcm1zIGFuZCBhbGxvdyB1cyB0byByZXR1cm4gdGhlIHNhbWVcbiAqIGxhdGVuY3ktY29tcGVuc2F0ZWQgdmFsdWUgZXZlbiBpZiB0aGUgYmFja2VuZCBoYXMgYWxyZWFkeSBhcHBsaWVkIHRoZVxuICogbXV0YXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yIGlkZW1wb3RlbnQgbXV0YXRpb25zLCBhcyB0aGV5IGNhbiBiZVxuICogcmUtcGxheWVkIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVtLlxuICpcbiAqIEByZXR1cm5zIGEgYmFzZSB2YWx1ZSB0byBzdG9yZSBhbG9uZyB3aXRoIHRoZSBtdXRhdGlvbiwgb3IgbnVsbCBmb3JcbiAqIGlkZW1wb3RlbnQgbXV0YXRpb25zLlxuICovIGZ1bmN0aW9uIHBuKHQsIGUpIHtcbiAgICBsZXQgbiA9IG51bGw7XG4gICAgZm9yIChjb25zdCBzIG9mIHQuZmllbGRUcmFuc2Zvcm1zKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQocy5maWVsZCksIGkgPSBlbihzLnRyYW5zZm9ybSwgdCB8fCBudWxsKTtcbiAgICAgICAgbnVsbCAhPSBpICYmIChudWxsID09IG4gJiYgKG4gPSBYdC5lbXB0eSgpKSwgbi5zZXQocy5maWVsZCwgaSkpO1xuICAgIH1cbiAgICByZXR1cm4gbiB8fCBudWxsO1xufVxuXG5mdW5jdGlvbiBJbih0LCBlKSB7XG4gICAgcmV0dXJuIHQudHlwZSA9PT0gZS50eXBlICYmICghIXQua2V5LmlzRXF1YWwoZS5rZXkpICYmICghIXQucHJlY29uZGl0aW9uLmlzRXF1YWwoZS5wcmVjb25kaXRpb24pICYmICghIWZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCA9PT0gdCAmJiB2b2lkIDAgPT09IGUgfHwgISghdCB8fCAhZSkgJiYgb3QodCwgZSwgKCh0LCBlKSA9PiBmbih0LCBlKSkpO1xuICAgIH0odC5maWVsZFRyYW5zZm9ybXMsIGUuZmllbGRUcmFuc2Zvcm1zKSAmJiAoMCAvKiBTZXQgKi8gPT09IHQudHlwZSA/IHQudmFsdWUuaXNFcXVhbChlLnZhbHVlKSA6IDEgLyogUGF0Y2ggKi8gIT09IHQudHlwZSB8fCB0LmRhdGEuaXNFcXVhbChlLmRhdGEpICYmIHQuZmllbGRNYXNrLmlzRXF1YWwoZS5maWVsZE1hc2spKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50IGZvciB1c2UgYXMgdGhlIHJlc3VsdCBvZiBhXG4gKiBtdXRhdGlvbi4gTXV0YXRpb25zIGFyZSBkZWZpbmVkIHRvIHJldHVybiB0aGUgdmVyc2lvbiBvZiB0aGUgYmFzZSBkb2N1bWVudFxuICogb25seSBpZiBpdCBpcyBhbiBleGlzdGluZyBkb2N1bWVudC4gRGVsZXRlZCBhbmQgdW5rbm93biBkb2N1bWVudHMgaGF2ZSBhXG4gKiBwb3N0LW11dGF0aW9uIHZlcnNpb24gb2YgU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICovIGZ1bmN0aW9uIFRuKHQpIHtcbiAgICByZXR1cm4gdC5pc0ZvdW5kRG9jdW1lbnQoKSA/IHQudmVyc2lvbiA6IGN0Lm1pbigpO1xufVxuXG4vKipcbiAqIEEgbXV0YXRpb24gdGhhdCBjcmVhdGVzIG9yIHJlcGxhY2VzIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBvYmplY3QgdmFsdWUgY29udGVudHMuXG4gKi8gY2xhc3MgRW4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcyA9IFtdKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMua2V5ID0gdCwgdGhpcy52YWx1ZSA9IGUsIHRoaXMucHJlY29uZGl0aW9uID0gbiwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBzLCBcbiAgICAgICAgdGhpcy50eXBlID0gMCAvKiBTZXQgKi87XG4gICAgfVxufVxuXG5jbGFzcyBBbiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IG4sIHRoaXMucHJlY29uZGl0aW9uID0gcywgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSwgdGhpcy50eXBlID0gMSAvKiBQYXRjaCAqLztcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFJuKHQpIHtcbiAgICBjb25zdCBlID0gbmV3IE1hcDtcbiAgICByZXR1cm4gdC5maWVsZE1hc2suZmllbGRzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICBpZiAoIW4uaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdC5kYXRhLmZpZWxkKG4pO1xuICAgICAgICAgICAgZS5zZXQobiwgcyk7XG4gICAgICAgIH1cbiAgICB9KSksIGU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2UgYWZ0ZXIgYSBtdXRhdGlvblxuICogY29udGFpbmluZyB0cmFuc2Zvcm1zIGhhcyBiZWVuIGFja25vd2xlZGdlZCBieSB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBUaGUgZmllbGQgdHJhbnNmb3JtcyB0byBhcHBseSB0aGUgcmVzdWx0IHRvLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqIHByZXZpb3VzIG11dGF0aW9ucy5cbiAqIEBwYXJhbSBzZXJ2ZXJUcmFuc2Zvcm1SZXN1bHRzIC0gVGhlIHRyYW5zZm9ybSByZXN1bHRzIHJlY2VpdmVkIGJ5IHRoZSBzZXJ2ZXIuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBibih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgVSh0Lmxlbmd0aCA9PT0gbi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbi5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCByID0gdFtpXSwgbyA9IHIudHJhbnNmb3JtLCB1ID0gZS5kYXRhLmZpZWxkKHIuZmllbGQpO1xuICAgICAgICBzLnNldChyLmZpZWxkLCB0bihvLCB1LCBuW2ldKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBsaXN0IG9mIFwidHJhbnNmb3JtIHJlc3VsdHNcIiAoYSB0cmFuc2Zvcm0gcmVzdWx0IGlzIGEgZmllbGQgdmFsdWVcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgdHJhbnNmb3JtKSBmb3IgdXNlIHdoZW4gYXBwbHlpbmcgYVxuICogdHJhbnNmb3JtIGxvY2FsbHkuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbG9jYWxXcml0ZVRpbWUgLSBUaGUgbG9jYWwgdGltZSBvZiB0aGUgbXV0YXRpb24gKHVzZWQgdG9cbiAqICAgICBnZW5lcmF0ZSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZXMpLlxuICogQHBhcmFtIG11dGFibGVEb2N1bWVudCAtIFRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkb2N1bWVudCBhZnRlciBhcHBseWluZyBhbGxcbiAqICAgICBwcmV2aW91cyBtdXRhdGlvbnMuXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBQbih0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGkudHJhbnNmb3JtLCByID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICBzLnNldChpLmZpZWxkLCBaZSh0LCByLCBlKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIFZuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDIgLyogRGVsZXRlICovICwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG59XG5cbmNsYXNzIHZuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDMgLyogVmVyaWZ5ICovICwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBbXTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFNuIHtcbiAgICAvLyBUT0RPKGIvMzMwNzgxNjMpOiBqdXN0IHVzZSBzaW1wbGVzdCBmb3JtIG9mIGV4aXN0ZW5jZSBmaWx0ZXIgZm9yIG5vd1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb3VudCA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAqXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgb3IgY2hhbmdlIHRoaXMgaW50byBhIGNvbnN0IGVudW0uXG4gKi8gdmFyIERuLCBDbjtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIHhuKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG5cbiAgICAgIGNhc2UgSy5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIEsuVU5LTk9XTjpcbiAgICAgIGNhc2UgSy5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgSy5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIEsuSU5URVJOQUw6XG4gICAgICBjYXNlIEsuVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgSy5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBLLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIEsuTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBLLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBLLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBLLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBLLkFCT1JURUQ6XG4gICAgICBjYXNlIEsuT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBLLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIEsuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiBObih0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgXG4gICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcbiAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXG4gICAgcmV0dXJuIEYoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgSy5VTktOT1dOO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSBEbi5PSzpcbiAgICAgICAgcmV0dXJuIEsuT0s7XG5cbiAgICAgIGNhc2UgRG4uQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gSy5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgRG4uVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIEsuVU5LTk9XTjtcblxuICAgICAgY2FzZSBEbi5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIEsuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgRG4uUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gSy5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgRG4uSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBLLklOVEVSTkFMO1xuXG4gICAgICBjYXNlIERuLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gSy5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSBEbi5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBLLlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSBEbi5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gSy5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIERuLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIEsuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIERuLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gSy5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSBEbi5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIEsuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgRG4uRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIEsuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSBEbi5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gSy5BQk9SVEVEO1xuXG4gICAgICBjYXNlIERuLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIEsuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIERuLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBLLlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgRG4uREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gSy5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKENuID0gRG4gfHwgKERuID0ge30pKVtDbi5PSyA9IDBdID0gXCJPS1wiLCBDbltDbi5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxuQ25bQ24uVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIENuW0NuLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbkNuW0NuLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIENuW0NuLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG5DbltDbi5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCBDbltDbi5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbkNuW0NuLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIENuW0NuLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG5DbltDbi5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgQ25bQ24uQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbkNuW0NuLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIENuW0NuLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG5DbltDbi5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgQ25bQ24uVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIENuW0NuLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovXG5jbGFzcyBrbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLm1hcEtleUZuID0gdCwgdGhpcy5lcXVhbHNGbiA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGlubmVyIG1hcCBmb3IgYSBrZXkvdmFsdWUgcGFpci4gRHVlIHRvIHRoZSBwb3NzaWJpbGl0eSBvZiBjb2xsaXNpb25zIHdlXG4gICAgICAgICAqIGtlZXAgYSBsaXN0IG9mIGVudHJpZXMgdGhhdCB3ZSBkbyBhIGxpbmVhciBzZWFyY2ggdGhyb3VnaCB0byBmaW5kIGFuIGFjdHVhbFxuICAgICAgICAgKiBtYXRjaC4gTm90ZSB0aGF0IGNvbGxpc2lvbnMgc2hvdWxkIGJlIHJhcmUsIHNvIHdlIHN0aWxsIGV4cGVjdCBuZWFyXG4gICAgICAgICAqIGNvbnN0YW50IHRpbWUgbG9va3VwcyBpbiBwcmFjdGljZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5uZXIgPSB7fSwgXG4gICAgICAgIC8qKiBUaGUgbnVtYmVyIG9mIGVudHJpZXMgc3RvcmVkIGluIHRoZSBtYXAgKi9cbiAgICAgICAgdGhpcy5pbm5lclNpemUgPSAwO1xuICAgIH1cbiAgICAvKiogR2V0IGEgdmFsdWUgZm9yIHRoaXMga2V5LCBvciB1bmRlZmluZWQgaWYgaXQgZG9lcyBub3QgZXhpc3QuICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm1hcEtleUZuKHQpLCBuID0gdGhpcy5pbm5lcltlXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgZm9yIChjb25zdCBbZSwgc10gb2YgbikgaWYgKHRoaXMuZXF1YWxzRm4oZSwgdCkpIHJldHVybiBzO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmdldCh0KTtcbiAgICB9XG4gICAgLyoqIFB1dCB0aGlzIGtleSBhbmQgdmFsdWUgaW4gdGhlIG1hcC4gKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubWFwS2V5Rm4odCksIHMgPSB0aGlzLmlubmVyW25dO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSByZXR1cm4gdGhpcy5pbm5lcltuXSA9IFsgWyB0LCBlIF0gXSwgdm9pZCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHMubGVuZ3RoOyBuKyspIGlmICh0aGlzLmVxdWFsc0ZuKHNbbl1bMF0sIHQpKSBcbiAgICAgICAgLy8gVGhpcyBpcyB1cGRhdGluZyBhbiBleGlzdGluZyBlbnRyeSBhbmQgZG9lcyBub3QgaW5jcmVhc2UgYGlubmVyU2l6ZWAuXG4gICAgICAgIHJldHVybiB2b2lkIChzW25dID0gWyB0LCBlIF0pO1xuICAgICAgICBzLnB1c2goWyB0LCBlIF0pLCB0aGlzLmlubmVyU2l6ZSsrO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdGhpcyBrZXkgZnJvbSB0aGUgbWFwLiBSZXR1cm5zIGEgYm9vbGVhbiBpZiBhbnl0aGluZyB3YXMgZGVsZXRlZC5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubWFwS2V5Rm4odCksIG4gPSB0aGlzLmlubmVyW2VdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IHMgPSAwOyBzIDwgbi5sZW5ndGg7IHMrKykgaWYgKHRoaXMuZXF1YWxzRm4obltzXVswXSwgdCkpIHJldHVybiAxID09PSBuLmxlbmd0aCA/IGRlbGV0ZSB0aGlzLmlubmVyW2VdIDogbi5zcGxpY2UocywgMSksIFxuICAgICAgICB0aGlzLmlubmVyU2l6ZS0tLCAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgbHQodGhpcy5pbm5lciwgKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IFtlLCBzXSBvZiBuKSB0KGUsIHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBmdCh0aGlzLmlubmVyKTtcbiAgICB9XG4gICAgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5uZXJTaXplO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIEFuIGltbXV0YWJsZSBzb3J0ZWQgbWFwIGltcGxlbWVudGF0aW9uLCBiYXNlZCBvbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2tcbi8vIHRyZWUuXG5jbGFzcyBNbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLnJvb3QgPSBlIHx8IEZuLkVNUFRZO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkIG9yIHJlcGxhY2VkLlxuICAgIGluc2VydCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTW4odGhpcy5jb21wYXJhdG9yLCB0aGlzLnJvb3QuaW5zZXJ0KHQsIGUsIHRoaXMuY29tcGFyYXRvcikuY29weShudWxsLCBudWxsLCBGbi5CTEFDSywgbnVsbCwgbnVsbCkpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgbWFwLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNbih0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5yZW1vdmUodCwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIEZuLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZhbHVlIG9mIHRoZSBub2RlIHdpdGggdGhlIGdpdmVuIGtleSwgb3IgbnVsbC5cbiAgICBnZXQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IWUuaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmNvbXBhcmF0b3IodCwgZS5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybiBlLnZhbHVlO1xuICAgICAgICAgICAgbiA8IDAgPyBlID0gZS5sZWZ0IDogbiA+IDAgJiYgKGUgPSBlLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGVsZW1lbnQgaW4gdGhpcyBzb3J0ZWQgbWFwLCBvciAtMSBpZiBpdCBkb2Vzbid0XG4gICAgLy8gZXhpc3QuXG4gICAgaW5kZXhPZih0KSB7XG4gICAgICAgIC8vIE51bWJlciBvZiBub2RlcyB0aGF0IHdlcmUgcHJ1bmVkIHdoZW4gZGVzY2VuZGluZyByaWdodFxuICAgICAgICBsZXQgZSA9IDAsIG4gPSB0aGlzLnJvb3Q7XG4gICAgICAgIGZvciAoOyFuLmlzRW1wdHkoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jb21wYXJhdG9yKHQsIG4ua2V5KTtcbiAgICAgICAgICAgIGlmICgwID09PSBzKSByZXR1cm4gZSArIG4ubGVmdC5zaXplO1xuICAgICAgICAgICAgcyA8IDAgPyBuID0gbi5sZWZ0IDogKFxuICAgICAgICAgICAgLy8gQ291bnQgYWxsIG5vZGVzIGxlZnQgb2YgdGhlIG5vZGUgcGx1cyB0aGUgbm9kZSBpdHNlbGZcbiAgICAgICAgICAgIGUgKz0gbi5sZWZ0LnNpemUgKyAxLCBuID0gbi5yaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gTm9kZSBub3QgZm91bmRcbiAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSB0b3RhbCBudW1iZXIgb2Ygbm9kZXMgaW4gdGhlIG1hcC5cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5zaXplO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5taW5LZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIG1hcC5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QubWF4S2V5KCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgbWFwIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlLCBuKSwgITEpKSk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodC5wdXNoKGAke2V9OiR7bn1gKSwgITEpKSksIGB7JHt0LmpvaW4oXCIsIFwiKX19YDtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2gga2V5L3ZhbHVlIHBhaXIuIElmIGFjdGlvbiByZXR1cm5zIHRydWUsIHRyYXZlcnNhbCBpc1xuICAgIC8vIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYW4gaXRlcmF0b3Igb3ZlciB0aGUgU29ydGVkTWFwLlxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IE9uKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMSk7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgT24odGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IE9uKHRoaXMucm9vdCwgbnVsbCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxuICAgIGdldFJldmVyc2VJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IE9uKHRoaXMucm9vdCwgdCwgdGhpcy5jb21wYXJhdG9yLCAhMCk7XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcFxuLy8gQW4gaXRlcmF0b3Igb3ZlciBhbiBMTFJCTm9kZS5cbmNsYXNzIE9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuaXNSZXZlcnNlID0gcywgdGhpcy5ub2RlU3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IGkgPSAxO1xuICAgICAgICBmb3IgKDshdC5pc0VtcHR5KCk7ICkgaWYgKGkgPSBlID8gbih0LmtleSwgZSkgOiAxLCBcbiAgICAgICAgLy8gZmxpcCB0aGUgY29tcGFyaXNvbiBpZiB3ZSdyZSBnb2luZyBpbiByZXZlcnNlXG4gICAgICAgIGUgJiYgcyAmJiAoaSAqPSAtMSksIGkgPCAwKSBcbiAgICAgICAgLy8gVGhpcyBub2RlIGlzIGxlc3MgdGhhbiBvdXIgc3RhcnQga2V5LiBpZ25vcmUgaXRcbiAgICAgICAgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5sZWZ0IDogdC5yaWdodDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgbm9kZSBpcyBleGFjdGx5IGVxdWFsIHRvIG91ciBzdGFydCBrZXkuIFB1c2ggaXQgb24gdGhlIHN0YWNrLFxuICAgICAgICAgICAgICAgIC8vIGJ1dCBzdG9wIGl0ZXJhdGluZztcbiAgICAgICAgICAgICAgICB0aGlzLm5vZGVTdGFjay5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGdyZWF0ZXIgdGhhbiBvdXIgc3RhcnQga2V5LCBhZGQgaXQgdG8gdGhlIHN0YWNrIGFuZCBtb3ZlXG4gICAgICAgICAgICAvLyB0byB0aGUgbmV4dCBvbmVcbiAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0aGlzLmlzUmV2ZXJzZSA/IHQucmlnaHQgOiB0LmxlZnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm5vZGVTdGFjay5wb3AoKTtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGtleTogdC5rZXksXG4gICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAodGhpcy5pc1JldmVyc2UpIGZvciAodCA9IHQubGVmdDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIHQgPSB0LnJpZ2h0OyBlbHNlIGZvciAodCA9IHQucmlnaHQ7ICF0LmlzRW1wdHkoKTsgKSB0aGlzLm5vZGVTdGFjay5wdXNoKHQpLCBcbiAgICAgICAgdCA9IHQubGVmdDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5vZGVTdGFjay5sZW5ndGggPiAwO1xuICAgIH1cbiAgICBwZWVrKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5ub2RlU3RhY2subGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubm9kZVN0YWNrW3RoaXMubm9kZVN0YWNrLmxlbmd0aCAtIDFdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4gLy8gZW5kIFNvcnRlZE1hcEl0ZXJhdG9yXG4vLyBSZXByZXNlbnRzIGEgbm9kZSBpbiBhIExlZnQtbGVhbmluZyBSZWQtQmxhY2sgdHJlZS5cbmNsYXNzIEZuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgdGhpcy52YWx1ZSA9IGUsIHRoaXMuY29sb3IgPSBudWxsICE9IG4gPyBuIDogRm4uUkVELCB0aGlzLmxlZnQgPSBudWxsICE9IHMgPyBzIDogRm4uRU1QVFksIFxuICAgICAgICB0aGlzLnJpZ2h0ID0gbnVsbCAhPSBpID8gaSA6IEZuLkVNUFRZLCB0aGlzLnNpemUgPSB0aGlzLmxlZnQuc2l6ZSArIDEgKyB0aGlzLnJpZ2h0LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUsIG9wdGlvbmFsbHkgcmVwbGFjaW5nIHBpZWNlcyBvZiBpdC5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBGbihudWxsICE9IHQgPyB0IDogdGhpcy5rZXksIG51bGwgIT0gZSA/IGUgOiB0aGlzLnZhbHVlLCBudWxsICE9IG4gPyBuIDogdGhpcy5jb2xvciwgbnVsbCAhPSBzID8gcyA6IHRoaXMubGVmdCwgbnVsbCAhPSBpID8gaSA6IHRoaXMucmlnaHQpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uIGZ1bmN0aW9uXG4gICAgLy8gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0Lmlub3JkZXJUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5yaWdodC5pbm9yZGVyVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIHRyZWUgaW4gcmV2ZXJzZSBrZXkgb3JkZXIgYW5kIGNhbGxzIHRoZSBzcGVjaWZpZWQgYWN0aW9uXG4gICAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggbm9kZS4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzIGFib3J0ZWQuXG4gICAgLy8gUmV0dXJucyB0aGUgZmlyc3QgdHJ1dGh5IHZhbHVlIHJldHVybmVkIGJ5IGFjdGlvbiwgb3IgdGhlIGxhc3QgZmFsc2V5XG4gICAgLy8gdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLlxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5yZXZlcnNlVHJhdmVyc2FsKHQpIHx8IHQodGhpcy5rZXksIHRoaXMudmFsdWUpIHx8IHRoaXMubGVmdC5yZXZlcnNlVHJhdmVyc2FsKHQpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtaW5pbXVtIG5vZGUgaW4gdGhlIHRyZWUuXG4gICAgbWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmlzRW1wdHkoKSA/IHRoaXMgOiB0aGlzLmxlZnQubWluKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWluKCkua2V5O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgdHJlZS5cbiAgICBtYXhLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LmlzRW1wdHkoKSA/IHRoaXMua2V5IDogdGhpcy5yaWdodC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gdGhpcztcbiAgICAgICAgY29uc3QgaSA9IG4odCwgcy5rZXkpO1xuICAgICAgICByZXR1cm4gcyA9IGkgPCAwID8gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5pbnNlcnQodCwgZSwgbiksIG51bGwpIDogMCA9PT0gaSA/IHMuY29weShudWxsLCBlLCBudWxsLCBudWxsLCBudWxsKSA6IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0Lmluc2VydCh0LCBlLCBuKSksIFxuICAgICAgICBzLmZpeFVwKCk7XG4gICAgfVxuICAgIHJlbW92ZU1pbigpIHtcbiAgICAgICAgaWYgKHRoaXMubGVmdC5pc0VtcHR5KCkpIHJldHVybiBGbi5FTVBUWTtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmlzUmVkKCkgfHwgdC5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAodCA9IHQubW92ZVJlZExlZnQoKSksIHQgPSB0LmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgdC5sZWZ0LnJlbW92ZU1pbigpLCBudWxsKSwgXG4gICAgICAgIHQuZml4VXAoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBuZXcgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGl0ZW0gcmVtb3ZlZC5cbiAgICByZW1vdmUodCwgZSkge1xuICAgICAgICBsZXQgbiwgcyA9IHRoaXM7XG4gICAgICAgIGlmIChlKHQsIHMua2V5KSA8IDApIHMubGVmdC5pc0VtcHR5KCkgfHwgcy5sZWZ0LmlzUmVkKCkgfHwgcy5sZWZ0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZExlZnQoKSksIFxuICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIHMubGVmdC5yZW1vdmUodCwgZSksIG51bGwpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChzLmxlZnQuaXNSZWQoKSAmJiAocyA9IHMucm90YXRlUmlnaHQoKSksIHMucmlnaHQuaXNFbXB0eSgpIHx8IHMucmlnaHQuaXNSZWQoKSB8fCBzLnJpZ2h0LmxlZnQuaXNSZWQoKSB8fCAocyA9IHMubW92ZVJlZFJpZ2h0KCkpLCBcbiAgICAgICAgICAgIDAgPT09IGUodCwgcy5rZXkpKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMucmlnaHQuaXNFbXB0eSgpKSByZXR1cm4gRm4uRU1QVFk7XG4gICAgICAgICAgICAgICAgbiA9IHMucmlnaHQubWluKCksIHMgPSBzLmNvcHkobi5rZXksIG4udmFsdWUsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlTWluKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcyA9IHMuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCBzLnJpZ2h0LnJlbW92ZSh0LCBlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHMuZml4VXAoKTtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbG9yO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlIGFmdGVyIHBlcmZvcm1pbmcgYW55IG5lZWRlZCByb3RhdGlvbnMuXG4gICAgZml4VXAoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIHQucmlnaHQuaXNSZWQoKSAmJiAhdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZUxlZnQoKSksIHQubGVmdC5pc1JlZCgpICYmIHQubGVmdC5sZWZ0LmlzUmVkKCkgJiYgKHQgPSB0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdC5sZWZ0LmlzUmVkKCkgJiYgdC5yaWdodC5pc1JlZCgpICYmICh0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRMZWZ0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LnJpZ2h0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCBudWxsLCB0LnJpZ2h0LnJvdGF0ZVJpZ2h0KCkpLCBcbiAgICAgICAgdCA9IHQucm90YXRlTGVmdCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIG1vdmVSZWRSaWdodCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLmNvbG9yRmxpcCgpO1xuICAgICAgICByZXR1cm4gdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSwgdCA9IHQuY29sb3JGbGlwKCkpLCB0O1xuICAgIH1cbiAgICByb3RhdGVMZWZ0KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5jb3B5KG51bGwsIG51bGwsIEZuLlJFRCwgbnVsbCwgdGhpcy5yaWdodC5sZWZ0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCB0LCBudWxsKTtcbiAgICB9XG4gICAgcm90YXRlUmlnaHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgRm4uUkVELCB0aGlzLmxlZnQucmlnaHQsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgdGhpcy5jb2xvciwgbnVsbCwgdCk7XG4gICAgfVxuICAgIGNvbG9yRmxpcCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jb3B5KG51bGwsIG51bGwsICF0aGlzLmxlZnQuY29sb3IsIG51bGwsIG51bGwpLCBlID0gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsICF0aGlzLnJpZ2h0LmNvbG9yLCBudWxsLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weShudWxsLCBudWxsLCAhdGhpcy5jb2xvciwgdCwgZSk7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNoZWNrKCk7XG4gICAgICAgIHJldHVybiBNYXRoLnBvdygyLCB0KSA8PSB0aGlzLnNpemUgKyAxO1xuICAgIH1cbiAgICAvLyBJbiBhIGJhbGFuY2VkIFJCIHRyZWUsIHRoZSBibGFjay1kZXB0aCAobnVtYmVyIG9mIGJsYWNrIG5vZGVzKSBmcm9tIHJvb3QgdG9cbiAgICAvLyBsZWF2ZXMgaXMgZXF1YWwgb24gYm90aCBzaWRlcy4gIFRoaXMgZnVuY3Rpb24gdmVyaWZpZXMgdGhhdCBvciBhc3NlcnRzLlxuICAgIGNoZWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc1JlZCgpICYmIHRoaXMubGVmdC5pc1JlZCgpKSB0aHJvdyBMKCk7XG4gICAgICAgIGlmICh0aGlzLnJpZ2h0LmlzUmVkKCkpIHRocm93IEwoKTtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMubGVmdC5jaGVjaygpO1xuICAgICAgICBpZiAodCAhPT0gdGhpcy5yaWdodC5jaGVjaygpKSB0aHJvdyBMKCk7XG4gICAgICAgIHJldHVybiB0ICsgKHRoaXMuaXNSZWQoKSA/IDAgOiAxKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgTExSQk5vZGVcbi8vIEVtcHR5IG5vZGUgaXMgc2hhcmVkIGJldHdlZW4gYWxsIExMUkIgdHJlZXMuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuRm4uRU1QVFkgPSBudWxsLCBGbi5SRUQgPSAhMCwgRm4uQkxBQ0sgPSAhMTtcblxuLy8gZW5kIExMUkJFbXB0eU5vZGVcbkZuLkVNUFRZID0gbmV3IFxuLy8gUmVwcmVzZW50cyBhbiBlbXB0eSBub2RlIChhIGxlYWYgbm9kZSBpbiB0aGUgUmVkLUJsYWNrIFRyZWUpLlxuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpemUgPSAwO1xuICAgIH1cbiAgICBnZXQga2V5KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBnZXQgY29sb3IoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICB0aHJvdyBMKCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBjdXJyZW50IG5vZGUuXG4gICAgY29weSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS92YWx1ZSBhZGRlZC5cbiAgICBpbnNlcnQodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IEZuKHQsIGUpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGEgY29weSBvZiB0aGUgdHJlZSwgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlub3JkZXJUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIHJldmVyc2VUcmF2ZXJzYWwodCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIG1pbktleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlzUmVkKCkge1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8vIEZvciB0ZXN0aW5nLlxuICAgIGNoZWNrTWF4RGVwdGgoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgY2hlY2soKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNvcnRlZFNldCBpcyBhbiBpbW11dGFibGUgKGNvcHktb24td3JpdGUpIGNvbGxlY3Rpb24gdGhhdCBob2xkcyBlbGVtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLlxuICpcbiAqIE5PVEU6IGlmIHByb3ZpZGVkIGNvbXBhcmF0b3IgcmV0dXJucyAwIGZvciB0d28gZWxlbWVudHMsIHdlIGNvbnNpZGVyIHRoZW0gdG9cbiAqIGJlIGVxdWFsIVxuICovXG5jbGFzcyAkbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0LCB0aGlzLmRhdGEgPSBuZXcgTW4odGhpcy5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZGF0YS5nZXQodCk7XG4gICAgfVxuICAgIGZpcnN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1pbktleSgpO1xuICAgIH1cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLm1heEtleSgpO1xuICAgIH1cbiAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5zaXplO1xuICAgIH1cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS5pbmRleE9mKHQpO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZWxlbWVudHMgaW4gb3JkZXIgZGVmaW5lZCBieSBcImNvbXBhcmF0b3JcIiAqLyAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhLmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBvdmVyIGBlbGVtYHMgc3VjaCB0aGF0OiByYW5nZVswXSAmbHQ7PSBlbGVtICZsdDsgcmFuZ2VbMV0uICovICAgIGZvckVhY2hJblJhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odFswXSk7XG4gICAgICAgIGZvciAoO24uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmdldE5leHQoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbXBhcmF0b3Iocy5rZXksIHRbMV0pID49IDApIHJldHVybjtcbiAgICAgICAgICAgIGUocy5rZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHN0YXJ0ICZsdDs9IGVsZW0gdW50aWwgZmFsc2UgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGZvckVhY2hXaGlsZSh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBmb3IgKG4gPSB2b2lkIDAgIT09IGUgPyB0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKGUpIDogdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCk7IG4uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmICghdChuLmdldE5leHQoKS5rZXkpKSByZXR1cm47XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqIEZpbmRzIHRoZSBsZWFzdCBlbGVtZW50IGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byBgZWxlbWAuICovICAgIGZpcnN0QWZ0ZXJPckVxdWFsKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCk7XG4gICAgICAgIHJldHVybiBlLmhhc05leHQoKSA/IGUuZ2V0TmV4dCgpLmtleSA6IG51bGw7XG4gICAgfVxuICAgIGdldEl0ZXJhdG9yKCkge1xuICAgICAgICByZXR1cm4gbmV3IEJuKHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbih0aGlzLmRhdGEuZ2V0SXRlcmF0b3JGcm9tKHQpKTtcbiAgICB9XG4gICAgLyoqIEluc2VydHMgb3IgdXBkYXRlcyBhbiBlbGVtZW50ICovICAgIGFkZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KS5pbnNlcnQodCwgITApKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgYW4gZWxlbWVudCAqLyAgICBkZWxldGUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXModCkgPyB0aGlzLmNvcHkodGhpcy5kYXRhLnJlbW92ZSh0KSkgOiB0aGlzO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgdW5pb25XaXRoKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzO1xuICAgICAgICAvLyBNYWtlIHN1cmUgYHJlc3VsdGAgYWx3YXlzIHJlZmVycyB0byB0aGUgbGFyZ2VyIG9uZSBvZiB0aGUgdHdvIHNldHMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuc2l6ZSA8IHQuc2l6ZSAmJiAoZSA9IHQsIHQgPSB0aGlzKSwgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUgPSBlLmFkZCh0KTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mICRuKSkgcmV0dXJuICExO1xuICAgICAgICBpZiAodGhpcy5zaXplICE9PSB0LnNpemUpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGF0YS5nZXRJdGVyYXRvcigpLCBuID0gdC5kYXRhLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO2UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmdldE5leHQoKS5rZXksIHMgPSBuLmdldE5leHQoKS5rZXk7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdGhpcy5jb21wYXJhdG9yKHQsIHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5wdXNoKGUpO1xuICAgICAgICB9KSksIHQ7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUpKSksIFwiU29ydGVkU2V0KFwiICsgdC50b1N0cmluZygpICsgXCIpXCI7XG4gICAgfVxuICAgIGNvcHkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3ICRuKHRoaXMuY29tcGFyYXRvcik7XG4gICAgICAgIHJldHVybiBlLmRhdGEgPSB0LCBlO1xuICAgIH1cbn1cblxuY2xhc3MgQm4ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5pdGVyID0gdDtcbiAgICB9XG4gICAgZ2V0TmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXRlci5nZXROZXh0KCkua2V5O1xuICAgIH1cbiAgICBoYXNOZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmhhc05leHQoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHNvcnRlZCBzZXRzIGZvciBlcXVhbGl0eSB1c2luZyB0aGVpciBuYXR1cmFsIG9yZGVyaW5nLiBUaGVcbiAqIG1ldGhvZCBjb21wdXRlcyB0aGUgaW50ZXJzZWN0aW9uIGFuZCBpbnZva2VzIGBvbkFkZGAgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdFxuICogaXMgaW4gYGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLiBgb25SZW1vdmVgIGlzIGludm9rZWQgZm9yIGV2ZXJ5IGVsZW1lbnQgaW5cbiAqIGBiZWZvcmVgIGJ1dCBtaXNzaW5nIGZyb20gYGFmdGVyYC5cbiAqXG4gKiBUaGUgbWV0aG9kIGNyZWF0ZXMgYSBjb3B5IG9mIGJvdGggYGJlZm9yZWAgYW5kIGBhZnRlcmAgYW5kIHJ1bnMgaW4gTyhuIGxvZ1xuICogbiksIHdoZXJlIG4gaXMgdGhlIHNpemUgb2YgdGhlIHR3byBsaXN0cy5cbiAqXG4gKiBAcGFyYW0gYmVmb3JlIC0gVGhlIGVsZW1lbnRzIHRoYXQgZXhpc3QgaW4gdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBhZnRlciAtIFRoZSBlbGVtZW50cyB0byBkaWZmIGFnYWluc3QgdGhlIG9yaWdpbmFsIHNldC5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbmV4dCBlbGVtZW50IGZyb20gdGhlIGl0ZXJhdG9yIG9yIGB1bmRlZmluZWRgIGlmIG5vbmUgYXZhaWxhYmxlLlxuICovXG5mdW5jdGlvbiBMbih0KSB7XG4gICAgcmV0dXJuIHQuaGFzTmV4dCgpID8gdC5nZXROZXh0KCkgOiB2b2lkIDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFVuID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBxbigpIHtcbiAgICByZXR1cm4gVW47XG59XG5cbmNvbnN0IEduID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiBLbigpIHtcbiAgICByZXR1cm4gR247XG59XG5cbmZ1bmN0aW9uIFFuKCkge1xuICAgIHJldHVybiBuZXcga24oKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbn1cblxuY29uc3Qgam4gPSBuZXcgTW4oeHQuY29tcGFyYXRvcik7XG5cbmNvbnN0IFduID0gbmV3ICRuKHh0LmNvbXBhcmF0b3IpO1xuXG5mdW5jdGlvbiB6biguLi50KSB7XG4gICAgbGV0IGUgPSBXbjtcbiAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUuYWRkKG4pO1xuICAgIHJldHVybiBlO1xufVxuXG5jb25zdCBIbiA9IG5ldyAkbihydCk7XG5cbmZ1bmN0aW9uIEpuKCkge1xuICAgIHJldHVybiBIbjtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQW4gZXZlbnQgZnJvbSB0aGUgUmVtb3RlU3RvcmUuIEl0IGlzIHNwbGl0IGludG8gdGFyZ2V0Q2hhbmdlcyAoY2hhbmdlcyB0byB0aGVcbiAqIHN0YXRlIG9yIHRoZSBzZXQgb2YgZG9jdW1lbnRzIGluIG91ciB3YXRjaGVkIHRhcmdldHMpIGFuZCBkb2N1bWVudFVwZGF0ZXNcbiAqIChjaGFuZ2VzIHRvIHRoZSBhY3R1YWwgZG9jdW1lbnRzKS5cbiAqLyBjbGFzcyBZbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHNuYXBzaG90IHZlcnNpb24gdGhpcyBldmVudCBicmluZ3MgdXMgdXAgdG8sIG9yIE1JTiBpZiBub3Qgc2V0LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIEEgbWFwIGZyb20gdGFyZ2V0IHRvIGNoYW5nZXMgdG8gdGhlIHRhcmdldC4gU2VlIFRhcmdldENoYW5nZS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB0YXJnZXRzIHRoYXQgaXMga25vd24gdG8gYmUgaW5jb25zaXN0ZW50LiBMaXN0ZW5zIGZvciB0aGVzZVxuICAgICAqIHRhcmdldHMgc2hvdWxkIGJlIHJlLWVzdGFibGlzaGVkIHdpdGhvdXQgcmVzdW1lIHRva2Vucy5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBBIHNldCBvZiB3aGljaCBkb2N1bWVudHMgaGF2ZSBjaGFuZ2VkIG9yIGJlZW4gZGVsZXRlZCwgYWxvbmcgd2l0aCB0aGVcbiAgICAgKiBkb2MncyBuZXcgdmFsdWVzIChpZiBub3QgZGVsZXRlZCkuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnQgdXBkYXRlcyBhcmUgZHVlIG9ubHkgdG8gbGltYm8gcmVzb2x1dGlvbiB0YXJnZXRzLlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSB0LCB0aGlzLnRhcmdldENoYW5nZXMgPSBlLCB0aGlzLnRhcmdldE1pc21hdGNoZXMgPSBuLCB0aGlzLmRvY3VtZW50VXBkYXRlcyA9IHMsIFxuICAgICAgICB0aGlzLnJlc29sdmVkTGltYm9Eb2N1bWVudHMgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIQUNLOiBWaWV3cyByZXF1aXJlIFJlbW90ZUV2ZW50cyBpbiBvcmRlciB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgdmlldyBpc1xuICAgICAqIENVUlJFTlQsIGJ1dCBzZWNvbmRhcnkgdGFicyBkb24ndCByZWNlaXZlIHJlbW90ZSBldmVudHMuIFNvIHRoaXMgbWV0aG9kIGlzXG4gICAgICogdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBSZW1vdGVFdmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGFwcGx5IGFcbiAgICAgKiBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3LCBmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudCB0YWIuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seVxuICAgIHN0YXRpYyBjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gbi5zZXQodCwgWG4uY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUpKSwgbmV3IFluKGN0Lm1pbigpLCBuLCBKbigpLCBxbigpLCB6bigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBUYXJnZXRDaGFuZ2Ugc3BlY2lmaWVzIHRoZSBzZXQgb2YgY2hhbmdlcyBmb3IgYSBzcGVjaWZpYyB0YXJnZXQgYXMgcGFydCBvZlxuICogYSBSZW1vdGVFdmVudC4gVGhlc2UgY2hhbmdlcyB0cmFjayB3aGljaCBkb2N1bWVudHMgYXJlIGFkZGVkLCBtb2RpZmllZCBvclxuICogcmVtb3ZlZCwgYXMgd2VsbCBhcyB0aGUgdGFyZ2V0J3MgcmVzdW1lIHRva2VuIGFuZCB3aGV0aGVyIHRoZSB0YXJnZXQgaXNcbiAqIG1hcmtlZCBDVVJSRU5ULlxuICogVGhlIGFjdHVhbCBjaGFuZ2VzICp0byogZG9jdW1lbnRzIGFyZSBub3QgcGFydCBvZiB0aGUgVGFyZ2V0Q2hhbmdlIHNpbmNlXG4gKiBkb2N1bWVudHMgbWF5IGJlIHBhcnQgb2YgbXVsdGlwbGUgdGFyZ2V0cy5cbiAqLyBjbGFzcyBYbiB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSBxdWVyeSB0byBiZSByZXN1bWVkXG4gICAgICogYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0IG1hdGNoZXMgdGhlXG4gICAgICogcXVlcnkuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluIHRpbWUgZnJvbSB3aGljaFxuICAgICAqIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIFwiY3VycmVudFwiIChzeW5jZWQpIHN0YXR1cyBvZiB0aGlzIHRhcmdldC4gTm90ZSB0aGF0IFwiY3VycmVudFwiXG4gICAgICogaGFzIHNwZWNpYWwgbWVhbmluZyBpbiB0aGUgUlBDIHByb3RvY29sIHRoYXQgaW1wbGllcyB0aGF0IGEgdGFyZ2V0IGlzXG4gICAgICogYm90aCB1cC10by1kYXRlIGFuZCBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoIHN0cmVhbS5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgbmV3bHkgYXNzaWduZWQgdG8gdGhpcyB0YXJnZXQgYXMgcGFydCBvZlxuICAgICAqIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSBhbHJlYWR5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGJ1dCByZWNlaXZlZFxuICAgICAqIGFuIHVwZGF0ZSBkdXJpbmcgdGhpcyByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGlzIHRhcmdldCBhcyBwYXJ0IG9mIHRoaXNcbiAgICAgKiByZW1vdGUgZXZlbnQuXG4gICAgICovXG4gICAgaSkge1xuICAgICAgICB0aGlzLnJlc3VtZVRva2VuID0gdCwgdGhpcy5jdXJyZW50ID0gZSwgdGhpcy5hZGRlZERvY3VtZW50cyA9IG4sIHRoaXMubW9kaWZpZWREb2N1bWVudHMgPSBzLCBcbiAgICAgICAgdGhpcy5yZW1vdmVkRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBtZXRob2QgaXMgdXNlZCB0byBjcmVhdGUgYSBzeW50aGVzaXplZCBUYXJnZXRDaGFuZ2VzIHRoYXQgY2FuIGJlIHVzZWQgdG9cbiAgICAgKiBhcHBseSBhIENVUlJFTlQgc3RhdHVzIGNoYW5nZSB0byBhIFZpZXcgKGZvciBxdWVyaWVzIGV4ZWN1dGVkIGluIGEgZGlmZmVyZW50XG4gICAgICogdGFiKSBvciBmb3IgbmV3IHF1ZXJpZXMgKHRvIHJhaXNlIHNuYXBzaG90cyB3aXRoIGNvcnJlY3QgQ1VSUkVOVCBzdGF0dXMpLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBYbihwdC5FTVBUWV9CWVRFX1NUUklORywgZSwgem4oKSwgem4oKSwgem4oKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhbmdlZCBkb2N1bWVudCBhbmQgYSBsaXN0IG9mIHRhcmdldCBpZHMgdG8gd2hpY2ggdGhpcyBjaGFuZ2VcbiAqIGFwcGxpZXMuXG4gKlxuICogSWYgZG9jdW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBOb0RvY3VtZW50IHdpbGwgYmUgcHJvdmlkZWQuXG4gKi8gY2xhc3MgWm4ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGFwcGxpZXMgdG8gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCBmb3IgdGhpcyBjaGFuZ2UuICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIG5ldyBkb2N1bWVudCBvciBOb0RvY3VtZW50IGlmIGl0IHdhcyBkZWxldGVkLiBJcyBudWxsIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IHdlbnQgb3V0IG9mIHZpZXcgd2l0aG91dCB0aGUgc2VydmVyIHNlbmRpbmcgYSBuZXcgZG9jdW1lbnQuXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLk8gPSB0LCB0aGlzLnJlbW92ZWRUYXJnZXRJZHMgPSBlLCB0aGlzLmtleSA9IG4sIHRoaXMuRiA9IHM7XG4gICAgfVxufVxuXG5jbGFzcyB0cyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy4kID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIGVzIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogV2hhdCBraW5kIG9mIGNoYW5nZSBvY2N1cnJlZCB0byB0aGUgd2F0Y2ggdGFyZ2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgdGFyZ2V0IElEcyB0aGF0IHdlcmUgYWRkZWQvcmVtb3ZlZC9zZXQuICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuID0gcHQuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIHRoaXMudGFyZ2V0SWRzID0gZSwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSBzO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIG5zIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgKGFkZHMgb3IgcmVtb3ZlcykgdGhhdCB3ZSBhcmUgd2FpdGluZyBvbi5cbiAgICAgICAgICogV2Ugb25seSBjb25zaWRlciB0YXJnZXRzIGFjdGl2ZSB0aGF0IGhhdmUgbm8gcGVuZGluZyByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkIgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudCBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlc2UgY2hhbmdlcyBhcmUgY29udGludW91c2x5IHVwZGF0ZWQgYXMgd2UgcmVjZWl2ZSBkb2N1bWVudCB1cGRhdGVzIGFuZFxuICAgICAgICAgKiBhbHdheXMgcmVmbGVjdCB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcyBhZ2FpbnN0IHRoZSBsYXN0IGlzc3VlZCBzbmFwc2hvdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTCA9IHJzKCksIFxuICAgICAgICAvKiogU2VlIHB1YmxpYyBnZXR0ZXJzIGZvciBleHBsYW5hdGlvbnMgb2YgdGhlc2UgZmllbGRzLiAqL1xuICAgICAgICB0aGlzLlUgPSBwdC5FTVBUWV9CWVRFX1NUUklORywgdGhpcy5xID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciB0aGlzIHRhcmdldCBzdGF0ZSBzaG91bGQgYmUgaW5jbHVkZWQgaW4gdGhlIG5leHQgc25hcHNob3QuIFdlXG4gICAgICAgICAqIGluaXRpYWxpemUgdG8gdHJ1ZSBzbyB0aGF0IG5ld2x5LWFkZGVkIHRhcmdldHMgYXJlIGluY2x1ZGVkIGluIHRoZSBuZXh0XG4gICAgICAgICAqIFJlbW90ZUV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5HID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIGJlZW4gbWFya2VkICdjdXJyZW50Jy5cbiAgICAgKlxuICAgICAqICdDdXJyZW50JyBoYXMgc3BlY2lhbCBtZWFuaW5nIGluIHRoZSBSUEMgcHJvdG9jb2w6IEl0IGltcGxpZXMgdGhhdCB0aGVcbiAgICAgKiBXYXRjaCBiYWNrZW5kIGhhcyBzZW50IHVzIGFsbCBjaGFuZ2VzIHVwIHRvIHRoZSBwb2ludCBhdCB3aGljaCB0aGUgdGFyZ2V0XG4gICAgICogd2FzIGFkZGVkIGFuZCB0aGF0IHRoZSB0YXJnZXQgaXMgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbS5cbiAgICAgKi8gICAgZ2V0IGN1cnJlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnE7XG4gICAgfVxuICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovICAgIGdldCByZXN1bWVUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuVTtcbiAgICB9XG4gICAgLyoqIFdoZXRoZXIgdGhpcyB0YXJnZXQgaGFzIHBlbmRpbmcgdGFyZ2V0IGFkZHMgb3IgdGFyZ2V0IHJlbW92ZXMuICovICAgIGdldCBLKCkge1xuICAgICAgICByZXR1cm4gMCAhPT0gdGhpcy5CO1xuICAgIH1cbiAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovICAgIGdldCBqKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5HO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSByZXN1bWUgdG9rZW4gdG8gdGhlIFRhcmdldENoYW5nZSwgYnV0IG9ubHkgd2hlbiBpdCBoYXMgYSBuZXdcbiAgICAgKiB2YWx1ZS4gRW1wdHkgcmVzdW1lVG9rZW5zIGFyZSBkaXNjYXJkZWQuXG4gICAgICovICAgIFcodCkge1xuICAgICAgICB0LmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHRoaXMuRyA9ICEwLCB0aGlzLlUgPSB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHRhcmdldCBjaGFuZ2UgZnJvbSB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIFRvIHJlc2V0IHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFmdGVyIHJhaXNpbmcgdGhpcyBzbmFwc2hvdCwgY2FsbFxuICAgICAqIGBjbGVhclBlbmRpbmdDaGFuZ2VzKClgLlxuICAgICAqLyAgICBIKCkge1xuICAgICAgICBsZXQgdCA9IHpuKCksIGUgPSB6bigpLCBuID0gem4oKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuTC5mb3JFYWNoKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgc3dpdGNoIChpKSB7XG4gICAgICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgdCA9IHQuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBNb2RpZmllZCAqLyA6XG4gICAgICAgICAgICAgICAgZSA9IGUuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBMKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgbmV3IFhuKHRoaXMuVSwgdGhpcy5xLCB0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIEooKSB7XG4gICAgICAgIHRoaXMuRyA9ICExLCB0aGlzLkwgPSBycygpO1xuICAgIH1cbiAgICBZKHQsIGUpIHtcbiAgICAgICAgdGhpcy5HID0gITAsIHRoaXMuTCA9IHRoaXMuTC5pbnNlcnQodCwgZSk7XG4gICAgfVxuICAgIFgodCkge1xuICAgICAgICB0aGlzLkcgPSAhMCwgdGhpcy5MID0gdGhpcy5MLnJlbW92ZSh0KTtcbiAgICB9XG4gICAgWigpIHtcbiAgICAgICAgdGhpcy5CICs9IDE7XG4gICAgfVxuICAgIHR0KCkge1xuICAgICAgICB0aGlzLkIgLT0gMTtcbiAgICB9XG4gICAgZXQoKSB7XG4gICAgICAgIHRoaXMuRyA9ICEwLCB0aGlzLnEgPSAhMDtcbiAgICB9XG59XG5cbi8qKlxuICogQSBoZWxwZXIgY2xhc3MgdG8gYWNjdW11bGF0ZSB3YXRjaCBjaGFuZ2VzIGludG8gYSBSZW1vdGVFdmVudC5cbiAqL1xuY2xhc3Mgc3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5udCA9IHQsIFxuICAgICAgICAvKiogVGhlIGludGVybmFsIHN0YXRlIG9mIGFsbCB0cmFja2VkIHRhcmdldHMuICovXG4gICAgICAgIHRoaXMuc3QgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqIEtlZXBzIHRyYWNrIG9mIHRoZSBkb2N1bWVudHMgdG8gdXBkYXRlIHNpbmNlIHRoZSBsYXN0IHJhaXNlZCBzbmFwc2hvdC4gKi9cbiAgICAgICAgdGhpcy5pdCA9IHFuKCksIFxuICAgICAgICAvKiogQSBtYXBwaW5nIG9mIGRvY3VtZW50IGtleXMgdG8gdGhlaXIgc2V0IG9mIHRhcmdldCBJRHMuICovXG4gICAgICAgIHRoaXMucnQgPSBpcygpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB0YXJnZXRzIHdpdGggZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLiBUaGVzZSB0YXJnZXRzIGFyZVxuICAgICAgICAgKiBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQgYW5kIHRoZWlyIGxpc3RlbnMgbmVlZHMgdG8gYmUgcmUtZXN0YWJsaXNoZWQgYnlcbiAgICAgICAgICogUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm90ID0gbmV3ICRuKHJ0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICB1dCh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0Lk8pIHQuRiAmJiB0LkYuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLmF0KGUsIHQuRikgOiB0aGlzLmN0KGUsIHQua2V5LCB0LkYpO1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5yZW1vdmVkVGFyZ2V0SWRzKSB0aGlzLmN0KGUsIHQua2V5LCB0LkYpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgaHQodCkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQodCwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMubHQoZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHQuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIE5vQ2hhbmdlICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmZ0KGUpICYmIG4uVyh0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogQWRkZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gZGVjcmVtZW50IHRoZSBudW1iZXIgb2YgcGVuZGluZyBhY2tzIG5lZWRlZCBmcm9tIHdhdGNoXG4gICAgICAgICAgICAgICAgLy8gZm9yIHRoaXMgdGFyZ2V0SWQuXG4gICAgICAgICAgICAgICAgbi50dCgpLCBuLksgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi5KKCksIG4uVyh0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDIgLyogUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHJlbW92ZWQgdGFyZ2V0cyB0byB3ZSBjYW4gcG9zdC1maWx0ZXIgYW5kXG4gICAgICAgICAgICAgICAgLy8gcmVtb3ZlIGFueSB0YXJnZXQgY2hhbmdlcy5cbiAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIHRvIGRlY3JlbWVudCB0aGUgbnVtYmVyIG9mIHBlbmRpbmcgYWNrcyBuZWVkZWQgZnJvbSB3YXRjaFxuICAgICAgICAgICAgICAgIC8vIGZvciB0aGlzIHRhcmdldElkLlxuICAgICAgICAgICAgICAgIG4udHQoKSwgbi5LIHx8IHRoaXMucmVtb3ZlVGFyZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMyAvKiBDdXJyZW50ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmZ0KGUpICYmIChuLmV0KCksIG4uVyh0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSA0IC8qIFJlc2V0ICovIDpcbiAgICAgICAgICAgICAgICB0aGlzLmZ0KGUpICYmIChcbiAgICAgICAgICAgICAgICAvLyBSZXNldCB0aGUgdGFyZ2V0IGFuZCBzeW50aGVzaXplcyByZW1vdmVzIGZvciBhbGwgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMuIFRoZSBiYWNrZW5kIHdpbGwgcmUtYWRkIGFueSBkb2N1bWVudHMgdGhhdCBzdGlsbFxuICAgICAgICAgICAgICAgIC8vIG1hdGNoIHRoZSB0YXJnZXQgYmVmb3JlIGl0IHNlbmRzIHRoZSBuZXh0IGdsb2JhbCBzbmFwc2hvdC5cbiAgICAgICAgICAgICAgICB0aGlzLmR0KGUpLCBuLlcodC5yZXN1bWVUb2tlbikpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZXJhdGVzIG92ZXIgYWxsIHRhcmdldElkcyB0aGF0IHRoZSB3YXRjaCBjaGFuZ2UgYXBwbGllcyB0bzogZWl0aGVyIHRoZVxuICAgICAqIHRhcmdldElkcyBleHBsaWNpdGx5IGxpc3RlZCBpbiB0aGUgY2hhbmdlIG9yIHRoZSB0YXJnZXRJZHMgb2YgYWxsIGN1cnJlbnRseVxuICAgICAqIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdC50YXJnZXRJZHMubGVuZ3RoID4gMCA/IHQudGFyZ2V0SWRzLmZvckVhY2goZSkgOiB0aGlzLnN0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZ0KG4pICYmIGUobik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBleGlzdGVuY2UgZmlsdGVycyBhbmQgc3ludGhlc2l6ZXMgZGVsZXRlcyBmb3IgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICogVGFyZ2V0cyB0aGF0IGFyZSBpbnZhbGlkYXRlZCBieSBmaWx0ZXIgbWlzbWF0Y2hlcyBhcmUgYWRkZWQgdG9cbiAgICAgKiBgcGVuZGluZ1RhcmdldFJlc2V0c2AuXG4gICAgICovICAgIF90KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQsIG4gPSB0LiQuY291bnQsIHMgPSB0aGlzLnd0KGUpO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMudGFyZ2V0O1xuICAgICAgICAgICAgaWYgKHdlKHQpKSBpZiAoMCA9PT0gbikge1xuICAgICAgICAgICAgICAgIC8vIFRoZSBleGlzdGVuY2UgZmlsdGVyIHRvbGQgdXMgdGhlIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0LiBXZSBkZWR1Y2VcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHRoaXMgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3QgYW5kIGFwcGx5IGEgZGVsZXRlZCBkb2N1bWVudCB0b1xuICAgICAgICAgICAgICAgIC8vIG91ciB1cGRhdGVzLiBXaXRob3V0IGFwcGx5aW5nIHRoaXMgZGVsZXRlZCBkb2N1bWVudCB0aGVyZSBtaWdodCBiZVxuICAgICAgICAgICAgICAgIC8vIGFub3RoZXIgcXVlcnkgdGhhdCB3aWxsIHJhaXNlIHRoaXMgZG9jdW1lbnQgYXMgcGFydCBvZiBhIHNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gdW50aWwgaXQgaXMgcmVzb2x2ZWQsIGVzc2VudGlhbGx5IGV4cG9zaW5nIGluY29uc2lzdGVuY3kgYmV0d2VlblxuICAgICAgICAgICAgICAgIC8vIHF1ZXJpZXMuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyB4dCh0LnBhdGgpO1xuICAgICAgICAgICAgICAgIHRoaXMuY3QoZSwgbiwgdGUubmV3Tm9Eb2N1bWVudChuLCBjdC5taW4oKSkpO1xuICAgICAgICAgICAgfSBlbHNlIFUoMSA9PT0gbik7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZ3QoZSkgIT09IG4gJiYgKFxuICAgICAgICAgICAgICAgIC8vIEV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2g6IFdlIHJlc2V0IHRoZSBtYXBwaW5nIGFuZCByYWlzZSBhIG5ld1xuICAgICAgICAgICAgICAgIC8vIHNuYXBzaG90IHdpdGggYGlzRnJvbUNhY2hlOnRydWVgLlxuICAgICAgICAgICAgICAgIHRoaXMuZHQoZSksIHRoaXMub3QgPSB0aGlzLm90LmFkZChlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udmVydHMgdGhlIGN1cnJlbnRseSBhY2N1bXVsYXRlZCBzdGF0ZSBpbnRvIGEgcmVtb3RlIGV2ZW50IGF0IHRoZVxuICAgICAqIHByb3ZpZGVkIHNuYXBzaG90IHZlcnNpb24uIFJlc2V0cyB0aGUgYWNjdW11bGF0ZWQgY2hhbmdlcyBiZWZvcmUgcmV0dXJuaW5nLlxuICAgICAqLyAgICB5dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLnN0LmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy53dChzKTtcbiAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgaWYgKG4uY3VycmVudCAmJiB3ZShpLnRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9jdW1lbnQgcXVlcmllcyBmb3IgZG9jdW1lbnQgdGhhdCBkb24ndCBleGlzdCBjYW4gcHJvZHVjZSBhbiBlbXB0eVxuICAgICAgICAgICAgICAgICAgICAvLyByZXN1bHQgc2V0LiBUbyB1cGRhdGUgb3VyIGxvY2FsIGNhY2hlLCB3ZSBzeW50aGVzaXplIGEgZG9jdW1lbnRcbiAgICAgICAgICAgICAgICAgICAgLy8gZGVsZXRlIGlmIHdlIGhhdmUgbm90IHByZXZpb3VzbHkgcmVjZWl2ZWQgdGhlIGRvY3VtZW50LiBUaGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc29sdmVzIHRoZSBsaW1ibyBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQsIHJlbW92aW5nIGl0IGZyb21cbiAgICAgICAgICAgICAgICAgICAgLy8gbGltYm9Eb2N1bWVudFJlZnMuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogSWRlYWxseSB3ZSB3b3VsZCBoYXZlIGFuIGV4cGxpY2l0IGxvb2t1cCB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgLy8gaW5zdGVhZCByZXN1bHRpbmcgaW4gYW4gZXhwbGljaXQgZGVsZXRlIG1lc3NhZ2UgYW5kIHdlIGNvdWxkXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbW92ZSB0aGlzIHNwZWNpYWwgbG9naWMuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgeHQoaS50YXJnZXQucGF0aCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHRoaXMuaXQuZ2V0KGUpIHx8IHRoaXMuSXQocywgZSkgfHwgdGhpcy5jdChzLCBlLCB0ZS5uZXdOb0RvY3VtZW50KGUsIHQpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbi5qICYmIChlLnNldChzLCBuLkgoKSksIG4uSigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgbiA9IHpuKCk7XG4gICAgICAgIC8vIFdlIGV4dHJhY3QgdGhlIHNldCBvZiBsaW1iby1vbmx5IGRvY3VtZW50IHVwZGF0ZXMgYXMgdGhlIEdDIGxvZ2ljXG4gICAgICAgIC8vIHNwZWNpYWwtY2FzZXMgZG9jdW1lbnRzIHRoYXQgZG8gbm90IGFwcGVhciBpbiB0aGUgdGFyZ2V0IGNhY2hlLlxuICAgICAgICBcbiAgICAgICAgLy8gVE9ETyhnc29sdGlzKTogRXhwYW5kIG9uIHRoaXMgY29tbWVudCBvbmNlIEdDIGlzIGF2YWlsYWJsZSBpbiB0aGUgSlNcbiAgICAgICAgLy8gY2xpZW50LlxuICAgICAgICAgICAgICAgIHRoaXMucnQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICBlLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMud3QodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuICFlIHx8IDIgLyogTGltYm9SZXNvbHV0aW9uICovID09PSBlLnB1cnBvc2UgfHwgKHMgPSAhMSwgITEpO1xuICAgICAgICAgICAgfSkpLCBzICYmIChuID0gbi5hZGQodCkpO1xuICAgICAgICB9KSksIHRoaXMuaXQuZm9yRWFjaCgoKGUsIG4pID0+IG4uc2V0UmVhZFRpbWUodCkpKTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBZbih0LCBlLCB0aGlzLm90LCB0aGlzLml0LCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXQgPSBxbigpLCB0aGlzLnJ0ID0gaXMoKSwgdGhpcy5vdCA9IG5ldyAkbihydCksIHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IHRvIHRoZSBpbnRlcm5hbCBsaXN0IG9mIGRvY3VtZW50IHVwZGF0ZXMgYW5kXG4gICAgICogaXRzIGRvY3VtZW50IGtleSB0byB0aGUgZ2l2ZW4gdGFyZ2V0J3MgbWFwcGluZy5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGF0KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZ0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkl0KHQsIGUua2V5KSA/IDIgLyogTW9kaWZpZWQgKi8gOiAwIC8qIEFkZGVkICovO1xuICAgICAgICB0aGlzLmx0KHQpLlkoZS5rZXksIG4pLCB0aGlzLml0ID0gdGhpcy5pdC5pbnNlcnQoZS5rZXksIGUpLCB0aGlzLnJ0ID0gdGhpcy5ydC5pbnNlcnQoZS5rZXksIHRoaXMuVHQoZS5rZXkpLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGZyb20gdGhlIHRhcmdldCBtYXBwaW5nLiBJZiB0aGVcbiAgICAgKiBkb2N1bWVudCBubyBsb25nZXIgbWF0Y2hlcyB0aGUgdGFyZ2V0LCBidXQgdGhlIGRvY3VtZW50J3Mgc3RhdGUgaXMgc3RpbGxcbiAgICAgKiBrbm93biAoZS5nLiB3ZSBrbm93IHRoYXQgdGhlIGRvY3VtZW50IHdhcyBkZWxldGVkIG9yIHdlIHJlY2VpdmVkIHRoZSBjaGFuZ2VcbiAgICAgKiB0aGF0IGNhdXNlZCB0aGUgZmlsdGVyIG1pc21hdGNoKSwgdGhlIG5ldyBkb2N1bWVudCBjYW4gYmUgcHJvdmlkZWRcbiAgICAgKiB0byB1cGRhdGUgdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZS5cbiAgICAgKi9cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICAgIGN0KHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKCF0aGlzLmZ0KHQpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmx0KHQpO1xuICAgICAgICB0aGlzLkl0KHQsIGUpID8gcy5ZKGUsIDEgLyogUmVtb3ZlZCAqLykgOiBcbiAgICAgICAgLy8gVGhlIGRvY3VtZW50IG1heSBoYXZlIGVudGVyZWQgYW5kIGxlZnQgdGhlIHRhcmdldCBiZWZvcmUgd2UgcmFpc2VkIGFcbiAgICAgICAgLy8gc25hcHNob3QsIHNvIHdlIGNhbiBqdXN0IGlnbm9yZSB0aGUgY2hhbmdlLlxuICAgICAgICBzLlgoZSksIHRoaXMucnQgPSB0aGlzLnJ0Lmluc2VydChlLCB0aGlzLlR0KGUpLmRlbGV0ZSh0KSksIG4gJiYgKHRoaXMuaXQgPSB0aGlzLml0Lmluc2VydChlLCBuKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuc3QuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBjdXJyZW50IGNvdW50IG9mIGRvY3VtZW50cyBpbiB0aGUgdGFyZ2V0LiBUaGlzIGluY2x1ZGVzIGJvdGhcbiAgICAgKiB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0aGF0IHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0byBiZSBwYXJ0IG9mIHRoZVxuICAgICAqIHRhcmdldCBhcyB3ZWxsIGFzIGFueSBhY2N1bXVsYXRlZCBjaGFuZ2VzLlxuICAgICAqLyAgICBndCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmx0KHQpLkgoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMubnQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplICsgZS5hZGRlZERvY3VtZW50cy5zaXplIC0gZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBaKHQpIHtcbiAgICAgICAgdGhpcy5sdCh0KS5aKCk7XG4gICAgfVxuICAgIGx0KHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnN0LmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKGUgPSBuZXcgbnMsIHRoaXMuc3Quc2V0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgVHQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMucnQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyAkbihydCksIHRoaXMucnQgPSB0aGlzLnJ0Lmluc2VydCh0LCBlKSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIHVzZXIgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldCAoYnkgY2FsbGluZ1xuICAgICAqIGBnZXRUYXJnZXREYXRhRm9yVGFyZ2V0KClgKSBhbmQgdGhhdCB3ZSBhcmUgbm90IHdhaXRpbmcgZm9yIHBlbmRpbmcgQUREc1xuICAgICAqIGZyb20gd2F0Y2guXG4gICAgICovICAgIGZ0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG51bGwgIT09IHRoaXMud3QodCk7XG4gICAgICAgIHJldHVybiBlIHx8IE8oXCJXYXRjaENoYW5nZUFnZ3JlZ2F0b3JcIiwgXCJEZXRlY3RlZCBpbmFjdGl2ZSB0YXJnZXRcIiwgdCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIFRhcmdldERhdGEgZm9yIGFuIGFjdGl2ZSB0YXJnZXQgKGkuZS4gYSB0YXJnZXQgdGhhdCB0aGUgdXNlclxuICAgICAqIGlzIHN0aWxsIGludGVyZXN0ZWQgaW4gdGhhdCBoYXMgbm8gb3V0c3RhbmRpbmcgdGFyZ2V0IGNoYW5nZSByZXF1ZXN0cykuXG4gICAgICovICAgIHd0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3QuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSAmJiBlLksgPyBudWxsIDogdGhpcy5udC5FdCh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBkdCh0KSB7XG4gICAgICAgIHRoaXMuc3Quc2V0KHQsIG5ldyBucyk7XG4gICAgICAgIHRoaXMubnQuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuY3QodCwgZSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBJdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm50LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuaGFzKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaXMoKSB7XG4gICAgcmV0dXJuIG5ldyBNbih4dC5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gcnMoKSB7XG4gICAgcmV0dXJuIG5ldyBNbih4dC5jb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3Qgb3MgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgdXMgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCk7XG5cbi8qKlxuICogVGhpcyBjbGFzcyBnZW5lcmF0ZXMgSnNvbk9iamVjdCB2YWx1ZXMgZm9yIHRoZSBEYXRhc3RvcmUgQVBJIHN1aXRhYmxlIGZvclxuICogc2VuZGluZyB0byBlaXRoZXIgR1JQQyBzdHViIG1ldGhvZHMgb3IgdmlhIHRoZSBKU09OL0hUVFAgUkVTVCBBUEkuXG4gKlxuICogVGhlIHNlcmlhbGl6ZXIgc3VwcG9ydHMgYm90aCBQcm90b2J1Zi5qcyBhbmQgUHJvdG8zIEpTT04gZm9ybWF0cy4gQnlcbiAqIHNldHRpbmcgYHVzZVByb3RvM0pzb25gIHRvIHRydWUsIHRoZSBzZXJpYWxpemVyIHdpbGwgdXNlIHRoZSBQcm90bzMgSlNPTlxuICogZm9ybWF0LlxuICpcbiAqIEZvciBhIGRlc2NyaXB0aW9uIG9mIHRoZSBQcm90bzMgSlNPTiBmb3JtYXQgY2hlY2tcbiAqIGh0dHBzOi8vZGV2ZWxvcGVycy5nb29nbGUuY29tL3Byb3RvY29sLWJ1ZmZlcnMvZG9jcy9wcm90bzMjanNvblxuICpcbiAqIFRPRE8oa2xpbXQpOiBXZSBjYW4gcmVtb3ZlIHRoZSBkYXRhYmFzZUlkIGFyZ3VtZW50IGlmIHdlIGtlZXAgdGhlIGZ1bGxcbiAqIHJlc291cmNlIG5hbWUgaW4gZG9jdW1lbnRzLlxuICovXG5jbGFzcyBhcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLk4gPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgRGF0ZSB0aGF0J3MgYXBwcm9wcmlhdGUgdG8gcHV0IGludG8gYSBwcm90by5cbiAqL1xuZnVuY3Rpb24gY3ModCwgZSkge1xuICAgIGlmICh0Lk4pIHtcbiAgICAgICAgcmV0dXJuIGAke25ldyBEYXRlKDFlMyAqIGUuc2Vjb25kcykudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLywgXCJcIikucmVwbGFjZShcIlpcIiwgXCJcIil9LiR7KFwiMDAwMDAwMDAwXCIgKyBlLm5hbm9zZWNvbmRzKS5zbGljZSgtOSl9WmA7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IFwiXCIgKyBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGJ5dGVzIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW4gYSBwcm90by5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBocyh0LCBlKSB7XG4gICAgcmV0dXJuIHQuTiA/IGUudG9CYXNlNjQoKSA6IGUudG9VaW50OEFycmF5KCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIEJ5dGVTdHJpbmcgYmFzZWQgb24gdGhlIHByb3RvIHN0cmluZyB2YWx1ZS5cbiAqLyBmdW5jdGlvbiBscyh0LCBlKSB7XG4gICAgcmV0dXJuIGNzKHQsIGUudG9UaW1lc3RhbXAoKSk7XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICByZXR1cm4gVSghIXQpLCBjdC5mcm9tVGltZXN0YW1wKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFR0KHQpO1xuICAgICAgICByZXR1cm4gbmV3IGF0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG4gICAgfSh0KSk7XG59XG5cbmZ1bmN0aW9uIGRzKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IF90KFsgXCJwcm9qZWN0c1wiLCB0LnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZSBdKTtcbiAgICB9KHQpLmNoaWxkKFwiZG9jdW1lbnRzXCIpLmNoaWxkKGUpLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBfcyh0KSB7XG4gICAgY29uc3QgZSA9IF90LmZyb21TdHJpbmcodCk7XG4gICAgcmV0dXJuIFUoTHMoZSkpLCBlO1xufVxuXG5mdW5jdGlvbiB3cyh0LCBlKSB7XG4gICAgcmV0dXJuIGRzKHQuZGF0YWJhc2VJZCwgZS5wYXRoKTtcbn1cblxuZnVuY3Rpb24gbXModCwgZSkge1xuICAgIGNvbnN0IG4gPSBfcyhlKTtcbiAgICBpZiAobi5nZXQoMSkgIT09IHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgcHJvamVjdDogXCIgKyBuLmdldCgxKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLnByb2plY3RJZCk7XG4gICAgaWYgKG4uZ2V0KDMpICE9PSB0LmRhdGFiYXNlSWQuZGF0YWJhc2UpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUcmllZCB0byBkZXNlcmlhbGl6ZSBrZXkgZnJvbSBkaWZmZXJlbnQgZGF0YWJhc2U6IFwiICsgbi5nZXQoMykgKyBcIiB2cyBcIiArIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSk7XG4gICAgcmV0dXJuIG5ldyB4dChJcyhuKSk7XG59XG5cbmZ1bmN0aW9uIGdzKHQsIGUpIHtcbiAgICByZXR1cm4gZHModC5kYXRhYmFzZUlkLCBlKTtcbn1cblxuZnVuY3Rpb24geXModCkge1xuICAgIGNvbnN0IGUgPSBfcyh0KTtcbiAgICAvLyBJbiB2MWJldGExIHF1ZXJpZXMgZm9yIGNvbGxlY3Rpb25zIGF0IHRoZSByb290IGRpZCBub3QgaGF2ZSBhIHRyYWlsaW5nXG4gICAgLy8gXCIvZG9jdW1lbnRzXCIuIEluIHYxIGFsbCByZXNvdXJjZSBwYXRocyBjb250YWluIFwiL2RvY3VtZW50c1wiLiBQcmVzZXJ2ZSB0aGVcbiAgICAvLyBhYmlsaXR5IHRvIHJlYWQgdGhlIHYxYmV0YTEgZm9ybSBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHF1ZXJpZXMgcGVyc2lzdGVkXG4gICAgLy8gaW4gdGhlIGxvY2FsIHRhcmdldCBjYWNoZS5cbiAgICAgICAgcmV0dXJuIDQgPT09IGUubGVuZ3RoID8gX3QuZW1wdHlQYXRoKCkgOiBJcyhlKTtcbn1cblxuZnVuY3Rpb24gcHModCkge1xuICAgIHJldHVybiBuZXcgX3QoWyBcInByb2plY3RzXCIsIHQuZGF0YWJhc2VJZC5wcm9qZWN0SWQsIFwiZGF0YWJhc2VzXCIsIHQuZGF0YWJhc2VJZC5kYXRhYmFzZSBdKS5jYW5vbmljYWxTdHJpbmcoKTtcbn1cblxuZnVuY3Rpb24gSXModCkge1xuICAgIHJldHVybiBVKHQubGVuZ3RoID4gNCAmJiBcImRvY3VtZW50c1wiID09PSB0LmdldCg0KSksIHQucG9wRmlyc3QoNSk7XG59XG5cbi8qKiBDcmVhdGVzIGEgRG9jdW1lbnQgcHJvdG8gZnJvbSBrZXkgYW5kIGZpZWxkcyAoYnV0IG5vIGNyZWF0ZS91cGRhdGUgdGltZSkgKi8gZnVuY3Rpb24gVHModCwgZSwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIG5hbWU6IHdzKHQsIGUpLFxuICAgICAgICBmaWVsZHM6IG4udmFsdWUubWFwVmFsdWUuZmllbGRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gRXModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBtcyh0LCBlLm5hbWUpLCBpID0gZnMoZS51cGRhdGVUaW1lKSwgciA9IG5ldyBYdCh7XG4gICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICBmaWVsZHM6IGUuZmllbGRzXG4gICAgICAgIH1cbiAgICB9KSwgbyA9IHRlLm5ld0ZvdW5kRG9jdW1lbnQocywgaSwgcik7XG4gICAgcmV0dXJuIG4gJiYgby5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSwgbiA/IG8uc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkgOiBvO1xufVxuXG5mdW5jdGlvbiBBcyh0LCBlKSB7XG4gICAgcmV0dXJuIFwiZm91bmRcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBVKCEhZS5mb3VuZCksIGUuZm91bmQubmFtZSwgZS5mb3VuZC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBuID0gbXModCwgZS5mb3VuZC5uYW1lKSwgcyA9IGZzKGUuZm91bmQudXBkYXRlVGltZSksIGkgPSBuZXcgWHQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IGUuZm91bmQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGUubmV3Rm91bmREb2N1bWVudChuLCBzLCBpKTtcbiAgICB9KHQsIGUpIDogXCJtaXNzaW5nXCIgaW4gZSA/IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgVSghIWUubWlzc2luZyksIFUoISFlLnJlYWRUaW1lKTtcbiAgICAgICAgY29uc3QgbiA9IG1zKHQsIGUubWlzc2luZyksIHMgPSBmcyhlLnJlYWRUaW1lKTtcbiAgICAgICAgcmV0dXJuIHRlLm5ld05vRG9jdW1lbnQobiwgcyk7XG4gICAgfSh0LCBlKSA6IEwoKTtcbn1cblxuZnVuY3Rpb24gUnModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChcInRhcmdldENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS50YXJnZXRDaGFuZ2U7XG4gICAgICAgIC8vIHByb3RvMyBkZWZhdWx0IHZhbHVlIGlzIHVuc2V0IGluIEpTT04gKHVuZGVmaW5lZCksIHNvIHVzZSAnTk9fQ0hBTkdFJ1xuICAgICAgICAvLyBpZiB1bnNldFxuICAgICAgICBjb25zdCBzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIFwiTk9fQ0hBTkdFXCIgPT09IHQgPyAwIC8qIE5vQ2hhbmdlICovIDogXCJBRERcIiA9PT0gdCA/IDEgLyogQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSB0ID8gMiAvKiBSZW1vdmVkICovIDogXCJDVVJSRU5UXCIgPT09IHQgPyAzIC8qIEN1cnJlbnQgKi8gOiBcIlJFU0VUXCIgPT09IHQgPyA0IC8qIFJlc2V0ICovIDogTCgpO1xuICAgICAgICB9KGUudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSBlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5OID8gKFUodm9pZCAwID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBwdC5mcm9tQmFzZTY0U3RyaW5nKGUgfHwgXCJcIikpIDogKFUodm9pZCAwID09PSBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICBwdC5mcm9tVWludDhBcnJheShlIHx8IG5ldyBVaW50OEFycmF5KSk7XG4gICAgICAgIH0odCwgZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pLCBvID0gZS50YXJnZXRDaGFuZ2UuY2F1c2UsIHUgPSBvICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgPT09IHQuY29kZSA/IEsuVU5LTk9XTiA6IE5uKHQuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFEoZSwgdC5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIHZhbHVlIGZvciBhIG51bWJlciAob3IgbnVsbCkgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbnRvXG4gKiBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICogRE8gTk9UIFVTRSBUSElTIEZPUiBBTllUSElORyBFTFNFLlxuICogVGhpcyBtZXRob2QgY2hlYXRzLiBJdCdzIHR5cGVkIGFzIHJldHVybmluZyBcIm51bWJlclwiIGJlY2F1c2UgdGhhdCdzIHdoYXRcbiAqIG91ciBnZW5lcmF0ZWQgcHJvdG8gaW50ZXJmYWNlcyBzYXkgSW50MzJWYWx1ZSBtdXN0IGJlLiBCdXQgR1JQQyBhY3R1YWxseVxuICogZXhwZWN0cyBhIHsgdmFsdWU6IDxudW1iZXI+IH0gc3RydWN0LlxuICovIChvKTtcbiAgICAgICAgbiA9IG5ldyBlcyhzLCBpLCByLCB1IHx8IG51bGwpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudENoYW5nZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRDaGFuZ2U7XG4gICAgICAgIHMuZG9jdW1lbnQsIHMuZG9jdW1lbnQubmFtZSwgcy5kb2N1bWVudC51cGRhdGVUaW1lO1xuICAgICAgICBjb25zdCBpID0gbXModCwgcy5kb2N1bWVudC5uYW1lKSwgciA9IGZzKHMuZG9jdW1lbnQudXBkYXRlVGltZSksIG8gPSBuZXcgWHQoe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgICAgICBmaWVsZHM6IHMuZG9jdW1lbnQuZmllbGRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pLCB1ID0gdGUubmV3Rm91bmREb2N1bWVudChpLCByLCBvKSwgYSA9IHMudGFyZ2V0SWRzIHx8IFtdLCBjID0gcy5yZW1vdmVkVGFyZ2V0SWRzIHx8IFtdO1xuICAgICAgICBuID0gbmV3IFpuKGEsIGMsIHUua2V5LCB1KTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnREZWxldGVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50RGVsZXRlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gbXModCwgcy5kb2N1bWVudCksIHIgPSBzLnJlYWRUaW1lID8gZnMocy5yZWFkVGltZSkgOiBjdC5taW4oKSwgbyA9IHRlLm5ld05vRG9jdW1lbnQoaSwgciksIHUgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgWm4oW10sIHUsIG8ua2V5LCBvKTtcbiAgICB9IGVsc2UgaWYgKFwiZG9jdW1lbnRSZW1vdmVcIiBpbiBlKSB7XG4gICAgICAgIGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmRvY3VtZW50UmVtb3ZlO1xuICAgICAgICBzLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gbXModCwgcy5kb2N1bWVudCksIHIgPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgWm4oW10sIHIsIGksIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghKFwiZmlsdGVyXCIgaW4gZSkpIHJldHVybiBMKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGUuZmlsdGVyO1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZmlsdGVyO1xuICAgICAgICAgICAgdC50YXJnZXRJZDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmNvdW50IHx8IDAsIGkgPSBuZXcgU24ocyksIHIgPSB0LnRhcmdldElkO1xuICAgICAgICAgICAgbiA9IG5ldyB0cyhyLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24gYnModCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlIGluc3RhbmNlb2YgRW4pIG4gPSB7XG4gICAgICAgIHVwZGF0ZTogVHModCwgZS5rZXksIGUudmFsdWUpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIFZuKSBuID0ge1xuICAgICAgICBkZWxldGU6IHdzKHQsIGUua2V5KVxuICAgIH07IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBBbikgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBUcyh0LCBlLmtleSwgZS5kYXRhKSxcbiAgICAgICAgdXBkYXRlTWFzazogQnMoZS5maWVsZE1hc2spXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGlmICghKGUgaW5zdGFuY2VvZiB2bikpIHJldHVybiBMKCk7XG4gICAgICAgIG4gPSB7XG4gICAgICAgICAgICB2ZXJpZnk6IHdzKHQsIGUua2V5KVxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZS5maWVsZFRyYW5zZm9ybXMubGVuZ3RoID4gMCAmJiAobi51cGRhdGVUcmFuc2Zvcm1zID0gZS5maWVsZFRyYW5zZm9ybXMubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudHJhbnNmb3JtO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIG5uKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgc2V0VG9TZXJ2ZXJWYWx1ZTogXCJSRVFVRVNUX1RJTUVcIlxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIHNuKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgYXBwZW5kTWlzc2luZ0VsZW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBuLmVsZW1lbnRzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2Ygb24pIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICByZW1vdmVBbGxGcm9tQXJyYXk6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBhbikgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIGluY3JlbWVudDogbi5rXG4gICAgICAgIH07XG4gICAgICAgIHRocm93IEwoKTtcbiAgICB9KDAsIHQpKSkpLCBlLnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiBscyh0LCBlLnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IGUuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiBlLmV4aXN0c1xuICAgICAgICB9IDogTCgpO1xuICAgIH0odCwgZS5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gUHModCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmN1cnJlbnREb2N1bWVudCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gX24udXBkYXRlVGltZShmcyh0LnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyBfbi5leGlzdHModC5leGlzdHMpIDogX24ubm9uZSgpO1xuICAgIH0oZS5jdXJyZW50RG9jdW1lbnQpIDogX24ubm9uZSgpLCBzID0gZS51cGRhdGVUcmFuc2Zvcm1zID8gZS51cGRhdGVUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIGUpIFUoXCJSRVFVRVNUX1RJTUVcIiA9PT0gZS5zZXRUb1NlcnZlclZhbHVlKSwgbiA9IG5ldyBubjsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBzbih0KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IG9uKHQpO1xuICAgICAgICB9IGVsc2UgXCJpbmNyZW1lbnRcIiBpbiBlID8gbiA9IG5ldyBhbih0LCBlLmluY3JlbWVudCkgOiBMKCk7XG4gICAgICAgIGNvbnN0IHMgPSBtdC5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBsbihzLCBuKTtcbiAgICB9KHQsIGUpKSkgOiBbXTtcbiAgICBpZiAoZS51cGRhdGUpIHtcbiAgICAgICAgZS51cGRhdGUubmFtZTtcbiAgICAgICAgY29uc3QgaSA9IG1zKHQsIGUudXBkYXRlLm5hbWUpLCByID0gbmV3IFh0KHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLnVwZGF0ZS5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlLnVwZGF0ZU1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZmllbGRQYXRocyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IGd0KGUubWFwKCh0ID0+IG10LmZyb21TZXJ2ZXJGb3JtYXQodCkpKSk7XG4gICAgICAgICAgICB9KGUudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEFuKGksIHIsIHQsIG4sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgRW4oaSwgciwgbiwgcyk7XG4gICAgfVxuICAgIGlmIChlLmRlbGV0ZSkge1xuICAgICAgICBjb25zdCBzID0gbXModCwgZS5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IFZuKHMsIG4pO1xuICAgIH1cbiAgICBpZiAoZS52ZXJpZnkpIHtcbiAgICAgICAgY29uc3QgcyA9IG1zKHQsIGUudmVyaWZ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyB2bihzLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIEwoKTtcbn1cblxuZnVuY3Rpb24gVnModCwgZSkge1xuICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID4gMCA/IChVKHZvaWQgMCAhPT0gZSksIHQubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gdC51cGRhdGVUaW1lID8gZnModC51cGRhdGVUaW1lKSA6IGZzKGUpO1xuICAgICAgICByZXR1cm4gbi5pc0VxdWFsKGN0Lm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gZnMoZSkpLCBuZXcgZG4obiwgdC50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KHQsIGUpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIHZzKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb2N1bWVudHM6IFsgZ3ModCwgZS5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gU3ModCwgZSkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHMgPSBlLnBhdGg7XG4gICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBncyh0LCBzKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gZ3ModCwgcy5wb3BMYXN0KCkpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogcy5sYXN0U2VnbWVudCgpXG4gICAgfSBdKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHQubWFwKCh0ID0+IFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmIChcIj09XCIgLyogRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoanQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogTXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OQU5cIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoUXQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogTXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OVUxMXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gPT09IHQub3ApIHtcbiAgICAgICAgICAgICAgICBpZiAoanQodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogTXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgaWYgKFF0KHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1bmFyeUZpbHRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGQ6IE1zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZmllbGRGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IE1zKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDoga3ModC5vcCksXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0KSkpO1xuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBlWzBdO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY29tcG9zaXRlRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgb3A6IFwiQU5EXCIsXG4gICAgICAgICAgICAgICAgZmlsdGVyczogZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0oZS5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZDogTXModC5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiBOcyh0LmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICB9KGUub3JkZXJCeSk7XG4gICAgciAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHIpO1xuICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0Lk4gfHwgU3QoZSkgPyBlIDoge1xuICAgICAgICAgICAgdmFsdWU6IGVcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gKiBSZXR1cm5zIGEgbnVtYmVyIChvciBudWxsKSBmcm9tIGEgZ29vZ2xlLnByb3RvYnVmLkludDMyVmFsdWUgcHJvdG8uXG4gKi8gKHQsIGUubGltaXQpO1xuICAgIHZhciB1O1xuICAgIHJldHVybiBudWxsICE9PSBvICYmIChuLnN0cnVjdHVyZWRRdWVyeS5saW1pdCA9IG8pLCBlLnN0YXJ0QXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LnN0YXJ0QXQgPSB7XG4gICAgICAgIGJlZm9yZTogKHUgPSBlLnN0YXJ0QXQpLmluY2x1c2l2ZSxcbiAgICAgICAgdmFsdWVzOiB1LnBvc2l0aW9uXG4gICAgfSksIGUuZW5kQXQgJiYgKG4uc3RydWN0dXJlZFF1ZXJ5LmVuZEF0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYmVmb3JlOiAhdC5pbmNsdXNpdmUsXG4gICAgICAgICAgICB2YWx1ZXM6IHQucG9zaXRpb25cbiAgICAgICAgfTtcbiAgICB9KGUuZW5kQXQpKSwgbjtcbn1cblxuZnVuY3Rpb24gRHModCkge1xuICAgIGxldCBlID0geXModC5wYXJlbnQpO1xuICAgIGNvbnN0IG4gPSB0LnN0cnVjdHVyZWRRdWVyeSwgcyA9IG4uZnJvbSA/IG4uZnJvbS5sZW5ndGggOiAwO1xuICAgIGxldCBpID0gbnVsbDtcbiAgICBpZiAocyA+IDApIHtcbiAgICAgICAgVSgxID09PSBzKTtcbiAgICAgICAgY29uc3QgdCA9IG4uZnJvbVswXTtcbiAgICAgICAgdC5hbGxEZXNjZW5kYW50cyA/IGkgPSB0LmNvbGxlY3Rpb25JZCA6IGUgPSBlLmNoaWxkKHQuY29sbGVjdGlvbklkKTtcbiAgICB9XG4gICAgbGV0IHIgPSBbXTtcbiAgICBuLndoZXJlICYmIChyID0geHMobi53aGVyZSkpO1xuICAgIGxldCBvID0gW107XG4gICAgbi5vcmRlckJ5ICYmIChvID0gbi5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVmUoT3ModC5maWVsZCksIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiQVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiYXNjXCIgLyogQVNDRU5ESU5HICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJERVNDRU5ESU5HXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAodC5kaXJlY3Rpb24pKTtcbiAgICB9KHQpKSkpO1xuICAgIGxldCB1ID0gbnVsbDtcbiAgICBuLmxpbWl0ICYmICh1ID0gZnVuY3Rpb24odCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgcmV0dXJuIGUgPSBcIm9iamVjdFwiID09IHR5cGVvZiB0ID8gdC52YWx1ZSA6IHQsIFN0KGUpID8gbnVsbCA6IGU7XG4gICAgfShuLmxpbWl0KSk7XG4gICAgbGV0IGEgPSBudWxsO1xuICAgIG4uc3RhcnRBdCAmJiAoYSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9ICEhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBQZShuLCBlKTtcbiAgICB9KG4uc3RhcnRBdCkpO1xuICAgIGxldCBjID0gbnVsbDtcbiAgICByZXR1cm4gbi5lbmRBdCAmJiAoYyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9ICF0LmJlZm9yZSwgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgICAgICByZXR1cm4gbmV3IFBlKG4sIGUpO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgKG4uZW5kQXQpKSwgeGUoZSwgaSwgbywgciwgdSwgXCJGXCIgLyogRmlyc3QgKi8gLCBhLCBjKTtcbn1cblxuZnVuY3Rpb24gQ3ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBMaXN0ZW4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG5cbiAgICAgICAgICBjYXNlIDEgLyogRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gOlxuICAgICAgICAgICAgcmV0dXJuIFwiZXhpc3RlbmNlLWZpbHRlci1taXNtYXRjaFwiO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIExpbWJvUmVzb2x1dGlvbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJsaW1iby1kb2N1bWVudFwiO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgIH1cbiAgICB9KDAsIGUucHVycG9zZSk7XG4gICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB7XG4gICAgICAgIFwiZ29vZy1saXN0ZW4tdGFnc1wiOiBuXG4gICAgfTtcbn1cblxuZnVuY3Rpb24geHModCkge1xuICAgIHJldHVybiB0ID8gdm9pZCAwICE9PSB0LnVuYXJ5RmlsdGVyID8gWyAkcyh0KSBdIDogdm9pZCAwICE9PSB0LmZpZWxkRmlsdGVyID8gWyBGcyh0KSBdIDogdm9pZCAwICE9PSB0LmNvbXBvc2l0ZUZpbHRlciA/IHQuY29tcG9zaXRlRmlsdGVyLmZpbHRlcnMubWFwKCh0ID0+IHhzKHQpKSkucmVkdWNlKCgodCwgZSkgPT4gdC5jb25jYXQoZSkpKSA6IEwoKSA6IFtdO1xufVxuXG5mdW5jdGlvbiBOcyh0KSB7XG4gICAgcmV0dXJuIG9zW3RdO1xufVxuXG5mdW5jdGlvbiBrcyh0KSB7XG4gICAgcmV0dXJuIHVzW3RdO1xufVxuXG5mdW5jdGlvbiBNcyh0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZmllbGRQYXRoOiB0LmNhbm9uaWNhbFN0cmluZygpXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gT3ModCkge1xuICAgIHJldHVybiBtdC5mcm9tU2VydmVyRm9ybWF0KHQuZmllbGRQYXRoKTtcbn1cblxuZnVuY3Rpb24gRnModCkge1xuICAgIHJldHVybiBnZS5jcmVhdGUoT3ModC5maWVsZEZpbHRlci5maWVsZCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIkVRVUFMXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI9PVwiIC8qIEVRVUFMICovO1xuXG4gICAgICAgICAgY2FzZSBcIk5PVF9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI+XCIgLyogR1JFQVRFUl9USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkdSRUFURVJfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiTEVTU19USEFOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCI8XCIgLyogTEVTU19USEFOICovO1xuXG4gICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgcmV0dXJuIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNcIjpcbiAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi87XG5cbiAgICAgICAgICBjYXNlIFwiSU5cIjpcbiAgICAgICAgICAgIHJldHVybiBcImluXCIgLyogSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiTk9UX0lOXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJub3QtaW5cIiAvKiBOT1RfSU4gKi87XG5cbiAgICAgICAgICBjYXNlIFwiQVJSQVlfQ09OVEFJTlNfQU5ZXCI6XG4gICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi87XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIEwoKTtcbiAgICAgICAgfVxuICAgIH0odC5maWVsZEZpbHRlci5vcCksIHQuZmllbGRGaWx0ZXIudmFsdWUpO1xufVxuXG5mdW5jdGlvbiAkcyh0KSB7XG4gICAgc3dpdGNoICh0LnVuYXJ5RmlsdGVyLm9wKSB7XG4gICAgICBjYXNlIFwiSVNfTkFOXCI6XG4gICAgICAgIGNvbnN0IGUgPSBPcyh0LnVuYXJ5RmlsdGVyLmZpZWxkKTtcbiAgICAgICAgcmV0dXJuIGdlLmNyZWF0ZShlLCBcIj09XCIgLyogRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTlVMTFwiOlxuICAgICAgICBjb25zdCBuID0gT3ModC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgIHJldHVybiBnZS5jcmVhdGUobiwgXCI9PVwiIC8qIEVRVUFMICovICwge1xuICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICB9KTtcblxuICAgICAgY2FzZSBcIklTX05PVF9OQU5cIjpcbiAgICAgICAgY29uc3QgcyA9IE9zKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gZ2UuY3JlYXRlKHMsIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgIH0pO1xuXG4gICAgICBjYXNlIFwiSVNfTk9UX05VTExcIjpcbiAgICAgICAgY29uc3QgaSA9IE9zKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICByZXR1cm4gZ2UuY3JlYXRlKGksIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gTCgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQnModCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gdC5maWVsZHMuZm9yRWFjaCgodCA9PiBlLnB1c2godC5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiBlXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gTHModCkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gdC5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IHQuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IHQuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIFVzKHQpIHtcbiAgICBsZXQgZSA9IFwiXCI7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlLmxlbmd0aCA+IDAgJiYgKGUgPSBHcyhlKSksIGUgPSBxcyh0LmdldChuKSwgZSk7XG4gICAgcmV0dXJuIEdzKGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gcXModCwgZSkge1xuICAgIGxldCBuID0gZTtcbiAgICBjb25zdCBzID0gdC5sZW5ndGg7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzOyBlKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY2hhckF0KGUpO1xuICAgICAgICBzd2l0Y2ggKHMpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gR3ModCkge1xuICAgIHJldHVybiB0ICsgXCJcdTAwMDFcdTAwMDFcIjtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XG4gKiBzdHJpbmdzLlxuICovIGZ1bmN0aW9uIEtzKHQpIHtcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxuICAgIC8vIHdpdGggZXhhY3RseSAyIG11c3QgYmUgdGhlIGVtcHR5IHBhdGguXG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGlmIChVKGUgPj0gMiksIDIgPT09IGUpIHJldHVybiBVKFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDEpKSwgX3QuZW1wdHlQYXRoKCk7XG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgY2Fubm90IGV4aXN0IHBhc3QgdGhlIHNlY29uZC10by1sYXN0IHBvc2l0aW9uIGluIHRoZVxuICAgIC8vIHNvdXJjZSB2YWx1ZS5cbiAgICAgICAgY29uc3QgbiA9IGUgLSAyLCBzID0gW107XG4gICAgbGV0IGkgPSBcIlwiO1xuICAgIGZvciAobGV0IHIgPSAwOyByIDwgZTsgKSB7XG4gICAgICAgIC8vIFRoZSBsYXN0IHR3byBjaGFyYWN0ZXJzIG9mIGEgdmFsaWQgZW5jb2RlZCBwYXRoIG11c3QgYmUgYSBzZXBhcmF0b3IsIHNvXG4gICAgICAgIC8vIHRoZXJlIG11c3QgYmUgYW4gZW5kIHRvIHRoaXMgc2VnbWVudC5cbiAgICAgICAgY29uc3QgZSA9IHQuaW5kZXhPZihcIlx1MDAwMVwiLCByKTtcbiAgICAgICAgKGUgPCAwIHx8IGUgPiBuKSAmJiBMKCk7XG4gICAgICAgIHN3aXRjaCAodC5jaGFyQXQoZSArIDEpKSB7XG4gICAgICAgICAgY2FzZSBcIlx1MDAwMVwiOlxuICAgICAgICAgICAgY29uc3QgbiA9IHQuc3Vic3RyaW5nKHIsIGUpO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICAwID09PSBpLmxlbmd0aCA/IFxuICAgICAgICAgICAgLy8gQXZvaWQgY29weWluZyBmb3IgdGhlIGNvbW1vbiBjYXNlIG9mIGEgc2VnbWVudCB0aGF0IGV4Y2x1ZGVzIFxcMFxuICAgICAgICAgICAgLy8gYW5kIFxcMDAxXG4gICAgICAgICAgICBvID0gbiA6IChpICs9IG4sIG8gPSBpLCBpID0gXCJcIiksIHMucHVzaChvKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIlx1MDAxMFwiOlxuICAgICAgICAgICAgaSArPSB0LnN1YnN0cmluZyhyLCBlKSwgaSArPSBcIlxcMFwiO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDExXCI6XG4gICAgICAgICAgICAvLyBUaGUgZXNjYXBlIGNoYXJhY3RlciBjYW4gYmUgdXNlZCBpbiB0aGUgb3V0cHV0IHRvIGVuY29kZSBpdHNlbGYuXG4gICAgICAgICAgICBpICs9IHQuc3Vic3RyaW5nKHIsIGUgKyAxKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIEwoKTtcbiAgICAgICAgfVxuICAgICAgICByID0gZSArIDI7XG4gICAgfVxuICAgIHJldHVybiBuZXcgX3Qocyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFFzID0gWyBcInVzZXJJZFwiLCBcImJhdGNoSWRcIiBdO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBOYW1lIG9mIHRoZSBJbmRleGVkRGIgb2JqZWN0IHN0b3JlLlxuICpcbiAqIE5vdGUgdGhhdCB0aGUgbmFtZSAnb3duZXInIGlzIGNob3NlbiB0byBlbnN1cmUgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aFxuICogb2xkZXIgY2xpZW50cyB0aGF0IG9ubHkgc3VwcG9ydGVkIHNpbmdsZSBsb2NrZWQgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZVxuICogbGF5ZXIuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIFt1c2VySWQsIGVuY29kZWRQYXRoXSBrZXkgZm9yIHVzZSBpbiB0aGUgRGJEb2N1bWVudE11dGF0aW9uc1xuICogaW5kZXggdG8gaXRlcmF0ZSBvdmVyIGFsbCBhdCBkb2N1bWVudCBtdXRhdGlvbnMgZm9yIGEgZ2l2ZW4gcGF0aCBvciBsb3dlci5cbiAqL1xuZnVuY3Rpb24ganModCwgZSkge1xuICAgIHJldHVybiBbIHQsIFVzKGUpIF07XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bGwgaW5kZXgga2V5IG9mIFt1c2VySWQsIGVuY29kZWRQYXRoLCBiYXRjaElkXSBmb3IgaW5zZXJ0aW5nXG4gKiBhbmQgZGVsZXRpbmcgaW50byB0aGUgRGJEb2N1bWVudE11dGF0aW9ucyBpbmRleC5cbiAqLyBmdW5jdGlvbiBXcyh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIFsgdCwgVXMoZSksIG4gXTtcbn1cblxuLyoqXG4gKiBCZWNhdXNlIHdlIHN0b3JlIGFsbCB0aGUgdXNlZnVsIGluZm9ybWF0aW9uIGZvciB0aGlzIHN0b3JlIGluIHRoZSBrZXksXG4gKiB0aGVyZSBpcyBubyB1c2VmdWwgaW5mb3JtYXRpb24gdG8gc3RvcmUgYXMgdGhlIHZhbHVlLiBUaGUgcmF3ICh1bmVuY29kZWQpXG4gKiBwYXRoIGNhbm5vdCBiZSBzdG9yZWQgYmVjYXVzZSBJbmRleGVkRGIgZG9lc24ndCBzdG9yZSBwcm90b3R5cGVcbiAqIGluZm9ybWF0aW9uLlxuICovIGNvbnN0IHpzID0ge30sIEhzID0gWyBcInByZWZpeFBhdGhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJyZWFkVGltZVwiLCBcImRvY3VtZW50SWRcIiBdLCBKcyA9IFsgXCJwcmVmaXhQYXRoXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiZG9jdW1lbnRJZFwiIF0sIFlzID0gWyBcImNvbGxlY3Rpb25Hcm91cFwiLCBcInJlYWRUaW1lXCIsIFwicHJlZml4UGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCBYcyA9IFsgXCJjYW5vbmljYWxJZFwiLCBcInRhcmdldElkXCIgXSwgWnMgPSBbIFwidGFyZ2V0SWRcIiwgXCJwYXRoXCIgXSwgdGkgPSBbIFwicGF0aFwiLCBcInRhcmdldElkXCIgXSwgZWkgPSBbIFwiY29sbGVjdGlvbklkXCIsIFwicGFyZW50XCIgXSwgbmkgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiIF0sIHNpID0gWyBcInVpZFwiLCBcInNlcXVlbmNlTnVtYmVyXCIgXSwgaWkgPSBbIFwiaW5kZXhJZFwiLCBcInVpZFwiLCBcImFycmF5VmFsdWVcIiwgXCJkaXJlY3Rpb25hbFZhbHVlXCIsIFwiZG9jdW1lbnRLZXlcIiBdLCByaSA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwiZG9jdW1lbnRLZXlcIiBdLCBvaSA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCB1aSA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgYWkgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBjaSA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiBdLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiIF0sIFwiY29sbGVjdGlvblBhcmVudHNcIiBdLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiBdLCBoaSA9IFsgLi4uY2ksIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIGxpID0gWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiwgXCJjbGllbnRNZXRhZGF0YVwiLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIFwiY29sbGVjdGlvblBhcmVudHNcIiwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIGZpID0gWyAuLi5saSwgXCJpbmRleENvbmZpZ3VyYXRpb25cIiwgXCJpbmRleFN0YXRlXCIsIFwiaW5kZXhFbnRyaWVzXCIgXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGRpID0gXCJUaGUgY3VycmVudCB0YWIgaXMgbm90IGluIHRoZSByZXF1aXJlZCBzdGF0ZSB0byBwZXJmb3JtIHRoaXMgb3BlcmF0aW9uLiBJdCBtaWdodCBiZSBuZWNlc3NhcnkgdG8gcmVmcmVzaCB0aGUgYnJvd3NlciB0YWIuXCI7XG5cbi8qKlxuICogQSBiYXNlIGNsYXNzIHJlcHJlc2VudGluZyBhIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLCBlbmNhcHN1bGF0aW5nIGJvdGggdGhlXG4gKiB0cmFuc2FjdGlvbidzIHNlcXVlbmNlIG51bWJlcnMgYXMgd2VsbCBhcyBhIGxpc3Qgb2Ygb25Db21taXR0ZWQgbGlzdGVuZXJzLlxuICpcbiAqIFdoZW4geW91IGNhbGwgUGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oKSwgaXQgd2lsbCBjcmVhdGUgYSB0cmFuc2FjdGlvbiBhbmRcbiAqIHBhc3MgaXQgdG8geW91ciBjYWxsYmFjay4gWW91IHRoZW4gcGFzcyBpdCB0byBhbnkgbWV0aG9kIHRoYXQgb3BlcmF0ZXNcbiAqIG9uIHBlcnNpc3RlbmNlLlxuICovIGNsYXNzIF9pIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycyA9IFtdO1xuICAgIH1cbiAgICBhZGRPbkNvbW1pdHRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5wdXNoKHQpO1xuICAgIH1cbiAgICByYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSB7XG4gICAgICAgIHRoaXMub25Db21taXR0ZWRMaXN0ZW5lcnMuZm9yRWFjaCgodCA9PiB0KCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBlcnNpc3RlbmNlUHJvbWlzZSBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2UgZXhjZXB0XG4gKiBpdCBoYXMgYSAubmV4dCgpIG1ldGhvZCBpbnN0ZWFkIG9mIC50aGVuKCkgYW5kIC5uZXh0KCkgYW5kIC5jYXRjaCgpIGNhbGxiYWNrc1xuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxuICogYXN5bmNocm9ub3VzbHkgKFByb21pc2UgaW1wbGVtZW50YXRpb25zIHVzZSBzZXRJbW1lZGlhdGUoKSBvciBzaW1pbGFyKS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBpbnRlcm9wZXJhdGUgd2l0aCBJbmRleGVkREIgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBjb21taXQgdHJhbnNhY3Rpb25zIGlmIGNvbnRyb2wgaXMgcmV0dXJuZWQgdG8gdGhlIGV2ZW50IGxvb3Agd2l0aG91dFxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBOT1RFOiAudGhlbigpIGFuZCAuY2F0Y2goKSBvbmx5IGFsbG93IGEgc2luZ2xlIGNvbnN1bWVyLCB1bmxpa2Ugbm9ybWFsXG4gKiBQcm9taXNlcy5cbiAqLyBjbGFzcyB3aSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIHQoKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSB0LCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKHQpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IHQsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2sodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIG5leHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIEwoKSwgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITAsIHRoaXMuaXNEb25lID8gdGhpcy5lcnJvciA/IHRoaXMud3JhcEZhaWx1cmUoZSwgdGhpcy5lcnJvcikgOiB0aGlzLndyYXBTdWNjZXNzKHQsIHRoaXMucmVzdWx0KSA6IG5ldyB3aSgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2Vzcyh0LCBlKS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZShlLCB0KS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0KCk7XG4gICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIHdpID8gZSA6IHdpLnJlc29sdmUoZSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB3aS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogd2kucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgd3JhcEZhaWx1cmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogd2kucmVqZWN0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgd2koKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBlKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QodCkge1xuICAgICAgICByZXR1cm4gbmV3IHdpKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgd2FpdEZvcihcbiAgICAvLyBBY2NlcHQgYWxsIFByb21pc2UgdHlwZXMgaW4gd2FpdEZvcigpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCkge1xuICAgICAgICByZXR1cm4gbmV3IHdpKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAwLCBpID0gMCwgciA9ICExO1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICArK3MsIHQubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICArK2ksIHIgJiYgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgICAgICAgICAgfSksICh0ID0+IG4odCkpKTtcbiAgICAgICAgICAgIH0pKSwgciA9ICEwLCBpID09PSBzICYmIGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxuICAgICAqLyAgICBzdGF0aWMgb3IodCkge1xuICAgICAgICBsZXQgZSA9IHdpLnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUubmV4dCgodCA9PiB0ID8gd2kucmVzb2x2ZSh0KSA6IG4oKSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljIGZvckVhY2godCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuLnB1c2goZS5jYWxsKHRoaXMsIHQsIHMpKTtcbiAgICAgICAgfSkpLCB0aGlzLndhaXRGb3Iobik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBTaW1wbGVEYi5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogV3JhcHMgYW4gSURCVHJhbnNhY3Rpb24gYW5kIGV4cG9zZXMgYSBzdG9yZSgpIG1ldGhvZCB0byBnZXQgYSBoYW5kbGUgdG8gYVxuICogc3BlY2lmaWMgb2JqZWN0IHN0b3JlLlxuICovXG5jbGFzcyBtaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFjdGlvbiA9IHQsIHRoaXMudHJhbnNhY3Rpb24gPSBlLCB0aGlzLmFib3J0ZWQgPSAhMSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGBQcm9taXNlYCB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlc3VsdCBvZiB0aGUgSW5kZXhlZERiIHRyYW5zYWN0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5BdCA9IG5ldyBqLCB0aGlzLnRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkF0LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZS5lcnJvciA/IHRoaXMuQXQucmVqZWN0KG5ldyBwaSh0LCBlLmVycm9yKSkgOiB0aGlzLkF0LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gUmkoZS50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5BdC5yZWplY3QobmV3IHBpKHQsIG4pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIG9wZW4odCwgZSwgbiwgcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBtaShlLCB0LnRyYW5zYWN0aW9uKHMsIG4pKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IHBpKGUsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBSdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQXQucHJvbWlzZTtcbiAgICB9XG4gICAgYWJvcnQodCkge1xuICAgICAgICB0ICYmIHRoaXMuQXQucmVqZWN0KHQpLCB0aGlzLmFib3J0ZWQgfHwgKE8oXCJTaW1wbGVEYlwiLCBcIkFib3J0aW5nIHRyYW5zYWN0aW9uOlwiLCB0ID8gdC5tZXNzYWdlIDogXCJDbGllbnQtaW5pdGlhdGVkIGFib3J0XCIpLCBcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gITAsIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKSk7XG4gICAgfVxuICAgIGJ0KCkge1xuICAgICAgICAvLyBJZiB0aGUgYnJvd3NlciBzdXBwb3J0cyBWMyBJbmRleGVkREIsIHdlIGludm9rZSBjb21taXQoKSBleHBsaWNpdGx5IHRvXG4gICAgICAgIC8vIHNwZWVkIHVwIGluZGV4IERCIHByb2Nlc3NpbmcgaWYgdGhlIGV2ZW50IGxvb3AgcmVtYWlucyBibG9ja3MuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnRyYW5zYWN0aW9uO1xuICAgICAgICB0aGlzLmFib3J0ZWQgfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0LmNvbW1pdCB8fCB0LmNvbW1pdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgU2ltcGxlRGJTdG9yZTxLZXlUeXBlLCBWYWx1ZVR5cGU+IGZvciB0aGUgc3BlY2lmaWVkIHN0b3JlLiBBbGxcbiAgICAgKiBvcGVyYXRpb25zIHBlcmZvcm1lZCBvbiB0aGUgU2ltcGxlRGJTdG9yZSBoYXBwZW4gd2l0aGluIHRoZSBjb250ZXh0IG9mIHRoaXNcbiAgICAgKiB0cmFuc2FjdGlvbiBhbmQgaXQgY2Fubm90IGJlIHVzZWQgYW55bW9yZSBvbmNlIHRoZSB0cmFuc2FjdGlvbiBpc1xuICAgICAqIGNvbXBsZXRlZC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB3ZSBjYW4ndCBhY3R1YWxseSBlbmZvcmNlIHRoYXQgdGhlIEtleVR5cGUgYW5kIFZhbHVlVHlwZSBhcmVcbiAgICAgKiBjb3JyZWN0LCBidXQgdGhleSBhbGxvdyB0eXBlIHNhZmV0eSB0aHJvdWdoIHRoZSByZXN0IG9mIHRoZSBjb25zdW1pbmcgY29kZS5cbiAgICAgKi8gICAgc3RvcmUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy50cmFuc2FjdGlvbi5vYmplY3RTdG9yZSh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBUaShlKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYSB3cmFwcGVyIGFyb3VuZCBJbmRleGVkRGIgd2l0aCBhIHNpbXBsaWZpZWQgaW50ZXJmYWNlIHRoYXQgdXNlc1xuICogUHJvbWlzZS1saWtlIHJldHVybiB2YWx1ZXMgdG8gY2hhaW4gb3BlcmF0aW9ucy4gUmVhbCBwcm9taXNlcyBjYW5ub3QgYmUgdXNlZFxuICogc2luY2UgLnRoZW4oKSBjb250aW51YXRpb25zIGFyZSBleGVjdXRlZCBhc3luY2hyb25vdXNseSAoZS5nLiB2aWFcbiAqIC5zZXRJbW1lZGlhdGUpLCB3aGljaCB3b3VsZCBjYXVzZSBJbmRleGVkREIgdG8gZW5kIHRoZSB0cmFuc2FjdGlvbi5cbiAqIFNlZSBQZXJzaXN0ZW5jZVByb21pc2UgZm9yIG1vcmUgZGV0YWlscy5cbiAqLyBjbGFzcyBnaSB7XG4gICAgLypcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNpbXBsZURiIHdyYXBwZXIgZm9yIEluZGV4ZWREYiBkYXRhYmFzZSBgbmFtZWAuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgYHZlcnNpb25gIG11c3Qgbm90IGJlIGEgZG93bmdyYWRlLiBJbmRleGVkREIgZG9lcyBub3Qgc3VwcG9ydFxuICAgICAqIGRvd25ncmFkaW5nIHRoZSBzY2hlbWEgdmVyc2lvbi4gV2UgY3VycmVudGx5IGRvIG5vdCBzdXBwb3J0IGFueSB3YXkgdG8gZG9cbiAgICAgKiB2ZXJzaW9uaW5nIG91dHNpZGUgb2YgSW5kZXhlZERCJ3MgdmVyc2lvbmluZyBtZWNoYW5pc20sIGFzIG9ubHlcbiAgICAgKiB2ZXJzaW9uLXVwZ3JhZGUgdHJhbnNhY3Rpb25zIGFyZSBhbGxvd2VkIHRvIGRvIHRoaW5ncyBsaWtlIGNyZWF0ZVxuICAgICAqIG9iamVjdHN0b3Jlcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQsIHRoaXMudmVyc2lvbiA9IGUsIHRoaXMuUHQgPSBuO1xuICAgICAgICAvLyBOT1RFOiBBY2NvcmRpbmcgdG8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE5NzA1MCwgdGhlXG4gICAgICAgIC8vIGJ1ZyB3ZSdyZSBjaGVja2luZyBmb3Igc2hvdWxkIGV4aXN0IGluIGlPUyA+PSAxMi4yIGFuZCA8IDEzLCBidXQgZm9yXG4gICAgICAgIC8vIHdoYXRldmVyIHJlYXNvbiBpdCdzIG11Y2ggaGFyZGVyIHRvIGhpdCBhZnRlciAxMi4yIHNvIHdlIG9ubHkgcHJvYWN0aXZlbHlcbiAgICAgICAgLy8gbG9nIG9uIDEyLjIuXG4gICAgICAgIDEyLjIgPT09IGdpLlZ0KGdldFVBKCkpICYmIEYoXCJGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yIFNhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi8gICAgc3RhdGljIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiBPKFwiU2ltcGxlRGJcIiwgXCJSZW1vdmluZyBkYXRhYmFzZTpcIiwgdCksIEVpKHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UodCkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyB2dCgpIHtcbiAgICAgICAgaWYgKCFpc0luZGV4ZWREQkF2YWlsYWJsZSgpKSByZXR1cm4gITE7XG4gICAgICAgIGlmIChnaS5TdCgpKSByZXR1cm4gITA7XG4gICAgICAgIC8vIFdlIGV4dGVuc2l2ZWx5IHVzZSBpbmRleGVkIGFycmF5IHZhbHVlcyBhbmQgY29tcG91bmQga2V5cyxcbiAgICAgICAgLy8gd2hpY2ggSUUgYW5kIEVkZ2UgZG8gbm90IHN1cHBvcnQuIEhvd2V2ZXIsIHRoZXkgc3RpbGwgaGF2ZSBpbmRleGVkREJcbiAgICAgICAgLy8gZGVmaW5lZCBvbiB0aGUgd2luZG93LCBzbyB3ZSBuZWVkIHRvIGNoZWNrIGZvciB0aGVtIGhlcmUgYW5kIG1ha2Ugc3VyZVxuICAgICAgICAvLyB0byByZXR1cm4gdGhhdCBwZXJzaXN0ZW5jZSBpcyBub3QgZW5hYmxlZCBmb3IgdGhvc2UgYnJvd3NlcnMuXG4gICAgICAgIC8vIEZvciB0cmFja2luZyBzdXBwb3J0IG9mIHRoaXMgZmVhdHVyZSwgc2VlIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1pY3Jvc29mdC5jb20vZW4tdXMvbWljcm9zb2Z0LWVkZ2UvcGxhdGZvcm0vc3RhdHVzL2luZGV4ZWRkYmFycmF5c2FuZG11bHRpZW50cnlzdXBwb3J0L1xuICAgICAgICAvLyBDaGVjayB0aGUgVUEgc3RyaW5nIHRvIGZpbmQgb3V0IHRoZSBicm93c2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBnZXRVQSgpLCBlID0gZ2kuVnQodCksIG4gPSAwIDwgZSAmJiBlIDwgMTAsIHMgPSBnaS5EdCh0KSwgaSA9IDAgPCBzICYmIHMgPCA0LjU7XG4gICAgICAgIC8vIElFIDEwXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChjb21wYXRpYmxlOyBNU0lFIDEwLjA7IFdpbmRvd3MgTlQgNi4yOyBUcmlkZW50LzYuMCknO1xuICAgICAgICAvLyBJRSAxMVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCA2LjM7IFRyaWRlbnQvNy4wOyBydjoxMS4wKSBsaWtlIEdlY2tvJztcbiAgICAgICAgLy8gRWRnZVxuICAgICAgICAvLyB1YSA9ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCxcbiAgICAgICAgLy8gbGlrZSBHZWNrbykgQ2hyb21lLzM5LjAuMjE3MS43MSBTYWZhcmkvNTM3LjM2IEVkZ2UvMTIuMCc7XG4gICAgICAgIC8vIGlPUyBTYWZhcmk6IERpc2FibGUgZm9yIHVzZXJzIHJ1bm5pbmcgaU9TIHZlcnNpb24gPCAxMC5cbiAgICAgICAgICAgICAgICByZXR1cm4gISh0LmluZGV4T2YoXCJNU0lFIFwiKSA+IDAgfHwgdC5pbmRleE9mKFwiVHJpZGVudC9cIikgPiAwIHx8IHQuaW5kZXhPZihcIkVkZ2UvXCIpID4gMCB8fCBuIHx8IGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIGJhY2tpbmcgSW5kZXhlZERCIHN0b3JlIGlzIHRoZSBOb2RlIEluZGV4ZWREQlNoaW1cbiAgICAgKiAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbSkuXG4gICAgICovICAgIHN0YXRpYyBTdCgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBwcm9jZXNzICYmIFwiWUVTXCIgPT09IChudWxsID09PSAodCA9IHByb2Nlc3MuZW52KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LkN0KTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIHh0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoZSk7XG4gICAgfVxuICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAvKiogUGFyc2UgVXNlciBBZ2VudCB0byBkZXRlcm1pbmUgaU9TIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBWdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm1hdGNoKC9pKD86cGhvbmV8cGFkfHBvZCkgb3MgKFtcXGRfXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCJfXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgLyoqIFBhcnNlIFVzZXIgQWdlbnQgdG8gZGV0ZXJtaW5lIEFuZHJvaWQgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIER0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyBOdCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiIHx8IChPKFwiU2ltcGxlRGJcIiwgXCJPcGVuaW5nIGRhdGFiYXNlOlwiLCB0aGlzLm5hbWUpLCB0aGlzLmRiID0gYXdhaXQgbmV3IFByb21pc2UoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEludmVzdGlnYXRlIGJyb3dzZXIgY29tcGF0aWJpbGl0eS5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JbmRleGVkREJfQVBJL1VzaW5nX0luZGV4ZWREQlxuICAgICAgICAgICAgLy8gc3VnZ2VzdHMgSUU5IGFuZCBvbGRlciBXZWJLaXQgYnJvd3NlcnMgaGFuZGxlIHVwZ3JhZGVcbiAgICAgICAgICAgIC8vIGRpZmZlcmVudGx5LiBUaGV5IGV4cGVjdCBzZXRWZXJzaW9uLCBhcyBkZXNjcmliZWQgaGVyZTpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9JREJWZXJzaW9uQ2hhbmdlUmVxdWVzdC9zZXRWZXJzaW9uXG4gICAgICAgICAgICBjb25zdCBzID0gaW5kZXhlZERCLm9wZW4odGhpcy5uYW1lLCB0aGlzLnZlcnNpb24pO1xuICAgICAgICAgICAgcy5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGUobik7XG4gICAgICAgICAgICB9LCBzLm9uYmxvY2tlZCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICBuKG5ldyBwaSh0LCBcIkNhbm5vdCB1cGdyYWRlIEluZGV4ZWREQiBzY2hlbWEgd2hpbGUgYW5vdGhlciB0YWIgaXMgb3Blbi4gQ2xvc2UgYWxsIHRhYnMgdGhhdCBhY2Nlc3MgRmlyZXN0b3JlIGFuZCByZWxvYWQgdGhpcyBwYWdlIHRvIHByb2NlZWQuXCIpKTtcbiAgICAgICAgICAgIH0sIHMub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5lcnJvcjtcbiAgICAgICAgICAgICAgICBcIlZlcnNpb25FcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBRKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJBIG5ld2VyIHZlcnNpb24gb2YgdGhlIEZpcmVzdG9yZSBTREsgd2FzIHByZXZpb3VzbHkgdXNlZCBhbmQgc28gdGhlIHBlcnNpc3RlZCBkYXRhIGlzIG5vdCBjb21wYXRpYmxlIHdpdGggdGhlIHZlcnNpb24gb2YgdGhlIFNESyB5b3UgYXJlIG5vdyB1c2luZy4gVGhlIFNESyB3aWxsIG9wZXJhdGUgd2l0aCBwZXJzaXN0ZW5jZSBkaXNhYmxlZC4gSWYgeW91IG5lZWQgcGVyc2lzdGVuY2UsIHBsZWFzZSByZS11cGdyYWRlIHRvIGEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgU0RLIG9yIGVsc2UgY2xlYXIgdGhlIHBlcnNpc3RlZCBJbmRleGVkREIgZGF0YSBmb3IgeW91ciBhcHAgdG8gc3RhcnQgZnJlc2guXCIpKSA6IFwiSW52YWxpZFN0YXRlRXJyb3JcIiA9PT0gcy5uYW1lID8gbihuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVW5hYmxlIHRvIG9wZW4gYW4gSW5kZXhlZERCIGNvbm5lY3Rpb24uIFRoaXMgY291bGQgYmUgZHVlIHRvIHJ1bm5pbmcgaW4gYSBwcml2YXRlIGJyb3dzaW5nIHNlc3Npb24gb24gYSBicm93c2VyIHdob3NlIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbnMgZG8gbm90IHN1cHBvcnQgSW5kZXhlZERCOiBcIiArIHMpKSA6IG4obmV3IHBpKHQsIHMpKTtcbiAgICAgICAgICAgIH0sIHMub251cGdyYWRlbmVlZGVkID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgTyhcIlNpbXBsZURiXCIsICdEYXRhYmFzZSBcIicgKyB0aGlzLm5hbWUgKyAnXCIgcmVxdWlyZXMgdXBncmFkZSBmcm9tIHZlcnNpb246JywgdC5vbGRWZXJzaW9uKTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMuUHQua3QoZSwgcy50cmFuc2FjdGlvbiwgdC5vbGRWZXJzaW9uLCB0aGlzLnZlcnNpb24pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgTyhcIlNpbXBsZURiXCIsIFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiICsgdGhpcy52ZXJzaW9uICsgXCIgY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpKSwgdGhpcy5NdCAmJiAodGhpcy5kYi5vbnZlcnNpb25jaGFuZ2UgPSB0ID0+IHRoaXMuTXQodCkpLCB0aGlzLmRiO1xuICAgIH1cbiAgICBPdCh0KSB7XG4gICAgICAgIHRoaXMuTXQgPSB0LCB0aGlzLmRiICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IGUgPT4gdChlKSk7XG4gICAgfVxuICAgIGFzeW5jIHJ1blRyYW5zYWN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IFwicmVhZG9ubHlcIiA9PT0gZTtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgICArK3I7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGIgPSBhd2FpdCB0aGlzLk50KHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBtaS5vcGVuKHRoaXMuZGIsIHQsIGkgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBuKSwgciA9IHMoZSkubmV4dCgodCA9PiAoZS5idCgpLCBcbiAgICAgICAgICAgICAgICB0KSkpLmNhdGNoKCh0ID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIGUuYWJvcnQodCksIHdpLnJlamVjdCh0KSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiByLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgZS5SdCwgcjtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IHQubmFtZSAmJiByIDwgMztcbiAgICAgICAgICAgICAgICBpZiAoTyhcIlNpbXBsZURiXCIsIFwiVHJhbnNhY3Rpb24gZmFpbGVkIHdpdGggZXJyb3I6XCIsIHQubWVzc2FnZSwgXCJSZXRyeWluZzpcIiwgZSksIFxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKSwgIWUpIHJldHVybiBQcm9taXNlLnJlamVjdCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kYiAmJiB0aGlzLmRiLmNsb3NlKCksIHRoaXMuZGIgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgY29udHJvbGxlciBmb3IgaXRlcmF0aW5nIG92ZXIgYSBrZXkgcmFuZ2Ugb3IgaW5kZXguIEl0IGFsbG93cyBhbiBpdGVyYXRlXG4gKiBjYWxsYmFjayB0byBkZWxldGUgdGhlIGN1cnJlbnRseS1yZWZlcmVuY2VkIG9iamVjdCwgb3IganVtcCB0byBhIG5ldyBrZXlcbiAqIHdpdGhpbiB0aGUga2V5IHJhbmdlIG9yIGluZGV4LlxuICovIGNsYXNzIHlpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuRnQgPSB0LCB0aGlzLiR0ID0gITEsIHRoaXMuQnQgPSBudWxsO1xuICAgIH1cbiAgICBnZXQgaXNEb25lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kdDtcbiAgICB9XG4gICAgZ2V0IEx0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CdDtcbiAgICB9XG4gICAgc2V0IGN1cnNvcih0KSB7XG4gICAgICAgIHRoaXMuRnQgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLiR0ID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCB0byBza2lwIHRvIHRoYXQgbmV4dCBrZXksIHdoaWNoIGNvdWxkIGJlXG4gICAgICogYW4gaW5kZXggb3IgYSBwcmltYXJ5IGtleS5cbiAgICAgKi8gICAgVXQodCkge1xuICAgICAgICB0aGlzLkJ0ID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiBFaSh0aGlzLkZ0LmRlbGV0ZSgpKTtcbiAgICB9XG59XG5cbi8qKiBBbiBlcnJvciB0aGF0IHdyYXBzIGV4Y2VwdGlvbnMgdGhhdCB0aHJvd24gZHVyaW5nIEluZGV4ZWREQiBleGVjdXRpb24uICovIGNsYXNzIHBpIGV4dGVuZHMgUSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcihLLlVOQVZBSUxBQkxFLCBgSW5kZXhlZERCIHRyYW5zYWN0aW9uICcke3R9JyBmYWlsZWQ6ICR7ZX1gKSwgdGhpcy5uYW1lID0gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCI7XG4gICAgfVxufVxuXG4vKiogVmVyaWZpZXMgd2hldGhlciBgZWAgaXMgYW4gSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvci4gKi8gZnVuY3Rpb24gSWkodCkge1xuICAgIC8vIFVzZSBuYW1lIGVxdWFsaXR5LCBhcyBpbnN0YW5jZW9mIGNoZWNrcyBvbiBlcnJvcnMgZG9uJ3Qgd29yayB3aXRoIGVycm9yc1xuICAgIC8vIHRoYXQgd3JhcCBvdGhlciBlcnJvcnMuXG4gICAgcmV0dXJuIFwiSW5kZXhlZERiVHJhbnNhY3Rpb25FcnJvclwiID09PSB0Lm5hbWU7XG59XG5cbi8qKlxuICogQSB3cmFwcGVyIGFyb3VuZCBhbiBJREJPYmplY3RTdG9yZSBwcm92aWRpbmcgYW4gQVBJIHRoYXQ6XG4gKlxuICogMSkgSGFzIGdlbmVyaWMgS2V5VHlwZSAvIFZhbHVlVHlwZSBwYXJhbWV0ZXJzIHRvIHByb3ZpZGUgc3Ryb25nbHktdHlwZWRcbiAqIG1ldGhvZHMgZm9yIGFjdGluZyBhZ2FpbnN0IHRoZSBvYmplY3Qgc3RvcmUuXG4gKiAyKSBEZWFscyB3aXRoIEluZGV4ZWREQidzIG9uc3VjY2VzcyAvIG9uZXJyb3IgZXZlbnQgY2FsbGJhY2tzLCBtYWtpbmcgZXZlcnlcbiAqIG1ldGhvZCByZXR1cm4gYSBQZXJzaXN0ZW5jZVByb21pc2UgaW5zdGVhZC5cbiAqIDMpIFByb3ZpZGVzIGEgaGlnaGVyLWxldmVsIEFQSSB0byBhdm9pZCBuZWVkaW5nIHRvIGRvIGV4Y2Vzc2l2ZSB3cmFwcGluZyBvZlxuICogaW50ZXJtZWRpYXRlIEluZGV4ZWREQiB0eXBlcyAoSURCQ3Vyc29yV2l0aFZhbHVlLCBldGMuKVxuICovIGNsYXNzIFRpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3RvcmUgPSB0O1xuICAgIH1cbiAgICBwdXQodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gZSA/IChPKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgbiA9IHRoaXMuc3RvcmUucHV0KGUsIHQpKSA6IChPKFwiU2ltcGxlRGJcIiwgXCJQVVRcIiwgdGhpcy5zdG9yZS5uYW1lLCBcIjxhdXRvLWtleT5cIiwgdCksIFxuICAgICAgICBuID0gdGhpcy5zdG9yZS5wdXQodCkpLCBFaShuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyB2YWx1ZSBpbnRvIGFuIE9iamVjdCBTdG9yZSBhbmQgcmV0dXJucyB0aGUgbmV3IGtleS4gU2ltaWxhciB0b1xuICAgICAqIEluZGV4ZWREYidzIGBhZGQoKWAsIHRoaXMgbWV0aG9kIHdpbGwgZmFpbCBvbiBwcmltYXJ5IGtleSBjb2xsaXNpb25zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIG9iamVjdCB0byB3cml0ZS5cbiAgICAgKiBAcmV0dXJucyBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBhZGQuXG4gICAgICovICAgIGFkZCh0KSB7XG4gICAgICAgIE8oXCJTaW1wbGVEYlwiLCBcIkFERFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIHQpO1xuICAgICAgICByZXR1cm4gRWkodGhpcy5zdG9yZS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvYmplY3Qgd2l0aCB0aGUgc3BlY2lmaWVkIGtleSBmcm9tIHRoZSBzcGVjaWZpZWQgc3RvcmUsIG9yIG51bGxcbiAgICAgKiBpZiBubyBvYmplY3QgZXhpc3RzIHdpdGggdGhlIHNwZWNpZmllZCBrZXkuXG4gICAgICpcbiAgICAgKiBAa2V5IFRoZSBrZXkgb2YgdGhlIG9iamVjdCB0byBnZXQuXG4gICAgICogQHJldHVybnMgVGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IG9yIG51bGwgaWYgbm8gb2JqZWN0IGV4aXN0cy5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgLy8gV2UncmUgZG9pbmcgYW4gdW5zYWZlIGNhc3QgdG8gVmFsdWVUeXBlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gRWkodGhpcy5zdG9yZS5nZXQodCkpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBOb3JtYWxpemUgbm9uZXhpc3RlbmNlIHRvIG51bGwuXG4gICAgICAgIHZvaWQgMCA9PT0gZSAmJiAoZSA9IG51bGwpLCBPKFwiU2ltcGxlRGJcIiwgXCJHRVRcIiwgdGhpcy5zdG9yZS5uYW1lLCB0LCBlKSwgZSkpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgTyhcIlNpbXBsZURiXCIsIFwiREVMRVRFXCIsIHRoaXMuc3RvcmUubmFtZSwgdCk7XG4gICAgICAgIHJldHVybiBFaSh0aGlzLnN0b3JlLmRlbGV0ZSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHdlIGV2ZXIgbmVlZCBtb3JlIG9mIHRoZSBjb3VudCB2YXJpYW50cywgd2UgY2FuIGFkZCBvdmVybG9hZHMuIEZvciBub3csXG4gICAgICogYWxsIHdlIG5lZWQgaXMgdG8gY291bnQgZXZlcnl0aGluZyBpbiBhIHN0b3JlLlxuICAgICAqXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIHN0b3JlLlxuICAgICAqLyAgICBjb3VudCgpIHtcbiAgICAgICAgTyhcIlNpbXBsZURiXCIsIFwiQ09VTlRcIiwgdGhpcy5zdG9yZS5uYW1lKTtcbiAgICAgICAgcmV0dXJuIEVpKHRoaXMuc3RvcmUuY291bnQoKSk7XG4gICAgfVxuICAgIHF0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub3B0aW9ucyh0LCBlKTtcbiAgICAgICAgLy8gVXNlIGBnZXRBbGwoKWAgaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgSW5kZXhlZERCIHYzLCBhcyBpdCBpcyByb3VnaGx5XG4gICAgICAgIC8vIDIwJSBmYXN0ZXIuIFVuZm9ydHVuYXRlbHksIGdldEFsbCgpIGRvZXMgbm90IHN1cHBvcnQgY3VzdG9tIGluZGljZXMuXG4gICAgICAgICAgICAgICAgaWYgKG4uaW5kZXggfHwgXCJmdW5jdGlvblwiICE9IHR5cGVvZiB0aGlzLnN0b3JlLmdldEFsbCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuY3Vyc29yKG4pLCBlID0gW107XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5HdCh0LCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlLnB1c2gobik7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnN0b3JlLmdldEFsbChuLnJhbmdlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgd2koKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG4odC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0sIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUodC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBmaXJzdCBgY291bnRgIGVsZW1lbnRzIGZyb20gdGhlIHByb3ZpZGVkIGluZGV4IHJhbmdlLiBMb2FkcyBhbGxcbiAgICAgKiBlbGVtZW50cyBpZiBubyBsaW1pdCBpcyBwcm92aWRlZC5cbiAgICAgKi8gICAgS3QodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5nZXRBbGwodCwgbnVsbCA9PT0gZSA/IHZvaWQgMCA6IGUpO1xuICAgICAgICByZXR1cm4gbmV3IHdpKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbi5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgZSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCBuLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIHQoZS50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgUXQodCwgZSkge1xuICAgICAgICBPKFwiU2ltcGxlRGJcIiwgXCJERUxFVEUgQUxMXCIsIHRoaXMuc3RvcmUubmFtZSk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnModCwgZSk7XG4gICAgICAgIG4uanQgPSAhMTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5HdChzLCAoKHQsIGUsIG4pID0+IG4uZGVsZXRlKCkpKTtcbiAgICB9XG4gICAgV3QodCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgZSA/IG4gPSB0IDogKG4gPSB7fSwgZSA9IHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdXJzb3Iobik7XG4gICAgICAgIHJldHVybiB0aGlzLkd0KHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICB6dCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmN1cnNvcih7fSk7XG4gICAgICAgIHJldHVybiBuZXcgd2koKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBlLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gUmkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIHMoZSk7XG4gICAgICAgICAgICB9LCBlLm9uc3VjY2VzcyA9IGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgcyA/IHQocy5wcmltYXJ5S2V5LCBzLnZhbHVlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdCA/IHMuY29udGludWUoKSA6IG4oKTtcbiAgICAgICAgICAgICAgICB9KSkgOiBuKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEd0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICByZXR1cm4gbmV3IHdpKCgocywgaSkgPT4ge1xuICAgICAgICAgICAgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgaSh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICB9LCB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpKSByZXR1cm4gdm9pZCBzKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyB5aShpKSwgbyA9IGUoaS5wcmltYXJ5S2V5LCBpLnZhbHVlLCByKTtcbiAgICAgICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIHdpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBvLmNhdGNoKCh0ID0+IChyLmRvbmUoKSwgd2kucmVqZWN0KHQpKSkpO1xuICAgICAgICAgICAgICAgICAgICBuLnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHIuaXNEb25lID8gcygpIDogbnVsbCA9PT0gci5MdCA/IGkuY29udGludWUoKSA6IGkuY29udGludWUoci5MdCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gd2kud2FpdEZvcihuKSkpO1xuICAgIH1cbiAgICBvcHRpb25zKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHQgJiYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBuID0gdCA6IGUgPSB0KSwge1xuICAgICAgICAgICAgaW5kZXg6IG4sXG4gICAgICAgICAgICByYW5nZTogZVxuICAgICAgICB9O1xuICAgIH1cbiAgICBjdXJzb3IodCkge1xuICAgICAgICBsZXQgZSA9IFwibmV4dFwiO1xuICAgICAgICBpZiAodC5yZXZlcnNlICYmIChlID0gXCJwcmV2XCIpLCB0LmluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yZS5pbmRleCh0LmluZGV4KTtcbiAgICAgICAgICAgIHJldHVybiB0Lmp0ID8gbi5vcGVuS2V5Q3Vyc29yKHQucmFuZ2UsIGUpIDogbi5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnN0b3JlLm9wZW5DdXJzb3IodC5yYW5nZSwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFdyYXBzIGFuIElEQlJlcXVlc3QgaW4gYSBQZXJzaXN0ZW5jZVByb21pc2UsIHVzaW5nIHRoZSBvbnN1Y2Nlc3MgLyBvbmVycm9yXG4gKiBoYW5kbGVycyB0byByZXNvbHZlIC8gcmVqZWN0IHRoZSBQZXJzaXN0ZW5jZVByb21pc2UgYXMgYXBwcm9wcmlhdGUuXG4gKi8gZnVuY3Rpb24gRWkodCkge1xuICAgIHJldHVybiBuZXcgd2koKChlLCBuKSA9PiB7XG4gICAgICAgIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgZShuKTtcbiAgICAgICAgfSwgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gUmkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgbihlKTtcbiAgICAgICAgfTtcbiAgICB9KSk7XG59XG5cbi8vIEd1YXJkIHNvIHdlIG9ubHkgcmVwb3J0IHRoZSBlcnJvciBvbmNlLlxubGV0IEFpID0gITE7XG5cbmZ1bmN0aW9uIFJpKHQpIHtcbiAgICBjb25zdCBlID0gZ2kuVnQoZ2V0VUEoKSk7XG4gICAgaWYgKGUgPj0gMTIuMiAmJiBlIDwgMTMpIHtcbiAgICAgICAgY29uc3QgZSA9IFwiQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGVuY291bnRlcmVkIGluIHRoZSBJbmRleGVkIERhdGFiYXNlIHNlcnZlclwiO1xuICAgICAgICBpZiAodC5tZXNzYWdlLmluZGV4T2YoZSkgPj0gMCkge1xuICAgICAgICAgICAgLy8gV3JhcCBlcnJvciBpbiBhIG1vcmUgZGVzY3JpcHRpdmUgb25lLlxuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBRKFwiaW50ZXJuYWxcIiwgYElPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJyR7ZX0nLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuYCk7XG4gICAgICAgICAgICByZXR1cm4gQWkgfHwgKEFpID0gITAsIFxuICAgICAgICAgICAgLy8gVGhyb3cgYSBnbG9iYWwgZXhjZXB0aW9uIG91dHNpZGUgb2YgdGhpcyBwcm9taXNlIGNoYWluLCBmb3IgdGhlIHVzZXIgdG9cbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGNhdGNoLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgICAgICB9KSwgMCkpLCB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBiaSBleHRlbmRzIF9pIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuSHQgPSB0LCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBQaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgcmV0dXJuIGdpLnh0KG4uSHQsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGJhdGNoIG9mIG11dGF0aW9ucyB0aGF0IHdpbGwgYmUgc2VudCBhcyBvbmUgdW5pdCB0byB0aGUgYmFja2VuZC5cbiAqLyBjbGFzcyBWaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgdW5pcXVlIElEIG9mIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIG9yaWdpbmFsIHdyaXRlIHRpbWUgb2YgdGhpcyBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYmFzZU11dGF0aW9ucyAtIE11dGF0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHBvcHVsYXRlIHRoZSBiYXNlXG4gICAgICogdmFsdWVzIHdoZW4gdGhpcyBtdXRhdGlvbiBpcyBhcHBsaWVkIGxvY2FsbHkuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9jYWxseVxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcbiAgICAgKiBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXG4gICAgICogQHBhcmFtIG11dGF0aW9ucyAtIFRoZSB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucyBpbiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIFVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGFyZSBhcHBsaWVkIGJvdGggbG9jYWxseSBhbmQgcmVtb3RlbHkgb24gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IHQsIHRoaXMubG9jYWxXcml0ZVRpbWUgPSBlLCB0aGlzLmJhc2VNdXRhdGlvbnMgPSBuLCB0aGlzLm11dGF0aW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcbiAgICAgKiB0byBjb21wdXRlIHRoZSBzdGF0ZSBvZiB0aGUgcmVtb3RlIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBiYXRjaFJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi8gICAgYXBwbHlUb1JlbW90ZURvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25SZXN1bHRzO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubXV0YXRpb25zLmxlbmd0aDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5tdXRhdGlvbnNbZV07XG4gICAgICAgICAgICBpZiAocy5rZXkuaXNFcXVhbCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICBnbihzLCB0LCBuW2VdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50IGdpdmVuIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXNcbiAgICAgKiBiYXRjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbFZpZXcodCkge1xuICAgICAgICAvLyBGaXJzdCwgYXBwbHkgdGhlIGJhc2Ugc3RhdGUuIFRoaXMgYWxsb3dzIHVzIHRvIGFwcGx5IG5vbi1pZGVtcG90ZW50XG4gICAgICAgIC8vIHRyYW5zZm9ybSBhZ2FpbnN0IGEgY29uc2lzdGVudCBzZXQgb2YgdmFsdWVzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5iYXNlTXV0YXRpb25zKSBlLmtleS5pc0VxdWFsKHQua2V5KSAmJiB5bihlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKTtcbiAgICAgICAgLy8gU2Vjb25kLCBhcHBseSBhbGwgdXNlci1wcm92aWRlZCBtdXRhdGlvbnMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMubXV0YXRpb25zKSBlLmtleS5pc0VxdWFsKHQua2V5KSAmJiB5bihlLCB0LCB0aGlzLmxvY2FsV3JpdGVUaW1lKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcHV0ZXMgdGhlIGxvY2FsIHZpZXcgZm9yIGFsbCBwcm92aWRlZCBkb2N1bWVudHMgZ2l2ZW4gdGhlIG11dGF0aW9ucyBpblxuICAgICAqIHRoaXMgYmF0Y2guXG4gICAgICovICAgIGFwcGx5VG9Mb2NhbERvY3VtZW50U2V0KHQpIHtcbiAgICAgICAgLy8gVE9ETyhtcnNjaG1pZHQpOiBUaGlzIGltcGxlbWVudGF0aW9uIGlzIE8obl4yKS4gSWYgd2UgYXBwbHkgdGhlIG11dGF0aW9uc1xuICAgICAgICAvLyBkaXJlY3RseSAoYXMgZG9uZSBpbiBgYXBwbHlUb0xvY2FsVmlldygpYCksIHdlIGNhbiByZWR1Y2UgdGhlIGNvbXBsZXhpdHlcbiAgICAgICAgLy8gdG8gTyhuKS5cbiAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5nZXQoZS5rZXkpLCBzID0gbjtcbiAgICAgICAgICAgIC8vIFRPRE8obXV0YWJsZWRvY3VtZW50cyk6IFRoaXMgbWV0aG9kIHNob3VsZCB0YWtlIGEgTXV0YWJsZURvY3VtZW50TWFwXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGNhc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5VG9Mb2NhbFZpZXcocyksIG4uaXNWYWxpZERvY3VtZW50KCkgfHwgcy5jb252ZXJ0VG9Ob0RvY3VtZW50KGN0Lm1pbigpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBrZXlzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMucmVkdWNlKCgodCwgZSkgPT4gdC5hZGQoZS5rZXkpKSwgem4oKSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iYXRjaElkID09PSB0LmJhdGNoSWQgJiYgb3QodGhpcy5tdXRhdGlvbnMsIHQubXV0YXRpb25zLCAoKHQsIGUpID0+IEluKHQsIGUpKSkgJiYgb3QodGhpcy5iYXNlTXV0YXRpb25zLCB0LmJhc2VNdXRhdGlvbnMsICgodCwgZSkgPT4gSW4odCwgZSkpKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIGEgbXV0YXRpb24gYmF0Y2ggdG8gdGhlIGJhY2tlbmQuICovIGNsYXNzIHZpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBcbiAgICAvKipcbiAgICAgKiBBIHByZS1jb21wdXRlZCBtYXBwaW5nIGZyb20gZWFjaCBtdXRhdGVkIGRvY3VtZW50IHRvIHRoZSByZXN1bHRpbmdcbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqL1xuICAgIHMpIHtcbiAgICAgICAgdGhpcy5iYXRjaCA9IHQsIHRoaXMuY29tbWl0VmVyc2lvbiA9IGUsIHRoaXMubXV0YXRpb25SZXN1bHRzID0gbiwgdGhpcy5kb2NWZXJzaW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTXV0YXRpb25CYXRjaFJlc3VsdCBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCByZXN1bHRzLiBUaGVyZVxuICAgICAqIG11c3QgYmUgb25lIHJlc3VsdCBmb3IgZWFjaCBtdXRhdGlvbiBpbiB0aGUgYmF0Y2guIFRoaXMgc3RhdGljIGZhY3RvcnlcbiAgICAgKiBjYWNoZXMgYSBkb2N1bWVudD0mZ3Q7dmVyc2lvbiBtYXBwaW5nIChkb2NWZXJzaW9ucykuXG4gICAgICovICAgIHN0YXRpYyBmcm9tKHQsIGUsIG4pIHtcbiAgICAgICAgVSh0Lm11dGF0aW9ucy5sZW5ndGggPT09IG4ubGVuZ3RoKTtcbiAgICAgICAgbGV0IHMgPSBqbjtcbiAgICAgICAgY29uc3QgaSA9IHQubXV0YXRpb25zO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGkubGVuZ3RoOyB0KyspIHMgPSBzLmluc2VydChpW3RdLmtleSwgblt0XS52ZXJzaW9uKTtcbiAgICAgICAgcmV0dXJuIG5ldyB2aSh0LCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudGF0aW9uIG9mIGFuIG92ZXJsYXkgY29tcHV0ZWQgYnkgRmlyZXN0b3JlLlxuICpcbiAqIEhvbGRzIGluZm9ybWF0aW9uIGFib3V0IGEgbXV0YXRpb24gYW5kIHRoZSBsYXJnZXN0IGJhdGNoIGlkIGluIEZpcmVzdG9yZSB3aGVuXG4gKiB0aGUgbXV0YXRpb24gd2FzIGNyZWF0ZWQuXG4gKi8gY2xhc3MgU2kge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sYXJnZXN0QmF0Y2hJZCA9IHQsIHRoaXMubXV0YXRpb24gPSBlO1xuICAgIH1cbiAgICBnZXRLZXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uLmtleTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0ICYmIHRoaXMubXV0YXRpb24gPT09IHQubXV0YXRpb247XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gYE92ZXJsYXl7XFxuICAgICAgbGFyZ2VzdEJhdGNoSWQ6ICR7dGhpcy5sYXJnZXN0QmF0Y2hJZH0sXFxuICAgICAgbXV0YXRpb246ICR7dGhpcy5tdXRhdGlvbi50b1N0cmluZygpfVxcbiAgICB9YDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBzZXQgb2YgbWV0YWRhdGEgdGhhdCB0aGUgbG9jYWwgc3RvcmUgdHJhY2tzIGZvciBlYWNoIHRhcmdldC5cbiAqLyBjbGFzcyBEaSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSB0YXJnZXQgYmVpbmcgbGlzdGVuZWQgdG8uICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHRhcmdldCBJRCB0byB3aGljaCB0aGUgdGFyZ2V0IGNvcnJlc3BvbmRzOyBBc3NpZ25lZCBieSB0aGVcbiAgICAgKiBMb2NhbFN0b3JlIGZvciB1c2VyIGxpc3RlbnMgYW5kIGJ5IHRoZSBTeW5jRW5naW5lIGZvciBsaW1ibyB3YXRjaGVzLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUgcHVycG9zZSBvZiB0aGUgdGFyZ2V0LiAqL1xuICAgIG4sIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXF1ZW5jZSBudW1iZXIgb2YgdGhlIGxhc3QgdHJhbnNhY3Rpb24gZHVyaW5nIHdoaWNoIHRoaXMgdGFyZ2V0IGRhdGFcbiAgICAgKiB3YXMgbW9kaWZpZWQuXG4gICAgICovXG4gICAgcywgXG4gICAgLyoqIFRoZSBsYXRlc3Qgc25hcHNob3QgdmVyc2lvbiBzZWVuIGZvciB0aGlzIHRhcmdldC4gKi9cbiAgICBpID0gY3QubWluKClcbiAgICAvKipcbiAgICAgKiBUaGUgbWF4aW11bSBzbmFwc2hvdCB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBhc3NvY2lhdGVkIHZpZXdcbiAgICAgKiBjb250YWluZWQgbm8gbGltYm8gZG9jdW1lbnRzLlxuICAgICAqLyAsIHIgPSBjdC5taW4oKVxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgdGFyZ2V0IHRvIGJlXG4gICAgICogcmVzdW1lZCBhZnRlciBkaXNjb25uZWN0aW5nIHdpdGhvdXQgcmV0cmFuc21pdHRpbmcgYWxsIHRoZSBkYXRhIHRoYXRcbiAgICAgKiBtYXRjaGVzIHRoZSB0YXJnZXQuIFRoZSByZXN1bWUgdG9rZW4gZXNzZW50aWFsbHkgaWRlbnRpZmllcyBhIHBvaW50IGluXG4gICAgICogdGltZSBmcm9tIHdoaWNoIHRoZSBzZXJ2ZXIgc2hvdWxkIHJlc3VtZSBzZW5kaW5nIHJlc3VsdHMuXG4gICAgICovICwgbyA9IHB0LkVNUFRZX0JZVEVfU1RSSU5HKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdCwgdGhpcy50YXJnZXRJZCA9IGUsIHRoaXMucHVycG9zZSA9IG4sIHRoaXMuc2VxdWVuY2VOdW1iZXIgPSBzLCB0aGlzLnNuYXBzaG90VmVyc2lvbiA9IGksIFxuICAgICAgICB0aGlzLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gPSByLCB0aGlzLnJlc3VtZVRva2VuID0gbztcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIHNlcXVlbmNlIG51bWJlci4gKi8gICAgd2l0aFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0LCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0aGlzLnJlc3VtZVRva2VuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGkodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgZSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgbGFzdCBsaW1ibyBmcmVlXG4gICAgICogc25hcHNob3QgdmVyc2lvbiBudW1iZXIuXG4gICAgICovICAgIHdpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEaSh0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRJZCwgdGhpcy5wdXJwb3NlLCB0aGlzLnNlcXVlbmNlTnVtYmVyLCB0aGlzLnNuYXBzaG90VmVyc2lvbiwgdCwgdGhpcy5yZXN1bWVUb2tlbik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIENpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuSnQgPSB0O1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24geGkodCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlLmRvY3VtZW50KSBuID0gRXModC5KdCwgZS5kb2N1bWVudCwgISFlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7IGVsc2UgaWYgKGUubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0geHQuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSwgcyA9IE9pKGUubm9Eb2N1bWVudC5yZWFkVGltZSk7XG4gICAgICAgIG4gPSB0ZS5uZXdOb0RvY3VtZW50KHQsIHMpLCBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiBuLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghZS51bmtub3duRG9jdW1lbnQpIHJldHVybiBMKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB4dC5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCksIHMgPSBPaShlLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgICAgIG4gPSB0ZS5uZXdVbmtub3duRG9jdW1lbnQodCwgcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUucmVhZFRpbWUgJiYgbi5zZXRSZWFkVGltZShmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgYXQodFswXSwgdFsxXSk7XG4gICAgICAgIHJldHVybiBjdC5mcm9tVGltZXN0YW1wKGUpO1xuICAgIH0oZS5yZWFkVGltZSkpLCBuO1xufVxuXG4vKiogRW5jb2RlcyBhIGRvY3VtZW50IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIE5pKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSB7XG4gICAgICAgIHByZWZpeFBhdGg6IG4uZ2V0Q29sbGVjdGlvblBhdGgoKS5wb3BMYXN0KCkudG9BcnJheSgpLFxuICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IG4uY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBkb2N1bWVudElkOiBuLnBhdGgubGFzdFNlZ21lbnQoKSxcbiAgICAgICAgcmVhZFRpbWU6IGtpKGUucmVhZFRpbWUpLFxuICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgfTtcbiAgICBpZiAoZS5pc0ZvdW5kRG9jdW1lbnQoKSkgcy5kb2N1bWVudCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6IHdzKHQsIGUua2V5KSxcbiAgICAgICAgICAgIGZpZWxkczogZS5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IGNzKHQsIGUudmVyc2lvbi50b1RpbWVzdGFtcCgpKVxuICAgICAgICB9O1xuICAgIH0odC5KdCwgZSk7IGVsc2UgaWYgKGUuaXNOb0RvY3VtZW50KCkpIHMubm9Eb2N1bWVudCA9IHtcbiAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgcmVhZFRpbWU6IE1pKGUudmVyc2lvbilcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCFlLmlzVW5rbm93bkRvY3VtZW50KCkpIHJldHVybiBMKCk7XG4gICAgICAgIHMudW5rbm93bkRvY3VtZW50ID0ge1xuICAgICAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHZlcnNpb246IE1pKGUudmVyc2lvbilcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbmZ1bmN0aW9uIGtpKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBNaSh0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zZWNvbmRzOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gT2kodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgYXQodC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gY3QuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBGaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IChlLmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgoZSA9PiBQcyh0Lkp0LCBlKSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKyt0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uc1t0XTtcbiAgICAgICAgaWYgKHQgKyAxIDwgZS5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gZS5tdXRhdGlvbnNbdCArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubXV0YXRpb25zW3QgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHMudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgZS5tdXRhdGlvbnMuc3BsaWNlKHQgKyAxLCAxKSwgXG4gICAgICAgICAgICArK3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcyA9IGUubXV0YXRpb25zLm1hcCgoZSA9PiBQcyh0Lkp0LCBlKSkpLCBpID0gYXQuZnJvbU1pbGxpcyhlLmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgVmkoZS5iYXRjaElkLCBpLCBuLCBzKTtcbn1cblxuLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi8gZnVuY3Rpb24gJGkodCkge1xuICAgIGNvbnN0IGUgPSBPaSh0LnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gdC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gT2kodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA6IGN0Lm1pbigpO1xuICAgIGxldCBzO1xuICAgIHZhciBpO1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQucXVlcnkuZG9jdW1lbnRzID8gKFUoMSA9PT0gKGkgPSB0LnF1ZXJ5KS5kb2N1bWVudHMubGVuZ3RoKSwgXG4gICAgcyA9IExlKE5lKHlzKGkuZG9jdW1lbnRzWzBdKSkpKSA6IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBMZShEcyh0KSk7XG4gICAgfSh0LnF1ZXJ5KSwgbmV3IERpKHMsIHQudGFyZ2V0SWQsIDAgLyogTGlzdGVuICovICwgdC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGUsIG4sIHB0LmZyb21CYXNlNjRTdHJpbmcodC5yZXN1bWVUb2tlbikpO1xufVxuXG4vKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBCaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IE1pKGUuc25hcHNob3RWZXJzaW9uKSwgcyA9IE1pKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XG4gICAgbGV0IGk7XG4gICAgaSA9IHdlKGUudGFyZ2V0KSA/IHZzKHQuSnQsIGUudGFyZ2V0KSA6IFNzKHQuSnQsIGUudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgciA9IGUucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0SWQ6IGUudGFyZ2V0SWQsXG4gICAgICAgIGNhbm9uaWNhbElkOiBmZShlLnRhcmdldCksXG4gICAgICAgIHJlYWRUaW1lOiBuLFxuICAgICAgICByZXN1bWVUb2tlbjogcixcbiAgICAgICAgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyOiBlLnNlcXVlbmNlTnVtYmVyLFxuICAgICAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uOiBzLFxuICAgICAgICBxdWVyeTogaVxuICAgIH07XG59XG5cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIExpKHQpIHtcbiAgICBjb25zdCBlID0gRHMoe1xuICAgICAgICBwYXJlbnQ6IHQucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHQuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSB0LmxpbWl0VHlwZSA/IFVlKGUsIGUubGltaXQsIFwiTFwiIC8qIExhc3QgKi8pIDogZTtcbn1cblxuLyoqIEVuY29kZXMgYSBOYW1lZFF1ZXJ5IHByb3RvIG9iamVjdCB0byBhIE5hbWVkUXVlcnkgbW9kZWwgb2JqZWN0LiAqL1xuLyoqIEVuY29kZXMgYSBEYkRvY3VtZW50T3ZlcmxheSBvYmplY3QgdG8gYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QuICovXG5mdW5jdGlvbiBVaSh0LCBlKSB7XG4gICAgcmV0dXJuIG5ldyBTaShlLmxhcmdlc3RCYXRjaElkLCBQcyh0Lkp0LCBlLm92ZXJsYXlNdXRhdGlvbikpO1xufVxuXG4vKiogRGVjb2RlcyBhbiBPdmVybGF5IG1vZGVsIG9iamVjdCBpbnRvIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBEYkRvY3VtZW50T3ZlcmxheUtleSBjb3JyZXNwb25kaW5nIHRvIHRoZSBnaXZlbiB1c2VyIGFuZFxuICogZG9jdW1lbnQga2V5LlxuICovXG5mdW5jdGlvbiBxaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgIHJldHVybiBbIHQsIFVzKGUucGF0aC5wb3BMYXN0KCkpLCBuIF07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5jbGFzcyBHaSB7XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gS2kodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IChlID0gdCkuYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogT2koZS5jcmVhdGVUaW1lKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIERiQnVuZGxlIHRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHRvIGEgRGJCdW5kbGUuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBLaSh0KS5wdXQoe1xuICAgICAgICAgICAgYnVuZGxlSWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBNaShmcyhuLmNyZWF0ZVRpbWUpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIC8qKiBFbmNvZGVzIGEgRGJOYW1lZFF1ZXJ5IHRvIGEgTmFtZWRRdWVyeS4gKi8gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gUWkodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogKGUgPSB0KS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiBMaShlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IE9pKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgZnJvbSBhIGJ1bmRsZSBwcm90byB0byBhIERiTmFtZWRRdWVyeS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gUWkodCkucHV0KGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBNaShmcyh0LnJlYWRUaW1lKSksXG4gICAgICAgICAgICAgICAgYnVuZGxlZFF1ZXJ5OiB0LmJ1bmRsZWRRdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgYnVuZGxlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gS2kodCkge1xuICAgIHJldHVybiBQaSh0LCBcImJ1bmRsZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBuYW1lZFF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFFpKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJuYW1lZFF1ZXJpZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIERvY3VtZW50T3ZlcmxheUNhY2hlIHVzaW5nIEluZGV4ZWREYi5cbiAqLyBjbGFzcyBqaSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXJJZCBmb3Igd2hpY2ggd2UgYXJlIGFjY2Vzc2luZyBvdmVybGF5cy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuTSA9IHQsIHRoaXMudXNlcklkID0gZTtcbiAgICB9XG4gICAgc3RhdGljIFl0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudWlkIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgamkodCwgbik7XG4gICAgfVxuICAgIGdldE92ZXJsYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gV2kodCkuZ2V0KHFpKHRoaXMudXNlcklkLCBlKSkubmV4dCgodCA9PiB0ID8gVWkodGhpcy5NLCB0KSA6IG51bGwpKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IG5ldyBTaShlLCBpKTtcbiAgICAgICAgICAgIHMucHVzaCh0aGlzLlh0KHQsIHIpKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IFNldDtcbiAgICAgICAgLy8gR2V0IHRoZSBzZXQgb2YgdW5pcXVlIGNvbGxlY3Rpb24gcGF0aHMuXG4gICAgICAgICAgICAgICAgZS5mb3JFYWNoKCh0ID0+IHMuYWRkKFVzKHQuZ2V0Q29sbGVjdGlvblBhdGgoKSkpKSk7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgZSwgbiBdLCBbIHRoaXMudXNlcklkLCBlLCBuICsgMSBdLCBcbiAgICAgICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgICAgIGkucHVzaChXaSh0KS5RdChcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHMpKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gUW4oKSwgaSA9IFVzKGUpLCByID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgaSwgbiBdLCBbIHRoaXMudXNlcklkLCBpLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIFdpKHQpLnF0KFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgcikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBVaSh0aGlzLk0sIGUpO1xuICAgICAgICAgICAgICAgIHMuc2V0KHQuZ2V0S2V5KCksIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gUW4oKTtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIC8vIFdlIHdhbnQgYmF0Y2ggSURzIGxhcmdlciB0aGFuIGBzaW5jZUJhdGNoSWRgLCBhbmQgc28gdGhlIGxvd2VyIGJvdW5kXG4gICAgICAgIC8vIGlzIG5vdCBpbmNsdXNpdmUuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGUsIG4gXSwgWyB0aGlzLnVzZXJJZCwgZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBXaSh0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJjb2xsZWN0aW9uR3JvdXBPdmVybGF5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBvXG4gICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgLy8gV2UgZG8gbm90IHdhbnQgdG8gcmV0dXJuIHBhcnRpYWwgYmF0Y2ggb3ZlcmxheXMsIGV2ZW4gaWYgdGhlIHNpemVcbiAgICAgICAgICAgIC8vIG9mIHRoZSByZXN1bHQgc2V0IGV4Y2VlZHMgdGhlIGdpdmVuIGBjb3VudGAgYXJndW1lbnQuIFRoZXJlZm9yZSwgd2VcbiAgICAgICAgICAgIC8vIGNvbnRpbnVlIHRvIGFnZ3JlZ2F0ZSByZXN1bHRzIGV2ZW4gYWZ0ZXIgdGhlIHJlc3VsdCBzaXplIGV4Y2VlZHNcbiAgICAgICAgICAgIC8vIGBjb3VudGAgaWYgdGhlcmUgYXJlIG1vcmUgb3ZlcmxheXMgZnJvbSB0aGUgYGN1cnJlbnRCYXRjaElkYC5cbiAgICAgICAgICAgIGNvbnN0IG8gPSBVaSh0aGlzLk0sIGUpO1xuICAgICAgICAgICAgaS5zaXplKCkgPCBzIHx8IG8ubGFyZ2VzdEJhdGNoSWQgPT09IHIgPyAoaS5zZXQoby5nZXRLZXkoKSwgbyksIHIgPSBvLmxhcmdlc3RCYXRjaElkKSA6IG4uZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBYdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBXaSh0KS5wdXQoZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgY29uc3QgW3MsIGksIHJdID0gcWkoZSwgbi5tdXRhdGlvbi5rZXkpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1c2VySWQ6IGUsXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvblBhdGg6IGksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZDogcixcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IG4ubXV0YXRpb24ua2V5LmdldENvbGxlY3Rpb25Hcm91cCgpLFxuICAgICAgICAgICAgICAgIGxhcmdlc3RCYXRjaElkOiBuLmxhcmdlc3RCYXRjaElkLFxuICAgICAgICAgICAgICAgIG92ZXJsYXlNdXRhdGlvbjogYnModC5KdCwgbi5tdXRhdGlvbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odGhpcy5NLCB0aGlzLnVzZXJJZCwgZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IG92ZXJsYXkgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFdpKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJkb2N1bWVudE92ZXJsYXlzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gTm90ZTogVGhpcyBjb2RlIGlzIGNvcGllZCBmcm9tIHRoZSBiYWNrZW5kLiBDb2RlIHRoYXQgaXMgbm90IHVzZWQgYnlcbi8vIEZpcmVzdG9yZSB3YXMgcmVtb3ZlZC5cbi8qKiBGaXJlc3RvcmUgaW5kZXggdmFsdWUgd3JpdGVyLiAgKi9cbmNsYXNzIHppIHtcbiAgICBjb25zdHJ1Y3RvcigpIHt9XG4gICAgLy8gVGhlIHdyaXRlIG1ldGhvZHMgYmVsb3cgc2hvcnQtY2lyY3VpdCB3cml0aW5nIHRlcm1pbmF0b3JzIGZvciB2YWx1ZXNcbiAgICAvLyBjb250YWluaW5nIGEgKHRlcm1pbmF0aW5nKSB0cnVuY2F0ZWQgdmFsdWUuXG4gICAgLy8gQXMgYW4gZXhhbXBsZSwgY29uc2lkZXIgdGhlIHJlc3VsdGluZyBlbmNvZGluZyBmb3I6XG4gICAgLy8gW1wiYmFyXCIsIFsyLCBcImZvb1wiXV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVksIE5VTUJFUiwgMiwgU1RSSU5HLCBcImZvb1wiLCBURVJNLCBURVJNLCBURVJNKVxuICAgIC8vIFtcImJhclwiLCBbMiwgdHJ1bmNhdGVkKFwiZm9vXCIpXV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVksIE5VTUJFUiwgMiwgU1RSSU5HLCBcImZvb1wiLCBUUlVOQylcbiAgICAvLyBbXCJiYXJcIiwgdHJ1bmNhdGVkKFtcImZvb1wiXSldIC0+IChTVFJJTkcsIFwiYmFyXCIsIFRFUk0sIEFSUkFZLiBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRSVU5DKVxuICAgIC8qKiBXcml0ZXMgYW4gaW5kZXggdmFsdWUuICAqL1xuICAgIFp0KHQsIGUpIHtcbiAgICAgICAgdGhpcy50ZSh0LCBlKSwgXG4gICAgICAgIC8vIFdyaXRlIHNlcGFyYXRvciB0byBzcGxpdCBpbmRleCB2YWx1ZXNcbiAgICAgICAgLy8gKHNlZSBnby9maXJlc3RvcmUtc3RvcmFnZS1mb3JtYXQjZW5jb2RpbmdzKS5cbiAgICAgICAgZS5lZSgpO1xuICAgIH1cbiAgICB0ZSh0LCBlKSB7XG4gICAgICAgIGlmIChcIm51bGxWYWx1ZVwiIGluIHQpIHRoaXMubmUoZSwgNSk7IGVsc2UgaWYgKFwiYm9vbGVhblZhbHVlXCIgaW4gdCkgdGhpcy5uZShlLCAxMCksIFxuICAgICAgICBlLnNlKHQuYm9vbGVhblZhbHVlID8gMSA6IDApOyBlbHNlIGlmIChcImludGVnZXJWYWx1ZVwiIGluIHQpIHRoaXMubmUoZSwgMTUpLCBlLnNlKEV0KHQuaW50ZWdlclZhbHVlKSk7IGVsc2UgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gRXQodC5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICBpc05hTihuKSA/IHRoaXMubmUoZSwgMTMpIDogKHRoaXMubmUoZSwgMTUpLCBEdChuKSA/IFxuICAgICAgICAgICAgLy8gLTAuMCwgMCBhbmQgMC4wIGFyZSBhbGwgY29uc2lkZXJlZCB0aGUgc2FtZVxuICAgICAgICAgICAgZS5zZSgwKSA6IGUuc2UobikpO1xuICAgICAgICB9IGVsc2UgaWYgKFwidGltZXN0YW1wVmFsdWVcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC50aW1lc3RhbXBWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMubmUoZSwgMjApLCBcInN0cmluZ1wiID09IHR5cGVvZiBuID8gZS5pZShuKSA6IChlLmllKGAke24uc2Vjb25kcyB8fCBcIlwifWApLCBlLnNlKG4ubmFub3MgfHwgMCkpO1xuICAgICAgICB9IGVsc2UgaWYgKFwic3RyaW5nVmFsdWVcIiBpbiB0KSB0aGlzLnJlKHQuc3RyaW5nVmFsdWUsIGUpLCB0aGlzLm9lKGUpOyBlbHNlIGlmIChcImJ5dGVzVmFsdWVcIiBpbiB0KSB0aGlzLm5lKGUsIDMwKSwgXG4gICAgICAgIGUudWUoQXQodC5ieXRlc1ZhbHVlKSksIHRoaXMub2UoZSk7IGVsc2UgaWYgKFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0KSB0aGlzLmFlKHQucmVmZXJlbmNlVmFsdWUsIGUpOyBlbHNlIGlmIChcImdlb1BvaW50VmFsdWVcIiBpbiB0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5nZW9Qb2ludFZhbHVlO1xuICAgICAgICAgICAgdGhpcy5uZShlLCA0NSksIGUuc2Uobi5sYXRpdHVkZSB8fCAwKSwgZS5zZShuLmxvbmdpdHVkZSB8fCAwKTtcbiAgICAgICAgfSBlbHNlIFwibWFwVmFsdWVcIiBpbiB0ID8gSHQodCkgPyB0aGlzLm5lKGUsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSA6ICh0aGlzLmNlKHQubWFwVmFsdWUsIGUpLCBcbiAgICAgICAgdGhpcy5vZShlKSkgOiBcImFycmF5VmFsdWVcIiBpbiB0ID8gKHRoaXMuaGUodC5hcnJheVZhbHVlLCBlKSwgdGhpcy5vZShlKSkgOiBMKCk7XG4gICAgfVxuICAgIHJlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5uZShlLCAyNSksIHRoaXMubGUodCwgZSk7XG4gICAgfVxuICAgIGxlKHQsIGUpIHtcbiAgICAgICAgZS5pZSh0KTtcbiAgICB9XG4gICAgY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdC5maWVsZHMgfHwge307XG4gICAgICAgIHRoaXMubmUoZSwgNTUpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgT2JqZWN0LmtleXMobikpIHRoaXMucmUodCwgZSksIHRoaXMudGUoblt0XSwgZSk7XG4gICAgfVxuICAgIGhlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQudmFsdWVzIHx8IFtdO1xuICAgICAgICB0aGlzLm5lKGUsIDUwKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHRoaXMudGUodCwgZSk7XG4gICAgfVxuICAgIGFlKHQsIGUpIHtcbiAgICAgICAgdGhpcy5uZShlLCAzNyk7XG4gICAgICAgIHh0LmZyb21OYW1lKHQpLnBhdGguZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLm5lKGUsIDYwKSwgdGhpcy5sZSh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBuZSh0LCBlKSB7XG4gICAgICAgIHQuc2UoZSk7XG4gICAgfVxuICAgIG9lKHQpIHtcbiAgICAgICAgLy8gV2hpbGUgdGhlIFNESyBkb2VzIG5vdCBpbXBsZW1lbnQgdHJ1bmNhdGlvbiwgdGhlIHRydW5jYXRpb24gbWFya2VyIGlzXG4gICAgICAgIC8vIHVzZWQgdG8gdGVybWluYXRlIGFsbCB2YXJpYWJsZSBsZW5ndGggdmFsdWVzICh3aGljaCBhcmUgc3RyaW5ncywgYnl0ZXMsXG4gICAgICAgIC8vIHJlZmVyZW5jZXMsIGFycmF5cyBhbmQgbWFwcykuXG4gICAgICAgIHQuc2UoMik7XG4gICAgfVxufVxuXG56aS5mZSA9IG5ldyB6aTtcblxuLyoqXG4gKiBDb3VudHMgdGhlIG51bWJlciBvZiB6ZXJvcyBpbiBhIGJ5dGUuXG4gKlxuICogVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAqL1xuZnVuY3Rpb24gSGkodCkge1xuICAgIGlmICgwID09PSB0KSByZXR1cm4gODtcbiAgICBsZXQgZSA9IDA7XG4gICAgcmV0dXJuIHQgPj4gNCA9PSAwICYmIChcbiAgICAvLyBUZXN0IGlmIHRoZSBmaXJzdCBmb3VyIGJpdHMgYXJlIHplcm8uXG4gICAgZSArPSA0LCB0IDw8PSA0KSwgdCA+PiA2ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IHR3byAob3IgbmV4dCB0d28pIGJpdHMgYXJlIHplcm8uXG4gICAgZSArPSAyLCB0IDw8PSAyKSwgdCA+PiA3ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIHJlbWFpbmluZyBiaXQgaXMgemVyby5cbiAgICBlICs9IDEpLCBlO1xufVxuXG4vKiogQ291bnRzIHRoZSBudW1iZXIgb2YgbGVhZGluZyB6ZXJvcyBpbiB0aGUgZ2l2ZW4gYnl0ZSBhcnJheS4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJ5dGVzIHJlcXVpcmVkIHRvIHN0b3JlIFwidmFsdWVcIi4gTGVhZGluZyB6ZXJvIGJ5dGVzXG4gKiBhcmUgc2tpcHBlZC5cbiAqL1xuZnVuY3Rpb24gSmkodCkge1xuICAgIC8vIFRoaXMgaXMganVzdCB0aGUgbnVtYmVyIG9mIGJ5dGVzIGZvciB0aGUgdW5zaWduZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG51bWJlci5cbiAgICBjb25zdCBlID0gNjQgLSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCA4OyArK24pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBIaSgyNTUgJiB0W25dKTtcbiAgICAgICAgICAgIGlmIChlICs9IHMsIDggIT09IHMpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0odCk7XG4gICAgcmV0dXJuIE1hdGguY2VpbChlIC8gOCk7XG59XG5cbi8qKlxuICogT3JkZXJlZENvZGVXcml0ZXIgaXMgYSBtaW5pbWFsLWFsbG9jYXRpb24gaW1wbGVtZW50YXRpb24gb2YgdGhlIHdyaXRpbmdcbiAqIGJlaGF2aW9yIGRlZmluZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIGNvZGUgaXMgcG9ydGVkIGZyb20gaXRzIEphdmEgY291bnRlcnBhcnQuXG4gKi8gY2xhc3MgWWkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDEwMjQpLCB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgZGUodCkge1xuICAgICAgICBjb25zdCBlID0gdFtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gZS5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy5fZShuLnZhbHVlKSwgbiA9IGUubmV4dCgpO1xuICAgICAgICB0aGlzLndlKCk7XG4gICAgfVxuICAgIG1lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRbU3ltYm9sLml0ZXJhdG9yXSgpO1xuICAgICAgICBsZXQgbiA9IGUubmV4dCgpO1xuICAgICAgICBmb3IgKDshbi5kb25lOyApIHRoaXMuZ2Uobi52YWx1ZSksIG4gPSBlLm5leHQoKTtcbiAgICAgICAgdGhpcy55ZSgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGFzY2VuZGluZy4gKi8gICAgcGUodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmICh0IDwgMTI4KSB0aGlzLl9lKHQpOyBlbHNlIGlmICh0IDwgMjA0OCkgdGhpcy5fZSg5NjAgfCB0ID4+PiA2KSwgdGhpcy5fZSgxMjggfCA2MyAmIHQpOyBlbHNlIGlmIChlIDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCBlKSB0aGlzLl9lKDQ4MCB8IHQgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLl9lKDEyOCB8IDYzICYgdCA+Pj4gNiksIHRoaXMuX2UoMTI4IHwgNjMgJiB0KTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fZSgyNDAgfCB0ID4+PiAxOCksIHRoaXMuX2UoMTI4IHwgNjMgJiB0ID4+PiAxMiksIHRoaXMuX2UoMTI4IHwgNjMgJiB0ID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5fZSgxMjggfCA2MyAmIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMud2UoKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyB1dGY4IGJ5dGVzIGludG8gdGhpcyBieXRlIHNlcXVlbmNlLCBkZXNjZW5kaW5nICovICAgIEllKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgICAgICBpZiAodCA8IDEyOCkgdGhpcy5nZSh0KTsgZWxzZSBpZiAodCA8IDIwNDgpIHRoaXMuZ2UoOTYwIHwgdCA+Pj4gNiksIHRoaXMuZ2UoMTI4IHwgNjMgJiB0KTsgZWxzZSBpZiAoZSA8IFwiXFx1ZDgwMFwiIHx8IFwiXFx1ZGJmZlwiIDwgZSkgdGhpcy5nZSg0ODAgfCB0ID4+PiAxMiksIFxuICAgICAgICAgICAgdGhpcy5nZSgxMjggfCA2MyAmIHQgPj4+IDYpLCB0aGlzLmdlKDEyOCB8IDYzICYgdCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlLmNvZGVQb2ludEF0KDApO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2UoMjQwIHwgdCA+Pj4gMTgpLCB0aGlzLmdlKDEyOCB8IDYzICYgdCA+Pj4gMTIpLCB0aGlzLmdlKDEyOCB8IDYzICYgdCA+Pj4gNiksIFxuICAgICAgICAgICAgICAgIHRoaXMuZ2UoMTI4IHwgNjMgJiB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnllKCk7XG4gICAgfVxuICAgIFRlKHQpIHtcbiAgICAgICAgLy8gVmFsdWVzIGFyZSBlbmNvZGVkIHdpdGggYSBzaW5nbGUgYnl0ZSBsZW5ndGggcHJlZml4LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgICAgLy8gYWN0dWFsIHZhbHVlIGluIGJpZy1lbmRpYW4gZm9ybWF0IHdpdGggbGVhZGluZyAwIGJ5dGVzIGRyb3BwZWQuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkVlKHQpLCBuID0gSmkoZSk7XG4gICAgICAgIHRoaXMuQWUoMSArIG4pLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gMjU1ICYgbjtcbiAgICAgICAgLy8gV3JpdGUgdGhlIGxlbmd0aFxuICAgICAgICBmb3IgKGxldCB0ID0gZS5sZW5ndGggLSBuOyB0IDwgZS5sZW5ndGg7ICsrdCkgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IDI1NSAmIGVbdF07XG4gICAgfVxuICAgIFJlKHQpIHtcbiAgICAgICAgLy8gVmFsdWVzIGFyZSBlbmNvZGVkIHdpdGggYSBzaW5nbGUgYnl0ZSBsZW5ndGggcHJlZml4LCBmb2xsb3dlZCBieSB0aGVcbiAgICAgICAgLy8gaW52ZXJ0ZWQgdmFsdWUgaW4gYmlnLWVuZGlhbiBmb3JtYXQgd2l0aCBsZWFkaW5nIDAgYnl0ZXMgZHJvcHBlZC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuRWUodCksIG4gPSBKaShlKTtcbiAgICAgICAgdGhpcy5BZSgxICsgbiksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIG4pO1xuICAgICAgICAvLyBXcml0ZSB0aGUgbGVuZ3RoXG4gICAgICAgIGZvciAobGV0IHQgPSBlLmxlbmd0aCAtIG47IHQgPCBlLmxlbmd0aDsgKyt0KSB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfigyNTUgJiBlW3RdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGFmdGVyIGFsbCBvdGhlciBieXRlXG4gICAgICogc2VxdWVuY2VzIHdyaXR0ZW4gaW4gYXNjZW5kaW5nIG9yZGVyLlxuICAgICAqLyAgICBiZSgpIHtcbiAgICAgICAgdGhpcy5QZSgyNTUpLCB0aGlzLlBlKDI1NSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdyaXRlcyB0aGUgXCJpbmZpbml0eVwiIGJ5dGUgc2VxdWVuY2UgdGhhdCBzb3J0cyBiZWZvcmUgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBkZXNjZW5kaW5nIG9yZGVyLlxuICAgICAqLyAgICBWZSgpIHtcbiAgICAgICAgdGhpcy52ZSgyNTUpLCB0aGlzLnZlKDI1NSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYnVmZmVyIHN1Y2ggdGhhdCBpdCBpcyB0aGUgc2FtZSBhcyB3aGVuIGl0IHdhcyBuZXdseVxuICAgICAqIGNvbnN0cnVjdGVkLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IDA7XG4gICAgfVxuICAgIHNlZWQodCkge1xuICAgICAgICB0aGlzLkFlKHQubGVuZ3RoKSwgdGhpcy5idWZmZXIuc2V0KHQsIHRoaXMucG9zaXRpb24pLCB0aGlzLnBvc2l0aW9uICs9IHQubGVuZ3RoO1xuICAgIH1cbiAgICAvKiogTWFrZXMgYSBjb3B5IG9mIHRoZSBlbmNvZGVkIGJ5dGVzIGluIHRoaXMgYnVmZmVyLiAgKi8gICAgU2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW5jb2RlcyBgdmFsYCBpbnRvIGFuIGVuY29kaW5nIHNvIHRoYXQgdGhlIG9yZGVyIG1hdGNoZXMgdGhlIElFRUUgNzU0XG4gICAgICogZmxvYXRpbmctcG9pbnQgY29tcGFyaXNvbiByZXN1bHRzIHdpdGggdGhlIGZvbGxvd2luZyBleGNlcHRpb25zOlxuICAgICAqICAgLTAuMCA8IDAuMFxuICAgICAqICAgYWxsIG5vbi1OYU4gPCBOYU5cbiAgICAgKiAgIE5hTiA9IE5hTlxuICAgICAqLyAgICBFZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqIENvbnZlcnRzIGEgSmF2YVNjcmlwdCBudW1iZXIgdG8gYSBieXRlIGFycmF5ICh1c2luZyBiaWcgZW5kaWFuIGVuY29kaW5nKS4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoOCkpO1xuICAgICAgICAgICAgcmV0dXJuIGUuc2V0RmxvYXQ2NCgwLCB0LCAvKiBsaXR0bGVFbmRpYW49ICovICExKSwgbmV3IFVpbnQ4QXJyYXkoZS5idWZmZXIpO1xuICAgICAgICB9KHQpLCBuID0gMCAhPSAoMTI4ICYgZVswXSk7XG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBmaXJzdCBiaXQgaXMgc2V0LiBXZSB1c2UgYSBiaXQgbWFzayBzaW5jZSB2YWx1ZVswXSBpc1xuICAgICAgICAvLyBlbmNvZGVkIGFzIGEgbnVtYmVyIGZyb20gMCB0byAyNTUuXG4gICAgICAgICAgICAgICAgLy8gUmV2ZXJ0IHRoZSB0d28gY29tcGxlbWVudCB0byBnZXQgbmF0dXJhbCBvcmRlcmluZ1xuICAgICAgICBlWzBdIF49IG4gPyAyNTUgOiAxMjg7XG4gICAgICAgIGZvciAobGV0IHQgPSAxOyB0IDwgZS5sZW5ndGg7ICsrdCkgZVt0XSBePSBuID8gMjU1IDogMDtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBhc2NlbmRpbmcgdG8gdGhlIGJ1ZmZlci4gKi8gICAgX2UodCkge1xuICAgICAgICBjb25zdCBlID0gMjU1ICYgdDtcbiAgICAgICAgMCA9PT0gZSA/ICh0aGlzLlBlKDApLCB0aGlzLlBlKDI1NSkpIDogMjU1ID09PSBlID8gKHRoaXMuUGUoMjU1KSwgdGhpcy5QZSgwKSkgOiB0aGlzLlBlKGUpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIGEgc2luZ2xlIGJ5dGUgZGVzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAgKi8gICAgZ2UodCkge1xuICAgICAgICBjb25zdCBlID0gMjU1ICYgdDtcbiAgICAgICAgMCA9PT0gZSA/ICh0aGlzLnZlKDApLCB0aGlzLnZlKDI1NSkpIDogMjU1ID09PSBlID8gKHRoaXMudmUoMjU1KSwgdGhpcy52ZSgwKSkgOiB0aGlzLnZlKHQpO1xuICAgIH1cbiAgICB3ZSgpIHtcbiAgICAgICAgdGhpcy5QZSgwKSwgdGhpcy5QZSgxKTtcbiAgICB9XG4gICAgeWUoKSB7XG4gICAgICAgIHRoaXMudmUoMCksIHRoaXMudmUoMSk7XG4gICAgfVxuICAgIFBlKHQpIHtcbiAgICAgICAgdGhpcy5BZSgxKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IHQ7XG4gICAgfVxuICAgIHZlKHQpIHtcbiAgICAgICAgdGhpcy5BZSgxKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH50O1xuICAgIH1cbiAgICBBZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0ICsgdGhpcy5wb3NpdGlvbjtcbiAgICAgICAgaWYgKGUgPD0gdGhpcy5idWZmZXIubGVuZ3RoKSByZXR1cm47XG4gICAgICAgIC8vIFRyeSBkb3VibGluZy5cbiAgICAgICAgICAgICAgICBsZXQgbiA9IDIgKiB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIC8vIFN0aWxsIG5vdCBiaWcgZW5vdWdoPyBKdXN0IGFsbG9jYXRlIHRoZSByaWdodCBzaXplLlxuICAgICAgICAgICAgICAgIG4gPCBlICYmIChuID0gZSk7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgbmV3IGJ1ZmZlci5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IFVpbnQ4QXJyYXkobik7XG4gICAgICAgIHMuc2V0KHRoaXMuYnVmZmVyKSwgLy8gY29weSBvbGQgZGF0YVxuICAgICAgICB0aGlzLmJ1ZmZlciA9IHM7XG4gICAgfVxufVxuXG5jbGFzcyBYaSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkRlID0gdDtcbiAgICB9XG4gICAgdWUodCkge1xuICAgICAgICB0aGlzLkRlLmRlKHQpO1xuICAgIH1cbiAgICBpZSh0KSB7XG4gICAgICAgIHRoaXMuRGUucGUodCk7XG4gICAgfVxuICAgIHNlKHQpIHtcbiAgICAgICAgdGhpcy5EZS5UZSh0KTtcbiAgICB9XG4gICAgZWUoKSB7XG4gICAgICAgIHRoaXMuRGUuYmUoKTtcbiAgICB9XG59XG5cbmNsYXNzIFppIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuRGUgPSB0O1xuICAgIH1cbiAgICB1ZSh0KSB7XG4gICAgICAgIHRoaXMuRGUubWUodCk7XG4gICAgfVxuICAgIGllKHQpIHtcbiAgICAgICAgdGhpcy5EZS5JZSh0KTtcbiAgICB9XG4gICAgc2UodCkge1xuICAgICAgICB0aGlzLkRlLlJlKHQpO1xuICAgIH1cbiAgICBlZSgpIHtcbiAgICAgICAgdGhpcy5EZS5WZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGBEaXJlY3Rpb25hbEluZGV4Qnl0ZUVuY29kZXJgIHVzaW5nIGBPcmRlcmVkQ29kZVdyaXRlcmAgZm9yIHRoZVxuICogYWN0dWFsIGVuY29kaW5nLlxuICovIGNsYXNzIHRyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5EZSA9IG5ldyBZaSwgdGhpcy5DZSA9IG5ldyBYaSh0aGlzLkRlKSwgdGhpcy54ZSA9IG5ldyBaaSh0aGlzLkRlKTtcbiAgICB9XG4gICAgc2VlZCh0KSB7XG4gICAgICAgIHRoaXMuRGUuc2VlZCh0KTtcbiAgICB9XG4gICAgTmUodCkge1xuICAgICAgICByZXR1cm4gMCAvKiBBU0NFTkRJTkcgKi8gPT09IHQgPyB0aGlzLkNlIDogdGhpcy54ZTtcbiAgICB9XG4gICAgU2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkRlLlNlKCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLkRlLnJlc2V0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFJlcHJlc2VudHMgYW4gaW5kZXggZW50cnkgc2F2ZWQgYnkgdGhlIFNESyBpbiBwZXJzaXN0ZWQgc3RvcmFnZS4gKi8gY2xhc3MgZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5pbmRleElkID0gdCwgdGhpcy5kb2N1bWVudEtleSA9IGUsIHRoaXMuYXJyYXlWYWx1ZSA9IG4sIHRoaXMuZGlyZWN0aW9uYWxWYWx1ZSA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gSW5kZXhFbnRyeSBlbnRyeSB0aGF0IHNvcnRzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBjdXJyZW50XG4gICAgICogZGlyZWN0aW9uYWwgdmFsdWUuXG4gICAgICovICAgIGtlKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlLmxlbmd0aCwgZSA9IDAgPT09IHQgfHwgMjU1ID09PSB0aGlzLmRpcmVjdGlvbmFsVmFsdWVbdCAtIDFdID8gdCArIDEgOiB0LCBuID0gbmV3IFVpbnQ4QXJyYXkoZSk7XG4gICAgICAgIHJldHVybiBuLnNldCh0aGlzLmRpcmVjdGlvbmFsVmFsdWUsIDApLCBlICE9PSB0ID8gbi5zZXQoWyAwIF0sIHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgpIDogKytuW24ubGVuZ3RoIC0gMV0sIFxuICAgICAgICBuZXcgZXIodGhpcy5pbmRleElkLCB0aGlzLmRvY3VtZW50S2V5LCB0aGlzLmFycmF5VmFsdWUsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbnIodCwgZSkge1xuICAgIGxldCBuID0gdC5pbmRleElkIC0gZS5pbmRleElkO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gc3IodC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpLCAwICE9PSBuID8gbiA6IChuID0gc3IodC5kaXJlY3Rpb25hbFZhbHVlLCBlLmRpcmVjdGlvbmFsVmFsdWUpLCBcbiAgICAwICE9PSBuID8gbiA6IHh0LmNvbXBhcmF0b3IodC5kb2N1bWVudEtleSwgZS5kb2N1bWVudEtleSkpKTtcbn1cblxuZnVuY3Rpb24gc3IodCwgZSkge1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggJiYgbiA8IGUubGVuZ3RoOyArK24pIHtcbiAgICAgICAgY29uc3QgcyA9IHRbbl0gLSBlW25dO1xuICAgICAgICBpZiAoMCAhPT0gcykgcmV0dXJuIHM7XG4gICAgfVxuICAgIHJldHVybiB0Lmxlbmd0aCAtIGUubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGxpZ2h0IHF1ZXJ5IHBsYW5uZXIgZm9yIEZpcmVzdG9yZS5cbiAqXG4gKiBUaGlzIGNsYXNzIG1hdGNoZXMgYSBgRmllbGRJbmRleGAgYWdhaW5zdCBhIEZpcmVzdG9yZSBRdWVyeSBgVGFyZ2V0YC4gSXRcbiAqIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGluZGV4IGNhbiBiZSB1c2VkIHRvIHNlcnZlIHRoZSBzcGVjaWZpZWQgdGFyZ2V0LlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgdGFibGUgc2hvd2Nhc2VzIHNvbWUgcG9zc2libGUgaW5kZXggY29uZmlndXJhdGlvbnM6XG4gKlxuICogUXVlcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW5kZXhcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQywgYiBERVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYiBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpICAgICAgICAgICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnLCAnZGVzYycpICAgICAgICAgIHwgYSBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpLm9yZGVyQnkoJ2InKSAgICAgfCBhIEFTQywgYiBBU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TLCBiIEFTQ0VORElOR1xuICogd2hlcmUoJ2EnLCAnYXJyYXktY29udGFpbnMnLCAnYScpLm9yZGVyQnkoJ2InKSAgICAgIHwgYSBDT05UQUlOU1xuICovIGNsYXNzIGlyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbklkID0gbnVsbCAhPSB0LmNvbGxlY3Rpb25Hcm91cCA/IHQuY29sbGVjdGlvbkdyb3VwIDogdC5wYXRoLmxhc3RTZWdtZW50KCksIFxuICAgICAgICB0aGlzLk1lID0gdC5vcmRlckJ5LCB0aGlzLk9lID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICAgICAgdC5TKCkgPyB0aGlzLkZlID0gdCA6IHRoaXMuT2UucHVzaCh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGluZGV4IGNhbiBiZSB1c2VkIHRvIHNlcnZlIHRoZSBUYXJnZXRJbmRleE1hdGNoZXInc1xuICAgICAqIHRhcmdldC5cbiAgICAgKlxuICAgICAqIEFuIGluZGV4IGlzIGNvbnNpZGVyZWQgY2FwYWJsZSBvZiBzZXJ2aW5nIHRoZSB0YXJnZXQgd2hlbjpcbiAgICAgKiAtIFRoZSB0YXJnZXQgdXNlcyBhbGwgaW5kZXggc2VnbWVudHMgZm9yIGl0cyBmaWx0ZXJzIGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICogICBUaGUgdGFyZ2V0IGNhbiBoYXZlIGFkZGl0aW9uYWwgZmlsdGVyIGFuZCBvcmRlckJ5IGNsYXVzZXMsIGJ1dCBub3RcbiAgICAgKiAgIGZld2VyLlxuICAgICAqIC0gSWYgYW4gQXJyYXlDb250YWlucy9BcnJheUNvbnRhaW5zQW55ZmlsdGVyIGlzIHVzZWQsIHRoZSBpbmRleCBtdXN0IGFsc29cbiAgICAgKiAgIGhhdmUgYSBjb3JyZXNwb25kaW5nIGBDT05UQUlOU2Agc2VnbWVudC5cbiAgICAgKiAtIEFsbCBkaXJlY3Rpb25hbCBpbmRleCBzZWdtZW50cyBjYW4gYmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQgYXMgYSBzZXJpZXMgb2ZcbiAgICAgKiAgIGVxdWFsaXR5IGZpbHRlcnMsIGEgc2luZ2xlIGluZXF1YWxpdHkgZmlsdGVyIGFuZCBhIHNlcmllcyBvZiBvcmRlckJ5XG4gICAgICogICBjbGF1c2VzLlxuICAgICAqIC0gVGhlIHNlZ21lbnRzIHRoYXQgcmVwcmVzZW50IHRoZSBlcXVhbGl0eSBmaWx0ZXJzIG1heSBhcHBlYXIgb3V0IG9mIG9yZGVyLlxuICAgICAqIC0gVGhlIG9wdGlvbmFsIHNlZ21lbnQgZm9yIHRoZSBpbmVxdWFsaXR5IGZpbHRlciBtdXN0IGFwcGVhciBhZnRlciBhbGxcbiAgICAgKiAgIGVxdWFsaXR5IHNlZ21lbnRzLlxuICAgICAqIC0gVGhlIHNlZ21lbnRzIHRoYXQgcmVwcmVzZW50IHRoYXQgb3JkZXJCeSBjbGF1c2Ugb2YgdGhlIHRhcmdldCBtdXN0IGFwcGVhclxuICAgICAqICAgaW4gb3JkZXIgYWZ0ZXIgYWxsIGVxdWFsaXR5IGFuZCBpbmVxdWFsaXR5IHNlZ21lbnRzLiBTaW5nbGUgb3JkZXJCeVxuICAgICAqICAgY2xhdXNlcyBjYW5ub3QgYmUgc2tpcHBlZCwgYnV0IGEgY29udGludW91cyBvcmRlckJ5IHN1ZmZpeCBtYXkgYmVcbiAgICAgKiAgIG9taXR0ZWQuXG4gICAgICovICAgICRlKHQpIHtcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgYW4gYXJyYXkgZWxlbWVudCwgZmluZCBhIG1hdGNoaW5nIGZpbHRlci5cbiAgICAgICAgY29uc3QgZSA9IG5lKHQpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBlICYmICF0aGlzLkJlKGUpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBzZSh0KTtcbiAgICAgICAgbGV0IHMgPSAwLCBpID0gMDtcbiAgICAgICAgLy8gUHJvY2VzcyBhbGwgZXF1YWxpdGllcyBmaXJzdC4gRXF1YWxpdGllcyBjYW4gYXBwZWFyIG91dCBvZiBvcmRlci5cbiAgICAgICAgZm9yICg7cyA8IG4ubGVuZ3RoICYmIHRoaXMuQmUobltzXSk7ICsrcykgO1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgcHJvY2Vzc2VkIGFsbCBzZWdtZW50cywgYWxsIHNlZ21lbnRzIGFyZSB1c2VkIHRvIHNlcnZlXG4gICAgICAgIC8vIHRoZSBlcXVhbGl0eSBmaWx0ZXJzIGFuZCB3ZSBkbyBub3QgbmVlZCB0byBtYXAgYW55IHNlZ21lbnRzIHRvIHRoZVxuICAgICAgICAvLyB0YXJnZXQncyBpbmVxdWFsaXR5IGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICAgICAgICAgICAgaWYgKHMgPT09IG4ubGVuZ3RoKSByZXR1cm4gITA7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGluZXF1YWxpdHkgZmlsdGVyLCB0aGUgbmV4dCBzZWdtZW50IG11c3QgbWF0Y2ggYm90aCB0aGVcbiAgICAgICAgLy8gZmlsdGVyIGFuZCB0aGUgZmlyc3Qgb3JkZXJCeSBjbGF1c2UuXG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5GZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5bc107XG4gICAgICAgICAgICBpZiAoIXRoaXMuTGUodGhpcy5GZSwgdCkgfHwgIXRoaXMuVWUodGhpcy5NZVtpKytdLCB0KSkgcmV0dXJuICExO1xuICAgICAgICAgICAgKytzO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsbCByZW1haW5pbmcgc2VnbWVudHMgbmVlZCB0byByZXByZXNlbnQgdGhlIHByZWZpeCBvZiB0aGUgdGFyZ2V0J3NcbiAgICAgICAgLy8gb3JkZXJCeS5cbiAgICAgICAgICAgICAgICBmb3IgKDtzIDwgbi5sZW5ndGg7ICsrcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5bc107XG4gICAgICAgICAgICBpZiAoaSA+PSB0aGlzLk1lLmxlbmd0aCB8fCAhdGhpcy5VZSh0aGlzLk1lW2krK10sIHQpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBCZSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLk9lKSBpZiAodGhpcy5MZShlLCB0KSkgcmV0dXJuICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIExlKHQsIGUpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCB8fCAhdC5maWVsZC5pc0VxdWFsKGUuZmllbGRQYXRoKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovID09PSB0Lm9wIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSB0Lm9wO1xuICAgICAgICByZXR1cm4gMiAvKiBDT05UQUlOUyAqLyA9PT0gZS5raW5kID09PSBuO1xuICAgIH1cbiAgICBVZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiAhIXQuZmllbGQuaXNFcXVhbChlLmZpZWxkUGF0aCkgJiYgKDAgLyogQVNDRU5ESU5HICovID09PSBlLmtpbmQgJiYgXCJhc2NcIiAvKiBBU0NFTkRJTkcgKi8gPT09IHQuZGlyIHx8IDEgLyogREVTQ0VORElORyAqLyA9PT0gZS5raW5kICYmIFwiZGVzY1wiIC8qIERFU0NFTkRJTkcgKi8gPT09IHQuZGlyKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgcnIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnFlID0gbmV3IG9yO1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFlLmFkZChlKSwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMucWUuZ2V0RW50cmllcyhlKSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleCh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4ZXModCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShbXSk7XG4gICAgfVxuICAgIGdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSh0KSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAodCwgZSwgbikge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXModCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbnRlcm5hbCBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZXhwb3NlZCBieSBNZW1vcnlJbmRleE1hbmFnZXIuXG4gKiBBbHNvIHVzZWQgZm9yIGluLW1lbW9yeSBjYWNoaW5nIGJ5IEluZGV4ZWREYkluZGV4TWFuYWdlciBhbmQgaW5pdGlhbCBpbmRleCBwb3B1bGF0aW9uXG4gKiBpbiBpbmRleGVkZGJfc2NoZW1hLnRzXG4gKi8gY2xhc3Mgb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmluZGV4ID0ge307XG4gICAgfVxuICAgIC8vIFJldHVybnMgZmFsc2UgaWYgdGhlIGVudHJ5IGFscmVhZHkgZXhpc3RlZC5cbiAgICBhZGQodCkge1xuICAgICAgICBjb25zdCBlID0gdC5sYXN0U2VnbWVudCgpLCBuID0gdC5wb3BMYXN0KCksIHMgPSB0aGlzLmluZGV4W2VdIHx8IG5ldyAkbihfdC5jb21wYXJhdG9yKSwgaSA9ICFzLmhhcyhuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhbZV0gPSBzLmFkZChuKSwgaTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgcy5oYXMobik7XG4gICAgfVxuICAgIGdldEVudHJpZXModCkge1xuICAgICAgICByZXR1cm4gKHRoaXMuaW5kZXhbdF0gfHwgbmV3ICRuKF90LmNvbXBhcmF0b3IpKS50b0FycmF5KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB1ciA9IG5ldyBVaW50OEFycmF5KDApO1xuXG4vKipcbiAqIEEgcGVyc2lzdGVkIGltcGxlbWVudGF0aW9uIG9mIEluZGV4TWFuYWdlci5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFVubGlrZSBpT1MgYW5kIEFuZHJvaWQsIHRoZSBXZWIgU0RLIGRvZXMgbm90IG1lbW9pemUgaW5kZXhcbiAqIGRhdGEgYXMgaXQgc3VwcG9ydHMgbXVsdGktdGFiIGFjY2Vzcy5cbiAqL1xuY2xhc3MgYXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy51c2VyID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBpbi1tZW1vcnkgY29weSBvZiB0aGUgaW5kZXggZW50cmllcyB3ZSd2ZSBhbHJlYWR5IHdyaXR0ZW4gc2luY2UgdGhlIFNES1xuICAgICAgICAgKiBsYXVuY2hlZC4gVXNlZCB0byBhdm9pZCByZS13cml0aW5nIHRoZSBzYW1lIGVudHJ5IHJlcGVhdGVkbHkuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoaXMgaXMgKk5PVCogYSBjb21wbGV0ZSBjYWNoZSBvZiB3aGF0J3MgaW4gcGVyc2lzdGVuY2UgYW5kIHNvIGNhbiBuZXZlciBiZVxuICAgICAgICAgKiB1c2VkIHRvIHNhdGlzZnkgcmVhZHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkdlID0gbmV3IG9yLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgZnJvbSBhIHRhcmdldCB0byBpdHMgZXF1aXZhbGVudCBsaXN0IG9mIHN1Yi10YXJnZXRzLiBFYWNoIHN1Yi10YXJnZXRcbiAgICAgICAgICogY29udGFpbnMgb25seSBvbmUgdGVybSBmcm9tIHRoZSB0YXJnZXQncyBkaXNqdW5jdGl2ZSBub3JtYWwgZm9ybSAoRE5GKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuS2UgPSBuZXcga24oKHQgPT4gZmUodCkpLCAoKHQsIGUpID0+IF9lKHQsIGUpKSksIHRoaXMudWlkID0gdC51aWQgfHwgXCJcIjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBlbnRyeSB0byB0aGUgY29sbGVjdGlvbiBwYXJlbnQgaW5kZXguXG4gICAgICpcbiAgICAgKiBSZXBlYXRlZCBjYWxscyBmb3IgdGhlIHNhbWUgY29sbGVjdGlvblBhdGggc2hvdWxkIGJlIGF2b2lkZWQgd2l0aGluIGFcbiAgICAgKiB0cmFuc2FjdGlvbiBhcyBJbmRleGVkRGJJbmRleE1hbmFnZXIgb25seSBjYWNoZXMgd3JpdGVzIG9uY2UgYSB0cmFuc2FjdGlvblxuICAgICAqIGhhcyBiZWVuIGNvbW1pdHRlZC5cbiAgICAgKi8gICAgYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMuR2UuaGFzKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5sYXN0U2VnbWVudCgpLCBzID0gZS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIGNvbGxlY3Rpb24gdG8gdGhlIGluIG1lbW9yeSBjYWNoZSBvbmx5IGlmIHRoZSB0cmFuc2FjdGlvbiB3YXNcbiAgICAgICAgICAgICAgICAvLyBzdWNjZXNzZnVsbHkgY29tbWl0dGVkLlxuICAgICAgICAgICAgICAgIHRoaXMuR2UuYWRkKGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IG4sXG4gICAgICAgICAgICAgICAgcGFyZW50OiBVcyhzKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBjcih0KS5wdXQoaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0Q29sbGVjdGlvblBhcmVudHModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUsIFwiXCIgXSwgWyB1dChlKSwgXCJcIiBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBjcih0KS5xdChzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHMuY29sbGVjdGlvbklkICE9PSBlKSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2goS3Mocy5wYXJlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTogVmVyaWZ5IHRoYXQgdGhlIGF1dG8taW5jcmVtZW50aW5nIGluZGV4IElEIHdvcmtzIGluXG4gICAgICAgIC8vIFNhZmFyaSAmIEZpcmVmb3guXG4gICAgICAgIGNvbnN0IG4gPSBscih0KSwgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW5kZXhJZDogdC5pbmRleElkLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogdC5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgICAgICAgICAgZmllbGRzOiB0LmZpZWxkcy5tYXAoKHQgPT4gWyB0LmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC5raW5kIF0pKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKTtcbiAgICAgICAgLy8gYGluZGV4SWRgIGlzIGF1dG8tcG9wdWxhdGVkIGJ5IEluZGV4ZWREYlxuICAgICAgICByZXR1cm4gZGVsZXRlIHMuaW5kZXhJZCwgbi5hZGQocykubmV4dCgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGxyKHQpLCBzID0gZnIodCksIGkgPSBocih0KTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKGUuaW5kZXhJZCkubmV4dCgoKCkgPT4gcy5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyBlLmluZGV4SWQgXSwgWyBlLmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKS5uZXh0KCgoKSA9PiBpLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIGUuaW5kZXhJZCBdLCBbIGUuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBocih0KTtcbiAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiB3aS5mb3JFYWNoKHRoaXMuUWUoZSksIChlID0+IHRoaXMuZ2V0RmllbGRJbmRleCh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHMgJiYgKHMgPSAhIXQpLCBpLnNldChlLCB0KTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IHpuKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpLmZvckVhY2goaSwgKChzLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByO1xuICAgICAgICAgICAgICAgICAgICBPKFwiSW5kZXhlZERiSW5kZXhNYW5hZ2VyXCIsIGBVc2luZyBpbmRleCAke3IgPSBzLCBgaWQ9JHtyLmluZGV4SWR9fGNnPSR7ci5jb2xsZWN0aW9uR3JvdXB9fGY9JHtyLmZpZWxkcy5tYXAoKHQgPT4gYCR7dC5maWVsZFBhdGh9OiR7dC5raW5kfWApKS5qb2luKFwiLFwiKX1gfSB0byBleGVjdXRlICR7ZmUoZSl9YCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbmUoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiBtZSh0LCBuLmZpZWxkUGF0aCkpIHN3aXRjaCAoZS5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS52YWx1ZS5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgZS52YWx1ZSBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGFyZSBub3QgYXJyYXkgZmlsdGVycy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGlzdCBvZiB2YWx1ZXMgdGhhdCBhcmUgdXNlZCBpbiAhPSBvciBOT1RfSU4gZmlsdGVycy4gUmV0dXJuc1xuICogYG51bGxgIGlmIHRoZXJlIGFyZSBubyBzdWNoIGZpbHRlcnMuXG4gKi8gKGksIHMpLCB1ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc2UoZSkpIGZvciAoY29uc3QgZSBvZiBtZSh0LCBzLmZpZWxkUGF0aCkpIHN3aXRjaCAoZS5vcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBFUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIElOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFbmNvZGUgZXF1YWxpdHkgcHJlZml4LCB3aGljaCBpcyBlbmNvZGVkIGluIHRoZSBpbmRleCB2YWx1ZSBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaW5lcXVhbGl0eSAoZS5nLiBgYSA9PSAnYScgJiYgYiAhPSAnYidgIGlzIGVuY29kZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBgdmFsdWUgIT0gJ2FiJ2ApLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2V0KHMuZmllbGRQYXRoLmNhbm9uaWNhbFN0cmluZygpLCBlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RJbi9Ob3RFcXVhbCBpcyBhbHdheXMgYSBzdWZmaXguIFRoZXJlIGNhbm5vdCBiZSBhbnkgcmVtYWluaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VnbWVudHMgYW5kIGhlbmNlIHdlIGNhbiByZXR1cm4gZWFybHkgaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi5zZXQocy5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIGUudmFsdWUpLCBBcnJheS5mcm9tKG4udmFsdWVzKCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbWFpbmluZyBmaWx0ZXJzIGNhbm5vdCBiZSB1c2VkIGFzIG5vdEluIGJvdW5kcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIGxvd2VyIGJvdW5kIG9mIGZpZWxkIHZhbHVlcyB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgc3RhcnRpbmcgcG9pbnQgdG9cbiAqIHNjYW4gdGhlIGluZGV4IGRlZmluZWQgYnkgYGZpZWxkSW5kZXhgLiBSZXR1cm5zIGBudWxsYCBpZiBubyBsb3dlciBib3VuZFxuICogZXhpc3RzLlxuICovIChpLCBzKSwgYSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhIGxvd2VyIGJvdW5kIGlmIHRoZXJlIGlzIGEgc3VpdGFibGUgZmlsdGVyIG9yXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydEF0LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCByIG9mIHNlKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGUsIG8gPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcm9jZXNzIGFsbCBmaWx0ZXJzIHRvIGZpbmQgYSB2YWx1ZSBmb3IgdGhlIGN1cnJlbnQgZmllbGQgc2VnbWVudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBtZSh0LCByLmZpZWxkUGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQsIHMgPSAhMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjxcIiAvKiBMRVNTX1RIQU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI8PVwiIC8qIExFU1NfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gXCJudWxsVmFsdWVcIiBpbiAoaSA9IG4udmFsdWUpID8ga3QgOiBcImJvb2xlYW5WYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gaSB8fCBcImRvdWJsZVZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcImJ5dGVzVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcInJlZmVyZW5jZVZhbHVlXCIgaW4gaSA/IHF0KHZ0LmVtcHR5KCksIHh0LmVtcHR5KCkpIDogXCJnZW9Qb2ludFZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW9Qb2ludFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogLTE4MFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJtYXBWYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogTCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPT1cIiAvKiBFUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI+PVwiIC8qIEdSRUFURVJfVEhBTl9PUl9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gbi52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj5cIiAvKiBHUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG4udmFsdWUsIHMgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBrdDtcbiAvLyBSZW1haW5pbmcgZmlsdGVycyBjYW5ub3QgYmUgdXNlZCBhcyBsb3dlciBib3VuZHMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBKdChlLCB0KSA9PT0gdCAmJiAoZSA9IHQsIG8gPSBzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgdGhlcmUgaXMgYSBzdGFydEF0IGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3VuZGFyeSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0LnN0YXJ0QXQpIGZvciAobGV0IG4gPSAwOyBuIDwgdC5vcmRlckJ5Lmxlbmd0aDsgKytuKSBpZiAodC5vcmRlckJ5W25dLmZpZWxkLmlzRXF1YWwoci5maWVsZFBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LnN0YXJ0QXQucG9zaXRpb25bbl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEp0KGUsIHMpID09PSBzICYmIChlID0gcywgbyA9IHQuc3RhcnRBdC5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm8gbG93ZXIgYm91bmQgZXhpc3RzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUpLCBzICYmIChzID0gbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKiBSZXR1cm5zIHRoZSBsYXJnZXN0IHZhbHVlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgdHlwZSAoZXhjbHVzaXZlKS4gKi8gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBlKG4sIHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhbiB1cHBlciBib3VuZCBvZiBmaWVsZCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCBhcyBhbiBlbmRpbmcgcG9pbnRcbiAqIHdoZW4gc2Nhbm5pbmcgdGhlIGluZGV4IGRlZmluZWQgYnkgYGZpZWxkSW5kZXhgLiBSZXR1cm5zIGBudWxsYCBpZiBub1xuICogdXBwZXIgYm91bmQgZXhpc3RzLlxuICovIChpLCBzKSwgYyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhbiB1cHBlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kQXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHIgb2Ygc2UoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgZSwgbyA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIG1lKHQsIHIuZmllbGRQYXRoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdCwgcyA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBHUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI+XCIgLyogR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBcIm51bGxWYWx1ZVwiIGluIChpID0gbi52YWx1ZSkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwiYm9vbGVhblZhbHVlXCIgaW4gaSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGVWYWx1ZTogTmFOXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiBpIHx8IFwiZG91YmxlVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnl0ZXNWYWx1ZTogXCJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwiYnl0ZXNWYWx1ZVwiIGluIGkgPyBxdCh2dC5lbXB0eSgpLCB4dC5lbXB0eSgpKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IC05MCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiAtMTgwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIGkgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyYXlWYWx1ZToge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiBpID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcFZhbHVlOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IFwibWFwVmFsdWVcIiBpbiBpID8gTnQgOiBMKCksIHMgPSAhMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIj09XCIgLyogRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpblwiIC8qIElOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBMRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdCA9IG4udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI8XCIgLyogTEVTU19USEFOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSBuLnZhbHVlLCBzID0gITE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ID0gTnQ7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgdXBwZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgWXQoZSwgdCkgPT09IHQgJiYgKGUgPSB0LCBvID0gcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGEgZW5kQXQgYm91bmQsIGNvbXBhcmUgdGhlIHZhbHVlcyBhZ2FpbnN0IHRoZSBleGlzdGluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJvdW5kYXJ5IHRvIHNlZSBpZiB3ZSBjYW4gbmFycm93IHRoZSBzY29wZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuZW5kQXQpIGZvciAobGV0IG4gPSAwOyBuIDwgdC5vcmRlckJ5Lmxlbmd0aDsgKytuKSBpZiAodC5vcmRlckJ5W25dLmZpZWxkLmlzRXF1YWwoci5maWVsZFBhdGgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0LmVuZEF0LnBvc2l0aW9uW25dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBZdChlLCBzKSA9PT0gcyAmJiAoZSA9IHMsIG8gPSB0LmVuZEF0LmluY2x1c2l2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBObyB1cHBlciBib3VuZCBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuLnB1c2goZSksIHMgJiYgKHMgPSBvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQZShuLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgfShpLCBzKSwgaCA9IHRoaXMuamUocywgaSwgYSksIGwgPSB0aGlzLmplKHMsIGksIGMpLCBmID0gdGhpcy5XZShzLCBpLCB1KSwgZCA9IHRoaXMuemUocy5pbmRleElkLCBvLCBoLCAhIWEgJiYgYS5pbmNsdXNpdmUsIGwsICEhYyAmJiBjLmluY2x1c2l2ZSwgZik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aS5mb3JFYWNoKGQsIChzID0+IG4uS3QocywgZS5saW1pdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQgPSB0LmFkZChuZXcgeHQoS3MoZS5kb2N1bWVudEtleSkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB3aS5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFFlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLktlLmdldCh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgKFxuICAgICAgICAvLyBUT0RPKG9ycXVlcnkpOiBJbXBsZW1lbnQgRE5GIHRyYW5zZm9ybVxuICAgICAgICBlID0gWyB0IF0sIHRoaXMuS2Uuc2V0KHQsIGUpLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0cyBhIGtleSByYW5nZSBxdWVyeSBvbiBgRGJJbmRleEVudHJ5U3RvcmVgIHRoYXQgdW5pb25zIGFsbFxuICAgICAqIGJvdW5kcy5cbiAgICAgKi8gICAgemUodCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICAvLyBUaGUgbnVtYmVyIG9mIHRvdGFsIGluZGV4IHNjYW5zIHdlIHVuaW9uIHRvZ2V0aGVyLiBUaGlzIGlzIHNpbWlsYXIgdG8gYVxuICAgICAgICAvLyBkaXN0cmlidXRlZCBub3JtYWwgZm9ybSwgYnV0IGFkYXB0ZWQgZm9yIGFycmF5IHZhbHVlcy4gV2UgY3JlYXRlIGEgc2luZ2xlXG4gICAgICAgIC8vIGluZGV4IHJhbmdlIHBlciB2YWx1ZSBpbiBhbiBBUlJBWV9DT05UQUlOUyBvciBBUlJBWV9DT05UQUlOU19BTlkgZmlsdGVyXG4gICAgICAgIC8vIGNvbWJpbmVkIHdpdGggdGhlIHZhbHVlcyBmcm9tIHRoZSBxdWVyeSBib3VuZHMuXG4gICAgICAgIGNvbnN0IHUgPSAobnVsbCAhPSBlID8gZS5sZW5ndGggOiAxKSAqIE1hdGgubWF4KG51bGwgIT0gbiA/IG4ubGVuZ3RoIDogMSwgbnVsbCAhPSBpID8gaS5sZW5ndGggOiAxKSwgYSA9IHUgLyAobnVsbCAhPSBlID8gZS5sZW5ndGggOiAxKSwgYyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBoID0gMDsgaCA8IHU7ICsraCkge1xuICAgICAgICAgICAgY29uc3QgdSA9IGUgPyB0aGlzLkhlKGVbaCAvIGFdKSA6IHVyLCBsID0gbiA/IHRoaXMuSmUodCwgdSwgbltoICUgYV0sIHMpIDogdGhpcy5ZZSh0KSwgZiA9IGkgPyB0aGlzLlhlKHQsIHUsIGlbaCAlIGFdLCByKSA6IHRoaXMuWWUodCArIDEpO1xuICAgICAgICAgICAgYy5wdXNoKC4uLnRoaXMuY3JlYXRlUmFuZ2UobCwgZiwgby5tYXAoKGUgPT4gdGhpcy5KZSh0LCB1LCBlLCBcbiAgICAgICAgICAgIC8qIGluY2x1c2l2ZT0gKi8gITApKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYztcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgbG93ZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBKZSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgZXIodCwgeHQuZW1wdHkoKSwgZSwgbik7XG4gICAgICAgIHJldHVybiBzID8gaSA6IGkua2UoKTtcbiAgICB9XG4gICAgLyoqIEdlbmVyYXRlcyB0aGUgdXBwZXIgYm91bmQgZm9yIGBhcnJheVZhbHVlYCBhbmQgYGRpcmVjdGlvbmFsVmFsdWVgLiAqLyAgICBYZSh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBuZXcgZXIodCwgeHQuZW1wdHkoKSwgZSwgbik7XG4gICAgICAgIHJldHVybiBzID8gaS5rZSgpIDogaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIGFuIGVtcHR5IGJvdW5kIHRoYXQgc2NvcGVzIHRoZSBpbmRleCBzY2FuIHRvIHRoZSBjdXJyZW50IGluZGV4XG4gICAgICogYW5kIHVzZXIuXG4gICAgICovICAgIFllKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBlcih0LCB4dC5lbXB0eSgpLCB1ciwgdXIpO1xuICAgIH1cbiAgICBnZXRGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBpcihlKSwgcyA9IG51bGwgIT0gZS5jb2xsZWN0aW9uR3JvdXAgPyBlLmNvbGxlY3Rpb25Hcm91cCA6IGUucGF0aC5sYXN0U2VnbWVudCgpO1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5maWx0ZXIoKHQgPT4gbi4kZSh0KSkpO1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBpbmRleCB0aGF0IG1hdGNoZXMgdGhlIG1vc3QgbnVtYmVyIG9mIHNlZ21lbnRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuc29ydCgoKHQsIGUpID0+IGUuZmllbGRzLmxlbmd0aCAtIHQuZmllbGRzLmxlbmd0aCkpLCBlLmxlbmd0aCA+IDAgPyBlWzBdIDogbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBieXRlIGVuY29kZWQgZm9ybSBvZiB0aGUgZGlyZWN0aW9uYWwgdmFsdWVzIGluIHRoZSBmaWVsZCBpbmRleC5cbiAgICAgKiBSZXR1cm5zIGBudWxsYCBpZiB0aGUgZG9jdW1lbnQgZG9lcyBub3QgaGF2ZSBhbGwgZmllbGRzIHNwZWNpZmllZCBpbiB0aGVcbiAgICAgKiBpbmRleC5cbiAgICAgKi8gICAgWmUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IHRyO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2Ygc2UodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLmRhdGEuZmllbGQocy5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICBjb25zdCBpID0gbi5OZShzLmtpbmQpO1xuICAgICAgICAgICAgemkuZmUuWnQodCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG4uU2UoKTtcbiAgICB9XG4gICAgLyoqIEVuY29kZXMgYSBzaW5nbGUgdmFsdWUgdG8gdGhlIGFzY2VuZGluZyBpbmRleCBmb3JtYXQuICovICAgIEhlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyB0cjtcbiAgICAgICAgcmV0dXJuIHppLmZlLlp0KHQsIGUuTmUoMCAvKiBBU0NFTkRJTkcgKi8pKSwgZS5TZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBnaXZlbiBmaWVsZCB2YWx1ZXMgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9uIGluIGB0YXJnZXRgLlxuICAgICAqIEZvciBJTiBxdWVyaWVzLCBhIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBXZSh0LCBlLCBuKSB7XG4gICAgICAgIGlmIChudWxsID09PSBuKSByZXR1cm4gW107XG4gICAgICAgIGxldCBzID0gW107XG4gICAgICAgIHMucHVzaChuZXcgdHIpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgciBvZiBzZSh0KSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5baSsrXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBzKSBpZiAodGhpcy50bihlLCByLmZpZWxkUGF0aCkgJiYgS3QodCkpIHMgPSB0aGlzLmVuKHMsIHIsIHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbi5OZShyLmtpbmQpO1xuICAgICAgICAgICAgICAgIHppLmZlLlp0KHQsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm5uKHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIHRoZSBnaXZlbiBib3VuZHMgYWNjb3JkaW5nIHRvIHRoZSBzcGVjaWZpY2F0aW9uIGluIGB0YXJnZXRgLiBGb3IgSU5cbiAgICAgKiBxdWVyaWVzLCBhIGxpc3Qgb2YgcG9zc2libGUgdmFsdWVzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBqZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5XZSh0LCBlLCBuLnBvc2l0aW9uKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGJ5dGUgcmVwcmVzZW50YXRpb24gZm9yIHRoZSBwcm92aWRlZCBlbmNvZGVycy4gKi8gICAgbm4odCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikgZVtuXSA9IHRbbl0uU2UoKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXBhcmF0ZSBlbmNvZGVyIGZvciBlYWNoIGVsZW1lbnQgb2YgYW4gYXJyYXkuXG4gICAgICpcbiAgICAgKiBUaGUgbWV0aG9kIGFwcGVuZHMgZWFjaCB2YWx1ZSB0byBhbGwgZXhpc3RpbmcgZW5jb2RlcnMgKGUuZy4gZmlsdGVyKFwiYVwiLFxuICAgICAqIFwiPT1cIiwgXCJhMVwiKS5maWx0ZXIoXCJiXCIsIFwiaW5cIiwgW1wiYjFcIiwgXCJiMlwiXSkgYmVjb21lcyBbXCJhMSxiMVwiLCBcImExLGIyXCJdKS4gQVxuICAgICAqIGxpc3Qgb2YgbmV3IGVuY29kZXJzIGlzIHJldHVybmVkLlxuICAgICAqLyAgICBlbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBbIC4uLnQgXSwgaSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbi5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgZm9yIChjb25zdCBuIG9mIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgdHI7XG4gICAgICAgICAgICBzLnNlZWQobi5TZSgpKSwgemkuZmUuWnQodCwgcy5OZShlLmtpbmQpKSwgaS5wdXNoKHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICB0bih0LCBlKSB7XG4gICAgICAgIHJldHVybiAhIXQuZmlsdGVycy5maW5kKCh0ID0+IHQgaW5zdGFuY2VvZiBnZSAmJiB0LmZpZWxkLmlzRXF1YWwoZSkgJiYgKFwiaW5cIiAvKiBJTiAqLyA9PT0gdC5vcCB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gdC5vcCkpKTtcbiAgICB9XG4gICAgZ2V0RmllbGRJbmRleGVzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGxyKHQpLCBzID0gZnIodCk7XG4gICAgICAgIHJldHVybiAoZSA/IG4ucXQoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZChlLCBlKSkgOiBuLnF0KCkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHdpLmZvckVhY2godCwgKHQgPT4gcy5nZXQoWyB0LmluZGV4SWQsIHRoaXMudWlkIF0pLm5leHQoKG4gPT4ge1xuICAgICAgICAgICAgICAgIGUucHVzaChmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlID8gbmV3IHJlKGUuc2VxdWVuY2VOdW1iZXIsIG5ldyBhZShPaShlLnJlYWRUaW1lKSwgbmV3IHh0KEtzKGUuZG9jdW1lbnRLZXkpKSwgZS5sYXJnZXN0QmF0Y2hJZCkpIDogcmUuZW1wdHkoKSwgcyA9IHQuZmllbGRzLm1hcCgoKFt0LCBlXSkgPT4gbmV3IGllKG10LmZyb21TZXJ2ZXJGb3JtYXQodCksIGUpKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZWUodC5pbmRleElkLCB0LmNvbGxlY3Rpb25Hcm91cCwgcywgbik7XG4gICAgICAgICAgICAgICAgfSh0LCBuKSk7XG4gICAgICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKHQpLm5leHQoKHQgPT4gMCA9PT0gdC5sZW5ndGggPyBudWxsIDogKHQuc29ydCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXIgLSBlLmluZGV4U3RhdGUuc2VxdWVuY2VOdW1iZXI7XG4gICAgICAgICAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiBydCh0LmNvbGxlY3Rpb25Hcm91cCwgZS5jb2xsZWN0aW9uR3JvdXApO1xuICAgICAgICB9KSksIHRbMF0uY29sbGVjdGlvbkdyb3VwKSkpO1xuICAgIH1cbiAgICB1cGRhdGVDb2xsZWN0aW9uR3JvdXAodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbHIodCksIGkgPSBmcih0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc24odCkubmV4dCgodCA9PiBzLnF0KFwiY29sbGVjdGlvbkdyb3VwSW5kZXhcIiwgSURCS2V5UmFuZ2UuYm91bmQoZSwgZSkpLm5leHQoKGUgPT4gd2kuZm9yRWFjaChlLCAoZSA9PiBpLnB1dChmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGluZGV4SWQ6IHQsXG4gICAgICAgICAgICAgICAgdWlkOiBlLnVpZCB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBuLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBNaShzLnJlYWRUaW1lKSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudEtleTogVXMocy5kb2N1bWVudEtleS5wYXRoKSxcbiAgICAgICAgICAgICAgICBsYXJnZXN0QmF0Y2hJZDogcy5sYXJnZXN0QmF0Y2hJZFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlLmluZGV4SWQsIHRoaXMudXNlciwgdCwgbikpKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVJbmRleEVudHJpZXModCwgZSkge1xuICAgICAgICAvLyBQb3J0aW5nIE5vdGU6IGBnZXRGaWVsZEluZGV4ZXMoKWAgb24gV2ViIGRvZXMgbm90IGNhY2hlIGluZGV4IGxvb2t1cHMgYXNcbiAgICAgICAgLy8gaXQgY291bGQgYmUgdXNlZCBhY3Jvc3MgZGlmZmVyZW50IEluZGV4ZWREQiB0cmFuc2FjdGlvbnMuIEFzIGFueSBjYWNoZWRcbiAgICAgICAgLy8gZGF0YSBtaWdodCBiZSBpbnZhbGlkYXRlZCBieSBvdGhlciBtdWx0aS10YWIgY2xpZW50cywgd2UgY2FuIG9ubHkgdHJ1c3RcbiAgICAgICAgLy8gZGF0YSB3aXRoaW4gYSBzaW5nbGUgSW5kZXhlZERCIHRyYW5zYWN0aW9uLiBXZSB0aGVyZWZvcmUgYWRkIGEgY2FjaGVcbiAgICAgICAgLy8gaGVyZS5cbiAgICAgICAgY29uc3QgbiA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiB3aS5mb3JFYWNoKGUsICgoZSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uZ2V0KGUuY29sbGVjdGlvbkdyb3VwKTtcbiAgICAgICAgICAgIHJldHVybiAoaSA/IHdpLnJlc29sdmUoaSkgOiB0aGlzLmdldEZpZWxkSW5kZXhlcyh0LCBlLmNvbGxlY3Rpb25Hcm91cCkpLm5leHQoKGkgPT4gKG4uc2V0KGUuY29sbGVjdGlvbkdyb3VwLCBpKSwgXG4gICAgICAgICAgICB3aS5mb3JFYWNoKGksIChuID0+IHRoaXMucm4odCwgZSwgbikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMub24ocywgbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuaXNFcXVhbChpKSA/IHdpLnJlc29sdmUoKSA6IHRoaXMudW4odCwgcywgZSwgaSk7XG4gICAgICAgICAgICB9KSkpKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhbih0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBocih0KS5wdXQoe1xuICAgICAgICAgICAgaW5kZXhJZDogbi5pbmRleElkLFxuICAgICAgICAgICAgdWlkOiB0aGlzLnVpZCxcbiAgICAgICAgICAgIGFycmF5VmFsdWU6IG4uYXJyYXlWYWx1ZSxcbiAgICAgICAgICAgIGRpcmVjdGlvbmFsVmFsdWU6IG4uZGlyZWN0aW9uYWxWYWx1ZSxcbiAgICAgICAgICAgIGRvY3VtZW50S2V5OiBVcyhlLmtleS5wYXRoKVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY24odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gaHIodCkuZGVsZXRlKFsgbi5pbmRleElkLCB0aGlzLnVpZCwgbi5hcnJheVZhbHVlLCBuLmRpcmVjdGlvbmFsVmFsdWUsIFVzKGUua2V5LnBhdGgpIF0pO1xuICAgIH1cbiAgICBybih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBocih0KTtcbiAgICAgICAgbGV0IGkgPSBuZXcgJG4obnIpO1xuICAgICAgICByZXR1cm4gcy5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShbIG4uaW5kZXhJZCwgdGhpcy51aWQsIFVzKGUucGF0aCkgXSlcbiAgICAgICAgfSwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBpID0gaS5hZGQobmV3IGVyKG4uaW5kZXhJZCwgZSwgcy5hcnJheVZhbHVlLCBzLmRpcmVjdGlvbmFsVmFsdWUpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgdGhlIGluZGV4IGVudHJpZXMgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gICAgb24odCwgZSkge1xuICAgICAgICBsZXQgbiA9IG5ldyAkbihucik7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLlplKGUsIHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBzKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IG5lKGUpO1xuICAgICAgICBpZiAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdC5kYXRhLmZpZWxkKGkuZmllbGRQYXRoKTtcbiAgICAgICAgICAgIGlmIChLdChyKSkgZm9yIChjb25zdCBpIG9mIHIuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIG4gPSBuLmFkZChuZXcgZXIoZS5pbmRleElkLCB0LmtleSwgdGhpcy5IZShpKSwgcykpO1xuICAgICAgICB9IGVsc2UgbiA9IG4uYWRkKG5ldyBlcihlLmluZGV4SWQsIHQua2V5LCB1ciwgcykpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgaW5kZXggZW50cmllcyBmb3IgdGhlIHByb3ZpZGVkIGRvY3VtZW50IGJ5IGRlbGV0aW5nIGVudHJpZXNcbiAgICAgKiB0aGF0IGFyZSBubyBsb25nZXIgcmVmZXJlbmNlZCBpbiBgbmV3RW50cmllc2AgYW5kIGFkZGluZyBhbGwgbmV3bHkgYWRkZWRcbiAgICAgKiBlbnRyaWVzLlxuICAgICAqLyAgICB1bih0LCBlLCBuLCBzKSB7XG4gICAgICAgIE8oXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgXCJVcGRhdGluZyBpbmRleCBlbnRyaWVzIGZvciBkb2N1bWVudCAnJXMnXCIsIGUua2V5KTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZ2V0SXRlcmF0b3IoKSwgbyA9IGUuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgICAgIGxldCB1ID0gTG4ociksIGEgPSBMbihvKTtcbiAgICAgICAgICAgIC8vIFdhbGsgdGhyb3VnaCB0aGUgdHdvIHNldHMgYXQgdGhlIHNhbWUgdGltZSwgdXNpbmcgdGhlIG9yZGVyaW5nIGRlZmluZWQgYnlcbiAgICAgICAgICAgIC8vIGBjb21wYXJhdG9yYC5cbiAgICAgICAgICAgIGZvciAoO3UgfHwgYTsgKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSAhMSwgZSA9ICExO1xuICAgICAgICAgICAgICAgIGlmICh1ICYmIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG4odSwgYSk7XG4gICAgICAgICAgICAgICAgICAgIHMgPCAwID8gXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyByZW1vdmVkIGlmIHRoZSBuZXh0IGVsZW1lbnQgaW4gb3VyIG9yZGVyZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Fsa3Rocm91Z2ggaXMgb25seSBpbiBgYmVmb3JlYC5cbiAgICAgICAgICAgICAgICAgICAgZSA9ICEwIDogcyA+IDAgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgICAgICAvLyBpcyBvbmx5IGluIGBhZnRlcmAuXG4gICAgICAgICAgICAgICAgICAgIHQgPSAhMCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG51bGwgIT0gdSA/IGUgPSAhMCA6IHQgPSAhMDtcbiAgICAgICAgICAgICAgICB0ID8gKHMoYSksIGEgPSBMbihvKSkgOiBlID8gKGkodSksIHUgPSBMbihyKSkgOiAodSA9IExuKHIpLCBhID0gTG4obykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KG4sIHMsIG5yLCAoXG4gICAgICAgIC8qIG9uQWRkPSAqLyBuID0+IHtcbiAgICAgICAgICAgIGkucHVzaCh0aGlzLmFuKHQsIGUsIG4pKTtcbiAgICAgICAgfSksIChcbiAgICAgICAgLyogb25SZW1vdmU9ICovIG4gPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHRoaXMuY24odCwgZSwgbikpO1xuICAgICAgICB9KSksIHdpLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHNuKHQpIHtcbiAgICAgICAgbGV0IGUgPSAxO1xuICAgICAgICByZXR1cm4gZnIodCkuV3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLFxuICAgICAgICAgICAgcmV2ZXJzZTogITAsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UudXBwZXJCb3VuZChbIHRoaXMudWlkLCBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiBdKVxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuZG9uZSgpLCBlID0gbi5zZXF1ZW5jZU51bWJlciArIDE7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBuZXcgc2V0IG9mIElEQiByYW5nZXMgdGhhdCBzcGxpdHMgdGhlIGV4aXN0aW5nIHJhbmdlIGFuZCBleGNsdWRlc1xuICAgICAqIGFueSB2YWx1ZXMgdGhhdCBtYXRjaCB0aGUgYG5vdEluVmFsdWVgIGZyb20gdGhlc2UgcmFuZ2VzLiBBcyBhbiBleGFtcGxlLFxuICAgICAqICdbZm9vID4gMiAmJiBmb28gIT0gM11gIGJlY29tZXMgIGBbZm9vID4gMiAmJiA8IDMsIGZvbyA+IDNdYC5cbiAgICAgKi8gICAgY3JlYXRlUmFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBUaGUgbm90SWIgdmFsdWVzIG5lZWQgdG8gYmUgc29ydGVkIGFuZCB1bmlxdWUgc28gdGhhdCB3ZSBjYW4gcmV0dXJuIGFcbiAgICAgICAgLy8gc29ydGVkIHNldCBvZiBub24tb3ZlcmxhcHBpbmcgcmFuZ2VzLlxuICAgICAgICBuID0gbi5zb3J0KCgodCwgZSkgPT4gbnIodCwgZSkpKS5maWx0ZXIoKCh0LCBlLCBuKSA9PiAhZSB8fCAwICE9PSBucih0LCBuW2UgLSAxXSkpKTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICBzLnB1c2godCk7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBuKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbnIoaSwgdCksIHIgPSBucihpLCBlKTtcbiAgICAgICAgICAgIGlmICgwID09PSBuKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCBpcyB0aGUgbG93ZXIgYm91bmQuIFdlIHRoZXJlZm9yZSBuZWVkIHRvIHJhaXNlIHRoZSBib3VuZFxuICAgICAgICAgICAgLy8gdG8gdGhlIG5leHQgdmFsdWUuXG4gICAgICAgICAgICBzWzBdID0gdC5rZSgpOyBlbHNlIGlmIChuID4gMCAmJiByIDwgMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgaW4gdGhlIG1pZGRsZSBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIHMucHVzaChpKSwgcy5wdXNoKGkua2UoKSk7IGVsc2UgaWYgKHIgPiAwKSBcbiAgICAgICAgICAgIC8vIGBub3RJblZhbHVlYCAoYW5kIGFsbCBmb2xsb3dpbmcgdmFsdWVzKSBhcmUgb3V0IG9mIHRoZSByYW5nZVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcy5sZW5ndGg7IHQgKz0gMikgaS5wdXNoKElEQktleVJhbmdlLmJvdW5kKFsgc1t0XS5pbmRleElkLCB0aGlzLnVpZCwgc1t0XS5hcnJheVZhbHVlLCBzW3RdLmRpcmVjdGlvbmFsVmFsdWUsIFwiXCIgXSwgWyBzW3QgKyAxXS5pbmRleElkLCB0aGlzLnVpZCwgc1t0ICsgMV0uYXJyYXlWYWx1ZSwgc1t0ICsgMV0uZGlyZWN0aW9uYWxWYWx1ZSwgXCJcIiBdKSk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNvbGxlY3Rpb25QYXJlbnRzXG4gKiBkb2N1bWVudCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBjcih0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwiY29sbGVjdGlvblBhcmVudHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBlbnRyeSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gaHIodCkge1xuICAgIHJldHVybiBQaSh0LCBcImluZGV4RW50cmllc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGNvbmZpZ3VyYXRpb24gb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGxyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJpbmRleENvbmZpZ3VyYXRpb25cIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBzdGF0ZSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gZnIodCkge1xuICAgIHJldHVybiBQaSh0LCBcImluZGV4U3RhdGVcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGRyID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIF9yIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICB0LCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICBlLCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gdCwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gZSwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gbmV3IF9yKHQsIF9yLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBfci5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIHdyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IHQuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKSwgciA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCB1ID0gMDtcbiAgICBjb25zdCBhID0gcy5XdCh7XG4gICAgICAgIHJhbmdlOiBvXG4gICAgfSwgKCh0LCBlLCBuKSA9PiAodSsrLCBuLmRlbGV0ZSgpKSkpO1xuICAgIHIucHVzaChhLm5leHQoKCgpID0+IHtcbiAgICAgICAgVSgxID09PSB1KTtcbiAgICB9KSkpO1xuICAgIGNvbnN0IGMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2Ygbi5tdXRhdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcyA9IFdzKGUsIHQua2V5LnBhdGgsIG4uYmF0Y2hJZCk7XG4gICAgICAgIHIucHVzaChpLmRlbGV0ZShzKSksIGMucHVzaCh0LmtleSk7XG4gICAgfVxuICAgIHJldHVybiB3aS53YWl0Rm9yKHIpLm5leHQoKCgpID0+IGMpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFwcHJveGltYXRlIHNpemUgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC5cbiAqLyBmdW5jdGlvbiBtcih0KSB7XG4gICAgaWYgKCF0KSByZXR1cm4gMDtcbiAgICBsZXQgZTtcbiAgICBpZiAodC5kb2N1bWVudCkgZSA9IHQuZG9jdW1lbnQ7IGVsc2UgaWYgKHQudW5rbm93bkRvY3VtZW50KSBlID0gdC51bmtub3duRG9jdW1lbnQ7IGVsc2Uge1xuICAgICAgICBpZiAoIXQubm9Eb2N1bWVudCkgdGhyb3cgTCgpO1xuICAgICAgICBlID0gdC5ub0RvY3VtZW50O1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZSkubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEEgbXV0YXRpb24gcXVldWUgZm9yIGEgc3BlY2lmaWMgdXNlciwgYmFja2VkIGJ5IEluZGV4ZWREQi4gKi8gX3IuREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUgPSAxMCwgXG5fci5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QgPSAxZTMsIF9yLkRFRkFVTFQgPSBuZXcgX3IoNDE5NDMwNDAsIF9yLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBfci5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpLCBcbl9yLkRJU0FCTEVEID0gbmV3IF9yKC0xLCAwLCAwKTtcblxuY2xhc3MgZ3Ige1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBub3JtYWxpemVkIHVzZXJJZCAoZS5nLiBudWxsIFVJRCA9PiBcIlwiIHVzZXJJZCkgdXNlZCB0byBzdG9yZSAvXG4gICAgICogcmV0cmlldmUgbXV0YXRpb25zLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy51c2VySWQgPSB0LCB0aGlzLk0gPSBlLCB0aGlzLmluZGV4TWFuYWdlciA9IG4sIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSBzLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhY2hlcyB0aGUgZG9jdW1lbnQga2V5cyBmb3IgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzLiBJZiB0aGUgbXV0YXRpb25cbiAgICAgICAgICogaGFzIGJlZW4gcmVtb3ZlZCBmcm9tIEluZGV4ZWREYiwgdGhlIGNhY2hlZCB2YWx1ZSBtYXkgY29udGludWUgdG9cbiAgICAgICAgICogYmUgdXNlZCB0byByZXRyaWV2ZSB0aGUgYmF0Y2gncyBkb2N1bWVudCBrZXlzLiBUbyByZW1vdmUgYSBjYWNoZWQgdmFsdWVcbiAgICAgICAgICogbG9jYWxseSwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBzaG91bGQgYmUgaW52b2tlZCBlaXRoZXIgZGlyZWN0bHlcbiAgICAgICAgICogb3IgdGhyb3VnaCBgcmVtb3ZlTXV0YXRpb25CYXRjaGVzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaXRoIG11bHRpLXRhYiwgd2hlbiB0aGUgcHJpbWFyeSBjbGllbnQgYWNrbm93bGVkZ2VzIG9yIHJlamVjdHMgYSBtdXRhdGlvbixcbiAgICAgICAgICogdGhpcyBjYWNoZSBpcyB1c2VkIGJ5IHNlY29uZGFyeSBjbGllbnRzIHRvIGludmFsaWRhdGUgdGhlIGxvY2FsXG4gICAgICAgICAqIHZpZXcgb2YgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgcHJldmlvdXNseSBhZmZlY3RlZCBieSB0aGUgbXV0YXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgICAgICB0aGlzLmhuID0ge307XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgbXV0YXRpb24gcXVldWUgZm9yIHRoZSBnaXZlbiB1c2VyLlxuICAgICAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqIEBwYXJhbSBzZXJpYWxpemVyIC0gVGhlIHNlcmlhbGl6ZXIgdG8gdXNlIHdoZW4gcGVyc2lzdGluZyB0byBJbmRleGVkRGIuXG4gICAgICovICAgIHN0YXRpYyBZdCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRPRE8obWNnKTogRmlndXJlIG91dCB3aGF0IGNvbnN0cmFpbnRzIHRoZXJlIGFyZSBvbiB1c2VySURzXG4gICAgICAgIC8vIEluIHBhcnRpY3VsYXIsIGFyZSB0aGVyZSBhbnkgcmVzZXJ2ZWQgY2hhcmFjdGVycz8gYXJlIGVtcHR5IGlkcyBhbGxvd2VkP1xuICAgICAgICAvLyBGb3IgdGhlIG1vbWVudCBzdG9yZSB0aGVzZSB0b2dldGhlciBpbiB0aGUgc2FtZSBtdXRhdGlvbnMgdGFibGUgYXNzdW1pbmdcbiAgICAgICAgLy8gdGhhdCBlbXB0eSB1c2VySURzIGFyZW4ndCBhbGxvd2VkLlxuICAgICAgICBVKFwiXCIgIT09IHQudWlkKTtcbiAgICAgICAgY29uc3QgaSA9IHQuaXNBdXRoZW50aWNhdGVkKCkgPyB0LnVpZCA6IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgZ3IoaSwgZSwgbiwgcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICBsZXQgZSA9ICEwO1xuICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIF0sIFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgcmV0dXJuIHByKHQpLld0KHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IG5cbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBlID0gITEsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IElyKHQpLCByID0gcHIodCk7XG4gICAgICAgIC8vIFRoZSBJbmRleGVkRGIgaW1wbGVtZW50YXRpb24gaW4gQ2hyb21lIChhbmQgRmlyZWZveCkgZG9lcyBub3QgaGFuZGxlXG4gICAgICAgIC8vIGNvbXBvdW5kIGluZGljZXMgdGhhdCBpbmNsdWRlIGF1dG8tZ2VuZXJhdGVkIGtleXMgY29ycmVjdGx5LiBUbyBlbnN1cmVcbiAgICAgICAgLy8gdGhhdCB0aGUgaW5kZXggZW50cnkgaXMgYWRkZWQgY29ycmVjdGx5IGluIGFsbCBicm93c2Vycywgd2UgcGVyZm9ybSB0d29cbiAgICAgICAgLy8gd3JpdGVzOiBUaGUgZmlyc3Qgd3JpdGUgaXMgdXNlZCB0byByZXRyaWV2ZSB0aGUgbmV4dCBhdXRvLWdlbmVyYXRlZCBCYXRjaFxuICAgICAgICAvLyBJRCwgYW5kIHRoZSBzZWNvbmQgd3JpdGUgcG9wdWxhdGVzIHRoZSBpbmRleCBhbmQgc3RvcmVzIHRoZSBhY3R1YWxcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2guXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NzAxOTcyXG4gICAgICAgIC8vIFdlIHdyaXRlIGFuIGVtcHR5IG9iamVjdCB0byBvYnRhaW4ga2V5XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiByLmFkZCh7fSkubmV4dCgobyA9PiB7XG4gICAgICAgICAgICBVKFwibnVtYmVyXCIgPT0gdHlwZW9mIG8pO1xuICAgICAgICAgICAgY29uc3QgdSA9IG5ldyBWaShvLCBlLCBuLCBzKSwgYSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbi5iYXNlTXV0YXRpb25zLm1hcCgoZSA9PiBicyh0Lkp0LCBlKSkpLCBpID0gbi5tdXRhdGlvbnMubWFwKChlID0+IGJzKHQuSnQsIGUpKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkOiBlLFxuICAgICAgICAgICAgICAgICAgICBiYXRjaElkOiBuLmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsV3JpdGVUaW1lTXM6IG4ubG9jYWxXcml0ZVRpbWUudG9NaWxsaXMoKSxcbiAgICAgICAgICAgICAgICAgICAgYmFzZU11dGF0aW9uczogcyxcbiAgICAgICAgICAgICAgICAgICAgbXV0YXRpb25zOiBpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0odGhpcy5NLCB0aGlzLnVzZXJJZCwgdSksIGMgPSBbXTtcbiAgICAgICAgICAgIGxldCBoID0gbmV3ICRuKCgodCwgZSkgPT4gcnQodC5jYW5vbmljYWxTdHJpbmcoKSwgZS5jYW5vbmljYWxTdHJpbmcoKSkpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFdzKHRoaXMudXNlcklkLCB0LmtleS5wYXRoLCBvKTtcbiAgICAgICAgICAgICAgICBoID0gaC5hZGQodC5rZXkucGF0aC5wb3BMYXN0KCkpLCBjLnB1c2goci5wdXQoYSkpLCBjLnB1c2goaS5wdXQoZSwgenMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBoLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgIGMucHVzaCh0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSk7XG4gICAgICAgICAgICB9KSksIHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuaG5bb10gPSB1LmtleXMoKTtcbiAgICAgICAgICAgIH0pKSwgd2kud2FpdEZvcihjKS5uZXh0KCgoKSA9PiB1KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBwcih0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gKFUodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgRmkodGhpcy5NLCB0KSkgOiBudWxsKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGRvY3VtZW50IGtleXMgZm9yIHRoZSBtdXRhdGlvbiBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLlxuICAgICAqIEZvciBwcmltYXJ5IGNsaWVudHMsIHRoaXMgbWV0aG9kIHJldHVybnMgYG51bGxgIGFmdGVyXG4gICAgICogYHJlbW92ZU11dGF0aW9uQmF0Y2hlcygpYCBoYXMgYmVlbiBjYWxsZWQuIFNlY29uZGFyeSBjbGllbnRzIHJldHVybiBhXG4gICAgICogY2FjaGVkIHJlc3VsdCB1bnRpbCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIGlzIGludm9rZWQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBsbih0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhuW2VdID8gd2kucmVzb2x2ZSh0aGlzLmhuW2VdKSA6IHRoaXMubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQua2V5cygpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhuW2VdID0gbiwgbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkLCBuIF0pO1xuICAgICAgICBsZXQgaSA9IG51bGw7XG4gICAgICAgIHJldHVybiBwcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgZS51c2VySWQgPT09IHRoaXMudXNlcklkICYmIChVKGUuYmF0Y2hJZCA+PSBuKSwgaSA9IEZpKHRoaXMuTSwgZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSAtMTtcbiAgICAgICAgcmV0dXJuIHByKHQpLld0KHtcbiAgICAgICAgICAgIGluZGV4OiBcInVzZXJNdXRhdGlvbnNJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IGUsXG4gICAgICAgICAgICByZXZlcnNlOiAhMFxuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSBlLmJhdGNoSWQsIHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gSURCS2V5UmFuZ2UuYm91bmQoWyB0aGlzLnVzZXJJZCwgLTEgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gcHIodCkucXQoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgZSkubmV4dCgodCA9PiB0Lm1hcCgodCA9PiBGaSh0aGlzLk0sIHQpKSkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICAvLyBTY2FuIHRoZSBkb2N1bWVudC1tdXRhdGlvbiBpbmRleCBzdGFydGluZyB3aXRoIGEgcHJlZml4IHN0YXJ0aW5nIHdpdGhcbiAgICAgICAgLy8gdGhlIGdpdmVuIGRvY3VtZW50S2V5LlxuICAgICAgICBjb25zdCBuID0ganModGhpcy51c2VySWQsIGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKG4pLCBpID0gW107XG4gICAgICAgIHJldHVybiBJcih0KS5XdCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKG4sIHMsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCB1LCBhXSA9IG4sIGMgPSBLcyh1KTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGMpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBwcih0KS5nZXQoYSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBMKCk7XG4gICAgICAgICAgICAgICAgVSh0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBpLnB1c2goRmkodGhpcy5NLCB0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgJG4ocnQpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGpzKHRoaXMudXNlcklkLCBlLnBhdGgpLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKSwgbyA9IElyKHQpLld0KHtcbiAgICAgICAgICAgICAgICByYW5nZTogclxuICAgICAgICAgICAgfSwgKCh0LCBzLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgW3IsIG8sIHVdID0gdCwgYSA9IEtzKG8pO1xuICAgICAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgICAgICAvLyBpbnRlcmVzdC4gTm90ZSB0aGF0IGJlY2F1c2Ugd2Ugb3JkZXIgYnkgcGF0aCBmaXJzdCwgYW5kIHdlXG4gICAgICAgICAgICAgICAgLy8gb3JkZXIgdGVybWluYXRvcnMgYmVmb3JlIHBhdGggc2VwYXJhdG9ycywgd2UnbGwgZW5jb3VudGVyIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgICAgIC8vIHRoZSByb3dzIGZvciBkb2N1bWVudEtleSB3aWxsIG9jY3VyIGJlZm9yZSBhbnkgcm93cyBmb3JcbiAgICAgICAgICAgICAgICAvLyBkb2N1bWVudHMgbmVzdGVkIGluIGEgc3ViY29sbGVjdGlvbiBiZW5lYXRoIGRvY3VtZW50S2V5IHNvIHdlXG4gICAgICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID09PSB0aGlzLnVzZXJJZCAmJiBlLnBhdGguaXNFcXVhbChhKSA/IG4gPSBuLmFkZCh1KSA6IGkuZG9uZSgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcy5wdXNoKG8pO1xuICAgICAgICB9KSksIHdpLndhaXRGb3IocykubmV4dCgoKCkgPT4gdGhpcy5mbih0LCBuKSkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdRdWVyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLnBhdGgsIHMgPSBuLmxlbmd0aCArIDEsIGkgPSBqcyh0aGlzLnVzZXJJZCwgbiksIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKGkpO1xuICAgICAgICAvLyBDb2xsZWN0IHVwIHVuaXF1ZSBiYXRjaElEcyBlbmNvdW50ZXJlZCBkdXJpbmcgYSBzY2FuIG9mIHRoZSBpbmRleC4gVXNlIGFcbiAgICAgICAgLy8gU29ydGVkU2V0IHRvIGFjY3VtdWxhdGUgYmF0Y2ggSURzIHNvIHRoZXkgY2FuIGJlIHRyYXZlcnNlZCBpbiBvcmRlciBpbiBhXG4gICAgICAgIC8vIHNjYW4gb2YgdGhlIG1haW4gdGFibGUuXG4gICAgICAgIGxldCBvID0gbmV3ICRuKHJ0KTtcbiAgICAgICAgcmV0dXJuIElyKHQpLld0KHtcbiAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgIH0sICgodCwgZSwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgW3IsIHUsIGFdID0gdCwgYyA9IEtzKHUpO1xuICAgICAgICAgICAgciA9PT0gdGhpcy51c2VySWQgJiYgbi5pc1ByZWZpeE9mKGMpID8gXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlXG4gICAgICAgICAgICAvLyBxdWVyeSBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcydcbiAgICAgICAgICAgIC8vIGNhbid0IG1hdGNoIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgYy5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZChhKSkgOiBpLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuZm4odCwgbykpKTtcbiAgICB9XG4gICAgZm4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW10sIHMgPSBbXTtcbiAgICAgICAgLy8gVE9ETyhyb2Nrd29vZCk6IEltcGxlbWVudCB0aGlzIHVzaW5nIGl0ZXJhdGUuXG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgcy5wdXNoKHByKHQpLmdldChlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkgdGhyb3cgTCgpO1xuICAgICAgICAgICAgICAgIFUodC51c2VySWQgPT09IHRoaXMudXNlcklkKSwgbi5wdXNoKEZpKHRoaXMuTSwgdCkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKHMpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3cih0Lkh0LCB0aGlzLnVzZXJJZCwgZSkubmV4dCgobiA9PiAodC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRuKGUuYmF0Y2hJZCk7XG4gICAgICAgIH0pKSwgd2kuZm9yRWFjaChuLCAoZSA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgY2FjaGVkIGtleXMgZm9yIGEgbXV0YXRpb24gYmF0Y2guIFRoaXMgbWV0aG9kIHNob3VsZCBiZVxuICAgICAqIGNhbGxlZCBieSBzZWNvbmRhcnkgY2xpZW50cyBhZnRlciB0aGV5IHByb2Nlc3MgbXV0YXRpb24gdXBkYXRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBkb2VzIG5vdCBoYXZlIHRvIGJlIGNhbGxlZCBmcm9tIHByaW1hcnkgY2xpZW50cyBhc1xuICAgICAqIHRoZSBjb3JyZXNwb25kaW5nIGNhY2hlIGVudHJpZXMgYXJlIGNsZWFyZWQgd2hlbiBhbiBhY2tub3dsZWRnZWQgb3JcbiAgICAgKiByZWplY3RlZCBiYXRjaCBpcyByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBkbih0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLmhuW3RdO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrRW1wdHkodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHJldHVybiB3aS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAvLyBWZXJpZnkgdGhhdCB0aGVyZSBhcmUgbm8gZW50cmllcyBpbiB0aGUgZG9jdW1lbnRNdXRhdGlvbnMgaW5kZXggaWZcbiAgICAgICAgICAgIC8vIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKFsgdGhpcy51c2VySWQgXSk7XG4gICAgICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgICAgICByZXR1cm4gSXIodCkuV3Qoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodFswXSA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEtzKHRbMV0pO1xuICAgICAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG4uZG9uZSgpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBVKDAgPT09IHMubGVuZ3RoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB5cih0LCB0aGlzLnVzZXJJZCwgZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xuICAgIF9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFRyKHQpLmdldCh0aGlzLnVzZXJJZCkubmV4dCgodCA9PiB0IHx8IHtcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICAgICAgICBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZDogLTEsXG4gICAgICAgICAgICBsYXN0U3RyZWFtVG9rZW46IFwiXCJcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIgY29udGFpbnMgYSBwZW5kaW5nXG4gKiAgICAgICAgIG11dGF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICovIGZ1bmN0aW9uIHlyKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0ganMoZSwgbi5wYXRoKSwgaSA9IHNbMV0sIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHMpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIElyKHQpLld0KHtcbiAgICAgICAgcmFuZ2U6IHIsXG4gICAgICAgIGp0OiAhMFxuICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICBjb25zdCBbciwgdSwgLypiYXRjaElEKi8gYV0gPSB0O1xuICAgICAgICByID09PSBlICYmIHUgPT09IGkgJiYgKG8gPSAhMCksIHMuZG9uZSgpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBvKSk7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYW55IG11dGF0aW9uIHF1ZXVlIGNvbnRhaW5zIHRoZSBnaXZlbiBkb2N1bWVudC4gKi9cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvbnMgb2JqZWN0IHN0b3JlLlxuICovXG5mdW5jdGlvbiBwcih0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwibXV0YXRpb25zXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25RdWV1ZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIElyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJkb2N1bWVudE11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBUcih0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwibXV0YXRpb25RdWV1ZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogT2Zmc2V0IHRvIGVuc3VyZSBub24tb3ZlcmxhcHBpbmcgdGFyZ2V0IGlkcy4gKi9cbi8qKlxuICogR2VuZXJhdGVzIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyB0YXJnZXQgSURzIGZvciBzZW5kaW5nIHRhcmdldHMgdG8gdGhlXG4gKiB3YXRjaCBzdHJlYW0uXG4gKlxuICogVGhlIGNsaWVudCBjb25zdHJ1Y3RzIHR3byBnZW5lcmF0b3JzLCBvbmUgZm9yIHRoZSB0YXJnZXQgY2FjaGUsIGFuZCBvbmUgZm9yXG4gKiBmb3IgdGhlIHN5bmMgZW5naW5lICh0byBnZW5lcmF0ZSBsaW1ibyBkb2N1bWVudHMgdGFyZ2V0cykuIFRoZXNlXG4gKiBnZW5lcmF0b3JzIHByb2R1Y2Ugbm9uLW92ZXJsYXBwaW5nIElEcyAoYnkgdXNpbmcgZXZlbiBhbmQgb2RkIElEc1xuICogcmVzcGVjdGl2ZWx5KS5cbiAqXG4gKiBCeSBzZXBhcmF0aW5nIHRoZSB0YXJnZXQgSUQgc3BhY2UsIHRoZSBxdWVyeSBjYWNoZSBjYW4gZ2VuZXJhdGUgdGFyZ2V0IElEc1xuICogdGhhdCBwZXJzaXN0IGFjcm9zcyBjbGllbnQgcmVzdGFydHMsIHdoaWxlIHN5bmMgZW5naW5lIGNhbiBpbmRlcGVuZGVudGx5XG4gKiBnZW5lcmF0ZSBpbi1tZW1vcnkgdGFyZ2V0IElEcyB0aGF0IGFyZSB0cmFuc2llbnQgYW5kIGNhbiBiZSByZXVzZWQgYWZ0ZXIgYVxuICogcmVzdGFydC5cbiAqL1xuY2xhc3MgRXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy53biA9IHQ7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnduICs9IDIsIHRoaXMud247XG4gICAgfVxuICAgIHN0YXRpYyBtbigpIHtcbiAgICAgICAgLy8gVGhlIHRhcmdldCBjYWNoZSBnZW5lcmF0b3IgbXVzdCByZXR1cm4gJzInIGluIGl0cyBmaXJzdCBjYWxsIHRvIGBuZXh0KClgXG4gICAgICAgIC8vIGFzIHRoZXJlIGlzIG5vIGRpZmZlcmVudGlhdGlvbiBpbiB0aGUgcHJvdG9jb2wgbGF5ZXIgYmV0d2VlbiBhbiB1bnNldFxuICAgICAgICAvLyBudW1iZXIgYW5kIHRoZSBudW1iZXIgJzAnLiBJZiB3ZSB3ZXJlIHRvIHNlbnQgYSB0YXJnZXQgd2l0aCB0YXJnZXQgSURcbiAgICAgICAgLy8gJzAnLCB0aGUgYmFja2VuZCB3b3VsZCBjb25zaWRlciBpdCB1bnNldCBhbmQgcmVwbGFjZSBpdCB3aXRoIGl0cyBvd24gSUQuXG4gICAgICAgIHJldHVybiBuZXcgRXIoMCk7XG4gICAgfVxuICAgIHN0YXRpYyBnbigpIHtcbiAgICAgICAgLy8gU3luYyBlbmdpbmUgYXNzaWducyB0YXJnZXQgSURzIGZvciBsaW1ibyBkb2N1bWVudCBkZXRlY3Rpb24uXG4gICAgICAgIHJldHVybiBuZXcgRXIoLTEpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgQXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQsIHRoaXMuTSA9IGU7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgY2FjaGUgZ2xvYmFsIG1ldGFkYXRhIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBzaW5jZVxuICAgIC8vIHNvbWUgb2YgaXQgKGluIHBhcnRpY3VsYXIgYGhpZ2hlc3RUYXJnZXRJZGApIGNhbiBiZSBtb2RpZmllZCBieSBzZWNvbmRhcnlcbiAgICAvLyB0YWJzLiBXZSBjb3VsZCBwZXJoYXBzIGJlIG1vcmUgZ3JhbnVsYXIgKGFuZCBlLmcuIHN0aWxsIGNhY2hlXG4gICAgLy8gYGxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb25gIGluIG1lbW9yeSkgYnV0IGZvciBzaW1wbGljaXR5IHdlIGN1cnJlbnRseSBnb1xuICAgIC8vIHRvIEluZGV4ZWREYiB3aGVuZXZlciB3ZSBuZWVkIHRvIHJlYWQgbWV0YWRhdGEuIFdlIGNhbiByZXZpc2l0IGlmIGl0IHR1cm5zXG4gICAgLy8gb3V0IHRvIGhhdmUgYSBtZWFuaW5nZnVsIHBlcmZvcm1hbmNlIGltcGFjdC5cbiAgICBhbGxvY2F0ZVRhcmdldElkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueW4odCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IEVyKGUuaGlnaGVzdFRhcmdldElkKTtcbiAgICAgICAgICAgIHJldHVybiBlLmhpZ2hlc3RUYXJnZXRJZCA9IG4ubmV4dCgpLCB0aGlzLnBuKHQsIGUpLm5leHQoKCgpID0+IGUuaGlnaGVzdFRhcmdldElkKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0TGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnluKHQpLm5leHQoKHQgPT4gY3QuZnJvbVRpbWVzdGFtcChuZXcgYXQodC5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uLnNlY29uZHMsIHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5uYW5vc2Vjb25kcykpKSk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnluKHQpLm5leHQoKHQgPT4gdC5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIpKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueW4odCkubmV4dCgocyA9PiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlLCBuICYmIChzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuLnRvVGltZXN0YW1wKCkpLCBcbiAgICAgICAgZSA+IHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IGUpLCB0aGlzLnBuKHQsIHMpKSkpO1xuICAgIH1cbiAgICBhZGRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSW4odCwgZSkubmV4dCgoKCkgPT4gdGhpcy55bih0KS5uZXh0KChuID0+IChuLnRhcmdldENvdW50ICs9IDEsIHRoaXMuVG4oZSwgbiksIFxuICAgICAgICB0aGlzLnBuKHQsIG4pKSkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Jbih0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUudGFyZ2V0SWQpLm5leHQoKCgpID0+IFJyKHQpLmRlbGV0ZShlLnRhcmdldElkKSkpLm5leHQoKCgpID0+IHRoaXMueW4odCkpKS5uZXh0KChlID0+IChVKGUudGFyZ2V0Q291bnQgPiAwKSwgXG4gICAgICAgIGUudGFyZ2V0Q291bnQgLT0gMSwgdGhpcy5wbih0LCBlKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRHJvcHMgYW55IHRhcmdldHMgd2l0aCBzZXF1ZW5jZSBudW1iZXIgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIHRoZSB1cHBlciBib3VuZCwgZXhjZXB0aW5nIHRob3NlXG4gICAgICogcHJlc2VudCBpbiBgYWN0aXZlVGFyZ2V0SWRzYC4gRG9jdW1lbnQgYXNzb2NpYXRpb25zIGZvciB0aGUgcmVtb3ZlZCB0YXJnZXRzIGFyZSBhbHNvIHJlbW92ZWQuXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHRhcmdldHMgcmVtb3ZlZC5cbiAgICAgKi8gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gUnIodCkuV3QoKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gJGkobyk7XG4gICAgICAgICAgICB1LnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQodS50YXJnZXRJZCkgJiYgKHMrKywgaS5wdXNoKHRoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0LCB1KSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gd2kud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gUnIodCkuV3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gJGkobik7XG4gICAgICAgICAgICBlKHMpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHluKHQpIHtcbiAgICAgICAgcmV0dXJuIGJyKHQpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KCh0ID0+IChVKG51bGwgIT09IHQpLCB0KSkpO1xuICAgIH1cbiAgICBwbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBicih0KS5wdXQoXCJ0YXJnZXRHbG9iYWxLZXlcIiwgZSk7XG4gICAgfVxuICAgIEluKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJyKHQpLnB1dChCaSh0aGlzLk0sIGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW4tcGxhY2UgdXBkYXRlcyB0aGUgcHJvdmlkZWQgbWV0YWRhdGEgdG8gYWNjb3VudCBmb3IgdmFsdWVzIGluIHRoZSBnaXZlblxuICAgICAqIFRhcmdldERhdGEuIFNhdmluZyBpcyBkb25lIHNlcGFyYXRlbHkuIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSB3ZXJlIGFueVxuICAgICAqIGNoYW5nZXMgdG8gdGhlIG1ldGFkYXRhLlxuICAgICAqLyAgICBUbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gITE7XG4gICAgICAgIHJldHVybiB0LnRhcmdldElkID4gZS5oaWdoZXN0VGFyZ2V0SWQgJiYgKGUuaGlnaGVzdFRhcmdldElkID0gdC50YXJnZXRJZCwgbiA9ICEwKSwgXG4gICAgICAgIHQuc2VxdWVuY2VOdW1iZXIgPiBlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAoZS5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSB0LnNlcXVlbmNlTnVtYmVyLCBcbiAgICAgICAgbiA9ICEwKSwgbjtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy55bih0KS5uZXh0KCh0ID0+IHQudGFyZ2V0Q291bnQpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIC8vIEl0ZXJhdGluZyBieSB0aGUgY2Fub25pY2FsSWQgbWF5IHlpZWxkIG1vcmUgdGhhbiBvbmUgcmVzdWx0IGJlY2F1c2VcbiAgICAgICAgLy8gY2Fub25pY2FsSWQgdmFsdWVzIGFyZSBub3QgcmVxdWlyZWQgdG8gYmUgdW5pcXVlIHBlciB0YXJnZXQuIFRoaXMgcXVlcnlcbiAgICAgICAgLy8gZGVwZW5kcyBvbiB0aGUgcXVlcnlUYXJnZXRzIGluZGV4IHRvIGJlIGVmZmljaWVudC5cbiAgICAgICAgY29uc3QgbiA9IGZlKGUpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyBuLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIGxldCBpID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIFJyKHQpLld0KHtcbiAgICAgICAgICAgIHJhbmdlOiBzLFxuICAgICAgICAgICAgaW5kZXg6IFwicXVlcnlUYXJnZXRzSW5kZXhcIlxuICAgICAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSAkaShuKTtcbiAgICAgICAgICAgIC8vIEFmdGVyIGZpbmRpbmcgYSBwb3RlbnRpYWwgbWF0Y2gsIGNoZWNrIHRoYXQgdGhlIHRhcmdldCBpc1xuICAgICAgICAgICAgLy8gYWN0dWFsbHkgZXF1YWwgdG8gdGhlIHJlcXVlc3RlZCB0YXJnZXQuXG4gICAgICAgICAgICAgICAgICAgICAgICBfZShlLCByLnRhcmdldCkgJiYgKGkgPSByLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGFkZE1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gW10sIGkgPSBQcih0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gVXMoZS5wYXRoKTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dCh7XG4gICAgICAgICAgICAgICAgdGFyZ2V0SWQ6IG4sXG4gICAgICAgICAgICAgICAgcGF0aDogclxuICAgICAgICAgICAgfSkpLCBzLnB1c2godGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgbiwgZSkpO1xuICAgICAgICB9KSksIHdpLndhaXRGb3Iocyk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5cyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogVGhlIHJldmVyc2UgaW5kZXggKGRvY3VtZW50c1RhcmdldHMpIGlzIG1haW50YWluZWQgYnlcbiAgICAgICAgLy8gSW5kZXhlZERiLlxuICAgICAgICBjb25zdCBzID0gUHIodCk7XG4gICAgICAgIHJldHVybiB3aS5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBVcyhlLnBhdGgpO1xuICAgICAgICAgICAgcmV0dXJuIHdpLndhaXRGb3IoWyBzLmRlbGV0ZShbIG4sIGkgXSksIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIG4sIGUpIF0pO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFByKHQpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlIF0sIFsgZSArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gbi5kZWxldGUocyk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSwgcyA9IFByKHQpO1xuICAgICAgICBsZXQgaSA9IHpuKCk7XG4gICAgICAgIHJldHVybiBzLld0KHtcbiAgICAgICAgICAgIHJhbmdlOiBuLFxuICAgICAgICAgICAganQ6ICEwXG4gICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IEtzKHRbMV0pLCByID0gbmV3IHh0KHMpO1xuICAgICAgICAgICAgaSA9IGkuYWRkKHIpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBVcyhlLnBhdGgpLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBuIF0sIFsgdXQobikgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiBQcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLFxuICAgICAgICAgICAganQ6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChbdCwgZV0sIG4sIHMpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gdCAmJiAoaSsrLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBFdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBScih0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gJGkodCkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gUnIodCkge1xuICAgIHJldHVybiBQaSh0LCBcInRhcmdldHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gYnIodCkge1xuICAgIHJldHVybiBQaSh0LCBcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gUHIodCkge1xuICAgIHJldHVybiBQaSh0LCBcInRhcmdldERvY3VtZW50c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xuICogYXJlIHJlLXRocm93bi5cbiAqXG4gKiBAcGFyYW0gZXJyIC0gQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxuICovIGFzeW5jIGZ1bmN0aW9uIFZyKHQpIHtcbiAgICBpZiAodC5jb2RlICE9PSBLLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5tZXNzYWdlICE9PSBkaSkgdGhyb3cgdDtcbiAgICBPKFwiTG9jYWxTdG9yZVwiLCBcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIHZyKFt0LCBlXSwgW24sIHNdKSB7XG4gICAgY29uc3QgaSA9IHJ0KHQsIG4pO1xuICAgIHJldHVybiAwID09PSBpID8gcnQoZSwgcykgOiBpO1xufVxuXG4vKipcbiAqIFVzZWQgdG8gY2FsY3VsYXRlIHRoZSBudGggc2VxdWVuY2UgbnVtYmVyLiBLZWVwcyBhIHJvbGxpbmcgYnVmZmVyIG9mIHRoZVxuICogbG93ZXN0IG4gdmFsdWVzIHBhc3NlZCB0byBgYWRkRWxlbWVudGAsIGFuZCBmaW5hbGx5IHJlcG9ydHMgdGhlIGxhcmdlc3Qgb2ZcbiAqIHRoZW0gaW4gYG1heFZhbHVlYC5cbiAqLyBjbGFzcyBTciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkVuID0gdCwgdGhpcy5idWZmZXIgPSBuZXcgJG4odnIpLCB0aGlzLkFuID0gMDtcbiAgICB9XG4gICAgUm4oKSB7XG4gICAgICAgIHJldHVybiArK3RoaXMuQW47XG4gICAgfVxuICAgIGJuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFsgdCwgdGhpcy5SbigpIF07XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5zaXplIDwgdGhpcy5FbikgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5hZGQoZSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnVmZmVyLmxhc3QoKTtcbiAgICAgICAgICAgIHZyKGUsIHQpIDwgMCAmJiAodGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5kZWxldGUodCkuYWRkKGUpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgbWF4VmFsdWUoKSB7XG4gICAgICAgIC8vIEd1YXJhbnRlZWQgdG8gYmUgbm9uLWVtcHR5LiBJZiB3ZSBkZWNpZGUgd2UgYXJlIG5vdCBjb2xsZWN0aW5nIGFueVxuICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXJzLCBudGhTZXF1ZW5jZU51bWJlciBiZWxvdyBzaG9ydC1jaXJjdWl0cy4gSWYgd2UgaGF2ZVxuICAgICAgICAvLyBkZWNpZGVkIHRoYXQgd2UgYXJlIGNvbGxlY3RpbmcgbiBzZXF1ZW5jZSBudW1iZXJzLCBpdCdzIGJlY2F1c2UgbiBpcyBzb21lXG4gICAgICAgIC8vIHBlcmNlbnRhZ2Ugb2YgdGhlIGV4aXN0aW5nIHNlcXVlbmNlIG51bWJlcnMuIFRoYXQgbWVhbnMgd2Ugc2hvdWxkIG5ldmVyXG4gICAgICAgIC8vIGJlIGluIGEgc2l0dWF0aW9uIHdoZXJlIHdlIGFyZSBjb2xsZWN0aW5nIHNlcXVlbmNlIG51bWJlcnMgYnV0IGRvbid0XG4gICAgICAgIC8vIGFjdHVhbGx5IGhhdmUgYW55LlxuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIubGFzdCgpWzBdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIHJlc3BvbnNpYmxlIGZvciB0aGUgc2NoZWR1bGluZyBvZiBMUlUgZ2FyYmFnZSBjb2xsZWN0aW9uLiBJdCBoYW5kbGVzIGNoZWNraW5nXG4gKiB3aGV0aGVyIG9yIG5vdCBHQyBpcyBlbmFibGVkLCBhcyB3ZWxsIGFzIHdoaWNoIGRlbGF5IHRvIHVzZSBiZWZvcmUgdGhlIG5leHQgcnVuLlxuICovIGNsYXNzIERyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IHQsIHRoaXMuYXN5bmNRdWV1ZSA9IGUsIHRoaXMuUG4gPSAhMSwgdGhpcy5WbiA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgLTEgIT09IHRoaXMuZ2FyYmFnZUNvbGxlY3Rvci5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCAmJiB0aGlzLnZuKHQpO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLlZuICYmICh0aGlzLlZuLmNhbmNlbCgpLCB0aGlzLlZuID0gbnVsbCk7XG4gICAgfVxuICAgIGdldCBzdGFydGVkKCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5WbjtcbiAgICB9XG4gICAgdm4odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5QbiA/IDNlNSA6IDZlNDtcbiAgICAgICAgTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHtlfW1zYCksIHRoaXMuVm4gPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogTHJ1R2FyYmFnZUNvbGxlY3Rpb24gKi8gLCBlLCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5WbiA9IG51bGwsIHRoaXMuUG4gPSAhMDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdC5jb2xsZWN0R2FyYmFnZSh0aGlzLmdhcmJhZ2VDb2xsZWN0b3IpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIElpKHQpID8gTyhcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGdhcmJhZ2UgY29sbGVjdGlvbjogXCIsIHQpIDogYXdhaXQgVnIodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnZuKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKiogSW1wbGVtZW50cyB0aGUgc3RlcHMgZm9yIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uICovIGNsYXNzIENyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuU24gPSB0LCB0aGlzLnBhcmFtcyA9IGU7XG4gICAgfVxuICAgIGNhbGN1bGF0ZVRhcmdldENvdW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuU24uRG4odCkubmV4dCgodCA9PiBNYXRoLmZsb29yKGUgLyAxMDAgKiB0KSkpO1xuICAgIH1cbiAgICBudGhTZXF1ZW5jZU51bWJlcih0LCBlKSB7XG4gICAgICAgIGlmICgwID09PSBlKSByZXR1cm4gd2kucmVzb2x2ZShudC5BKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTcihlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuU24uZm9yRWFjaFRhcmdldCh0LCAodCA9PiBuLmJuKHQuc2VxdWVuY2VOdW1iZXIpKSkubmV4dCgoKCkgPT4gdGhpcy5Tbi5Dbih0LCAodCA9PiBuLmJuKHQpKSkpKS5uZXh0KCgoKSA9PiBuLm1heFZhbHVlKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Tbi5yZW1vdmVUYXJnZXRzKHQsIGUsIG4pO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlNuLnJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpO1xuICAgIH1cbiAgICBjb2xsZWN0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIC0xID09PSB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIFwiR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IGRpc2FibGVkXCIpLCBcbiAgICAgICAgd2kucmVzb2x2ZShkcikpIDogdGhpcy5nZXRDYWNoZVNpemUodCkubmV4dCgobiA9PiBuIDwgdGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZCA/IChPKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBgR2FyYmFnZSBjb2xsZWN0aW9uIHNraXBwZWQ7IENhY2hlIHNpemUgJHtufSBpcyBsb3dlciB0aGFuIHRocmVzaG9sZCAke3RoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGR9YCksIFxuICAgICAgICBkcikgOiB0aGlzLnhuKHQsIGUpKSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLlNuLmdldENhY2hlU2l6ZSh0KTtcbiAgICB9XG4gICAgeG4odCwgZSkge1xuICAgICAgICBsZXQgbiwgcywgaSwgciwgbywgYSwgYztcbiAgICAgICAgY29uc3QgaCA9IERhdGUubm93KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbGN1bGF0ZVRhcmdldENvdW50KHQsIHRoaXMucGFyYW1zLnBlcmNlbnRpbGVUb0NvbGxlY3QpLm5leHQoKGUgPT4gKFxuICAgICAgICAvLyBDYXAgYXQgdGhlIGNvbmZpZ3VyZWQgbWF4XG4gICAgICAgIGUgPiB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID8gKE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBDYXBwaW5nIHNlcXVlbmNlIG51bWJlcnMgdG8gY29sbGVjdCBkb3duIHRvIHRoZSBtYXhpbXVtIG9mICR7dGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdH0gZnJvbSAke2V9YCksIFxuICAgICAgICBzID0gdGhpcy5wYXJhbXMubWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCkgOiBzID0gZSwgciA9IERhdGUubm93KCksIHRoaXMubnRoU2VxdWVuY2VOdW1iZXIodCwgcykpKSkubmV4dCgocyA9PiAobiA9IHMsIFxuICAgICAgICBvID0gRGF0ZS5ub3coKSwgdGhpcy5yZW1vdmVUYXJnZXRzKHQsIG4sIGUpKSkpLm5leHQoKGUgPT4gKGkgPSBlLCBhID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHRoaXMucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgbikpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAoYyA9IERhdGUubm93KCksIGsoKSA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICAgICAgICAgIE8oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBMUlUgR2FyYmFnZSBDb2xsZWN0aW9uXFxuXFx0Q291bnRlZCB0YXJnZXRzIGluICR7ciAtIGh9bXNcXG5cXHREZXRlcm1pbmVkIGxlYXN0IHJlY2VudGx5IHVzZWQgJHtzfSBpbiBgICsgKG8gLSByKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7aX0gdGFyZ2V0cyBpbiBgICsgKGEgLSBvKSArIFwibXNcXG5cIiArIGBcXHRSZW1vdmVkICR7dH0gZG9jdW1lbnRzIGluIGAgKyAoYyAtIGEpICsgXCJtc1xcblwiICsgYFRvdGFsIER1cmF0aW9uOiAke2MgLSBofW1zYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgZGlkUnVuOiAhMCxcbiAgICAgICAgICAgICAgICBzZXF1ZW5jZU51bWJlcnNDb2xsZWN0ZWQ6IHMsXG4gICAgICAgICAgICAgICAgdGFyZ2V0c1JlbW92ZWQ6IGksXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzUmVtb3ZlZDogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi9cbmNsYXNzIHhyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGIgPSB0LCB0aGlzLmdhcmJhZ2VDb2xsZWN0b3IgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENyKHQsIGUpO1xuICAgICAgICB9KHRoaXMsIGUpO1xuICAgIH1cbiAgICBEbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLk5uKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KHQpLm5leHQoKHQgPT4gZS5uZXh0KChlID0+IHQgKyBlKSkpKTtcbiAgICB9XG4gICAgTm4odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLkNuKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGUrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0LCBlKTtcbiAgICB9XG4gICAgQ24odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5rbih0LCAoKHQsIG4pID0+IGUobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIE5yKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gTnIodCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIE5yKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICBNbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICAgICAgcmV0dXJuIFRyKHQpLnp0KChzID0+IHlyKHQsIHMsIGUpLm5leHQoKHQgPT4gKHQgJiYgKG4gPSAhMCksIHdpLnJlc29sdmUoIXQpKSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgICAgICB9KHQsIGUpO1xuICAgIH1cbiAgICByZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKSwgcyA9IFtdO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLmtuKHQsICgociwgbykgPT4ge1xuICAgICAgICAgICAgaWYgKG8gPD0gZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLk1uKHQsIHIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWUpIFxuICAgICAgICAgICAgICAgICAgICAvLyBPdXIgc2l6ZSBhY2NvdW50aW5nIHJlcXVpcmVzIHVzIHRvIHJlYWQgYWxsIGRvY3VtZW50cyBiZWZvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZpbmcgdGhlbS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGkrKywgbi5nZXRFbnRyeSh0LCByKS5uZXh0KCgoKSA9PiAobi5yZW1vdmVFbnRyeShyLCBjdC5taW4oKSksIFByKHQpLmRlbGV0ZShbIDAsIFVzKHIucGF0aCkgXSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHdpLndhaXRGb3IocykpKS5uZXh0KCgoKSA9PiBuLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS53aXRoU2VxdWVuY2VOdW1iZXIodC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnVwZGF0ZVRhcmdldERhdGEodCwgbik7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gTnIodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGwgcHJvdmlkZWQgZnVuY3Rpb24gZm9yIGVhY2ggZG9jdW1lbnQgaW4gdGhlIGNhY2hlIHRoYXQgaXMgJ29ycGhhbmVkJy4gT3JwaGFuZWRcbiAgICAgKiBtZWFucyBub3QgYSBwYXJ0IG9mIGFueSB0YXJnZXQsIHNvIHRoZSBvbmx5IGVudHJ5IGluIHRoZSB0YXJnZXQtZG9jdW1lbnQgaW5kZXggZm9yXG4gICAgICogdGhhdCBkb2N1bWVudCB3aWxsIGJlIHRoZSBzZW50aW5lbCByb3cgKHRhcmdldElkIDApLCB3aGljaCB3aWxsIGFsc28gaGF2ZSB0aGUgc2VxdWVuY2VcbiAgICAgKiBudW1iZXIgZm9yIHRoZSBsYXN0IHRpbWUgdGhlIGRvY3VtZW50IHdhcyBhY2Nlc3NlZC5cbiAgICAgKi8gICAga24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gUHIodCk7XG4gICAgICAgIGxldCBzLCBpID0gbnQuQTtcbiAgICAgICAgcmV0dXJuIG4uV3Qoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIlxuICAgICAgICB9LCAoKFt0LCBuXSwge3BhdGg6IHIsIHNlcXVlbmNlTnVtYmVyOiBvfSkgPT4ge1xuICAgICAgICAgICAgMCA9PT0gdCA/IChcbiAgICAgICAgICAgIC8vIGlmIG5leHRUb1JlcG9ydCBpcyB2YWxpZCwgcmVwb3J0IGl0LCB0aGlzIGlzIGEgbmV3IGtleSBzbyB0aGVcbiAgICAgICAgICAgIC8vIGxhc3Qgb25lIG11c3Qgbm90IGJlIGEgbWVtYmVyIG9mIGFueSB0YXJnZXRzLlxuICAgICAgICAgICAgaSAhPT0gbnQuQSAmJiBlKG5ldyB4dChLcyhzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBudC5BO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVwb3J0IHNlcXVlbmNlIG51bWJlcnMgYWZ0ZXIgZ2V0dGluZyB0byB0aGUgbmV4dCBrZXksIHdlXG4gICAgICAgICAgICAvLyBuZWVkIHRvIGNoZWNrIGlmIHRoZSBsYXN0IGtleSB3ZSBpdGVyYXRlZCBvdmVyIHdhcyBhbiBvcnBoYW5lZFxuICAgICAgICAgICAgLy8gZG9jdW1lbnQgYW5kIHJlcG9ydCBpdC5cbiAgICAgICAgICAgIGkgIT09IG50LkEgJiYgZShuZXcgeHQoS3MocykpLCBpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE5yKHQsIGUpIHtcbiAgICByZXR1cm4gUHIodCkucHV0KFxuICAgIC8qKlxuICogQHJldHVybnMgQSB2YWx1ZSBzdWl0YWJsZSBmb3Igd3JpdGluZyBhIHNlbnRpbmVsIHJvdyBpbiB0aGUgdGFyZ2V0LWRvY3VtZW50XG4gKiBzdG9yZS5cbiAqL1xuICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRhcmdldElkOiAwLFxuICAgICAgICAgICAgcGF0aDogVXModC5wYXRoKSxcbiAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiBlXG4gICAgICAgIH07XG4gICAgfShlLCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcikpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgYnVmZmVyIG9mIGVudHJpZXMgdG8gYmUgd3JpdHRlbiB0byBhIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKiBJdCBjYW4gYmUgdXNlZCB0byBiYXRjaCB1cCBhIHNldCBvZiBjaGFuZ2VzIHRvIGJlIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLCBidXRcbiAqIGFkZGl0aW9uYWxseSBzdXBwb3J0cyByZWFkaW5nIGVudHJpZXMgYmFjayB3aXRoIHRoZSBgZ2V0RW50cnkoKWAgbWV0aG9kLFxuICogZmFsbGluZyBiYWNrIHRvIHRoZSB1bmRlcmx5aW5nIFJlbW90ZURvY3VtZW50Q2FjaGUgaWYgbm8gZW50cnkgaXNcbiAqIGJ1ZmZlcmVkLlxuICpcbiAqIEVudHJpZXMgYWRkZWQgdG8gdGhlIGNhY2hlICptdXN0KiBiZSByZWFkIGZpcnN0LiBUaGlzIGlzIHRvIGZhY2lsaXRhdGVcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplIGRlbHRhIG9mIHRoZSBwZW5kaW5nIGNoYW5nZXMuXG4gKlxuICogUE9SVElORyBOT1RFOiBUaGlzIGNsYXNzIHdhcyBpbXBsZW1lbnRlZCB0aGVuIHJlbW92ZWQgZnJvbSBvdGhlciBwbGF0Zm9ybXMuXG4gKiBJZiBieXRlLWNvdW50aW5nIGVuZHMgdXAgYmVpbmcgbmVlZGVkIG9uIHRoZSBvdGhlciBwbGF0Zm9ybXMsIGNvbnNpZGVyXG4gKiBwb3J0aW5nIHRoaXMgY2xhc3MgYXMgcGFydCBvZiB0aGF0IGltcGxlbWVudGF0aW9uIHdvcmsuXG4gKi8gY2xhc3Mga3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcHBpbmcgb2YgZG9jdW1lbnQga2V5IHRvIHRoZSBuZXcgY2FjaGUgZW50cnkgdGhhdCBzaG91bGQgYmUgd3JpdHRlbi5cbiAgICAgICAgdGhpcy5jaGFuZ2VzID0gbmV3IGtuKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLmFkZEVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgbW9kaWZ5IGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICBhZGRFbnRyeSh0KSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQua2V5LCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQnVmZmVycyBhIGBSZW1vdGVEb2N1bWVudENhY2hlLnJlbW92ZUVudHJ5KClgIGNhbGwuXG4gICAgICpcbiAgICAgKiBZb3UgY2FuIG9ubHkgcmVtb3ZlIGRvY3VtZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIHJldHJpZXZlZCB2aWFcbiAgICAgKiBgZ2V0RW50cnkoKS9nZXRFbnRyaWVzKClgIChlbmZvcmNlZCB2aWEgSW5kZXhlZERicyBgYXBwbHkoKWApLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXMuc2V0KHQsIHRlLm5ld0ludmFsaWREb2N1bWVudCh0KS5zZXRSZWFkVGltZShlKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIGFuIGVudHJ5IGluIHRoZSBjYWNoZS4gVGhlIGJ1ZmZlcmVkIGNoYW5nZXMgd2lsbCBmaXJzdCBiZSBjaGVja2VkLFxuICAgICAqIGFuZCBpZiBubyBidWZmZXJlZCBjaGFuZ2UgYXBwbGllcywgdGhpcyB3aWxsIGZvcndhcmQgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleSAtIFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgVGhlIGNhY2hlZCBkb2N1bWVudCBvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmIHdlIGhhdmUgbm90aGluZ1xuICAgICAqIGNhY2hlZC5cbiAgICAgKi8gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICB0aGlzLmFzc2VydE5vdEFwcGxpZWQoKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuY2hhbmdlcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IG4gPyB3aS5yZXNvbHZlKG4pIDogdGhpcy5nZXRGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUsIGZvcndhcmRpbmcgdG9cbiAgICAgKiBgUmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRFbnRyeSgpYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB0cmFuc2FjdGlvbiAtIFRoZSB0cmFuc2FjdGlvbiBpbiB3aGljaCB0byBwZXJmb3JtIGFueSBwZXJzaXN0ZW5jZVxuICAgICAqICAgICBvcGVyYXRpb25zLlxuICAgICAqIEBwYXJhbSBkb2N1bWVudEtleXMgLSBUaGUga2V5cyBvZiB0aGUgZW50cmllcyB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIEEgbWFwIG9mIGNhY2hlZCBkb2N1bWVudHMsIGluZGV4ZWQgYnkga2V5LiBJZiBhbiBlbnRyeSBjYW5ub3QgYmVcbiAgICAgKiAgICAgZm91bmQsIHRoZSBjb3JyZXNwb25kaW5nIGtleSB3aWxsIGJlIG1hcHBlZCB0byBhbiBpbnZhbGlkIGRvY3VtZW50LlxuICAgICAqLyAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QWxsRnJvbUNhY2hlKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIGJ1ZmZlcmVkIGNoYW5nZXMgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSwgdXNpbmdcbiAgICAgKiB0aGUgcHJvdmlkZWQgdHJhbnNhY3Rpb24uXG4gICAgICovICAgIGFwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpLCB0aGlzLmNoYW5nZXNBcHBsaWVkID0gITAsIHRoaXMuYXBwbHlDaGFuZ2VzKHQpO1xuICAgIH1cbiAgICAvKiogSGVscGVyIHRvIGFzc2VydCB0aGlzLmNoYW5nZXMgaXMgbm90IG51bGwgICovICAgIGFzc2VydE5vdEFwcGxpZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld0luZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi8gY2xhc3MgTXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5NID0gdDtcbiAgICB9XG4gICAgc2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyaWVzIHRvIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgYWRkRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICBhZGRFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiAkcih0KS5wdXQobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBkb2N1bWVudCBmcm9tIHRoZSBjYWNoZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgICBhcmUgcmVxdWlyZWQgdG8gZ28gdGhyb3VnaCB0aGUgUmVtb3RlRG9jdW1lbnRDaGFuZ2VCdWZmZXJcbiAgICAgKiByZXR1cm5lZCBieSBgbmV3Q2hhbmdlQnVmZmVyKClgIHRvIGVuc3VyZSBwcm9wZXIgYWNjb3VudGluZyBvZiBtZXRhZGF0YS5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gJHIodCkuZGVsZXRlKFxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyB2aWEgdGhlIHByaW1hcnkga2V5IG9mXG4gKiB0aGUgRGJSZW1vdGVEb2N1bWVudCBvYmplY3Qgc3RvcmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQucGF0aC50b0FycmF5KCk7XG4gICAgICAgICAgICByZXR1cm4gWyBcbiAgICAgICAgICAgIC8qIHByZWZpeCBwYXRoICovIG4uc2xpY2UoMCwgbi5sZW5ndGggLSAyKSwgXG4gICAgICAgICAgICAvKiBjb2xsZWN0aW9uIGlkICovIG5bbi5sZW5ndGggLSAyXSwga2koZSksIFxuICAgICAgICAgICAgLyogZG9jdW1lbnQgaWQgKi8gbltuLmxlbmd0aCAtIDFdIF07XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEga2V5IHRoYXQgY2FuIGJlIHVzZWQgZm9yIGRvY3VtZW50IGxvb2t1cHMgb24gdGhlXG4gKiBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50Q29sbGVjdGlvbkdyb3VwSW5kZXhgIGluZGV4LlxuICovIChlLCBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGN1cnJlbnQgY2FjaGUgc2l6ZS5cbiAgICAgKlxuICAgICAqIENhbGxlcnMgdG8gYGFkZEVudHJ5KClgIGFuZCBgcmVtb3ZlRW50cnkoKWAgKm11c3QqIGNhbGwgdGhpcyBhZnRlcndhcmRzIHRvIHVwZGF0ZSB0aGVcbiAgICAgKiBjYWNoZSdzIG1ldGFkYXRhLlxuICAgICAqLyAgICB1cGRhdGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKG4gPT4gKG4uYnl0ZVNpemUgKz0gZSwgdGhpcy5Pbih0LCBuKSkpKTtcbiAgICB9XG4gICAgZ2V0RW50cnkodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHRlLm5ld0ludmFsaWREb2N1bWVudChlKTtcbiAgICAgICAgcmV0dXJuICRyKHQpLld0KHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KEJyKGUpKVxuICAgICAgICB9LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSB0aGlzLkZuKGUsIHMpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhbiBlbnRyeSBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXkgLSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgZG9jdW1lbnQgZW50cnkgYW5kIGl0cyBzaXplLlxuICAgICAqLyAgICAkbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0ge1xuICAgICAgICAgICAgc2l6ZTogMCxcbiAgICAgICAgICAgIGRvY3VtZW50OiB0ZS5uZXdJbnZhbGlkRG9jdW1lbnQoZSlcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuICRyKHQpLld0KHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KEJyKGUpKVxuICAgICAgICB9LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMuRm4oZSwgcyksXG4gICAgICAgICAgICAgICAgc2l6ZTogbXIocylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IHFuKCk7XG4gICAgICAgIHJldHVybiB0aGlzLkJuKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuRm4odCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIExuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBxbigpLCBzID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5Cbih0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLkZuKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgbXIoZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIFVuOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIEJuKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4gd2kucmVzb2x2ZSgpO1xuICAgICAgICBsZXQgcyA9IG5ldyAkbihVcik7XG4gICAgICAgIGUuZm9yRWFjaCgodCA9PiBzID0gcy5hZGQodCkpKTtcbiAgICAgICAgY29uc3QgaSA9IElEQktleVJhbmdlLmJvdW5kKEJyKHMuZmlyc3QoKSksIEJyKHMubGFzdCgpKSksIHIgPSBzLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCBvID0gci5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiAkcih0KS5XdCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogaVxuICAgICAgICB9LCAoKHQsIGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB4dC5mcm9tU2VnbWVudHMoWyAuLi5lLnByZWZpeFBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCBlLmRvY3VtZW50SWQgXSk7XG4gICAgICAgICAgICAvLyBHbyB0aHJvdWdoIGtleXMgbm90IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICg7byAmJiBVcihvLCBpKSA8IDA7ICkgbihvLCBudWxsKSwgbyA9IHIuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgbyAmJiBvLmlzRXF1YWwoaSkgJiYgKFxuICAgICAgICAgICAgLy8gS2V5IGZvdW5kIGluIGNhY2hlLlxuICAgICAgICAgICAgbihvLCBlKSwgbyA9IHIuaGFzTmV4dCgpID8gci5nZXROZXh0KCkgOiBudWxsKSwgXG4gICAgICAgICAgICAvLyBTa2lwIHRvIHRoZSBuZXh0IGtleSAoaWYgdGhlcmUgaXMgb25lKS5cbiAgICAgICAgICAgIG8gPyBzLlV0KEJyKG8pKSA6IHMuZG9uZSgpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGhlIHJlc3Qgb2YgdGhlIGtleXMgYXJlIG5vdCBpbiB0aGUgY2FjaGUuIE9uZSBjYXNlIHdoZXJlIGBpdGVyYXRlYFxuICAgICAgICAgICAgLy8gYWJvdmUgd29uJ3QgZ28gdGhyb3VnaCB0aGVtIGlzIHdoZW4gdGhlIGNhY2hlIGlzIGVtcHR5LlxuICAgICAgICAgICAgZm9yICg7bzsgKSBuKG8sIG51bGwpLCBvID0gci5oYXNOZXh0KCkgPyByLmdldE5leHQoKSA6IG51bGw7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWyBlLnBvcExhc3QoKS50b0FycmF5KCksIGUubGFzdFNlZ21lbnQoKSwga2kobi5yZWFkVGltZSksIG4uZG9jdW1lbnRLZXkucGF0aC5pc0VtcHR5KCkgPyBcIlwiIDogbi5kb2N1bWVudEtleS5wYXRoLmxhc3RTZWdtZW50KCkgXSwgaSA9IFsgZS5wb3BMYXN0KCkudG9BcnJheSgpLCBlLmxhc3RTZWdtZW50KCksIFsgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0sIFwiXCIgXTtcbiAgICAgICAgcmV0dXJuICRyKHQpLnF0KElEQktleVJhbmdlLmJvdW5kKHMsIGksICEwKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBsZXQgZSA9IHFuKCk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkZuKHh0LmZyb21TZWdtZW50cyhuLnByZWZpeFBhdGguY29uY2F0KG4uY29sbGVjdGlvbkdyb3VwLCBuLmRvY3VtZW50SWQpKSwgbik7XG4gICAgICAgICAgICAgICAgZSA9IGUuaW5zZXJ0KHQua2V5LCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IHFuKCk7XG4gICAgICAgIGNvbnN0IHIgPSBMcihlLCBuKSwgbyA9IExyKGUsIGFlLm1heCgpKTtcbiAgICAgICAgcmV0dXJuICRyKHQpLld0KHtcbiAgICAgICAgICAgIGluZGV4OiBcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2UuYm91bmQociwgbywgITApXG4gICAgICAgIH0sICgodCwgZSwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuRm4oeHQuZnJvbVNlZ21lbnRzKGUucHJlZml4UGF0aC5jb25jYXQoZS5jb2xsZWN0aW9uR3JvdXAsIGUuZG9jdW1lbnRJZCkpLCBlKTtcbiAgICAgICAgICAgIGkgPSBpLmluc2VydChyLmtleSwgciksIGkuc2l6ZSA9PT0gcyAmJiBuLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPcih0aGlzLCAhIXQgJiYgdC50cmFja1JlbW92YWxzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1ldGFkYXRhKHQpLm5leHQoKHQgPT4gdC5ieXRlU2l6ZSkpO1xuICAgIH1cbiAgICBnZXRNZXRhZGF0YSh0KSB7XG4gICAgICAgIHJldHVybiBGcih0KS5nZXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiKS5uZXh0KCh0ID0+IChVKCEhdCksIHQpKSk7XG4gICAgfVxuICAgIE9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEZyKHQpLnB1dChcInJlbW90ZURvY3VtZW50R2xvYmFsS2V5XCIsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWNvZGVzIGBkYlJlbW90ZURvY2AgYW5kIHJldHVybnMgdGhlIGRvY3VtZW50IChvciBhbiBpbnZhbGlkIGRvY3VtZW50IGlmXG4gICAgICogdGhlIGRvY3VtZW50IGNvcnJlc3BvbmRzIHRvIHRoZSBmb3JtYXQgdXNlZCBmb3Igc2VudGluZWwgZGVsZXRlcykuXG4gICAgICovICAgIEZuKHQsIGUpIHtcbiAgICAgICAgaWYgKGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB4aSh0aGlzLk0sIGUpO1xuICAgICAgICAgICAgLy8gV2hldGhlciB0aGUgZG9jdW1lbnQgaXMgYSBzZW50aW5lbCByZW1vdmFsIGFuZCBzaG91bGQgb25seSBiZSB1c2VkIGluIHRoZVxuICAgICAgICAgICAgLy8gYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodC5pc05vRG9jdW1lbnQoKSAmJiB0LnZlcnNpb24uaXNFcXVhbChjdC5taW4oKSkpKSByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGUubmV3SW52YWxpZERvY3VtZW50KHQpO1xuICAgIH1cbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgSW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBVbmxpa2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyLCB0aGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGNvbXB1dGVzIHRoZSBzaXplXG4gKiBkZWx0YSBmb3IgYWxsIHN1Ym1pdHRlZCBjaGFuZ2VzLiBUaGlzIGF2b2lkcyBoYXZpbmcgdG8gcmUtcmVhZCBhbGwgZG9jdW1lbnRzIGZyb20gSW5kZXhlZERiXG4gKiB3aGVuIHdlIGFwcGx5IHRoZSBjaGFuZ2VzLlxuICovXG5jbGFzcyBPciBleHRlbmRzIGtyIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSAtIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxuICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIC0gV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XG4gICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMucW4gPSB0LCB0aGlzLnRyYWNrUmVtb3ZhbHMgPSBlLCBcbiAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgYW5kIHJlYWQgdGltZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW5cbiAgICAgICAgLy8gdGhpcyBidWZmZXIuXG4gICAgICAgIHRoaXMuR24gPSBuZXcga24oKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IDAsIHMgPSBuZXcgJG4oKCh0LCBlKSA9PiBydCh0LmNhbm9uaWNhbFN0cmluZygpLCBlLmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy5Hbi5nZXQoaSk7XG4gICAgICAgICAgICBpZiAoZS5wdXNoKHRoaXMucW4ucmVtb3ZlRW50cnkodCwgaSwgby5yZWFkVGltZSkpLCByLmlzVmFsaWREb2N1bWVudCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IE5pKHRoaXMucW4uTSwgcik7XG4gICAgICAgICAgICAgICAgcyA9IHMuYWRkKGkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBtcih1KTtcbiAgICAgICAgICAgICAgICBuICs9IGEgLSBvLnNpemUsIGUucHVzaCh0aGlzLnFuLmFkZEVudHJ5KHQsIGksIHUpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLnNpemUsIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBOaSh0aGlzLnFuLk0sIHIuY29udmVydFRvTm9Eb2N1bWVudChjdC5taW4oKSkpO1xuICAgICAgICAgICAgICAgIGUucHVzaCh0aGlzLnFuLmFkZEVudHJ5KHQsIGksIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMucW4uaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIG4pKTtcbiAgICAgICAgfSkpLCBlLnB1c2godGhpcy5xbi51cGRhdGVNZXRhZGF0YSh0LCBuKSksIHdpLndhaXRGb3IoZSk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGUgYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMucW4uJG4odCwgZSkubmV4dCgodCA9PiAodGhpcy5Hbi5zZXQoZSwge1xuICAgICAgICAgICAgc2l6ZTogdC5zaXplLFxuICAgICAgICAgICAgcmVhZFRpbWU6IHQuZG9jdW1lbnQucmVhZFRpbWVcbiAgICAgICAgfSksIHQuZG9jdW1lbnQpKSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcbiAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMucW4uTG4odCwgZSkubmV4dCgoKHtkb2N1bWVudHM6IHQsIFVuOiBlfSkgPT4gKFxuICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cbiAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXG4gICAgICAgIC8vIGBNdXRhYmxlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cbiAgICAgICAgZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5Hbi5zZXQoZSwge1xuICAgICAgICAgICAgICAgIHNpemU6IG4sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHQuZ2V0KGUpLnJlYWRUaW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCB0KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRnIodCkge1xuICAgIHJldHVybiBQaSh0LCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiAkcih0KSB7XG4gICAgcmV0dXJuIFBpKHQsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRLZXlJbmRleGAgaW5kZXguXG4gKi8gZnVuY3Rpb24gQnIodCkge1xuICAgIGNvbnN0IGUgPSB0LnBhdGgudG9BcnJheSgpO1xuICAgIHJldHVybiBbIFxuICAgIC8qIHByZWZpeCBwYXRoICovIGUuc2xpY2UoMCwgZS5sZW5ndGggLSAyKSwgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyBlW2UubGVuZ3RoIC0gMl0sIFxuICAgIC8qIGRvY3VtZW50IGlkICovIGVbZS5sZW5ndGggLSAxXSBdO1xufVxuXG5mdW5jdGlvbiBMcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUuZG9jdW1lbnRLZXkucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyB0LCBraShlLnJlYWRUaW1lKSwgXG4gICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBuLmxlbmd0aCA+IDAgPyBuW24ubGVuZ3RoIC0gMV0gOiBcIlwiIF07XG59XG5cbi8qKlxuICogQ29tcGFyYXRvciB0aGF0IGNvbXBhcmVzIGRvY3VtZW50IGtleXMgYWNjb3JkaW5nIHRvIHRoZSBwcmltYXJ5IGtleSBzb3J0aW5nXG4gKiB1c2VkIGJ5IHRoZSBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50YCBzdG9yZSAoYnkgY29sbGVjdGlvbiBwYXRoIGFuZCB0aGVuXG4gKiBkb2N1bWVudCBJRCkuXG4gKi8gZnVuY3Rpb24gVXIodCwgZSkge1xuICAgIGNvbnN0IG4gPSB0LnBhdGgubGVuZ3RoIC0gZS5wYXRoLmxlbmd0aDtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiB4dC5jb21wYXJhdG9yKHQsIGUpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVE9ETyhpbmRleGluZyk6IFJlbW92ZSB0aGlzIGNvbnN0YW50XG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFBlcmZvcm1zIGRhdGFiYXNlIGNyZWF0aW9uIGFuZCBzY2hlbWEgdXBncmFkZXMuICovXG5jbGFzcyBxciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk0gPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBkYXRhYmFzZSBjcmVhdGlvbiBhbmQgc2NoZW1hIHVwZ3JhZGVzLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IGluIHByb2R1Y3Rpb24sIHRoaXMgbWV0aG9kIGlzIG9ubHkgZXZlciB1c2VkIHRvIHVwZ3JhZGUgdGhlIHNjaGVtYVxuICAgICAqIHRvIFNDSEVNQV9WRVJTSU9OLiBEaWZmZXJlbnQgdmFsdWVzIG9mIHRvVmVyc2lvbiBhcmUgb25seSB1c2VkIGZvciB0ZXN0aW5nXG4gICAgICogYW5kIGxvY2FsIGZlYXR1cmUgZGV2ZWxvcG1lbnQuXG4gICAgICovICAgIGt0KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBtaShcImNyZWF0ZU9yVXBncmFkZVwiLCBlKTtcbiAgICAgICAgbiA8IDEgJiYgcyA+PSAxICYmIChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwib3duZXJcIik7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJ1c2VySWRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgUXMsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgR3IodCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIH0odCkpO1xuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSB3aS5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiBzID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiksIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRzXCIpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xuICAgICAgICB9KHQpLCBHcih0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIiksIG4gPSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogMCxcbiAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uOiBjdC5taW4oKS50b1RpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIHRhcmdldENvdW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGUucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIG4pO1xuICAgICAgICB9KGkpKSkpLCBuIDwgNCAmJiBzID49IDQgJiYgKDAgIT09IG4gJiYgKFxuICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcbiAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcbiAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXG4gICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcbiAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXG4gICAgICAgIHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKFwibXV0YXRpb25zXCIpLnF0KCkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgdC5kZWxldGVPYmplY3RTdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJiYXRjaElkXCIsXG4gICAgICAgICAgICAgICAgICAgIGF1dG9JbmNyZW1lbnQ6ICEwXG4gICAgICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgUXMsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBlLnN0b3JlKFwibXV0YXRpb25zXCIpLCBpID0gbi5tYXAoKHQgPT4gcy5wdXQodCkpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2kud2FpdEZvcihpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSh0LCBpKSkpKSwgciA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiY2xpZW50TWV0YWRhdGFcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImNsaWVudElkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCA1ICYmIHMgPj0gNSAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5LbihpKSkpKSwgbiA8IDYgJiYgcyA+PSA2ICYmIChyID0gci5uZXh0KCgoKSA9PiAoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xuICAgICAgICB9KHQpLCB0aGlzLlFuKGkpKSkpKSwgbiA8IDcgJiYgcyA+PSA3ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLmpuKGkpKSkpLCBuIDwgOCAmJiBzID49IDggJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuV24odCwgaSkpKSksIFxuICAgICAgICBuIDwgOSAmJiBzID49IDkgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIE11bHRpLVRhYiB1c2VkIHRvIG1hbmFnZSBpdHMgb3duIGNoYW5nZWxvZywgYnV0IHRoaXMgaGFzIGJlZW4gbW92ZWRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZSBpdHNlbGYuIFNpbmNlIHRoZSBwcmV2aW91cyBjaGFuZ2VcbiAgICAgICAgICAgIC8vIGxvZyBvbmx5IGNvbnRhaW5lZCB0cmFuc2llbnQgZGF0YSwgd2UgY2FuIGRyb3AgaXRzIG9iamVjdCBzdG9yZS5cbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKFwicmVtb3RlRG9jdW1lbnRDaGFuZ2VzXCIpICYmIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIik7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICAgICAgLy8gTm90ZTogU2NoZW1hIHZlcnNpb24gOSB1c2VkIHRvIGNyZWF0ZSBhIHJlYWQgdGltZSBpbmRleCBmb3IgdGhlXG4gICAgICAgICAgICAvLyBSZW1vdGVEb2N1bWVudENhY2hlLiBUaGlzIGlzIG5vdyBkb25lIHdpdGggc2NoZW1hIHZlcnNpb24gMTMuXG4gICAgICAgICAgICAgICAgfSkpKSwgbiA8IDEwICYmIHMgPj0gMTAgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuem4oaSkpKSksIG4gPCAxMSAmJiBzID49IDExICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJidW5kbGVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJidW5kbGVJZFwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcIm5hbWVkUXVlcmllc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwibmFtZVwiXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCBuIDwgMTIgJiYgcyA+PSAxMiAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50T3ZlcmxheXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBvaVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGUuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCB1aSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSksIGUuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBPdmVybGF5SW5kZXhcIiwgYWksIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDEzICYmIHMgPj0gMTMgJiYgKHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBIc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRLZXlJbmRleFwiLCBKcyksIGUuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBZcyk7XG4gICAgICAgIH0odCkpKS5uZXh0KCgoKSA9PiB0aGlzLkhuKHQsIGkpKSkubmV4dCgoKCkgPT4gdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSkpKSwgXG4gICAgICAgIG4gPCAxNCAmJiBzID49IDE0ICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleENvbmZpZ3VyYXRpb25cIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImluZGV4SWRcIixcbiAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleFN0YXRlXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogbmlcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInNlcXVlbmNlTnVtYmVySW5kZXhcIiwgc2ksIHtcbiAgICAgICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJpbmRleEVudHJpZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBpaVxuICAgICAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRLZXlJbmRleFwiLCByaSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCByO1xuICAgIH1cbiAgICBRbih0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuV3QoKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlICs9IG1yKG4pO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHtcbiAgICAgICAgICAgICAgICBieXRlU2l6ZTogZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiB0LnN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIikucHV0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIiwgbik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgS24odCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShcIm11dGF0aW9uUXVldWVzXCIpLCBuID0gdC5zdG9yZShcIm11dGF0aW9uc1wiKTtcbiAgICAgICAgcmV0dXJuIGUucXQoKS5uZXh0KChlID0+IHdpLmZvckVhY2goZSwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZS51c2VySWQsIC0xIF0sIFsgZS51c2VySWQsIGUubGFzdEFja25vd2xlZGdlZEJhdGNoSWQgXSk7XG4gICAgICAgICAgICByZXR1cm4gbi5xdChcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBzKS5uZXh0KChuID0+IHdpLmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIFUobi51c2VySWQgPT09IGUudXNlcklkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gRmkodGhpcy5NLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gd3IodCwgZS51c2VySWQsIHMpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgam4odCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgbiA9IHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLld0KCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgX3QobiksIG8gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbIDAsIFVzKHQpIF07XG4gICAgICAgICAgICAgICAgfShyKTtcbiAgICAgICAgICAgICAgICBzLnB1c2goZS5nZXQobykubmV4dCgobiA9PiBuID8gd2kucmVzb2x2ZSgpIDogKG4gPT4gZS5wdXQoe1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJZDogMCxcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogVXMobiksXG4gICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyOiB0LmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlclxuICAgICAgICAgICAgICAgIH0pKShyKSkpKTtcbiAgICAgICAgICAgIH0pKS5uZXh0KCgoKSA9PiB3aS53YWl0Rm9yKHMpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgV24odCwgZSkge1xuICAgICAgICAvLyBDcmVhdGUgdGhlIGluZGV4LlxuICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiwge1xuICAgICAgICAgICAga2V5UGF0aDogZWlcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG4gPSBlLnN0b3JlKFwiY29sbGVjdGlvblBhcmVudHNcIiksIHMgPSBuZXcgb3IsIGkgPSB0ID0+IHtcbiAgICAgICAgICAgIGlmIChzLmFkZCh0KSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIHMgPSB0LnBvcExhc3QoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wdXQoe1xuICAgICAgICAgICAgICAgICAgICBjb2xsZWN0aW9uSWQ6IGUsXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudDogVXMocylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gSGVscGVyIHRvIGFkZCBhbiBpbmRleCBlbnRyeSBpZmYgd2UgaGF2ZW4ndCBhbHJlYWR5IHdyaXR0ZW4gaXQuXG4gICAgICAgICAgICAgICAgLy8gSW5kZXggZXhpc3RpbmcgcmVtb3RlIGRvY3VtZW50cy5cbiAgICAgICAgcmV0dXJuIGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuV3Qoe1xuICAgICAgICAgICAganQ6ICEwXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBfdCh0KTtcbiAgICAgICAgICAgIHJldHVybiBpKG4ucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKS5XdCh7XG4gICAgICAgICAgICBqdDogITBcbiAgICAgICAgfSwgKChbdCwgZSwgbl0sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBLcyhlKTtcbiAgICAgICAgICAgIHJldHVybiBpKHIucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIHpuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJ0YXJnZXRzXCIpO1xuICAgICAgICByZXR1cm4gZS5XdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSAkaShuKSwgaSA9IEJpKHRoaXMuTSwgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgSG4odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSwgcyA9IFtdO1xuICAgICAgICByZXR1cm4gbi5XdCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBlLnN0b3JlKFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpLCByID0gKG8gPSBuLCBvLmRvY3VtZW50ID8gbmV3IHh0KF90LmZyb21TdHJpbmcoby5kb2N1bWVudC5uYW1lKS5wb3BGaXJzdCg1KSkgOiBvLm5vRG9jdW1lbnQgPyB4dC5mcm9tU2VnbWVudHMoby5ub0RvY3VtZW50LnBhdGgpIDogby51bmtub3duRG9jdW1lbnQgPyB4dC5mcm9tU2VnbWVudHMoby51bmtub3duRG9jdW1lbnQucGF0aCkgOiBMKCkpLnBhdGgudG9BcnJheSgpO1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAgICAgICAgICAgIGNvbnN0IHUgPSB7XG4gICAgICAgICAgICAgICAgcHJlZml4UGF0aDogci5zbGljZSgwLCByLmxlbmd0aCAtIDIpLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogcltyLmxlbmd0aCAtIDJdLFxuICAgICAgICAgICAgICAgIGRvY3VtZW50SWQ6IHJbci5sZW5ndGggLSAxXSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogbi5yZWFkVGltZSB8fCBbIDAsIDAgXSxcbiAgICAgICAgICAgICAgICB1bmtub3duRG9jdW1lbnQ6IG4udW5rbm93bkRvY3VtZW50LFxuICAgICAgICAgICAgICAgIG5vRG9jdW1lbnQ6IG4ubm9Eb2N1bWVudCxcbiAgICAgICAgICAgICAgICBkb2N1bWVudDogbi5kb2N1bWVudCxcbiAgICAgICAgICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6ICEhbi5oYXNDb21taXR0ZWRNdXRhdGlvbnNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQodSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gd2kud2FpdEZvcihzKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gR3IodCkge1xuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiwge1xuICAgICAgICBrZXlQYXRoOiBac1xuICAgIH0pLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIiwgdGksIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pO1xuICAgIC8vIE5PVEU6IFRoaXMgaXMgdW5pcXVlIG9ubHkgYmVjYXVzZSB0aGUgVGFyZ2V0SWQgaXMgdGhlIHN1ZmZpeC5cbiAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0c1wiLCB7XG4gICAgICAgIGtleVBhdGg6IFwidGFyZ2V0SWRcIlxuICAgIH0pLmNyZWF0ZUluZGV4KFwicXVlcnlUYXJnZXRzSW5kZXhcIiwgWHMsIHtcbiAgICAgICAgdW5pcXVlOiAhMFxuICAgIH0pLCB0LmNyZWF0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xufVxuXG5jb25zdCBLciA9IFwiRmFpbGVkIHRvIG9idGFpbiBleGNsdXNpdmUgYWNjZXNzIHRvIHRoZSBwZXJzaXN0ZW5jZSBsYXllci4gVG8gYWxsb3cgc2hhcmVkIGFjY2VzcywgbXVsdGktdGFiIHN5bmNocm9uaXphdGlvbiBoYXMgdG8gYmUgZW5hYmxlZCBpbiBhbGwgdGFicy4gSWYgeW91IGFyZSB1c2luZyBgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWI6dHJ1ZWAsIG1ha2Ugc3VyZSB0aGF0IG9ubHkgb25lIHRhYiBoYXMgcGVyc2lzdGVuY2UgZW5hYmxlZCBhdCBhbnkgZ2l2ZW4gdGltZS5cIjtcblxuLyoqXG4gKiBPbGRlc3QgYWNjZXB0YWJsZSBhZ2UgaW4gbWlsbGlzZWNvbmRzIGZvciBjbGllbnQgbWV0YWRhdGEgYmVmb3JlIHRoZSBjbGllbnRcbiAqIGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIGl0cyBhc3NvY2lhdGVkIGRhdGEgaXMgZ2FyYmFnZSBjb2xsZWN0ZWQuXG4gKi9cbi8qKlxuICogQW4gSW5kZXhlZERCLWJhY2tlZCBpbnN0YW5jZSBvZiBQZXJzaXN0ZW5jZS4gRGF0YSBpcyBzdG9yZWQgcGVyc2lzdGVudGx5XG4gKiBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKlxuICogT24gV2ViIG9ubHksIHRoZSBGaXJlc3RvcmUgU0RLcyBzdXBwb3J0IHNoYXJlZCBhY2Nlc3MgdG8gaXRzIHBlcnNpc3RlbmNlXG4gKiBsYXllci4gVGhpcyBhbGxvd3MgbXVsdGlwbGUgYnJvd3NlciB0YWJzIHRvIHJlYWQgYW5kIHdyaXRlIHRvIEluZGV4ZWREYiBhbmRcbiAqIHRvIHN5bmNocm9uaXplIHN0YXRlIGV2ZW4gd2l0aG91dCBuZXR3b3JrIGNvbm5lY3Rpdml0eS4gU2hhcmVkIGFjY2VzcyBpc1xuICogY3VycmVudGx5IG9wdGlvbmFsIGFuZCBub3QgZW5hYmxlZCB1bmxlc3MgYWxsIGNsaWVudHMgaW52b2tlXG4gKiBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgd2l0aCBge3N5bmNocm9uaXplVGFiczp0cnVlfWAuXG4gKlxuICogSW4gbXVsdGktdGFiIG1vZGUsIGlmIG11bHRpcGxlIGNsaWVudHMgYXJlIGFjdGl2ZSBhdCB0aGUgc2FtZSB0aW1lLCB0aGUgU0RLXG4gKiB3aWxsIGRlc2lnbmF0ZSBvbmUgY2xpZW50IGFzIHRoZSDigJxwcmltYXJ5IGNsaWVudOKAnS4gQW4gZWZmb3J0IGlzIG1hZGUgdG8gcGlja1xuICogYSB2aXNpYmxlLCBuZXR3b3JrLWNvbm5lY3RlZCBhbmQgYWN0aXZlIGNsaWVudCwgYW5kIHRoaXMgY2xpZW50IGlzXG4gKiByZXNwb25zaWJsZSBmb3IgbGV0dGluZyBvdGhlciBjbGllbnRzIGtub3cgYWJvdXQgaXRzIHByZXNlbmNlLiBUaGUgcHJpbWFyeVxuICogY2xpZW50IHdyaXRlcyBhIHVuaXF1ZSBjbGllbnQtZ2VuZXJhdGVkIGlkZW50aWZpZXIgKHRoZSBjbGllbnQgSUQpIHRvXG4gKiBJbmRleGVkRGLigJlzIOKAnG93bmVy4oCdIHN0b3JlIGV2ZXJ5IDQgc2Vjb25kcy4gSWYgdGhlIHByaW1hcnkgY2xpZW50IGZhaWxzIHRvXG4gKiB1cGRhdGUgdGhpcyBlbnRyeSwgYW5vdGhlciBjbGllbnQgY2FuIGFjcXVpcmUgdGhlIGxlYXNlIGFuZCB0YWtlIG92ZXIgYXNcbiAqIHByaW1hcnkuXG4gKlxuICogU29tZSBwZXJzaXN0ZW5jZSBvcGVyYXRpb25zIGluIHRoZSBTREsgYXJlIGRlc2lnbmF0ZWQgYXMgcHJpbWFyeS1jbGllbnQgb25seVxuICogb3BlcmF0aW9ucy4gVGhpcyBpbmNsdWRlcyB0aGUgYWNrbm93bGVkZ21lbnQgb2YgbXV0YXRpb25zIGFuZCBhbGwgdXBkYXRlcyBvZlxuICogcmVtb3RlIGRvY3VtZW50cy4gVGhlIGVmZmVjdHMgb2YgdGhlc2Ugb3BlcmF0aW9ucyBhcmUgd3JpdHRlbiB0byBwZXJzaXN0ZW5jZVxuICogYW5kIHRoZW4gYnJvYWRjYXN0IHRvIG90aGVyIHRhYnMgdmlhIExvY2FsU3RvcmFnZSAoc2VlXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCksIHdoaWNoIHRoZW4gcmVmcmVzaCB0aGVpciBzdGF0ZSBmcm9tXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBTaW1pbGFybHksIHRoZSBwcmltYXJ5IGNsaWVudCBsaXN0ZW5zIHRvIG5vdGlmaWNhdGlvbnMgc2VudCBieSBzZWNvbmRhcnlcbiAqIGNsaWVudHMgdG8gZGlzY292ZXIgcGVyc2lzdGVuY2UgY2hhbmdlcyB3cml0dGVuIGJ5IHNlY29uZGFyeSBjbGllbnRzLCBzdWNoIGFzXG4gKiB0aGUgYWRkaXRpb24gb2YgbmV3IG11dGF0aW9ucyBhbmQgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBJZiBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQgYW5kIGFub3RoZXIgdGFiIGFscmVhZHkgb2J0YWluZWQgdGhlIHByaW1hcnlcbiAqIGxlYXNlLCBJbmRleGVkRGJQZXJzaXN0ZW5jZSBlbnRlcnMgYSBmYWlsZWQgc3RhdGUgYW5kIGFsbCBzdWJzZXF1ZW50XG4gKiBvcGVyYXRpb25zIHdpbGwgYXV0b21hdGljYWxseSBmYWlsLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgdGhlcmUgaXMgYW4gb3B0aW1pemF0aW9uIHNvIHRoYXQgd2hlbiBhIHRhYiBpcyBjbG9zZWQsIHRoZVxuICogcHJpbWFyeSBsZWFzZSBpcyByZWxlYXNlZCBpbW1lZGlhdGVseSAodGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCB0byBtYWtlXG4gKiBzdXJlIHRoYXQgYSByZWZyZXNoZWQgdGFiIGlzIGFibGUgdG8gaW1tZWRpYXRlbHkgcmUtYWNxdWlyZSB0aGUgcHJpbWFyeVxuICogbGVhc2UpLiBVbmZvcnR1bmF0ZWx5LCBJbmRleGVkREIgY2Fubm90IGJlIHJlbGlhYmx5IHVzZWQgaW4gd2luZG93LnVubG9hZFxuICogc2luY2UgaXQgaXMgYW4gYXN5bmNocm9ub3VzIEFQSS4gU28gaW4gYWRkaXRpb24gdG8gYXR0ZW1wdGluZyB0byBnaXZlIHVwIHRoZVxuICogbGVhc2UsIHRoZSBsZWFzZWhvbGRlciB3cml0ZXMgaXRzIGNsaWVudCBJRCB0byBhIFwiem9tYmllZENsaWVudFwiIGVudHJ5IGluXG4gKiBMb2NhbFN0b3JhZ2Ugd2hpY2ggYWN0cyBhcyBhbiBpbmRpY2F0b3IgdGhhdCBhbm90aGVyIHRhYiBzaG91bGQgZ28gYWhlYWQgYW5kXG4gKiB0YWtlIHRoZSBwcmltYXJ5IGxlYXNlIGltbWVkaWF0ZWx5IHJlZ2FyZGxlc3Mgb2YgdGhlIGN1cnJlbnQgbGVhc2UgdGltZXN0YW1wLlxuICpcbiAqIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgYHN5bmNocm9uaXplVGFic2Agc2VjdGlvbiB3aGVuIG11bHRpLXRhYiBpcyBub1xuICogbG9uZ2VyIG9wdGlvbmFsLlxuICovXG5jbGFzcyBRciB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzeW5jaHJvbml6ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIG11bHRpcGxlIHRhYnMgYW5kIHNoYXJlXG4gICAgICogYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICAgICAqL1xuICAgIHQsIGUsIG4sIHMsIGksIHIsIG8sIHUsIGEsIFxuICAgIC8qKlxuICAgICAqIElmIHNldCB0byB0cnVlLCBmb3JjZWZ1bGx5IG9idGFpbnMgZGF0YWJhc2UgYWNjZXNzLiBFeGlzdGluZyB0YWJzIHdpbGxcbiAgICAgKiBubyBsb25nZXIgYmUgYWJsZSB0byBhY2Nlc3MgSW5kZXhlZERCLlxuICAgICAqL1xuICAgIGMsIGggPSAxMykge1xuICAgICAgICBpZiAodGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiA9IHQsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBlLCB0aGlzLmNsaWVudElkID0gbiwgXG4gICAgICAgIHRoaXMuSm4gPSBpLCB0aGlzLndpbmRvdyA9IHIsIHRoaXMuZG9jdW1lbnQgPSBvLCB0aGlzLlluID0gYSwgdGhpcy5YbiA9IGMsIHRoaXMuWm4gPSBoLCBcbiAgICAgICAgdGhpcy50cyA9IG51bGwsIHRoaXMuZXMgPSAhMSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5uZXR3b3JrRW5hYmxlZCA9ICEwLCBcbiAgICAgICAgLyoqIE91ciB3aW5kb3cudW5sb2FkIGhhbmRsZXIsIGlmIHJlZ2lzdGVyZWQuICovXG4gICAgICAgIHRoaXMubnMgPSBudWxsLCB0aGlzLmluRm9yZWdyb3VuZCA9ICExLCBcbiAgICAgICAgLyoqIE91ciAndmlzaWJpbGl0eWNoYW5nZScgbGlzdGVuZXIgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5zcyA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGNsaWVudCBtZXRhZGF0YSByZWZyZXNoIHRhc2suICovXG4gICAgICAgIHRoaXMucnMgPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHRpbWUgd2UgZ2FyYmFnZSBjb2xsZWN0ZWQgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuICovXG4gICAgICAgIHRoaXMub3MgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIFxuICAgICAgICAvKiogQSBsaXN0ZW5lciB0byBub3RpZnkgb24gcHJpbWFyeSBzdGF0ZSBjaGFuZ2VzLiAqL1xuICAgICAgICB0aGlzLnVzID0gdCA9PiBQcm9taXNlLnJlc29sdmUoKSwgIVFyLnZ0KCkpIHRocm93IG5ldyBRKEsuVU5JTVBMRU1FTlRFRCwgXCJUaGlzIHBsYXRmb3JtIGlzIGVpdGhlciBtaXNzaW5nIEluZGV4ZWREQiBvciBpcyBrbm93biB0byBoYXZlIGFuIGluY29tcGxldGUgaW1wbGVtZW50YXRpb24uIE9mZmxpbmUgcGVyc2lzdGVuY2UgaGFzIGJlZW4gZGlzYWJsZWQuXCIpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZURlbGVnYXRlID0gbmV3IHhyKHRoaXMsIHMpLCB0aGlzLmNzID0gZSArIFwibWFpblwiLCB0aGlzLk0gPSBuZXcgQ2kodSksIFxuICAgICAgICB0aGlzLmhzID0gbmV3IGdpKHRoaXMuY3MsIHRoaXMuWm4sIG5ldyBxcih0aGlzLk0pKSwgdGhpcy5scyA9IG5ldyBBcih0aGlzLnJlZmVyZW5jZURlbGVnYXRlLCB0aGlzLk0pLCBcbiAgICAgICAgdGhpcy5mcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgTXIodCk7XG4gICAgICAgIH0odGhpcy5NKSwgdGhpcy5kcyA9IG5ldyBHaSwgdGhpcy53aW5kb3cgJiYgdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlID8gdGhpcy5fcyA9IHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA6ICh0aGlzLl9zID0gbnVsbCwgXG4gICAgICAgICExID09PSBjICYmIEYoXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIkxvY2FsU3RvcmFnZSBpcyB1bmF2YWlsYWJsZS4gQXMgYSByZXN1bHQsIHBlcnNpc3RlbmNlIG1heSBub3Qgd29yayByZWxpYWJseS4gSW4gcGFydGljdWxhciBlbmFibGVQZXJzaXN0ZW5jZSgpIGNvdWxkIGZhaWwgaW1tZWRpYXRlbHkgYWZ0ZXIgcmVmcmVzaGluZyB0aGUgcGFnZS5cIikpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRlbXB0IHRvIHN0YXJ0IEluZGV4ZWREYiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFdoZXRoZXIgcGVyc2lzdGVuY2Ugd2FzIGVuYWJsZWQuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICAvLyBOT1RFOiBUaGlzIGlzIGV4cGVjdGVkIHRvIGZhaWwgc29tZXRpbWVzIChpbiB0aGUgY2FzZSBvZiBhbm90aGVyIHRhYlxuICAgICAgICAvLyBhbHJlYWR5IGhhdmluZyB0aGUgcGVyc2lzdGVuY2UgbG9jayksIHNvIGl0J3MgdGhlIGZpcnN0IHRoaW5nIHdlIHNob3VsZFxuICAgICAgICAvLyBkby5cbiAgICAgICAgcmV0dXJuIHRoaXMud3MoKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgIC8vIEZhaWwgYHN0YXJ0KClgIGlmIGBzeW5jaHJvbml6ZVRhYnNgIGlzIGRpc2FibGVkIGFuZCB3ZSBjYW5ub3RcbiAgICAgICAgICAgIC8vIG9idGFpbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgICAgICAgIHRocm93IG5ldyBRKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgS3IpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ3MoKSwgdGhpcy55cygpLCB0aGlzLnBzKCksIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRIaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXJcIiwgXCJyZWFkb25seVwiLCAodCA9PiB0aGlzLmxzLmdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlcih0KSkpO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLnRzID0gbmV3IG50KHQsIHRoaXMuWW4pO1xuICAgICAgICB9KSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5lcyA9ICEwO1xuICAgICAgICB9KSkuY2F0Y2goKHQgPT4gKHRoaXMuaHMgJiYgdGhpcy5ocy5jbG9zZSgpLCBQcm9taXNlLnJlamVjdCh0KSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBwcmltYXJ5IHN0YXRlIG9mIHRoZVxuICAgICAqIGluc3RhbmNlIGNoYW5nZXMuIFVwb24gcmVnaXN0ZXJpbmcsIHRoaXMgbGlzdGVuZXIgaXMgaW52b2tlZCBpbW1lZGlhdGVseVxuICAgICAqIHdpdGggdGhlIGN1cnJlbnQgcHJpbWFyeSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIElzKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXMgPSBhc3luYyBlID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHJldHVybiB0KGUpO1xuICAgICAgICB9LCB0KHRoaXMuaXNQcmltYXJ5KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBnZXRzIGNhbGxlZCB3aGVuIHRoZSBkYXRhYmFzZSByZWNlaXZlcyBhXG4gICAgICogdmVyc2lvbiBjaGFuZ2UgZXZlbnQgaW5kaWNhdGluZyB0aGF0IGl0IGhhcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogUE9SVElORyBOT1RFOiBUaGlzIGlzIG9ubHkgdXNlZCBmb3IgV2ViIG11bHRpLXRhYi5cbiAgICAgKi8gICAgc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmhzLk90KChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuSm4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMud3MoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICB3cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gV3IodCkucHV0KHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmV0d29ya0VuYWJsZWQ6IHRoaXMubmV0d29ya0VuYWJsZWQsXG4gICAgICAgICAgICBpbkZvcmVncm91bmQ6IHRoaXMuaW5Gb3JlZ3JvdW5kXG4gICAgICAgIH0pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuVHModCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5Kbi5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLnVzKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuRXModCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5Bcyh0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMuUnModCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKElpKHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuIE8oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLkpuLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMudXModCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFRzKHQpIHtcbiAgICAgICAgcmV0dXJuIGpyKHQpLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4gd2kucmVzb2x2ZSh0aGlzLmJzKHQpKSkpO1xuICAgIH1cbiAgICBQcyh0KSB7XG4gICAgICAgIHJldHVybiBXcih0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBWcygpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLnZzKHRoaXMub3MsIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLm9zID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IFBpKHQsIFwiY2xpZW50TWV0YWRhdGFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUucXQoKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuU3ModCwgMThlNSksIHMgPSB0LmZpbHRlcigodCA9PiAtMSA9PT0gbi5pbmRleE9mKHQpKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIERlbGV0ZSBtZXRhZGF0YSBmb3IgY2xpZW50cyB0aGF0IGFyZSBubyBsb25nZXIgY29uc2lkZXJlZCBhY3RpdmUuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aS5mb3JFYWNoKHMsICh0ID0+IGUuZGVsZXRlKHQuY2xpZW50SWQpKSkubmV4dCgoKCkgPT4gcykpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgoKCkgPT4gW10pKTtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBwb3RlbnRpYWwgbGVmdG92ZXIgZW50cmllcyB0aGF0IG1heSBjb250aW51ZSB0byBtYXJrIHRoZVxuICAgICAgICAgICAgLy8gaW5hY3RpdmUgY2xpZW50cyBhcyB6b21iaWVkIGluIExvY2FsU3RvcmFnZS5cbiAgICAgICAgICAgIC8vIElkZWFsbHkgd2UnZCBkZWxldGUgdGhlIEluZGV4ZWREYiBhbmQgTG9jYWxTdG9yYWdlIHpvbWJpZSBlbnRyaWVzIGZvclxuICAgICAgICAgICAgLy8gdGhlIGNsaWVudCBhdG9taWNhbGx5LCBidXQgd2UgY2FuJ3QuIFNvIHdlIG9wdCB0byBkZWxldGUgdGhlIEluZGV4ZWREYlxuICAgICAgICAgICAgLy8gZW50cmllcyBmaXJzdCB0byBhdm9pZCBwb3RlbnRpYWxseSByZXZpdmluZyBhIHpvbWJpZWQgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3MpIGZvciAoY29uc3QgZSBvZiB0KSB0aGlzLl9zLnJlbW92ZUl0ZW0odGhpcy5EcyhlLmNsaWVudElkKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2NoZWR1bGVzIGEgcmVjdXJyaW5nIHRpbWVyIHRvIHVwZGF0ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGFuZCB0byBlaXRoZXJcbiAgICAgKiBleHRlbmQgb3IgYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSBpZiB0aGUgY2xpZW50IGlzIGVsaWdpYmxlLlxuICAgICAqLyAgICBwcygpIHtcbiAgICAgICAgdGhpcy5ycyA9IHRoaXMuSm4uZW5xdWV1ZUFmdGVyRGVsYXkoXCJjbGllbnRfbWV0YWRhdGFfcmVmcmVzaFwiIC8qIENsaWVudE1ldGFkYXRhUmVmcmVzaCAqLyAsIDRlMywgKCgpID0+IHRoaXMud3MoKS50aGVuKCgoKSA9PiB0aGlzLlZzKCkpKS50aGVuKCgoKSA9PiB0aGlzLnBzKCkpKSkpO1xuICAgIH1cbiAgICAvKiogQ2hlY2tzIHdoZXRoZXIgYGNsaWVudGAgaXMgdGhlIGxvY2FsIGNsaWVudC4gKi8gICAgYnModCkge1xuICAgICAgICByZXR1cm4gISF0ICYmIHQub3duZXJJZCA9PT0gdGhpcy5jbGllbnRJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXZhbHVhdGUgdGhlIHN0YXRlIG9mIGFsbCBhY3RpdmUgY2xpZW50cyBhbmQgZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGxvY2FsXG4gICAgICogY2xpZW50IGlzIG9yIGNhbiBhY3QgYXMgdGhlIGhvbGRlciBvZiB0aGUgcHJpbWFyeSBsZWFzZS4gUmV0dXJucyB3aGV0aGVyXG4gICAgICogdGhlIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIGxlYXNlLCBidXQgZG9lcyBub3QgYWN0dWFsbHkgYWNxdWlyZSBpdC5cbiAgICAgKiBNYXkgcmV0dXJuICdmYWxzZScgZXZlbiBpZiB0aGVyZSBpcyBubyBhY3RpdmUgbGVhc2Vob2xkZXIgYW5kIGFub3RoZXJcbiAgICAgKiAoZm9yZWdyb3VuZCkgY2xpZW50IHNob3VsZCBiZWNvbWUgbGVhc2Vob2xkZXIgaW5zdGVhZC5cbiAgICAgKi8gICAgRXModCkge1xuICAgICAgICBpZiAodGhpcy5YbikgcmV0dXJuIHdpLnJlc29sdmUoITApO1xuICAgICAgICByZXR1cm4ganIodCkuZ2V0KFwib3duZXJcIikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAvLyBBIGNsaWVudCBpcyBlbGlnaWJsZSBmb3IgdGhlIHByaW1hcnkgbGVhc2UgaWY6XG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIHRoZSBjbGllbnQncyB0YWIgaXMgaW4gdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGl0cyBuZXR3b3JrIGlzIGVuYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZVxuICAgICAgICAgICAgLy8gICBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBldmVyeSBjbGllbnRzIG5ldHdvcmsgaXMgZGlzYWJsZWQgYW5kIG5vIG90aGVyIGNsaWVudCdzIHRhYiBpcyBpblxuICAgICAgICAgICAgLy8gICB0aGUgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gdGhlIGBmb3JjZU93bmluZ1RhYmAgc2V0dGluZyB3YXMgcGFzc2VkIGluLlxuICAgICAgICAgICAgaWYgKG51bGwgIT09IGUgJiYgdGhpcy52cyhlLmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuQ3MoZS5vd25lcklkKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJzKGUpICYmIHRoaXMubmV0d29ya0VuYWJsZWQpIHJldHVybiAhMDtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYnMoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSBcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFpbCB0aGUgYGNhbkFjdEFzUHJpbWFyeWAgY2hlY2sgaWYgdGhlIGN1cnJlbnQgbGVhc2Vob2xkZXIgaGFzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uIElmIHRoaXMgaGFwcGVucyBhdFxuICAgICAgICAgICAgICAgICAgICAvLyBjbGllbnQgc3RhcnR1cCwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIHJldHVybmVkIGJ5XG4gICAgICAgICAgICAgICAgICAgIC8vIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCBhbmQgdGhlIHVzZXIgY2FuIGNvbnRpbnVlIHRvIHVzZSBGaXJlc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgLy8gd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMgZHVyaW5nIGEgbGVhc2UgcmVmcmVzaCwgd2Ugd2lsbCBpbnN0ZWFkIGJsb2NrIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBBc3luY1F1ZXVlIGZyb20gZXhlY3V0aW5nIGZ1cnRoZXIgb3BlcmF0aW9ucy4gTm90ZSB0aGF0IHRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gYWNjZXB0YWJsZSBzaW5jZSBtaXhpbmcgJiBtYXRjaGluZyBkaWZmZXJlbnQgYHN5bmNocm9uaXplVGFic2BcbiAgICAgICAgICAgICAgICAgICAgLy8gc2V0dGluZ3MgaXMgbm90IHN1cHBvcnRlZC5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vIGxvbmdlciBiZSB0dXJuZWQgb2ZmLlxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIEtyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhKCF0aGlzLm5ldHdvcmtFbmFibGVkIHx8ICF0aGlzLmluRm9yZWdyb3VuZCkgfHwgV3IodCkucXQoKS5uZXh0KCh0ID0+IHZvaWQgMCA9PT0gdGhpcy5Tcyh0LCA1ZTMpLmZpbmQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSB0LmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiB0Lm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIHQuaW5Gb3JlZ3JvdW5kLCBzID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gdC5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgfHwgbiAmJiBzKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiAodGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJHt0ID8gXCJpc1wiIDogXCJpcyBub3RcIn0gZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5gKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKCkge1xuICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxuICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXG4gICAgICAgIHRoaXMuZXMgPSAhMSwgdGhpcy54cygpLCB0aGlzLnJzICYmICh0aGlzLnJzLmNhbmNlbCgpLCB0aGlzLnJzID0gbnVsbCksIHRoaXMuTnMoKSwgXG4gICAgICAgIHRoaXMua3MoKSwgXG4gICAgICAgIC8vIFVzZSBgU2ltcGxlRGIucnVuVHJhbnNhY3Rpb25gIGRpcmVjdGx5IHRvIGF2b2lkIGZhaWxpbmcgaWYgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gaGFzIG9idGFpbmVkIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICBhd2FpdCB0aGlzLmhzLnJ1blRyYW5zYWN0aW9uKFwic2h1dGRvd25cIiwgXCJyZWFkd3JpdGVcIiwgWyBcIm93bmVyXCIsIFwiY2xpZW50TWV0YWRhdGFcIiBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IGJpKHQsIG50LkEpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuQXMoZSkubmV4dCgoKCkgPT4gdGhpcy5QcyhlKSkpO1xuICAgICAgICB9KSksIHRoaXMuaHMuY2xvc2UoKSwgXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgZW50cnkgbWFya2luZyB0aGUgY2xpZW50IGFzIHpvbWJpZWQgZnJvbSBMb2NhbFN0b3JhZ2Ugc2luY2VcbiAgICAgICAgLy8gd2Ugc3VjY2Vzc2Z1bGx5IGRlbGV0ZWQgaXRzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLlxuICAgICAgICB0aGlzLk1zKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY2xpZW50cyB0aGF0IGFyZSBub3Qgem9tYmllZCBhbmQgaGF2ZSBhbiB1cGRhdGVUaW1lIHdpdGhpbiB0aGVcbiAgICAgKiBwcm92aWRlZCB0aHJlc2hvbGQuXG4gICAgICovICAgIFNzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuZmlsdGVyKCh0ID0+IHRoaXMudnModC51cGRhdGVUaW1lTXMsIGUpICYmICF0aGlzLkNzKHQuY2xpZW50SWQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIElEcyBvZiB0aGUgY2xpZW50cyB0aGF0IGFyZSBjdXJyZW50bHkgYWN0aXZlLiBJZiBtdWx0aS10YWJcbiAgICAgKiBpcyBub3Qgc3VwcG9ydGVkLCByZXR1cm5zIGFuIGFycmF5IHRoYXQgb25seSBjb250YWlucyB0aGUgbG9jYWwgY2xpZW50J3NcbiAgICAgKiBJRC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIE9zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ydW5UcmFuc2FjdGlvbihcImdldEFjdGl2ZUNsaWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBXcih0KS5xdCgpLm5leHQoKHQgPT4gdGhpcy5Tcyh0LCAxOGU1KS5tYXAoKHQgPT4gdC5jbGllbnRJZCkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVzO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGdyLll0KHQsIHRoaXMuTSwgZSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5scztcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnM7XG4gICAgfVxuICAgIGdldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYXIodCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpIHtcbiAgICAgICAgcmV0dXJuIGppLll0KHRoaXMuTSwgdCk7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kcztcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBcInJlYWRvbmx5XCIgPT09IGUgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBpID0gMTQgPT09IChyID0gdGhpcy5abikgPyBmaSA6IDEzID09PSByID8gbGkgOiAxMiA9PT0gciA/IGhpIDogMTEgPT09IHIgPyBjaSA6IHZvaWQgTCgpO1xuICAgICAgICAvKiogUmV0dXJucyB0aGUgb2JqZWN0IHN0b3JlcyBmb3IgdGhlIHByb3ZpZGVkIHNjaGVtYS4gKi9cbiAgICAgICAgdmFyIHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICAvLyBEbyBhbGwgdHJhbnNhY3Rpb25zIGFzIHJlYWR3cml0ZSBhZ2FpbnN0IGFsbCBvYmplY3Qgc3RvcmVzLCBzaW5jZSB3ZVxuICAgICAgICAvLyBhcmUgdGhlIG9ubHkgcmVhZGVyL3dyaXRlci5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5ocy5ydW5UcmFuc2FjdGlvbih0LCBzLCBpLCAocyA9PiAobyA9IG5ldyBiaShzLCB0aGlzLnRzID8gdGhpcy50cy5uZXh0KCkgOiBudC5BKSwgXG4gICAgICAgIFwicmVhZHdyaXRlLXByaW1hcnlcIiA9PT0gZSA/IHRoaXMuVHMobykubmV4dCgodCA9PiAhIXQgfHwgdGhpcy5FcyhvKSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSB0aHJvdyBGKGBGYWlsZWQgdG8gb2J0YWluIHByaW1hcnkgbGVhc2UgZm9yIGFjdGlvbiAnJHt0fScuYCksIHRoaXMuaXNQcmltYXJ5ID0gITEsIFxuICAgICAgICAgICAgdGhpcy5Kbi5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLnVzKCExKSkpLCBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIGRpKTtcbiAgICAgICAgICAgIHJldHVybiBuKG8pO1xuICAgICAgICB9KSkubmV4dCgodCA9PiB0aGlzLlJzKG8pLm5leHQoKCgpID0+IHQpKSkpIDogdGhpcy5GcyhvKS5uZXh0KCgoKSA9PiBuKG8pKSkpKSkudGhlbigodCA9PiAoby5yYWlzZU9uQ29tbWl0dGVkRXZlbnQoKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgdGhlIGN1cnJlbnQgdGFiIGlzIHRoZSBwcmltYXJ5IGxlYXNlaG9sZGVyIG9yIGFsdGVybmF0aXZlbHlcbiAgICAgKiB0aGF0IHRoZSBsZWFzZWhvbGRlciBoYXMgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhbiBubyBsb25nZXJcbiAgICAvLyBiZSB0dXJuZWQgb2ZmLlxuICAgIEZzKHQpIHtcbiAgICAgICAgcmV0dXJuIGpyKHQpLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQgJiYgdGhpcy52cyh0LmxlYXNlVGltZXN0YW1wTXMsIDVlMykgJiYgIXRoaXMuQ3ModC5vd25lcklkKSAmJiAhdGhpcy5icyh0KSAmJiAhKHRoaXMuWG4gfHwgdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbiAmJiB0LmFsbG93VGFiU3luY2hyb25pemF0aW9uKSkgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBLcik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT2J0YWlucyBvciBleHRlbmRzIHRoZSBuZXcgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gVGhpc1xuICAgICAqIG1ldGhvZCBkb2VzIG5vdCB2ZXJpZnkgdGhhdCB0aGUgY2xpZW50IGlzIGVsaWdpYmxlIGZvciB0aGlzIGxlYXNlLlxuICAgICAqLyAgICBScyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBvd25lcklkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgYWxsb3dUYWJTeW5jaHJvbml6YXRpb246IHRoaXMuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24sXG4gICAgICAgICAgICBsZWFzZVRpbWVzdGFtcE1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBqcih0KS5wdXQoXCJvd25lclwiLCBlKTtcbiAgICB9XG4gICAgc3RhdGljIHZ0KCkge1xuICAgICAgICByZXR1cm4gZ2kudnQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgQXModCkge1xuICAgICAgICBjb25zdCBlID0ganIodCk7XG4gICAgICAgIHJldHVybiBlLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4gdGhpcy5icyh0KSA/IChPKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShcIm93bmVyXCIpKSA6IHdpLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgdnModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKEYoYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIGdzKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLnNzID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5Kbi5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy53cygpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuc3MpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIE5zKCkge1xuICAgICAgICB0aGlzLnNzICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuc3MpLCB0aGlzLnNzID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICB5cygpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMubnMgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy54cygpLCBpc1NhZmFyaSgpICYmIG5hdmlnYXRvci5hcHBWZXJzaW9uLm1hdGNoKC9WZXJzaW9uXFwvMVs0NV0vKSAmJiBcbiAgICAgICAgICAgIC8vIE9uIFNhZmFyaSAxNCBhbmQgMTUsIHdlIGRvIG5vdCBydW4gYW55IGNsZWFudXAgYWN0aW9ucyBhcyBpdCBtaWdodFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhIGJ1ZyB0aGF0IHByZXZlbnRzIFNhZmFyaSBmcm9tIHJlLW9wZW5pbmcgSW5kZXhlZERCIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlIG5leHQgcGFnZSBsb2FkLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjY1NDdcbiAgICAgICAgICAgIHRoaXMuSm4uZW50ZXJSZXN0cmljdGVkTW9kZSgvKiBwdXJnZUV4aXN0aW5nVGFza3M9ICovICEwKSwgdGhpcy5Kbi5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnNodXRkb3duKCkpKTtcbiAgICAgICAgfSwgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMubnMpKTtcbiAgICB9XG4gICAga3MoKSB7XG4gICAgICAgIHRoaXMubnMgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLm5zKSwgdGhpcy5ucyA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxuICAgICAqLyAgICBDcyh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbiA9IG51bGwgIT09IChudWxsID09PSAoZSA9IHRoaXMuX3MpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZ2V0SXRlbSh0aGlzLkRzKHQpKSk7XG4gICAgICAgICAgICByZXR1cm4gTyhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJyR7dH0nICR7biA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgbjtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gRihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC5cIiwgdCksICExO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXG4gICAgICogY2xpZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgcHJpbWFyeSB0YWIgc2VsZWN0aW9uLlxuICAgICAqLyAgICB4cygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3MpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9zLnNldEl0ZW0odGhpcy5Ecyh0aGlzLmNsaWVudElkKSwgU3RyaW5nKERhdGUubm93KCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IGF2YWlsYWJsZSAvIHdvcmtpbmcuXG4gICAgICAgICAgICBGKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBNcygpIHtcbiAgICAgICAgaWYgKHRoaXMuX3MpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9zLnJlbW92ZUl0ZW0odGhpcy5Ecyh0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIERzKHQpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHt0fWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIGpyKHQpIHtcbiAgICByZXR1cm4gUGkodCwgXCJvd25lclwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gV3IodCkge1xuICAgIHJldHVybiBQaSh0LCBcImNsaWVudE1ldGFkYXRhXCIpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiB6cih0LCBlKSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IHQucHJvamVjdElkO1xuICAgIHJldHVybiB0LmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgdC5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgZSArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHJlYWRvbmx5IHZpZXcgb2YgdGhlIGxvY2FsIHN0YXRlIG9mIGFsbCBkb2N1bWVudHMgd2UncmUgdHJhY2tpbmcgKGkuZS4gd2VcbiAqIGhhdmUgYSBjYWNoZWQgdmVyc2lvbiBpbiByZW1vdGVEb2N1bWVudENhY2hlIG9yIGxvY2FsIG11dGF0aW9ucyBmb3IgdGhlXG4gKiBkb2N1bWVudCkuIFRoZSB2aWV3IGlzIGNvbXB1dGVkIGJ5IGFwcGx5aW5nIHRoZSBtdXRhdGlvbnMgaW4gdGhlXG4gKiBNdXRhdGlvblF1ZXVlIHRvIHRoZSBSZW1vdGVEb2N1bWVudENhY2hlLlxuICovXG5jbGFzcyBIciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmZzID0gdCwgdGhpcy4kcyA9IGUsIHRoaXMuaW5kZXhNYW5hZ2VyID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBsb2NhbCB2aWV3IG9mIHRoZSBkb2N1bWVudCBpZGVudGlmaWVkIGJ5IGBrZXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgTG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgb3IgbnVsbCBpZiB3ZSBkb24ndCBoYXZlIGFueSBjYWNoZWRcbiAgICAgKiBzdGF0ZSBmb3IgaXQuXG4gICAgICovICAgIEJzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJHMuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkubmV4dCgobiA9PiB0aGlzLkxzKHQsIGUsIG4pKSk7XG4gICAgfVxuICAgIC8qKiBJbnRlcm5hbCB2ZXJzaW9uIG9mIGBnZXREb2N1bWVudGAgdGhhdCBhbGxvd3MgcmV1c2luZyBiYXRjaGVzLiAqLyAgICBMcyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZzLmdldEVudHJ5KHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGUuYXBwbHlUb0xvY2FsVmlldyh0KTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHZpZXcgb2YgdGhlIGdpdmVuIGBkb2NzYCBhcyB0aGV5IHdvdWxkIGFwcGVhciBhZnRlciBhcHBseWluZ1xuICAgIC8vIGFsbCBtdXRhdGlvbnMgaW4gdGhlIGdpdmVuIGBiYXRjaGVzYC5cbiAgICBVcyh0LCBlKSB7XG4gICAgICAgIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB0LmFwcGx5VG9Mb2NhbFZpZXcobik7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxuICAgICAqXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXG4gICAgICovICAgIHFzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnMuZ2V0RW50cmllcyh0LCBlKS5uZXh0KChlID0+IHRoaXMuR3ModCwgZSkubmV4dCgoKCkgPT4gZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIGxvY2FsIHZpZXcgdGhlIGdpdmVuIGBiYXNlRG9jc2Agd2l0aG91dCByZXRyaWV2aW5nIGRvY3VtZW50c1xuICAgICAqIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxuICAgICAqLyAgICBHcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzLmdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKS5uZXh0KCh0ID0+IHRoaXMuVXMoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCB2aWV3IG9mIGFsbCBkb2N1bWVudHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb24gLSBUaGUgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24uXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5IHRvIG1hdGNoIGRvY3VtZW50cyBhZ2FpbnN0LlxuICAgICAqIEBwYXJhbSBvZmZzZXQgLSBSZWFkIHRpbWUgYW5kIGtleSB0byBzdGFydCBzY2FubmluZyBieSAoZXhjbHVzaXZlKS5cbiAgICAgKi8gICAgS3ModCwgZSwgbikge1xuICAgICAgICAvKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIHNpbmdsZSBkb2N1bWVudCBieSBwYXRoIChyYXRoZXIgdGhhbiBhXG4gKiBjb2xsZWN0aW9uKS5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHh0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KGUpID8gdGhpcy5Rcyh0LCBlLnBhdGgpIDogJGUoZSkgPyB0aGlzLmpzKHQsIGUsIG4pIDogdGhpcy5Xcyh0LCBlLCBuKTtcbiAgICB9XG4gICAgUXModCwgZSkge1xuICAgICAgICAvLyBKdXN0IGRvIGEgc2ltcGxlIGRvY3VtZW50IGxvb2t1cC5cbiAgICAgICAgcmV0dXJuIHRoaXMuQnModCwgbmV3IHh0KGUpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gS24oKTtcbiAgICAgICAgICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIChlID0gZS5pbnNlcnQodC5rZXksIHQpKSwgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBqcyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmNvbGxlY3Rpb25Hcm91cDtcbiAgICAgICAgbGV0IGkgPSBLbigpO1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXIuZ2V0Q29sbGVjdGlvblBhcmVudHModCwgcykubmV4dCgociA9PiB3aS5mb3JFYWNoKHIsIChyID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDZShlLCBcbiAgICAgICAgICAgICAgICAvKmNvbGxlY3Rpb25Hcm91cD0qLyBudWxsLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIHF1ZXJ5IGRvZXMgbm90IHNwZWNpZnkgYW55IHF1ZXJ5IGNvbnN0cmFpbnRzIHRoYXRcbiAqIGNvdWxkIHJlbW92ZSByZXN1bHRzLlxuICovIChlLCByLmNoaWxkKHMpKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLldzKHQsIG8sIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHQsIGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKSkpO1xuICAgIH1cbiAgICBXcyh0LCBlLCBuKSB7XG4gICAgICAgIC8vIFF1ZXJ5IHRoZSByZW1vdGUgZG9jdW1lbnRzIGFuZCBvdmVybGF5IG11dGF0aW9ucy5cbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiB0aGlzLmZzLmdldEFsbEZyb21Db2xsZWN0aW9uKHQsIGUucGF0aCwgbikubmV4dCgobiA9PiAocyA9IG4sIHRoaXMuJHMuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkpKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkgZm9yIChjb25zdCB0IG9mIGUubXV0YXRpb25zKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQua2V5O1xuICAgICAgICAgICAgICAgIGxldCBpID0gcy5nZXQobik7XG4gICAgICAgICAgICAgICAgbnVsbCA9PSBpICYmIChcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgaW52YWxpZCBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgb24gdG9wIG9mXG4gICAgICAgICAgICAgICAgaSA9IHRlLm5ld0ludmFsaWREb2N1bWVudChuKSwgcyA9IHMuaW5zZXJ0KG4sIGkpKSwgeW4odCwgaSwgZS5sb2NhbFdyaXRlVGltZSksIGkuaXNGb3VuZERvY3VtZW50KCkgfHwgKHMgPSBzLnJlbW92ZShuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAoXG4gICAgICAgIC8vIEZpbmFsbHksIGZpbHRlciBvdXQgYW55IGRvY3VtZW50cyB0aGF0IGRvbid0IGFjdHVhbGx5IG1hdGNoXG4gICAgICAgIC8vIHRoZSBxdWVyeS5cbiAgICAgICAgcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgUWUoZSwgbikgfHwgKHMgPSBzLnJlbW92ZSh0KSk7XG4gICAgICAgIH0pKSwgcykpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgc2V0IG9mIGNoYW5nZXMgdG8gd2hhdCBkb2N1bWVudHMgYXJlIGN1cnJlbnRseSBpbiB2aWV3IGFuZCBvdXQgb2YgdmlldyBmb3JcbiAqIGEgZ2l2ZW4gcXVlcnkuIFRoZXNlIGNoYW5nZXMgYXJlIHNlbnQgdG8gdGhlIExvY2FsU3RvcmUgYnkgdGhlIFZpZXcgKHZpYVxuICogdGhlIFN5bmNFbmdpbmUpIGFuZCBhcmUgdXNlZCB0byBwaW4gLyB1bnBpbiBkb2N1bWVudHMgYXMgYXBwcm9wcmlhdGUuXG4gKi8gY2xhc3MgSnIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy50YXJnZXRJZCA9IHQsIHRoaXMuZnJvbUNhY2hlID0gZSwgdGhpcy56cyA9IG4sIHRoaXMuSHMgPSBzO1xuICAgIH1cbiAgICBzdGF0aWMgSnModCwgZSkge1xuICAgICAgICBsZXQgbiA9IHpuKCksIHMgPSB6bigpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZS5kb2NDaGFuZ2VzKSBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICBuID0gbi5hZGQodC5kb2Mua2V5KTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgcyA9IHMuYWRkKHQuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBKcih0LCBlLmZyb21DYWNoZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHF1ZXJ5IGVuZ2luZSB0aGF0IHRha2VzIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0IGRvY3VtZW50IG1hcHBpbmcgaW4gdGhlXG4gKiBRdWVyeUNhY2hlLiBRdWVyeSBleGVjdXRpb24gaXMgb3B0aW1pemVkIGJ5IG9ubHkgcmVhZGluZyB0aGUgZG9jdW1lbnRzIHRoYXRcbiAqIHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55IGRvY3VtZW50cyB0aGF0IHdlcmUgZWRpdGVkIGFmdGVyIHRoZVxuICogcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqLyBjbGFzcyBZciB7XG4gICAgLyoqIFNldHMgdGhlIGRvY3VtZW50IHZpZXcgdG8gcXVlcnkgYWdhaW5zdC4gKi9cbiAgICBZcyh0KSB7XG4gICAgICAgIHRoaXMuWHMgPSB0O1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhbGwgbG9jYWwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBzcGVjaWZpZWQgcXVlcnkuICovICAgIEtzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXG4gICAgICAgIC8vIGtleS1iYXNlZCBsb29rdXBzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0LmZpbHRlcnMubGVuZ3RoICYmIG51bGwgPT09IHQubGltaXQgJiYgbnVsbCA9PSB0LnN0YXJ0QXQgJiYgbnVsbCA9PSB0LmVuZEF0ICYmICgwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggfHwgMSA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoICYmIHQuZXhwbGljaXRPcmRlckJ5WzBdLmZpZWxkLmlzS2V5RmllbGQoKSk7XG4gICAgICAgIH0oZSkgfHwgbi5pc0VxdWFsKGN0Lm1pbigpKSA/IHRoaXMuWnModCwgZSkgOiB0aGlzLlhzLnFzKHQsIHMpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHRoaXMudGkoZSwgaSk7XG4gICAgICAgICAgICByZXR1cm4gKGtlKGUpIHx8IE1lKGUpKSAmJiB0aGlzLmVpKGUubGltaXRUeXBlLCByLCBzLCBuKSA/IHRoaXMuWnModCwgZSkgOiAoaygpIDw9IExvZ0xldmVsLkRFQlVHICYmIE8oXCJRdWVyeUVuZ2luZVwiLCBcIlJlLXVzaW5nIHByZXZpb3VzIHJlc3VsdCBmcm9tICVzIHRvIGV4ZWN1dGUgcXVlcnk6ICVzXCIsIG4udG9TdHJpbmcoKSwgS2UoZSkpLCBcbiAgICAgICAgICAgIHRoaXMuWHMuS3ModCwgZSwgb2UobiwgLTEpKS5uZXh0KCh0ID0+IChcbiAgICAgICAgICAgIC8vIFdlIG1lcmdlIGBwcmV2aW91c1Jlc3VsdHNgIGludG8gYHVwZGF0ZVJlc3VsdHNgLCBzaW5jZVxuICAgICAgICAgICAgLy8gYHVwZGF0ZVJlc3VsdHNgIGlzIGFscmVhZHkgYSBEb2N1bWVudE1hcC4gSWYgYSBkb2N1bWVudCBpc1xuICAgICAgICAgICAgLy8gY29udGFpbmVkIGluIGJvdGggbGlzdHMsIHRoZW4gaXRzIGNvbnRlbnRzIGFyZSB0aGUgc2FtZS5cbiAgICAgICAgICAgIHIuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgdCA9IHQuaW5zZXJ0KGUua2V5LCBlKTtcbiAgICAgICAgICAgIH0pKSwgdCkpKSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IGhhdmUgbmV2ZXIgc2VlbiBhIHNuYXBzaG90IHdpdGhvdXQgbGltYm8gZnJlZSBkb2N1bWVudHNcbiAgICAgICAgLy8gc2hvdWxkIGFsc28gYmUgcnVuIGFzIGEgZnVsbCBjb2xsZWN0aW9uIHNjYW4uXG4gICAgICAgIH1cbiAgICAvKiogQXBwbGllcyB0aGUgcXVlcnkgZmlsdGVyIGFuZCBzb3J0aW5nIHRvIHRoZSBwcm92aWRlZCBkb2N1bWVudHMuICAqLyAgICB0aSh0LCBlKSB7XG4gICAgICAgIC8vIFNvcnQgdGhlIGRvY3VtZW50cyBhbmQgcmUtYXBwbHkgdGhlIHF1ZXJ5IGZpbHRlciBzaW5jZSBwcmV2aW91c2x5XG4gICAgICAgIC8vIG1hdGNoaW5nIGRvY3VtZW50cyBkbyBub3QgbmVjZXNzYXJpbHkgc3RpbGwgbWF0Y2ggdGhlIHF1ZXJ5LlxuICAgICAgICBsZXQgbiA9IG5ldyAkbihXZSh0KSk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKChlLCBzKSA9PiB7XG4gICAgICAgICAgICBRZSh0LCBzKSAmJiAobiA9IG4uYWRkKHMpKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIGEgbGltaXQgcXVlcnkgbmVlZHMgdG8gYmUgcmVmaWxsZWQgZnJvbSBjYWNoZSwgbWFraW5nIGl0XG4gICAgICogaW5lbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBleGVjdXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc29ydGVkUHJldmlvdXNSZXN1bHRzIC0gVGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IHdoZW4gaXRcbiAgICAgKiB3YXMgbGFzdCBzeW5jaHJvbml6ZWQsIHNvcnRlZCBieSB0aGUgcXVlcnkncyBjb21wYXJhdG9yLlxuICAgICAqIEBwYXJhbSByZW1vdGVLZXlzIC0gVGhlIGRvY3VtZW50IGtleXMgdGhhdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgbGFzdFxuICAgICAqIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSBsaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24gLSBUaGUgdmVyc2lvbiBvZiB0aGUgc25hcHNob3Qgd2hlbiB0aGVcbiAgICAgKiBxdWVyeSB3YXMgbGFzdCBzeW5jaHJvbml6ZWQuXG4gICAgICovICAgIGVpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGlmIGEgcHJldmlvdXNseSBtYXRjaGluZyBkb2N1bWVudCBub1xuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cbiAgICAgICAgaWYgKG4uc2l6ZSAhPT0gZS5zaXplKSByZXR1cm4gITA7XG4gICAgICAgIC8vIExpbWl0IHF1ZXJpZXMgYXJlIG5vdCBlbGlnaWJsZSBmb3IgaW5kZXgtZnJlZSBxdWVyeSBleGVjdXRpb24gaWYgdGhlcmUgaXNcbiAgICAgICAgLy8gYSBwb3RlbnRpYWwgdGhhdCBhbiBvbGRlciBkb2N1bWVudCBmcm9tIGNhY2hlIG5vdyBzb3J0cyBiZWZvcmUgYSBkb2N1bWVudFxuICAgICAgICAvLyB0aGF0IHdhcyBwcmV2aW91c2x5IHBhcnQgb2YgdGhlIGxpbWl0LiBUaGlzLCBob3dldmVyLCBjYW4gb25seSBoYXBwZW4gaWZcbiAgICAgICAgLy8gdGhlIGRvY3VtZW50IGF0IHRoZSBlZGdlIG9mIHRoZSBsaW1pdCBnb2VzIG91dCBvZiBsaW1pdC5cbiAgICAgICAgLy8gSWYgYSBkb2N1bWVudCB0aGF0IGlzIG5vdCB0aGUgbGltaXQgYm91bmRhcnkgc29ydHMgZGlmZmVyZW50bHksXG4gICAgICAgIC8vIHRoZSBib3VuZGFyeSBvZiB0aGUgbGltaXQgaXRzZWxmIGRpZCBub3QgY2hhbmdlIGFuZCBkb2N1bWVudHMgZnJvbSBjYWNoZVxuICAgICAgICAvLyB3aWxsIGNvbnRpbnVlIHRvIGJlIFwicmVqZWN0ZWRcIiBieSB0aGlzIGJvdW5kYXJ5LiBUaGVyZWZvcmUsIHdlIGNhbiBpZ25vcmVcbiAgICAgICAgLy8gYW55IG1vZGlmaWNhdGlvbnMgdGhhdCBkb24ndCBhZmZlY3QgdGhlIGxhc3QgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IFwiRlwiIC8qIEZpcnN0ICovID09PSB0ID8gZS5sYXN0KCkgOiBlLmZpcnN0KCk7XG4gICAgICAgIHJldHVybiAhIWkgJiYgKGkuaGFzUGVuZGluZ1dyaXRlcyB8fCBpLnZlcnNpb24uY29tcGFyZVRvKHMpID4gMCk7XG4gICAgfVxuICAgIFpzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGsoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBPKFwiUXVlcnlFbmdpbmVcIiwgXCJVc2luZyBmdWxsIGNvbGxlY3Rpb24gc2NhbiB0byBleGVjdXRlIHF1ZXJ5OlwiLCBLZShlKSksIFxuICAgICAgICB0aGlzLlhzLktzKHQsIGUsIGFlLm1pbigpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgWHIge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLm5pID0gZSwgdGhpcy5NID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaSA9IG5ldyBNbihydCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLmlpID0gbmV3IGtuKCh0ID0+IGZlKHQpKSwgX2UpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcGVyIGNvbGxlY3Rpb24gZ3JvdXAgaW5kZXggb2YgdGhlIGxhc3QgcmVhZCB0aW1lIHByb2Nlc3NlZCBieVxuICAgICAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yaSA9IG5ldyBNYXAsIHRoaXMub2kgPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgdGhpcy5scyA9IHQuZ2V0VGFyZ2V0Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMuZHMgPSB0LmdldEJ1bmRsZUNhY2hlKCksIHRoaXMudWkobik7XG4gICAgfVxuICAgIHVpKHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IEFkZCBzcGVjIHRlc3RzIHRoYXQgdGVzdCB0aGVzZSBjb21wb25lbnRzIGNoYW5nZSBhZnRlciBhXG4gICAgICAgIC8vIHVzZXIgY2hhbmdlXG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRJbmRleE1hbmFnZXIodCksIHRoaXMuJHMgPSB0aGlzLnBlcnNpc3RlbmNlLmdldE11dGF0aW9uUXVldWUodCwgdGhpcy5pbmRleE1hbmFnZXIpLCBcbiAgICAgICAgdGhpcy5haSA9IG5ldyBIcih0aGlzLm9pLCB0aGlzLiRzLCB0aGlzLmluZGV4TWFuYWdlciksIHRoaXMub2kuc2V0SW5kZXhNYW5hZ2VyKHRoaXMuaW5kZXhNYW5hZ2VyKSwgXG4gICAgICAgIHRoaXMubmkuWXModGhpcy5haSk7XG4gICAgfVxuICAgIGNvbGxlY3RHYXJiYWdlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJDb2xsZWN0IGdhcmJhZ2VcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAoZSA9PiB0LmNvbGxlY3QoZSwgdGhpcy5zaSkpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFpyKFxuLyoqIE1hbmFnZXMgb3VyIGluLW1lbW9yeSBvciBkdXJhYmxlIHBlcnNpc3RlbmNlLiAqL1xudCwgZSwgbiwgcykge1xuICAgIHJldHVybiBuZXcgWHIodCwgZSwgbiwgcyk7XG59XG5cbi8qKlxuICogVGVsbHMgdGhlIExvY2FsU3RvcmUgdGhhdCB0aGUgY3VycmVudGx5IGF1dGhlbnRpY2F0ZWQgdXNlciBoYXMgY2hhbmdlZC5cbiAqXG4gKiBJbiByZXNwb25zZSB0aGUgbG9jYWwgc3RvcmUgc3dpdGNoZXMgdGhlIG11dGF0aW9uIHF1ZXVlIHRvIHRoZSBuZXcgdXNlciBhbmRcbiAqIHJldHVybnMgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzLlxuICovXG4vLyBQT1JUSU5HIE5PVEU6IEFuZHJvaWQgYW5kIGlPUyBvbmx5IHJldHVybiB0aGUgZG9jdW1lbnRzIGFmZmVjdGVkIGJ5IHRoZVxuLy8gY2hhbmdlLlxuYXN5bmMgZnVuY3Rpb24gdG8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIHJldHVybiBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiSGFuZGxlIHVzZXIgY2hhbmdlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4ge1xuICAgICAgICAvLyBTd2FwIG91dCB0aGUgbXV0YXRpb24gcXVldWUsIGdyYWJiaW5nIHRoZSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXNcbiAgICAgICAgLy8gYmVmb3JlIGFuZCBhZnRlci5cbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHJldHVybiBuLiRzLmdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KS5uZXh0KChpID0+IChzID0gaSwgbi51aShlKSwgbi4kcy5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gW10sIHIgPSBbXTtcbiAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cbiAgICAgICAgICAgIGxldCBvID0gem4oKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICByLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcbiAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWkucXModCwgbykubmV4dCgodCA9PiAoe1xuICAgICAgICAgICAgICAgIGNpOiB0LFxuICAgICAgICAgICAgICAgIHJlbW92ZWRCYXRjaElkczogaSxcbiAgICAgICAgICAgICAgICBhZGRlZEJhdGNoSWRzOiByXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSk7XG4gICAgfSkpO1xufVxuXG4vKiBBY2NlcHRzIGxvY2FsbHkgZ2VuZXJhdGVkIE11dGF0aW9ucyBhbmQgY29tbWl0IHRoZW0gdG8gc3RvcmFnZS4gKi9cbi8qKlxuICogQWNrbm93bGVkZ2VzIHRoZSBnaXZlbiBiYXRjaC5cbiAqXG4gKiBPbiB0aGUgaGFwcHkgcGF0aCB3aGVuIGEgYmF0Y2ggaXMgYWNrbm93bGVkZ2VkLCB0aGUgbG9jYWwgc3RvcmUgd2lsbFxuICpcbiAqICArIHJlbW92ZSB0aGUgYmF0Y2ggZnJvbSB0aGUgbXV0YXRpb24gcXVldWU7XG4gKiAgKyBhcHBseSB0aGUgY2hhbmdlcyB0byB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlO1xuICogICsgcmVjYWxjdWxhdGUgdGhlIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBpbXBsaWVkIGJ5IHRob3NlIGNoYW5nZXMgKHRoZXJlXG4gKiAgICBtYXkgYmUgbXV0YXRpb25zIGluIHRoZSBxdWV1ZSB0aGF0IGFmZmVjdCB0aGUgZG9jdW1lbnRzIGJ1dCBoYXZlbid0IGJlZW5cbiAqICAgIGFja25vd2xlZGdlZCB5ZXQpOyBhbmRcbiAqICArIGdpdmUgdGhlIGNoYW5nZWQgZG9jdW1lbnRzIGJhY2sgdGhlIHN5bmMgZW5naW5lXG4gKlxuICogQHJldHVybnMgVGhlIHJlc3VsdGluZyAobW9kaWZpZWQpIGRvY3VtZW50cy5cbiAqL1xuZnVuY3Rpb24gZW8odCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQWNrbm93bGVkZ2UgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHMgPSBlLmJhdGNoLmtleXMoKSwgaSA9IG4ub2kubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICAgICAgY29uc3QgaSA9IG4uYmF0Y2gsIHIgPSBpLmtleXMoKTtcbiAgICAgICAgICAgIGxldCBvID0gd2kucmVzb2x2ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgbyA9IG8ubmV4dCgoKCkgPT4gcy5nZXRFbnRyeShlLCB0KSkpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gbi5kb2NWZXJzaW9ucy5nZXQodCk7XG4gICAgICAgICAgICAgICAgICAgIFUobnVsbCAhPT0gciksIGUudmVyc2lvbi5jb21wYXJlVG8ocikgPCAwICYmIChpLmFwcGx5VG9SZW1vdGVEb2N1bWVudChlLCBuKSwgZS5pc1ZhbGlkRG9jdW1lbnQoKSAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFdlIHVzZSB0aGUgY29tbWl0VmVyc2lvbiBhcyB0aGUgcmVhZFRpbWUgcmF0aGVyIHRoYW4gdGhlXG4gICAgICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50J3MgdXBkYXRlVGltZSBzaW5jZSB0aGUgdXBkYXRlVGltZSBpcyBub3QgYWR2YW5jZWRcbiAgICAgICAgICAgICAgICAgICAgLy8gZm9yIHVwZGF0ZXMgdGhhdCBkbyBub3QgbW9kaWZ5IHRoZSB1bmRlcmx5aW5nIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICBlLnNldFJlYWRUaW1lKG4uY29tbWl0VmVyc2lvbiksIHMuYWRkRW50cnkoZSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIG8ubmV4dCgoKCkgPT4gdC4kcy5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiwgdCwgZSwgaSkubmV4dCgoKCkgPT4gaS5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4uJHMucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLmFpLnFzKHQsIHMpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgbXV0YXRpb25zIGZyb20gdGhlIE11dGF0aW9uUXVldWUgZm9yIHRoZSBzcGVjaWZpZWQgYmF0Y2g7XG4gKiBMb2NhbERvY3VtZW50cyB3aWxsIGJlIHJlY2FsY3VsYXRlZC5cbiAqXG4gKiBAcmV0dXJucyBUaGUgcmVzdWx0aW5nIG1vZGlmaWVkIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xuICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cbiAqL1xuZnVuY3Rpb24gbm8odCkge1xuICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLmxzLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkpKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxuICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXG4gKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovIGZ1bmN0aW9uIHNvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KSwgcyA9IGUuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5zaTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IG4ub2kubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLnNpO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgociwgdSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYSA9IGkuZ2V0KHUpO1xuICAgICAgICAgICAgaWYgKCFhKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4ubHMucmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIHIucmVtb3ZlZERvY3VtZW50cywgdSkubmV4dCgoKCkgPT4gbi5scy5hZGRNYXRjaGluZ0tleXModCwgci5hZGRlZERvY3VtZW50cywgdSkpKSk7XG4gICAgICAgICAgICBsZXQgYyA9IGEud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgIGUudGFyZ2V0TWlzbWF0Y2hlcy5oYXModSkgPyBjID0gYy53aXRoUmVzdW1lVG9rZW4ocHQuRU1QVFlfQllURV9TVFJJTkcsIGN0Lm1pbigpKS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihjdC5taW4oKSkgOiByLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKGMgPSBjLndpdGhSZXN1bWVUb2tlbihyLnJlc3VtZVRva2VuLCBzKSksIFxuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHUsIGMpLCBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFyZ2V0IGRhdGEgaWYgdGhlcmUgYXJlIHRhcmdldCBjaGFuZ2VzIChvciBpZlxuICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcbiAgICAgICAgICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAvLyBjbG9zaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxuICAgICAgICAgICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cbiAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cbiAgICAgICAgICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkZWREb2N1bWVudHMuc2l6ZSArIG4ubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIG4ucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChhLCBjLCByKSAmJiBvLnB1c2gobi5scy51cGRhdGVUYXJnZXREYXRhKHQsIGMpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgdSA9IHFuKCk7XG4gICAgICAgIC8vIEhBQ0s6IFRoZSBvbmx5IHJlYXNvbiB3ZSBhbGxvdyBhIG51bGwgc25hcHNob3QgdmVyc2lvbiBpcyBzbyB0aGF0IHdlXG4gICAgICAgIC8vIGNhbiBzeW50aGVzaXplIHJlbW90ZSBldmVudHMgd2hlbiB3ZSBnZXQgcGVybWlzc2lvbiBkZW5pZWQgZXJyb3JzIHdoaWxlXG4gICAgICAgIC8vIHRyeWluZyB0byByZXNvbHZlIHRoZSBzdGF0ZSBvZiBhIGxvY2FsbHkgY2FjaGVkIGRvY3VtZW50IHRoYXQgaXMgaW5cbiAgICAgICAgLy8gbGltYm8uXG4gICAgICAgIGlmIChlLmRvY3VtZW50VXBkYXRlcy5mb3JFYWNoKChzID0+IHtcbiAgICAgICAgICAgIGUucmVzb2x2ZWRMaW1ib0RvY3VtZW50cy5oYXMocykgJiYgby5wdXNoKG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUudXBkYXRlTGltYm9Eb2N1bWVudCh0LCBzKSk7XG4gICAgICAgIH0pKSwgXG4gICAgICAgIC8vIEVhY2ggbG9vcCBpdGVyYXRpb24gb25seSBhZmZlY3RzIGl0cyBcIm93blwiIGRvYywgc28gaXQncyBzYWZlIHRvIGdldCBhbGwgdGhlIHJlbW90ZVxuICAgICAgICAvLyBkb2N1bWVudHMgaW4gYWR2YW5jZSBpbiBhIHNpbmdsZSBjYWxsLlxuICAgICAgICBvLnB1c2goaW8odCwgciwgZS5kb2N1bWVudFVwZGF0ZXMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdSA9IHQ7XG4gICAgICAgIH0pKSksICFzLmlzRXF1YWwoY3QubWluKCkpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbi5scy5nZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpLm5leHQoKGUgPT4gbi5scy5zZXRUYXJnZXRzTWV0YWRhdGEodCwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIsIHMpKSk7XG4gICAgICAgICAgICBvLnB1c2goZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpLndhaXRGb3IobykubmV4dCgoKCkgPT4gci5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4uYWkuR3ModCwgdSkpKS5uZXh0KCgoKSA9PiB1KSk7XG4gICAgfSkpLnRoZW4oKHQgPT4gKG4uc2kgPSBpLCB0KSkpO1xufVxuXG4vKipcbiAqIFBvcHVsYXRlcyBkb2N1bWVudCBjaGFuZ2UgYnVmZmVyIHdpdGggZG9jdW1lbnRzIGZyb20gYmFja2VuZCBvciBhIGJ1bmRsZS5cbiAqIFJldHVybnMgdGhlIGRvY3VtZW50IGNoYW5nZXMgcmVzdWx0aW5nIGZyb20gYXBwbHlpbmcgdGhvc2UgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUcmFuc2FjdGlvbiB0byB1c2UgdG8gcmVhZCBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50QnVmZmVyIC0gRG9jdW1lbnQgYnVmZmVyIHRvIGNvbGxlY3QgdGhlIHJlc3VsdGVkIGNoYW5nZXMgdG8gYmVcbiAqICAgICAgICBhcHBsaWVkIHRvIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIGJlIGFwcGxpZWQuXG4gKiBAcGFyYW0gZ2xvYmFsVmVyc2lvbiAtIEEgYFNuYXBzaG90VmVyc2lvbmAgcmVwcmVzZW50aW5nIHRoZSByZWFkIHRpbWUgaWYgYWxsXG4gKiAgICAgICAgZG9jdW1lbnRzIGhhdmUgdGhlIHNhbWUgcmVhZCB0aW1lLlxuICogQHBhcmFtIGRvY3VtZW50VmVyc2lvbnMgLSBBIERvY3VtZW50S2V5LXRvLVNuYXBzaG90VmVyc2lvbiBtYXAgaWYgZG9jdW1lbnRzXG4gKiAgICAgICAgaGF2ZSB0aGVpciBvd24gcmVhZCB0aW1lLlxuICpcbiAqIE5vdGU6IHRoaXMgZnVuY3Rpb24gd2lsbCB1c2UgYGRvY3VtZW50VmVyc2lvbnNgIGlmIGl0IGlzIGRlZmluZWQ7XG4gKiB3aGVuIGl0IGlzIG5vdCBkZWZpbmVkLCByZXNvcnRzIHRvIGBnbG9iYWxWZXJzaW9uYC5cbiAqLyBmdW5jdGlvbiBpbyh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSB6bigpO1xuICAgIHJldHVybiBuLmZvckVhY2goKHQgPT4gcyA9IHMuYWRkKHQpKSksIGUuZ2V0RW50cmllcyh0LCBzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgbGV0IHMgPSBxbigpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCgobiwgaSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZ2V0KG4pO1xuICAgICAgICAgICAgLy8gTm90ZTogVGhlIG9yZGVyIG9mIHRoZSBzdGVwcyBiZWxvdyBpcyBpbXBvcnRhbnQsIHNpbmNlIHdlIHdhbnRcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHJlamVjdGVkIGxpbWJvIHJlc29sdXRpb25zICh3aGljaCBmYWJyaWNhdGVcbiAgICAgICAgICAgIC8vIE5vRG9jdW1lbnRzIHdpdGggU25hcHNob3RWZXJzaW9uLm1pbigpKSBuZXZlciBhZGQgZG9jdW1lbnRzIHRvXG4gICAgICAgICAgICAvLyBjYWNoZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGkuaXNOb0RvY3VtZW50KCkgJiYgaS52ZXJzaW9uLmlzRXF1YWwoY3QubWluKCkpID8gKFxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkgYXJlIHVzZWQgaW4gbWFudWZhY3R1cmVkXG4gICAgICAgICAgICAvLyBldmVudHMuIFdlIHJlbW92ZSB0aGVzZSBkb2N1bWVudHMgZnJvbSBjYWNoZSBzaW5jZSB3ZSBsb3N0XG4gICAgICAgICAgICAvLyBhY2Nlc3MuXG4gICAgICAgICAgICBlLnJlbW92ZUVudHJ5KG4sIGkucmVhZFRpbWUpLCBzID0gcy5pbnNlcnQobiwgaSkpIDogIXIuaXNWYWxpZERvY3VtZW50KCkgfHwgaS52ZXJzaW9uLmNvbXBhcmVUbyhyLnZlcnNpb24pID4gMCB8fCAwID09PSBpLnZlcnNpb24uY29tcGFyZVRvKHIudmVyc2lvbikgJiYgci5oYXNQZW5kaW5nV3JpdGVzID8gKGUuYWRkRW50cnkoaSksIFxuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KG4sIGkpKSA6IE8oXCJMb2NhbFN0b3JlXCIsIFwiSWdub3Jpbmcgb3V0ZGF0ZWQgd2F0Y2ggdXBkYXRlIGZvciBcIiwgbiwgXCIuIEN1cnJlbnQgdmVyc2lvbjpcIiwgci52ZXJzaW9uLCBcIiBXYXRjaCB2ZXJzaW9uOlwiLCBpLnZlcnNpb24pO1xuICAgICAgICB9KSksIHM7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIG11dGF0aW9uIGJhdGNoIGFmdGVyIHRoZSBwYXNzZWQgaW4gYmF0Y2hJZCBpbiB0aGUgbXV0YXRpb24gcXVldWVcbiAqIG9yIG51bGwgaWYgZW1wdHkuXG4gKiBAcGFyYW0gYWZ0ZXJCYXRjaElkIC0gSWYgcHJvdmlkZWQsIHRoZSBiYXRjaCB0byBzZWFyY2ggYWZ0ZXIuXG4gKiBAcmV0dXJucyBUaGUgbmV4dCBtdXRhdGlvbiBvciBudWxsIGlmIHRoZXJlIHdhc24ndCBvbmUuXG4gKi9cbmZ1bmN0aW9uIHJvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXh0IG11dGF0aW9uIGJhdGNoXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gKHZvaWQgMCA9PT0gZSAmJiAoZSA9IC0xKSwgXG4gICAgbi4kcy5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIERvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgb3IgbnVsbCBpZiBub3RcbiAqIGZvdW5kIC0gdXNlZCBmb3IgdGVzdGluZy5cbiAqL1xuLyoqXG4gKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXG4gKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXG4gKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxuICpcbiAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxuICogZm9yIHRoYXQgYFRhcmdldGAuXG4gKi9cbmZ1bmN0aW9uIG9vKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gbi5scy5nZXRUYXJnZXREYXRhKHQsIGUpLm5leHQoKGkgPT4gaSA/IChcbiAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXG4gICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxuICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xuICAgICAgICBzID0gaSwgd2kucmVzb2x2ZShzKSkgOiBuLmxzLmFsbG9jYXRlVGFyZ2V0SWQodCkubmV4dCgoaSA9PiAocyA9IG5ldyBEaShlLCBpLCAwIC8qIExpc3RlbiAqLyAsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgXG4gICAgICAgIG4ubHMuYWRkVGFyZ2V0RGF0YSh0LCBzKS5uZXh0KCgoKSA9PiBzKSkpKSkpKTtcbiAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgIC8vIElmIE11bHRpLVRhYiBpcyBlbmFibGVkLCB0aGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgbWF5IGJlIG5ld2VyIHRoYW5cbiAgICAgICAgLy8gdGhlIGluLW1lbW9yeSBkYXRhXG4gICAgICAgIGNvbnN0IHMgPSBuLnNpLmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcmV0dXJuIChudWxsID09PSBzIHx8IHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhzLnNuYXBzaG90VmVyc2lvbikgPiAwKSAmJiAobi5zaSA9IG4uc2kuaW5zZXJ0KHQudGFyZ2V0SWQsIHQpLCBcbiAgICAgICAgbi5paS5zZXQoZSwgdC50YXJnZXRJZCkpLCB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XG4gKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuLyoqXG4gKiBVbnBpbnMgYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXG4gKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxuICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXG4gKlxuICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIHVvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gRyh0KSwgaSA9IHMuc2kuZ2V0KGUpLCByID0gbiA/IFwicmVhZHdyaXRlXCIgOiBcInJlYWR3cml0ZS1wcmltYXJ5XCI7XG4gICAgdHJ5IHtcbiAgICAgICAgbiB8fCBhd2FpdCBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVsZWFzZSB0YXJnZXRcIiwgciwgKHQgPT4gcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQodCwgaSkpKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGlmICghSWkodCkpIHRocm93IHQ7XG4gICAgICAgIC8vIEFsbCBgcmVsZWFzZVRhcmdldGAgZG9lcyBpcyByZWNvcmQgdGhlIGZpbmFsIG1ldGFkYXRhIHN0YXRlIGZvciB0aGVcbiAgICAgICAgLy8gdGFyZ2V0LCBidXQgd2UndmUgYmVlbiByZWNvcmRpbmcgdGhpcyBwZXJpb2RpY2FsbHkgZHVyaW5nIHRhcmdldFxuICAgICAgICAvLyBhY3Rpdml0eS4gSWYgd2UgbG9zZSB0aGlzIHdyaXRlIHRoaXMgY291bGQgY2F1c2UgYSB2ZXJ5IHNsaWdodFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSBvcmRlciBvZiB0YXJnZXQgZGVsZXRpb24gZHVyaW5nIEdDLCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3QgZGVmaW5lIGV4YWN0IExSVSBzZW1hbnRpY3Mgc28gdGhpcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgICBPKFwiTG9jYWxTdG9yZVwiLCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHtlfTogJHt0fWApO1xuICAgIH1cbiAgICBzLnNpID0gcy5zaS5yZW1vdmUoZSksIHMuaWkuZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gYW8odCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBHKHQpO1xuICAgIGxldCBpID0gY3QubWluKCksIHIgPSB6bigpO1xuICAgIHJldHVybiBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRXhlY3V0ZSBxdWVyeVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEcodCksIGkgPSBzLmlpLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gaSA/IHdpLnJlc29sdmUocy5zaS5nZXQoaSkpIDogcy5scy5nZXRUYXJnZXREYXRhKGUsIG4pO1xuICAgIH0ocywgdCwgTGUoZSkpLm5leHQoKGUgPT4ge1xuICAgICAgICBpZiAoZSkgcmV0dXJuIGkgPSBlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHMubHMuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICByID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBzLm5pLktzKHQsIGUsIG4gPyBpIDogY3QubWluKCksIG4gPyByIDogem4oKSkpKS5uZXh0KCh0ID0+IChsbyhzLCBqZShlKSwgdCksIFxuICAgIHtcbiAgICAgICAgZG9jdW1lbnRzOiB0LFxuICAgICAgICBoaTogclxuICAgIH0pKSkpKTtcbn1cblxuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIGNvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KSwgcyA9IEcobi5scyksIGkgPSBuLnNpLmdldChlKTtcbiAgICByZXR1cm4gaSA/IFByb21pc2UucmVzb2x2ZShpLnRhcmdldCkgOiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IHRhcmdldCBkYXRhXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gcy5FdCh0LCBlKS5uZXh0KCh0ID0+IHQgPyB0LnRhcmdldCA6IG51bGwpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBzaW5jZSB0aGUgbGFzdCBjYWxsLlxuICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgY2FsbCwgcmV0dXJucyB0aGUgc2V0IG9mIGNoYW5nZXMgc2luY2UgY2xpZW50XG4gKiBpbml0aWFsaXphdGlvbi4gRnVydGhlciBpbnZvY2F0aW9ucyB3aWxsIHJldHVybiBkb2N1bWVudCB0aGF0IGhhdmUgY2hhbmdlZFxuICogc2luY2UgdGhlIHByaW9yIGNhbGwuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBobyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCksIHMgPSBuLnJpLmdldChlKSB8fCBjdC5taW4oKTtcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgbWF4aW11bSByZWFkIHRpbWUgZm9yIHRoZSBjb2xsZWN0aW9uLiBUaGlzIHNob3VsZCBhbHdheXNcbiAgICAvLyBleGlzdCwgYnV0IHRvIHJlZHVjZSB0aGUgY2hhbmNlIGZvciByZWdyZXNzaW9ucyB3ZSBkZWZhdWx0IHRvXG4gICAgLy8gU25hcHNob3RWZXJzaW9uLk1pbigpXG4gICAgLy8gVE9ETyhpbmRleGluZyk6IENvbnNpZGVyIHJlbW92aW5nIHRoZSBkZWZhdWx0IHZhbHVlLlxuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkdldCBuZXcgZG9jdW1lbnQgY2hhbmdlc1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IG4ub2kuZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBvZShzLCAtMSksIFxuICAgIC8qIGxpbWl0PSAqLyBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUikpKS50aGVuKCh0ID0+IChsbyhuLCBlLCB0KSwgdCkpKTtcbn1cblxuLyoqIFNldHMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAncyBtYXhpbXVtIHJlYWQgdGltZSBmcm9tIHRoZSBnaXZlbiBkb2N1bWVudHMuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gbG8odCwgZSwgbikge1xuICAgIGxldCBzID0gY3QubWluKCk7XG4gICAgbi5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICBlLnJlYWRUaW1lLmNvbXBhcmVUbyhzKSA+IDAgJiYgKHMgPSBlLnJlYWRUaW1lKTtcbiAgICB9KSksIHQucmkuc2V0KGUsIHMpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IHVzaW5nIHRoZSBnaXZlbiBidW5kbGUgbmFtZSwgd2hpY2ggd2lsbCBiZSB1c2VkIHRvXG4gKiBob2xkIHRoZSBrZXlzIG9mIGFsbCBkb2N1bWVudHMgZnJvbSB0aGUgYnVuZGxlIGluIHF1ZXJ5LWRvY3VtZW50IG1hcHBpbmdzLlxuICogVGhpcyBlbnN1cmVzIHRoYXQgdGhlIGxvYWRlZCBkb2N1bWVudHMgZG8gbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZFxuICogcmlnaHQgYXdheS5cbiAqL1xuLyoqXG4gKiBBcHBsaWVzIHRoZSBkb2N1bWVudHMgZnJvbSBhIGJ1bmRsZSB0byB0aGUgXCJncm91bmQtc3RhdGVcIiAocmVtb3RlKVxuICogZG9jdW1lbnRzLlxuICpcbiAqIExvY2FsRG9jdW1lbnRzIGFyZSByZS1jYWxjdWxhdGVkIGlmIHRoZXJlIGFyZSByZW1haW5pbmcgbXV0YXRpb25zIGluIHRoZVxuICogcXVldWUuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZvKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gRyh0KTtcbiAgICBsZXQgciA9IHpuKCksIG8gPSBxbigpO1xuICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmxpKHQubWV0YWRhdGEubmFtZSk7XG4gICAgICAgIHQuZG9jdW1lbnQgJiYgKHIgPSByLmFkZChuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBlLmZpKHQpO1xuICAgICAgICBzLnNldFJlYWRUaW1lKGUuZGkodC5tZXRhZGF0YS5yZWFkVGltZSkpLCBvID0gby5pbnNlcnQobiwgcyk7XG4gICAgfVxuICAgIGNvbnN0IHUgPSBpLm9pLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgfSksIGEgPSBhd2FpdCBvbyhpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIC8vIEl0IGlzIE9LIHRoYXQgdGhlIHBhdGggdXNlZCBmb3IgdGhlIHF1ZXJ5IGlzIG5vdCB2YWxpZCwgYmVjYXVzZSB0aGlzIHdpbGxcbiAgICAgICAgLy8gbm90IGJlIHJlYWQgYW5kIHF1ZXJpZWQuXG4gICAgICAgIHJldHVybiBMZShOZShfdC5mcm9tU3RyaW5nKGBfX2J1bmRsZV9fL2RvY3MvJHt0fWApKSk7XG4gICAgfShzKSk7XG4gICAgLy8gQWxsb2NhdGVzIGEgdGFyZ2V0IHRvIGhvbGQgYWxsIGRvY3VtZW50IGtleXMgZnJvbSB0aGUgYnVuZGxlLCBzdWNoIHRoYXRcbiAgICAvLyB0aGV5IHdpbGwgbm90IGdldCBnYXJiYWdlIGNvbGxlY3RlZCByaWdodCBhd2F5LlxuICAgICAgICByZXR1cm4gaS5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IGJ1bmRsZSBkb2N1bWVudHNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gaW8odCwgdSwgbykubmV4dCgoZSA9PiAodS5hcHBseSh0KSwgXG4gICAgZSkpKS5uZXh0KChlID0+IGkubHMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgYS50YXJnZXRJZCkubmV4dCgoKCkgPT4gaS5scy5hZGRNYXRjaGluZ0tleXModCwgciwgYS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLmFpLkdzKHQsIGUpKSkubmV4dCgoKCkgPT4gZSkpKSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGJvb2xlYW4gdG8gaW5kaWNhdGUgaWYgdGhlIGdpdmVuIGJ1bmRsZSBoYXMgYWxyZWFkeVxuICogYmVlbiBsb2FkZWQgYW5kIHRoZSBjcmVhdGUgdGltZSBpcyBuZXdlciB0aGFuIHRoZSBjdXJyZW50IGxvYWRpbmcgYnVuZGxlLlxuICovXG4vKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgTmFtZWRRdWVyeWAgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIF9vKHQsIGUsIG4gPSB6bigpKSB7XG4gICAgLy8gQWxsb2NhdGUgYSB0YXJnZXQgZm9yIHRoZSBuYW1lZCBxdWVyeSBzdWNoIHRoYXQgaXQgY2FuIGJlIHJlc3VtZWRcbiAgICAvLyBmcm9tIGFzc29jaWF0ZWQgcmVhZCB0aW1lIGlmIHVzZXJzIHVzZSBpdCB0byBsaXN0ZW4uXG4gICAgLy8gTk9URTogdGhpcyBhbHNvIG1lYW5zIGlmIG5vIGNvcnJlc3BvbmRpbmcgdGFyZ2V0IGV4aXN0cywgdGhlIG5ldyB0YXJnZXRcbiAgICAvLyB3aWxsIHJlbWFpbiBhY3RpdmUgYW5kIHdpbGwgbm90IGdldCBjb2xsZWN0ZWQsIHVubGVzcyB1c2VycyBoYXBwZW4gdG9cbiAgICAvLyB1bmxpc3RlbiB0aGUgcXVlcnkgc29tZWhvdy5cbiAgICBjb25zdCBzID0gYXdhaXQgb28odCwgTGUoTGkoZS5idW5kbGVkUXVlcnkpKSksIGkgPSBHKHQpO1xuICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBuYW1lZCBxdWVyeVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGNvbnN0IHIgPSBmcyhlLnJlYWRUaW1lKTtcbiAgICAgICAgLy8gU2ltcGx5IHNhdmUgdGhlIHF1ZXJ5IGl0c2VsZiBpZiBpdCBpcyBvbGRlciB0aGFuIHdoYXQgdGhlIFNESyBhbHJlYWR5XG4gICAgICAgIC8vIGhhcy5cbiAgICAgICAgICAgICAgICBpZiAocy5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHIpID49IDApIHJldHVybiBpLmRzLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpO1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgYmVjYXVzZSB0aGUgcXVlcnkgZnJvbSB0aGUgYnVuZGxlIGlzIG5ld2VyLlxuICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBzLndpdGhSZXN1bWVUb2tlbihwdC5FTVBUWV9CWVRFX1NUUklORywgcik7XG4gICAgICAgIHJldHVybiBpLnNpID0gaS5zaS5pbnNlcnQoby50YXJnZXRJZCwgbyksIGkubHMudXBkYXRlVGFyZ2V0RGF0YSh0LCBvKS5uZXh0KCgoKSA9PiBpLmxzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIHMudGFyZ2V0SWQpKSkubmV4dCgoKCkgPT4gaS5scy5hZGRNYXRjaGluZ0tleXModCwgbiwgcy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLmRzLnNhdmVOYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB3byB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLk0gPSB0LCB0aGlzLl9pID0gbmV3IE1hcCwgdGhpcy53aSA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldEJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy5faS5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICAvKiogRGVjb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHByb3RvIGludG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgIHZhciBuO1xuICAgICAgICByZXR1cm4gdGhpcy5faS5zZXQoZS5pZCwge1xuICAgICAgICAgICAgaWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICB2ZXJzaW9uOiBuLnZlcnNpb24sXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBmcyhuLmNyZWF0ZVRpbWUpXG4gICAgICAgIH0pLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLndpLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2kuc2V0KGUubmFtZSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IExpKHQuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogZnModC5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUuXG4gKi8gY2xhc3MgbW8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcCBzb3J0ZWQgYnkgRG9jdW1lbnRLZXksIHdob3NlIHZhbHVlIGlzIGEgcGFpciBvZiB0aGUgbGFyZ2VzdCBiYXRjaCBpZFxuICAgICAgICAvLyBmb3IgdGhlIG92ZXJsYXkgYW5kIHRoZSBvdmVybGF5IGl0c2VsZi5cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IG5ldyBNbih4dC5jb21wYXJhdG9yKSwgdGhpcy5taSA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldE92ZXJsYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLm92ZXJsYXlzLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVPdmVybGF5cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlh0KHQsIGUsIHMpO1xuICAgICAgICB9KSksIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMubWkuZ2V0KG4pO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBzICYmIChzLmZvckVhY2goKHQgPT4gdGhpcy5vdmVybGF5cyA9IHRoaXMub3ZlcmxheXMucmVtb3ZlKHQpKSksIFxuICAgICAgICB0aGlzLm1pLmRlbGV0ZShuKSksIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFFuKCksIGkgPSBlLmxlbmd0aCArIDEsIHIgPSBuZXcgeHQoZS5jaGlsZChcIlwiKSksIG8gPSB0aGlzLm92ZXJsYXlzLmdldEl0ZXJhdG9yRnJvbShyKTtcbiAgICAgICAgZm9yICg7by5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG8uZ2V0TmV4dCgpLnZhbHVlLCByID0gdC5nZXRLZXkoKTtcbiAgICAgICAgICAgIGlmICghZS5pc1ByZWZpeE9mKHIucGF0aCkpIGJyZWFrO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnRzIGZyb20gc3ViLWNvbGxlY3Rpb25zXG4gICAgICAgICAgICAgICAgICAgICAgICByLnBhdGgubGVuZ3RoID09PSBpICYmICh0Lmxhcmdlc3RCYXRjaElkID4gbiAmJiBzLnNldCh0LmdldEtleSgpLCB0KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUocyk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBuZXcgTW4oKCh0LCBlKSA9PiB0IC0gZSkpO1xuICAgICAgICBjb25zdCByID0gdGhpcy5vdmVybGF5cy5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDtyLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gci5nZXROZXh0KCkudmFsdWU7XG4gICAgICAgICAgICBpZiAodC5nZXRLZXkoKS5nZXRDb2xsZWN0aW9uR3JvdXAoKSA9PT0gZSAmJiB0Lmxhcmdlc3RCYXRjaElkID4gbikge1xuICAgICAgICAgICAgICAgIGxldCBlID0gaS5nZXQodC5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gZSAmJiAoZSA9IFFuKCksIGkgPSBpLmluc2VydCh0Lmxhcmdlc3RCYXRjaElkLCBlKSksIGUuc2V0KHQuZ2V0S2V5KCksIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSBRbigpLCB1ID0gaS5nZXRJdGVyYXRvcigpO1xuICAgICAgICBmb3IgKDt1Lmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBpZiAodS5nZXROZXh0KCkudmFsdWUuZm9yRWFjaCgoKHQsIGUpID0+IG8uc2V0KHQsIGUpKSksIG8uc2l6ZSgpID49IHMpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKG8pO1xuICAgIH1cbiAgICBYdCh0LCBlLCBuKSB7XG4gICAgICAgIGlmIChudWxsID09PSBuKSByZXR1cm47XG4gICAgICAgIC8vIFJlbW92ZSB0aGUgYXNzb2NpYXRpb24gb2YgdGhlIG92ZXJsYXkgdG8gaXRzIGJhdGNoIGlkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLm92ZXJsYXlzLmdldChuLmtleSk7XG4gICAgICAgIGlmIChudWxsICE9PSBzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5taS5nZXQocy5sYXJnZXN0QmF0Y2hJZCkuZGVsZXRlKG4ua2V5KTtcbiAgICAgICAgICAgIHRoaXMubWkuc2V0KHMubGFyZ2VzdEJhdGNoSWQsIHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLmluc2VydChuLmtleSwgbmV3IFNpKGUsIG4pKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGlzIG92ZXJsYXkgdG8gdGhlIGdpdmVuIGxhcmdlc3RCYXRjaElkLlxuICAgICAgICBsZXQgaSA9IHRoaXMubWkuZ2V0KGUpO1xuICAgICAgICB2b2lkIDAgPT09IGkgJiYgKGkgPSB6bigpLCB0aGlzLm1pLnNldChlLCBpKSksIHRoaXMubWkuc2V0KGUsIGkuYWRkKG4ua2V5KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxuICogKGVpdGhlciBhIHRhcmdldCBJRCBvciBiYXRjaCBJRCkuIEFzIHJlZmVyZW5jZXMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxuICogdGhlIHNldCBjb3JyZXNwb25kaW5nIGV2ZW50cyBhcmUgZW1pdHRlZCB0byBhIHJlZ2lzdGVyZWQgZ2FyYmFnZSBjb2xsZWN0b3IuXG4gKlxuICogRWFjaCByZWZlcmVuY2UgaXMgcmVwcmVzZW50ZWQgYnkgYSBEb2N1bWVudFJlZmVyZW5jZSBvYmplY3QuIEVhY2ggb2YgdGhlbVxuICogY29udGFpbnMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSByZWZlcmVuY2UuIFRoZXkgYXJlIGFsbFxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxuICogdGhlcmUncyBubyByZWZlcmVuY2VzIGluIHRoYXQgc2V0ICh0aGlzIGNhbiBiZSBlZmZpY2llbnRseSBjaGVja2VkIHRoYW5rcyB0b1xuICogc29ydGluZyBieSBrZXkpLlxuICpcbiAqIFJlZmVyZW5jZVNldCBhbHNvIGtlZXBzIGEgc2Vjb25kYXJ5IHNldCB0aGF0IGNvbnRhaW5zIHJlZmVyZW5jZXMgc29ydGVkIGJ5XG4gKiBJRHMuIFRoaXMgb25lIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgaW1wbGVtZW50IHJlbW92YWwgb2YgYWxsIHJlZmVyZW5jZXMgYnlcbiAqIHNvbWUgdGFyZ2V0IElELlxuICovIGNsYXNzIGdvIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXG4gICAgICAgIHRoaXMuZ2kgPSBuZXcgJG4oeW8ueWkpLCBcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXG4gICAgICAgIHRoaXMucGkgPSBuZXcgJG4oeW8uSWkpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdpLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBhZGRSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IHlvKHQsIGUpO1xuICAgICAgICB0aGlzLmdpID0gdGhpcy5naS5hZGQobiksIHRoaXMucGkgPSB0aGlzLnBpLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIFRpKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMuYWRkUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuRWkobmV3IHlvKHQsIGUpKTtcbiAgICB9XG4gICAgQWkodCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy5yZW1vdmVSZWZlcmVuY2UodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCByZWZlcmVuY2VzIHdpdGggYSBnaXZlbiBJRC4gQ2FsbHMgcmVtb3ZlUmVmKCkgZm9yIGVhY2gga2V5XG4gICAgICogcmVtb3ZlZC5cbiAgICAgKi8gICAgUmkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IHh0KG5ldyBfdChbXSkpLCBuID0gbmV3IHlvKGUsIHQpLCBzID0gbmV3IHlvKGUsIHQgKyAxKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5waS5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5FaSh0KSwgaS5wdXNoKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBiaSgpIHtcbiAgICAgICAgdGhpcy5naS5mb3JFYWNoKCh0ID0+IHRoaXMuRWkodCkpKTtcbiAgICB9XG4gICAgRWkodCkge1xuICAgICAgICB0aGlzLmdpID0gdGhpcy5naS5kZWxldGUodCksIHRoaXMucGkgPSB0aGlzLnBpLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgUGkodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IHh0KG5ldyBfdChbXSkpLCBuID0gbmV3IHlvKGUsIHQpLCBzID0gbmV3IHlvKGUsIHQgKyAxKTtcbiAgICAgICAgbGV0IGkgPSB6bigpO1xuICAgICAgICByZXR1cm4gdGhpcy5waS5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgeW8odCwgMCksIG4gPSB0aGlzLmdpLmZpcnN0QWZ0ZXJPckVxdWFsKGUpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiB0LmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgeW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLlZpID0gZTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi8gICAgc3RhdGljIHlpKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSB8fCBydCh0LlZpLCBlLlZpKTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi8gICAgc3RhdGljIElpKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHJ0KHQuVmksIGUuVmkpIHx8IHh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIHBvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy4kcyA9IFtdLCBcbiAgICAgICAgLyoqIE5leHQgdmFsdWUgdG8gdXNlIHdoZW4gYXNzaWduaW5nIHNlcXVlbnRpYWwgSURzIHRvIGVhY2ggbXV0YXRpb24gYmF0Y2guICovXG4gICAgICAgIHRoaXMudmkgPSAxLCBcbiAgICAgICAgLyoqIEFuIG9yZGVyZWQgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIG11dGF0aW9ucyBiYXRjaCBJRHMuICovXG4gICAgICAgIHRoaXMuU2kgPSBuZXcgJG4oeW8ueWkpO1xuICAgIH1cbiAgICBjaGVja0VtcHR5KHQpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoMCA9PT0gdGhpcy4kcy5sZW5ndGgpO1xuICAgIH1cbiAgICBhZGRNdXRhdGlvbkJhdGNoKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmk7XG4gICAgICAgIHRoaXMudmkrKywgdGhpcy4kcy5sZW5ndGggPiAwICYmIHRoaXMuJHNbdGhpcy4kcy5sZW5ndGggLSAxXTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBWaShpLCBlLCBuLCBzKTtcbiAgICAgICAgdGhpcy4kcy5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy5TaSA9IHRoaXMuU2kuYWRkKG5ldyB5byhlLmtleSwgaSkpLCB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlLmtleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHIpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy5EaShlKSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gdGhpcy5DaShuKSwgaSA9IHMgPCAwID8gMCA6IHM7XG4gICAgICAgIC8vIFRoZSByZXF1ZXN0ZWQgYmF0Y2hJZCBtYXkgc3RpbGwgYmUgb3V0IG9mIHJhbmdlIHNvIG5vcm1hbGl6ZSBpdCB0byB0aGVcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMuJHMubGVuZ3RoID4gaSA/IHRoaXMuJHNbaV0gOiBudWxsKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCgpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUoMCA9PT0gdGhpcy4kcy5sZW5ndGggPyAtMSA6IHRoaXMudmkgLSAxKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy4kcy5zbGljZSgpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IHlvKGUsIDApLCBzID0gbmV3IHlvKGUsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSksIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuU2kuZm9yRWFjaEluUmFuZ2UoWyBuLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLkRpKHQuVmkpO1xuICAgICAgICAgICAgaS5wdXNoKGUpO1xuICAgICAgICB9KSksIHdpLnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3ICRuKHJ0KTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IHlvKHQsIDApLCBzID0gbmV3IHlvKHQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7XG4gICAgICAgICAgICB0aGlzLlNpLmZvckVhY2hJblJhbmdlKFsgZSwgcyBdLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHQuVmkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSksIHdpLnJlc29sdmUodGhpcy54aShuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgLy8gVXNlIHRoZSBxdWVyeSBwYXRoIGFzIGEgcHJlZml4IGZvciB0ZXN0aW5nIGlmIGEgZG9jdW1lbnQgbWF0Y2hlcyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgIGNvbnN0IG4gPSBlLnBhdGgsIHMgPSBuLmxlbmd0aCArIDE7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhIGRvY3VtZW50IHJlZmVyZW5jZSBmb3IgYWN0dWFsbHkgc2Nhbm5pbmcgdGhlIGluZGV4LiBVbmxpa2VcbiAgICAgICAgLy8gdGhlIHByZWZpeCB0aGUgZG9jdW1lbnQga2V5IGluIHRoaXMgcmVmZXJlbmNlIG11c3QgaGF2ZSBhbiBldmVuIG51bWJlciBvZlxuICAgICAgICAvLyBzZWdtZW50cy4gVGhlIGVtcHR5IHNlZ21lbnQgY2FuIGJlIHVzZWQgYSBzdWZmaXggb2YgdGhlIHF1ZXJ5IHBhdGhcbiAgICAgICAgLy8gYmVjYXVzZSBpdCBwcmVjZWRlcyBhbGwgb3RoZXIgc2VnbWVudHMgaW4gYW4gb3JkZXJlZCB0cmF2ZXJzYWwuXG4gICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgeHQuaXNEb2N1bWVudEtleShpKSB8fCAoaSA9IGkuY2hpbGQoXCJcIikpO1xuICAgICAgICBjb25zdCByID0gbmV3IHlvKG5ldyB4dChpKSwgMCk7XG4gICAgICAgIC8vIEZpbmQgdW5pcXVlIGJhdGNoSURzIHJlZmVyZW5jZWQgYnkgYWxsIGRvY3VtZW50cyBwb3RlbnRpYWxseSBtYXRjaGluZyB0aGVcbiAgICAgICAgLy8gcXVlcnkuXG4gICAgICAgICAgICAgICAgbGV0IG8gPSBuZXcgJG4ocnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5TaS5mb3JFYWNoV2hpbGUoKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQua2V5LnBhdGg7XG4gICAgICAgICAgICByZXR1cm4gISFuLmlzUHJlZml4T2YoZSkgJiYgKFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZSBxdWVyeVxuICAgICAgICAgICAgLy8gcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnIGNhbid0IG1hdGNoXG4gICAgICAgICAgICAvLyB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIGUubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQodC5WaSkpLCAhMCk7XG4gICAgICAgIH0pLCByKSwgd2kucmVzb2x2ZSh0aGlzLnhpKG8pKTtcbiAgICB9XG4gICAgeGkodCkge1xuICAgICAgICAvLyBDb25zdHJ1Y3QgYW4gYXJyYXkgb2YgbWF0Y2hpbmcgYmF0Y2hlcywgc29ydGVkIGJ5IGJhdGNoSUQgdG8gZW5zdXJlIHRoYXRcbiAgICAgICAgLy8gbXVsdGlwbGUgbXV0YXRpb25zIGFmZmVjdGluZyB0aGUgc2FtZSBkb2N1bWVudCBrZXkgYXJlIGFwcGxpZWQgaW4gb3JkZXIuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5EaSh0KTtcbiAgICAgICAgICAgIG51bGwgIT09IG4gJiYgZS5wdXNoKG4pO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICBVKDAgPT09IHRoaXMuTmkoZS5iYXRjaElkLCBcInJlbW92ZWRcIikpLCB0aGlzLiRzLnNoaWZ0KCk7XG4gICAgICAgIGxldCBuID0gdGhpcy5TaTtcbiAgICAgICAgcmV0dXJuIHdpLmZvckVhY2goZS5tdXRhdGlvbnMsIChzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgeW8ocy5rZXksIGUuYmF0Y2hJZCk7XG4gICAgICAgICAgICByZXR1cm4gbiA9IG4uZGVsZXRlKGkpLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIHMua2V5KTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuU2kgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRuKHQpIHtcbiAgICAgICAgLy8gTm8tb3Agc2luY2UgdGhlIG1lbW9yeSBtdXRhdGlvbiBxdWV1ZSBkb2VzIG5vdCBtYWludGFpbiBhIHNlcGFyYXRlIGNhY2hlLlxuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgeW8oZSwgMCksIHMgPSB0aGlzLlNpLmZpcnN0QWZ0ZXJPckVxdWFsKG4pO1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShlLmlzRXF1YWwocyAmJiBzLmtleSkpO1xuICAgIH1cbiAgICBwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRzLmxlbmd0aCwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cbiAgICAgKi8gICAgTmkodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5DaSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cbiAgICAgKiBpcyBPKDEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cbiAgICAgKi8gICAgQ2kodCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy4kcy5sZW5ndGgpIFxuICAgICAgICAvLyBBcyBhbiBpbmRleCB0aGlzIGlzIHBhc3QgdGhlIGVuZCBvZiB0aGUgcXVldWVcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIC8vIEV4YW1pbmUgdGhlIGZyb250IG9mIHRoZSBxdWV1ZSB0byBmaWd1cmUgb3V0IHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdGhlXG4gICAgICAgIC8vIGJhdGNoSWQgYW5kIGluZGV4ZXMgaW4gdGhlIGFycmF5LiBOb3RlIHRoYXQgc2luY2UgdGhlIHF1ZXVlIGlzIG9yZGVyZWRcbiAgICAgICAgLy8gYnkgYmF0Y2hJZCwgaWYgdGhlIGZpcnN0IGJhdGNoIGhhcyBhIGxhcmdlciBiYXRjaElkIHRoZW4gdGhlIHJlcXVlc3RlZFxuICAgICAgICAvLyBiYXRjaElkIGRvZXNuJ3QgZXhpc3QgaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB0IC0gdGhpcy4kc1swXS5iYXRjaElkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHZlcnNpb24gb2YgbG9va3VwTXV0YXRpb25CYXRjaCB0aGF0IGRvZXNuJ3QgcmV0dXJuIGEgcHJvbWlzZSwgdGhpcyBtYWtlc1xuICAgICAqIG90aGVyIGZ1bmN0aW9ucyB0aGF0IHVzZXMgdGhpcyBjb2RlIGVhc2llciB0byByZWFkIGFuZCBtb3JlIGVmZmljZW50LlxuICAgICAqLyAgICBEaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkNpKHQpO1xuICAgICAgICBpZiAoZSA8IDAgfHwgZSA+PSB0aGlzLiRzLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLiRzW2VdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUgZm9yIEluZGV4ZWREYi4gVG8gY29uc3RydWN0LCBpbnZva2VcbiAqIGBuZXdNZW1vcnlSZW1vdGVEb2N1bWVudENhY2hlKClgLlxuICovXG5jbGFzcyBJbyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gICAgICogZXhwZWN0ZWQgdG8ganVzdCByZXR1cm4gMCB0byBhdm9pZCB1bm5lY2Vzc2FyaWx5IGRvaW5nIHRoZSB3b3JrIG9mXG4gICAgICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtpID0gdCwgXG4gICAgICAgIC8qKiBVbmRlcmx5aW5nIGNhY2hlIG9mIGRvY3VtZW50cyBhbmQgdGhlaXIgcmVhZCB0aW1lcy4gKi9cbiAgICAgICAgdGhpcy5kb2NzID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqIFNpemUgb2YgYWxsIGNhY2hlZCBkb2N1bWVudHMuICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIHNldEluZGV4TWFuYWdlcih0KSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgc3VwcGxpZWQgZW50cnkgdG8gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUua2V5LCBzID0gdGhpcy5kb2NzLmdldChuKSwgaSA9IHMgPyBzLnNpemUgOiAwLCByID0gdGhpcy5raShlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5pbnNlcnQobiwge1xuICAgICAgICAgICAgZG9jdW1lbnQ6IGUubXV0YWJsZUNvcHkoKSxcbiAgICAgICAgICAgIHNpemU6IHJcbiAgICAgICAgfSksIHRoaXMuc2l6ZSArPSByIC0gaSwgdGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgbi5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBlbnRyeSBmcm9tIHRoZSBjYWNoZSBhbmQgdXBkYXRlcyB0aGUgY2FjaGUgc2l6ZSBhcyBhcHByb3ByaWF0ZS5cbiAgICAgKlxuICAgICAqIEFsbCBjYWxscyBvZiBgcmVtb3ZlRW50cnlgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jcy5nZXQodCk7XG4gICAgICAgIGUgJiYgKHRoaXMuZG9jcyA9IHRoaXMuZG9jcy5yZW1vdmUodCksIHRoaXMuc2l6ZSAtPSBlLnNpemUpO1xuICAgIH1cbiAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLmRvY3MuZ2V0KGUpO1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShuID8gbi5kb2N1bWVudC5tdXRhYmxlQ29weSgpIDogdGUubmV3SW52YWxpZERvY3VtZW50KGUpKTtcbiAgICB9XG4gICAgZ2V0RW50cmllcyh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gcW4oKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LCBlID8gZS5kb2N1bWVudC5tdXRhYmxlQ29weSgpIDogdGUubmV3SW52YWxpZERvY3VtZW50KHQpKTtcbiAgICAgICAgfSkpLCB3aS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBnZXRBbGxGcm9tQ29sbGVjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGxldCBzID0gcW4oKTtcbiAgICAgICAgLy8gRG9jdW1lbnRzIGFyZSBvcmRlcmVkIGJ5IGtleSwgc28gd2UgY2FuIHVzZSBhIHByZWZpeCBzY2FuIHRvIG5hcnJvdyBkb3duXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudHMgd2UgbmVlZCB0byBtYXRjaCB0aGUgcXVlcnkgYWdhaW5zdC5cbiAgICAgICAgICAgICAgICBjb25zdCBpID0gbmV3IHh0KGUuY2hpbGQoXCJcIikpLCByID0gdGhpcy5kb2NzLmdldEl0ZXJhdG9yRnJvbShpKTtcbiAgICAgICAgZm9yICg7ci5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3Qge2tleTogdCwgdmFsdWU6IHtkb2N1bWVudDogaX19ID0gci5nZXROZXh0KCk7XG4gICAgICAgICAgICBpZiAoIWUuaXNQcmVmaXhPZih0LnBhdGgpKSBicmVhaztcbiAgICAgICAgICAgIHQucGF0aC5sZW5ndGggPiBlLmxlbmd0aCArIDEgfHwgKGNlKHVlKGkpLCBuKSA8PSAwIHx8IChzID0gcy5pbnNlcnQoaS5rZXksIGkubXV0YWJsZUNvcHkoKSkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZShzKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tIHRoZSBJbmRleEJhY2tmaWxsZXIgaWYgcGVyc2lzdGVuY2VcbiAgICAgICAgLy8gaXMgZW5hYmxlZC5cbiAgICAgICAgTCgpO1xuICAgIH1cbiAgICBNaSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3aS5mb3JFYWNoKHRoaXMuZG9jcywgKHQgPT4gZSh0KSkpO1xuICAgIH1cbiAgICBuZXdDaGFuZ2VCdWZmZXIodCkge1xuICAgICAgICAvLyBgdHJhY2tSZW1vdmFsc2AgaXMgaWdub3JlcyBzaW5jZSB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZSBrZWVwc1xuICAgICAgICAvLyBhIHNlcGFyYXRlIGNoYW5nZWxvZyBhbmQgZG9lcyBub3QgbmVlZCBzcGVjaWFsIGhhbmRsaW5nIGZvciByZW1vdmFscy5cbiAgICAgICAgcmV0dXJuIG5ldyBUbyh0aGlzKTtcbiAgICB9XG4gICAgZ2V0U2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMuc2l6ZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqXG4gKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAqIGV4cGVjdGVkIHRvIGp1c3QgcmV0dXJuIDAgdG8gYXZvaWQgdW5uZWNlc3NhcmlseSBkb2luZyB0aGUgd29yayBvZlxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUuXG4gKi9cbi8qKlxuICogSGFuZGxlcyB0aGUgZGV0YWlscyBvZiBhZGRpbmcgYW5kIHVwZGF0aW5nIGRvY3VtZW50cyBpbiB0aGUgTWVtb3J5UmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqL1xuY2xhc3MgVG8gZXh0ZW5kcyBrciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnFuID0gdDtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmlzVmFsaWREb2N1bWVudCgpID8gZS5wdXNoKHRoaXMucW4uYWRkRW50cnkodCwgcykpIDogdGhpcy5xbi5yZW1vdmVFbnRyeShuKTtcbiAgICAgICAgfSkpLCB3aS53YWl0Rm9yKGUpO1xuICAgIH1cbiAgICBnZXRGcm9tQ2FjaGUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5xbi5nZXRFbnRyeSh0LCBlKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucW4uZ2V0RW50cmllcyh0LCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEVvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1hcHMgYSB0YXJnZXQgdG8gdGhlIGRhdGEgYWJvdXQgdGhhdCB0YXJnZXRcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuT2kgPSBuZXcga24oKHQgPT4gZmUodCkpLCBfZSksIFxuICAgICAgICAvKiogVGhlIGxhc3QgcmVjZWl2ZWQgc25hcHNob3QgdmVyc2lvbi4gKi9cbiAgICAgICAgdGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gY3QubWluKCksIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3QgbnVtYmVyZWQgdGFyZ2V0IElEIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IDAsIFxuICAgICAgICAvKiogVGhlIGhpZ2hlc3Qgc2VxdWVuY2UgbnVtYmVyIGVuY291bnRlcmVkLiAqL1xuICAgICAgICB0aGlzLkZpID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG9yZGVyZWQgYmlkaXJlY3Rpb25hbCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgcmVtb3RlIHRhcmdldFxuICAgICAgICAgKiBJRHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLiRpID0gbmV3IGdvLCB0aGlzLnRhcmdldENvdW50ID0gMCwgdGhpcy5CaSA9IEVyLm1uKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5PaS5mb3JFYWNoKCgodCwgbikgPT4gZShuKSkpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24pO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gd2kucmVzb2x2ZSh0aGlzLkZpKTtcbiAgICB9XG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCA9IHRoaXMuQmkubmV4dCgpLCB3aS5yZXNvbHZlKHRoaXMuaGlnaGVzdFRhcmdldElkKTtcbiAgICB9XG4gICAgc2V0VGFyZ2V0c01ldGFkYXRhKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4gJiYgKHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IG4pLCBlID4gdGhpcy5GaSAmJiAodGhpcy5GaSA9IGUpLCBcbiAgICAgICAgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBJbih0KSB7XG4gICAgICAgIHRoaXMuT2kuc2V0KHQudGFyZ2V0LCB0KTtcbiAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgIGUgPiB0aGlzLmhpZ2hlc3RUYXJnZXRJZCAmJiAodGhpcy5CaSA9IG5ldyBFcihlKSwgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSBlKSwgdC5zZXF1ZW5jZU51bWJlciA+IHRoaXMuRmkgJiYgKHRoaXMuRmkgPSB0LnNlcXVlbmNlTnVtYmVyKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkluKGUpLCB0aGlzLnRhcmdldENvdW50ICs9IDEsIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkluKGUpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5PaS5kZWxldGUoZS50YXJnZXQpLCB0aGlzLiRpLlJpKGUudGFyZ2V0SWQpLCB0aGlzLnRhcmdldENvdW50IC09IDEsIFxuICAgICAgICB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuT2kuZm9yRWFjaCgoKHIsIG8pID0+IHtcbiAgICAgICAgICAgIG8uc2VxdWVuY2VOdW1iZXIgPD0gZSAmJiBudWxsID09PSBuLmdldChvLnRhcmdldElkKSAmJiAodGhpcy5PaS5kZWxldGUociksIGkucHVzaCh0aGlzLnJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIG8udGFyZ2V0SWQpKSwgXG4gICAgICAgICAgICBzKyspO1xuICAgICAgICB9KSksIHdpLndhaXRGb3IoaSkubmV4dCgoKCkgPT4gcykpO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKHRoaXMudGFyZ2V0Q291bnQpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuT2kuZ2V0KGUpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiB3aS5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy4kaS5UaShlLCBuKSwgd2kucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICB0aGlzLiRpLkFpKGUsIG4pO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcyAmJiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHMubWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkpO1xuICAgICAgICB9KSksIHdpLndhaXRGb3IoaSk7XG4gICAgfVxuICAgIHJlbW92ZU1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGkuUmkoZSksIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy4kaS5QaShlKTtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUobik7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdpLnJlc29sdmUodGhpcy4kaS5jb250YWluc0tleShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIG1lbW9yeS1iYWNrZWQgaW5zdGFuY2Ugb2YgUGVyc2lzdGVuY2UuIERhdGEgaXMgc3RvcmVkIG9ubHkgaW4gUkFNIGFuZFxuICogbm90IHBlcnNpc3RlZCBhY3Jvc3Mgc2Vzc2lvbnMuXG4gKi9cbmNsYXNzIEFvIHtcbiAgICAvKipcbiAgICAgKiBUaGUgY29uc3RydWN0b3IgYWNjZXB0cyBhIGZhY3RvcnkgZm9yIGNyZWF0aW5nIGEgcmVmZXJlbmNlIGRlbGVnYXRlLiBUaGlzXG4gICAgICogYWxsb3dzIGJvdGggdGhlIGRlbGVnYXRlIGFuZCB0aGlzIGluc3RhbmNlIHRvIGhhdmUgc3Ryb25nIHJlZmVyZW5jZXMgdG9cbiAgICAgKiBlYWNoIG90aGVyIHdpdGhvdXQgaGF2aW5nIG51bGxhYmxlIGZpZWxkcyB0aGF0IHdvdWxkIHRoZW4gbmVlZCB0byBiZVxuICAgICAqIGNoZWNrZWQgb3IgYXNzZXJ0ZWQgb24gZXZlcnkgYWNjZXNzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5MaSA9IHt9LCB0aGlzLm92ZXJsYXlzID0ge30sIHRoaXMudHMgPSBuZXcgbnQoMCksIHRoaXMuZXMgPSAhMSwgdGhpcy5lcyA9ICEwLCBcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHQodGhpcyksIHRoaXMubHMgPSBuZXcgRW8odGhpcyk7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gbmV3IHJyLCB0aGlzLmZzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBJbyh0KTtcbiAgICAgICAgfSgodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLlVpKHQpKSksIHRoaXMuTSA9IG5ldyBDaShlKSwgdGhpcy5kcyA9IG5ldyB3byh0aGlzLk0pO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5lcyA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVzO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgLy8gV2UgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IGluZGljZXMgZm9yIG1lbW9yeSBwZXJzaXN0ZW5jZSwgc28gd2UgY2FuXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2FtZSBzaGFyZWQgaW5zdGFuY2Ugb2YgdGhlIG1lbW9yeSBpbmRleCBtYW5hZ2VyLlxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm92ZXJsYXlzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IG1vLCB0aGlzLm92ZXJsYXlzW3QudG9LZXkoKV0gPSBlKSwgZTtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5MaVt0LnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gbiB8fCAobiA9IG5ldyBwbyhlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSwgdGhpcy5MaVt0LnRvS2V5KCldID0gbiksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5scztcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnM7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kcztcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBPKFwiTWVtb3J5UGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgUm8odGhpcy50cy5uZXh0KCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5xaSgpLCBuKHMpLm5leHQoKHQgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5HaShzKS5uZXh0KCgoKSA9PiB0KSkpKS50b1Byb21pc2UoKS50aGVuKCh0ID0+IChzLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgS2kodCwgZSkge1xuICAgICAgICByZXR1cm4gd2kub3IoT2JqZWN0LnZhbHVlcyh0aGlzLkxpKS5tYXAoKG4gPT4gKCkgPT4gbi5jb250YWluc0tleSh0LCBlKSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWVtb3J5IHBlcnNpc3RlbmNlIGlzIG5vdCBhY3R1YWxseSB0cmFuc2FjdGlvbmFsLCBidXQgZnV0dXJlIGltcGxlbWVudGF0aW9uc1xuICogbWF5IGhhdmUgdHJhbnNhY3Rpb24tc2NvcGVkIHN0YXRlLlxuICovIGNsYXNzIFJvIGV4dGVuZHMgX2kge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5jdXJyZW50U2VxdWVuY2VOdW1iZXIgPSB0O1xuICAgIH1cbn1cblxuY2xhc3MgYm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIGFsbCBkb2N1bWVudHMgdGhhdCBhcmUgYWN0aXZlIGluIFF1ZXJ5IHZpZXdzLiAqL1xuICAgICAgICB0aGlzLlFpID0gbmV3IGdvLCBcbiAgICAgICAgLyoqIFRoZSBsaXN0IG9mIGRvY3VtZW50cyB0aGF0IGFyZSBwb3RlbnRpYWxseSBHQ2VkIGFmdGVyIGVhY2ggdHJhbnNhY3Rpb24uICovXG4gICAgICAgIHRoaXMuamkgPSBudWxsO1xuICAgIH1cbiAgICBzdGF0aWMgV2kodCkge1xuICAgICAgICByZXR1cm4gbmV3IGJvKHQpO1xuICAgIH1cbiAgICBnZXQgemkoKSB7XG4gICAgICAgIGlmICh0aGlzLmppKSByZXR1cm4gdGhpcy5qaTtcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbiAgICBhZGRSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5RaS5hZGRSZWZlcmVuY2UobiwgZSksIHRoaXMuemkuZGVsZXRlKG4udG9TdHJpbmcoKSksIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuUWkucmVtb3ZlUmVmZXJlbmNlKG4sIGUpLCB0aGlzLnppLmFkZChuLnRvU3RyaW5nKCkpLCB3aS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuemkuYWRkKGUudG9TdHJpbmcoKSksIHdpLnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5RaS5SaShlLnRhcmdldElkKS5mb3JFYWNoKCh0ID0+IHRoaXMuemkuYWRkKHQudG9TdHJpbmcoKSkpKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0VGFyZ2V0Q2FjaGUoKTtcbiAgICAgICAgcmV0dXJuIG4uZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy56aS5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5yZW1vdmVUYXJnZXREYXRhKHQsIGUpKSk7XG4gICAgfVxuICAgIHFpKCkge1xuICAgICAgICB0aGlzLmppID0gbmV3IFNldDtcbiAgICB9XG4gICAgR2kodCkge1xuICAgICAgICAvLyBSZW1vdmUgbmV3bHkgb3JwaGFuZWQgZG9jdW1lbnRzLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiB3aS5mb3JFYWNoKHRoaXMuemksIChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB4dC5mcm9tUGF0aChuKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkhpKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIHQgfHwgZS5yZW1vdmVFbnRyeShzLCBjdC5taW4oKSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiAodGhpcy5qaSA9IG51bGwsIGUuYXBwbHkodCkpKSk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5IaSh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQgPyB0aGlzLnppLmRlbGV0ZShlLnRvU3RyaW5nKCkpIDogdGhpcy56aS5hZGQoZS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBVaSh0KSB7XG4gICAgICAgIC8vIEZvciBlYWdlciBHQywgd2UgZG9uJ3QgY2FyZSBhYm91dCB0aGUgZG9jdW1lbnQgc2l6ZSwgdGhlcmUgYXJlIG5vIHNpemUgdGhyZXNob2xkcy5cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIEhpKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHdpLm9yKFsgKCkgPT4gd2kucmVzb2x2ZSh0aGlzLlFpLmNvbnRhaW5zS2V5KGUpKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHQsIGUpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLktpKHQsIGUpIF0pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIExvY2FsU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGNsaWVudCBzdGF0ZSBpczpcbi8vICAgICBmaXJlc3RvcmVfY2xpZW50c188cGVyc2lzdGVuY2VfcHJlZml4Pl88aW5zdGFuY2Vfa2V5PlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIGNsaWVudCBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiBQbyh0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfY2xpZW50c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyB0aGUgbXV0YXRpb24gc3RhdGUgaXM6XG4vLyAgICAgZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+XG4vLyAgICAgKGZvciB1bmF1dGhlbnRpY2F0ZWQgdXNlcnMpXG4vLyBvcjogZmlyZXN0b3JlX211dGF0aW9uc188cGVyc2lzdGVuY2VfcHJlZml4Pl88YmF0Y2hfaWQ+Xzx1c2VyX3VpZD5cblxuLy8gJ3VzZXJfdWlkJyBpcyBsYXN0IHRvIGF2b2lkIG5lZWRpbmcgdG8gZXNjYXBlICdfJyBjaGFyYWN0ZXJzIHRoYXQgaXQgbWlnaHRcbi8vIGNvbnRhaW4uXG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgbXV0YXRpb24gYmF0Y2ggaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gVm8odCwgZSwgbikge1xuICAgIGxldCBzID0gYGZpcmVzdG9yZV9tdXRhdGlvbnNfJHt0fV8ke259YDtcbiAgICByZXR1cm4gZS5pc0F1dGhlbnRpY2F0ZWQoKSAmJiAocyArPSBgXyR7ZS51aWR9YCksIHM7XG59XG5cbi8vIFRoZSBmb3JtYXQgb2YgdGhlIFdlYlN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIGEgcXVlcnkgdGFyZ2V0J3MgbWV0YWRhdGEgaXM6XG4vLyAgICAgZmlyZXN0b3JlX3RhcmdldHNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPHRhcmdldF9pZD5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBxdWVyeSBzdGF0ZSBpbiBXZWJTdG9yYWdlICovXG5mdW5jdGlvbiB2byh0LCBlKSB7XG4gICAgcmV0dXJuIGBmaXJlc3RvcmVfdGFyZ2V0c18ke3R9XyR7ZX1gO1xufVxuXG4vLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBzdG9yZXMgdGhlIHByaW1hcnkgdGFiJ3Mgb25saW5lIHN0YXRlLiBUaGVcbi8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuLy8gICAgIGZpcmVzdG9yZV9vbmxpbmVfc3RhdGVfPHBlcnNpc3RlbmNlX3ByZWZpeD5cbi8qKlxuICogSG9sZHMgdGhlIHN0YXRlIG9mIGEgbXV0YXRpb24gYmF0Y2gsIGluY2x1ZGluZyBpdHMgdXNlciBJRCwgYmF0Y2ggSUQgYW5kXG4gKiB3aGV0aGVyIHRoZSBiYXRjaCBpcyAncGVuZGluZycsICdhY2tub3dsZWRnZWQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIFNvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMuYmF0Y2hJZCA9IGUsIHRoaXMuc3RhdGUgPSBuLCB0aGlzLmVycm9yID0gcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgTXV0YXRpb25NZXRhZGF0YSBmcm9tIGl0cyBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIEppKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEpTT04ucGFyc2Uobik7XG4gICAgICAgIGxldCBpLCByID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgcyAmJiAtMSAhPT0gWyBcInBlbmRpbmdcIiwgXCJhY2tub3dsZWRnZWRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihzLnN0YXRlKSAmJiAodm9pZCAwID09PSBzLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMuZXJyb3IpO1xuICAgICAgICByZXR1cm4gciAmJiBzLmVycm9yICYmIChyID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygcy5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IuY29kZSwgXG4gICAgICAgIHIgJiYgKGkgPSBuZXcgUShzLmVycm9yLmNvZGUsIHMuZXJyb3IubWVzc2FnZSkpKSwgciA/IG5ldyBTbyh0LCBlLCBzLnN0YXRlLCBpKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBtdXRhdGlvbiBzdGF0ZSBmb3IgSUQgJyR7ZX0nOiAke259YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG4gICAgWWkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBzdGF0ZTogdGhpcy5zdGF0ZSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5lcnJvciAmJiAodC5lcnJvciA9IHtcbiAgICAgICAgICAgIGNvZGU6IHRoaXMuZXJyb3IuY29kZSxcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZXJyb3IubWVzc2FnZVxuICAgICAgICB9KSwgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIHF1ZXJ5IHRhcmdldCwgaW5jbHVkaW5nIGl0cyB0YXJnZXQgSUQgYW5kIHdoZXRoZXIgdGhlXG4gKiB0YXJnZXQgaXMgJ25vdC1jdXJyZW50JywgJ2N1cnJlbnQnIG9yICdyZWplY3RlZCcuXG4gKi9cbi8vIFZpc2libGUgZm9yIHRlc3RpbmdcbmNsYXNzIERvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLnN0YXRlID0gZSwgdGhpcy5lcnJvciA9IG47XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFF1ZXJ5VGFyZ2V0TWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBKaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBKU09OLnBhcnNlKGUpO1xuICAgICAgICBsZXQgcywgaSA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4gJiYgLTEgIT09IFsgXCJub3QtY3VycmVudFwiLCBcImN1cnJlbnRcIiwgXCJyZWplY3RlZFwiIF0uaW5kZXhPZihuLnN0YXRlKSAmJiAodm9pZCAwID09PSBuLmVycm9yIHx8IFwib2JqZWN0XCIgPT0gdHlwZW9mIG4uZXJyb3IpO1xuICAgICAgICByZXR1cm4gaSAmJiBuLmVycm9yICYmIChpID0gXCJzdHJpbmdcIiA9PSB0eXBlb2Ygbi5lcnJvci5tZXNzYWdlICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IuY29kZSwgXG4gICAgICAgIGkgJiYgKHMgPSBuZXcgUShuLmVycm9yLmNvZGUsIG4uZXJyb3IubWVzc2FnZSkpKSwgaSA/IG5ldyBEbyh0LCBuLnN0YXRlLCBzKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSB0YXJnZXQgc3RhdGUgZm9yIElEICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIFlpKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBUaGlzIGNsYXNzIHJlcHJlc2VudHMgdGhlIGltbXV0YWJsZSBDbGllbnRTdGF0ZSBmb3IgYSBjbGllbnQgcmVhZCBmcm9tXG4gKiBXZWJTdG9yYWdlLCBjb250YWluaW5nIHRoZSBsaXN0IG9mIGFjdGl2ZSBxdWVyeSB0YXJnZXRzLlxuICovIGNsYXNzIENvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFJlbW90ZUNsaWVudFN0YXRlIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgSmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIG4uYWN0aXZlVGFyZ2V0SWRzIGluc3RhbmNlb2YgQXJyYXksIGkgPSBKbigpO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgcyAmJiB0IDwgbi5hY3RpdmVUYXJnZXRJZHMubGVuZ3RoOyArK3QpIHMgPSBDdChuLmFjdGl2ZVRhcmdldElkc1t0XSksIFxuICAgICAgICBpID0gaS5hZGQobi5hY3RpdmVUYXJnZXRJZHNbdF0pO1xuICAgICAgICByZXR1cm4gcyA/IG5ldyBDbyh0LCBpKSA6IChGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgYEZhaWxlZCB0byBwYXJzZSBjbGllbnQgZGF0YSBmb3IgaW5zdGFuY2UgJyR7dH0nOiAke2V9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBvbmxpbmUgc3RhdGUgZm9yIGFsbCBjbGllbnRzIHBhcnRpY2lwYXRpbmcgaW5cbiAqIG11bHRpLXRhYi4gVGhlIG9ubGluZSBzdGF0ZSBpcyBvbmx5IHdyaXR0ZW4gdG8gYnkgdGhlIHByaW1hcnkgY2xpZW50LCBhbmRcbiAqIHVzZWQgaW4gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzLlxuICovIGNsYXNzIHhvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY2xpZW50SWQgPSB0LCB0aGlzLm9ubGluZVN0YXRlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgU2hhcmVkT25saW5lU3RhdGUgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBKaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKU09OLnBhcnNlKHQpO1xuICAgICAgICByZXR1cm4gXCJvYmplY3RcIiA9PSB0eXBlb2YgZSAmJiAtMSAhPT0gWyBcIlVua25vd25cIiwgXCJPbmxpbmVcIiwgXCJPZmZsaW5lXCIgXS5pbmRleE9mKGUub25saW5lU3RhdGUpICYmIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuY2xpZW50SWQgPyBuZXcgeG8oZS5jbGllbnRJZCwgZS5vbmxpbmVTdGF0ZSkgOiAoRihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2Ugb25saW5lIHN0YXRlOiAke3R9YCksIFxuICAgICAgICBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWV0YWRhdGEgc3RhdGUgb2YgdGhlIGxvY2FsIGNsaWVudC4gVW5saWtlIGBSZW1vdGVDbGllbnRTdGF0ZWAsIHRoaXMgY2xhc3MgaXNcbiAqIG11dGFibGUgYW5kIGtlZXBzIHRyYWNrIG9mIGFsbCBwZW5kaW5nIG11dGF0aW9ucywgd2hpY2ggYWxsb3dzIHVzIHRvXG4gKiB1cGRhdGUgdGhlIHJhbmdlIG9mIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2ggSURzIGFzIG5ldyBtdXRhdGlvbnMgYXJlIGFkZGVkIG9yXG4gKiByZW1vdmVkLlxuICpcbiAqIFRoZSBkYXRhIGluIGBMb2NhbENsaWVudFN0YXRlYCBpcyBub3QgcmVhZCBmcm9tIFdlYlN0b3JhZ2UgYW5kIGluc3RlYWRcbiAqIHVwZGF0ZWQgdmlhIGl0cyBpbnN0YW5jZSBtZXRob2RzLiBUaGUgdXBkYXRlZCBzdGF0ZSBjYW4gYmUgc2VyaWFsaXplZCB2aWFcbiAqIGB0b1dlYlN0b3JhZ2VKU09OKClgLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuY2xhc3MgTm8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVRhcmdldElkcyA9IEpuKCk7XG4gICAgfVxuICAgIFhpKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5hZGQodCk7XG4gICAgfVxuICAgIFppKHQpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSB0aGlzLmFjdGl2ZVRhcmdldElkcy5kZWxldGUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgZW50cnkgaW50byBhIEpTT04tZW5jb2RlZCBmb3JtYXQgd2UgY2FuIHVzZSBmb3IgV2ViU3RvcmFnZS5cbiAgICAgKiBEb2VzIG5vdCBlbmNvZGUgYGNsaWVudElkYCBhcyBpdCBpcyBwYXJ0IG9mIHRoZSBrZXkgaW4gV2ViU3RvcmFnZS5cbiAgICAgKi8gICAgWWkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB7XG4gICAgICAgICAgICBhY3RpdmVUYXJnZXRJZHM6IHRoaXMuYWN0aXZlVGFyZ2V0SWRzLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWVNczogRGF0ZS5ub3coKVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIHVzZXMgV2ViU3RvcmFnZSAod2luZG93LmxvY2FsU3RvcmFnZSkgYXMgdGhlXG4gKiBiYWNraW5nIHN0b3JlIGZvciB0aGUgU2hhcmVkQ2xpZW50U3RhdGUuIEl0IGtlZXBzIHRyYWNrIG9mIGFsbCBhY3RpdmVcbiAqIGNsaWVudHMgYW5kIHN1cHBvcnRzIG1vZGlmaWNhdGlvbnMgb2YgdGhlIGxvY2FsIGNsaWVudCdzIGRhdGEuXG4gKi8gY2xhc3Mga28ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB0LCB0aGlzLkpuID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMudHIgPSBzLCB0aGlzLnN5bmNFbmdpbmUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGwsIHRoaXMuZXIgPSB0aGlzLm5yLmJpbmQodGhpcyksIFxuICAgICAgICB0aGlzLnNyID0gbmV3IE1uKHJ0KSwgdGhpcy5zdGFydGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FwdHVyZXMgV2ViU3RvcmFnZSBldmVudHMgdGhhdCBvY2N1ciBiZWZvcmUgYHN0YXJ0KClgIGlzIGNhbGxlZC4gVGhlc2VcbiAgICAgICAgICogZXZlbnRzIGFyZSByZXBsYXllZCBvbmNlIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgIGlzIHN0YXJ0ZWQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlyID0gW107XG4gICAgICAgIC8vIEVzY2FwZSB0aGUgc3BlY2lhbCBjaGFyYWN0ZXJzIG1lbnRpb25lZCBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0d1aWRlL1JlZ3VsYXJfRXhwcmVzc2lvbnNcbiAgICAgICAgY29uc3QgciA9IG4ucmVwbGFjZSgvWy4qKz9eJHt9KCl8W1xcXVxcXFxdL2csIFwiXFxcXCQmXCIpO1xuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UsIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLnJyID0gUG8odGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy50ciksIFxuICAgICAgICB0aGlzLnVyID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIGN1cnJlbnQgc2VxdWVuY2UgbnVtYmVyLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9zZXF1ZW5jZV9udW1iZXJfJHt0fWA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLnNyID0gdGhpcy5zci5pbnNlcnQodGhpcy50ciwgbmV3IE5vKSwgdGhpcy5hciA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfY2xpZW50c18ke3J9XyhbXl9dKikkYCksIFxuICAgICAgICB0aGlzLmNyID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV9tdXRhdGlvbnNfJHtyfV8oXFxcXGQrKSg/Ol8oLiopKT8kYCksIHRoaXMuaHIgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX3RhcmdldHNfJHtyfV8oXFxcXGQrKSRgKSwgXG4gICAgICAgIHRoaXMubHIgPSBcbiAgICAgICAgLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciB0aGUgb25saW5lIHN0YXRlIG9mIHRoZSBwcmltYXJ5IHRhYi4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfb25saW5lX3N0YXRlXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIHByZWZpeCB0aGF0IHBsYXlzIGFzIGEgZXZlbnQgdG8gaW5kaWNhdGUgdGhlIHJlbW90ZSBkb2N1bWVudHNcbiAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkIGR1ZSB0byBzb21lIHNlY29uZGFyeSB0YWJzIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICAgIC8vIGZvcm1hdCBvZiB0aGUga2V5IGlzOlxuICAgICAgICAvLyAgICAgZmlyZXN0b3JlX2J1bmRsZV9sb2FkZWRfdjJfPHBlcnNpc3RlbmNlS2V5PlxuICAgICAgICAvLyBUaGUgdmVyc2lvbiBlbmRpbmcgd2l0aCBcInYyXCIgc3RvcmVzIHRoZSBsaXN0IG9mIG1vZGlmaWVkIGNvbGxlY3Rpb24gZ3JvdXBzLlxuICAgICAgICAodGhpcy5wZXJzaXN0ZW5jZUtleSksIHRoaXMuZHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBXZWJTdG9yYWdlIGtleSBwcmVmaXggZm9yIHRoZSBrZXkgdGhhdCBzdG9yZXMgdGhlIGxhc3Qgc2VxdWVuY2UgbnVtYmVyIGFsbG9jYXRlZC4gVGhlIGtleVxuICAgICAgICAvLyBsb29rcyBsaWtlICdmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Jy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCBcbiAgICAgICAgLy8gUmF0aGVyIHRoYW4gYWRkaW5nIHRoZSBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBzdGFydCgpLCB3ZSBhZGQgdGhlXG4gICAgICAgIC8vIHN0b3JhZ2Ugb2JzZXJ2ZXIgZHVyaW5nIGluaXRpYWxpemF0aW9uLiBUaGlzIGVuc3VyZXMgdGhhdCB3ZSBjb2xsZWN0XG4gICAgICAgIC8vIGV2ZW50cyBiZWZvcmUgb3RoZXIgY29tcG9uZW50cyBwb3B1bGF0ZSB0aGVpciBpbml0aWFsIHN0YXRlIChkdXJpbmcgdGhlaXJcbiAgICAgICAgLy8gcmVzcGVjdGl2ZSBzdGFydCgpIGNhbGxzKS4gT3RoZXJ3aXNlLCB3ZSBtaWdodCBmb3IgZXhhbXBsZSBtaXNzIGFcbiAgICAgICAgLy8gbXV0YXRpb24gdGhhdCBpcyBhZGRlZCBhZnRlciBMb2NhbFN0b3JlJ3Mgc3RhcnQoKSBwcm9jZXNzZWQgdGhlIGV4aXN0aW5nXG4gICAgICAgIC8vIG11dGF0aW9ucyBidXQgYmVmb3JlIHdlIG9ic2VydmUgV2ViU3RvcmFnZSBldmVudHMuXG4gICAgICAgIHRoaXMud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuZXIpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgV2ViU3RvcmFnZSBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyB2dCh0KSB7XG4gICAgICAgIHJldHVybiAhKCF0IHx8ICF0LmxvY2FsU3RvcmFnZSk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjbGllbnRzIHRvIGJhY2tmaWxsIHRoZSBkYXRhIGluXG4gICAgICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zeW5jRW5naW5lLk9zKCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGhpcy50cikgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRJdGVtKFBvKHRoaXMucGVyc2lzdGVuY2VLZXksIGUpKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IENvLkppKGUsIHQpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMuc3IgPSB0aGlzLnNyLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcigpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMubHIpO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMud3IoZSk7XG4gICAgICAgICAgICB0ICYmIHRoaXMubXIodCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuaXIpIHRoaXMubnIodCk7XG4gICAgICAgIHRoaXMuaXIgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy51ciwgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyKHRoaXMuc3IpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3IuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KSAmJiAoZSA9ICEwKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICB0aGlzLnlyKHQsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMueXIodCwgZSwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLnByKHQpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odm8odGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gRG8uSmkodCwgbik7XG4gICAgICAgICAgICAgICAgcyAmJiAoZSA9IHMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLklyLlhpKHQpLCB0aGlzLl9yKCksIGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLklyLlppKHQpLCB0aGlzLl9yKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLklyLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbSh2byh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLlRyKHQsIGUsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMucHIodCk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IHQsIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMuRXIodCk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCh0KSB7XG4gICAgICAgIHRoaXMuQXIodCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuZXIpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5yciksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiBPKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgTyhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgIE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIG5yKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMucnIpIHJldHVybiB2b2lkIEYoXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuSm4uZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5hci50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlJyKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5icih0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5QcihlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLmJyKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuY3IudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuVnIoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy52cih0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhyLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlNyKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuRHIodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMubHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMud3IoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLm1yKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLnVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gbnQuQTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB0KSB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVShcIm51bWJlclwiID09IHR5cGVvZiBuKSwgZSA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBGKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJGYWlsZWQgdG8gcmVhZCBzZXF1ZW5jZSBudW1iZXIgZnJvbSBXZWJTdG9yYWdlXCIsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIC8qKlxuICogYE1lbW9yeVNoYXJlZENsaWVudFN0YXRlYCBpcyBhIHNpbXBsZSBpbXBsZW1lbnRhdGlvbiBvZiBTaGFyZWRDbGllbnRTdGF0ZSBmb3JcbiAqIGNsaWVudHMgdXNpbmcgbWVtb3J5IHBlcnNpc3RlbmNlLiBUaGUgc3RhdGUgaW4gdGhpcyBjbGFzcyByZW1haW5zIGZ1bGx5XG4gKiBpc29sYXRlZCBhbmQgbm8gc3luY2hyb25pemF0aW9uIGlzIHBlcmZvcm1lZC5cbiAqLyAoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ICE9PSBudC5BICYmIHRoaXMuc2VxdWVuY2VOdW1iZXJIYW5kbGVyKHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLmRyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5DcihlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHQubWFwKCh0ID0+IHRoaXMuc3luY0VuZ2luZS5Ocih0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB0aGlzLmlyLnB1c2goZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IElyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zci5nZXQodGhpcy50cik7XG4gICAgfVxuICAgIF9yKCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5yciwgdGhpcy5Jci5ZaSgpKTtcbiAgICB9XG4gICAgeXIodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IFNvKHRoaXMuY3VycmVudFVzZXIsIHQsIGUsIG4pLCBpID0gVm8odGhpcy5wZXJzaXN0ZW5jZUtleSwgdGhpcy5jdXJyZW50VXNlciwgdCk7XG4gICAgICAgIHRoaXMuc2V0SXRlbShpLCBzLllpKCkpO1xuICAgIH1cbiAgICBwcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBWbyh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5yZW1vdmVJdGVtKGUpO1xuICAgIH1cbiAgICBFcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy50cixcbiAgICAgICAgICAgIG9ubGluZVN0YXRlOiB0XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc3RvcmFnZS5zZXRJdGVtKHRoaXMubHIsIEpTT04uc3RyaW5naWZ5KGUpKTtcbiAgICB9XG4gICAgVHIodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gdm8odGhpcy5wZXJzaXN0ZW5jZUtleSwgdCksIGkgPSBuZXcgRG8odCwgZSwgbik7XG4gICAgICAgIHRoaXMuc2V0SXRlbShzLCBpLllpKCkpO1xuICAgIH1cbiAgICBBcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHQpKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHRoaXMuZHIsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUga2V5IGluIFdlYlN0b3JhZ2UuIFJldHVybnMgbnVsbCBpZiB0aGUga2V5IGRvZXMgbm90XG4gICAgICogbWF0Y2ggdGhlIGV4cGVjdGVkIGtleSBmb3JtYXQuXG4gICAgICovICAgIFJyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuYXIuZXhlYyh0KTtcbiAgICAgICAgcmV0dXJuIGUgPyBlWzFdIDogbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgY2xpZW50IHN0YXRlIGluIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZSBjb3VsZCBub3RcbiAgICAgKiBiZSBwYXJzZWQuXG4gICAgICovICAgIFByKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuUnIodCk7XG4gICAgICAgIHJldHVybiBDby5KaShuLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgbXV0YXRpb24gYmF0Y2ggc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgVnIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jci5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pLCBpID0gdm9pZCAwICE9PSBuWzJdID8gblsyXSA6IG51bGw7XG4gICAgICAgIHJldHVybiBTby5KaShuZXcgQyhpKSwgcywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIHF1ZXJ5IHRhcmdldCBzdGF0ZSBmcm9tIFdlYlN0b3JhZ2UuIFJldHVybnMgJ251bGwnIGlmIHRoZSB2YWx1ZVxuICAgICAqIGNvdWxkIG5vdCBiZSBwYXJzZWQuXG4gICAgICovICAgIFNyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuaHIuZXhlYyh0KSwgcyA9IE51bWJlcihuWzFdKTtcbiAgICAgICAgcmV0dXJuIERvLkppKHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYW4gb25saW5lIHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgd3IodCkge1xuICAgICAgICByZXR1cm4geG8uSmkodCk7XG4gICAgfVxuICAgIENyKHQpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodCk7XG4gICAgfVxuICAgIGFzeW5jIHZyKHQpIHtcbiAgICAgICAgaWYgKHQudXNlci51aWQgPT09IHRoaXMuY3VycmVudFVzZXIudWlkKSByZXR1cm4gdGhpcy5zeW5jRW5naW5lLmtyKHQuYmF0Y2hJZCwgdC5zdGF0ZSwgdC5lcnJvcik7XG4gICAgICAgIE8oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgSWdub3JpbmcgbXV0YXRpb24gZm9yIG5vbi1hY3RpdmUgdXNlciAke3QudXNlci51aWR9YCk7XG4gICAgfVxuICAgIERyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3luY0VuZ2luZS5Ncih0LnRhcmdldElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICB9XG4gICAgYnIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZSA/IHRoaXMuc3IuaW5zZXJ0KHQsIGUpIDogdGhpcy5zci5yZW1vdmUodCksIHMgPSB0aGlzLmdyKHRoaXMuc3IpLCBpID0gdGhpcy5ncihuKSwgciA9IFtdLCBvID0gW107XG4gICAgICAgIHJldHVybiBpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgcy5oYXModCkgfHwgci5wdXNoKHQpO1xuICAgICAgICB9KSksIHMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBpLmhhcyh0KSB8fCBvLnB1c2godCk7XG4gICAgICAgIH0pKSwgdGhpcy5zeW5jRW5naW5lLk9yKHIsIG8pLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3IgPSBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG1yKHQpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgd2hldGhlciB0aGUgY2xpZW50IHRoYXQgd3JvdGUgdGhpcyBvbmxpbmUgc3RhdGUgaXMgc3RpbGwgYWN0aXZlXG4gICAgICAgIC8vIGJ5IGNvbXBhcmluZyBpdHMgY2xpZW50IElEIHRvIHRoZSBsaXN0IG9mIGNsaWVudHMga2VwdCBhY3RpdmUgaW5cbiAgICAgICAgLy8gSW5kZXhlZERiLiBJZiBhIGNsaWVudCBkb2VzIG5vdCB1cGRhdGUgdGhlaXIgSW5kZXhlZERiIGNsaWVudCBzdGF0ZVxuICAgICAgICAvLyB3aXRoaW4gNSBzZWNvbmRzLCBpdCBpcyBjb25zaWRlcmVkIGluYWN0aXZlIGFuZCB3ZSBkb24ndCBlbWl0IGFuIG9ubGluZVxuICAgICAgICAvLyBzdGF0ZSBldmVudC5cbiAgICAgICAgdGhpcy5zci5nZXQodC5jbGllbnRJZCkgJiYgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodC5vbmxpbmVTdGF0ZSk7XG4gICAgfVxuICAgIGdyKHQpIHtcbiAgICAgICAgbGV0IGUgPSBKbigpO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgZSA9IGUudW5pb25XaXRoKG4uYWN0aXZlVGFyZ2V0SWRzKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbn1cblxuY2xhc3MgTW8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkZyID0gbmV3IE5vLCB0aGlzLiRyID0ge30sIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIuWGkodCksIHRoaXMuJHJbdF0gfHwgXCJub3QtY3VycmVudFwiO1xuICAgIH1cbiAgICB1cGRhdGVRdWVyeVN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy4kclt0XSA9IGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLkZyLlppKHQpO1xuICAgIH1cbiAgICBpc0xvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Gci5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBjbGVhclF1ZXJ5U3RhdGUodCkge1xuICAgICAgICBkZWxldGUgdGhpcy4kclt0XTtcbiAgICB9XG4gICAgZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Gci5hY3RpdmVUYXJnZXRJZHM7XG4gICAgfVxuICAgIGlzQWN0aXZlUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Gci5hY3RpdmVUYXJnZXRJZHMuaGFzKHQpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRnIgPSBuZXcgTm8sIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE9ubGluZVN0YXRlKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNodXRkb3duKCkge31cbiAgICB3cml0ZVNlcXVlbmNlTnVtYmVyKHQpIHt9XG4gICAgbm90aWZ5QnVuZGxlTG9hZGVkKHQpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBPbyB7XG4gICAgQnIodCkge1xuICAgICAgICAvLyBOby1vcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIFJlZmVyZW5jZXMgdG8gYHdpbmRvd2AgYXJlIGd1YXJkZWQgYnkgQnJvd3NlckNvbm5lY3Rpdml0eU1vbml0b3IuaXNBdmFpbGFibGUoKVxuLyogZXNsaW50LWRpc2FibGUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzICovXG4vKipcbiAqIEJyb3dzZXIgaW1wbGVtZW50YXRpb24gb2YgQ29ubmVjdGl2aXR5TW9uaXRvci5cbiAqL1xuY2xhc3MgRm8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkxyID0gKCkgPT4gdGhpcy5VcigpLCB0aGlzLnFyID0gKCkgPT4gdGhpcy5HcigpLCB0aGlzLktyID0gW10sIHRoaXMuUXIoKTtcbiAgICB9XG4gICAgQnIodCkge1xuICAgICAgICB0aGlzLktyLnB1c2godCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLkxyKSwgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMucXIpO1xuICAgIH1cbiAgICBRcigpIHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvbmxpbmVcIiwgdGhpcy5MciksIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwib2ZmbGluZVwiLCB0aGlzLnFyKTtcbiAgICB9XG4gICAgVXIoKSB7XG4gICAgICAgIE8oXCJDb25uZWN0aXZpdHlNb25pdG9yXCIsIFwiTmV0d29yayBjb25uZWN0aXZpdHkgY2hhbmdlZDogQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5LcikgdCgwIC8qIEFWQUlMQUJMRSAqLyk7XG4gICAgfVxuICAgIEdyKCkge1xuICAgICAgICBPKFwiQ29ubmVjdGl2aXR5TW9uaXRvclwiLCBcIk5ldHdvcmsgY29ubmVjdGl2aXR5IGNoYW5nZWQ6IFVOQVZBSUxBQkxFXCIpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5LcikgdCgxIC8qIFVOQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgLy8gVE9ETyhjaGVuYnJpYW4pOiBDb25zaWRlciBwYXNzaW5nIGluIHdpbmRvdyBlaXRoZXIgaW50byB0aGlzIGNvbXBvbmVudCBvclxuICAgIC8vIGhlcmUgZm9yIHRlc3RpbmcgdmlhIEZha2VXaW5kb3cuXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXG4gICAgc3RhdGljIHZ0KCkge1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHZvaWQgMCAhPT0gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgJiYgdm9pZCAwICE9PSB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0ICRvID0ge1xuICAgIEJhdGNoR2V0RG9jdW1lbnRzOiBcImJhdGNoR2V0XCIsXG4gICAgQ29tbWl0OiBcImNvbW1pdFwiLFxuICAgIFJ1blF1ZXJ5OiBcInJ1blF1ZXJ5XCJcbn07XG5cbi8qKlxuICogTWFwcyBSUEMgbmFtZXMgdG8gdGhlIGNvcnJlc3BvbmRpbmcgUkVTVCBlbmRwb2ludCBuYW1lLlxuICpcbiAqIFdlIHVzZSBhcnJheSBub3RhdGlvbiB0byBhdm9pZCBtYW5nbGluZy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzaW1wbGUgaGVscGVyIGNsYXNzIHRoYXQgaW1wbGVtZW50cyB0aGUgU3RyZWFtIGludGVyZmFjZSB0b1xuICogYnJpZGdlIHRvIG90aGVyIGltcGxlbWVudGF0aW9ucyB0aGF0IGFyZSBzdHJlYW1zIGJ1dCBkbyBub3QgaW1wbGVtZW50IHRoZVxuICogaW50ZXJmYWNlLiBUaGUgc3RyZWFtIGNhbGxiYWNrcyBhcmUgaW52b2tlZCB3aXRoIHRoZSBjYWxsT24uLi4gbWV0aG9kcy5cbiAqL1xuY2xhc3MgQm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5qciA9IHQuanIsIHRoaXMuV3IgPSB0LldyO1xuICAgIH1cbiAgICB6cih0KSB7XG4gICAgICAgIHRoaXMuSHIgPSB0O1xuICAgIH1cbiAgICBKcih0KSB7XG4gICAgICAgIHRoaXMuWXIgPSB0O1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICB0aGlzLlhyID0gdDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuV3IoKTtcbiAgICB9XG4gICAgc2VuZCh0KSB7XG4gICAgICAgIHRoaXMuanIodCk7XG4gICAgfVxuICAgIFpyKCkge1xuICAgICAgICB0aGlzLkhyKCk7XG4gICAgfVxuICAgIGVvKHQpIHtcbiAgICAgICAgdGhpcy5Zcih0KTtcbiAgICB9XG4gICAgbm8odCkge1xuICAgICAgICB0aGlzLlhyKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgTG8gZXh0ZW5kcyBcbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIFJlc3QtYmFzZWQgY29ubmVjdGlvbnMgdG8gdGhlIGJhY2tlbmQgKFdlYkNoYW5uZWwgYW5kXG4gKiBIVFRQKS5cbiAqL1xuY2xhc3Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhYmFzZUluZm8gPSB0LCB0aGlzLmRhdGFiYXNlSWQgPSB0LmRhdGFiYXNlSWQ7XG4gICAgICAgIGNvbnN0IGUgPSB0LnNzbCA/IFwiaHR0cHNcIiA6IFwiaHR0cFwiO1xuICAgICAgICB0aGlzLnNvID0gZSArIFwiOi8vXCIgKyB0Lmhvc3QsIHRoaXMuaW8gPSBcInByb2plY3RzL1wiICsgdGhpcy5kYXRhYmFzZUlkLnByb2plY3RJZCArIFwiL2RhdGFiYXNlcy9cIiArIHRoaXMuZGF0YWJhc2VJZC5kYXRhYmFzZSArIFwiL2RvY3VtZW50c1wiO1xuICAgIH1cbiAgICBybyh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm9vKHQsIGUpO1xuICAgICAgICBPKFwiUmVzdENvbm5lY3Rpb25cIiwgXCJTZW5kaW5nOiBcIiwgciwgbik7XG4gICAgICAgIGNvbnN0IG8gPSB7fTtcbiAgICAgICAgcmV0dXJuIHRoaXMudW8obywgcywgaSksIHRoaXMuYW8odCwgciwgbywgbikudGhlbigodCA9PiAoTyhcIlJlc3RDb25uZWN0aW9uXCIsIFwiUmVjZWl2ZWQ6IFwiLCB0KSwgXG4gICAgICAgIHQpKSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgJChcIlJlc3RDb25uZWN0aW9uXCIsIGAke3R9IGZhaWxlZCB3aXRoIGVycm9yOiBgLCBlLCBcInVybDogXCIsIHIsIFwicmVxdWVzdDpcIiwgbiksIFxuICAgICAgICAgICAgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjbyh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIC8vIFRoZSBSRVNUIEFQSSBhdXRvbWF0aWNhbGx5IGFnZ3JlZ2F0ZXMgYWxsIG9mIHRoZSBzdHJlYW1lZCByZXN1bHRzLCBzbyB3ZVxuICAgICAgICAvLyBjYW4ganVzdCB1c2UgdGhlIG5vcm1hbCBpbnZva2UoKSBtZXRob2QuXG4gICAgICAgIHJldHVybiB0aGlzLnJvKHQsIGUsIG4sIHMsIGkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNb2RpZmllcyB0aGUgaGVhZGVycyBmb3IgYSByZXF1ZXN0LCBhZGRpbmcgYW55IGF1dGhvcml6YXRpb24gdG9rZW4gaWZcbiAgICAgKiBwcmVzZW50IGFuZCBhbnkgYWRkaXRpb25hbCBoZWFkZXJzIGZvciB0aGUgcmVxdWVzdC5cbiAgICAgKi8gICAgdW8odCwgZSwgbikge1xuICAgICAgICB0W1wiWC1Hb29nLUFwaS1DbGllbnRcIl0gPSBcImdsLWpzLyBmaXJlL1wiICsgeCwgXG4gICAgICAgIC8vIENvbnRlbnQtVHlwZTogdGV4dC9wbGFpbiB3aWxsIGF2b2lkIHByZWZsaWdodCByZXF1ZXN0cyB3aGljaCBtaWdodFxuICAgICAgICAvLyBtZXNzIHdpdGggQ09SUyBhbmQgcmVkaXJlY3RzIGJ5IHByb3hpZXMuIElmIHdlIGFkZCBjdXN0b20gaGVhZGVyc1xuICAgICAgICAvLyB3ZSB3aWxsIG5lZWQgdG8gY2hhbmdlIHRoaXMgY29kZSB0byBwb3RlbnRpYWxseSB1c2UgdGhlICRodHRwT3ZlcndyaXRlXG4gICAgICAgIC8vIHBhcmFtZXRlciBzdXBwb3J0ZWQgYnkgRVNGIHRvIGF2b2lkIHRyaWdnZXJpbmcgcHJlZmxpZ2h0IHJlcXVlc3RzLlxuICAgICAgICB0W1wiQ29udGVudC1UeXBlXCJdID0gXCJ0ZXh0L3BsYWluXCIsIHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkICYmICh0W1wiWC1GaXJlYmFzZS1HTVBJRFwiXSA9IHRoaXMuZGF0YWJhc2VJbmZvLmFwcElkKSwgXG4gICAgICAgIGUgJiYgZS5oZWFkZXJzLmZvckVhY2goKChlLCBuKSA9PiB0W25dID0gZSkpLCBuICYmIG4uaGVhZGVycy5mb3JFYWNoKCgoZSwgbikgPT4gdFtuXSA9IGUpKTtcbiAgICB9XG4gICAgb28odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gJG9bdF07XG4gICAgICAgIHJldHVybiBgJHt0aGlzLnNvfS92MS8ke2V9OiR7bn1gO1xuICAgIH1cbn0ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIodCksIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHQuZm9yY2VMb25nUG9sbGluZywgdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0LmF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMudXNlRmV0Y2hTdHJlYW1zID0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIGFvKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgoaSwgcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIG8ubGlzdGVuT25jZShFdmVudFR5cGUuQ09NUExFVEUsICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChvLmdldExhc3RFcnJvckNvZGUoKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLk5PX0VSUk9SOlxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0UmVzcG9uc2VKc29uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCBcIlhIUiByZWNlaXZlZDpcIiwgSlNPTi5zdHJpbmdpZnkoZSkpLCBpKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIEVycm9yQ29kZS5USU1FT1VUOlxuICAgICAgICAgICAgICAgICAgICAgICAgTyhcIkNvbm5lY3Rpb25cIiwgJ1JQQyBcIicgKyB0ICsgJ1wiIHRpbWVkIG91dCcpLCByKG5ldyBRKEsuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gby5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPKFwiQ29ubmVjdGlvblwiLCAnUlBDIFwiJyArIHQgKyAnXCIgZmFpbGVkIHdpdGggc3RhdHVzOicsIG4sIFwicmVzcG9uc2UgdGV4dDpcIiwgby5nZXRSZXNwb25zZVRleHQoKSksIFxuICAgICAgICAgICAgICAgICAgICAgICAgbiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5nZXRSZXNwb25zZUpzb24oKS5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiB0LnN0YXR1cyAmJiB0Lm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhLKS5pbmRleE9mKGUpID49IDAgPyBlIDogSy5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KHQuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcihuZXcgUShlLCB0Lm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgcihuZXcgUShLLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIG8uZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICByKG5ldyBRKEsuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIEwoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIE8oXCJDb25uZWN0aW9uXCIsICdSUEMgXCInICsgdCArICdcIiBjb21wbGV0ZWQuJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgdSA9IEpTT04uc3RyaW5naWZ5KHMpO1xuICAgICAgICAgICAgby5zZW5kKGUsIFwiUE9TVFwiLCB1LCBuLCAxNSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaG8odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWyB0aGlzLnNvLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIGkgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIHIgPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgbyA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgJiYgKG8ueG1sSHR0cEZhY3RvcnkgPSBuZXcgRmV0Y2hYbWxIdHRwRmFjdG9yeSh7fSkpLCB0aGlzLnVvKG8uaW5pdE1lc3NhZ2VIZWFkZXJzLCBlLCBuKSwgXG4gICAgICAgIC8vIFNlbmRpbmcgdGhlIGN1c3RvbSBoZWFkZXJzIHdlIGp1c3QgYWRkZWQgdG8gcmVxdWVzdC5pbml0TWVzc2FnZUhlYWRlcnNcbiAgICAgICAgLy8gKEF1dGhvcml6YXRpb24sIGV0Yy4pIHdpbGwgdHJpZ2dlciB0aGUgYnJvd3NlciB0byBtYWtlIGEgQ09SUyBwcmVmbGlnaHRcbiAgICAgICAgLy8gcmVxdWVzdCBiZWNhdXNlIHRoZSBYSFIgd2lsbCBubyBsb25nZXIgbWVldCB0aGUgY3JpdGVyaWEgZm9yIGEgXCJzaW1wbGVcIlxuICAgICAgICAvLyBDT1JTIHJlcXVlc3Q6XG4gICAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0hUVFAvQ09SUyNTaW1wbGVfcmVxdWVzdHNcbiAgICAgICAgLy8gVGhlcmVmb3JlIHRvIGF2b2lkIHRoZSBDT1JTIHByZWZsaWdodCByZXF1ZXN0IChhbiBleHRyYSBuZXR3b3JrXG4gICAgICAgIC8vIHJvdW5kdHJpcCksIHdlIHVzZSB0aGUgaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSBvcHRpb24gdG8gc3BlY2lmeSB0aGF0XG4gICAgICAgIC8vIHRoZSBoZWFkZXJzIHNob3VsZCBpbnN0ZWFkIGJlIGVuY29kZWQgaW50byBhIHNwZWNpYWwgXCIkaHR0cEhlYWRlcnNcIiBxdWVyeVxuICAgICAgICAvLyBwYXJhbWV0ZXIsIHdoaWNoIGlzIHJlY29nbml6ZWQgYnkgdGhlIHdlYmNoYW5uZWwgYmFja2VuZC4gVGhpcyBpc1xuICAgICAgICAvLyBmb3JtYWxseSBkZWZpbmVkIGhlcmU6XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1saWJyYXJ5L2Jsb2IvYjBlMTgxNWIxM2ZiOTJhNDZkN2M5YjNjMzBkZTVkNmEzOTZhMzI0NS9jbG9zdXJlL2dvb2cvbmV0L3JwYy9odHRwY29ycy5qcyNMMzJcbiAgICAgICAgLy8gVE9ETyhiLzE0NTYyNDc1Nik6IFRoZXJlIGlzIGEgYmFja2VuZCBidWcgd2hlcmUgJGh0dHBIZWFkZXJzIGlzbid0IHJlc3BlY3RlZCBpZiB0aGUgcmVxdWVzdFxuICAgICAgICAvLyBkb2Vzbid0IGhhdmUgYW4gT3JpZ2luIGhlYWRlci4gU28gd2UgaGF2ZSB0byBleGNsdWRlIGEgZmV3IGJyb3dzZXIgZW52aXJvbm1lbnRzIHRoYXQgYXJlXG4gICAgICAgIC8vIGtub3duIHRvIChzb21ldGltZXMpIG5vdCBpbmNsdWRlIGFuIE9yaWdpbi4gU2VlXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzE0OTEuXG4gICAgICAgIGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKSB8fCBpc0VsZWN0cm9uKCkgfHwgaXNJRSgpIHx8IGlzVVdQKCkgfHwgaXNCcm93c2VyRXh0ZW5zaW9uKCkgfHwgKG8uaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSA9IFwiJGh0dHBIZWFkZXJzXCIpO1xuICAgICAgICBjb25zdCB1ID0gcy5qb2luKFwiXCIpO1xuICAgICAgICBPKFwiQ29ubmVjdGlvblwiLCBcIkNyZWF0aW5nIFdlYkNoYW5uZWw6IFwiICsgdSwgbyk7XG4gICAgICAgIGNvbnN0IGEgPSBpLmNyZWF0ZVdlYkNoYW5uZWwodSwgbyk7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgYyA9ICExLCBoID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgbCA9IG5ldyBCbyh7XG4gICAgICAgICAgICBqcjogdCA9PiB7XG4gICAgICAgICAgICAgICAgaCA/IE8oXCJDb25uZWN0aW9uXCIsIFwiTm90IHNlbmRpbmcgYmVjYXVzZSBXZWJDaGFubmVsIGlzIGNsb3NlZDpcIiwgdCkgOiAoYyB8fCAoTyhcIkNvbm5lY3Rpb25cIiwgXCJPcGVuaW5nIFdlYkNoYW5uZWwgdHJhbnNwb3J0LlwiKSwgXG4gICAgICAgICAgICAgICAgYS5vcGVuKCksIGMgPSAhMCksIE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCBzZW5kaW5nOlwiLCB0KSwgYS5zZW5kKHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBXcjogKCkgPT4gYS5jbG9zZSgpXG4gICAgICAgIH0pLCB5ID0gKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIHQubGlzdGVuKGUsICh0ID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB5KGEsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICBoIHx8IE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgb3BlbmVkLlwiKTtcbiAgICAgICAgfSkpLCB5KGEsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkNMT1NFLCAoKCkgPT4ge1xuICAgICAgICAgICAgaCB8fCAoaCA9ICEwLCBPKFwiQ29ubmVjdGlvblwiLCBcIldlYkNoYW5uZWwgdHJhbnNwb3J0IGNsb3NlZFwiKSwgbC5lbygpKTtcbiAgICAgICAgfSkpLCB5KGEsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLkVSUk9SLCAodCA9PiB7XG4gICAgICAgICAgICBoIHx8IChoID0gITAsICQoXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCB0cmFuc3BvcnQgZXJyb3JlZDpcIiwgdCksIGwuZW8obmV3IFEoSy5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCB5KGEsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsICh0ID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCFoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBVKCEhbik7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4sIGkgPSBzLmVycm9yIHx8IChudWxsID09PSAoZSA9IHNbMF0pIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICAgICAgICAgIE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZCBlcnJvcjpcIiwgaSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVycm9yLnN0YXR1cyB3aWxsIGJlIGEgc3RyaW5nIGxpa2UgJ09LJyBvciAnTk9UX0ZPVU5EJy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGkuc3RhdHVzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IFxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIGEgR1JQQyBzdGF0dXMgaWRlbnRpZmllciBsaWtlICdOT1RfRk9VTkQnLlxuICpcbiAqIEByZXR1cm5zIFRoZSBDb2RlIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHN0YXR1cyBzdHJpbmcgb3IgdW5kZWZpbmVkIGlmXG4gKiAgICAgdGhlcmUgaXMgbm8gbWF0Y2guXG4gKi9cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbG9va3VwIGJ5IHN0cmluZ1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBEblt0XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHJldHVybiBObihlKTtcbiAgICAgICAgICAgICAgICAgICAgfSh0KSwgbiA9IGkubWVzc2FnZTtcbiAgICAgICAgICAgICAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gSy5JTlRFUk5BTCwgbiA9IFwiVW5rbm93biBlcnJvciBzdGF0dXM6IFwiICsgdCArIFwiIHdpdGggbWVzc2FnZSBcIiArIGkubWVzc2FnZSksIFxuICAgICAgICAgICAgICAgICAgICAvLyBNYXJrIGNsb3NlZCBzbyBubyBmdXJ0aGVyIGV2ZW50cyBhcmUgcHJvcGFnYXRlZFxuICAgICAgICAgICAgICAgICAgICBoID0gITAsIGwuZW8obmV3IFEoZSwgbikpLCBhLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIE8oXCJDb25uZWN0aW9uXCIsIFwiV2ViQ2hhbm5lbCByZWNlaXZlZDpcIiwgbiksIGwubm8obik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgeShyLCBFdmVudC5TVEFUX0VWRU5ULCAodCA9PiB7XG4gICAgICAgICAgICB0LnN0YXQgPT09IFN0YXQuUFJPWFkgPyBPKFwiQ29ubmVjdGlvblwiLCBcIkRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eVwiKSA6IHQuc3RhdCA9PT0gU3RhdC5OT1BST1hZICYmIE8oXCJDb25uZWN0aW9uXCIsIFwiRGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5XCIpO1xuICAgICAgICB9KSksIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRlY2huaWNhbGx5IHdlIGNvdWxkL3Nob3VsZCB3YWl0IGZvciB0aGUgV2ViQ2hhbm5lbCBvcGVuZWQgZXZlbnQsXG4gICAgICAgICAgICAvLyBidXQgYmVjYXVzZSB3ZSB3YW50IHRvIHNlbmQgdGhlIGZpcnN0IG1lc3NhZ2Ugd2l0aCB0aGUgV2ViQ2hhbm5lbFxuICAgICAgICAgICAgLy8gaGFuZHNoYWtlIHdlIHByZXRlbmQgdGhlIGNoYW5uZWwgb3BlbmVkIGhlcmUgKGFzeW5jaHJvbm91c2x5KSwgYW5kXG4gICAgICAgICAgICAvLyB0aGVuIGRlbGF5IHRoZSBhY3R1YWwgb3BlbiB1bnRpbCB0aGUgZmlyc3QgbWVzc2FnZSBpcyBzZW50LlxuICAgICAgICAgICAgbC5acigpO1xuICAgICAgICB9KSwgMCksIGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIEluaXRpYWxpemVzIHRoZSBXZWJDaGFubmVsQ29ubmVjdGlvbiBmb3IgdGhlIGJyb3dzZXIuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFRoZSBQbGF0Zm9ybSdzICd3aW5kb3cnIGltcGxlbWVudGF0aW9uIG9yIG51bGwgaWYgbm90IGF2YWlsYWJsZS4gKi9cbmZ1bmN0aW9uIFVvKCkge1xuICAgIC8vIGB3aW5kb3dgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ID8gd2luZG93IDogbnVsbDtcbn1cblxuLyoqIFRoZSBQbGF0Zm9ybSdzICdkb2N1bWVudCcgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqLyBmdW5jdGlvbiBxbygpIHtcbiAgICAvLyBgZG9jdW1lbnRgIGlzIG5vdCBhbHdheXMgYXZhaWxhYmxlLCBlLmcuIGluIFJlYWN0TmF0aXZlIGFuZCBXZWJXb3JrZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1yZXN0cmljdGVkLWdsb2JhbHNcbiAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgZG9jdW1lbnQgPyBkb2N1bWVudCA6IG51bGw7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIEdvKHQpIHtcbiAgICByZXR1cm4gbmV3IGFzKHQsIC8qIHVzZVByb3RvM0pzb249ICovICEwKTtcbn1cblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIEEgaGVscGVyIGZvciBydW5uaW5nIGRlbGF5ZWQgdGFza3MgZm9sbG93aW5nIGFuIGV4cG9uZW50aWFsIGJhY2tvZmYgY3VydmVcbiAqIGJldHdlZW4gYXR0ZW1wdHMuXG4gKlxuICogRWFjaCBkZWxheSBpcyBtYWRlIHVwIG9mIGEgXCJiYXNlXCIgZGVsYXkgd2hpY2ggZm9sbG93cyB0aGUgZXhwb25lbnRpYWxcbiAqIGJhY2tvZmYgY3VydmUsIGFuZCBhICsvLSA1MCUgXCJqaXR0ZXJcIiB0aGF0IGlzIGNhbGN1bGF0ZWQgYW5kIGFkZGVkIHRvIHRoZVxuICogYmFzZSBkZWxheS4gVGhpcyBwcmV2ZW50cyBjbGllbnRzIGZyb20gYWNjaWRlbnRhbGx5IHN5bmNocm9uaXppbmcgdGhlaXJcbiAqIGRlbGF5cyBjYXVzaW5nIHNwaWtlcyBvZiBsb2FkIHRvIHRoZSBiYWNrZW5kLlxuICovXG5jbGFzcyBLbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIEFzeW5jUXVldWUgdG8gcnVuIGJhY2tvZmYgb3BlcmF0aW9ucyBvbi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgSUQgdG8gdXNlIHdoZW4gc2NoZWR1bGluZyBiYWNrb2ZmIG9wZXJhdGlvbnMgb24gdGhlIEFzeW5jUXVldWUuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgZGVsYXkgKHVzZWQgYXMgdGhlIGJhc2UgZGVsYXkgb24gdGhlIGZpcnN0IHJldHJ5IGF0dGVtcHQpLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbGl0dGxlIGFzIDAuNSppbml0aWFsRGVsYXlNcy5cbiAgICAgKi9cbiAgICBuID0gMWUzXG4gICAgLyoqXG4gICAgICogVGhlIG11bHRpcGxpZXIgdG8gdXNlIHRvIGRldGVybWluZSB0aGUgZXh0ZW5kZWQgYmFzZSBkZWxheSBhZnRlciBlYWNoXG4gICAgICogYXR0ZW1wdC5cbiAgICAgKi8gLCBzID0gMS41XG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gYmFzZSBkZWxheSBhZnRlciB3aGljaCBubyBmdXJ0aGVyIGJhY2tvZmYgaXMgcGVyZm9ybWVkLlxuICAgICAqIE5vdGUgdGhhdCBqaXR0ZXIgd2lsbCBzdGlsbCBiZSBhcHBsaWVkLCBzbyB0aGUgYWN0dWFsIGRlbGF5IGNvdWxkIGJlIGFzXG4gICAgICogbXVjaCBhcyAxLjUqbWF4RGVsYXlNcy5cbiAgICAgKi8gLCBpID0gNmU0KSB7XG4gICAgICAgIHRoaXMuSm4gPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLmxvID0gbiwgdGhpcy5mbyA9IHMsIHRoaXMuX28gPSBpLCB0aGlzLndvID0gMCwgXG4gICAgICAgIHRoaXMubW8gPSBudWxsLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IGJhY2tvZmYgYXR0ZW1wdCwgYXMgZXBvY2ggbWlsbGlzZWNvbmRzLiAqL1xuICAgICAgICB0aGlzLnlvID0gRGF0ZS5ub3coKSwgdGhpcy5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkuXG4gICAgICpcbiAgICAgKiBUaGUgdmVyeSBuZXh0IGJhY2tvZmZBbmRXYWl0KCkgd2lsbCBoYXZlIG5vIGRlbGF5LiBJZiBpdCBpcyBjYWxsZWQgYWdhaW5cbiAgICAgKiAoaS5lLiBkdWUgdG8gYW4gZXJyb3IpLCBpbml0aWFsRGVsYXlNcyAocGx1cyBqaXR0ZXIpIHdpbGwgYmUgdXNlZCwgYW5kXG4gICAgICogc3Vic2VxdWVudCBvbmVzIHdpbGwgaW5jcmVhc2UgYWNjb3JkaW5nIHRvIHRoZSBiYWNrb2ZmRmFjdG9yLlxuICAgICAqLyAgICByZXNldCgpIHtcbiAgICAgICAgdGhpcy53byA9IDA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc2V0cyB0aGUgYmFja29mZiBkZWxheSB0byB0aGUgbWF4aW11bSBkZWxheSAoZS5nLiBmb3IgdXNlIGFmdGVyIGFcbiAgICAgKiBSRVNPVVJDRV9FWEhBVVNURUQgZXJyb3IpLlxuICAgICAqLyAgICBwbygpIHtcbiAgICAgICAgdGhpcy53byA9IHRoaXMuX287XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgYWZ0ZXIgY3VycmVudERlbGF5TXMsIGFuZCBpbmNyZWFzZXMgdGhlXG4gICAgICogZGVsYXkgZm9yIGFueSBzdWJzZXF1ZW50IGF0dGVtcHRzLiBJZiB0aGVyZSB3YXMgYSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uXG4gICAgICogYWxyZWFkeSwgaXQgd2lsbCBiZSBjYW5jZWxlZC5cbiAgICAgKi8gICAgSW8odCkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IHBlbmRpbmcgYmFja29mZiBvcGVyYXRpb24uXG4gICAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAgIC8vIEZpcnN0IHNjaGVkdWxlIHVzaW5nIHRoZSBjdXJyZW50IGJhc2UgKHdoaWNoIG1heSBiZSAwIGFuZCBzaG91bGQgYmVcbiAgICAgICAgLy8gaG9ub3JlZCBhcyBzdWNoKS5cbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodGhpcy53byArIHRoaXMuVG8oKSksIG4gPSBNYXRoLm1heCgwLCBEYXRlLm5vdygpIC0gdGhpcy55byksIHMgPSBNYXRoLm1heCgwLCBlIC0gbik7XG4gICAgICAgIC8vIEd1YXJkIGFnYWluc3QgbGFzdEF0dGVtcHRUaW1lIGJlaW5nIGluIHRoZSBmdXR1cmUgZHVlIHRvIGEgY2xvY2sgY2hhbmdlLlxuICAgICAgICAgICAgICAgIHMgPiAwICYmIE8oXCJFeHBvbmVudGlhbEJhY2tvZmZcIiwgYEJhY2tpbmcgb2ZmIGZvciAke3N9IG1zIChiYXNlIGRlbGF5OiAke3RoaXMud299IG1zLCBkZWxheSB3aXRoIGppdHRlcjogJHtlfSBtcywgbGFzdCBhdHRlbXB0OiAke259IG1zIGFnbylgKSwgXG4gICAgICAgIHRoaXMubW8gPSB0aGlzLkpuLmVucXVldWVBZnRlckRlbGF5KHRoaXMudGltZXJJZCwgcywgKCgpID0+ICh0aGlzLnlvID0gRGF0ZS5ub3coKSwgXG4gICAgICAgIHQoKSkpKSwgXG4gICAgICAgIC8vIEFwcGx5IGJhY2tvZmYgZmFjdG9yIHRvIGRldGVybWluZSBuZXh0IGRlbGF5IGFuZCBlbnN1cmUgaXQgaXMgd2l0aGluXG4gICAgICAgIC8vIGJvdW5kcy5cbiAgICAgICAgdGhpcy53byAqPSB0aGlzLmZvLCB0aGlzLndvIDwgdGhpcy5sbyAmJiAodGhpcy53byA9IHRoaXMubG8pLCB0aGlzLndvID4gdGhpcy5fbyAmJiAodGhpcy53byA9IHRoaXMuX28pO1xuICAgIH1cbiAgICBFbygpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5tbyAmJiAodGhpcy5tby5za2lwRGVsYXkoKSwgdGhpcy5tbyA9IG51bGwpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMubW8gJiYgKHRoaXMubW8uY2FuY2VsKCksIHRoaXMubW8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSByYW5kb20gdmFsdWUgaW4gdGhlIHJhbmdlIFstY3VycmVudEJhc2VNcy8yLCBjdXJyZW50QmFzZU1zLzJdICovICAgIFRvKCkge1xuICAgICAgICByZXR1cm4gKE1hdGgucmFuZG9tKCkgLSAuNSkgKiB0aGlzLndvO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGlzIGFuIGFic3RyYWN0IGJhc2UgY2xhc3MgdGhhdCByZXByZXNlbnRzIGEgc3RyZWFtaW5nIFJQQ1xuICogdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kLiBJdCdzIGJ1aWx0IG9uIHRvcCBvZiB0aGUgY29ubmVjdGlvbnMgb3duIHN1cHBvcnRcbiAqIGZvciBzdHJlYW1pbmcgUlBDcywgYW5kIGFkZHMgc2V2ZXJhbCBjcml0aWNhbCBmZWF0dXJlcyBmb3Igb3VyIGNsaWVudHM6XG4gKlxuICogICAtIEV4cG9uZW50aWFsIGJhY2tvZmYgb24gZmFpbHVyZVxuICogICAtIEF1dGhlbnRpY2F0aW9uIHZpYSBDcmVkZW50aWFsc1Byb3ZpZGVyXG4gKiAgIC0gRGlzcGF0Y2hpbmcgYWxsIGNhbGxiYWNrcyBpbnRvIHRoZSBzaGFyZWQgd29ya2VyIHF1ZXVlXG4gKiAgIC0gQ2xvc2luZyBpZGxlIHN0cmVhbXMgYWZ0ZXIgNjAgc2Vjb25kcyBvZiBpbmFjdGl2aXR5XG4gKlxuICogU3ViY2xhc3NlcyBvZiBQZXJzaXN0ZW50U3RyZWFtIGltcGxlbWVudCBzZXJpYWxpemF0aW9uIG9mIG1vZGVscyB0byBhbmRcbiAqIGZyb20gdGhlIEpTT04gcmVwcmVzZW50YXRpb24gb2YgdGhlIHByb3RvY29sIGJ1ZmZlcnMgZm9yIGEgc3BlY2lmaWNcbiAqIHN0cmVhbWluZyBSUEMuXG4gKlxuICogIyMgU3RhcnRpbmcgYW5kIFN0b3BwaW5nXG4gKlxuICogU3RyZWFtaW5nIFJQQ3MgYXJlIHN0YXRlZnVsIGFuZCBuZWVkIHRvIGJlIHN0YXJ0KCllZCBiZWZvcmUgbWVzc2FnZXMgY2FuXG4gKiBiZSBzZW50IGFuZCByZWNlaXZlZC4gVGhlIFBlcnNpc3RlbnRTdHJlYW0gd2lsbCBjYWxsIHRoZSBvbk9wZW4oKSBmdW5jdGlvblxuICogb2YgdGhlIGxpc3RlbmVyIG9uY2UgdGhlIHN0cmVhbSBpcyByZWFkeSB0byBhY2NlcHQgcmVxdWVzdHMuXG4gKlxuICogU2hvdWxkIGEgc3RhcnQoKSBmYWlsLCBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgcmVnaXN0ZXJlZCBvbkNsb3NlKClcbiAqIGxpc3RlbmVyIHdpdGggYSBGaXJlc3RvcmVFcnJvciBpbmRpY2F0aW5nIHdoYXQgd2VudCB3cm9uZy5cbiAqXG4gKiBBIFBlcnNpc3RlbnRTdHJlYW0gY2FuIGJlIHN0YXJ0ZWQgYW5kIHN0b3BwZWQgcmVwZWF0ZWRseS5cbiAqXG4gKiBHZW5lcmljIHR5cGVzOlxuICogIFNlbmRUeXBlOiBUaGUgdHlwZSBvZiB0aGUgb3V0Z29pbmcgbWVzc2FnZSBvZiB0aGUgdW5kZXJseWluZ1xuICogICAgY29ubmVjdGlvbiBzdHJlYW1cbiAqICBSZWNlaXZlVHlwZTogVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgTGlzdGVuZXJUeXBlOiBUaGUgdHlwZSBvZiB0aGUgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIHVzZWQgZm9yIGNhbGxiYWNrc1xuICovXG5jbGFzcyBRbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgdSkge1xuICAgICAgICB0aGlzLkpuID0gdCwgdGhpcy5BbyA9IG4sIHRoaXMuUm8gPSBzLCB0aGlzLmJvID0gaSwgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlciA9IHIsIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciA9IG8sIHRoaXMubGlzdGVuZXIgPSB1LCB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNsb3NlIGNvdW50IHRoYXQncyBpbmNyZW1lbnRlZCBldmVyeSB0aW1lIHRoZSBzdHJlYW0gaXMgY2xvc2VkOyB1c2VkIGJ5XG4gICAgICAgICAqIGdldENsb3NlR3VhcmRlZERpc3BhdGNoZXIoKSB0byBpbnZhbGlkYXRlIGNhbGxiYWNrcyB0aGF0IGhhcHBlbiBhZnRlclxuICAgICAgICAgKiBjbG9zZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuUG8gPSAwLCB0aGlzLlZvID0gbnVsbCwgdGhpcy52byA9IG51bGwsIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5TbyA9IG5ldyBLbyh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHN0YXJ0KCkgaGFzIGJlZW4gY2FsbGVkIGFuZCBubyBlcnJvciBoYXMgb2NjdXJyZWQuIFRydWVcbiAgICAgKiBpbmRpY2F0ZXMgdGhlIHN0cmVhbSBpcyBvcGVuIG9yIGluIHRoZSBwcm9jZXNzIG9mIG9wZW5pbmcgKHdoaWNoXG4gICAgICogZW5jb21wYXNzZXMgcmVzcGVjdGluZyBiYWNrb2ZmLCBnZXR0aW5nIGF1dGggdG9rZW5zLCBhbmQgc3RhcnRpbmcgdGhlXG4gICAgICogYWN0dWFsIFJQQykuIFVzZSBpc09wZW4oKSB0byBkZXRlcm1pbmUgaWYgdGhlIHN0cmVhbSBpcyBvcGVuIGFuZCByZWFkeSBmb3JcbiAgICAgKiBvdXRib3VuZCByZXF1ZXN0cy5cbiAgICAgKi8gICAgRG8oKSB7XG4gICAgICAgIHJldHVybiAxIC8qIFN0YXJ0aW5nICovID09PSB0aGlzLnN0YXRlIHx8IDUgLyogQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLkNvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIENvKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBPcGVuICovID09PSB0aGlzLnN0YXRlIHx8IDMgLyogSGVhbHRoeSAqLyA9PT0gdGhpcy5zdGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RhcnRzIHRoZSBSUEMuIE9ubHkgYWxsb3dlZCBpZiBpc1N0YXJ0ZWQoKSByZXR1cm5zIGZhbHNlLiBUaGUgc3RyZWFtIGlzXG4gICAgICogbm90IGltbWVkaWF0ZWx5IHJlYWR5IGZvciB1c2U6IG9uT3BlbigpIHdpbGwgYmUgaW52b2tlZCB3aGVuIHRoZSBSUEMgaXNcbiAgICAgKiByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMsIGF0IHdoaWNoIHBvaW50IGlzT3BlbigpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICpcbiAgICAgKiBXaGVuIHN0YXJ0IHJldHVybnMsIGlzU3RhcnRlZCgpIHdpbGwgcmV0dXJuIHRydWUuXG4gICAgICovICAgIHN0YXJ0KCkge1xuICAgICAgICA0IC8qIEVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLnhvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5EbygpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBJbml0aWFsICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWZ0ZXIgYW4gZXJyb3IgdGhlIHN0cmVhbSB3aWxsIHVzdWFsbHkgYmFjayBvZmYgb24gdGhlIG5leHQgYXR0ZW1wdCB0b1xuICAgICAqIHN0YXJ0IGl0LiBJZiB0aGUgZXJyb3Igd2FycmFudHMgYW4gaW1tZWRpYXRlIHJlc3RhcnQgb2YgdGhlIHN0cmVhbSwgdGhlXG4gICAgICogc2VuZGVyIGNhbiB1c2UgdGhpcyB0byBpbmRpY2F0ZSB0aGF0IHRoZSByZWNlaXZlciBzaG91bGQgbm90IGJhY2sgb2ZmLlxuICAgICAqXG4gICAgICogRWFjaCBlcnJvciB3aWxsIGNhbGwgdGhlIG9uQ2xvc2UoKSBsaXN0ZW5lci4gVGhhdCBmdW5jdGlvbiBjYW4gZGVjaWRlIHRvXG4gICAgICogaW5oaWJpdCBiYWNrb2ZmIGlmIHJlcXVpcmVkLlxuICAgICAqLyAgICBObygpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDAgLyogSW5pdGlhbCAqLyAsIHRoaXMuU28ucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFya3MgdGhpcyBzdHJlYW0gYXMgaWRsZS4gSWYgbm8gZnVydGhlciBhY3Rpb25zIGFyZSBwZXJmb3JtZWQgb24gdGhlXG4gICAgICogc3RyZWFtIGZvciBvbmUgbWludXRlLCB0aGUgc3RyZWFtIHdpbGwgYXV0b21hdGljYWxseSBjbG9zZSBpdHNlbGYgYW5kXG4gICAgICogbm90aWZ5IHRoZSBzdHJlYW0ncyBvbkNsb3NlKCkgaGFuZGxlciB3aXRoIFN0YXR1cy5PSy4gVGhlIHN0cmVhbSB3aWxsIHRoZW5cbiAgICAgKiBiZSBpbiBhICFpc1N0YXJ0ZWQoKSBzdGF0ZSwgcmVxdWlyaW5nIHRoZSBjYWxsZXIgdG8gc3RhcnQgdGhlIHN0cmVhbSBhZ2FpblxuICAgICAqIGJlZm9yZSBmdXJ0aGVyIHVzZS5cbiAgICAgKlxuICAgICAqIE9ubHkgc3RyZWFtcyB0aGF0IGFyZSBpbiBzdGF0ZSAnT3BlbicgY2FuIGJlIG1hcmtlZCBpZGxlLCBhcyBhbGwgb3RoZXJcbiAgICAgKiBzdGF0ZXMgaW1wbHkgcGVuZGluZyBuZXR3b3JrIG9wZXJhdGlvbnMuXG4gICAgICovICAgIGtvKCkge1xuICAgICAgICAvLyBTdGFydHMgdGhlIGlkbGUgdGltZSBpZiB3ZSBhcmUgaW4gc3RhdGUgJ09wZW4nIGFuZCBhcmUgbm90IHlldCBhbHJlYWR5XG4gICAgICAgIC8vIHJ1bm5pbmcgYSB0aW1lciAoaW4gd2hpY2ggY2FzZSB0aGUgcHJldmlvdXMgaWRsZSB0aW1lb3V0IHN0aWxsIGFwcGxpZXMpLlxuICAgICAgICB0aGlzLkNvKCkgJiYgbnVsbCA9PT0gdGhpcy5WbyAmJiAodGhpcy5WbyA9IHRoaXMuSm4uZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5BbywgNmU0LCAoKCkgPT4gdGhpcy5NbygpKSkpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBtZXNzYWdlIHRvIHRoZSB1bmRlcmx5aW5nIHN0cmVhbS4gKi8gICAgT28odCkge1xuICAgICAgICB0aGlzLkZvKCksIHRoaXMuc3RyZWFtLnNlbmQodCk7XG4gICAgfVxuICAgIC8qKiBDYWxsZWQgYnkgdGhlIGlkbGUgdGltZXIgd2hlbiB0aGUgc3RyZWFtIHNob3VsZCBjbG9zZSBkdWUgdG8gaW5hY3Rpdml0eS4gKi8gICAgYXN5bmMgTW8oKSB7XG4gICAgICAgIGlmICh0aGlzLkNvKCkpIFxuICAgICAgICAvLyBXaGVuIHRpbWluZyBvdXQgYW4gaWRsZSBzdHJlYW0gdGhlcmUncyBubyByZWFzb24gdG8gZm9yY2UgdGhlIHN0cmVhbSBpbnRvIGJhY2tvZmYgd2hlblxuICAgICAgICAvLyBpdCByZXN0YXJ0cyBzbyBzZXQgdGhlIHN0cmVhbSBzdGF0ZSB0byBJbml0aWFsIGluc3RlYWQgb2YgRXJyb3IuXG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlKDAgLyogSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgRm8oKSB7XG4gICAgICAgIHRoaXMuVm8gJiYgKHRoaXMuVm8uY2FuY2VsKCksIHRoaXMuVm8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgJG8oKSB7XG4gICAgICAgIHRoaXMudm8gJiYgKHRoaXMudm8uY2FuY2VsKCksIHRoaXMudm8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UodCwgZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy5GbygpLCB0aGlzLiRvKCksIHRoaXMuU28uY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLlBvKyssIDQgLyogRXJyb3IgKi8gIT09IHQgPyBcbiAgICAgICAgLy8gSWYgdGhpcyBpcyBhbiBpbnRlbnRpb25hbCBjbG9zZSBlbnN1cmUgd2UgZG9uJ3QgZGVsYXkgb3VyIG5leHQgY29ubmVjdGlvbiBhdHRlbXB0LlxuICAgICAgICB0aGlzLlNvLnJlc2V0KCkgOiBlICYmIGUuY29kZSA9PT0gSy5SRVNPVVJDRV9FWEhBVVNURUQgPyAoXG4gICAgICAgIC8vIExvZyB0aGUgZXJyb3IuIChQcm9iYWJseSBlaXRoZXIgJ3F1b3RhIGV4Y2VlZGVkJyBvciAnbWF4IHF1ZXVlIGxlbmd0aCByZWFjaGVkJy4pXG4gICAgICAgIEYoZS50b1N0cmluZygpKSwgRihcIlVzaW5nIG1heGltdW0gYmFja29mZiBkZWxheSB0byBwcmV2ZW50IG92ZXJsb2FkaW5nIHRoZSBiYWNrZW5kLlwiKSwgXG4gICAgICAgIHRoaXMuU28ucG8oKSkgOiBlICYmIGUuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgMyAvKiBIZWFsdGh5ICovICE9PSB0aGlzLnN0YXRlICYmIChcbiAgICAgICAgLy8gXCJ1bmF1dGhlbnRpY2F0ZWRcIiBlcnJvciBtZWFucyB0aGUgdG9rZW4gd2FzIHJlamVjdGVkLiBUaGlzIHNob3VsZCByYXJlbHlcbiAgICAgICAgLy8gaGFwcGVuIHNpbmNlIGJvdGggQXV0aCBhbmQgQXBwQ2hlY2sgZW5zdXJlIGEgc3VmZmljaWVudCBUVEwgd2hlbiB3ZVxuICAgICAgICAvLyByZXF1ZXN0IGEgdG9rZW4uIElmIGEgdXNlciBtYW51YWxseSByZXNldHMgdGhlaXIgc3lzdGVtIGNsb2NrIHRoaXMgY2FuXG4gICAgICAgIC8vIGZhaWwsIGhvd2V2ZXIuIEluIHRoaXMgY2FzZSwgd2Ugc2hvdWxkIGdldCBhIENvZGUuVU5BVVRIRU5USUNBVEVEIGVycm9yXG4gICAgICAgIC8vIGJlZm9yZSB3ZSByZWNlaXZlZCB0aGUgZmlyc3QgbWVzc2FnZSBhbmQgd2UgbmVlZCB0byBpbnZhbGlkYXRlIHRoZSB0b2tlblxuICAgICAgICAvLyB0byBlbnN1cmUgdGhhdCB3ZSBmZXRjaCBhIG5ldyB0b2tlbi5cbiAgICAgICAgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuaW52YWxpZGF0ZVRva2VuKCkpLCBcbiAgICAgICAgLy8gQ2xlYW4gdXAgdGhlIHVuZGVybHlpbmcgc3RyZWFtIGJlY2F1c2Ugd2UgYXJlIG5vIGxvbmdlciBpbnRlcmVzdGVkIGluIGV2ZW50cy5cbiAgICAgICAgbnVsbCAhPT0gdGhpcy5zdHJlYW0gJiYgKHRoaXMuQm8oKSwgdGhpcy5zdHJlYW0uY2xvc2UoKSwgdGhpcy5zdHJlYW0gPSBudWxsKSwgXG4gICAgICAgIC8vIFRoaXMgc3RhdGUgbXVzdCBiZSBhc3NpZ25lZCBiZWZvcmUgY2FsbGluZyBvbkNsb3NlKCkgdG8gYWxsb3cgdGhlIGNhbGxiYWNrIHRvXG4gICAgICAgIC8vIGluaGliaXQgYmFja29mZiBvciBvdGhlcndpc2UgbWFuaXB1bGF0ZSB0aGUgc3RhdGUgaW4gaXRzIG5vbi1zdGFydGVkIHN0YXRlLlxuICAgICAgICB0aGlzLnN0YXRlID0gdCwgXG4gICAgICAgIC8vIE5vdGlmeSB0aGUgbGlzdGVuZXIgdGhhdCB0aGUgc3RyZWFtIGNsb3NlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5saXN0ZW5lci5KcihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuIGJlIG92ZXJyaWRkZW4gdG8gcGVyZm9ybSBhZGRpdGlvbmFsIGNsZWFudXAgYmVmb3JlIHRoZSBzdHJlYW0gaXMgY2xvc2VkLlxuICAgICAqIENhbGxpbmcgc3VwZXIudGVhckRvd24oKSBpcyBub3QgcmVxdWlyZWQuXG4gICAgICovICAgIEJvKCkge31cbiAgICBhdXRoKCkge1xuICAgICAgICB0aGlzLnN0YXRlID0gMSAvKiBTdGFydGluZyAqLztcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuTG8odGhpcy5QbyksIGUgPSB0aGlzLlBvO1xuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3QsIG5dKSA9PiB7XG4gICAgICAgICAgICAvLyBTdHJlYW0gY2FuIGJlIHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3IgYXV0aGVudGljYXRpb24uXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFdlIHJlYWxseSBzaG91bGQganVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZFxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXG4gICAgICAgICAgICAvLyBvZiB3b3JtcyB0aGF0IEkgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggaW4gdGhpcyBQUi5cbiAgICAgICAgICAgIHRoaXMuUG8gPT09IGUgJiYgXG4gICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSdkIGhhdmUgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIGZvbGxvd2luZyBjYWxscyBhcmUgc2FmZSB0byBiZSBjYWxsZWQgb3V0c2lkZSB0aGVcbiAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgc2luY2UgdGhleSBkb24ndCBjaGFpbiBhc3luY2hyb25vdXMgY2FsbHNcbiAgICAgICAgICAgIHRoaXMuVW8odCwgbik7XG4gICAgICAgIH0pLCAoZSA9PiB7XG4gICAgICAgICAgICB0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBRKEsuVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnFvKHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFVvKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuTG8odGhpcy5Qbyk7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5Hbyh0LCBlKSwgdGhpcy5zdHJlYW0uenIoKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+ICh0aGlzLnN0YXRlID0gMiAvKiBPcGVuICovICwgdGhpcy52byA9IHRoaXMuSm4uZW5xdWV1ZUFmdGVyRGVsYXkodGhpcy5SbywgMWU0LCAoKCkgPT4gKHRoaXMuQ28oKSAmJiAodGhpcy5zdGF0ZSA9IDMgLyogSGVhbHRoeSAqLyksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSksIHRoaXMubGlzdGVuZXIuenIoKSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5KcigodCA9PiB7XG4gICAgICAgICAgICBuKCgoKSA9PiB0aGlzLnFvKHQpKSk7XG4gICAgICAgIH0pKSwgdGhpcy5zdHJlYW0ub25NZXNzYWdlKCh0ID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMub25NZXNzYWdlKHQpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgeG8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSA1IC8qIEJhY2tvZmYgKi8gLCB0aGlzLlNvLklvKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBJbml0aWFsICovICwgdGhpcy5zdGFydCgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8vIFZpc2libGUgZm9yIHRlc3RzXG4gICAgcW8odCkge1xuICAgICAgICAvLyBJbiB0aGVvcnkgdGhlIHN0cmVhbSBjb3VsZCBjbG9zZSBjbGVhbmx5LCBob3dldmVyLCBpbiBvdXIgY3VycmVudCBtb2RlbFxuICAgICAgICAvLyB3ZSBuZXZlciBleHBlY3QgdGhpcyB0byBoYXBwZW4gYmVjYXVzZSBpZiB3ZSBzdG9wIGEgc3RyZWFtIG91cnNlbHZlcyxcbiAgICAgICAgLy8gdGhpcyBjYWxsYmFjayB3aWxsIG5ldmVyIGJlIGNhbGxlZC4gVG8gcHJldmVudCBjYXNlcyB3aGVyZSB3ZSByZXRyeVxuICAgICAgICAvLyB3aXRob3V0IGEgYmFja29mZiBhY2NpZGVudGFsbHksIHdlIHNldCB0aGUgc3RyZWFtIHRvIGVycm9yIGluIGFsbCBjYXNlcy5cbiAgICAgICAgcmV0dXJuIE8oXCJQZXJzaXN0ZW50U3RyZWFtXCIsIGBjbG9zZSB3aXRoIGVycm9yOiAke3R9YCksIHRoaXMuc3RyZWFtID0gbnVsbCwgdGhpcy5jbG9zZSg0IC8qIEVycm9yICovICwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBcImRpc3BhdGNoZXJcIiBmdW5jdGlvbiB0aGF0IGRpc3BhdGNoZXMgb3BlcmF0aW9ucyBvbnRvIHRoZVxuICAgICAqIEFzeW5jUXVldWUgYnV0IG9ubHkgcnVucyB0aGVtIGlmIGNsb3NlQ291bnQgcmVtYWlucyB1bmNoYW5nZWQuIFRoaXMgYWxsb3dzXG4gICAgICogdXMgdG8gdHVybiBhdXRoIC8gc3RyZWFtIGNhbGxiYWNrcyBpbnRvIG5vLW9wcyBpZiB0aGUgc3RyZWFtIGlzIGNsb3NlZCAvXG4gICAgICogcmUtb3BlbmVkLCBldGMuXG4gICAgICovICAgIExvKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5Kbi5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLlBvID09PSB0ID8gZSgpIDogKE8oXCJQZXJzaXN0ZW50U3RyZWFtXCIsIFwic3RyZWFtIGNhbGxiYWNrIHNraXBwZWQgYnkgZ2V0Q2xvc2VHdWFyZGVkRGlzcGF0Y2hlci5cIiksIFxuICAgICAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSk7XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSB0aGF0IGltcGxlbWVudHMgdGhlIExpc3RlbiBSUEMuXG4gKlxuICogT25jZSB0aGUgTGlzdGVuIHN0cmVhbSBoYXMgY2FsbGVkIHRoZSBvbk9wZW4oKSBsaXN0ZW5lciwgYW55IG51bWJlciBvZlxuICogbGlzdGVuKCkgYW5kIHVubGlzdGVuKCkgY2FsbHMgY2FuIGJlIG1hZGUgdG8gY29udHJvbCB3aGF0IGNoYW5nZXMgd2lsbCBiZVxuICogc2VudCBmcm9tIHRoZSBzZXJ2ZXIgZm9yIExpc3RlblJlc3BvbnNlcy5cbiAqLyBjbGFzcyBqbyBleHRlbmRzIFFvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibGlzdGVuX3N0cmVhbV9jb25uZWN0aW9uX2JhY2tvZmZcIiAvKiBMaXN0ZW5TdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwibGlzdGVuX3N0cmVhbV9pZGxlXCIgLyogTGlzdGVuU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBIZWFsdGhDaGVja1RpbWVvdXQgKi8gLCBlLCBuLCBzLCByKSwgXG4gICAgICAgIHRoaXMuTSA9IGk7XG4gICAgfVxuICAgIEdvKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm8uaG8oXCJMaXN0ZW5cIiwgdCwgZSk7XG4gICAgfVxuICAgIG9uTWVzc2FnZSh0KSB7XG4gICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHlcbiAgICAgICAgdGhpcy5Tby5yZXNldCgpO1xuICAgICAgICBjb25zdCBlID0gUnModGhpcy5NLCB0KSwgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgb25seSByZWFjaGVkIGEgY29uc2lzdGVudCBzbmFwc2hvdCBmb3IgdGhlIGVudGlyZSBzdHJlYW0gaWYgdGhlcmVcbiAgICAgICAgICAgIC8vIGlzIGEgcmVhZF90aW1lIHNldCBhbmQgaXQgYXBwbGllcyB0byBhbGwgdGFyZ2V0cyAoaS5lLiB0aGUgbGlzdCBvZlxuICAgICAgICAgICAgLy8gdGFyZ2V0cyBpcyBlbXB0eSkuIFRoZSBiYWNrZW5kIGlzIGd1YXJhbnRlZWQgdG8gc2VuZCBzdWNoIHJlc3BvbnNlcy5cbiAgICAgICAgICAgIGlmICghKFwidGFyZ2V0Q2hhbmdlXCIgaW4gdCkpIHJldHVybiBjdC5taW4oKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldENoYW5nZTtcbiAgICAgICAgICAgIHJldHVybiBlLnRhcmdldElkcyAmJiBlLnRhcmdldElkcy5sZW5ndGggPyBjdC5taW4oKSA6IGUucmVhZFRpbWUgPyBmcyhlLnJlYWRUaW1lKSA6IGN0Lm1pbigpO1xuICAgICAgICB9KHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0ZW5lci5LbyhlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSBnaXZlbiB0YXJnZXQuIElmIHRoZSB0YXJnZXRcbiAgICAgKiBpbmNsdWRlcyBhIHJlc3VtZVRva2VuIGl0IHdpbGwgYmUgaW5jbHVkZWQgaW4gdGhlIHJlcXVlc3QuIFJlc3VsdHMgdGhhdFxuICAgICAqIGFmZmVjdCB0aGUgdGFyZ2V0IHdpbGwgYmUgc3RyZWFtZWQgYmFjayBhcyBXYXRjaENoYW5nZSBtZXNzYWdlcyB0aGF0XG4gICAgICogcmVmZXJlbmNlIHRoZSB0YXJnZXRJZC5cbiAgICAgKi8gICAgUW8odCkge1xuICAgICAgICBjb25zdCBlID0ge307XG4gICAgICAgIGUuZGF0YWJhc2UgPSBwcyh0aGlzLk0pLCBlLmFkZFRhcmdldCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0O1xuICAgICAgICAgICAgcmV0dXJuIG4gPSB3ZShzKSA/IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IHZzKHQsIHMpXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHF1ZXJ5OiBTcyh0LCBzKVxuICAgICAgICAgICAgfSwgbi50YXJnZXRJZCA9IGUudGFyZ2V0SWQsIGUucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCA/IG4ucmVzdW1lVG9rZW4gPSBocyh0LCBlLnJlc3VtZVRva2VuKSA6IGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhjdC5taW4oKSkgPiAwICYmIChcbiAgICAgICAgICAgIC8vIFRPRE8od3VhbmR5KTogQ29uc2lkZXIgcmVtb3ZpbmcgYWJvdmUgY2hlY2sgYmVjYXVzZSBpdCBpcyBtb3N0IGxpa2VseSB0cnVlLlxuICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAvLyBvZiBzZXJpYWxpemF0aW9uKS5cbiAgICAgICAgICAgIG4ucmVhZFRpbWUgPSBjcyh0LCBlLnNuYXBzaG90VmVyc2lvbi50b1RpbWVzdGFtcCgpKSksIG47XG4gICAgICAgIH0odGhpcy5NLCB0KTtcbiAgICAgICAgY29uc3QgbiA9IENzKHRoaXMuTSwgdCk7XG4gICAgICAgIG4gJiYgKGUubGFiZWxzID0gbiksIHRoaXMuT28oZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgICAqIGdpdmVuIHRhcmdldElkLlxuICAgICAqLyAgICBqbyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IHBzKHRoaXMuTSksIGUucmVtb3ZlVGFyZ2V0ID0gdCwgdGhpcy5PbyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBXbyBleHRlbmRzIFFvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFdyaXRlU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcIndyaXRlX3N0cmVhbV9pZGxlXCIgLyogV3JpdGVTdHJlYW1JZGxlICovICwgXCJoZWFsdGhfY2hlY2tfdGltZW91dFwiIC8qIEhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5NID0gaSwgdGhpcy5XbyA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCB6bygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuV287XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5XbyA9ICExLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHZvaWQgMCwgc3VwZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgQm8oKSB7XG4gICAgICAgIHRoaXMuV28gJiYgdGhpcy5IbyhbXSk7XG4gICAgfVxuICAgIEdvKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYm8uaG8oXCJXcml0ZVwiLCB0LCBlKTtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAvLyBBbHdheXMgY2FwdHVyZSB0aGUgbGFzdCBzdHJlYW0gdG9rZW4uXG4gICAgICAgIFUoISF0LnN0cmVhbVRva2VuKSwgdGhpcy5sYXN0U3RyZWFtVG9rZW4gPSB0LnN0cmVhbVRva2VuLCB0aGlzLldvKSB7XG4gICAgICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgZmlyc3Qgd3JpdGUgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5LFxuICAgICAgICAgICAgLy8gTm90ZSwgdGhhdCB3ZSBjb3VsZCBjb25zaWRlciBhIHN1Y2Nlc3NmdWwgaGFuZHNoYWtlIGhlYWx0aHksIGhvd2V2ZXIsXG4gICAgICAgICAgICAvLyB0aGUgd3JpdGUgaXRzZWxmIG1pZ2h0IGJlIGNhdXNpbmcgYW4gZXJyb3Igd2Ugd2FudCB0byBiYWNrIG9mZiBmcm9tLlxuICAgICAgICAgICAgdGhpcy5Tby5yZXNldCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IFZzKHQud3JpdGVSZXN1bHRzLCB0LmNvbW1pdFRpbWUpLCBuID0gZnModC5jb21taXRUaW1lKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxpc3RlbmVyLkpvKG4sIGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRoZSBmaXJzdCByZXNwb25zZSBpcyBhbHdheXMgdGhlIGhhbmRzaGFrZSByZXNwb25zZVxuICAgICAgICByZXR1cm4gVSghdC53cml0ZVJlc3VsdHMgfHwgMCA9PT0gdC53cml0ZVJlc3VsdHMubGVuZ3RoKSwgdGhpcy5XbyA9ICEwLCB0aGlzLmxpc3RlbmVyLllvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNlbmRzIGFuIGluaXRpYWwgc3RyZWFtVG9rZW4gdG8gdGhlIHNlcnZlciwgcGVyZm9ybWluZyB0aGUgaGFuZHNoYWtlXG4gICAgICogcmVxdWlyZWQgdG8gbWFrZSB0aGUgU3RyZWFtaW5nV3JpdGUgUlBDIHdvcmsuIFN1YnNlcXVlbnRcbiAgICAgKiBjYWxscyBzaG91bGQgd2FpdCB1bnRpbCBvbkhhbmRzaGFrZUNvbXBsZXRlIHdhcyBjYWxsZWQuXG4gICAgICovICAgIFhvKCkge1xuICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IFN1cHBvcnQgc3RyZWFtIHJlc3VtcHRpb24uIFdlIGludGVudGlvbmFsbHkgZG8gbm90IHNldCB0aGVcbiAgICAgICAgLy8gc3RyZWFtIHRva2VuIG9uIHRoZSBoYW5kc2hha2UsIGlnbm9yaW5nIGFueSBzdHJlYW0gdG9rZW4gd2UgbWlnaHQgaGF2ZS5cbiAgICAgICAgY29uc3QgdCA9IHt9O1xuICAgICAgICB0LmRhdGFiYXNlID0gcHModGhpcy5NKSwgdGhpcy5Pbyh0KTtcbiAgICB9XG4gICAgLyoqIFNlbmRzIGEgZ3JvdXAgb2YgbXV0YXRpb25zIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZCB0byBhcHBseS4gKi8gICAgSG8odCkge1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAgc3RyZWFtVG9rZW46IHRoaXMubGFzdFN0cmVhbVRva2VuLFxuICAgICAgICAgICAgd3JpdGVzOiB0Lm1hcCgodCA9PiBicyh0aGlzLk0sIHQpKSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5PbyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERhdGFzdG9yZSBhbmQgaXRzIHJlbGF0ZWQgbWV0aG9kcyBhcmUgYSB3cmFwcGVyIGFyb3VuZCB0aGUgZXh0ZXJuYWwgR29vZ2xlXG4gKiBDbG91ZCBEYXRhc3RvcmUgZ3JwYyBBUEksIHdoaWNoIHByb3ZpZGVzIGFuIGludGVyZmFjZSB0aGF0IGlzIG1vcmUgY29udmVuaWVudFxuICogZm9yIHRoZSByZXN0IG9mIHRoZSBjbGllbnQgU0RLIGFyY2hpdGVjdHVyZSB0byBjb25zdW1lLlxuICovXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIERhdGFzdG9yZSB0aGF0IGV4cG9zZXMgYWRkaXRpb25hbCBzdGF0ZSBmb3IgaW50ZXJuYWxcbiAqIGNvbnN1bXB0aW9uLlxuICovXG5jbGFzcyB6byBleHRlbmRzIGNsYXNzIHt9IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5ibyA9IG4sIHRoaXMuTSA9IHMsIFxuICAgICAgICB0aGlzLlpvID0gITE7XG4gICAgfVxuICAgIHR1KCkge1xuICAgICAgICBpZiAodGhpcy5abykgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIlRoZSBjbGllbnQgaGFzIGFscmVhZHkgYmVlbiB0ZXJtaW5hdGVkLlwiKTtcbiAgICB9XG4gICAgLyoqIEludm9rZXMgdGhlIHByb3ZpZGVkIFJQQyB3aXRoIGF1dGggYW5kIEFwcENoZWNrIHRva2Vucy4gKi8gICAgcm8odCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy50dSgpLCBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzLmdldFRva2VuKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5nZXRUb2tlbigpIF0pLnRoZW4oKChbcywgaV0pID0+IHRoaXMuYm8ucm8odCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gSy5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFEoSy5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICBjbyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR1KCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtzLCBpXSkgPT4gdGhpcy5iby5jbyh0LCBlLCBuLCBzLCBpKSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IFwiRmlyZWJhc2VFcnJvclwiID09PSB0Lm5hbWUgPyAodC5jb2RlID09PSBLLlVOQVVUSEVOVElDQVRFRCAmJiAodGhpcy5hdXRoQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCksIFxuICAgICAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpKSwgdCkgOiBuZXcgUShLLlVOS05PV04sIHQudG9TdHJpbmcoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgdGVybWluYXRlKCkge1xuICAgICAgICB0aGlzLlpvID0gITA7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZXhwKTogTWFrZSBzdXJlIHRoZXJlIGlzIG9ubHkgb25lIERhdGFzdG9yZSBpbnN0YW5jZSBwZXJcbi8vIGZpcmVzdG9yZS1leHAgY2xpZW50LlxuLyoqXG4gKiBBIGNvbXBvbmVudCB1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0byB0cmFjayB0aGUgT25saW5lU3RhdGUgKHRoYXQgaXMsXG4gKiB3aGV0aGVyIG9yIG5vdCB0aGUgY2xpZW50IGFzIGEgd2hvbGUgc2hvdWxkIGJlIGNvbnNpZGVyZWQgdG8gYmUgb25saW5lIG9yXG4gKiBvZmZsaW5lKSwgaW1wbGVtZW50aW5nIHRoZSBhcHByb3ByaWF0ZSBoZXVyaXN0aWNzLlxuICpcbiAqIEluIHBhcnRpY3VsYXIsIHdoZW4gdGhlIGNsaWVudCBpcyB0cnlpbmcgdG8gY29ubmVjdCB0byB0aGUgYmFja2VuZCwgd2VcbiAqIGFsbG93IHVwIHRvIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMgd2l0aGluIE9OTElORV9TVEFURV9USU1FT1VUX01TIGZvclxuICogYSBjb25uZWN0aW9uIHRvIHN1Y2NlZWQuIElmIHdlIGhhdmUgdG9vIG1hbnkgZmFpbHVyZXMgb3IgdGhlIHRpbWVvdXQgZWxhcHNlcyxcbiAqIHRoZW4gd2Ugc2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lLCBhbmQgdGhlIGNsaWVudCB3aWxsIGJlaGF2ZSBhcyBpZlxuICogaXQgaXMgb2ZmbGluZSAoZ2V0KClzIHdpbGwgcmV0dXJuIGNhY2hlZCBkYXRhLCBldGMuKS5cbiAqL1xuY2xhc3MgSG8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3luY1F1ZXVlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBlLCBcbiAgICAgICAgLyoqIFRoZSBjdXJyZW50IE9ubGluZVN0YXRlLiAqL1xuICAgICAgICB0aGlzLnN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjb3VudCBvZiBjb25zZWN1dGl2ZSBmYWlsdXJlcyB0byBvcGVuIHRoZSBzdHJlYW0uIElmIGl0IHJlYWNoZXMgdGhlXG4gICAgICAgICAqIG1heGltdW0gZGVmaW5lZCBieSBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTLCB3ZSdsbCBzZXQgdGhlIE9ubGluZVN0YXRlIHRvXG4gICAgICAgICAqIE9mZmxpbmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmV1ID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHRpbWVyIHRoYXQgZWxhcHNlcyBhZnRlciBPTkxJTkVfU1RBVEVfVElNRU9VVF9NUywgYXQgd2hpY2ggcG9pbnQgd2VcbiAgICAgICAgICogdHJhbnNpdGlvbiBmcm9tIE9ubGluZVN0YXRlLlVua25vd24gdG8gT25saW5lU3RhdGUuT2ZmbGluZSB3aXRob3V0IHdhaXRpbmdcbiAgICAgICAgICogZm9yIHRoZSBzdHJlYW0gdG8gYWN0dWFsbHkgZmFpbCAoTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB0aW1lcykuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm51ID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIHRoZSBjbGllbnQgc2hvdWxkIGxvZyBhIHdhcm5pbmcgbWVzc2FnZSBpZiBpdCBmYWlscyB0byBjb25uZWN0IHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kIChpbml0aWFsbHkgdHJ1ZSwgY2xlYXJlZCBhZnRlciBhIHN1Y2Nlc3NmdWwgc3RyZWFtLCBvciBpZiB3ZSd2ZVxuICAgICAgICAgKiBsb2dnZWQgdGhlIG1lc3NhZ2UgYWxyZWFkeSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN1ID0gITA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENhbGxlZCBieSBSZW1vdGVTdG9yZSB3aGVuIGEgd2F0Y2ggc3RyZWFtIGlzIHN0YXJ0ZWQgKGluY2x1ZGluZyBvbiBlYWNoXG4gICAgICogYmFja29mZiBhdHRlbXB0KS5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgaXMgdGhlIGZpcnN0IGF0dGVtcHQsIGl0IHNldHMgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gYW5kIHN0YXJ0c1xuICAgICAqIHRoZSBvbmxpbmVTdGF0ZVRpbWVyLlxuICAgICAqLyAgICBpdSgpIHtcbiAgICAgICAgMCA9PT0gdGhpcy5ldSAmJiAodGhpcy5ydShcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgdGhpcy5udSA9IHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQWZ0ZXJEZWxheShcIm9ubGluZV9zdGF0ZV90aW1lb3V0XCIgLyogT25saW5lU3RhdGVUaW1lb3V0ICovICwgMWU0LCAoKCkgPT4gKHRoaXMubnUgPSBudWxsLCBcbiAgICAgICAgdGhpcy5vdShcIkJhY2tlbmQgZGlkbid0IHJlc3BvbmQgd2l0aGluIDEwIHNlY29uZHMuXCIpLCB0aGlzLnJ1KFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8pLCBcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKCkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIG91ciBPbmxpbmVTdGF0ZSBhcyBhcHByb3ByaWF0ZSBhZnRlciB0aGUgd2F0Y2ggc3RyZWFtIHJlcG9ydHMgYVxuICAgICAqIGZhaWx1cmUuIFRoZSBmaXJzdCBmYWlsdXJlIG1vdmVzIHVzIHRvIHRoZSAnVW5rbm93bicgc3RhdGUuIFdlIHRoZW4gbWF5XG4gICAgICogYWxsb3cgbXVsdGlwbGUgZmFpbHVyZXMgKGJhc2VkIG9uIE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMpIGJlZm9yZSB3ZVxuICAgICAqIGFjdHVhbGx5IHRyYW5zaXRpb24gdG8gdGhlICdPZmZsaW5lJyBzdGF0ZS5cbiAgICAgKi8gICAgdXUodCkge1xuICAgICAgICBcIk9ubGluZVwiIC8qIE9ubGluZSAqLyA9PT0gdGhpcy5zdGF0ZSA/IHRoaXMucnUoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykgOiAodGhpcy5ldSsrLCBcbiAgICAgICAgdGhpcy5ldSA+PSAxICYmICh0aGlzLmF1KCksIHRoaXMub3UoYENvbm5lY3Rpb24gZmFpbGVkIDEgdGltZXMuIE1vc3QgcmVjZW50IGVycm9yOiAke3QudG9TdHJpbmcoKX1gKSwgXG4gICAgICAgIHRoaXMucnUoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLykpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwbGljaXRseSBzZXRzIHRoZSBPbmxpbmVTdGF0ZSB0byB0aGUgc3BlY2lmaWVkIHN0YXRlLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgcmVzZXRzIG91ciB0aW1lcnMgLyBmYWlsdXJlIGNvdW50ZXJzLCBldGMuIHVzZWQgYnkgb3VyXG4gICAgICogT2ZmbGluZSBoZXVyaXN0aWNzLCBzbyBtdXN0IG5vdCBiZSB1c2VkIGluIHBsYWNlIG9mXG4gICAgICogaGFuZGxlV2F0Y2hTdHJlYW1TdGFydCgpIGFuZCBoYW5kbGVXYXRjaFN0cmVhbUZhaWx1cmUoKS5cbiAgICAgKi8gICAgc2V0KHQpIHtcbiAgICAgICAgdGhpcy5hdSgpLCB0aGlzLmV1ID0gMCwgXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8gPT09IHQgJiYgKFxuICAgICAgICAvLyBXZSd2ZSBjb25uZWN0ZWQgdG8gd2F0Y2ggYXQgbGVhc3Qgb25jZS4gRG9uJ3Qgd2FybiB0aGUgZGV2ZWxvcGVyXG4gICAgICAgIC8vIGFib3V0IGJlaW5nIG9mZmxpbmUgZ29pbmcgZm9yd2FyZC5cbiAgICAgICAgdGhpcy5zdSA9ICExKSwgdGhpcy5ydSh0KTtcbiAgICB9XG4gICAgcnUodCkge1xuICAgICAgICB0ICE9PSB0aGlzLnN0YXRlICYmICh0aGlzLnN0YXRlID0gdCwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIodCkpO1xuICAgIH1cbiAgICBvdSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBgQ291bGQgbm90IHJlYWNoIENsb3VkIEZpcmVzdG9yZSBiYWNrZW5kLiAke3R9XFxuVGhpcyB0eXBpY2FsbHkgaW5kaWNhdGVzIHRoYXQgeW91ciBkZXZpY2UgZG9lcyBub3QgaGF2ZSBhIGhlYWx0aHkgSW50ZXJuZXQgY29ubmVjdGlvbiBhdCB0aGUgbW9tZW50LiBUaGUgY2xpZW50IHdpbGwgb3BlcmF0ZSBpbiBvZmZsaW5lIG1vZGUgdW50aWwgaXQgaXMgYWJsZSB0byBzdWNjZXNzZnVsbHkgY29ubmVjdCB0byB0aGUgYmFja2VuZC5gO1xuICAgICAgICB0aGlzLnN1ID8gKEYoZSksIHRoaXMuc3UgPSAhMSkgOiBPKFwiT25saW5lU3RhdGVUcmFja2VyXCIsIGUpO1xuICAgIH1cbiAgICBhdSgpIHtcbiAgICAgICAgbnVsbCAhPT0gdGhpcy5udSAmJiAodGhpcy5udS5jYW5jZWwoKSwgdGhpcy5udSA9IG51bGwpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgSm8ge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsb2NhbCBzdG9yZSwgdXNlZCB0byBmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSB3aXRoIG91dGJvdW5kIG11dGF0aW9ucy5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGNsaWVudC1zaWRlIHByb3h5IGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBiYWNrZW5kLiAqL1xuICAgIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlID0gdCwgdGhpcy5kYXRhc3RvcmUgPSBlLCB0aGlzLmFzeW5jUXVldWUgPSBuLCB0aGlzLnJlbW90ZVN5bmNlciA9IHt9LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiB1cCB0byBNQVhfUEVORElOR19XUklURVMgd3JpdGVzIHRoYXQgd2UgaGF2ZSBmZXRjaGVkIGZyb20gdGhlXG4gICAgICAgICAqIExvY2FsU3RvcmUgdmlhIGZpbGxXcml0ZVBpcGVsaW5lKCkgYW5kIGhhdmUgb3Igd2lsbCBzZW5kIHRvIHRoZSB3cml0ZVxuICAgICAgICAgKiBzdHJlYW0uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW5ldmVyIHdyaXRlUGlwZWxpbmUubGVuZ3RoID4gMCB0aGUgUmVtb3RlU3RvcmUgd2lsbCBhdHRlbXB0IHRvIHN0YXJ0IG9yXG4gICAgICAgICAqIHJlc3RhcnQgdGhlIHdyaXRlIHN0cmVhbS4gV2hlbiB0aGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkIHRoZSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAqIHBpcGVsaW5lIHdpbGwgYmUgc2VudCBpbiBvcmRlci5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGVzIHJlbWFpbiBpbiB3cml0ZVBpcGVsaW5lIHVudGlsIHRoZXkgYXJlIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZFxuICAgICAgICAgKiBhbmQgdGh1cyB3aWxsIGF1dG9tYXRpY2FsbHkgYmUgcmUtc2VudCBpZiB0aGUgc3RyZWFtIGlzIGludGVycnVwdGVkIC9cbiAgICAgICAgICogcmVzdGFydGVkIGJlZm9yZSB0aGV5J3JlIGFja25vd2xlZGdlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogV3JpdGUgcmVzcG9uc2VzIGZyb20gdGhlIGJhY2tlbmQgYXJlIGxpbmtlZCB0byB0aGVpciBvcmlnaW5hdGluZyByZXF1ZXN0XG4gICAgICAgICAqIHB1cmVseSBiYXNlZCBvbiBvcmRlciwgYW5kIHNvIHdlIGNhbiBqdXN0IHNoaWZ0KCkgd3JpdGVzIGZyb20gdGhlIGZyb250IG9mXG4gICAgICAgICAqIHRoZSB3cml0ZVBpcGVsaW5lIGFzIHdlIHJlY2VpdmUgcmVzcG9uc2VzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jdSA9IFtdLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbWFwcGluZyBvZiB3YXRjaGVkIHRhcmdldHMgdGhhdCB0aGUgY2xpZW50IGNhcmVzIGFib3V0IHRyYWNraW5nIGFuZCB0aGVcbiAgICAgICAgICogdXNlciBoYXMgZXhwbGljaXRseSBjYWxsZWQgYSAnbGlzdGVuJyBmb3IgdGhpcyB0YXJnZXQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIHRhcmdldHMgbWF5IG9yIG1heSBub3QgaGF2ZSBiZWVuIHNlbnQgdG8gb3IgYWNrbm93bGVkZ2VkIGJ5IHRoZVxuICAgICAgICAgKiBzZXJ2ZXIuIE9uIHJlLWVzdGFibGlzaGluZyB0aGUgbGlzdGVuIHN0cmVhbSwgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgc2VudFxuICAgICAgICAgKiB0byB0aGUgc2VydmVyLiBUaGUgdGFyZ2V0cyByZW1vdmVkIHdpdGggdW5saXN0ZW5zIGFyZSByZW1vdmVkIGVhZ2VybHlcbiAgICAgICAgICogd2l0aG91dCB3YWl0aW5nIGZvciBjb25maXJtYXRpb24gZnJvbSB0aGUgbGlzdGVuIHN0cmVhbS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaHUgPSBuZXcgTWFwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgc2V0IG9mIHJlYXNvbnMgZm9yIHdoeSB0aGUgUmVtb3RlU3RvcmUgbWF5IGJlIG9mZmxpbmUuIElmIGVtcHR5LCB0aGVcbiAgICAgICAgICogUmVtb3RlU3RvcmUgbWF5IHN0YXJ0IGl0cyBuZXR3b3JrIGNvbm5lY3Rpb25zLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sdSA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogRXZlbnQgaGFuZGxlcnMgdGhhdCBnZXQgY2FsbGVkIHdoZW4gdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQgb3IgZW5hYmxlZC5cbiAgICAgICAgICpcbiAgICAgICAgICogUE9SVElORyBOT1RFOiBUaGVzZSBmdW5jdGlvbnMgYXJlIHVzZWQgb24gdGhlIFdlYiBjbGllbnQgdG8gY3JlYXRlIHRoZVxuICAgICAgICAgKiB1bmRlcmx5aW5nIHN0cmVhbXMgKHRvIHN1cHBvcnQgdHJlZS1zaGFrZWFibGUgc3RyZWFtcykuIE9uIEFuZHJvaWQgYW5kIGlPUyxcbiAgICAgICAgICogdGhlIHN0cmVhbXMgYXJlIGNyZWF0ZWQgZHVyaW5nIGNvbnN0cnVjdGlvbiBvZiBSZW1vdGVTdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZnUgPSBbXSwgdGhpcy5kdSA9IGksIHRoaXMuZHUuQnIoKHQgPT4ge1xuICAgICAgICAgICAgbi5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBVbmxpa2UgaU9TLCBgcmVzdGFydE5ldHdvcmsoKWAgaXMgY2FsbGVkIGV2ZW4gd2hlbiB0aGVcbiAgICAgICAgICAgICAgICAvLyBuZXR3b3JrIGJlY29tZXMgdW5yZWFjaGFibGUgYXMgd2UgZG9uJ3QgaGF2ZSBhbnkgb3RoZXIgd2F5IHRvIHRlYXJcbiAgICAgICAgICAgICAgICAvLyBkb3duIG91ciBzdHJlYW1zLlxuICAgICAgICAgICAgICAgIHJ1KHRoaXMpICYmIChPKFwiUmVtb3RlU3RvcmVcIiwgXCJSZXN0YXJ0aW5nIHN0cmVhbXMgZm9yIG5ldHdvcmsgcmVhY2hhYmlsaXR5IGNoYW5nZS5cIiksIFxuICAgICAgICAgICAgICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEcodCk7XG4gICAgICAgICAgICAgICAgICAgIGUubHUuYWRkKDQgLyogQ29ubmVjdGl2aXR5Q2hhbmdlICovKSwgYXdhaXQgWG8oZSksIGUuX3Uuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pLCBcbiAgICAgICAgICAgICAgICAgICAgZS5sdS5kZWxldGUoNCAvKiBDb25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCBZbyhlKTtcbiAgICAgICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB0aGlzLl91ID0gbmV3IEhvKG4sIHMpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gWW8odCkge1xuICAgIGlmIChydSh0KSkgZm9yIChjb25zdCBlIG9mIHQuZnUpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITApO1xufVxuXG4vKipcbiAqIFRlbXBvcmFyaWx5IGRpc2FibGVzIHRoZSBuZXR3b3JrLiBUaGUgbmV0d29yayBjYW4gYmUgcmUtZW5hYmxlZCB1c2luZ1xuICogZW5hYmxlTmV0d29yaygpLlxuICovIGFzeW5jIGZ1bmN0aW9uIFhvKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5mdSkgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMSk7XG59XG5cbi8qKlxuICogU3RhcnRzIG5ldyBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXQuIFVzZXMgcmVzdW1lIHRva2VuIGlmIHByb3ZpZGVkLiBJdFxuICogaXMgYSBuby1vcCBpZiB0aGUgdGFyZ2V0IG9mIGdpdmVuIGBUYXJnZXREYXRhYCBpcyBhbHJlYWR5IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovXG5mdW5jdGlvbiBabyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgbi5odS5oYXMoZS50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLmh1LnNldChlLnRhcmdldElkLCBlKSwgaXUobikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIHN1KG4pIDogQXUobikuQ28oKSAmJiBldShuLCBlKSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcbiAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cbiAqLyBmdW5jdGlvbiB0dSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCksIHMgPSBBdShuKTtcbiAgICBuLmh1LmRlbGV0ZShlKSwgcy5DbygpICYmIG51KG4sIGUpLCAwID09PSBuLmh1LnNpemUgJiYgKHMuQ28oKSA/IHMua28oKSA6IHJ1KG4pICYmIFxuICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXG4gICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcbiAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXG4gICAgbi5fdS5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gZXUodCwgZSkge1xuICAgIHQud3UuWihlLnRhcmdldElkKSwgQXUodCkuUW8oZSk7XG59XG5cbi8qKlxuICogV2UgbmVlZCB0byBpbmNyZW1lbnQgdGhlIGV4cGVjdGVkIG51bWJlciBvZiBwZW5kaW5nIHJlc3BvbnNlcyB3ZSdyZSBkdWVcbiAqIGZyb20gd2F0Y2ggc28gd2Ugd2FpdCBmb3IgdGhlIHJlbW92YWwgb24gdGhlIHNlcnZlciBiZWZvcmUgd2UgcHJvY2VzcyBhbnlcbiAqIG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gbnUodCwgZSkge1xuICAgIHQud3UuWihlKSwgQXUodCkuam8oZSk7XG59XG5cbmZ1bmN0aW9uIHN1KHQpIHtcbiAgICB0Lnd1ID0gbmV3IHNzKHtcbiAgICAgICAgZ2V0UmVtb3RlS2V5c0ZvclRhcmdldDogZSA9PiB0LnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KGUpLFxuICAgICAgICBFdDogZSA9PiB0Lmh1LmdldChlKSB8fCBudWxsXG4gICAgfSksIEF1KHQpLnN0YXJ0KCksIHQuX3UuaXUoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHdhdGNoIHN0cmVhbSBzaG91bGQgYmUgc3RhcnRlZCBiZWNhdXNlIGl0J3MgbmVjZXNzYXJ5XG4gKiBhbmQgaGFzIG5vdCB5ZXQgYmVlbiBzdGFydGVkLlxuICovIGZ1bmN0aW9uIGl1KHQpIHtcbiAgICByZXR1cm4gcnUodCkgJiYgIUF1KHQpLkRvKCkgJiYgdC5odS5zaXplID4gMDtcbn1cblxuZnVuY3Rpb24gcnUodCkge1xuICAgIHJldHVybiAwID09PSBHKHQpLmx1LnNpemU7XG59XG5cbmZ1bmN0aW9uIG91KHQpIHtcbiAgICB0Lnd1ID0gdm9pZCAwO1xufVxuXG5hc3luYyBmdW5jdGlvbiB1dSh0KSB7XG4gICAgdC5odS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICBldSh0LCBlKTtcbiAgICB9KSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGF1KHQsIGUpIHtcbiAgICBvdSh0KSwgXG4gICAgLy8gSWYgd2Ugc3RpbGwgbmVlZCB0aGUgd2F0Y2ggc3RyZWFtLCByZXRyeSB0aGUgY29ubmVjdGlvbi5cbiAgICBpdSh0KSA/ICh0Ll91LnV1KGUpLCBzdSh0KSkgOiBcbiAgICAvLyBObyBuZWVkIHRvIHJlc3RhcnQgd2F0Y2ggc3RyZWFtIGJlY2F1c2UgdGhlcmUgYXJlIG5vIGFjdGl2ZSB0YXJnZXRzLlxuICAgIC8vIFRoZSBvbmxpbmUgc3RhdGUgaXMgc2V0IHRvIHVua25vd24gYmVjYXVzZSB0aGVyZSBpcyBubyBhY3RpdmUgYXR0ZW1wdFxuICAgIC8vIGF0IGVzdGFibGlzaGluZyBhIGNvbm5lY3Rpb25cbiAgICB0Ll91LnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY3UodCwgZSwgbikge1xuICAgIGlmIChcbiAgICAvLyBNYXJrIHRoZSBjbGllbnQgYXMgb25saW5lIHNpbmNlIHdlIGdvdCBhIG1lc3NhZ2UgZnJvbSB0aGUgc2VydmVyXG4gICAgdC5fdS5zZXQoXCJPbmxpbmVcIiAvKiBPbmxpbmUgKi8pLCBlIGluc3RhbmNlb2YgZXMgJiYgMiAvKiBSZW1vdmVkICovID09PSBlLnN0YXRlICYmIGUuY2F1c2UpIFxuICAgIC8vIFRoZXJlIHdhcyBhbiBlcnJvciBvbiBhIHRhcmdldCwgZG9uJ3Qgd2FpdCBmb3IgYSBjb25zaXN0ZW50IHNuYXBzaG90XG4gICAgLy8gdG8gcmFpc2UgZXZlbnRzXG4gICAgdHJ5IHtcbiAgICAgICAgYXdhaXQgXG4gICAgICAgIC8qKiBIYW5kbGVzIGFuIGVycm9yIG9uIGEgdGFyZ2V0ICovXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmNhdXNlO1xuICAgICAgICAgICAgZm9yIChjb25zdCBzIG9mIGUudGFyZ2V0SWRzKSBcbiAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgIHQuaHUuaGFzKHMpICYmIChhd2FpdCB0LnJlbW90ZVN5bmNlci5yZWplY3RMaXN0ZW4ocywgbiksIHQuaHUuZGVsZXRlKHMpLCB0Lnd1LnJlbW92ZVRhcmdldChzKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBBdHRlbXB0cyB0byBmaWxsIG91ciB3cml0ZSBwaXBlbGluZSB3aXRoIHdyaXRlcyBmcm9tIHRoZSBMb2NhbFN0b3JlLlxuICpcbiAqIENhbGxlZCBpbnRlcm5hbGx5IHRvIGJvb3RzdHJhcCBvciByZWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIGFuZCBieVxuICogU3luY0VuZ2luZSB3aGVuZXZlciB0aGVyZSBhcmUgbmV3IG11dGF0aW9ucyB0byBwcm9jZXNzLlxuICpcbiAqIFN0YXJ0cyB0aGUgd3JpdGUgc3RyZWFtIGlmIG5lY2Vzc2FyeS5cbiAqLyAodCwgZSk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBPKFwiUmVtb3RlU3RvcmVcIiwgXCJGYWlsZWQgdG8gcmVtb3ZlIHRhcmdldHMgJXM6ICVzIFwiLCBlLnRhcmdldElkcy5qb2luKFwiLFwiKSwgbiksIFxuICAgICAgICBhd2FpdCBodSh0LCBuKTtcbiAgICB9IGVsc2UgaWYgKGUgaW5zdGFuY2VvZiBabiA/IHQud3UudXQoZSkgOiBlIGluc3RhbmNlb2YgdHMgPyB0Lnd1Ll90KGUpIDogdC53dS5odChlKSwgXG4gICAgIW4uaXNFcXVhbChjdC5taW4oKSkpIHRyeSB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBubyh0LmxvY2FsU3RvcmUpO1xuICAgICAgICBuLmNvbXBhcmVUbyhlKSA+PSAwICYmIFxuICAgICAgICAvLyBXZSBoYXZlIHJlY2VpdmVkIGEgdGFyZ2V0IGNoYW5nZSB3aXRoIGEgZ2xvYmFsIHNuYXBzaG90IGlmIHRoZSBzbmFwc2hvdFxuICAgICAgICAvLyB2ZXJzaW9uIGlzIG5vdCBlcXVhbCB0byBTbmFwc2hvdFZlcnNpb24ubWluKCkuXG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKipcbiAqIFRha2VzIGEgYmF0Y2ggb2YgY2hhbmdlcyBmcm9tIHRoZSBEYXRhc3RvcmUsIHJlcGFja2FnZXMgdGhlbSBhcyBhXG4gKiBSZW1vdGVFdmVudCwgYW5kIHBhc3NlcyB0aGF0IG9uIHRvIHRoZSBsaXN0ZW5lciwgd2hpY2ggaXMgdHlwaWNhbGx5IHRoZVxuICogU3luY0VuZ2luZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC53dS55dChlKTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBpbi1tZW1vcnkgcmVzdW1lIHRva2Vucy4gTG9jYWxTdG9yZSB3aWxsIHVwZGF0ZSB0aGVcbiAgICAgICAgICAgIC8vIHBlcnNpc3RlbnQgdmlldyBvZiB0aGVzZSB3aGVuIGFwcGx5aW5nIHRoZSBjb21wbGV0ZWQgUmVtb3RlRXZlbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbi50YXJnZXRDaGFuZ2VzLmZvckVhY2goKChuLCBzKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpID0gdC5odS5nZXQocyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEEgd2F0Y2hlZCB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIHJlbW92ZWQgYWxyZWFkeS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpICYmIHQuaHUuc2V0KHMsIGkud2l0aFJlc3VtZVRva2VuKG4ucmVzdW1lVG9rZW4sIGUpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSksIFxuICAgICAgICAgICAgLy8gUmUtZXN0YWJsaXNoIGxpc3RlbnMgZm9yIHRoZSB0YXJnZXRzIHRoYXQgaGF2ZSBiZWVuIGludmFsaWRhdGVkIGJ5XG4gICAgICAgICAgICAvLyBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICBuLnRhcmdldE1pc21hdGNoZXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHQuaHUuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmICghbikgXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXG4gICAgICAgICAgICAgICAgLy8gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuaHUuc2V0KGUsIG4ud2l0aFJlc3VtZVRva2VuKHB0LkVNUFRZX0JZVEVfU1RSSU5HLCBuLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICBudSh0LCBlKTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2Ugc2VuZCBhcyBiZWluZyBvbiBiZWhhbGYgb2YgYW4gZXhpc3RlbmNlIGZpbHRlclxuICAgICAgICAgICAgICAgIC8vIG1pc21hdGNoLCBidXQgZG9uJ3QgYWN0dWFsbHkgcmV0YWluIHRoYXQgaW4gbGlzdGVuVGFyZ2V0cy4gVGhpcyBlbnN1cmVzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVucyBvZiB0aGlzIHRhcmdldCAodGhhdCBtaWdodCBoYXBwZW4gZS5nLiBvbiByZWNvbm5lY3QpLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRGkobi50YXJnZXQsIGUsIDEgLyogRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2ggKi8gLCBuLnNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgICAgICBldSh0LCBzKTtcbiAgICAgICAgICAgIH0pKSwgdC5yZW1vdGVTeW5jZXIuYXBwbHlSZW1vdGVFdmVudChuKTtcbiAgICAgICAgfSh0LCBuKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIE8oXCJSZW1vdGVTdG9yZVwiLCBcIkZhaWxlZCB0byByYWlzZSBzbmFwc2hvdDpcIiwgZSksIGF3YWl0IGh1KHQsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWNvdmVyeSBsb2dpYyBmb3IgSW5kZXhlZERCIGVycm9ycyB0aGF0IHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWxcbiAqIGBvcGAgc3VjY2VlZHMuIFJldHJpZXMgYXJlIHNjaGVkdWxlZCB3aXRoIGJhY2tvZmYgdXNpbmdcbiAqIGBlbnF1ZXVlUmV0cnlhYmxlKClgLiBJZiBgb3AoKWAgaXMgbm90IHByb3ZpZGVkLCBJbmRleGVkREIgYWNjZXNzIGlzXG4gKiB2YWxpZGF0ZWQgdmlhIGEgZ2VuZXJpYyBvcGVyYXRpb24uXG4gKlxuICogVGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVzb2x2ZWQgb25jZSB0aGUgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgYmVmb3JlXG4gKiBhbnkgcmV0cnkgYXR0ZW1wdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBodSh0LCBlLCBuKSB7XG4gICAgaWYgKCFJaShlKSkgdGhyb3cgZTtcbiAgICB0Lmx1LmFkZCgxIC8qIEluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgIC8vIERpc2FibGUgbmV0d29yayBhbmQgcmFpc2Ugb2ZmbGluZSBzbmFwc2hvdHNcbiAgICBhd2FpdCBYbyh0KSwgdC5fdS5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyksIG4gfHwgKFxuICAgIC8vIFVzZSBhIHNpbXBsZSByZWFkIG9wZXJhdGlvbiB0byBkZXRlcm1pbmUgaWYgSW5kZXhlZERCIHJlY292ZXJlZC5cbiAgICAvLyBJZGVhbGx5LCB3ZSB3b3VsZCBleHBvc2UgYSBoZWFsdGggY2hlY2sgZGlyZWN0bHkgb24gU2ltcGxlRGIsIGJ1dFxuICAgIC8vIFJlbW90ZVN0b3JlIG9ubHkgaGFzIGFjY2VzcyB0byBwZXJzaXN0ZW5jZSB0aHJvdWdoIExvY2FsU3RvcmUuXG4gICAgbiA9ICgpID0+IG5vKHQubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIE8oXCJSZW1vdGVTdG9yZVwiLCBcIlJldHJ5aW5nIEluZGV4ZWREQiBhY2Nlc3NcIiksIGF3YWl0IG4oKSwgdC5sdS5kZWxldGUoMSAvKiBJbmRleGVkRGJGYWlsZWQgKi8pLCBcbiAgICAgICAgYXdhaXQgWW8odCk7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGBvcGAuIElmIGBvcGAgZmFpbHMsIHRha2VzIHRoZSBuZXR3b3JrIG9mZmxpbmUgdW50aWwgYG9wYFxuICogc3VjY2VlZHMuIFJldHVybnMgYWZ0ZXIgdGhlIGZpcnN0IGF0dGVtcHQuXG4gKi8gZnVuY3Rpb24gbHUodCwgZSkge1xuICAgIHJldHVybiBlKCkuY2F0Y2goKG4gPT4gaHUodCwgbiwgZSkpKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZnUodCkge1xuICAgIGNvbnN0IGUgPSBHKHQpLCBuID0gUnUoZSk7XG4gICAgbGV0IHMgPSBlLmN1Lmxlbmd0aCA+IDAgPyBlLmN1W2UuY3UubGVuZ3RoIC0gMV0uYmF0Y2hJZCA6IC0xO1xuICAgIGZvciAoO2R1KGUpOyApIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBybyhlLmxvY2FsU3RvcmUsIHMpO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgMCA9PT0gZS5jdS5sZW5ndGggJiYgbi5rbygpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHQuYmF0Y2hJZCwgX3UoZSwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCBodShlLCB0KTtcbiAgICB9XG4gICAgd3UoZSkgJiYgbXUoZSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHdlIGNhbiBhZGQgdG8gdGhlIHdyaXRlIHBpcGVsaW5lIChpLmUuIHRoZSBuZXR3b3JrIGlzXG4gKiBlbmFibGVkIGFuZCB0aGUgd3JpdGUgcGlwZWxpbmUgaXMgbm90IGZ1bGwpLlxuICovIGZ1bmN0aW9uIGR1KHQpIHtcbiAgICByZXR1cm4gcnUodCkgJiYgdC5jdS5sZW5ndGggPCAxMDtcbn1cblxuLyoqXG4gKiBRdWV1ZXMgYWRkaXRpb25hbCB3cml0ZXMgdG8gYmUgc2VudCB0byB0aGUgd3JpdGUgc3RyZWFtLCBzZW5kaW5nIHRoZW1cbiAqIGltbWVkaWF0ZWx5IGlmIHRoZSB3cml0ZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gKi8gZnVuY3Rpb24gX3UodCwgZSkge1xuICAgIHQuY3UucHVzaChlKTtcbiAgICBjb25zdCBuID0gUnUodCk7XG4gICAgbi5DbygpICYmIG4uem8gJiYgbi5IbyhlLm11dGF0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHd1KHQpIHtcbiAgICByZXR1cm4gcnUodCkgJiYgIVJ1KHQpLkRvKCkgJiYgdC5jdS5sZW5ndGggPiAwO1xufVxuXG5mdW5jdGlvbiBtdSh0KSB7XG4gICAgUnUodCkuc3RhcnQoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ3UodCkge1xuICAgIFJ1KHQpLlhvKCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHl1KHQpIHtcbiAgICBjb25zdCBlID0gUnUodCk7XG4gICAgLy8gU2VuZCB0aGUgd3JpdGUgcGlwZWxpbmUgbm93IHRoYXQgdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuY3UpIGUuSG8obi5tdXRhdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBwdSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuY3Uuc2hpZnQoKSwgaSA9IHZpLmZyb20ocywgZSwgbik7XG4gICAgYXdhaXQgbHUodCwgKCgpID0+IHQucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlKGkpKSksIFxuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB3aXRoIHRoZSBjb21wbGV0aW9uIG9mIHRoaXMgbXV0YXRpb24gYW5vdGhlclxuICAgIC8vIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgIGF3YWl0IGZ1KHQpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBJdSh0LCBlKSB7XG4gICAgLy8gSWYgdGhlIHdyaXRlIHN0cmVhbSBjbG9zZWQgYWZ0ZXIgdGhlIHdyaXRlIGhhbmRzaGFrZSBjb21wbGV0ZXMsIGEgd3JpdGVcbiAgICAvLyBvcGVyYXRpb24gZmFpbGVkIGFuZCB3ZSBmYWlsIHRoZSBwZW5kaW5nIG9wZXJhdGlvbi5cbiAgICBlICYmIFJ1KHQpLnpvICYmIFxuICAgIC8vIFRoaXMgZXJyb3IgYWZmZWN0cyB0aGUgYWN0dWFsIHdyaXRlLlxuICAgIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgcGVybWFuZW50IGVycm9ycyBoZXJlLiBJZiBpdCdzIHRyYW5zaWVudCwganVzdCBsZXQgdGhlIHJldHJ5XG4gICAgICAgIC8vIGxvZ2ljIGtpY2sgaW4uXG4gICAgICAgIGlmIChuID0gZS5jb2RlLCB4bihuKSAmJiBuICE9PSBLLkFCT1JURUQpIHtcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGEgcGVybWFuZW50IGVycm9yLCB0aGUgcmVxdWVzdCBpdHNlbGYgd2FzIHRoZSBwcm9ibGVtXG4gICAgICAgICAgICAvLyBzbyBpdCdzIG5vdCBnb2luZyB0byBzdWNjZWVkIGlmIHdlIHJlc2VuZCBpdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmN1LnNoaWZ0KCk7XG4gICAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UgaXQncyBhbHNvIHVubGlrZWx5IHRoYXQgdGhlIHNlcnZlciBpdHNlbGYgaXMgbWVsdGluZ1xuICAgICAgICAgICAgLy8gZG93biAtLSB0aGlzIHdhcyBqdXN0IGEgYmFkIHJlcXVlc3Qgc28gaW5oaWJpdCBiYWNrb2ZmIG9uIHRoZSBuZXh0XG4gICAgICAgICAgICAvLyByZXN0YXJ0LlxuICAgICAgICAgICAgICAgICAgICAgICAgUnUodCkuTm8oKSwgYXdhaXQgbHUodCwgKCgpID0+IHQucmVtb3RlU3luY2VyLnJlamVjdEZhaWxlZFdyaXRlKG4uYmF0Y2hJZCwgZSkpKSwgXG4gICAgICAgICAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uXG4gICAgICAgICAgICAvLyBhbm90aGVyIHNsb3QgaGFzIGZyZWVkIHVwLlxuICAgICAgICAgICAgYXdhaXQgZnUodCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG47XG4gICAgfSh0LCBlKSwgXG4gICAgLy8gVGhlIHdyaXRlIHN0cmVhbSBtaWdodCBoYXZlIGJlZW4gc3RhcnRlZCBieSByZWZpbGxpbmcgdGhlIHdyaXRlXG4gICAgLy8gcGlwZWxpbmUgZm9yIGZhaWxlZCB3cml0ZXNcbiAgICB3dSh0KSAmJiBtdSh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gVHUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIG4uYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE8oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHJlY2VpdmVkIG5ldyBjcmVkZW50aWFsc1wiKTtcbiAgICBjb25zdCBzID0gcnUobik7XG4gICAgLy8gVGVhciBkb3duIGFuZCByZS1jcmVhdGUgb3VyIG5ldHdvcmsgc3RyZWFtcy4gVGhpcyB3aWxsIGVuc3VyZSB3ZSBnZXQgYVxuICAgIC8vIGZyZXNoIGF1dGggdG9rZW4gZm9yIHRoZSBuZXcgdXNlciBhbmQgcmUtZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aFxuICAgIC8vIG5ldyBtdXRhdGlvbnMgZnJvbSB0aGUgTG9jYWxTdG9yZSAoc2luY2UgbXV0YXRpb25zIGFyZSBwZXItdXNlcikuXG4gICAgICAgIG4ubHUuYWRkKDMgLyogQ3JlZGVudGlhbENoYW5nZSAqLyksIGF3YWl0IFhvKG4pLCBzICYmIFxuICAgIC8vIERvbid0IHNldCB0aGUgbmV0d29yayBzdGF0dXMgdG8gVW5rbm93biBpZiB3ZSBhcmUgb2ZmbGluZS5cbiAgICBuLl91LnNldChcIlVua25vd25cIiAvKiBVbmtub3duICovKSwgYXdhaXQgbi5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZShlKSwgXG4gICAgbi5sdS5kZWxldGUoMyAvKiBDcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgWW8obik7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24gRXUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIGUgPyAobi5sdS5kZWxldGUoMiAvKiBJc1NlY29uZGFyeSAqLyksIGF3YWl0IFlvKG4pKSA6IGUgfHwgKG4ubHUuYWRkKDIgLyogSXNTZWNvbmRhcnkgKi8pLCBcbiAgICBhd2FpdCBYbyhuKSwgbi5fdS5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV2F0Y2hTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdhdGNoU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gQXUodCkge1xuICAgIHJldHVybiB0Lm11IHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5tdSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEcodCk7XG4gICAgICAgIHJldHVybiBzLnR1KCksIG5ldyBqbyhlLCBzLmJvLCBzLmF1dGhDcmVkZW50aWFscywgcy5hcHBDaGVja0NyZWRlbnRpYWxzLCBzLk0sIG4pO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC5kYXRhc3RvcmUsIHQuYXN5bmNRdWV1ZSwge1xuICAgICAgICB6cjogdXUuYmluZChudWxsLCB0KSxcbiAgICAgICAgSnI6IGF1LmJpbmQobnVsbCwgdCksXG4gICAgICAgIEtvOiBjdS5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuZnUucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5tdS5ObygpLCBpdSh0KSA/IHN1KHQpIDogdC5fdS5zZXQoXCJVbmtub3duXCIgLyogVW5rbm93biAqLykpIDogKGF3YWl0IHQubXUuc3RvcCgpLCBcbiAgICAgICAgb3UodCkpO1xuICAgIH0pKSksIHQubXU7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXcml0ZVN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV3JpdGVTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBSdSh0KSB7XG4gICAgcmV0dXJuIHQuZ3UgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0Lmd1ID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gRyh0KTtcbiAgICAgICAgcmV0dXJuIHMudHUoKSwgbmV3IFdvKGUsIHMuYm8sIHMuYXV0aENyZWRlbnRpYWxzLCBzLmFwcENoZWNrQ3JlZGVudGlhbHMsIHMuTSwgbik7XG4gICAgfSh0LmRhdGFzdG9yZSwgdC5hc3luY1F1ZXVlLCB7XG4gICAgICAgIHpyOiBndS5iaW5kKG51bGwsIHQpLFxuICAgICAgICBKcjogSXUuYmluZChudWxsLCB0KSxcbiAgICAgICAgWW86IHl1LmJpbmQobnVsbCwgdCksXG4gICAgICAgIEpvOiBwdS5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuZnUucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5ndS5ObygpLCBcbiAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICAgICAgICBhd2FpdCBmdSh0KSkgOiAoYXdhaXQgdC5ndS5zdG9wKCksIHQuY3UubGVuZ3RoID4gMCAmJiAoTyhcIlJlbW90ZVN0b3JlXCIsIGBTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCAke3QuY3UubGVuZ3RofSBwZW5kaW5nIHdyaXRlc2ApLCBcbiAgICAgICAgdC5jdSA9IFtdKSk7XG4gICAgfSkpKSwgdC5ndTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXG4gKlxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxuICpcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxuICpcbiAqIE5vdGU6IFdlIGltcGxlbWVudCBgUHJvbWlzZUxpa2VgIGluc3RlYWQgb2YgYFByb21pc2VgLCBhcyB0aGUgYFByb21pc2VgIHR5cGVcbiAqIGluIG5ld2VyIHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgZGVmaW5lcyBgZmluYWxseWAsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW5cbiAqIElFLlxuICovXG5jbGFzcyBidSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLnRhcmdldFRpbWVNcyA9IG4sIHRoaXMub3AgPSBzLCB0aGlzLnJlbW92YWxDYWxsYmFjayA9IGksIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IGosIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKSwgXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgodCA9PiB7fSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBidSh0LCBlLCByLCBzLCBpKTtcbiAgICAgICAgcmV0dXJuIG8uc3RhcnQobiksIG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxuICAgICAqIGNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gICAgICovICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoKCgpID0+IHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCkpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxuICAgICAqIGNhbmNlbGVkKS5cbiAgICAgKi8gICAgc2tpcERlbGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgb3BlcmF0aW9uIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQgb3IgY2FuY2VsZWQuIFRoZVxuICAgICAqIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEFzIGxvbmcgYXMgdGhlIG9wZXJhdGlvbiBoYXMgbm90IHlldCBiZWVuIHJ1biwgY2FsbGluZyBjYW5jZWwoKSBwcm92aWRlcyBhXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhlIG9wZXJhdGlvbiB3aWxsIG5vdCBiZSBydW4uXG4gICAgICovICAgIGNhbmNlbCh0KSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMuY2xlYXJUaW1lb3V0KCksIHRoaXMuZGVmZXJyZWQucmVqZWN0KG5ldyBRKEsuQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArICh0ID8gXCI6IFwiICsgdCA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigodCA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUodCkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIFB1KHQsIGUpIHtcbiAgICBpZiAoRihcIkFzeW5jUXVldWVcIiwgYCR7ZX06ICR7dH1gKSwgSWkodCkpIHJldHVybiBuZXcgUShLLlVOQVZBSUxBQkxFLCBgJHtlfTogJHt0fWApO1xuICAgIHRocm93IHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50U2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGRvY3VtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLiBXZSBhbHdheXMgYWRkIGEgZG9jdW1lbnQga2V5XG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxuICogdGhlIGtleS5cbiAqLyBjbGFzcyBWdSB7XG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0ID8gKGUsIG4pID0+IHQoZSwgbikgfHwgeHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogKHQsIGUpID0+IHh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSwgXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBLbigpLCB0aGlzLnNvcnRlZFNldCA9IG5ldyBNbih0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovICAgIHN0YXRpYyBlbXB0eVNldCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVnUodC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YoZSkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQodCkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGVsZXRlKHQua2V5KTtcbiAgICAgICAgcmV0dXJuIGUuY29weShlLmtleWVkTWFwLmluc2VydCh0LmtleSwgdCksIGUuc29ydGVkU2V0Lmluc2VydCh0LCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKHQpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBWdSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gdC5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghdC5pc0VxdWFsKHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IHQubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIHQuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IFZ1O1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gdCwgbi5zb3J0ZWRTZXQgPSBlLCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyB2dSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMueXUgPSBuZXcgTW4oeHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHRyYWNrKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jLmtleSwgbiA9IHRoaXMueXUuZ2V0KGUpO1xuICAgICAgICBuID8gXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cbiAgICAgICAgMCAvKiBBZGRlZCAqLyAhPT0gdC50eXBlICYmIDMgLyogTWV0YWRhdGEgKi8gPT09IG4udHlwZSA/IHRoaXMueXUgPSB0aGlzLnl1Lmluc2VydChlLCB0KSA6IDMgLyogTWV0YWRhdGEgKi8gPT09IHQudHlwZSAmJiAxIC8qIFJlbW92ZWQgKi8gIT09IG4udHlwZSA/IHRoaXMueXUgPSB0aGlzLnl1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiBuLnR5cGUsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMiAvKiBNb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDIgLyogTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMueXUgPSB0aGlzLnl1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAyIC8qIE1vZGlmaWVkICovID09PSB0LnR5cGUgJiYgMCAvKiBBZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy55dSA9IHRoaXMueXUuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDAgLyogQWRkZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDEgLyogUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMueXUgPSB0aGlzLnl1LnJlbW92ZShlKSA6IDEgLyogUmVtb3ZlZCAqLyA9PT0gdC50eXBlICYmIDIgLyogTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMueXUgPSB0aGlzLnl1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBuLmRvY1xuICAgICAgICB9KSA6IDAgLyogQWRkZWQgKi8gPT09IHQudHlwZSAmJiAxIC8qIFJlbW92ZWQgKi8gPT09IG4udHlwZSA/IHRoaXMueXUgPSB0aGlzLnl1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiBcbiAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcbiAgICAgICAgLy8gQWRkZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcbiAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXG4gICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxuICAgICAgICBMKCkgOiB0aGlzLnl1ID0gdGhpcy55dS5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIHB1KCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLnl1Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0LnB1c2gobik7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIFN1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCB1KSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLmRvY3MgPSBlLCB0aGlzLm9sZERvY3MgPSBuLCB0aGlzLmRvY0NoYW5nZXMgPSBzLCB0aGlzLm11dGF0ZWRLZXlzID0gaSwgXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gciwgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gbywgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IHU7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiBhbGwgZG9jdW1lbnRzIGluIHRoZSBzbmFwc2hvdCB3ZXJlIGFkZGVkLiAqLyAgICBzdGF0aWMgZnJvbUluaXRpYWxEb2N1bWVudHModCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgaS5wdXNoKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIEFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIG5ldyBTdSh0LCBlLCBWdS5lbXB0eVNldChlKSwgaSwgbiwgcywgXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovICEwLCBcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExKTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGUgJiYgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID09PSB0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKHQubXV0YXRlZEtleXMpICYmIHFlKHRoaXMucXVlcnksIHQucXVlcnkpICYmIHRoaXMuZG9jcy5pc0VxdWFsKHQuZG9jcykgJiYgdGhpcy5vbGREb2NzLmlzRXF1YWwodC5vbGREb2NzKSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jQ2hhbmdlcywgbiA9IHQuZG9jQ2hhbmdlcztcbiAgICAgICAgaWYgKGUubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGlmIChlW3RdLnR5cGUgIT09IG5bdF0udHlwZSB8fCAhZVt0XS5kb2MuaXNFcXVhbChuW3RdLmRvYykpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cbiAqLyBjbGFzcyBEdSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuSXUgPSB2b2lkIDAsIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBDdSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyBrbigodCA9PiBHZSh0KSksIHFlKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5UdSA9IG5ldyBTZXQ7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiB4dSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITEsIHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyIHx8IChpID0gITAsIHIgPSBuZXcgRHUpLCBpKSB0cnkge1xuICAgICAgICByLkl1ID0gYXdhaXQgbi5vbkxpc3RlbihzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBQdSh0LCBgSW5pdGlhbGl6YXRpb24gb2YgcXVlcnkgJyR7S2UoZS5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgZS5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChzLCByKSwgci5saXN0ZW5lcnMucHVzaChlKSwgXG4gICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgZS5FdShuLm9ubGluZVN0YXRlKSwgci5JdSkge1xuICAgICAgICBlLkF1KHIuSXUpICYmIE91KG4pO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gTnUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExO1xuICAgIGNvbnN0IHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyKSB7XG4gICAgICAgIGNvbnN0IHQgPSByLmxpc3RlbmVycy5pbmRleE9mKGUpO1xuICAgICAgICB0ID49IDAgJiYgKHIubGlzdGVuZXJzLnNwbGljZSh0LCAxKSwgaSA9IDAgPT09IHIubGlzdGVuZXJzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChpKSByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShzKSwgbi5vblVubGlzdGVuKHMpO1xufVxuXG5mdW5jdGlvbiBrdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgbGV0IHMgPSAhMTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBjb25zdCBlID0gdC5xdWVyeSwgaSA9IG4ucXVlcmllcy5nZXQoZSk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgaS5saXN0ZW5lcnMpIGUuQXUodCkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICBpLkl1ID0gdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzICYmIE91KG4pO1xufVxuXG5mdW5jdGlvbiBNdSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEcodCksIGkgPSBzLnF1ZXJpZXMuZ2V0KGUpO1xuICAgIGlmIChpKSBmb3IgKGNvbnN0IHQgb2YgaS5saXN0ZW5lcnMpIHQub25FcnJvcihuKTtcbiAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycy4gTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN5bmNFbmdpbmUudW5saXN0ZW4oKVxuICAgIC8vIGFmdGVyIGFuIGVycm9yLlxuICAgICAgICBzLnF1ZXJpZXMuZGVsZXRlKGUpO1xufVxuXG4vLyBDYWxsIGFsbCBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIHNldC5cbmZ1bmN0aW9uIE91KHQpIHtcbiAgICB0LlR1LmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0Lm5leHQoKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUXVlcnlMaXN0ZW5lciB0YWtlcyBhIHNlcmllcyBvZiBpbnRlcm5hbCB2aWV3IHNuYXBzaG90cyBhbmQgZGV0ZXJtaW5lc1xuICogd2hlbiB0byByYWlzZSB0aGUgZXZlbnQuXG4gKlxuICogSXQgdXNlcyBhbiBPYnNlcnZlciB0byBkaXNwYXRjaCBldmVudHMuXG4gKi8gY2xhc3MgRnUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuUnUgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idSA9ICExLCB0aGlzLlB1ID0gbnVsbCwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIFVua25vd24gKi8gLCB0aGlzLm9wdGlvbnMgPSBuIHx8IHt9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBsaWVzIHRoZSBuZXcgVmlld1NuYXBzaG90IHRvIHRoaXMgbGlzdGVuZXIsIHJhaXNpbmcgYSB1c2VyLWZhY2luZyBldmVudFxuICAgICAqIGlmIGFwcGxpY2FibGUgKGRlcGVuZGluZyBvbiB3aGF0IGNoYW5nZWQsIHdoZXRoZXIgdGhlIHVzZXIgaGFzIG9wdGVkIGludG9cbiAgICAgKiBtZXRhZGF0YS1vbmx5IGNoYW5nZXMsIGV0Yy4pLiBSZXR1cm5zIHRydWUgaWYgYSB1c2VyLWZhY2luZyBldmVudCB3YXNcbiAgICAgKiBpbmRlZWQgcmFpc2VkLlxuICAgICAqLyAgICBBdSh0KSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXMpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgbWV0YWRhdGEgb25seSBjaGFuZ2VzLlxuICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQuZG9jQ2hhbmdlcykgMyAvKiBNZXRhZGF0YSAqLyAhPT0gbi50eXBlICYmIGUucHVzaChuKTtcbiAgICAgICAgICAgIHQgPSBuZXcgU3UodC5xdWVyeSwgdC5kb2NzLCB0Lm9sZERvY3MsIGUsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlLCB0LnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5idSA/IHRoaXMuVnUodCkgJiYgKHRoaXMuUnUubmV4dCh0KSwgZSA9ICEwKSA6IHRoaXMudnUodCwgdGhpcy5vbmxpbmVTdGF0ZSkgJiYgKHRoaXMuU3UodCksIFxuICAgICAgICBlID0gITApLCB0aGlzLlB1ID0gdCwgZTtcbiAgICB9XG4gICAgb25FcnJvcih0KSB7XG4gICAgICAgIHRoaXMuUnUuZXJyb3IodCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHdoZXRoZXIgYSBzbmFwc2hvdCB3YXMgcmFpc2VkLiAqLyAgICBFdSh0KSB7XG4gICAgICAgIHRoaXMub25saW5lU3RhdGUgPSB0O1xuICAgICAgICBsZXQgZSA9ICExO1xuICAgICAgICByZXR1cm4gdGhpcy5QdSAmJiAhdGhpcy5idSAmJiB0aGlzLnZ1KHRoaXMuUHUsIHQpICYmICh0aGlzLlN1KHRoaXMuUHUpLCBlID0gITApLCBcbiAgICAgICAgZTtcbiAgICB9XG4gICAgdnUodCwgZSkge1xuICAgICAgICAvLyBBbHdheXMgcmFpc2UgdGhlIGZpcnN0IGV2ZW50IHdoZW4gd2UncmUgc3luY2VkXG4gICAgICAgIGlmICghdC5mcm9tQ2FjaGUpIHJldHVybiAhMDtcbiAgICAgICAgLy8gTk9URTogV2UgY29uc2lkZXIgT25saW5lU3RhdGUuVW5rbm93biBhcyBvbmxpbmUgKGl0IHNob3VsZCBiZWNvbWUgT2ZmbGluZVxuICAgICAgICAvLyBvciBPbmxpbmUgaWYgd2Ugd2FpdCBsb25nIGVub3VnaCkuXG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gIT09IGU7XG4gICAgICAgIC8vIERvbid0IHJhaXNlIHRoZSBldmVudCBpZiB3ZSdyZSBvbmxpbmUsIGFyZW4ndCBzeW5jZWQgeWV0IChjaGVja2VkXG4gICAgICAgIC8vIGFib3ZlKSBhbmQgYXJlIHdhaXRpbmcgZm9yIGEgc3luYy5cbiAgICAgICAgICAgICAgICByZXR1cm4gKCF0aGlzLm9wdGlvbnMuRHUgfHwgIW4pICYmICghdC5kb2NzLmlzRW1wdHkoKSB8fCBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovID09PSBlKTtcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cyBvciB3ZSBhcmUgb2ZmbGluZVxuICAgICAgICB9XG4gICAgVnUodCkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxuICAgICAgICBpZiAodC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHJldHVybiAhMDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuUHUgJiYgdGhpcy5QdS5oYXNQZW5kaW5nV3JpdGVzICE9PSB0Lmhhc1BlbmRpbmdXcml0ZXM7XG4gICAgICAgIHJldHVybiAhKCF0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgIWUpICYmICEwID09PSB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxuICAgICAgICB9XG4gICAgU3UodCkge1xuICAgICAgICB0ID0gU3UuZnJvbUluaXRpYWxEb2N1bWVudHModC5xdWVyeSwgdC5kb2NzLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSksIHRoaXMuYnUgPSAhMCwgXG4gICAgICAgIHRoaXMuUnUubmV4dCh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY29tcGxldGUgZWxlbWVudCBpbiB0aGUgYnVuZGxlIHN0cmVhbSwgdG9nZXRoZXIgd2l0aCB0aGUgYnl0ZSBsZW5ndGggaXRcbiAqIG9jY3VwaWVzIGluIHRoZSBzdHJlYW0uXG4gKi8gY2xhc3MgJHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIFxuICAgIC8vIEhvdyBtYW55IGJ5dGVzIHRoaXMgZWxlbWVudCB0YWtlcyB0byBzdG9yZSBpbiB0aGUgYnVuZGxlLlxuICAgIGUpIHtcbiAgICAgICAgdGhpcy5wYXlsb2FkID0gdCwgdGhpcy5ieXRlTGVuZ3RoID0gZTtcbiAgICB9XG4gICAgQ3UoKSB7XG4gICAgICAgIHJldHVybiBcIm1ldGFkYXRhXCIgaW4gdGhpcy5wYXlsb2FkO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgb2JqZWN0cyBmcm9tIGJ1bmRsZXMgdG8gbW9kZWwgb2JqZWN0cyBpbiB0aGUgU0RLLlxuICovIGNsYXNzIEJ1IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTSA9IHQ7XG4gICAgfVxuICAgIGxpKHQpIHtcbiAgICAgICAgcmV0dXJuIG1zKHRoaXMuTSwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgQnVuZGxlRG9jdW1lbnQgdG8gYSBNdXRhYmxlRG9jdW1lbnQuXG4gICAgICovICAgIGZpKHQpIHtcbiAgICAgICAgcmV0dXJuIHQubWV0YWRhdGEuZXhpc3RzID8gRXModGhpcy5NLCB0LmRvY3VtZW50LCAhMSkgOiB0ZS5uZXdOb0RvY3VtZW50KHRoaXMubGkodC5tZXRhZGF0YS5uYW1lKSwgdGhpcy5kaSh0Lm1ldGFkYXRhLnJlYWRUaW1lKSk7XG4gICAgfVxuICAgIGRpKHQpIHtcbiAgICAgICAgcmV0dXJuIGZzKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNsYXNzIHRvIHByb2Nlc3MgdGhlIGVsZW1lbnRzIGZyb20gYSBidW5kbGUsIGxvYWQgdGhlbSBpbnRvIGxvY2FsXG4gKiBzdG9yYWdlIGFuZCBwcm92aWRlIHByb2dyZXNzIHVwZGF0ZSB3aGlsZSBsb2FkaW5nLlxuICovIGNsYXNzIEx1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMueHUgPSB0LCB0aGlzLmxvY2FsU3RvcmUgPSBlLCB0aGlzLk0gPSBuLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgcXVlcmllcyB0byBiZSBzYXZlZCBpbnRvIHN0b3JhZ2UgKi9cbiAgICAgICAgdGhpcy5xdWVyaWVzID0gW10sIFxuICAgICAgICAvKiogQmF0Y2hlZCBkb2N1bWVudHMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMuZG9jdW1lbnRzID0gW10sIFxuICAgICAgICAvKiogVGhlIGNvbGxlY3Rpb24gZ3JvdXBzIGFmZmVjdGVkIGJ5IHRoaXMgYnVuZGxlLiAqL1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb25Hcm91cHMgPSBuZXcgU2V0LCB0aGlzLnByb2dyZXNzID0gVXUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gZWxlbWVudCBmcm9tIHRoZSBidW5kbGUgdG8gdGhlIGxvYWRlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBuZXcgcHJvZ3Jlc3MgaWYgYWRkaW5nIHRoZSBlbGVtZW50IGxlYWRzIHRvIGEgbmV3IHByb2dyZXNzLFxuICAgICAqIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAgICovICAgIE51KHQpIHtcbiAgICAgICAgdGhpcy5wcm9ncmVzcy5ieXRlc0xvYWRlZCArPSB0LmJ5dGVMZW5ndGg7XG4gICAgICAgIGxldCBlID0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQ7XG4gICAgICAgIGlmICh0LnBheWxvYWQubmFtZWRRdWVyeSkgdGhpcy5xdWVyaWVzLnB1c2godC5wYXlsb2FkLm5hbWVkUXVlcnkpOyBlbHNlIGlmICh0LnBheWxvYWQuZG9jdW1lbnRNZXRhZGF0YSkge1xuICAgICAgICAgICAgdGhpcy5kb2N1bWVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgbWV0YWRhdGE6IHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhXG4gICAgICAgICAgICB9KSwgdC5wYXlsb2FkLmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBfdC5mcm9tU3RyaW5nKHQucGF5bG9hZC5kb2N1bWVudE1ldGFkYXRhLm5hbWUpO1xuICAgICAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzLmFkZChuLmdldChuLmxlbmd0aCAtIDIpKTtcbiAgICAgICAgfSBlbHNlIHQucGF5bG9hZC5kb2N1bWVudCAmJiAodGhpcy5kb2N1bWVudHNbdGhpcy5kb2N1bWVudHMubGVuZ3RoIC0gMV0uZG9jdW1lbnQgPSB0LnBheWxvYWQuZG9jdW1lbnQsIFxuICAgICAgICArK2UpO1xuICAgICAgICByZXR1cm4gZSAhPT0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPyAodGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPSBlLCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcykpIDogbnVsbDtcbiAgICB9XG4gICAga3UodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcCwgbiA9IG5ldyBCdSh0aGlzLk0pO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkgaWYgKHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ubGkocy5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKGUuZ2V0KG4pIHx8IHpuKCkpLmFkZCh0KTtcbiAgICAgICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyB0byAnU3VjY2VzcycgYW5kIHJldHVybiB0aGUgdXBkYXRlZCBwcm9ncmVzcy5cbiAgICAgKi8gICAgYXN5bmMgY29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmbyh0aGlzLmxvY2FsU3RvcmUsIG5ldyBCdSh0aGlzLk0pLCB0aGlzLmRvY3VtZW50cywgdGhpcy54dS5pZCksIGUgPSB0aGlzLmt1KHRoaXMuZG9jdW1lbnRzKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMucXVlcmllcykgYXdhaXQgX28odGhpcy5sb2NhbFN0b3JlLCB0LCBlLmdldCh0Lm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MudGFza1N0YXRlID0gXCJTdWNjZXNzXCIsIHtcbiAgICAgICAgICAgIHByb2dyZXNzOiB0aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgTXU6IHRoaXMuY29sbGVjdGlvbkdyb3VwcyxcbiAgICAgICAgICAgIE91OiB0XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBpbml0aWFsIHByb2dyZXNzIG9mXG4gKiBsb2FkaW5nIGEgYnVuZGxlLlxuICovIGZ1bmN0aW9uIFV1KHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdGhhdCB0aGUgbG9hZGluZ1xuICogaGFzIHN1Y2NlZWRlZC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIHF1IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIEd1IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cbiAqLyBjbGFzcyBLdSB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuRnUgPSBlLCB0aGlzLiR1ID0gbnVsbCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgd2hldGhlciB0aGUgdmlldyBpcyBjdXJyZW50IHdpdGggdGhlIGJhY2tlbmQuIEEgdmlldyBpcyBjb25zaWRlcmVkXG4gICAgICAgICAqIGN1cnJlbnQgYWZ0ZXIgaXQgaGFzIHNlZW4gdGhlIGN1cnJlbnQgZmxhZyBmcm9tIHRoZSBiYWNrZW5kIGFuZCBkaWQgbm90XG4gICAgICAgICAqIGxvc2UgY29uc2lzdGVuY3kgd2l0aGluIHRoZSB3YXRjaCBzdHJlYW0gKGUuZy4gYmVjYXVzZSBvZiBhbiBleGlzdGVuY2VcbiAgICAgICAgICogZmlsdGVyIG1pc21hdGNoKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCBcbiAgICAgICAgLyoqIERvY3VtZW50cyBpbiB0aGUgdmlldyBidXQgbm90IGluIHRoZSByZW1vdGUgdGFyZ2V0ICovXG4gICAgICAgIHRoaXMuQnUgPSB6bigpLCBcbiAgICAgICAgLyoqIERvY3VtZW50IEtleXMgdGhhdCBoYXZlIGxvY2FsIGNoYW5nZXMgKi9cbiAgICAgICAgdGhpcy5tdXRhdGVkS2V5cyA9IHpuKCksIHRoaXMuTHUgPSBXZSh0KSwgdGhpcy5VdSA9IG5ldyBWdSh0aGlzLkx1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiByZW1vdGUgZG9jdW1lbnRzIHRoYXQgdGhlIHNlcnZlciBoYXMgdG9sZCB1cyBiZWxvbmdzIHRvIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoXG4gICAgICogdGhpcyB2aWV3LlxuICAgICAqLyAgICBnZXQgcXUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZ1O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc2V0IG9mIGRvYyBjaGFuZ2VzLCBhcHBsaWVzIHRoZSBxdWVyeSBsaW1pdCwgYW5kIGNvbXB1dGVzXG4gICAgICogd2hhdCB0aGUgbmV3IHJlc3VsdHMgc2hvdWxkIGJlLCB3aGF0IHRoZSBjaGFuZ2VzIHdlcmUsIGFuZCB3aGV0aGVyIHdlIG1heVxuICAgICAqIG5lZWQgdG8gZ28gYmFjayB0byB0aGUgbG9jYWwgY2FjaGUgZm9yIG1vcmUgcmVzdWx0cy4gRG9lcyBub3QgbWFrZSBhbnlcbiAgICAgKiBjaGFuZ2VzIHRvIHRoZSB2aWV3LlxuICAgICAqIEBwYXJhbSBkb2NDaGFuZ2VzIC0gVGhlIGRvYyBjaGFuZ2VzIHRvIGFwcGx5IHRvIHRoaXMgdmlldy5cbiAgICAgKiBAcGFyYW0gcHJldmlvdXNDaGFuZ2VzIC0gSWYgdGhpcyBpcyBiZWluZyBjYWxsZWQgd2l0aCBhIHJlZmlsbCwgdGhlbiBzdGFydFxuICAgICAqICAgICAgICB3aXRoIHRoaXMgc2V0IG9mIGRvY3MgYW5kIGNoYW5nZXMgaW5zdGVhZCBvZiB0aGUgY3VycmVudCB2aWV3LlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHNldCBvZiBkb2NzLCBjaGFuZ2VzLCBhbmQgcmVmaWxsIGZsYWcuXG4gICAgICovICAgIEd1KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgPyBlLkt1IDogbmV3IHZ1LCBzID0gZSA/IGUuVXUgOiB0aGlzLlV1O1xuICAgICAgICBsZXQgaSA9IGUgPyBlLm11dGF0ZWRLZXlzIDogdGhpcy5tdXRhdGVkS2V5cywgciA9IHMsIG8gPSAhMTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIGxhc3QgZG9jIGluIGEgKGZ1bGwpIGxpbWl0LiBUaGlzIGlzIG5lY2Vzc2FyeSwgYmVjYXVzZSBzb21lXG4gICAgICAgIC8vIHVwZGF0ZSAoYSBkZWxldGUsIG9yIGFuIHVwZGF0ZSBtb3ZpbmcgYSBkb2MgcGFzdCB0aGUgb2xkIGxpbWl0KSBtaWdodFxuICAgICAgICAvLyBtZWFuIHRoZXJlIGlzIHNvbWUgb3RoZXIgZG9jdW1lbnQgaW4gdGhlIGxvY2FsIGNhY2hlIHRoYXQgZWl0aGVyIHNob3VsZFxuICAgICAgICAvLyBjb21lICgxKSBiZXR3ZWVuIHRoZSBvbGQgbGFzdCBsaW1pdCBkb2MgYW5kIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlXG4gICAgICAgIC8vIGNhc2Ugb2YgdXBkYXRlcywgb3IgKDIpIGFmdGVyIHRoZSBuZXcgbGFzdCBkb2N1bWVudCwgaW4gdGhlIGNhc2Ugb2ZcbiAgICAgICAgLy8gZGVsZXRlcy4gU28gd2Uga2VlcCB0aGlzIGRvYyBhdCB0aGUgb2xkIGxpbWl0IHRvIGNvbXBhcmUgdGhlIHVwZGF0ZXMgdG8uXG4gICAgICAgIC8vIE5vdGUgdGhhdCB0aGlzIHNob3VsZCBuZXZlciBnZXQgdXNlZCBpbiBhIHJlZmlsbCAod2hlbiBwcmV2aW91c0NoYW5nZXMgaXNcbiAgICAgICAgLy8gc2V0KSwgYmVjYXVzZSB0aGVyZSB3aWxsIG9ubHkgYmUgYWRkcyAtLSBubyBkZWxldGVzIG9yIHVwZGF0ZXMuXG4gICAgICAgIGNvbnN0IHUgPSBrZSh0aGlzLnF1ZXJ5KSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmxhc3QoKSA6IG51bGwsIGEgPSBNZSh0aGlzLnF1ZXJ5KSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmZpcnN0KCkgOiBudWxsO1xuICAgICAgICAvLyBEcm9wIGRvY3VtZW50cyBvdXQgdG8gbWVldCBsaW1pdC9saW1pdFRvTGFzdCByZXF1aXJlbWVudC5cbiAgICAgICAgaWYgKHQuaW5vcmRlclRyYXZlcnNhbCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBzLmdldCh0KSwgaCA9IFFlKHRoaXMucXVlcnksIGUpID8gZSA6IG51bGwsIGwgPSAhIWMgJiYgdGhpcy5tdXRhdGVkS2V5cy5oYXMoYy5rZXkpLCBmID0gISFoICYmIChoLmhhc0xvY2FsTXV0YXRpb25zIHx8IFxuICAgICAgICAgICAgLy8gV2Ugb25seSBjb25zaWRlciBjb21taXR0ZWQgbXV0YXRpb25zIGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlXG4gICAgICAgICAgICAvLyBtdXRhdGVkIGR1cmluZyB0aGUgbGlmZXRpbWUgb2YgdGhlIHZpZXcuXG4gICAgICAgICAgICB0aGlzLm11dGF0ZWRLZXlzLmhhcyhoLmtleSkgJiYgaC5oYXNDb21taXR0ZWRNdXRhdGlvbnMpO1xuICAgICAgICAgICAgbGV0IGQgPSAhMTtcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBjaGFuZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjICYmIGgpIHtcbiAgICAgICAgICAgICAgICBjLmRhdGEuaXNFcXVhbChoLmRhdGEpID8gbCAhPT0gZiAmJiAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IDMgLyogTWV0YWRhdGEgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwKSA6IHRoaXMuUXUoYywgaCkgfHwgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIE1vZGlmaWVkICovICxcbiAgICAgICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICAgICAgfSksIGQgPSAhMCwgKHUgJiYgdGhpcy5MdShoLCB1KSA+IDAgfHwgYSAmJiB0aGlzLkx1KGgsIGEpIDwgMCkgJiYgKFxuICAgICAgICAgICAgICAgIC8vIFRoaXMgZG9jIG1vdmVkIGZyb20gaW5zaWRlIHRoZSBsaW1pdCB0byBvdXRzaWRlIHRoZSBsaW1pdC5cbiAgICAgICAgICAgICAgICAvLyBUaGF0IG1lYW5zIHRoZXJlIG1heSBiZSBzb21lIG90aGVyIGRvYyBpbiB0aGUgbG9jYWwgY2FjaGVcbiAgICAgICAgICAgICAgICAvLyB0aGF0IHNob3VsZCBiZSBpbmNsdWRlZCBpbnN0ZWFkLlxuICAgICAgICAgICAgICAgIG8gPSAhMCkpO1xuICAgICAgICAgICAgfSBlbHNlICFjICYmIGggPyAobi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBBZGRlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBoXG4gICAgICAgICAgICB9KSwgZCA9ICEwKSA6IGMgJiYgIWggJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgIHR5cGU6IDEgLyogUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBjXG4gICAgICAgICAgICB9KSwgZCA9ICEwLCAodSB8fCBhKSAmJiAoXG4gICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXG4gICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXG4gICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIGQgJiYgKGggPyAociA9IHIuYWRkKGgpLCBpID0gZiA/IGkuYWRkKHQpIDogaS5kZWxldGUodCkpIDogKHIgPSByLmRlbGV0ZSh0KSwgaSA9IGkuZGVsZXRlKHQpKSk7XG4gICAgICAgIH0pKSwga2UodGhpcy5xdWVyeSkgfHwgTWUodGhpcy5xdWVyeSkpIGZvciAoO3Iuc2l6ZSA+IHRoaXMucXVlcnkubGltaXQ7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGtlKHRoaXMucXVlcnkpID8gci5sYXN0KCkgOiByLmZpcnN0KCk7XG4gICAgICAgICAgICByID0gci5kZWxldGUodC5rZXkpLCBpID0gaS5kZWxldGUodC5rZXkpLCBuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIFJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIFV1OiByLFxuICAgICAgICAgICAgS3U6IG4sXG4gICAgICAgICAgICBlaTogbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBpXG4gICAgICAgIH07XG4gICAgfVxuICAgIFF1KHQsIGUpIHtcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxuICAgICAgICByZXR1cm4gdC5oYXNMb2NhbE11dGF0aW9ucyAmJiBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiAhZS5oYXNMb2NhbE11dGF0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXG4gICAgICogQHBhcmFtIHVwZGF0ZUxpbWJvRG9jdW1lbnRzIC0gV2hldGhlciB0byB1cGRhdGUgbGltYm8gZG9jdW1lbnRzIGJhc2VkIG9uXG4gICAgICogICAgICAgIHRoaXMgY2hhbmdlLlxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgLSBBIHRhcmdldCBjaGFuZ2UgdG8gYXBwbHkgZm9yIGNvbXB1dGluZyBsaW1ibyBkb2NzIGFuZFxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLlV1O1xuICAgICAgICB0aGlzLlV1ID0gdC5VdSwgdGhpcy5tdXRhdGVkS2V5cyA9IHQubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IGkgPSB0Lkt1LnB1KCk7XG4gICAgICAgIGkuc29ydCgoKHQsIGUpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBBZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgY2FzZSAzIC8qIE1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBSZW1vdmVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBMKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBuKHQpIC0gbihlKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodC50eXBlLCBlLnR5cGUpIHx8IHRoaXMuTHUodC5kb2MsIGUuZG9jKSkpLCB0aGlzLmp1KG4pO1xuICAgICAgICBjb25zdCByID0gZSA/IHRoaXMuV3UoKSA6IFtdLCBvID0gMCA9PT0gdGhpcy5CdS5zaXplICYmIHRoaXMuY3VycmVudCA/IDEgLyogU3luY2VkICovIDogMCAvKiBMb2NhbCAqLyAsIHUgPSBvICE9PSB0aGlzLiR1O1xuICAgICAgICBpZiAodGhpcy4kdSA9IG8sIDAgIT09IGkubGVuZ3RoIHx8IHUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc25hcHNob3Q6IG5ldyBTdSh0aGlzLnF1ZXJ5LCB0LlV1LCBzLCBpLCB0Lm11dGF0ZWRLZXlzLCAwIC8qIExvY2FsICovID09PSBvLCB1LCBcbiAgICAgICAgICAgICAgICAvKiBleGNsdWRlc01ldGFkYXRhQ2hhbmdlcz0gKi8gITEpLFxuICAgICAgICAgICAgICAgIHp1OiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIC8vIG5vIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHp1OiByXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSB2aWV3LCBwb3RlbnRpYWxseSBnZW5lcmF0aW5nIGFcbiAgICAgKiBWaWV3Q2hhbmdlIGlmIHRoZSB2aWV3J3Mgc3luY1N0YXRlIGNoYW5nZXMgYXMgYSByZXN1bHQuXG4gICAgICovICAgIEV1KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudCAmJiBcIk9mZmxpbmVcIiAvKiBPZmZsaW5lICovID09PSB0ID8gKFxuICAgICAgICAvLyBJZiB3ZSdyZSBvZmZsaW5lLCBzZXQgYGN1cnJlbnRgIHRvIGZhbHNlIGFuZCB0aGVuIGNhbGwgYXBwbHlDaGFuZ2VzKClcbiAgICAgICAgLy8gdG8gcmVmcmVzaCBvdXIgc3luY1N0YXRlIGFuZCBnZW5lcmF0ZSBhIFZpZXdDaGFuZ2UgYXMgYXBwcm9wcmlhdGUuIFdlXG4gICAgICAgIC8vIGFyZSBndWFyYW50ZWVkIHRvIGdldCBhIG5ldyBUYXJnZXRDaGFuZ2UgdGhhdCBzZXRzIGBjdXJyZW50YCBiYWNrIHRvXG4gICAgICAgIC8vIHRydWUgb25jZSB0aGUgY2xpZW50IGlzIGJhY2sgb25saW5lLlxuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgdGhpcy5hcHBseUNoYW5nZXMoe1xuICAgICAgICAgICAgVXU6IHRoaXMuVXUsXG4gICAgICAgICAgICBLdTogbmV3IHZ1LFxuICAgICAgICAgICAgbXV0YXRlZEtleXM6IHRoaXMubXV0YXRlZEtleXMsXG4gICAgICAgICAgICBlaTogITFcbiAgICAgICAgfSwgXG4gICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSkpIDoge1xuICAgICAgICAgICAgenU6IFtdXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgZG9jIGZvciB0aGUgZ2l2ZW4ga2V5IHNob3VsZCBiZSBpbiBsaW1iby5cbiAgICAgKi8gICAgSHUodCkge1xuICAgICAgICAvLyBJZiB0aGUgcmVtb3RlIGVuZCBzYXlzIGl0J3MgcGFydCBvZiB0aGlzIHF1ZXJ5LCBpdCdzIG5vdCBpbiBsaW1iby5cbiAgICAgICAgcmV0dXJuICF0aGlzLkZ1Lmhhcyh0KSAmJiAoXG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBkb2Vzbid0IHRoaW5rIGl0J3MgYSByZXN1bHQsIHNvIGl0IHNob3VsZG4ndCBiZSBpbiBsaW1iby5cbiAgICAgICAgISF0aGlzLlV1Lmhhcyh0KSAmJiAhdGhpcy5VdS5nZXQodCkuaGFzTG9jYWxNdXRhdGlvbnMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHN5bmNlZERvY3VtZW50cywgY3VycmVudCwgYW5kIGxpbWJvIGRvY3MgYmFzZWQgb24gdGhlIGdpdmVuIGNoYW5nZS5cbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIGNoYW5nZXMgdG8gd2hpY2ggZG9jcyBhcmUgaW4gbGltYm8uXG4gICAgICovICAgIGp1KHQpIHtcbiAgICAgICAgdCAmJiAodC5hZGRlZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHRoaXMuRnUgPSB0aGlzLkZ1LmFkZCh0KSkpLCB0Lm1vZGlmaWVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4ge30pKSwgXG4gICAgICAgIHQucmVtb3ZlZERvY3VtZW50cy5mb3JFYWNoKCh0ID0+IHRoaXMuRnUgPSB0aGlzLkZ1LmRlbGV0ZSh0KSkpLCB0aGlzLmN1cnJlbnQgPSB0LmN1cnJlbnQpO1xuICAgIH1cbiAgICBXdSgpIHtcbiAgICAgICAgLy8gV2UgY2FuIG9ubHkgZGV0ZXJtaW5lIGxpbWJvIGRvY3VtZW50cyB3aGVuIHdlJ3JlIGluLXN5bmMgd2l0aCB0aGUgc2VydmVyLlxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudCkgcmV0dXJuIFtdO1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogRG8gdGhpcyBpbmNyZW1lbnRhbGx5IHNvIHRoYXQgaXQncyBub3QgcXVhZHJhdGljIHdoZW5cbiAgICAgICAgLy8gdXBkYXRpbmcgbWFueSBkb2N1bWVudHMuXG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuQnU7XG4gICAgICAgIHRoaXMuQnUgPSB6bigpLCB0aGlzLlV1LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5IdSh0LmtleSkgJiYgKHRoaXMuQnUgPSB0aGlzLkJ1LmFkZCh0LmtleSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIERpZmYgdGhlIG5ldyBsaW1ibyBkb2NzIHdpdGggdGhlIG9sZCBsaW1ibyBkb2NzLlxuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5CdS5oYXModCkgfHwgZS5wdXNoKG5ldyBHdSh0KSk7XG4gICAgICAgIH0pKSwgdGhpcy5CdS5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIHQuaGFzKG4pIHx8IGUucHVzaChuZXcgcXUobikpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSB0aGUgaW4tbWVtb3J5IHN0YXRlIG9mIHRoZSBjdXJyZW50IHZpZXcgd2l0aCB0aGUgc3RhdGUgcmVhZCBmcm9tXG4gICAgICogcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBXZSB1cGRhdGUgdGhlIHF1ZXJ5IHZpZXcgd2hlbmV2ZXIgYSBjbGllbnQncyBwcmltYXJ5IHN0YXR1cyBjaGFuZ2VzOlxuICAgICAqIC0gV2hlbiBhIGNsaWVudCB0cmFuc2l0aW9ucyBmcm9tIHByaW1hcnkgdG8gc2Vjb25kYXJ5LCBpdCBjYW4gbWlzc1xuICAgICAqICAgTG9jYWxTdG9yYWdlIHVwZGF0ZXMgYW5kIGl0cyBxdWVyeSB2aWV3cyBtYXkgdGVtcG9yYXJpbHkgbm90IGJlXG4gICAgICogICBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgKiAtIEZvciBzZWNvbmRhcnkgdG8gcHJpbWFyeSB0cmFuc2l0aW9ucywgdGhlIGNsaWVudCBuZWVkcyB0byB1cGRhdGUgdGhlIGxpc3RcbiAgICAgKiAgIG9mIGBzeW5jZWREb2N1bWVudHNgIHNpbmNlIHNlY29uZGFyeSBjbGllbnRzIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3c1xuICAgICAqICAgYmFzZWQgcHVyZWx5IG9uIHN5bnRoZXNpemVkIFJlbW90ZUV2ZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5kb2N1bWVudHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHF1ZXJ5IGFjY29yZGluZ1xuICAgICAqIHRvIHRoZSBMb2NhbFN0b3JlLlxuICAgICAqIEBwYXJhbSBxdWVyeVJlc3VsdC5yZW1vdGVLZXlzIC0gVGhlIGtleXMgb2YgdGhlIGRvY3VtZW50cyB0aGF0IG1hdGNoIHRoZVxuICAgICAqIHF1ZXJ5IGFjY29yZGluZyB0byB0aGUgYmFja2VuZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBWaWV3Q2hhbmdlIHRoYXQgcmVzdWx0ZWQgZnJvbSB0aGlzIHN5bmNocm9uaXphdGlvbi5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIEp1KHQpIHtcbiAgICAgICAgdGhpcy5GdSA9IHQuaGksIHRoaXMuQnUgPSB6bigpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5HdSh0LmRvY3VtZW50cyk7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGx5Q2hhbmdlcyhlLCAvKnVwZGF0ZUxpbWJvRG9jdW1lbnRzPSovICEwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgdGhpcyBxdWVyeSB3YXMganVzdCBsaXN0ZW5lZCB0by4gQ29udGFpbnNcbiAgICAgKiBhIGRvY3VtZW50IGFkZCBmb3IgZXZlcnkgZXhpc3RpbmcgZG9jdW1lbnQgYW5kIHRoZSBgZnJvbUNhY2hlYCBhbmRcbiAgICAgKiBgaGFzUGVuZGluZ1dyaXRlc2Agc3RhdHVzIG9mIHRoZSBhbHJlYWR5IGVzdGFibGlzaGVkIHZpZXcuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBZdSgpIHtcbiAgICAgICAgcmV0dXJuIFN1LmZyb21Jbml0aWFsRG9jdW1lbnRzKHRoaXMucXVlcnksIHRoaXMuVXUsIHRoaXMubXV0YXRlZEtleXMsIDAgLyogTG9jYWwgKi8gPT09IHRoaXMuJHUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBRdWVyeVZpZXcgY29udGFpbnMgYWxsIG9mIHRoZSBkYXRhIHRoYXQgU3luY0VuZ2luZSBuZWVkcyB0byBrZWVwIHRyYWNrIG9mIGZvclxuICogYSBwYXJ0aWN1bGFyIHF1ZXJ5LlxuICovXG5jbGFzcyBRdSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIHF1ZXJ5IGl0c2VsZi5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBUaGUgdGFyZ2V0IG51bWJlciBjcmVhdGVkIGJ5IHRoZSBjbGllbnQgdGhhdCBpcyB1c2VkIGluIHRoZSB3YXRjaFxuICAgICAqIHN0cmVhbSB0byBpZGVudGlmeSB0aGlzIHF1ZXJ5LlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSB2aWV3IGlzIHJlc3BvbnNpYmxlIGZvciBjb21wdXRpbmcgdGhlIGZpbmFsIG1lcmdlZCB0cnV0aCBvZiB3aGF0XG4gICAgICogZG9jcyBhcmUgaW4gdGhlIHF1ZXJ5LiBJdCBnZXRzIG5vdGlmaWVkIG9mIGxvY2FsIGFuZCByZW1vdGUgY2hhbmdlcyxcbiAgICAgKiBhbmQgYXBwbGllcyB0aGUgcXVlcnkgZmlsdGVycyBhbmQgbGltaXRzIHRvIGRldGVybWluZSB0aGUgbW9zdCBjb3JyZWN0XG4gICAgICogcG9zc2libGUgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLnRhcmdldElkID0gZSwgdGhpcy52aWV3ID0gbjtcbiAgICB9XG59XG5cbi8qKiBUcmFja3MgYSBsaW1ibyByZXNvbHV0aW9uLiAqLyBjbGFzcyBqdSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtleSA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRvIHRydWUgb25jZSB3ZSd2ZSByZWNlaXZlZCBhIGRvY3VtZW50LiBUaGlzIGlzIHVzZWQgaW5cbiAgICAgICAgICogZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCgpIGFuZCB1bHRpbWF0ZWx5IHVzZWQgYnkgV2F0Y2hDaGFuZ2VBZ2dyZWdhdG9yIHRvXG4gICAgICAgICAqIGRlY2lkZSB3aGV0aGVyIGl0IG5lZWRzIHRvIG1hbnVmYWN0dXJlIGEgZGVsZXRlIGV2ZW50IGZvciB0aGUgdGFyZ2V0IG9uY2VcbiAgICAgICAgICogdGhlIHRhcmdldCBpcyBDVVJSRU5ULlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5YdSA9ICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiBgU3luY0VuZ2luZWAgY29vcmRpbmF0aW5nIHdpdGggb3RoZXIgcGFydHMgb2YgU0RLLlxuICpcbiAqIFRoZSBwYXJ0cyBvZiBTeW5jRW5naW5lIHRoYXQgYWN0IGFzIGEgY2FsbGJhY2sgdG8gUmVtb3RlU3RvcmUgbmVlZCB0byBiZVxuICogcmVnaXN0ZXJlZCBpbmRpdmlkdWFsbHkuIFRoaXMgaXMgZG9uZSBpbiBgc3luY0VuZ2luZVdyaXRlKClgIGFuZFxuICogYHN5bmNFbmdpbmVMaXN0ZW4oKWAgKGFzIHdlbGwgYXMgYGFwcGx5UHJpbWFyeVN0YXRlKClgKSBhcyB0aGVzZSBtZXRob2RzXG4gKiBzZXJ2ZSBhcyBlbnRyeSBwb2ludHMgdG8gUmVtb3RlU3RvcmUncyBmdW5jdGlvbmFsaXR5LlxuICpcbiAqIE5vdGU6IHNvbWUgZmllbGQgZGVmaW5lZCBpbiB0aGlzIGNsYXNzIG1pZ2h0IGhhdmUgcHVibGljIGFjY2VzcyBsZXZlbCwgYnV0XG4gKiB0aGUgY2xhc3MgaXMgbm90IGV4cG9ydGVkIHNvIHRoZXkgYXJlIG9ubHkgYWNjZXNzaWJsZSBmcm9tIHRoaXMgbW9kdWxlLlxuICogVGhpcyBpcyB1c2VmdWwgdG8gaW1wbGVtZW50IG9wdGlvbmFsIGZlYXR1cmVzIChsaWtlIGJ1bmRsZXMpIGluIGZyZWVcbiAqIGZ1bmN0aW9ucywgc3VjaCB0aGF0IHRoZXkgYXJlIHRyZWUtc2hha2VhYmxlLlxuICovIGNsYXNzIFd1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IE1hbmFnZXMgc3RhdGUgc3luY2hyb25pemF0aW9uIGluIG11bHRpLXRhYiBlbnZpcm9ubWVudHMuXG4gICAgcywgaSwgcikge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLnJlbW90ZVN0b3JlID0gZSwgdGhpcy5ldmVudE1hbmFnZXIgPSBuLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gcywgXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBpLCB0aGlzLm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zID0gciwgdGhpcy5adSA9IHt9LCB0aGlzLnRhID0gbmV3IGtuKCh0ID0+IEdlKHQpKSwgcWUpLCBcbiAgICAgICAgdGhpcy5lYSA9IG5ldyBNYXAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGtleXMgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIGluIGxpbWJvIGZvciB3aGljaCB3ZSBoYXZlbid0IHlldCBzdGFydGVkIGFcbiAgICAgICAgICogbGltYm8gcmVzb2x1dGlvbiBxdWVyeS4gVGhlIHN0cmluZ3MgaW4gdGhpcyBzZXQgYXJlIHRoZSByZXN1bHQgb2YgY2FsbGluZ1xuICAgICAgICAgKiBga2V5LnBhdGguY2Fub25pY2FsU3RyaW5nKClgIHdoZXJlIGBrZXlgIGlzIGEgYERvY3VtZW50S2V5YCBvYmplY3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZSBgU2V0YCB0eXBlIHdhcyBjaG9zZW4gYmVjYXVzZSBpdCBwcm92aWRlcyBlZmZpY2llbnQgbG9va3VwIGFuZCByZW1vdmFsXG4gICAgICAgICAqIG9mIGFyYml0cmFyeSBlbGVtZW50cyBhbmQgaXQgYWxzbyBtYWludGFpbnMgaW5zZXJ0aW9uIG9yZGVyLCBwcm92aWRpbmcgdGhlXG4gICAgICAgICAqIGRlc2lyZWQgcXVldWUtbGlrZSBGSUZPIHNlbWFudGljcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmEgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSB0YXJnZXQgSUQgZm9yIGVhY2ggZG9jdW1lbnQgdGhhdCBpcyBpbiBsaW1ibyB3aXRoIGFuXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNhID0gbmV3IE1uKHh0LmNvbXBhcmF0b3IpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEtlZXBzIHRyYWNrIG9mIHRoZSBpbmZvcm1hdGlvbiBhYm91dCBhbiBhY3RpdmUgbGltYm8gcmVzb2x1dGlvbiBmb3IgZWFjaFxuICAgICAgICAgKiBhY3RpdmUgdGFyZ2V0IElEIHRoYXQgd2FzIHN0YXJ0ZWQgZm9yIHRoZSBwdXJwb3NlIG9mIGxpbWJvIHJlc29sdXRpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlhID0gbmV3IE1hcCwgdGhpcy5yYSA9IG5ldyBnbywgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjb21wbGV0aW9uIGhhbmRsZXJzLCBpbmRleGVkIGJ5IFVzZXIgYW5kIEJhdGNoSWQuICovXG4gICAgICAgIHRoaXMub2EgPSB7fSwgXG4gICAgICAgIC8qKiBTdG9yZXMgdXNlciBjYWxsYmFja3Mgd2FpdGluZyBmb3IgYWxsIHBlbmRpbmcgd3JpdGVzIHRvIGJlIGFja25vd2xlZGdlZC4gKi9cbiAgICAgICAgdGhpcy51YSA9IG5ldyBNYXAsIHRoaXMuYWEgPSBFci5nbigpLCB0aGlzLm9ubGluZVN0YXRlID0gXCJVbmtub3duXCIgLyogVW5rbm93biAqLyAsIFxuICAgICAgICAvLyBUaGUgcHJpbWFyeSBzdGF0ZSBpcyBzZXQgdG8gYHRydWVgIG9yIGBmYWxzZWAgaW1tZWRpYXRlbHkgYWZ0ZXIgRmlyZXN0b3JlXG4gICAgICAgIC8vIHN0YXJ0dXAuIEluIHRoZSBpbnRlcmltLCBhIGNsaWVudCBzaG91bGQgb25seSBiZSBjb25zaWRlcmVkIHByaW1hcnkgaWZcbiAgICAgICAgLy8gYGlzUHJpbWFyeWAgaXMgdHJ1ZS5cbiAgICAgICAgdGhpcy5jYSA9IHZvaWQgMDtcbiAgICB9XG4gICAgZ2V0IGlzUHJpbWFyeUNsaWVudCgpIHtcbiAgICAgICAgcmV0dXJuICEwID09PSB0aGlzLmNhO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWF0ZXMgdGhlIG5ldyBsaXN0ZW4sIHJlc29sdmVzIHByb21pc2Ugd2hlbiBsaXN0ZW4gZW5xdWV1ZWQgdG8gdGhlXG4gKiBzZXJ2ZXIuIEFsbCB0aGUgc3Vic2VxdWVudCB2aWV3IHNuYXBzaG90cyBvciBlcnJvcnMgYXJlIHNlbnQgdG8gdGhlXG4gKiBzdWJzY3JpYmVkIGhhbmRsZXJzLiBSZXR1cm5zIHRoZSBpbml0aWFsIHNuYXBzaG90LlxuICovXG5hc3luYyBmdW5jdGlvbiB6dSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEFhKHQpO1xuICAgIGxldCBzLCBpO1xuICAgIGNvbnN0IHIgPSBuLnRhLmdldChlKTtcbiAgICBpZiAocikgXG4gICAgLy8gUE9SVElORyBOT1RFOiBXaXRoIE11bHRpLVRhYiBXZWIsIGl0IGlzIHBvc3NpYmxlIHRoYXQgYSBxdWVyeSB2aWV3XG4gICAgLy8gYWxyZWFkeSBleGlzdHMgd2hlbiBFdmVudE1hbmFnZXIgY2FsbHMgdXMgZm9yIHRoZSBmaXJzdCB0aW1lLiBUaGlzXG4gICAgLy8gaGFwcGVucyB3aGVuIHRoZSBwcmltYXJ5IHRhYiBpcyBhbHJlYWR5IGxpc3RlbmluZyB0byB0aGlzIHF1ZXJ5IG9uXG4gICAgLy8gYmVoYWxmIG9mIGFub3RoZXIgdGFiIGFuZCB0aGUgdXNlciBvZiB0aGUgcHJpbWFyeSBhbHNvIHN0YXJ0cyBsaXN0ZW5pbmdcbiAgICAvLyB0byB0aGUgcXVlcnkuIEV2ZW50TWFuYWdlciB3aWxsIG5vdCBoYXZlIGFuIGFzc2lnbmVkIHRhcmdldCBJRCBpbiB0aGlzXG4gICAgLy8gY2FzZSBhbmQgY2FsbHMgYGxpc3RlbmAgdG8gb2J0YWluIHRoaXMgSUQuXG4gICAgcyA9IHIudGFyZ2V0SWQsIG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldChzKSwgaSA9IHIudmlldy5ZdSgpOyBlbHNlIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IG9vKG4ubG9jYWxTdG9yZSwgTGUoZSkpO1xuICAgICAgICBuLmlzUHJpbWFyeUNsaWVudCAmJiBabyhuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICAgICAgY29uc3QgciA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuYWRkTG9jYWxRdWVyeVRhcmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcyA9IHQudGFyZ2V0SWQsIGkgPSBhd2FpdCBIdShuLCBlLCBzLCBcImN1cnJlbnRcIiA9PT0gcik7XG4gICAgfVxuICAgIHJldHVybiBpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBhIHZpZXcgZm9yIGEgcHJldmlvdXNseSB1bmtub3duIHF1ZXJ5IGFuZCBjb21wdXRlcyBpdHMgaW5pdGlhbFxuICogc25hcHNob3QuXG4gKi8gYXN5bmMgZnVuY3Rpb24gSHUodCwgZSwgbiwgcykge1xuICAgIC8vIFBPUlRJTkcgTk9URTogT24gV2ViIG9ubHksIHdlIGluamVjdCB0aGUgY29kZSB0aGF0IHJlZ2lzdGVycyBuZXcgTGltYm9cbiAgICAvLyB0YXJnZXRzIGJhc2VkIG9uIHZpZXcgY2hhbmdlcy4gVGhpcyBhbGxvd3MgdXMgdG8gb25seSBkZXBlbmQgb24gTGltYm9cbiAgICAvLyBjaGFuZ2VzIHdoZW4gdXNlciBjb2RlIGluY2x1ZGVzIHF1ZXJpZXMuXG4gICAgdC5oYSA9IChlLCBuLCBzKSA9PiBhc3luYyBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gZS52aWV3Lkd1KG4pO1xuICAgICAgICBpLmVpICYmIChcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IGhhcyBhIGxpbWl0IGFuZCBzb21lIGRvY3Mgd2VyZSByZW1vdmVkLCBzbyB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJlLXJ1biB0aGUgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgdG8gbWFrZSBzdXJlIHdlXG4gICAgICAgIC8vIGRpZG4ndCBsb3NlIGFueSBnb29kIGRvY3MgdGhhdCBoYWQgYmVlbiBwYXN0IHRoZSBsaW1pdC5cbiAgICAgICAgaSA9IGF3YWl0IGFvKHQubG9jYWxTdG9yZSwgZS5xdWVyeSwgXG4gICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITEpLnRoZW4oKCh7ZG9jdW1lbnRzOiB0fSkgPT4gZS52aWV3Lkd1KHQsIGkpKSkpO1xuICAgICAgICBjb25zdCByID0gcyAmJiBzLnRhcmdldENoYW5nZXMuZ2V0KGUudGFyZ2V0SWQpLCBvID0gZS52aWV3LmFwcGx5Q2hhbmdlcyhpLCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIHQuaXNQcmltYXJ5Q2xpZW50LCByKTtcbiAgICAgICAgcmV0dXJuIGFhKHQsIGUudGFyZ2V0SWQsIG8uenUpLCBvLnNuYXBzaG90O1xuICAgIH0odCwgZSwgbiwgcyk7XG4gICAgY29uc3QgaSA9IGF3YWl0IGFvKHQubG9jYWxTdG9yZSwgZSwgXG4gICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIHIgPSBuZXcgS3UoZSwgaS5oaSksIG8gPSByLkd1KGkuZG9jdW1lbnRzKSwgdSA9IFhuLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZShuLCBzICYmIFwiT2ZmbGluZVwiIC8qIE9mZmxpbmUgKi8gIT09IHQub25saW5lU3RhdGUpLCBhID0gci5hcHBseUNoYW5nZXMobywgXG4gICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovIHQuaXNQcmltYXJ5Q2xpZW50LCB1KTtcbiAgICBhYSh0LCBuLCBhLnp1KTtcbiAgICBjb25zdCBjID0gbmV3IFF1KGUsIG4sIHIpO1xuICAgIHJldHVybiB0LnRhLnNldChlLCBjKSwgdC5lYS5oYXMobikgPyB0LmVhLmdldChuKS5wdXNoKGUpIDogdC5lYS5zZXQobiwgWyBlIF0pLCBhLnNuYXBzaG90O1xufVxuXG4vKiogU3RvcHMgbGlzdGVuaW5nIHRvIHRoZSBxdWVyeS4gKi8gYXN5bmMgZnVuY3Rpb24gSnUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gbi50YS5nZXQoZSksIGkgPSBuLmVhLmdldChzLnRhcmdldElkKTtcbiAgICBpZiAoaS5sZW5ndGggPiAxKSByZXR1cm4gbi5lYS5zZXQocy50YXJnZXRJZCwgaS5maWx0ZXIoKHQgPT4gIXFlKHQsIGUpKSkpLCB2b2lkIG4udGEuZGVsZXRlKGUpO1xuICAgIC8vIE5vIG90aGVyIHF1ZXJpZXMgYXJlIG1hcHBlZCB0byB0aGUgdGFyZ2V0LCBjbGVhbiB1cCB0aGUgcXVlcnkgYW5kIHRoZSB0YXJnZXQuXG4gICAgICAgIGlmIChuLmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICAvLyBXZSBuZWVkIHRvIHJlbW92ZSB0aGUgbG9jYWwgcXVlcnkgdGFyZ2V0IGZpcnN0IHRvIGFsbG93IHVzIHRvIHZlcmlmeVxuICAgICAgICAvLyB3aGV0aGVyIGFueSBvdGhlciBjbGllbnQgaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGlzIHRhcmdldC5cbiAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KHMudGFyZ2V0SWQpO1xuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzQWN0aXZlUXVlcnlUYXJnZXQocy50YXJnZXRJZCkgfHwgYXdhaXQgdW8obi5sb2NhbFN0b3JlLCBzLnRhcmdldElkLCBcbiAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgbi5zaGFyZWRDbGllbnRTdGF0ZS5jbGVhclF1ZXJ5U3RhdGUocy50YXJnZXRJZCksIHR1KG4ucmVtb3RlU3RvcmUsIHMudGFyZ2V0SWQpLCBcbiAgICAgICAgICAgIG9hKG4sIHMudGFyZ2V0SWQpO1xuICAgICAgICB9KSkuY2F0Y2goVnIpO1xuICAgIH0gZWxzZSBvYShuLCBzLnRhcmdldElkKSwgYXdhaXQgdW8obi5sb2NhbFN0b3JlLCBzLnRhcmdldElkLCBcbiAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKTtcbn1cblxuLyoqXG4gKiBJbml0aWF0ZXMgdGhlIHdyaXRlIG9mIGxvY2FsIG11dGF0aW9uIGJhdGNoIHdoaWNoIGludm9sdmVzIGFkZGluZyB0aGVcbiAqIHdyaXRlcyB0byB0aGUgbXV0YXRpb24gcXVldWUsIG5vdGlmeWluZyB0aGUgcmVtb3RlIHN0b3JlIGFib3V0IG5ld1xuICogbXV0YXRpb25zIGFuZCByYWlzaW5nIGV2ZW50cyBmb3IgYW55IGNoYW5nZXMgdGhpcyB3cml0ZSBjYXVzZWQuXG4gKlxuICogVGhlIHByb21pc2UgcmV0dXJuZWQgYnkgdGhpcyBjYWxsIGlzIHJlc29sdmVkIHdoZW4gdGhlIGFib3ZlIHN0ZXBzXG4gKiBoYXZlIGNvbXBsZXRlZCwgKm5vdCogd2hlbiB0aGUgd3JpdGUgd2FzIGFja2VkIGJ5IHRoZSBiYWNrZW5kLiBUaGVcbiAqIHVzZXJDYWxsYmFjayBpcyByZXNvbHZlZCBvbmNlIHRoZSB3cml0ZSB3YXMgYWNrZWQvcmVqZWN0ZWQgYnkgdGhlXG4gKiBiYWNrZW5kIChvciBmYWlsZWQgbG9jYWxseSBmb3IgYW55IG90aGVyIHJlYXNvbikuXG4gKi8gYXN5bmMgZnVuY3Rpb24gWXUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBSYSh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEcodCksIHMgPSBhdC5ub3coKSwgaSA9IGUucmVkdWNlKCgodCwgZSkgPT4gdC5hZGQoZS5rZXkpKSwgem4oKSk7XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9jYWxseSB3cml0ZSBtdXRhdGlvbnNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbi5haS5xcyh0LCBpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICByID0gaTtcbiAgICAgICAgICAgICAgICAvLyBGb3Igbm9uLWlkZW1wb3RlbnQgbXV0YXRpb25zIChzdWNoIGFzIGBGaWVsZFZhbHVlLmluY3JlbWVudCgpYCksXG4gICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAvLyBsYXRlciB1c2VkIHRvIGd1YXJhbnRlZSBjb25zaXN0ZW50IHZhbHVlcyBhbmQgcHJldmVudHMgZmxpY2tlclxuICAgICAgICAgICAgICAgIC8vIGV2ZW4gaWYgdGhlIGJhY2tlbmQgc2VuZHMgdXMgYW4gdXBkYXRlIHRoYXQgYWxyZWFkeSBpbmNsdWRlcyBvdXJcbiAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBwbih0LCByLmdldCh0LmtleSkpO1xuICAgICAgICAgICAgICAgICAgICBudWxsICE9IGUgJiYgXG4gICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IFRoZSBiYXNlIHN0YXRlIHNob3VsZCBvbmx5IGJlIGFwcGxpZWQgaWYgdGhlcmUncyBzb21lXG4gICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGRvY3VtZW50IHRvIG92ZXJyaWRlLCBzbyB1c2UgYSBQcmVjb25kaXRpb24gb2ZcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhpc3RzPXRydWVcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBBbih0LmtleSwgZSwgWnQoZS52YWx1ZS5tYXBWYWx1ZSksIF9uLmV4aXN0cyghMCkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uJHMuYWRkTXV0YXRpb25CYXRjaCh0LCBzLCBvLCBlKTtcbiAgICAgICAgICAgIH0pKSkpLnRoZW4oKHQgPT4gKHQuYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQociksIHtcbiAgICAgICAgICAgICAgICBiYXRjaElkOiB0LmJhdGNoSWQsXG4gICAgICAgICAgICAgICAgY2hhbmdlczogclxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfShzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLmFkZFBlbmRpbmdNdXRhdGlvbih0LmJhdGNoSWQpLCBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBsZXQgcyA9IHQub2FbdC5jdXJyZW50VXNlci50b0tleSgpXTtcbiAgICAgICAgICAgIHMgfHwgKHMgPSBuZXcgTW4ocnQpKTtcbiAgICAgICAgICAgIHMgPSBzLmluc2VydChlLCBuKSwgdC5vYVt0LmN1cnJlbnRVc2VyLnRvS2V5KCldID0gcztcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlc29sdmVzIG9yIHJlamVjdHMgdGhlIHVzZXIgY2FsbGJhY2sgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgdGhlbiBkaXNjYXJkc1xuICogaXQuXG4gKi8gKHMsIHQuYmF0Y2hJZCwgbiksIGF3YWl0IGxhKHMsIHQuY2hhbmdlcyksIGF3YWl0IGZ1KHMucmVtb3RlU3RvcmUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgLy8gSWYgd2UgY2FuJ3QgcGVyc2lzdCB0aGUgbXV0YXRpb24sIHdlIHJlamVjdCB0aGUgdXNlciBjYWxsYmFjayBhbmRcbiAgICAgICAgLy8gZG9uJ3Qgc2VuZCB0aGUgbXV0YXRpb24uIFRoZSB1c2VyIGNhbiB0aGVuIHJldHJ5IHRoZSB3cml0ZS5cbiAgICAgICAgY29uc3QgZSA9IFB1KHQsIFwiRmFpbGVkIHRvIHBlcnNpc3Qgd3JpdGVcIik7XG4gICAgICAgIG4ucmVqZWN0KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIG9uZSByZW1vdGUgZXZlbnQgdG8gdGhlIHN5bmMgZW5naW5lLCBub3RpZnlpbmcgYW55IHZpZXdzIG9mIHRoZVxuICogY2hhbmdlcywgYW5kIHJlbGVhc2luZyBhbnkgcGVuZGluZyBtdXRhdGlvbiBiYXRjaGVzIHRoYXQgd291bGQgYmVjb21lXG4gKiB2aXNpYmxlIGJlY2F1c2Ugb2YgdGhlIHNuYXBzaG90IHZlcnNpb24gdGhlIHJlbW90ZSBldmVudCBjb250YWlucy5cbiAqLyBhc3luYyBmdW5jdGlvbiBYdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHNvKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSBgcmVjZWl2ZWREb2N1bWVudGAgYXMgYXBwcm9wcmlhdGUgZm9yIGFueSBsaW1ibyB0YXJnZXRzLlxuICAgICAgICAgICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uaWEuZ2V0KGUpO1xuICAgICAgICAgICAgcyAmJiAoXG4gICAgICAgICAgICAvLyBTaW5jZSB0aGlzIGlzIGEgbGltYm8gcmVzb2x1dGlvbiBsb29rdXAsIGl0J3MgZm9yIGEgc2luZ2xlIGRvY3VtZW50XG4gICAgICAgICAgICAvLyBhbmQgaXQgY291bGQgYmUgYWRkZWQsIG1vZGlmaWVkLCBvciByZW1vdmVkLCBidXQgbm90IGEgY29tYmluYXRpb24uXG4gICAgICAgICAgICBVKHQuYWRkZWREb2N1bWVudHMuc2l6ZSArIHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIHQucmVtb3ZlZERvY3VtZW50cy5zaXplIDw9IDEpLCBcbiAgICAgICAgICAgIHQuYWRkZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBzLlh1ID0gITAgOiB0Lm1vZGlmaWVkRG9jdW1lbnRzLnNpemUgPiAwID8gVShzLlh1KSA6IHQucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMCAmJiAoVShzLlh1KSwgXG4gICAgICAgICAgICBzLlh1ID0gITEpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBsYShuLCB0LCBlKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGF3YWl0IFZyKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIGFuIE9ubGluZVN0YXRlIGNoYW5nZSB0byB0aGUgc3luYyBlbmdpbmUgYW5kIG5vdGlmaWVzIGFueSB2aWV3cyBvZlxuICogdGhlIGNoYW5nZS5cbiAqLyBmdW5jdGlvbiBadSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEcodCk7XG4gICAgLy8gSWYgd2UgYXJlIHRoZSBzZWNvbmRhcnkgY2xpZW50LCB3ZSBleHBsaWNpdGx5IGlnbm9yZSB0aGUgcmVtb3RlIHN0b3JlJ3NcbiAgICAvLyBvbmxpbmUgc3RhdGUgKHRoZSBsb2NhbCBjbGllbnQgbWF5IGdvIG9mZmxpbmUsIGV2ZW4gdGhvdWdoIHRoZSBwcmltYXJ5XG4gICAgLy8gdGFiIHJlbWFpbnMgb25saW5lKSBhbmQgb25seSBhcHBseSB0aGUgcHJpbWFyeSB0YWIncyBvbmxpbmUgc3RhdGUgZnJvbVxuICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBpZiAocy5pc1ByaW1hcnlDbGllbnQgJiYgMCAvKiBSZW1vdGVTdG9yZSAqLyA9PT0gbiB8fCAhcy5pc1ByaW1hcnlDbGllbnQgJiYgMSAvKiBTaGFyZWRDbGllbnRTdGF0ZSAqLyA9PT0gbikge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHMudGEuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBzLnZpZXcuRXUoZSk7XG4gICAgICAgICAgICBpLnNuYXBzaG90ICYmIHQucHVzaChpLnNuYXBzaG90KTtcbiAgICAgICAgfSkpLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gRyh0KTtcbiAgICAgICAgICAgIG4ub25saW5lU3RhdGUgPSBlO1xuICAgICAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgICAgIG4ucXVlcmllcy5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuLmxpc3RlbmVycykgXG4gICAgICAgICAgICAgICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgICAgICAgICAgICAgdC5FdShlKSAmJiAocyA9ICEwKTtcbiAgICAgICAgICAgIH0pKSwgcyAmJiBPdShuKTtcbiAgICAgICAgfShzLmV2ZW50TWFuYWdlciwgZSksIHQubGVuZ3RoICYmIHMuWnUuS28odCksIHMub25saW5lU3RhdGUgPSBlLCBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnNldE9ubGluZVN0YXRlKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWplY3RzIHRoZSBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXRJRC4gVGhpcyBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZVxuICogYmFja2VuZCBmb3IgYW55IGFjdGl2ZSB0YXJnZXQuXG4gKlxuICogQHBhcmFtIHN5bmNFbmdpbmUgLSBUaGUgc3luYyBlbmdpbmUgaW1wbGVtZW50YXRpb24uXG4gKiBAcGFyYW0gdGFyZ2V0SWQgLSBUaGUgdGFyZ2V0SUQgY29ycmVzcG9uZHMgdG8gb25lIHByZXZpb3VzbHkgaW5pdGlhdGVkIGJ5IHRoZVxuICogdXNlciBhcyBwYXJ0IG9mIFRhcmdldERhdGEgcGFzc2VkIHRvIGxpc3RlbigpIG9uIFJlbW90ZVN0b3JlLlxuICogQHBhcmFtIGVyciAtIEEgZGVzY3JpcHRpb24gb2YgdGhlIGNvbmRpdGlvbiB0aGF0IGhhcyBmb3JjZWQgdGhlIHJlamVjdGlvbi5cbiAqIE5lYXJseSBhbHdheXMgdGhpcyB3aWxsIGJlIGFuIGluZGljYXRpb24gdGhhdCB0aGUgdXNlciBpcyBubyBsb25nZXJcbiAqIGF1dGhvcml6ZWQgdG8gc2VlIHRoZSBkYXRhIG1hdGNoaW5nIHRoZSB0YXJnZXQuXG4gKi8gYXN5bmMgZnVuY3Rpb24gdGEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBHKHQpO1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlUXVlcnlTdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pO1xuICAgIGNvbnN0IGkgPSBzLmlhLmdldChlKSwgciA9IGkgJiYgaS5rZXk7XG4gICAgaWYgKHIpIHtcbiAgICAgICAgLy8gVE9ETyhrbGltdCk6IFdlIHJlYWxseSBvbmx5IHNob3VsZCBkbyB0aGUgZm9sbG93aW5nIG9uIHBlcm1pc3Npb25cbiAgICAgICAgLy8gZGVuaWVkIGVycm9ycywgYnV0IHdlIGRvbid0IGhhdmUgdGhlIGNhdXNlIGNvZGUgaGVyZS5cbiAgICAgICAgLy8gSXQncyBhIGxpbWJvIGRvYy4gQ3JlYXRlIGEgc3ludGhldGljIGV2ZW50IHNheWluZyBpdCB3YXMgZGVsZXRlZC5cbiAgICAgICAgLy8gVGhpcyBpcyBraW5kIG9mIGEgaGFjay4gSWRlYWxseSwgd2Ugd291bGQgaGF2ZSBhIG1ldGhvZCBpbiB0aGUgbG9jYWxcbiAgICAgICAgLy8gc3RvcmUgdG8gcHVyZ2UgYSBkb2N1bWVudC4gSG93ZXZlciwgaXQgd291bGQgYmUgdHJpY2t5IHRvIGtlZXAgYWxsIG9mXG4gICAgICAgIC8vIHRoZSBsb2NhbCBzdG9yZSdzIGludmFyaWFudHMgd2l0aCBhbm90aGVyIG1ldGhvZC5cbiAgICAgICAgbGV0IHQgPSBuZXcgTW4oeHQuY29tcGFyYXRvcik7XG4gICAgICAgIC8vIFRPRE8oYi8yMTcxODkyMTYpOiBUaGlzIGxpbWJvIGRvY3VtZW50IHNob3VsZCBpZGVhbGx5IGhhdmUgYSByZWFkIHRpbWUsXG4gICAgICAgIC8vIHNvIHRoYXQgaXQgaXMgcGlja2VkIHVwIGJ5IGFueSByZWFkLXRpbWUgYmFzZWQgc2NhbnMuIFRoZSBiYWNrZW5kLFxuICAgICAgICAvLyBob3dldmVyLCBkb2VzIG5vdCBzZW5kIGEgcmVhZCB0aW1lIGZvciB0YXJnZXQgcmVtb3ZhbHMuXG4gICAgICAgICAgICAgICAgdCA9IHQuaW5zZXJ0KHIsIHRlLm5ld05vRG9jdW1lbnQociwgY3QubWluKCkpKTtcbiAgICAgICAgY29uc3QgbiA9IHpuKCkuYWRkKHIpLCBpID0gbmV3IFluKGN0Lm1pbigpLCBcbiAgICAgICAgLyogdGFyZ2V0Q2hhbmdlcz0gKi8gbmV3IE1hcCwgXG4gICAgICAgIC8qIHRhcmdldE1pc21hdGNoZXM9ICovIG5ldyAkbihydCksIHQsIG4pO1xuICAgICAgICBhd2FpdCBYdShzLCBpKSwgXG4gICAgICAgIC8vIFNpbmNlIHRoaXMgcXVlcnkgZmFpbGVkLCB3ZSB3b24ndCB3YW50IHRvIG1hbnVhbGx5IHVubGlzdGVuIHRvIGl0LlxuICAgICAgICAvLyBXZSBvbmx5IHJlbW92ZSBpdCBmcm9tIGJvb2trZWVwaW5nIGFmdGVyIHdlIHN1Y2Nlc3NmdWxseSBhcHBsaWVkIHRoZVxuICAgICAgICAvLyBSZW1vdGVFdmVudC4gSWYgYGFwcGx5UmVtb3RlRXZlbnQoKWAgdGhyb3dzLCB3ZSB3YW50IHRvIHJlLWxpc3RlbiB0b1xuICAgICAgICAvLyB0aGlzIHF1ZXJ5IHdoZW4gdGhlIFJlbW90ZVN0b3JlIHJlc3RhcnRzIHRoZSBXYXRjaCBzdHJlYW0sIHdoaWNoIHNob3VsZFxuICAgICAgICAvLyByZS10cmlnZ2VyIHRoZSB0YXJnZXQgZmFpbHVyZS5cbiAgICAgICAgcy5zYSA9IHMuc2EucmVtb3ZlKHIpLCBzLmlhLmRlbGV0ZShlKSwgaGEocyk7XG4gICAgfSBlbHNlIGF3YWl0IHVvKHMubG9jYWxTdG9yZSwgZSwgXG4gICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITEpLnRoZW4oKCgpID0+IG9hKHMsIGUsIG4pKSkuY2F0Y2goVnIpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBlYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCksIHMgPSBlLmJhdGNoLmJhdGNoSWQ7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGVvKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIC8vIFRoZSBsb2NhbCBzdG9yZSBtYXkgb3IgbWF5IG5vdCBiZSBhYmxlIHRvIGFwcGx5IHRoZSB3cml0ZSByZXN1bHQgYW5kXG4gICAgICAgIC8vIHJhaXNlIGV2ZW50cyBpbW1lZGlhdGVseSAoZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHdhdGNoZXIgaXMgY2F1Z2h0XG4gICAgICAgIC8vIHVwKSwgc28gd2UgcmFpc2UgdXNlciBjYWxsYmFja3MgZmlyc3Qgc28gdGhhdCB0aGV5IGNvbnNpc3RlbnRseSBoYXBwZW5cbiAgICAgICAgLy8gYmVmb3JlIGxpc3RlbiBldmVudHMuXG4gICAgICAgICAgICAgICAgcmEobiwgcywgLyplcnJvcj0qLyBudWxsKSwgaWEobiwgcyksIG4uc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShzLCBcImFja25vd2xlZGdlZFwiKSwgXG4gICAgICAgIGF3YWl0IGxhKG4sIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgVnIodCk7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBuYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEcodCk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJSZWplY3QgYmF0Y2hcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uJHMubG9va3VwTXV0YXRpb25CYXRjaCh0LCBlKS5uZXh0KChlID0+IChVKG51bGwgIT09IGUpLCBzID0gZS5rZXlzKCksIG4uJHMucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSkpKS5uZXh0KCgoKSA9PiBuLiRzLnBlcmZvcm1Db25zaXN0ZW5jeUNoZWNrKHQpKSkubmV4dCgoKCkgPT4gbi5haS5xcyh0LCBzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICByYShzLCBlLCBuKSwgaWEocywgZSksIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pLCBcbiAgICAgICAgYXdhaXQgbGEocywgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCBWcihuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gc2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpO1xuICAgIHJ1KG4ucmVtb3RlU3RvcmUpIHx8IE8oXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBHKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUuJHMuZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSkpO1xuICAgICAgICB9KG4ubG9jYWxTdG9yZSk7XG4gICAgICAgIGlmICgtMSA9PT0gdCkgXG4gICAgICAgIC8vIFRyaWdnZXIgdGhlIGNhbGxiYWNrIHJpZ2h0IGF3YXkgaWYgdGhlcmUgaXMgbm8gcGVuZGluZyB3cml0ZXMgYXQgdGhlIG1vbWVudC5cbiAgICAgICAgcmV0dXJuIHZvaWQgZS5yZXNvbHZlKCk7XG4gICAgICAgIGNvbnN0IHMgPSBuLnVhLmdldCh0KSB8fCBbXTtcbiAgICAgICAgcy5wdXNoKGUpLCBuLnVhLnNldCh0LCBzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBQdSh0LCBcIkluaXRpYWxpemF0aW9uIG9mIHdhaXRGb3JQZW5kaW5nV3JpdGVzKCkgb3BlcmF0aW9uIGZhaWxlZFwiKTtcbiAgICAgICAgZS5yZWplY3Qobik7XG4gICAgfVxufVxuXG4vKipcbiAqIFRyaWdnZXJzIHRoZSBjYWxsYmFja3MgdGhhdCBhcmUgd2FpdGluZyBmb3IgdGhpcyBiYXRjaCBpZCB0byBnZXQgYWNrbm93bGVkZ2VkIGJ5IHNlcnZlcixcbiAqIGlmIHRoZXJlIGFyZSBhbnkuXG4gKi8gZnVuY3Rpb24gaWEodCwgZSkge1xuICAgICh0LnVhLmdldChlKSB8fCBbXSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQucmVzb2x2ZSgpO1xuICAgIH0pKSwgdC51YS5kZWxldGUoZSk7XG59XG5cbi8qKiBSZWplY3QgYWxsIG91dHN0YW5kaW5nIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBwZW5kaW5nIHdyaXRlcyB0byBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gcmEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBHKHQpO1xuICAgIGxldCBpID0gcy5vYVtzLmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgIC8vIE5PVEU6IE11dGF0aW9ucyByZXN0b3JlZCBmcm9tIHBlcnNpc3RlbmNlIHdvbid0IGhhdmUgY2FsbGJhY2tzLCBzbyBpdCdzXG4gICAgLy8gb2theSBmb3IgdGhlcmUgdG8gYmUgbm8gY2FsbGJhY2sgZm9yIHRoaXMgSUQuXG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBpLmdldChlKTtcbiAgICAgICAgdCAmJiAobiA/IHQucmVqZWN0KG4pIDogdC5yZXNvbHZlKCksIGkgPSBpLnJlbW92ZShlKSksIHMub2Fbcy5jdXJyZW50VXNlci50b0tleSgpXSA9IGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBvYSh0LCBlLCBuID0gbnVsbCkge1xuICAgIHQuc2hhcmVkQ2xpZW50U3RhdGUucmVtb3ZlTG9jYWxRdWVyeVRhcmdldChlKTtcbiAgICBmb3IgKGNvbnN0IHMgb2YgdC5lYS5nZXQoZSkpIHQudGEuZGVsZXRlKHMpLCBuICYmIHQuWnUubGEocywgbik7XG4gICAgaWYgKHQuZWEuZGVsZXRlKGUpLCB0LmlzUHJpbWFyeUNsaWVudCkge1xuICAgICAgICB0LnJhLlJpKGUpLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgdC5yYS5jb250YWluc0tleShlKSB8fCBcbiAgICAgICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICAgICAgdWEodCwgZSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHVhKHQsIGUpIHtcbiAgICB0Lm5hLmRlbGV0ZShlLnBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgIC8vIEl0J3MgcG9zc2libGUgdGhhdCB0aGUgdGFyZ2V0IGFscmVhZHkgZ290IHJlbW92ZWQgYmVjYXVzZSB0aGUgcXVlcnkgZmFpbGVkLiBJbiB0aGF0IGNhc2UsXG4gICAgLy8gdGhlIGtleSB3b24ndCBleGlzdCBpbiBgbGltYm9UYXJnZXRzQnlLZXlgLiBPbmx5IGRvIHRoZSBjbGVhbnVwIGlmIHdlIHN0aWxsIGhhdmUgdGhlIHRhcmdldC5cbiAgICBjb25zdCBuID0gdC5zYS5nZXQoZSk7XG4gICAgbnVsbCAhPT0gbiAmJiAodHUodC5yZW1vdGVTdG9yZSwgbiksIHQuc2EgPSB0LnNhLnJlbW92ZShlKSwgdC5pYS5kZWxldGUobiksIGhhKHQpKTtcbn1cblxuZnVuY3Rpb24gYWEodCwgZSwgbikge1xuICAgIGZvciAoY29uc3QgcyBvZiBuKSBpZiAocyBpbnN0YW5jZW9mIHF1KSB0LnJhLmFkZFJlZmVyZW5jZShzLmtleSwgZSksIGNhKHQsIHMpOyBlbHNlIGlmIChzIGluc3RhbmNlb2YgR3UpIHtcbiAgICAgICAgTyhcIlN5bmNFbmdpbmVcIiwgXCJEb2N1bWVudCBubyBsb25nZXIgaW4gbGltYm86IFwiICsgcy5rZXkpLCB0LnJhLnJlbW92ZVJlZmVyZW5jZShzLmtleSwgZSk7XG4gICAgICAgIHQucmEuY29udGFpbnNLZXkocy5rZXkpIHx8IFxuICAgICAgICAvLyBXZSByZW1vdmVkIHRoZSBsYXN0IHJlZmVyZW5jZSBmb3IgdGhpcyBrZXlcbiAgICAgICAgdWEodCwgcy5rZXkpO1xuICAgIH0gZWxzZSBMKCk7XG59XG5cbmZ1bmN0aW9uIGNhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSBuLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgdC5zYS5nZXQobikgfHwgdC5uYS5oYXMocykgfHwgKE8oXCJTeW5jRW5naW5lXCIsIFwiTmV3IGRvY3VtZW50IGluIGxpbWJvOiBcIiArIG4pLCB0Lm5hLmFkZChzKSwgXG4gICAgaGEodCkpO1xufVxuXG4vKipcbiAqIFN0YXJ0cyBsaXN0ZW5zIGZvciBkb2N1bWVudHMgaW4gbGltYm8gdGhhdCBhcmUgZW5xdWV1ZWQgZm9yIHJlc29sdXRpb24sXG4gKiBzdWJqZWN0IHRvIGEgbWF4aW11bSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucy5cbiAqXG4gKiBXaXRob3V0IGJvdW5kaW5nIHRoZSBudW1iZXIgb2YgY29uY3VycmVudCByZXNvbHV0aW9ucywgdGhlIHNlcnZlciBjYW4gZmFpbFxuICogd2l0aCBcInJlc291cmNlIGV4aGF1c3RlZFwiIGVycm9ycyB3aGljaCBjYW4gbGVhZCB0byBwYXRob2xvZ2ljYWwgY2xpZW50XG4gKiBiZWhhdmlvciBhcyBzZWVuIGluIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzI2ODMuXG4gKi8gZnVuY3Rpb24gaGEodCkge1xuICAgIGZvciAoO3QubmEuc2l6ZSA+IDAgJiYgdC5zYS5zaXplIDwgdC5tYXhDb25jdXJyZW50TGltYm9SZXNvbHV0aW9uczsgKSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lm5hLnZhbHVlcygpLm5leHQoKS52YWx1ZTtcbiAgICAgICAgdC5uYS5kZWxldGUoZSk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgeHQoX3QuZnJvbVN0cmluZyhlKSksIHMgPSB0LmFhLm5leHQoKTtcbiAgICAgICAgdC5pYS5zZXQocywgbmV3IGp1KG4pKSwgdC5zYSA9IHQuc2EuaW5zZXJ0KG4sIHMpLCBabyh0LnJlbW90ZVN0b3JlLCBuZXcgRGkoTGUoTmUobi5wYXRoKSksIHMsIDIgLyogTGltYm9SZXNvbHV0aW9uICovICwgbnQuQSkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gbGEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBHKHQpLCBpID0gW10sIHIgPSBbXSwgbyA9IFtdO1xuICAgIHMudGEuaXNFbXB0eSgpIHx8IChzLnRhLmZvckVhY2goKCh0LCB1KSA9PiB7XG4gICAgICAgIG8ucHVzaChzLmhhKHUsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgICAgICBzLmlzUHJpbWFyeUNsaWVudCAmJiBzLnNoYXJlZENsaWVudFN0YXRlLnVwZGF0ZVF1ZXJ5U3RhdGUodS50YXJnZXRJZCwgdC5mcm9tQ2FjaGUgPyBcIm5vdC1jdXJyZW50XCIgOiBcImN1cnJlbnRcIiksIFxuICAgICAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gSnIuSnModS50YXJnZXRJZCwgdCk7XG4gICAgICAgICAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHMuWnUuS28oaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEcodCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB3aS5mb3JFYWNoKGUsIChlID0+IHdpLmZvckVhY2goZS56cywgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKS5uZXh0KCgoKSA9PiB3aS5mb3JFYWNoKGUuSHMsIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkpKSkpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghSWkodCkpIHRocm93IHQ7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICBPKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uc2kuZ2V0KGUpLCBzID0gdC5zbmFwc2hvdFZlcnNpb24sIGkgPSB0LndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHMpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uc2kgPSBuLnNpLmluc2VydChlLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0ocy5sb2NhbFN0b3JlLCByKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbChlKSkge1xuICAgICAgICBPKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgZS50b0tleSgpKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRvKG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSBlLCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHQudWEuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5yZWplY3QobmV3IFEoSy5DQU5DRUxMRUQsIGUpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIHQudWEuY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UoZSwgdC5yZW1vdmVkQmF0Y2hJZHMsIHQuYWRkZWRCYXRjaElkcyksIGF3YWl0IGxhKG4sIHQuY2kpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZGEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBHKHQpLCBzID0gbi5pYS5nZXQoZSk7XG4gICAgaWYgKHMgJiYgcy5YdSkgcmV0dXJuIHpuKCkuYWRkKHMua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCB0ID0gem4oKTtcbiAgICAgICAgY29uc3QgcyA9IG4uZWEuZ2V0KGUpO1xuICAgICAgICBpZiAoIXMpIHJldHVybiB0O1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4udGEuZ2V0KGUpO1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKHMudmlldy5xdSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxuICogZnJvbSBwZXJzaXN0ZW5jZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBfYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCksIHMgPSBhd2FpdCBhbyhuLmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gZS52aWV3Lkp1KHMpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBhYShuLCBlLnRhcmdldElkLCBpLnp1KSwgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIHdhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gRyh0KTtcbiAgICByZXR1cm4gaG8obi5sb2NhbFN0b3JlLCBlKS50aGVuKCh0ID0+IGxhKG4sIHQpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIG1hKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gRyh0KSwgciA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEcodCksIHMgPSBHKG4uJHMpO1xuICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkxvb2t1cCBtdXRhdGlvbiBkb2N1bWVudHNcIiwgXCJyZWFkb25seVwiLCAodCA9PiBzLmxuKHQsIGUpLm5leHQoKGUgPT4gZSA/IG4uYWkucXModCwgZSkgOiB3aS5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKTtcbiAgICBudWxsICE9PSByID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgZnUoaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgcmEoaSwgZSwgcyB8fCBudWxsKSwgaWEoaSwgZSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgRyhHKHQpLiRzKS5kbihlKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKSkgOiBMKCksIGF3YWl0IGxhKGksIHIpKSA6IFxuICAgIC8vIEEgdGhyb3R0bGVkIHRhYiBtYXkgbm90IGhhdmUgc2VlbiB0aGUgbXV0YXRpb24gYmVmb3JlIGl0IHdhcyBjb21wbGV0ZWRcbiAgICAvLyBhbmQgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZSwgaW4gd2hpY2ggY2FzZSB3ZSB3b24ndCBoYXZlIGNhY2hlZFxuICAgIC8vIHRoZSBhZmZlY3RlZCBkb2N1bWVudHMuIEluIHRoaXMgY2FzZSB3ZSBjYW4gc2FmZWx5IGlnbm9yZSB0aGUgdXBkYXRlXG4gICAgLy8gc2luY2UgdGhhdCBtZWFucyB3ZSBkaWRuJ3QgYXBwbHkgdGhlIG11dGF0aW9uIGxvY2FsbHkgYXQgYWxsIChpZiB3ZVxuICAgIC8vIGhhZCwgd2Ugd291bGQgaGF2ZSBjYWNoZWQgdGhlIGFmZmVjdGVkIGRvY3VtZW50cyksIGFuZCBzbyB3ZSB3aWxsIGp1c3RcbiAgICAvLyBzZWUgYW55IHJlc3VsdGluZyBkb2N1bWVudCBjaGFuZ2VzIHZpYSBub3JtYWwgcmVtb3RlIGRvY3VtZW50IHVwZGF0ZXNcbiAgICAvLyBhcyBhcHBsaWNhYmxlLlxuICAgIE8oXCJTeW5jRW5naW5lXCIsIFwiQ2Fubm90IGFwcGx5IG11dGF0aW9uIGJhdGNoIHdpdGggaWQ6IFwiICsgZSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgcXVlcnkgdGFyZ2V0IGNoYW5nZSBmcm9tIGEgZGlmZmVyZW50IHRhYi4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5hc3luYyBmdW5jdGlvbiBnYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEcodCk7XG4gICAgaWYgKEFhKG4pLCBSYShuKSwgITAgPT09IGUgJiYgITAgIT09IG4uY2EpIHtcbiAgICAgICAgLy8gU2Vjb25kYXJ5IHRhYnMgb25seSBtYWludGFpbiBWaWV3cyBmb3IgdGhlaXIgbG9jYWwgbGlzdGVuZXJzIGFuZCB0aGVcbiAgICAgICAgLy8gVmlld3MgaW50ZXJuYWwgc3RhdGUgbWF5IG5vdCBiZSAxMDAlIHBvcHVsYXRlZCAoaW4gcGFydGljdWxhclxuICAgICAgICAvLyBzZWNvbmRhcnkgdGFicyBkb24ndCB0cmFjayBzeW5jZWREb2N1bWVudHMsIHRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoZVxuICAgICAgICAvLyBzZXJ2ZXIgY29uc2lkZXJzIHRvIGJlIGluIHRoZSB0YXJnZXQpLiBTbyB3aGVuIGEgc2Vjb25kYXJ5IGJlY29tZXNcbiAgICAgICAgLy8gcHJpbWFyeSwgd2UgbmVlZCB0byBuZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGFsbCB2aWV3cyBmb3IgYWxsIHRhcmdldHNcbiAgICAgICAgLy8gbWF0Y2ggdGhlIHN0YXRlIG9uIGRpc2suXG4gICAgICAgIGNvbnN0IHQgPSBuLnNoYXJlZENsaWVudFN0YXRlLmdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cygpLCBlID0gYXdhaXQgeWEobiwgdC50b0FycmF5KCkpO1xuICAgICAgICBuLmNhID0gITAsIGF3YWl0IEV1KG4ucmVtb3RlU3RvcmUsICEwKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIFpvKG4ucmVtb3RlU3RvcmUsIHQpO1xuICAgIH0gZWxzZSBpZiAoITEgPT09IGUgJiYgITEgIT09IG4uY2EpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICBsZXQgZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICBuLmVhLmZvckVhY2goKChzLCBpKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmlzTG9jYWxRdWVyeVRhcmdldChpKSA/IHQucHVzaChpKSA6IGUgPSBlLnRoZW4oKCgpID0+IChvYShuLCBpKSwgXG4gICAgICAgICAgICB1byhuLmxvY2FsU3RvcmUsIGksIFxuICAgICAgICAgICAgLyprZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YT0qLyAhMCkpKSksIHR1KG4ucmVtb3RlU3RvcmUsIGkpO1xuICAgICAgICB9KSksIGF3YWl0IGUsIGF3YWl0IHlhKG4sIHQpLCBcbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IEcodCk7XG4gICAgICAgICAgICBlLmlhLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdHUoZS5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgICAgICB9KSksIGUucmEuYmkoKSwgZS5pYSA9IG5ldyBNYXAsIGUuc2EgPSBuZXcgTW4oeHQuY29tcGFyYXRvcik7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBSZWNvbmNpbGUgdGhlIHF1ZXJ5IHZpZXdzIG9mIHRoZSBwcm92aWRlZCBxdWVyeSB0YXJnZXRzIHdpdGggdGhlIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLiBSYWlzZXMgc25hcHNob3RzIGZvciBhbnkgY2hhbmdlcyB0aGF0IGFmZmVjdCB0aGUgbG9jYWxcbiAqIGNsaWVudCBhbmQgcmV0dXJucyB0aGUgdXBkYXRlZCBzdGF0ZSBvZiBhbGwgdGFyZ2V0J3MgcXVlcnkgZGF0YS5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvblxuICogQHBhcmFtIHRhcmdldHMgLSB0aGUgbGlzdCBvZiB0YXJnZXRzIHdpdGggdmlld3MgdGhhdCBuZWVkIHRvIGJlIHJlY29tcHV0ZWRcbiAqIEBwYXJhbSB0cmFuc2l0aW9uVG9QcmltYXJ5IC0gYHRydWVgIGlmZiB0aGUgdGFiIHRyYW5zaXRpb25zIGZyb20gYSBzZWNvbmRhcnlcbiAqIHRhYiB0byBhIHByaW1hcnkgdGFiXG4gKi9cbiAgICAgICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAgICAgKG4pLCBuLmNhID0gITEsIGF3YWl0IEV1KG4ucmVtb3RlU3RvcmUsICExKTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHlhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gRyh0KSwgaSA9IFtdLCByID0gW107XG4gICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGNvbnN0IG4gPSBzLmVhLmdldCh0KTtcbiAgICAgICAgaWYgKG4gJiYgMCAhPT0gbi5sZW5ndGgpIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgaGF2ZSBhIGxvY2FsIFZpZXcsIHdlIGZldGNoIHRoZWlyIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgICAgIC8vIGZyb20gTG9jYWxTdG9yZSAoYXMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgdGhlIHNuYXBzaG90IHZlcnNpb25cbiAgICAgICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCkgYW5kIHJlY29uY2lsZSB0aGVpciB2aWV3cyB3aXRoIHRoZSBwZXJzaXN0ZWRcbiAgICAgICAgICAgIC8vIHN0YXRlICh0aGUgbGlzdCBvZiBzeW5jZWREb2N1bWVudHMgbWF5IGhhdmUgZ290dGVuIG91dCBvZiBzeW5jKS5cbiAgICAgICAgICAgIGUgPSBhd2FpdCBvbyhzLmxvY2FsU3RvcmUsIExlKG5bMF0pKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHMudGEuZ2V0KHQpLCBuID0gYXdhaXQgX2EocywgZSk7XG4gICAgICAgICAgICAgICAgbi5zbmFwc2hvdCAmJiByLnB1c2gobi5zbmFwc2hvdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGb3IgcXVlcmllcyB0aGF0IG5ldmVyIGV4ZWN1dGVkIG9uIHRoaXMgY2xpZW50LCB3ZSBuZWVkIHRvXG4gICAgICAgICAgICAvLyBhbGxvY2F0ZSB0aGUgdGFyZ2V0IGluIExvY2FsU3RvcmUgYW5kIGluaXRpYWxpemUgYSBuZXcgVmlldy5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBhd2FpdCBjbyhzLmxvY2FsU3RvcmUsIHQpO1xuICAgICAgICAgICAgZSA9IGF3YWl0IG9vKHMubG9jYWxTdG9yZSwgbiksIGF3YWl0IEh1KHMsIHBhKG4pLCB0LCBcbiAgICAgICAgICAgIC8qY3VycmVudD0qLyAhMSk7XG4gICAgICAgIH1cbiAgICAgICAgaS5wdXNoKGUpO1xuICAgIH1cbiAgICByZXR1cm4gcy5adS5LbyhyKSwgaTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFF1ZXJ5YCBvYmplY3QgZnJvbSB0aGUgc3BlY2lmaWVkIGBUYXJnZXRgLiBUaGVyZSBpcyBubyB3YXkgdG9cbiAqIG9idGFpbiB0aGUgb3JpZ2luYWwgYFF1ZXJ5YCwgc28gd2Ugc3ludGhlc2l6ZSBhIGBRdWVyeWAgZnJvbSB0aGUgYFRhcmdldGBcbiAqIG9iamVjdC5cbiAqXG4gKiBUaGUgc3ludGhlc2l6ZWQgcmVzdWx0IG1pZ2h0IGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBidXRcbiAqIHNpbmNlIHRoZSBzeW50aGVzaXplZCBgUXVlcnlgIHNob3VsZCByZXR1cm4gdGhlIHNhbWUgcmVzdWx0cyBhcyB0aGVcbiAqIG9yaWdpbmFsIG9uZSAob25seSB0aGUgcHJlc2VudGF0aW9uIG9mIHJlc3VsdHMgbWlnaHQgZGlmZmVyKSwgdGhlIHBvdGVudGlhbFxuICogZGlmZmVyZW5jZSB3aWxsIG5vdCBjYXVzZSBpc3N1ZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBwYSh0KSB7XG4gICAgcmV0dXJuIHhlKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQub3JkZXJCeSwgdC5maWx0ZXJzLCB0LmxpbWl0LCBcIkZcIiAvKiBGaXJzdCAqLyAsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBJYSh0KSB7XG4gICAgY29uc3QgZSA9IEcodCk7XG4gICAgcmV0dXJuIEcoRyhlLmxvY2FsU3RvcmUpLnBlcnNpc3RlbmNlKS5PcygpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gVGEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBHKHQpO1xuICAgIGlmIChpLmNhKSBcbiAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXG4gICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICByZXR1cm4gdm9pZCBPKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTtcbiAgICBjb25zdCByID0gaS5lYS5nZXQoZSk7XG4gICAgaWYgKHIgJiYgci5sZW5ndGggPiAwKSBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgXCJjdXJyZW50XCI6XG4gICAgICBjYXNlIFwibm90LWN1cnJlbnRcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IGhvKGkubG9jYWxTdG9yZSwgamUoclswXSkpLCBzID0gWW4uY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UoZSwgXCJjdXJyZW50XCIgPT09IG4pO1xuICAgICAgICAgICAgYXdhaXQgbGEoaSwgdCwgcyk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICBjYXNlIFwicmVqZWN0ZWRcIjpcbiAgICAgICAgYXdhaXQgdW8oaS5sb2NhbFN0b3JlLCBlLCBcbiAgICAgICAgLyoga2VlcFBlcnNpc3RlZFRhcmdldERhdGEgKi8gITApLCBvYShpLCBlLCBzKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIEwoKTtcbiAgICB9XG59XG5cbi8qKiBBZGRzIG9yIHJlbW92ZXMgV2F0Y2ggdGFyZ2V0cyBmb3IgcXVlcmllcyBmcm9tIGRpZmZlcmVudCB0YWJzLiAqLyBhc3luYyBmdW5jdGlvbiBFYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEFhKHQpO1xuICAgIGlmIChzLmNhKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlKSB7XG4gICAgICAgICAgICBpZiAocy5lYS5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAvLyBBIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gYWRkZWQgaW4gYSBwcmV2aW91cyBhdHRlbXB0XG4gICAgICAgICAgICAgICAgTyhcIlN5bmNFbmdpbmVcIiwgXCJBZGRpbmcgYW4gYWxyZWFkeSBhY3RpdmUgdGFyZ2V0IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBlID0gYXdhaXQgY28ocy5sb2NhbFN0b3JlLCB0KSwgbiA9IGF3YWl0IG9vKHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgICAgICBhd2FpdCBIdShzLCBwYShlKSwgbi50YXJnZXRJZCwgXG4gICAgICAgICAgICAvKmN1cnJlbnQ9Ki8gITEpLCBabyhzLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUgc2luY2UgdGhlIHRhcmdldCBtaWdodCBoYXZlIGJlZW5cbiAgICAgICAgLy8gcmVtb3ZlZCBpZiBpdCBoYXMgYmVlbiByZWplY3RlZCBieSB0aGUgYmFja2VuZC5cbiAgICAgICAgcy5lYS5oYXModCkgJiYgXG4gICAgICAgIC8vIFJlbGVhc2UgcXVlcmllcyB0aGF0IGFyZSBzdGlsbCBhY3RpdmUuXG4gICAgICAgIGF3YWl0IHVvKHMubG9jYWxTdG9yZSwgdCwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICB0dShzLnJlbW90ZVN0b3JlLCB0KSwgb2EocywgdCk7XG4gICAgICAgIH0pKS5jYXRjaChWcik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBYSh0KSB7XG4gICAgY29uc3QgZSA9IEcodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5UmVtb3RlRXZlbnQgPSBYdS5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5nZXRSZW1vdGVLZXlzRm9yVGFyZ2V0ID0gZGEuYmluZChudWxsLCBlKSwgXG4gICAgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuID0gdGEuYmluZChudWxsLCBlKSwgZS5adS5LbyA9IGt1LmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBcbiAgICBlLlp1LmxhID0gTXUuYmluZChudWxsLCBlLmV2ZW50TWFuYWdlciksIGU7XG59XG5cbmZ1bmN0aW9uIFJhKHQpIHtcbiAgICBjb25zdCBlID0gRyh0KTtcbiAgICByZXR1cm4gZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuYXBwbHlTdWNjZXNzZnVsV3JpdGUgPSBlYS5iaW5kKG51bGwsIGUpLCBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZSA9IG5hLmJpbmQobnVsbCwgZSksIFxuICAgIGU7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIFNESy4gVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgd2hlblxuICogdGhlIGJ1bmRsZSBmaW5pc2hlZCBsb2FkaW5nLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gU3luY0VuZ2luZSB0byB1c2UuXG4gKiBAcGFyYW0gYnVuZGxlUmVhZGVyIC0gQnVuZGxlIHRvIGxvYWQgaW50byB0aGUgU0RLLlxuICogQHBhcmFtIHRhc2sgLSBMb2FkQnVuZGxlVGFzayB1c2VkIHRvIHVwZGF0ZSB0aGUgbG9hZGluZyBwcm9ncmVzcyB0byBwdWJsaWMgQVBJLlxuICovIGZ1bmN0aW9uIGJhKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gRyh0KTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIChcbiAgICAvKiogTG9hZHMgYSBidW5kbGUgYW5kIHJldHVybnMgdGhlIGxpc3Qgb2YgYWZmZWN0ZWQgY29sbGVjdGlvbiBncm91cHMuICovXG4gICAgYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGUuZ2V0TWV0YWRhdGEoKTtcbiAgICAgICAgICAgIGlmIChhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEcodCksIHMgPSBmcyhlLmNyZWF0ZVRpbWUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiaGFzTmV3ZXJCdW5kbGVcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLmRzLmdldEJ1bmRsZU1ldGFkYXRhKHQsIGUuaWQpKSkudGhlbigodCA9PiAhIXQgJiYgdC5jcmVhdGVUaW1lLmNvbXBhcmVUbyhzKSA+PSAwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIFNhdmVzIHRoZSBnaXZlbiBgQnVuZGxlTWV0YWRhdGFgIHRvIGxvY2FsIHBlcnNpc3RlbmNlLlxuICovICh0LmxvY2FsU3RvcmUsIHMpKSByZXR1cm4gYXdhaXQgZS5jbG9zZSgpLCBuLl9jb21wbGV0ZVdpdGgoZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJTdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IHQudG90YWxCeXRlcyxcbiAgICAgICAgICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXM6IHQudG90YWxCeXRlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHMpKSwgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICAgICAgbi5fdXBkYXRlUHJvZ3Jlc3MoVXUocykpO1xuICAgICAgICAgICAgY29uc3QgaSA9IG5ldyBMdShzLCB0LmxvY2FsU3RvcmUsIGUuTSk7XG4gICAgICAgICAgICBsZXQgciA9IGF3YWl0IGUuZmEoKTtcbiAgICAgICAgICAgIGZvciAoO3I7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCBpLk51KHIpO1xuICAgICAgICAgICAgICAgIHQgJiYgbi5fdXBkYXRlUHJvZ3Jlc3ModCksIHIgPSBhd2FpdCBlLmZhKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvID0gYXdhaXQgaS5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIGF3YWl0IGxhKHQsIG8uT3UsIFxuICAgICAgICAgICAgLyogcmVtb3RlRXZlbnQgKi8gdm9pZCAwKSwgXG4gICAgICAgICAgICAvLyBTYXZlIG1ldGFkYXRhLCBzbyBsb2FkaW5nIHRoZSBzYW1lIGJ1bmRsZSB3aWxsIHNraXAuXG4gICAgICAgICAgICBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEcodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIGJ1bmRsZVwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBuLmRzLnNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBhIGBOYW1lZFF1ZXJ5YCBhc3NvY2lhdGVkIHdpdGggZ2l2ZW4gcXVlcnkgbmFtZS4gUHJvbWlzZVxuICogcmVzb2x2ZXMgdG8gdW5kZWZpbmVkIGlmIG5vIHBlcnNpc3RlZCBkYXRhIGNhbiBiZSBmb3VuZC5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSwgbi5fY29tcGxldGVXaXRoKG8ucHJvZ3Jlc3MpLCBQcm9taXNlLnJlc29sdmUoby5NdSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiAkKFwiU3luY0VuZ2luZVwiLCBgTG9hZGluZyBidW5kbGUgZmFpbGVkIHdpdGggJHt0fWApLCBuLl9mYWlsV2l0aCh0KSwgUHJvbWlzZS5yZXNvbHZlKG5ldyBTZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIGluLW1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAqIFVzZXMgRWFnZXJHQyBnYXJiYWdlIGNvbGxlY3Rpb24uXG4gKi8pKHMsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICBzLnNoYXJlZENsaWVudFN0YXRlLm5vdGlmeUJ1bmRsZUxvYWRlZCh0KTtcbiAgICB9KSk7XG59XG5cbmNsYXNzIFBhIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMTtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuTSA9IEdvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdGhpcy5kYSh0KSwgdGhpcy5wZXJzaXN0ZW5jZSA9IHRoaXMuX2EodCksIFxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLnN0YXJ0KCksIHRoaXMuZ2NTY2hlZHVsZXIgPSB0aGlzLndhKHQpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLm1hKHQpO1xuICAgIH1cbiAgICB3YSh0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBtYSh0KSB7XG4gICAgICAgIHJldHVybiBacih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgWXIsIHQuaW5pdGlhbFVzZXIsIHRoaXMuTSk7XG4gICAgfVxuICAgIF9hKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBbyhiby5XaSwgdGhpcy5NKTtcbiAgICB9XG4gICAgZGEodCkge1xuICAgICAgICByZXR1cm4gbmV3IE1vO1xuICAgIH1cbiAgICBhc3luYyB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuZ2NTY2hlZHVsZXIgJiYgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCksIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc2h1dGRvd24oKSwgXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2Uuc2h1dGRvd24oKTtcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBJbmRleGVkREIgcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgVmEgZXh0ZW5kcyBQYSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmdhID0gdCwgdGhpcy5jYWNoZVNpemVCeXRlcyA9IGUsIHRoaXMuZm9yY2VPd25lcnNoaXAgPSBuLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICExO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KSwgYXdhaXQgdGhpcy5nYS5pbml0aWFsaXplKHRoaXMsIHQpLCBcbiAgICAgICAgLy8gRW5xdWV1ZSB3cml0ZXMgZnJvbSBhIHByZXZpb3VzIHNlc3Npb25cbiAgICAgICAgYXdhaXQgUmEodGhpcy5nYS5zeW5jRW5naW5lKSwgYXdhaXQgZnUodGhpcy5nYS5yZW1vdGVTdG9yZSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLklzKCgoKSA9PiAodGhpcy5nY1NjaGVkdWxlciAmJiAhdGhpcy5nY1NjaGVkdWxlci5zdGFydGVkICYmIHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBtYSh0KSB7XG4gICAgICAgIHJldHVybiBacih0aGlzLnBlcnNpc3RlbmNlLCBuZXcgWXIsIHQuaW5pdGlhbFVzZXIsIHRoaXMuTSk7XG4gICAgfVxuICAgIHdhKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUuZ2FyYmFnZUNvbGxlY3RvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBEcihlLCB0LmFzeW5jUXVldWUpO1xuICAgIH1cbiAgICBfYSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB6cih0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkLCB0LmRhdGFiYXNlSW5mby5wZXJzaXN0ZW5jZUtleSksIG4gPSB2b2lkIDAgIT09IHRoaXMuY2FjaGVTaXplQnl0ZXMgPyBfci53aXRoQ2FjaGVTaXplKHRoaXMuY2FjaGVTaXplQnl0ZXMpIDogX3IuREVGQVVMVDtcbiAgICAgICAgcmV0dXJuIG5ldyBRcih0aGlzLnN5bmNocm9uaXplVGFicywgZSwgdC5jbGllbnRJZCwgbiwgdC5hc3luY1F1ZXVlLCBVbygpLCBxbygpLCB0aGlzLk0sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsICEhdGhpcy5mb3JjZU93bmVyc2hpcCk7XG4gICAgfVxuICAgIGRhKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNbztcbiAgICB9XG59XG5cbi8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBtdWx0aS10YWIgSW5kZXhlZERCXG4gKiBwZXJzaXN0ZW5jZS5cbiAqXG4gKiBJbiB0aGUgbGVnYWN5IGNsaWVudCwgdGhpcyBwcm92aWRlciBpcyB1c2VkIHRvIHByb3ZpZGUgYm90aCBtdWx0aS10YWIgYW5kXG4gKiBub24tbXVsdGktdGFiIHBlcnNpc3RlbmNlIHNpbmNlIHdlIGNhbm5vdCB0ZWxsIGF0IGJ1aWxkIHRpbWUgd2hldGhlclxuICogYHN5bmNocm9uaXplVGFic2Agd2lsbCBiZSBlbmFibGVkLlxuICovIGNsYXNzIHZhIGV4dGVuZHMgVmEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgLyogZm9yY2VPd25lcnNoaXA9ICovICExKSwgdGhpcy5nYSA9IHQsIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSBlLCB0aGlzLnN5bmNocm9uaXplVGFicyA9ICEwO1xuICAgIH1cbiAgICBhc3luYyBpbml0aWFsaXplKHQpIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuaW5pdGlhbGl6ZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZ2Euc3luY0VuZ2luZTtcbiAgICAgICAgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSBpbnN0YW5jZW9mIGtvICYmICh0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN5bmNFbmdpbmUgPSB7XG4gICAgICAgICAgICBrcjogbWEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIE1yOiBUYS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgT3I6IEVhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBPczogSWEuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIE5yOiB3YS5iaW5kKG51bGwsIGUpXG4gICAgICAgIH0sIGF3YWl0IHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUuc3RhcnQoKSksIFxuICAgICAgICAvLyBOT1RFOiBUaGlzIHdpbGwgaW1tZWRpYXRlbHkgY2FsbCB0aGUgbGlzdGVuZXIsIHNvIHdlIG1ha2Ugc3VyZSB0b1xuICAgICAgICAvLyBzZXQgaXQgYWZ0ZXIgbG9jYWxTdG9yZSAvIHJlbW90ZVN0b3JlIGFyZSBzdGFydGVkLlxuICAgICAgICBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLklzKChhc3luYyB0ID0+IHtcbiAgICAgICAgICAgIGF3YWl0IGdhKHRoaXMuZ2Euc3luY0VuZ2luZSwgdCksIHRoaXMuZ2NTY2hlZHVsZXIgJiYgKHQgJiYgIXRoaXMuZ2NTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuZ2NTY2hlZHVsZXIuc3RhcnQodGhpcy5sb2NhbFN0b3JlKSA6IHQgfHwgdGhpcy5nY1NjaGVkdWxlci5zdG9wKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRhKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFVvKCk7XG4gICAgICAgIGlmICgha28udnQoZSkpIHRocm93IG5ldyBRKEsuVU5JTVBMRU1FTlRFRCwgXCJJbmRleGVkREIgcGVyc2lzdGVuY2UgaXMgb25seSBhdmFpbGFibGUgb24gcGxhdGZvcm1zIHRoYXQgc3VwcG9ydCBMb2NhbFN0b3JhZ2UuXCIpO1xuICAgICAgICBjb25zdCBuID0genIodC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpO1xuICAgICAgICByZXR1cm4gbmV3IGtvKGUsIHQuYXN5bmNRdWV1ZSwgbiwgdC5jbGllbnRJZCwgdC5pbml0aWFsVXNlcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemVzIGFuZCB3aXJlcyB0aGUgY29tcG9uZW50cyB0aGF0IGFyZSBuZWVkZWQgdG8gaW50ZXJmYWNlIHdpdGggdGhlXG4gKiBuZXR3b3JrLlxuICovIGNsYXNzIFNhIHtcbiAgICBhc3luYyBpbml0aWFsaXplKHQsIGUpIHtcbiAgICAgICAgdGhpcy5sb2NhbFN0b3JlIHx8ICh0aGlzLmxvY2FsU3RvcmUgPSB0LmxvY2FsU3RvcmUsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSB0LnNoYXJlZENsaWVudFN0YXRlLCBcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0aGlzLmNyZWF0ZURhdGFzdG9yZShlKSwgdGhpcy5yZW1vdGVTdG9yZSA9IHRoaXMuY3JlYXRlUmVtb3RlU3RvcmUoZSksIFxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IHRoaXMuY3JlYXRlRXZlbnRNYW5hZ2VyKGUpLCB0aGlzLnN5bmNFbmdpbmUgPSB0aGlzLmNyZWF0ZVN5bmNFbmdpbmUoZSwgXG4gICAgICAgIC8qIHN0YXJ0QXNQcmltYXJ5PSovICF0LnN5bmNocm9uaXplVGFicyksIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUub25saW5lU3RhdGVIYW5kbGVyID0gdCA9PiBadSh0aGlzLnN5bmNFbmdpbmUsIHQsIDEgLyogU2hhcmVkQ2xpZW50U3RhdGUgKi8pLCBcbiAgICAgICAgdGhpcy5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuaGFuZGxlQ3JlZGVudGlhbENoYW5nZSA9IGZhLmJpbmQobnVsbCwgdGhpcy5zeW5jRW5naW5lKSwgXG4gICAgICAgIGF3YWl0IEV1KHRoaXMucmVtb3RlU3RvcmUsIHRoaXMuc3luY0VuZ2luZS5pc1ByaW1hcnlDbGllbnQpKTtcbiAgICB9XG4gICAgY3JlYXRlRXZlbnRNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDdTtcbiAgICB9XG4gICAgY3JlYXRlRGF0YXN0b3JlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEdvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQpLCBuID0gKHMgPSB0LmRhdGFiYXNlSW5mbywgbmV3IExvKHMpKTtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIC8qKiBSZXR1cm4gdGhlIFBsYXRmb3JtLXNwZWNpZmljIGNvbm5lY3Rpdml0eSBtb25pdG9yLiAqLyAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgem8odCwgZSwgbiwgcyk7XG4gICAgICAgIH0odC5hdXRoQ3JlZGVudGlhbHMsIHQuYXBwQ2hlY2tDcmVkZW50aWFscywgbiwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZVJlbW90ZVN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIGUgPSB0aGlzLmxvY2FsU3RvcmUsIG4gPSB0aGlzLmRhdGFzdG9yZSwgcyA9IHQuYXN5bmNRdWV1ZSwgaSA9IHQgPT4gWnUodGhpcy5zeW5jRW5naW5lLCB0LCAwIC8qIFJlbW90ZVN0b3JlICovKSwgXG4gICAgICAgIHIgPSBGby52dCgpID8gbmV3IEZvIDogbmV3IE9vLCBuZXcgSm8oZSwgbiwgcywgaSwgcik7XG4gICAgICAgIHZhciBlLCBuLCBzLCBpLCByO1xuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgcywgaSwgciwgbykge1xuICAgICAgICAgICAgY29uc3QgdSA9IG5ldyBXdSh0LCBlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmICh1LmNhID0gITApLCB1O1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHQuaW5pdGlhbFVzZXIsIHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIGUpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gRyh0KTtcbiAgICAgICAgICAgIE8oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uXCIpLCBlLmx1LmFkZCg1IC8qIFNodXRkb3duICovKSwgYXdhaXQgWG8oZSksIFxuICAgICAgICAgICAgZS5kdS5zaHV0ZG93bigpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biAocmF0aGVyIHRoYW4gT2ZmbGluZSkgdG8gYXZvaWQgcG90ZW50aWFsbHlcbiAgICAgICAgICAgIC8vIHRyaWdnZXJpbmcgc3B1cmlvdXMgbGlzdGVuZXIgZXZlbnRzIHdpdGggY2FjaGVkIGRhdGEsIGV0Yy5cbiAgICAgICAgICAgIGUuX3Uuc2V0KFwiVW5rbm93blwiIC8qIFVua25vd24gKi8pO1xuICAgICAgICB9KHRoaXMucmVtb3RlU3RvcmUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG93IG1hbnkgYnl0ZXMgdG8gcmVhZCBlYWNoIHRpbWUgd2hlbiBgUmVhZGFibGVTdHJlYW1SZWFkZXIucmVhZCgpYCBpc1xuICogY2FsbGVkLiBPbmx5IGFwcGxpY2FibGUgZm9yIGJ5dGUgc3RyZWFtcyB0aGF0IHdlIGNvbnRyb2wgKGUuZy4gdGhvc2UgYmFja2VkXG4gKiBieSBhbiBVSW50OEFycmF5KS5cbiAqL1xuLyoqXG4gKiBCdWlsZHMgYSBgQnl0ZVN0cmVhbVJlYWRlcmAgZnJvbSBhIFVJbnQ4QXJyYXkuXG4gKiBAcGFyYW0gc291cmNlIC0gVGhlIGRhdGEgc291cmNlIHRvIHVzZS5cbiAqIEBwYXJhbSBieXRlc1BlclJlYWQgLSBIb3cgbWFueSBieXRlcyBlYWNoIGByZWFkKClgIGZyb20gdGhlIHJldHVybmVkIHJlYWRlclxuICogICAgICAgIHdpbGwgcmVhZC5cbiAqL1xuZnVuY3Rpb24gRGEodCwgZSA9IDEwMjQwKSB7XG4gICAgbGV0IG4gPSAwO1xuICAgIC8vIFRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb24gZm9yIFJlYWRhYmxlU3RyZWFtUmVhZGVyIGNoYW5nZWQuIFdlIHVzZVxuICAgIC8vIGBhbnlgIGhlcmUgdG8gYWxsb3cgdGhpcyBjb2RlIHRvIGNvbXBpbGUgd2l0aCBkaWZmZXJlbnQgdmVyc2lvbnMuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNDI5NzBcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBhc3luYyByZWFkKCkge1xuICAgICAgICAgICAgaWYgKG4gPCB0LmJ5dGVMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0ge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdC5zbGljZShuLCBuICsgZSksXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbiArPSBlLCBzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBkb25lOiAhMFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgICAgYXN5bmMgY2FuY2VsKCkge30sXG4gICAgICAgIHJlbGVhc2VMb2NrKCkge30sXG4gICAgICAgIGNsb3NlZDogUHJvbWlzZS5yZWplY3QoXCJ1bmltcGxlbWVudGVkXCIpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgQ2Ege1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMueWEodGhpcy5vYnNlcnZlci5uZXh0LCB0KTtcbiAgICB9XG4gICAgZXJyb3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy55YSh0aGlzLm9ic2VydmVyLmVycm9yLCB0KSA6IGNvbnNvbGUuZXJyb3IoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgdCk7XG4gICAgfVxuICAgIHBhKCkge1xuICAgICAgICB0aGlzLm11dGVkID0gITA7XG4gICAgfVxuICAgIHlhKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tdXRlZCB8fCBzZXRUaW1lb3V0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm11dGVkIHx8IHQoZSk7XG4gICAgICAgIH0pLCAwKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgYnVuZGxlLlxuICpcbiAqIFRha2VzIGEgYnVuZGxlIHN0cmVhbSBvciBidWZmZXIsIGFuZCBwcmVzZW50cyBhYnN0cmFjdGlvbnMgdG8gcmVhZCBidW5kbGVkXG4gKiBlbGVtZW50cyBvdXQgb2YgdGhlIHVuZGVybHlpbmcgY29udGVudC5cbiAqLyBjbGFzcyB4YSB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqIFRoZSByZWFkZXIgdG8gcmVhZCBmcm9tIHVuZGVybHlpbmcgYmluYXJ5IGJ1bmRsZSBkYXRhIHNvdXJjZS4gKi9cbiAgICB0LCBlKSB7XG4gICAgICAgIHRoaXMuSWEgPSB0LCB0aGlzLk0gPSBlLCBcbiAgICAgICAgLyoqIENhY2hlZCBidW5kbGUgbWV0YWRhdGEuICovXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgaiwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnRlcm5hbCBidWZmZXIgdG8gaG9sZCBidW5kbGUgY29udGVudCwgYWNjdW11bGF0aW5nIGluY29tcGxldGUgZWxlbWVudFxuICAgICAgICAgKiBjb250ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idWZmZXIgPSBuZXcgVWludDhBcnJheSwgdGhpcy5UYSA9IG5ldyBUZXh0RGVjb2RlcihcInV0Zi04XCIpLCBcbiAgICAgICAgLy8gUmVhZCB0aGUgbWV0YWRhdGEgKHdoaWNoIGlzIHRoZSBmaXJzdCBlbGVtZW50KS5cbiAgICAgICAgdGhpcy5FYSgpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdCAmJiB0LkN1KCkgPyB0aGlzLm1ldGFkYXRhLnJlc29sdmUodC5wYXlsb2FkLm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShudWxsID09IHQgPyB2b2lkIDAgOiB0LnBheWxvYWQpfWApKTtcbiAgICAgICAgfSksICh0ID0+IHRoaXMubWV0YWRhdGEucmVqZWN0KHQpKSk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5JYS5jYW5jZWwoKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0TWV0YWRhdGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm1ldGFkYXRhLnByb21pc2U7XG4gICAgfVxuICAgIGFzeW5jIGZhKCkge1xuICAgICAgICAvLyBNYWtlcyBzdXJlIG1ldGFkYXRhIGlzIHJlYWQgYmVmb3JlIHByb2NlZWRpbmcuXG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdldE1ldGFkYXRhKCksIHRoaXMuRWEoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgaGVhZCBvZiBpbnRlcm5hbCBidWZmZXIsIGFuZCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tXG4gICAgICogdW5kZXJseWluZyBzdHJlYW0gaWYgYSBjb21wbGV0ZSBlbGVtZW50IGNhbm5vdCBiZSBmb3VuZCwgdW50aWwgYW5cbiAgICAgKiBlbGVtZW50KGluY2x1ZGluZyB0aGUgcHJlZml4ZWQgbGVuZ3RoIGFuZCB0aGUgSlNPTiBzdHJpbmcpIGlzIGZvdW5kLlxuICAgICAqXG4gICAgICogT25jZSBhIGNvbXBsZXRlIGVsZW1lbnQgaXMgcmVhZCwgaXQgaXMgZHJvcHBlZCBmcm9tIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKlxuICAgICAqIFJldHVybnMgZWl0aGVyIHRoZSBidW5kbGVkIGVsZW1lbnQsIG9yIG51bGwgaWYgd2UgaGF2ZSByZWFjaGVkIHRoZSBlbmQgb2ZcbiAgICAgKiB0aGUgc3RyZWFtLlxuICAgICAqLyAgICBhc3luYyBFYSgpIHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IHRoaXMuQWEoKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5UYS5kZWNvZGUodCksIG4gPSBOdW1iZXIoZSk7XG4gICAgICAgIGlzTmFOKG4pICYmIHRoaXMuUmEoYGxlbmd0aCBzdHJpbmcgKCR7ZX0pIGlzIG5vdCB2YWxpZCBudW1iZXJgKTtcbiAgICAgICAgY29uc3QgcyA9IGF3YWl0IHRoaXMuYmEobik7XG4gICAgICAgIHJldHVybiBuZXcgJHUoSlNPTi5wYXJzZShzKSwgdC5sZW5ndGggKyBuKTtcbiAgICB9XG4gICAgLyoqIEZpcnN0IGluZGV4IG9mICd7JyBmcm9tIHRoZSB1bmRlcmx5aW5nIGJ1ZmZlci4gKi8gICAgUGEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5maW5kSW5kZXgoKHQgPT4gdCA9PT0gXCJ7XCIuY2hhckNvZGVBdCgwKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIHRoZSBiZWdpbm5pbmcgb2YgdGhlIGludGVybmFsIGJ1ZmZlciwgdW50aWwgdGhlIGZpcnN0ICd7JywgYW5kXG4gICAgICogcmV0dXJuIHRoZSBjb250ZW50LlxuICAgICAqXG4gICAgICogSWYgcmVhY2hlZCBlbmQgb2YgdGhlIHN0cmVhbSwgcmV0dXJucyBhIG51bGwuXG4gICAgICovICAgIGFzeW5jIEFhKCkge1xuICAgICAgICBmb3IgKDt0aGlzLlBhKCkgPCAwOyApIHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLlZhKCkpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYW5kIHRoZXJlXG4gICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgbm8gbW9yZSBkYXRhIHRvIHByb2Nlc3MuXG4gICAgICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuYnVmZmVyLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLlBhKCk7XG4gICAgICAgIC8vIEJyb2tlIG91dCBvZiB0aGUgbG9vcCBiZWNhdXNlIHVuZGVybHlpbmcgc3RyZWFtIGlzIGNsb3NlZCwgYnV0IHN0aWxsXG4gICAgICAgIC8vIGNhbm5vdCBmaW5kIGFuIG9wZW4gYnJhY2tldC5cbiAgICAgICAgICAgICAgICB0IDwgMCAmJiB0aGlzLlJhKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIGEgbGVuZ3RoIHN0cmluZyBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBsZW5ndGguXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gYSBzcGVjaWZpZWQgcG9zaXRpb24gZnJvbSB0aGUgaW50ZXJuYWwgYnVmZmVyLCBmb3IgYSBzcGVjaWZpZWRcbiAgICAgKiBudW1iZXIgb2YgYnl0ZXMsIHB1bGxpbmcgbW9yZSBkYXRhIGZyb20gdGhlIHVuZGVybHlpbmcgc3RyZWFtIGlmIG5lZWRlZC5cbiAgICAgKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgZGVjb2RlZCBmcm9tIHRoZSByZWFkIGJ5dGVzLlxuICAgICAqLyAgICBhc3luYyBiYSh0KSB7XG4gICAgICAgIGZvciAoO3RoaXMuYnVmZmVyLmxlbmd0aCA8IHQ7ICkge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5WYSgpICYmIHRoaXMuUmEoXCJSZWFjaGVkIHRoZSBlbmQgb2YgYnVuZGxlIHdoZW4gbW9yZSBpcyBleHBlY3RlZC5cIik7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVGEuZGVjb2RlKHRoaXMuYnVmZmVyLnNsaWNlKDAsIHQpKTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBpbnRlcm5hbCBidWZmZXIgdG8gZHJvcCB0aGUgcmVhZCBqc29uIHN0cmluZy5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSh0KSwgZTtcbiAgICB9XG4gICAgUmEodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRocm93IHRoaXMuSWEuY2FuY2VsKCksIG5ldyBFcnJvcihgSW52YWxpZCBidW5kbGUgZm9ybWF0OiAke3R9YCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFB1bGxzIG1vcmUgZGF0YSBmcm9tIHVuZGVybHlpbmcgc3RyZWFtIHRvIGludGVybmFsIGJ1ZmZlci5cbiAgICAgKiBSZXR1cm5zIGEgYm9vbGVhbiBpbmRpY2F0aW5nIHdoZXRoZXIgdGhlIHN0cmVhbSBpcyBmaW5pc2hlZC5cbiAgICAgKi8gICAgYXN5bmMgVmEoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLklhLnJlYWQoKTtcbiAgICAgICAgaWYgKCF0LmRvbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlci5sZW5ndGggKyB0LnZhbHVlLmxlbmd0aCk7XG4gICAgICAgICAgICBlLnNldCh0aGlzLmJ1ZmZlciksIGUuc2V0KHQudmFsdWUsIHRoaXMuYnVmZmVyLmxlbmd0aCksIHRoaXMuYnVmZmVyID0gZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC5kb25lO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSW50ZXJuYWwgdHJhbnNhY3Rpb24gb2JqZWN0IHJlc3BvbnNpYmxlIGZvciBhY2N1bXVsYXRpbmcgdGhlIG11dGF0aW9ucyB0b1xuICogcGVyZm9ybSBhbmQgdGhlIGJhc2UgdmVyc2lvbnMgZm9yIGFueSBkb2N1bWVudHMgcmVhZC5cbiAqL1xuY2xhc3MgTmEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5kYXRhc3RvcmUgPSB0LCBcbiAgICAgICAgLy8gVGhlIHZlcnNpb24gb2YgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGR1cmluZyB0aGlzIHRyYW5zYWN0aW9uLlxuICAgICAgICB0aGlzLnJlYWRWZXJzaW9ucyA9IG5ldyBNYXAsIHRoaXMubXV0YXRpb25zID0gW10sIHRoaXMuY29tbWl0dGVkID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBkZWZlcnJlZCB1c2FnZSBlcnJvciB0aGF0IG9jY3VycmVkIHByZXZpb3VzbHkgaW4gdGhpcyB0cmFuc2FjdGlvbiB0aGF0XG4gICAgICAgICAqIHdpbGwgY2F1c2UgdGhlIHRyYW5zYWN0aW9uIHRvIGZhaWwgb25jZSBpdCBhY3R1YWxseSBjb21taXRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IG51bGwsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB3cml0dGVuIGluIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICpcbiAgICAgICAgICogV2hlbiB0aGVyZSdzIG1vcmUgdGhhbiBvbmUgd3JpdGUgdG8gdGhlIHNhbWUga2V5IGluIGEgdHJhbnNhY3Rpb24sIGFueVxuICAgICAgICAgKiB3cml0ZXMgYWZ0ZXIgdGhlIGZpcnN0IGFyZSBoYW5kbGVkIGRpZmZlcmVudGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcyA9IG5ldyBTZXQ7XG4gICAgfVxuICAgIGFzeW5jIGxvb2t1cCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5sZW5ndGggPiAwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiRmlyZXN0b3JlIHRyYW5zYWN0aW9ucyByZXF1aXJlIGFsbCByZWFkcyB0byBiZSBleGVjdXRlZCBiZWZvcmUgYWxsIHdyaXRlcy5cIik7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gRyh0KSwgcyA9IHBzKG4uTSkgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICBkb2N1bWVudHM6IGUubWFwKCh0ID0+IHdzKG4uTSwgdCkpKVxuICAgICAgICAgICAgfSwgciA9IGF3YWl0IG4uY28oXCJCYXRjaEdldERvY3VtZW50c1wiLCBzLCBpKSwgbyA9IG5ldyBNYXA7XG4gICAgICAgICAgICByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBBcyhuLk0sIHQpO1xuICAgICAgICAgICAgICAgIG8uc2V0KGUua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgY29uc3QgdSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgVSghIWUpLCB1LnB1c2goZSk7XG4gICAgICAgICAgICB9KSksIHU7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHRoaXMucmVjb3JkVmVyc2lvbih0KSkpLCBlO1xuICAgIH1cbiAgICBzZXQodCwgZSkge1xuICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy53cml0ZShlLnRvTXV0YXRpb24odCwgdGhpcy5wcmVjb25kaXRpb25Gb3JVcGRhdGUodCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0V3JpdGVFcnJvciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgdGhpcy53cml0ZShuZXcgVm4odCwgdGhpcy5wcmVjb25kaXRpb24odCkpKSwgdGhpcy53cml0dGVuRG9jcy5hZGQodC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgYXN5bmMgY29tbWl0KCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5sYXN0V3JpdGVFcnJvcikgdGhyb3cgdGhpcy5sYXN0V3JpdGVFcnJvcjtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMucmVhZFZlcnNpb25zO1xuICAgICAgICAvLyBGb3IgZWFjaCBtdXRhdGlvbiwgbm90ZSB0aGF0IHRoZSBkb2Mgd2FzIHdyaXR0ZW4uXG4gICAgICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LmRlbGV0ZShlLmtleS50b1N0cmluZygpKTtcbiAgICAgICAgfSkpLCBcbiAgICAgICAgLy8gRm9yIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBidXQgbm90IHdyaXR0ZW4gdG8sIHdlIHdhbnQgdG8gcGVyZm9ybVxuICAgICAgICAvLyBhIGB2ZXJpZnlgIG9wZXJhdGlvbi5cbiAgICAgICAgdC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHh0LmZyb21QYXRoKGUpO1xuICAgICAgICAgICAgdGhpcy5tdXRhdGlvbnMucHVzaChuZXcgdm4obiwgdGhpcy5wcmVjb25kaXRpb24obikpKTtcbiAgICAgICAgfSkpLCBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gRyh0KSwgcyA9IHBzKG4uTSkgKyBcIi9kb2N1bWVudHNcIiwgaSA9IHtcbiAgICAgICAgICAgICAgICB3cml0ZXM6IGUubWFwKCh0ID0+IGJzKG4uTSwgdCkpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGF3YWl0IG4ucm8oXCJDb21taXRcIiwgcywgaSk7XG4gICAgICAgIH0odGhpcy5kYXRhc3RvcmUsIHRoaXMubXV0YXRpb25zKSwgdGhpcy5jb21taXR0ZWQgPSAhMDtcbiAgICB9XG4gICAgcmVjb3JkVmVyc2lvbih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBpZiAodC5pc0ZvdW5kRG9jdW1lbnQoKSkgZSA9IHQudmVyc2lvbjsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoIXQuaXNOb0RvY3VtZW50KCkpIHRocm93IEwoKTtcbiAgICAgICAgICAgIC8vIEZvciBkZWxldGVkIGRvY3MsIHdlIG11c3QgdXNlIGJhc2VWZXJzaW9uIDAgd2hlbiB3ZSBvdmVyd3JpdGUgdGhlbS5cbiAgICAgICAgICAgIGUgPSBjdC5taW4oKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICBpZiAobikge1xuICAgICAgICAgICAgaWYgKCFlLmlzRXF1YWwobikpIFxuICAgICAgICAgICAgLy8gVGhpcyB0cmFuc2FjdGlvbiB3aWxsIGZhaWwgbm8gbWF0dGVyIHdoYXQuXG4gICAgICAgICAgICB0aHJvdyBuZXcgUShLLkFCT1JURUQsIFwiRG9jdW1lbnQgdmVyc2lvbiBjaGFuZ2VkIGJldHdlZW4gdHdvIHJlYWRzLlwiKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucmVhZFZlcnNpb25zLnNldCh0LmtleS50b1N0cmluZygpLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmVyc2lvbiBvZiB0aGlzIGRvY3VtZW50IHdoZW4gaXQgd2FzIHJlYWQgaW4gdGhpcyB0cmFuc2FjdGlvbixcbiAgICAgKiBhcyBhIHByZWNvbmRpdGlvbiwgb3Igbm8gcHJlY29uZGl0aW9uIGlmIGl0IHdhcyBub3QgcmVhZC5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICByZXR1cm4gIXRoaXMud3JpdHRlbkRvY3MuaGFzKHQudG9TdHJpbmcoKSkgJiYgZSA/IF9uLnVwZGF0ZVRpbWUoZSkgOiBfbi5ub25lKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHByZWNvbmRpdGlvbiBmb3IgYSBkb2N1bWVudCBpZiB0aGUgb3BlcmF0aW9uIGlzIGFuIHVwZGF0ZS5cbiAgICAgKi8gICAgcHJlY29uZGl0aW9uRm9yVXBkYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMucmVhZFZlcnNpb25zLmdldCh0LnRvU3RyaW5nKCkpO1xuICAgICAgICAvLyBUaGUgZmlyc3QgdGltZSBhIGRvY3VtZW50IGlzIHdyaXR0ZW4sIHdlIHdhbnQgdG8gdGFrZSBpbnRvIGFjY291bnQgdGhlXG4gICAgICAgIC8vIHJlYWQgdGltZSBhbmQgZXhpc3RlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLndyaXR0ZW5Eb2NzLmhhcyh0LnRvU3RyaW5nKCkpICYmIGUpIHtcbiAgICAgICAgICAgIGlmIChlLmlzRXF1YWwoY3QubWluKCkpKSBcbiAgICAgICAgICAgIC8vIFRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LCBzbyBmYWlsIHRoZSB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgaGFzIHRvIGJlIHZhbGlkYXRlZCBsb2NhbGx5IGJlY2F1c2UgeW91IGNhbid0IHNlbmQgYVxuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9uIHRoYXQgYSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCB3aXRob3V0IGNoYW5naW5nIHRoZVxuICAgICAgICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBiYWNrZW5kIHdyaXRlIHRvIGJlIGFuIGluc2VydC4gVGhpcyBpcyB0aGUgcmV2ZXJzZVxuICAgICAgICAgICAgLy8gb2Ygd2hhdCB3ZSB3YW50LCBzaW5jZSB3ZSB3YW50IHRvIGFzc2VydCB0aGF0IHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAvLyBleGlzdCBidXQgdGhlbiBzZW5kIHRoZSB1cGRhdGUgYW5kIGhhdmUgaXQgZmFpbC4gU2luY2Ugd2UgY2FuJ3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3MgdGhhdCB0byB0aGUgYmFja2VuZCwgd2UgaGF2ZSB0byB2YWxpZGF0ZSBsb2NhbGx5LlxuICAgICAgICAgICAgLy8gTm90ZTogdGhpcyBjYW4gY2hhbmdlIG9uY2Ugd2UgY2FuIHNlbmQgc2VwYXJhdGUgdmVyaWZ5IHdyaXRlcyBpbiB0aGVcbiAgICAgICAgICAgIC8vIHRyYW5zYWN0aW9uLlxuICAgICAgICAgICAgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHVwZGF0ZSBhIGRvY3VtZW50IHRoYXQgZG9lc24ndCBleGlzdC5cIik7XG4gICAgICAgICAgICAvLyBEb2N1bWVudCBleGlzdHMsIGJhc2UgcHJlY29uZGl0aW9uIG9uIGRvY3VtZW50IHVwZGF0ZSB0aW1lLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9uLnVwZGF0ZVRpbWUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRG9jdW1lbnQgd2FzIG5vdCByZWFkLCBzbyB3ZSBqdXN0IHVzZSB0aGUgcHJlY29uZGl0aW9ucyBmb3IgYSBibGluZFxuICAgICAgICAvLyB1cGRhdGUuXG4gICAgICAgIHJldHVybiBfbi5leGlzdHMoITApO1xuICAgIH1cbiAgICB3cml0ZSh0KSB7XG4gICAgICAgIHRoaXMuZW5zdXJlQ29tbWl0Tm90Q2FsbGVkKCksIHRoaXMubXV0YXRpb25zLnB1c2godCk7XG4gICAgfVxuICAgIGVuc3VyZUNvbW1pdE5vdENhbGxlZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRyYW5zYWN0aW9uUnVubmVyIGVuY2Fwc3VsYXRlcyB0aGUgbG9naWMgbmVlZGVkIHRvIHJ1biBhbmQgcmV0cnkgdHJhbnNhY3Rpb25zXG4gKiB3aXRoIGJhY2tvZmYuXG4gKi9cbmNsYXNzIGthIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IG4sIHRoaXMuZGVmZXJyZWQgPSBzLCBcbiAgICAgICAgdGhpcy52YSA9IDUsIHRoaXMuU28gPSBuZXcgS28odGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVHJhbnNhY3Rpb25SZXRyeSAqLyk7XG4gICAgfVxuICAgIC8qKiBSdW5zIHRoZSB0cmFuc2FjdGlvbiBhbmQgc2V0cyB0aGUgcmVzdWx0IG9uIGRlZmVycmVkLiAqLyAgICBydW4oKSB7XG4gICAgICAgIHRoaXMudmEgLT0gMSwgdGhpcy5TYSgpO1xuICAgIH1cbiAgICBTYSgpIHtcbiAgICAgICAgdGhpcy5Tby5JbygoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBOYSh0aGlzLmRhdGFzdG9yZSksIGUgPSB0aGlzLkRhKHQpO1xuICAgICAgICAgICAgZSAmJiBlLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0LmNvbW1pdCgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWZlcnJlZC5yZXNvbHZlKGUpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ2EodCk7XG4gICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuQ2EodCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgRGEodCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudXBkYXRlRnVuY3Rpb24odCk7XG4gICAgICAgICAgICByZXR1cm4gIVN0KGUpICYmIGUuY2F0Y2ggJiYgZS50aGVuID8gZSA6ICh0aGlzLmRlZmVycmVkLnJlamVjdChFcnJvcihcIlRyYW5zYWN0aW9uIGNhbGxiYWNrIG11c3QgcmV0dXJuIGEgUHJvbWlzZVwiKSksIFxuICAgICAgICAgICAgbnVsbCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIERvIG5vdCByZXRyeSBlcnJvcnMgdGhyb3duIGJ5IHVzZXIgcHJvdmlkZWQgdXBkYXRlRnVuY3Rpb24uXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZlcnJlZC5yZWplY3QodCksIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgQ2EodCkge1xuICAgICAgICB0aGlzLnZhID4gMCAmJiB0aGlzLnhhKHQpID8gKHRoaXMudmEgLT0gMSwgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLlNhKCksIFxuICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSkgOiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KTtcbiAgICB9XG4gICAgeGEodCkge1xuICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkge1xuICAgICAgICAgICAgLy8gSW4gdHJhbnNhY3Rpb25zLCB0aGUgYmFja2VuZCB3aWxsIGZhaWwgb3V0ZGF0ZWQgcmVhZHMgd2l0aCBGQUlMRURfUFJFQ09ORElUSU9OIGFuZFxuICAgICAgICAgICAgLy8gbm9uLW1hdGNoaW5nIGRvY3VtZW50IHZlcnNpb25zIHdpdGggQUJPUlRFRC4gVGhlc2UgZXJyb3JzIHNob3VsZCBiZSByZXRyaWVkLlxuICAgICAgICAgICAgY29uc3QgZSA9IHQuY29kZTtcbiAgICAgICAgICAgIHJldHVybiBcImFib3J0ZWRcIiA9PT0gZSB8fCBcImZhaWxlZC1wcmVjb25kaXRpb25cIiA9PT0gZSB8fCAheG4oZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS5cbiAqL1xuY2xhc3MgTWEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5kYXRhYmFzZUluZm8gPSBzLCBcbiAgICAgICAgdGhpcy51c2VyID0gQy5VTkFVVEhFTlRJQ0FURUQsIHRoaXMuY2xpZW50SWQgPSBpdC5SKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCB0aGlzLmF1dGhDcmVkZW50aWFscy5zdGFydChuLCAoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgdC51aWQpLCBhd2FpdCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIodCksIFxuICAgICAgICAgICAgdGhpcy51c2VyID0gdDtcbiAgICAgICAgfSkpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc3RhcnQobiwgKHQgPT4gKE8oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCBuZXcgYXBwIGNoZWNrIHRva2VuPVwiLCB0KSwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIodCwgdGhpcy51c2VyKSkpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzeW5jUXVldWU6IHRoaXMuYXN5bmNRdWV1ZSxcbiAgICAgICAgICAgIGRhdGFiYXNlSW5mbzogdGhpcy5kYXRhYmFzZUluZm8sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhDcmVkZW50aWFsczogdGhpcy5hdXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBhcHBDaGVja0NyZWRlbnRpYWxzOiB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBpbml0aWFsVXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgbWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM6IDEwMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSB0O1xuICAgIH1cbiAgICBzZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb25cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLlxuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgajtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLm9ubGluZUNvbXBvbmVudHMgJiYgYXdhaXQgdGhpcy5vbmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCB0aGlzLm9mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMub2ZmbGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIFxuICAgICAgICAgICAgICAgIC8vIFRoZSBjcmVkZW50aWFscyBwcm92aWRlciBtdXN0IGJlIHRlcm1pbmF0ZWQgYWZ0ZXIgc2h1dHRpbmcgZG93biB0aGVcbiAgICAgICAgICAgICAgICAvLyBSZW1vdGVTdG9yZSBhcyBpdCB3aWxsIHByZXZlbnQgdGhlIFJlbW90ZVN0b3JlIGZyb20gcmV0cmlldmluZyBhdXRoXG4gICAgICAgICAgICAgICAgLy8gdG9rZW5zLlxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzLnNodXRkb3duKCksIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gUHUoZSwgXCJGYWlsZWQgdG8gc2h1dGRvd24gcGVyc2lzdGVuY2VcIik7XG4gICAgICAgICAgICAgICAgdC5yZWplY3Qobik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSwgdC5wcm9taXNlO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gT2EodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCksIE8oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobik7XG4gICAgbGV0IHMgPSBuLmluaXRpYWxVc2VyO1xuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKChhc3luYyB0ID0+IHtcbiAgICAgICAgcy5pc0VxdWFsKHQpIHx8IChhd2FpdCB0byhlLmxvY2FsU3RvcmUsIHQpLCBzID0gdCk7XG4gICAgfSkpLCBcbiAgICAvLyBXaGVuIGEgdXNlciBjYWxscyBjbGVhclBlcnNpc3RlbmNlKCkgaW4gb25lIGNsaWVudCwgYWxsIG90aGVyIGNsaWVudHNcbiAgICAvLyBuZWVkIHRvIGJlIHRlcm1pbmF0ZWQgdG8gYWxsb3cgdGhlIGRlbGV0ZSB0byBzdWNjZWVkLlxuICAgIGUucGVyc2lzdGVuY2Uuc2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIoKCgpID0+IHQudGVybWluYXRlKCkpKSwgdC5vZmZsaW5lQ29tcG9uZW50cyA9IGU7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEZhKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpO1xuICAgIGNvbnN0IG4gPSBhd2FpdCAkYSh0KTtcbiAgICBPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpO1xuICAgIGNvbnN0IHMgPSBhd2FpdCB0LmdldENvbmZpZ3VyYXRpb24oKTtcbiAgICBhd2FpdCBlLmluaXRpYWxpemUobiwgcyksIFxuICAgIC8vIFRoZSBDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIgb2YgdGhlIG9ubGluZSBjb21wb25lbnQgcHJvdmlkZXIgdGFrZXNcbiAgICAvLyBwcmVjZWRlbmNlIG92ZXIgdGhlIG9mZmxpbmUgY29tcG9uZW50IHByb3ZpZGVyLlxuICAgIHQuc2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyKCh0ID0+IFR1KGUucmVtb3RlU3RvcmUsIHQpKSksIHQuc2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyKCgodCwgbikgPT4gVHUoZS5yZW1vdGVTdG9yZSwgbikpKSwgXG4gICAgdC5vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gJGEodCkge1xuICAgIHJldHVybiB0Lm9mZmxpbmVDb21wb25lbnRzIHx8IChPKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IE9hKHQsIG5ldyBQYSkpLCB0Lm9mZmxpbmVDb21wb25lbnRzO1xufVxuXG5hc3luYyBmdW5jdGlvbiBCYSh0KSB7XG4gICAgcmV0dXJuIHQub25saW5lQ29tcG9uZW50cyB8fCAoTyhcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIiksIFxuICAgIGF3YWl0IEZhKHQsIG5ldyBTYSkpLCB0Lm9ubGluZUNvbXBvbmVudHM7XG59XG5cbmZ1bmN0aW9uIExhKHQpIHtcbiAgICByZXR1cm4gJGEodCkudGhlbigodCA9PiB0LnBlcnNpc3RlbmNlKSk7XG59XG5cbmZ1bmN0aW9uIFVhKHQpIHtcbiAgICByZXR1cm4gJGEodCkudGhlbigodCA9PiB0LmxvY2FsU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gcWEodCkge1xuICAgIHJldHVybiBCYSh0KS50aGVuKCh0ID0+IHQucmVtb3RlU3RvcmUpKTtcbn1cblxuZnVuY3Rpb24gR2EodCkge1xuICAgIHJldHVybiBCYSh0KS50aGVuKCh0ID0+IHQuc3luY0VuZ2luZSkpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBLYSh0KSB7XG4gICAgY29uc3QgZSA9IGF3YWl0IEJhKHQpLCBuID0gZS5ldmVudE1hbmFnZXI7XG4gICAgcmV0dXJuIG4ub25MaXN0ZW4gPSB6dS5iaW5kKG51bGwsIGUuc3luY0VuZ2luZSksIG4ub25Vbmxpc3RlbiA9IEp1LmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgXG4gICAgbjtcbn1cblxuLyoqIEVuYWJsZXMgdGhlIG5ldHdvcmsgY29ubmVjdGlvbiBhbmQgcmUtZW5xdWV1ZXMgYWxsIHBlbmRpbmcgb3BlcmF0aW9ucy4gKi8gZnVuY3Rpb24gUWEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgTGEodCksIG4gPSBhd2FpdCBxYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITApLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gRyh0KTtcbiAgICAgICAgICAgIHJldHVybiBlLmx1LmRlbGV0ZSgwIC8qIFVzZXJEaXNhYmxlZCAqLyksIFlvKGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gamEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgTGEodCksIG4gPSBhd2FpdCBxYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gRyh0KTtcbiAgICAgICAgICAgIGUubHUuYWRkKDAgLyogVXNlckRpc2FibGVkICovKSwgYXdhaXQgWG8oZSksIFxuICAgICAgICAgICAgLy8gU2V0IHRoZSBPbmxpbmVTdGF0ZSB0byBPZmZsaW5lIHNvIGdldCgpcyByZXR1cm4gZnJvbSBjYWNoZSwgZXRjLlxuICAgICAgICAgICAgZS5fdS5zZXQoXCJPZmZsaW5lXCIgLyogT2ZmbGluZSAqLyk7XG4gICAgICAgIH0obik7XG4gICAgfSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiBhbGwgd3JpdGVzIHRoYXQgd2VyZSBwZW5kaW5nIGF0IHRoZSB0aW1lXG4gKiB0aGlzIG1ldGhvZCB3YXMgY2FsbGVkIHJlY2VpdmVkIHNlcnZlciBhY2tub3dsZWRnZW1lbnQuIEFuIGFja25vd2xlZGdlbWVudFxuICogY2FuIGJlIGVpdGhlciBhY2NlcHRhbmNlIG9yIHJlamVjdGlvbi5cbiAqLyBmdW5jdGlvbiBXYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gRyh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcInJlYWQgZG9jdW1lbnRcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLmFpLkJzKHQsIGUpKSk7XG4gICAgICAgICAgICB9KHQsIGUpO1xuICAgICAgICAgICAgcy5pc0ZvdW5kRG9jdW1lbnQoKSA/IG4ucmVzb2x2ZShzKSA6IHMuaXNOb0RvY3VtZW50KCkgPyBuLnJlc29sdmUobnVsbCkgOiBuLnJlamVjdChuZXcgUShLLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBjYWNoZS4gKEhvd2V2ZXIsIHRoaXMgZG9jdW1lbnQgbWF5IGV4aXN0IG9uIHRoZSBzZXJ2ZXIuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgJ3NvdXJjZScgaW4gdGhlIEdldE9wdGlvbnMgdG8gYXR0ZW1wdCB0byByZXRyaWV2ZSB0aGUgZG9jdW1lbnQgZnJvbSB0aGUgc2VydmVyLilcIikpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBzID0gUHUodCwgYEZhaWxlZCB0byBnZXQgZG9jdW1lbnQgJyR7ZX0gZnJvbSBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIGRvY3VtZW50IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IFVhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHphKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBDYSh7XG4gICAgICAgICAgICBuZXh0OiByID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IE51KHQsIG8pKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IHIuZG9jcy5oYXMobik7XG4gICAgICAgICAgICAgICAgIXUgJiYgci5mcm9tQ2FjaGUgPyBcbiAgICAgICAgICAgICAgICAvLyBUT0RPKGRpbW9uZCk6IElmIHdlJ3JlIG9ubGluZSBhbmQgdGhlIGRvY3VtZW50IGRvZXNuJ3RcbiAgICAgICAgICAgICAgICAvLyBleGlzdCB0aGVuIHdlIHJlc29sdmUgd2l0aCBhIGRvYy5leGlzdHMgc2V0IHRvIGZhbHNlLiBJZlxuICAgICAgICAgICAgICAgIC8vIHdlJ3JlIG9mZmxpbmUgaG93ZXZlciwgd2UgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoaXNcbiAgICAgICAgICAgICAgICAvLyBjYXNlLiBUd28gb3B0aW9uczogMSkgQ2FjaGUgdGhlIG5lZ2F0aXZlIHJlc3BvbnNlIGZyb21cbiAgICAgICAgICAgICAgICAvLyB0aGUgc2VydmVyIHNvIHdlIGNhbiBkZWxpdmVyIHRoYXQgZXZlbiB3aGVuIHlvdSdyZVxuICAgICAgICAgICAgICAgIC8vIG9mZmxpbmUgMikgQWN0dWFsbHkgcmVqZWN0IHRoZSBQcm9taXNlIGluIHRoZSBvbmxpbmUgY2FzZVxuICAgICAgICAgICAgICAgIC8vIGlmIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICAgICAgICAgIGkucmVqZWN0KG5ldyBRKEsuVU5BVkFJTEFCTEUsIFwiRmFpbGVkIHRvIGdldCBkb2N1bWVudCBiZWNhdXNlIHRoZSBjbGllbnQgaXMgb2ZmbGluZS5cIikpIDogdSAmJiByLmZyb21DYWNoZSAmJiBzICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IFEoSy5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnQgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IGRvZXMgZXhpc3QgaW4gdGhlIGxvY2FsIGNhY2hlLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nIHNvdXJjZSB0byBcInNlcnZlclwiIHRvIHJldHJpZXZlIHRoZSBjYWNoZWQgZG9jdW1lbnQuKScpKSA6IGkucmVzb2x2ZShyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBGdShOZShuLnBhdGgpLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIER1OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHh1KHQsIG8pO1xuICAgIH0oYXdhaXQgS2EodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBIYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGF3YWl0IGFvKHQsIGUsIFxuICAgICAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMCksIGkgPSBuZXcgS3UoZSwgcy5oaSksIHIgPSBpLkd1KHMuZG9jdW1lbnRzKSwgbyA9IGkuYXBwbHlDaGFuZ2VzKHIsIFxuICAgICAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKTtcbiAgICAgICAgICAgIG4ucmVzb2x2ZShvLnNuYXBzaG90KTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IFB1KHQsIGBGYWlsZWQgdG8gZXhlY3V0ZSBxdWVyeSAnJHtlfSBhZ2FpbnN0IGNhY2hlYCk7XG4gICAgICAgICAgICBuLnJlamVjdChzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIFJldHJpZXZlcyBhIGxhdGVuY3ktY29tcGVuc2F0ZWQgcXVlcnkgc25hcHNob3QgZnJvbSB0aGUgYmFja2VuZCB2aWEgYVxuICogU25hcHNob3RMaXN0ZW5lci5cbiAqLyAoYXdhaXQgVWEodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gSmEodCwgZSwgbiA9IHt9KSB7XG4gICAgY29uc3QgcyA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICBjb25zdCByID0gbmV3IENhKHtcbiAgICAgICAgICAgIG5leHQ6IG4gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBxdWVyeSBmaXJzdCBiZWZvcmUgcGFzc2luZyBldmVudCB0byB1c2VyIHRvIGF2b2lkXG4gICAgICAgICAgICAgICAgLy8gdXNlciBhY3Rpb25zIGFmZmVjdGluZyB0aGUgbm93IHN0YWxlIHF1ZXJ5LlxuICAgICAgICAgICAgICAgIGUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gTnUodCwgbykpKSwgbi5mcm9tQ2FjaGUgJiYgXCJzZXJ2ZXJcIiA9PT0gcy5zb3VyY2UgPyBpLnJlamVjdChuZXcgUShLLlVOQVZBSUxBQkxFLCAnRmFpbGVkIHRvIGdldCBkb2N1bWVudHMgZnJvbSBzZXJ2ZXIuIChIb3dldmVyLCB0aGVzZSBkb2N1bWVudHMgbWF5IGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50cy4pJykpIDogaS5yZXNvbHZlKG4pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiB0ID0+IGkucmVqZWN0KHQpXG4gICAgICAgIH0pLCBvID0gbmV3IEZ1KG4sIHIsIHtcbiAgICAgICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6ICEwLFxuICAgICAgICAgICAgRHU6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4geHUodCwgbyk7XG4gICAgfShhd2FpdCBLYSh0KSwgdC5hc3luY1F1ZXVlLCBlLCBuLCBzKSkpLCBzLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIFlhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gbmV3IENhKGUpO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBHKHQpLlR1LmFkZChlKSwgXG4gICAgICAgIC8vIEltbWVkaWF0ZWx5IGZpcmUgYW4gaW5pdGlhbCBldmVudCwgaW5kaWNhdGluZyBhbGwgZXhpc3RpbmcgbGlzdGVuZXJzXG4gICAgICAgIC8vIGFyZSBpbi1zeW5jLlxuICAgICAgICBlLm5leHQoKTtcbiAgICB9KGF3YWl0IEthKHQpLCBuKSkpLCAoKSA9PiB7XG4gICAgICAgIG4ucGEoKSwgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIEcodCkuVHUuZGVsZXRlKGUpO1xuICAgICAgICB9KGF3YWl0IEthKHQpLCBuKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogVGFrZXMgYW4gdXBkYXRlRnVuY3Rpb24gaW4gd2hpY2ggYSBzZXQgb2YgcmVhZHMgYW5kIHdyaXRlcyBjYW4gYmUgcGVyZm9ybWVkXG4gKiBhdG9taWNhbGx5LiBJbiB0aGUgdXBkYXRlRnVuY3Rpb24sIHRoZSBjbGllbnQgY2FuIHJlYWQgYW5kIHdyaXRlIHZhbHVlc1xuICogdXNpbmcgdGhlIHN1cHBsaWVkIHRyYW5zYWN0aW9uIG9iamVjdC4gQWZ0ZXIgdGhlIHVwZGF0ZUZ1bmN0aW9uLCBhbGxcbiAqIGNoYW5nZXMgd2lsbCBiZSBjb21taXR0ZWQuIElmIGEgcmV0cnlhYmxlIGVycm9yIG9jY3VycyAoZXg6IHNvbWUgb3RoZXJcbiAqIGNsaWVudCBoYXMgY2hhbmdlZCBhbnkgb2YgdGhlIGRhdGEgcmVmZXJlbmNlZCksIHRoZW4gdGhlIHVwZGF0ZUZ1bmN0aW9uXG4gKiB3aWxsIGJlIGNhbGxlZCBhZ2FpbiBhZnRlciBhIGJhY2tvZmYuIElmIHRoZSB1cGRhdGVGdW5jdGlvbiBzdGlsbCBmYWlsc1xuICogYWZ0ZXIgYWxsIHJldHJpZXMsIHRoZW4gdGhlIHRyYW5zYWN0aW9uIHdpbGwgYmUgcmVqZWN0ZWQuXG4gKlxuICogVGhlIHRyYW5zYWN0aW9uIG9iamVjdCBwYXNzZWQgdG8gdGhlIHVwZGF0ZUZ1bmN0aW9uIGNvbnRhaW5zIG1ldGhvZHMgZm9yXG4gKiBhY2Nlc3NpbmcgZG9jdW1lbnRzIGFuZCBjb2xsZWN0aW9ucy4gVW5saWtlIG90aGVyIGRhdGFzdG9yZSBhY2Nlc3MsIGRhdGFcbiAqIGFjY2Vzc2VkIHdpdGggdGhlIHRyYW5zYWN0aW9uIHdpbGwgbm90IHJlZmxlY3QgbG9jYWwgY2hhbmdlcyB0aGF0IGhhdmUgbm90XG4gKiBiZWVuIGNvbW1pdHRlZC4gRm9yIHRoaXMgcmVhc29uLCBpdCBpcyByZXF1aXJlZCB0aGF0IGFsbCByZWFkcyBhcmVcbiAqIHBlcmZvcm1lZCBiZWZvcmUgYW55IHdyaXRlcy4gVHJhbnNhY3Rpb25zIG11c3QgYmUgcGVyZm9ybWVkIHdoaWxlIG9ubGluZS5cbiAqLyBmdW5jdGlvbiBYYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBqO1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBzID0gYXdhaXQgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIEJhKHQpLnRoZW4oKHQgPT4gdC5kYXRhc3RvcmUpKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgbmV3IGthKHQuYXN5bmNRdWV1ZSwgcywgZSwgbikucnVuKCk7XG4gICAgfSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIFphKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbiA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyAobmV3IFRleHRFbmNvZGVyKS5lbmNvZGUodCkgOiB0O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyB4YSh0LCBlKTtcbiAgICAgICAgfShmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIHJldHVybiBEYSh0LCBlKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiBEYShuZXcgVWludDhBcnJheSh0KSwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFJlYWRhYmxlU3RyZWFtKSByZXR1cm4gdC5nZXRSZWFkZXIoKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNvdXJjZSBvZiBgdG9CeXRlU3RyZWFtUmVhZGVyYCBoYXMgdG8gYmUgYSBBcnJheUJ1ZmZlciBvciBSZWFkYWJsZVN0cmVhbVwiKTtcbiAgICAgICAgfShuKSwgZSk7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCBHbyhlKSk7XG4gICAgdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IHtcbiAgICAgICAgYmEoYXdhaXQgR2EodCksIGksIHMpO1xuICAgIH0pKTtcbn1cblxuZnVuY3Rpb24gdGModCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRyh0KTtcbiAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmFtZWQgcXVlcnlcIiwgXCJyZWFkb25seVwiLCAodCA9PiBuLmRzLmdldE5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KGF3YWl0IFVhKHQpLCBlKSkpO1xufVxuXG5jb25zdCBlYyA9IG5ldyBNYXA7XG5cbi8qKlxuICogQW4gaW5zdGFuY2UgbWFwIHRoYXQgZW5zdXJlcyBvbmx5IG9uZSBEYXRhc3RvcmUgZXhpc3RzIHBlciBGaXJlc3RvcmVcbiAqIGluc3RhbmNlLlxuICovXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuZnVuY3Rpb24gbmModCwgZSwgbikge1xuICAgIGlmICghbikgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIGNhbm5vdCBiZSBjYWxsZWQgd2l0aCBhbiBlbXB0eSAke2V9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHR3byBib29sZWFuIG9wdGlvbnMgYXJlIG5vdCBzZXQgYXQgdGhlIHNhbWUgdGltZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIHNjKHQsIGUsIG4sIHMpIHtcbiAgICBpZiAoITAgPT09IGUgJiYgITAgPT09IHMpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYCR7dH0gYW5kICR7bn0gY2Fubm90IGJlIHVzZWQgdG9nZXRoZXIuYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGRvY3VtZW50IChpbmRpY2F0ZWQgYnkgdGhlIGZhY3QgaXQgY29udGFpbnNcbiAqIGFuIGV2ZW4gbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gaWModCkge1xuICAgIGlmICgheHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBkb2N1bWVudCByZWZlcmVuY2UuIERvY3VtZW50IHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgYHBhdGhgIHJlZmVycyB0byBhIGNvbGxlY3Rpb24gKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdFxuICogY29udGFpbnMgYW4gb2RkIG51bWJlcnMgb2Ygc2VnbWVudHMpLlxuICovIGZ1bmN0aW9uIHJjKHQpIHtcbiAgICBpZiAoeHQuaXNEb2N1bWVudEtleSh0KSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIHJlZmVyZW5jZS4gQ29sbGVjdGlvbiByZWZlcmVuY2VzIG11c3QgaGF2ZSBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzLCBidXQgJHt0fSBoYXMgJHt0Lmxlbmd0aH0uYCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGl0J3MgYSBub24tbnVsbCBvYmplY3Qgd2l0aG91dCBhIGN1c3RvbSBwcm90b3R5cGVcbiAqIChpLmUuIGV4Y2x1ZGVzIEFycmF5LCBEYXRlLCBldGMuKS5cbiAqL1xuLyoqIFJldHVybnMgYSBzdHJpbmcgZGVzY3JpYmluZyB0aGUgdHlwZSAvIHZhbHVlIG9mIHRoZSBwcm92aWRlZCBpbnB1dC4gKi9cbmZ1bmN0aW9uIG9jKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gXCJ1bmRlZmluZWRcIjtcbiAgICBpZiAobnVsbCA9PT0gdCkgcmV0dXJuIFwibnVsbFwiO1xuICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiB0KSByZXR1cm4gdC5sZW5ndGggPiAyMCAmJiAodCA9IGAke3Quc3Vic3RyaW5nKDAsIDIwKX0uLi5gKSwgXG4gICAgSlNPTi5zdHJpbmdpZnkodCk7XG4gICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgfHwgXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiBcIlwiICsgdDtcbiAgICBpZiAoXCJvYmplY3RcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSByZXR1cm4gXCJhbiBhcnJheVwiO1xuICAgICAgICB7XG4gICAgICAgICAgICBjb25zdCBlID0gXG4gICAgICAgICAgICAvKiogdHJ5IHRvIGdldCB0aGUgY29uc3RydWN0b3IgbmFtZSBmb3IgYW4gb2JqZWN0LiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICh0LmNvbnN0cnVjdG9yKSByZXR1cm4gdC5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBDYXN0cyBgb2JqYCB0byBgVGAsIG9wdGlvbmFsbHkgdW53cmFwcGluZyBDb21wYXQgdHlwZXMgdG8gZXhwb3NlIHRoZVxuICogdW5kZXJseWluZyBpbnN0YW5jZS4gVGhyb3dzIGlmICBgb2JqYCBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYFRgLlxuICpcbiAqIFRoaXMgY2FzdCBpcyB1c2VkIGluIHRoZSBMaXRlIGFuZCBGdWxsIFNESyB0byB2ZXJpZnkgaW5zdGFuY2UgdHlwZXMgZm9yXG4gKiBhcmd1bWVudHMgcGFzc2VkIHRvIHRoZSBwdWJsaWMgQVBJLlxuICogQGludGVybmFsXG4gKi8gKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUgPyBgYSBjdXN0b20gJHtlfSBvYmplY3RgIDogXCJhbiBvYmplY3RcIjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gXCJmdW5jdGlvblwiID09IHR5cGVvZiB0ID8gXCJhIGZ1bmN0aW9uXCIgOiBMKCk7XG59XG5cbmZ1bmN0aW9uIHVjKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICBpZiAoXCJfZGVsZWdhdGVcIiBpbiB0ICYmIChcbiAgICAvLyBVbndyYXAgQ29tcGF0IHR5cGVzXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB0ID0gdC5fZGVsZWdhdGUpLCAhKHQgaW5zdGFuY2VvZiBlKSkge1xuICAgICAgICBpZiAoZS5uYW1lID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJUeXBlIGRvZXMgbm90IG1hdGNoIHRoZSBleHBlY3RlZCBpbnN0YW5jZS4gRGlkIHlvdSBwYXNzIGEgcmVmZXJlbmNlIGZyb20gYSBkaWZmZXJlbnQgRmlyZXN0b3JlIFNESz9cIik7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBvYyh0KTtcbiAgICAgICAgICAgIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEV4cGVjdGVkIHR5cGUgJyR7ZS5uYW1lfScsIGJ1dCBpdCB3YXM6ICR7bn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gYWModCwgZSkge1xuICAgIGlmIChlIDw9IDApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7dH0oKSByZXF1aXJlcyBhIHBvc2l0aXZlIG51bWJlciwgYnV0IGl0IHdhczogJHtlfS5gKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8vIHNldHRpbmdzKCkgZGVmYXVsdHM6XG4vKipcbiAqIEEgY29uY3JldGUgdHlwZSBkZXNjcmliaW5nIGFsbCB0aGUgdmFsdWVzIHRoYXQgY2FuIGJlIGFwcGxpZWQgdmlhIGFcbiAqIHVzZXItc3VwcGxpZWQgYEZpcmVzdG9yZVNldHRpbmdzYCBvYmplY3QuIFRoaXMgaXMgYSBzZXBhcmF0ZSB0eXBlIHNvIHRoYXRcbiAqIGRlZmF1bHRzIGNhbiBiZSBzdXBwbGllZCBhbmQgdGhlIHZhbHVlIGNhbiBiZSBjaGVja2VkIGZvciBlcXVhbGl0eS5cbiAqL1xuY2xhc3MgY2Mge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQuaG9zdCkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5zc2wpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCBwcm92aWRlIHNzbCBvcHRpb24gaWYgaG9zdCBvcHRpb24gaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHRoaXMuaG9zdCA9IFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIsIHRoaXMuc3NsID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHRoaXMuaG9zdCA9IHQuaG9zdCwgdGhpcy5zc2wgPSBudWxsID09PSAoZSA9IHQuc3NsKSB8fCB2b2lkIDAgPT09IGUgfHwgZTtcbiAgICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbHMgPSB0LmNyZWRlbnRpYWxzLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSAhIXQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgXG4gICAgICAgIHZvaWQgMCA9PT0gdC5jYWNoZVNpemVCeXRlcykgdGhpcy5jYWNoZVNpemVCeXRlcyA9IDQxOTQzMDQwOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgtMSAhPT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0LmNhY2hlU2l6ZUJ5dGVzIDwgMTA0ODU3NikgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcImNhY2hlU2l6ZUJ5dGVzIG11c3QgYmUgYXQgbGVhc3QgMTA0ODU3NlwiKTtcbiAgICAgICAgICAgIHRoaXMuY2FjaGVTaXplQnl0ZXMgPSB0LmNhY2hlU2l6ZUJ5dGVzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9ICEhdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcsIFxuICAgICAgICB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXMsIHNjKFwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZ1wiLCB0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIFwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3QgPT09IHQuaG9zdCAmJiB0aGlzLnNzbCA9PT0gdC5zc2wgJiYgdGhpcy5jcmVkZW50aWFscyA9PT0gdC5jcmVkZW50aWFscyAmJiB0aGlzLmNhY2hlU2l6ZUJ5dGVzID09PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nICYmIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID09PSB0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyAmJiB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPT09IHQuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyAmJiB0aGlzLnVzZUZldGNoU3RyZWFtcyA9PT0gdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqLyBjbGFzcyBoYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX2F1dGhDcmVkZW50aWFscyA9IGUsIHRoaXMuX2FwcENoZWNrQ3JlZGVudGlhbHMgPSBuLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIEZpcmVzdG9yZSBvciBGaXJlc3RvcmUgTGl0ZSBpbnN0YW5jZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZmlyZXN0b3JlLWxpdGVcIiwgdGhpcy5fcGVyc2lzdGVuY2VLZXkgPSBcIihsaXRlKVwiLCB0aGlzLl9zZXR0aW5ncyA9IG5ldyBjYyh7fSksIFxuICAgICAgICB0aGlzLl9zZXR0aW5nc0Zyb3plbiA9ICExLCB0IGluc3RhbmNlb2YgdnQgPyB0aGlzLl9kYXRhYmFzZUlkID0gdCA6ICh0aGlzLl9hcHAgPSB0LCBcbiAgICAgICAgdGhpcy5fZGF0YWJhc2VJZCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5hcHBseSh0Lm9wdGlvbnMsIFsgXCJwcm9qZWN0SWRcIiBdKSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCAnXCJwcm9qZWN0SWRcIiBub3QgcHJvdmlkZWQgaW4gZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcC4nKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgdnQodC5vcHRpb25zLnByb2plY3RJZCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyAodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUge0BsaW5rIEBmaXJlYmFzZS9hcHAjRmlyZWJhc2VBcHB9IGFzc29jaWF0ZWQgd2l0aCB0aGlzIGBGaXJlc3RvcmVgIHNlcnZpY2VcbiAgICAgKiBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGFwcCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9hcHApIHRocm93IG5ldyBRKEsuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJGaXJlc3RvcmUgd2FzIG5vdCBpbml0aWFsaXplZCB1c2luZyB0aGUgRmlyZWJhc2UgU0RLLiAnYXBwJyBpcyBub3QgYXZhaWxhYmxlXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYXBwO1xuICAgIH1cbiAgICBnZXQgX2luaXRpYWxpemVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW47XG4gICAgfVxuICAgIGdldCBfdGVybWluYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgX3NldFNldHRpbmdzKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzRnJvemVuKSB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZCBhbmQgaXRzIHNldHRpbmdzIGNhbiBubyBsb25nZXIgYmUgY2hhbmdlZC4gWW91IGNhbiBvbmx5IG1vZGlmeSBzZXR0aW5ncyBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xuICAgICAgICB0aGlzLl9zZXR0aW5ncyA9IG5ldyBjYyh0KSwgdm9pZCAwICE9PSB0LmNyZWRlbnRpYWxzICYmICh0aGlzLl9hdXRoQ3JlZGVudGlhbHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBpZiAoIXQpIHJldHVybiBuZXcgejtcbiAgICAgICAgICAgIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJnYXBpXCI6XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuY2xpZW50O1xuICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSB0aGlzIHJlYWxseSBpcyBhIEdhcGkgY2xpZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVSghKFwib2JqZWN0XCIgIT0gdHlwZW9mIGUgfHwgbnVsbCA9PT0gZSB8fCAhZS5hdXRoIHx8ICFlLmF1dGguZ2V0QXV0aEhlYWRlclZhbHVlRm9yRmlyc3RQYXJ0eSkpLCBcbiAgICAgICAgICAgICAgICBuZXcgWChlLCB0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsKTtcblxuICAgICAgICAgICAgICBjYXNlIFwicHJvdmlkZXJcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5jbGllbnQ7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwibWFrZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIGZhaWxlZCBkdWUgdG8gaW52YWxpZCBjcmVkZW50aWFsIHR5cGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odC5jcmVkZW50aWFscykpO1xuICAgIH1cbiAgICBfZ2V0U2V0dGluZ3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG4gICAgX2ZyZWV6ZVNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMCwgdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9kZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXJtaW5hdGVUYXNrIHx8ICh0aGlzLl90ZXJtaW5hdGVUYXNrID0gdGhpcy5fdGVybWluYXRlKCkpLCB0aGlzLl90ZXJtaW5hdGVUYXNrO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYEZpcmVzdG9yZWAgaW5zdGFuY2UuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFwcDogdGhpcy5fYXBwLFxuICAgICAgICAgICAgZGF0YWJhc2VJZDogdGhpcy5fZGF0YWJhc2VJZCxcbiAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLl9zZXR0aW5nc1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUZXJtaW5hdGVzIGFsbCBjb21wb25lbnRzIHVzZWQgYnkgdGhpcyBjbGllbnQuIFN1YmNsYXNzZXMgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBtZXRob2QgdG8gY2xlYW4gdXAgdGhlaXIgb3duIGRlcGVuZGVuY2llcywgYnV0IG11c3QgYWxzbyBjYWxsIHRoaXNcbiAgICAgKiBtZXRob2QuXG4gICAgICpcbiAgICAgKiBPbmx5IGV2ZXIgY2FsbGVkIG9uY2UuXG4gICAgICovICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBhbGwgY29tcG9uZW50cyBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIGluc3RhbmNlLiBNdXN0IGJlIGNhbGxlZFxuICogd2hlbiB0aGUgYEZpcmVzdG9yZWAgaW5zdGFuY2UgaXMgdGVybWluYXRlZC5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IGVjLmdldCh0KTtcbiAgICAgICAgICAgIGUgJiYgKE8oXCJDb21wb25lbnRQcm92aWRlclwiLCBcIlJlbW92aW5nIERhdGFzdG9yZVwiKSwgZWMuZGVsZXRlKHQpLCBlLnRlcm1pbmF0ZSgpKTtcbiAgICAgICAgfSh0aGlzKSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBsYyh0LCBlLCBuLCBzID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCByID0gKHQgPSB1Yyh0LCBoYykpLl9nZXRTZXR0aW5ncygpO1xuICAgIGlmIChcImZpcmVzdG9yZS5nb29nbGVhcGlzLmNvbVwiICE9PSByLmhvc3QgJiYgci5ob3N0ICE9PSBlICYmICQoXCJIb3N0IGhhcyBiZWVuIHNldCBpbiBib3RoIHNldHRpbmdzKCkgYW5kIHVzZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkXCIpLCBcbiAgICB0Ll9zZXRTZXR0aW5ncyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHIpLCB7XG4gICAgICAgIGhvc3Q6IGAke2V9OiR7bn1gLFxuICAgICAgICBzc2w6ICExXG4gICAgfSkpLCBzLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgbGV0IGUsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBzLm1vY2tVc2VyVG9rZW4pIGUgPSBzLm1vY2tVc2VyVG9rZW4sIG4gPSBDLk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICBlID0gY3JlYXRlTW9ja1VzZXJUb2tlbihzLm1vY2tVc2VyVG9rZW4sIG51bGwgPT09IChpID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzLm1vY2tVc2VyVG9rZW4uc3ViIHx8IHMubW9ja1VzZXJUb2tlbi51c2VyX2lkO1xuICAgICAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgQyhyKTtcbiAgICAgICAgfVxuICAgICAgICB0Ll9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgSChuZXcgVyhlLCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBmYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBfYyh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGZjKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeWAgcmVmZXJzIHRvIGEgcXVlcnkgd2hpY2ggeW91IGNhbiByZWFkIG9yIGxpc3RlbiB0by4gWW91IGNhbiBhbHNvXG4gKiBjb25zdHJ1Y3QgcmVmaW5lZCBgUXVlcnlgIG9iamVjdHMgYnkgYWRkaW5nIGZpbHRlcnMgYW5kIG9yZGVyaW5nLlxuICovIGNsYXNzIGRjIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBsaXRlIHZlcnNpb24gb2YgdGhlIFF1ZXJ5IGNsYXNzIGluIHRoZSBtYWluIFNESy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fcXVlcnkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJxdWVyeVwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGRjKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9xdWVyeSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayBxdWVyeX0pLlxuICovIGNsYXNzIF9jIGV4dGVuZHMgZGMge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcih0LCBlLCBOZShuKSksIHRoaXMuX3BhdGggPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJjb2xsZWN0aW9uXCI7XG4gICAgfVxuICAgIC8qKiBUaGUgY29sbGVjdGlvbidzIGlkZW50aWZpZXIuICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3F1ZXJ5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBwYXRoIG9mIHRoZSByZWZlcmVuY2VkIGNvbGxlY3Rpb24gKHJlbGF0aXZlXG4gICAgICogdG8gdGhlIHJvb3Qgb2YgdGhlIGRhdGFiYXNlKS5cbiAgICAgKi8gICAgZ2V0IHBhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIHJlZmVyZW5jZSB0byB0aGUgY29udGFpbmluZyBgRG9jdW1lbnRSZWZlcmVuY2VgIGlmIHRoaXMgaXMgYVxuICAgICAqIHN1YmNvbGxlY3Rpb24uIElmIHRoaXMgaXNuJ3QgYSBzdWJjb2xsZWN0aW9uLCB0aGUgcmVmZXJlbmNlIGlzIG51bGwuXG4gICAgICovICAgIGdldCBwYXJlbnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLl9wYXRoLnBvcExhc3QoKTtcbiAgICAgICAgcmV0dXJuIHQuaXNFbXB0eSgpID8gbnVsbCA6IG5ldyBmYyh0aGlzLmZpcmVzdG9yZSwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IHh0KHQpKTtcbiAgICB9XG4gICAgd2l0aENvbnZlcnRlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgX2ModGhpcy5maXJlc3RvcmUsIHQsIHRoaXMuX3BhdGgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gd2ModCwgZSwgLi4ubikge1xuICAgIGlmICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBuYyhcImNvbGxlY3Rpb25cIiwgXCJwYXRoXCIsIGUpLCB0IGluc3RhbmNlb2YgaGMpIHtcbiAgICAgICAgY29uc3QgcyA9IF90LmZyb21TdHJpbmcoZSwgLi4ubik7XG4gICAgICAgIHJldHVybiByYyhzKSwgbmV3IF9jKHQsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgcyk7XG4gICAgfVxuICAgIHtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIGZjIHx8IHQgaW5zdGFuY2VvZiBfYykpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJFeHBlY3RlZCBmaXJzdCBhcmd1bWVudCB0byBjb2xsZWN0aW9uKCkgdG8gYmUgYSBDb2xsZWN0aW9uUmVmZXJlbmNlLCBhIERvY3VtZW50UmVmZXJlbmNlIG9yIEZpcmViYXNlRmlyZXN0b3JlXCIpO1xuICAgICAgICBjb25zdCBzID0gdC5fcGF0aC5jaGlsZChfdC5mcm9tU3RyaW5nKGUsIC4uLm4pKTtcbiAgICAgICAgcmV0dXJuIHJjKHMpLCBuZXcgX2ModC5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbn1cblxuLy8gVE9ETyhmaXJlc3RvcmVsaXRlKTogQ29uc2lkZXIgdXNpbmcgRXJyb3JGYWN0b3J5IC1cbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi8wMTMxZTFmL3BhY2thZ2VzL3V0aWwvc3JjL2Vycm9ycy50cyNMMTA2XG4vKipcbiAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgYFF1ZXJ5YCBpbnN0YW5jZSB0aGF0IGluY2x1ZGVzIGFsbCBkb2N1bWVudHMgaW4gdGhlXG4gKiBkYXRhYmFzZSB0aGF0IGFyZSBjb250YWluZWQgaW4gYSBjb2xsZWN0aW9uIG9yIHN1YmNvbGxlY3Rpb24gd2l0aCB0aGVcbiAqIGdpdmVuIGBjb2xsZWN0aW9uSWRgLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBBIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBgRmlyZXN0b3JlYCBpbnN0YW5jZS5cbiAqIEBwYXJhbSBjb2xsZWN0aW9uSWQgLSBJZGVudGlmaWVzIHRoZSBjb2xsZWN0aW9ucyB0byBxdWVyeSBvdmVyLiBFdmVyeVxuICogY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhpcyBJRCBhcyB0aGUgbGFzdCBzZWdtZW50IG9mIGl0cyBwYXRoXG4gKiB3aWxsIGJlIGluY2x1ZGVkLiBDYW5ub3QgY29udGFpbiBhIHNsYXNoLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQgYFF1ZXJ5YC5cbiAqLyBmdW5jdGlvbiBtYyh0LCBlKSB7XG4gICAgaWYgKHQgPSB1Yyh0LCBoYyksIG5jKFwiY29sbGVjdGlvbkdyb3VwXCIsIFwiY29sbGVjdGlvbiBpZFwiLCBlKSwgZS5pbmRleE9mKFwiL1wiKSA+PSAwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gSUQgJyR7ZX0nIHBhc3NlZCB0byBmdW5jdGlvbiBjb2xsZWN0aW9uR3JvdXAoKS4gQ29sbGVjdGlvbiBJRHMgbXVzdCBub3QgY29udGFpbiAnLycuYCk7XG4gICAgcmV0dXJuIG5ldyBkYyh0LCBcbiAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIFxuICAgIC8qKlxuICogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzXG4gKiB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuXG4gKi9cbiAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2UoX3QuZW1wdHlQYXRoKCksIHQpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBnYyh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIFxuICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcbiAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxuICAgIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgKGUgPSBpdC5SKCkpLCBuYyhcImRvY1wiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBoYykge1xuICAgICAgICBjb25zdCBzID0gX3QuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIGljKHMpLCBuZXcgZmModCwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IHh0KHMpKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgZmMgfHwgdCBpbnN0YW5jZW9mIF9jKSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKF90LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4gaWMocyksIG5ldyBmYyh0LmZpcmVzdG9yZSwgdCBpbnN0YW5jZW9mIF9jID8gdC5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgeHQocykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24geWModCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCAodCBpbnN0YW5jZW9mIGZjIHx8IHQgaW5zdGFuY2VvZiBfYykgJiYgKGUgaW5zdGFuY2VvZiBmYyB8fCBlIGluc3RhbmNlb2YgX2MpICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgdC5wYXRoID09PSBlLnBhdGggJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBwYyh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgaW5zdGFuY2VvZiBkYyAmJiBlIGluc3RhbmNlb2YgZGMgJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiBxZSh0Ll9xdWVyeSwgZS5fcXVlcnkpICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEljIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXG4gICAgICAgIHRoaXMuTmEgPSBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIC8vIEEgbGlzdCBvZiByZXRyeWFibGUgb3BlcmF0aW9ucy4gUmV0cnlhYmxlIG9wZXJhdGlvbnMgYXJlIHJ1biBpbiBvcmRlciBhbmRcbiAgICAgICAgLy8gcmV0cmllZCB3aXRoIGJhY2tvZmYuXG4gICAgICAgIHRoaXMua2EgPSBbXSwgXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXG4gICAgICAgIHRoaXMuTWEgPSAhMSwgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxuICAgICAgICB0aGlzLk9hID0gW10sIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIHRoaXMuRmEgPSBudWxsLCBcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXG4gICAgICAgIHRoaXMuJGEgPSAhMSwgXG4gICAgICAgIC8vIEVuYWJsZWQgZHVyaW5nIHNodXRkb3duIG9uIFNhZmFyaSB0byBwcmV2ZW50IGZ1dHVyZSBhY2Nlc3MgdG8gSW5kZXhlZERCLlxuICAgICAgICB0aGlzLkJhID0gITEsIFxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxuICAgICAgICB0aGlzLkxhID0gW10sIFxuICAgICAgICAvLyBCYWNrb2ZmIHRpbWVyIHVzZWQgdG8gc2NoZWR1bGUgcmV0cmllcyBmb3IgcmV0cnlhYmxlIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy5TbyA9IG5ldyBLbyh0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogQXN5bmNRdWV1ZVJldHJ5ICovKSwgXG4gICAgICAgIC8vIFZpc2liaWxpdHkgaGFuZGxlciB0aGF0IHRyaWdnZXJzIGFuIGltbWVkaWF0ZSByZXRyeSBvZiBhbGwgcmV0cnlhYmxlXG4gICAgICAgIC8vIG9wZXJhdGlvbnMuIE1lYW50IHRvIHNwZWVkIHVwIHJlY292ZXJ5IHdoZW4gd2UgcmVnYWluIGZpbGUgc3lzdGVtIGFjY2Vzc1xuICAgICAgICAvLyBhZnRlciBwYWdlIGNvbWVzIGludG8gZm9yZWdyb3VuZC5cbiAgICAgICAgdGhpcy5VYSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBxbygpO1xuICAgICAgICAgICAgdCAmJiBPKFwiQXN5bmNRdWV1ZVwiLCBcIlZpc2liaWxpdHkgc3RhdGUgY2hhbmdlZCB0byBcIiArIHQudmlzaWJpbGl0eVN0YXRlKSwgdGhpcy5Tby5FbygpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCB0ID0gcW8oKTtcbiAgICAgICAgdCAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQuYWRkRXZlbnRMaXN0ZW5lciAmJiB0LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuVWEpO1xuICAgIH1cbiAgICBnZXQgaXNTaHV0dGluZ0Rvd24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLk1hO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IG9wZXJhdGlvbiB0byB0aGUgcXVldWUgd2l0aG91dCB3YWl0aW5nIGZvciBpdCB0byBjb21wbGV0ZSAoaS5lLlxuICAgICAqIHdlIGlnbm9yZSB0aGUgUHJvbWlzZSByZXN1bHQpLlxuICAgICAqLyAgICBlbnF1ZXVlQW5kRm9yZ2V0KHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLmVucXVldWUodCk7XG4gICAgfVxuICAgIGVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkKHQpIHtcbiAgICAgICAgdGhpcy5xYSgpLCBcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aGlzLkdhKHQpO1xuICAgIH1cbiAgICBlbnRlclJlc3RyaWN0ZWRNb2RlKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLk1hKSB7XG4gICAgICAgICAgICB0aGlzLk1hID0gITAsIHRoaXMuQmEgPSB0IHx8ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IHFvKCk7XG4gICAgICAgICAgICBlICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgZS5yZW1vdmVFdmVudExpc3RlbmVyICYmIGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5VYSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5xdWV1ZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnFhKCksIHRoaXMuTWEpIFxuICAgICAgICAvLyBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIG5ldmVyIHJlc29sdmVzLlxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCgpID0+IHt9KSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIGRlZmVycmVkIFByb21pc2UgdGhhdCB3ZSBjYW4gcmV0dXJuIHRvIHRoZSBjYWxsZWUuIFRoaXNcbiAgICAgICAgLy8gYWxsb3dzIHVzIHRvIHJldHVybiBhIFwiaGFuZ2luZyBQcm9taXNlXCIgb25seSB0byB0aGUgY2FsbGVlIGFuZCBzdGlsbFxuICAgICAgICAvLyBhZHZhbmNlIHRoZSBxdWV1ZSBldmVuIHdoZW4gdGhlIG9wZXJhdGlvbiBpcyBub3QgcnVuLlxuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgajtcbiAgICAgICAgcmV0dXJuIHRoaXMuR2EoKCgpID0+IHRoaXMuTWEgJiYgdGhpcy5CYSA/IFByb21pc2UucmVzb2x2ZSgpIDogKHQoKS50aGVuKGUucmVzb2x2ZSwgZS5yZWplY3QpLCBcbiAgICAgICAgZS5wcm9taXNlKSkpLnRoZW4oKCgpID0+IGUucHJvbWlzZSkpO1xuICAgIH1cbiAgICBlbnF1ZXVlUmV0cnlhYmxlKHQpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5rYS5wdXNoKHQpLCB0aGlzLkthKCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJ1bnMgdGhlIG5leHQgb3BlcmF0aW9uIGZyb20gdGhlIHJldHJ5YWJsZSBxdWV1ZS4gSWYgdGhlIG9wZXJhdGlvbiBmYWlscyxcbiAgICAgKiByZXNjaGVkdWxlcyB3aXRoIGJhY2tvZmYuXG4gICAgICovICAgIGFzeW5jIEthKCkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5rYS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5rYVswXSgpLCB0aGlzLmthLnNoaWZ0KCksIHRoaXMuU28ucmVzZXQoKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIUlpKHQpKSB0aHJvdyB0O1xuIC8vIEZhaWx1cmUgd2lsbCBiZSBoYW5kbGVkIGJ5IEFzeW5jUXVldWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTyhcIkFzeW5jUXVldWVcIiwgXCJPcGVyYXRpb24gZmFpbGVkIHdpdGggcmV0cnlhYmxlIGVycm9yOiBcIiArIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5rYS5sZW5ndGggPiAwICYmIFxuICAgICAgICAgICAgLy8gSWYgdGhlcmUgYXJlIGFkZGl0aW9uYWwgb3BlcmF0aW9ucywgd2UgcmUtc2NoZWR1bGUgYHJldHJ5TmV4dE9wKClgLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBuZWNlc3NhcnkgdG8gcnVuIHJldHJ5YWJsZSBvcGVyYXRpb25zIHRoYXQgZmFpbGVkIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlaXIgaW5pdGlhbCBhdHRlbXB0IHNpbmNlIHdlIGRvbid0IGtub3cgd2hldGhlciB0aGV5IGFyZSBhbHJlYWR5XG4gICAgICAgICAgICAvLyBlbnF1ZXVlZC4gSWYsIGZvciBleGFtcGxlLCBgb3AxYCwgYG9wMmAsIGBvcDNgIGFyZSBlbnF1ZXVlZCBhbmQgYG9wMWBcbiAgICAgICAgICAgIC8vIG5lZWRzIHRvICBiZSByZS1ydW4sIHdlIHdpbGwgcnVuIGBvcDFgLCBgb3AxYCwgYG9wMmAgdXNpbmcgdGhlXG4gICAgICAgICAgICAvLyBhbHJlYWR5IGVucXVldWVkIGNhbGxzIHRvIGByZXRyeU5leHRPcCgpYC4gYG9wMygpYCB3aWxsIHRoZW4gcnVuIGluIHRoZVxuICAgICAgICAgICAgLy8gY2FsbCBzY2hlZHVsZWQgaGVyZS5cbiAgICAgICAgICAgIC8vIFNpbmNlIGBiYWNrb2ZmQW5kUnVuKClgIGNhbmNlbHMgYW4gZXhpc3RpbmcgYmFja29mZiBhbmQgc2NoZWR1bGVzIGFcbiAgICAgICAgICAgIC8vIG5ldyBiYWNrb2ZmIG9uIGV2ZXJ5IGNhbGwsIHRoZXJlIGlzIG9ubHkgZXZlciBhIHNpbmdsZSBhZGRpdGlvbmFsXG4gICAgICAgICAgICAvLyBvcGVyYXRpb24gaW4gdGhlIHF1ZXVlLlxuICAgICAgICAgICAgdGhpcy5Tby5JbygoKCkgPT4gdGhpcy5LYSgpKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgR2EodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5OYS50aGVuKCgoKSA9PiAodGhpcy4kYSA9ICEwLCB0KCkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5GYSA9IHQsIHRoaXMuJGEgPSAhMTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKlxuICogQ2hyb21lIGluY2x1ZGVzIEVycm9yLm1lc3NhZ2UgaW4gRXJyb3Iuc3RhY2suIE90aGVyIGJyb3dzZXJzIGRvIG5vdC5cbiAqIFRoaXMgcmV0dXJucyBleHBlY3RlZCBvdXRwdXQgb2YgbWVzc2FnZSArIHN0YWNrIHdoZW4gYXZhaWxhYmxlLlxuICogQHBhcmFtIGVycm9yIC0gRXJyb3Igb3IgRmlyZXN0b3JlRXJyb3JcbiAqL1xuICAgICAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gdC5tZXNzYWdlIHx8IFwiXCI7XG4gICAgICAgICAgICAgICAgdC5zdGFjayAmJiAoZSA9IHQuc3RhY2suaW5jbHVkZXModC5tZXNzYWdlKSA/IHQuc3RhY2sgOiB0Lm1lc3NhZ2UgKyBcIlxcblwiICsgdC5zdGFjayk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAodCk7XG4gICAgICAgICAgICAvLyBSZS10aHJvdyB0aGUgZXJyb3Igc28gdGhhdCB0aGlzLnRhaWwgYmVjb21lcyBhIHJlamVjdGVkIFByb21pc2UgYW5kXG4gICAgICAgICAgICAvLyBhbGwgZnVydGhlciBhdHRlbXB0cyB0byBjaGFpbiAodmlhIC50aGVuKSB3aWxsIGp1c3Qgc2hvcnQtY2lyY3VpdFxuICAgICAgICAgICAgLy8gYW5kIHJldHVybiB0aGUgcmVqZWN0ZWQgUHJvbWlzZS5cbiAgICAgICAgICAgIHRocm93IEYoXCJJTlRFUk5BTCBVTkhBTkRMRUQgRVJST1I6IFwiLCBlKSwgdDtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4gKHRoaXMuJGEgPSAhMSwgdCkpKSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuTmEgPSBlLCBlO1xuICAgIH1cbiAgICBlbnF1ZXVlQWZ0ZXJEZWxheSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMucWEoKSwgXG4gICAgICAgIC8vIEZhc3QtZm9yd2FyZCBkZWxheXMgZm9yIHRpbWVySWRzIHRoYXQgaGF2ZSBiZWVuIG92ZXJyaWRlbi5cbiAgICAgICAgdGhpcy5MYS5pbmRleE9mKHQpID4gLTEgJiYgKGUgPSAwKTtcbiAgICAgICAgY29uc3QgcyA9IGJ1LmNyZWF0ZUFuZFNjaGVkdWxlKHRoaXMsIHQsIGUsIG4sICh0ID0+IHRoaXMuUWEodCkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuT2EucHVzaChzKSwgcztcbiAgICB9XG4gICAgcWEoKSB7XG4gICAgICAgIHRoaXMuRmEgJiYgTCgpO1xuICAgIH1cbiAgICB2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCkge31cbiAgICAvKipcbiAgICAgKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHF1ZXVlZCB0YXNrcyBhcmUgZmluaXNoZWQgZXhlY3V0aW5nLiBEZWxheWVkXG4gICAgICogb3BlcmF0aW9ucyBhcmUgbm90IHJ1bi5cbiAgICAgKi8gICAgYXN5bmMgamEoKSB7XG4gICAgICAgIC8vIE9wZXJhdGlvbnMgaW4gdGhlIHF1ZXVlIHByaW9yIHRvIGRyYWluaW5nIG1heSBoYXZlIGVucXVldWVkIGFkZGl0aW9uYWxcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gS2VlcCBkcmFpbmluZyB0aGUgcXVldWUgdW50aWwgdGhlIHRhaWwgaXMgbm8gbG9uZ2VyIGFkdmFuY2VkLFxuICAgICAgICAvLyB3aGljaCBpbmRpY2F0ZXMgdGhhdCBubyBtb3JlIG5ldyBvcGVyYXRpb25zIHdlcmUgZW5xdWV1ZWQgYW5kIHRoYXQgYWxsXG4gICAgICAgIC8vIG9wZXJhdGlvbnMgd2VyZSBleGVjdXRlZC5cbiAgICAgICAgbGV0IHQ7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICAgIHQgPSB0aGlzLk5hLCBhd2FpdCB0O1xuICAgICAgICB9IHdoaWxlICh0ICE9PSB0aGlzLk5hKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBEZXRlcm1pbmUgaWYgYSBkZWxheWVkIG9wZXJhdGlvbiB3aXRoIGEgcGFydGljdWxhciBUaW1lcklkXG4gICAgICogZXhpc3RzLlxuICAgICAqLyAgICBXYSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLk9hKSBpZiAoZS50aW1lcklkID09PSB0KSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRm9yIFRlc3RzOiBSdW5zIHNvbWUgb3IgYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucyBlYXJseS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBsYXN0VGltZXJJZCAtIERlbGF5ZWQgb3BlcmF0aW9ucyB1cCB0byBhbmQgaW5jbHVkaW5nIHRoaXMgVGltZXJJZFxuICAgICAqIHdpbGwgYmUgZHJhaW5lZC4gUGFzcyBUaW1lcklkLkFsbCB0byBydW4gYWxsIGRlbGF5ZWQgb3BlcmF0aW9ucy5cbiAgICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyBvbmNlIGFsbCBvcGVyYXRpb25zIGhhdmUgYmVlbiBydW4uXG4gICAgICovICAgIHphKHQpIHtcbiAgICAgICAgLy8gTm90ZSB0aGF0IGRyYWluaW5nIG1heSBnZW5lcmF0ZSBtb3JlIGRlbGF5ZWQgb3BzLCBzbyB3ZSBkbyB0aGF0IGZpcnN0LlxuICAgICAgICByZXR1cm4gdGhpcy5qYSgpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFJ1biBvcHMgaW4gdGhlIHNhbWUgb3JkZXIgdGhleSdkIHJ1biBpZiB0aGV5IHJhbiBuYXR1cmFsbHkuXG4gICAgICAgICAgICB0aGlzLk9hLnNvcnQoKCh0LCBlKSA9PiB0LnRhcmdldFRpbWVNcyAtIGUudGFyZ2V0VGltZU1zKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5PYSkgaWYgKGUuc2tpcERlbGF5KCksIFwiYWxsXCIgLyogQWxsICovICE9PSB0ICYmIGUudGltZXJJZCA9PT0gdCkgYnJlYWs7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qYSgpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvciBUZXN0czogU2tpcCBhbGwgc3Vic2VxdWVudCBkZWxheXMgZm9yIGEgdGltZXIgaWQuXG4gICAgICovICAgIEhhKHQpIHtcbiAgICAgICAgdGhpcy5MYS5wdXNoKHQpO1xuICAgIH1cbiAgICAvKiogQ2FsbGVkIG9uY2UgYSBEZWxheWVkT3BlcmF0aW9uIGlzIHJ1biBvciBjYW5jZWxlZC4gKi8gICAgUWEodCkge1xuICAgICAgICAvLyBOT1RFOiBpbmRleE9mIC8gc2xpY2UgYXJlIE8obiksIGJ1dCBkZWxheWVkT3BlcmF0aW9ucyBpcyBleHBlY3RlZCB0byBiZSBzbWFsbC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuT2EuaW5kZXhPZih0KTtcbiAgICAgICAgdGhpcy5PYS5zcGxpY2UoZSwgMSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBUYyh0KSB7XG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgb2JqIGlzIGFuIG9iamVjdCBhbmQgY29udGFpbnMgYXQgbGVhc3Qgb25lIG9mIHRoZSBzcGVjaWZpZWRcbiAqIG1ldGhvZHMuXG4gKi9cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0KSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSB0O1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgaWYgKHQgaW4gbiAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIG5bdF0pIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUmVwcmVzZW50cyB0aGUgdGFzayBvZiBsb2FkaW5nIGEgRmlyZXN0b3JlIGJ1bmRsZS4gSXQgcHJvdmlkZXMgcHJvZ3Jlc3Mgb2YgYnVuZGxlXG4gKiBsb2FkaW5nLCBhcyB3ZWxsIGFzIHRhc2sgY29tcGxldGlvbiBhbmQgZXJyb3IgZXZlbnRzLlxuICpcbiAqIFRoZSBBUEkgaXMgY29tcGF0aWJsZSB3aXRoIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyAodCwgWyBcIm5leHRcIiwgXCJlcnJvclwiLCBcImNvbXBsZXRlXCIgXSk7XG59XG5cbmNsYXNzIEVjIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlciA9IHt9LCB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyID0gbmV3IGosIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHtcbiAgICAgICAgICAgIHRhc2tTdGF0ZTogXCJSdW5uaW5nXCIsXG4gICAgICAgICAgICB0b3RhbEJ5dGVzOiAwLFxuICAgICAgICAgICAgdG90YWxEb2N1bWVudHM6IDAsXG4gICAgICAgICAgICBieXRlc0xvYWRlZDogMCxcbiAgICAgICAgICAgIGRvY3VtZW50c0xvYWRlZDogMFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgZnVuY3Rpb25zIHRvIGxpc3RlbiB0byBidW5kbGUgbG9hZGluZyBwcm9ncmVzcyBldmVudHMuXG4gICAgICogQHBhcmFtIG5leHQgLSBDYWxsZWQgd2hlbiB0aGVyZSBpcyBhIHByb2dyZXNzIHVwZGF0ZSBmcm9tIGJ1bmRsZSBsb2FkaW5nLiBUeXBpY2FsbHkgYG5leHRgIGNhbGxzIG9jY3VyXG4gICAgICogICBlYWNoIHRpbWUgYSBGaXJlc3RvcmUgZG9jdW1lbnQgaXMgbG9hZGVkIGZyb20gdGhlIGJ1bmRsZS5cbiAgICAgKiBAcGFyYW0gZXJyb3IgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLiBUaGUgdGFzayBhYm9ydHMgYWZ0ZXIgcmVwb3J0aW5nIHRoZVxuICAgICAqICAgZXJyb3IsIGFuZCB0aGVyZSBzaG91bGQgYmUgbm8gbW9yZSB1cGRhdGVzIGFmdGVyIHRoaXMuXG4gICAgICogQHBhcmFtIGNvbXBsZXRlIC0gQ2FsbGVkIHdoZW4gdGhlIGxvYWRpbmcgdGFzayBpcyBjb21wbGV0ZS5cbiAgICAgKi8gICAgb25Qcm9ncmVzcyh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgICBuZXh0OiB0LFxuICAgICAgICAgICAgZXJyb3I6IGUsXG4gICAgICAgICAgICBjb21wbGV0ZTogblxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi5jYXRjaGAgaW50ZXJmYWNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICBjYXRjaCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnByb21pc2UuY2F0Y2godCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgdGhlIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+LnRoZW5gIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvbkZ1bGZpbGxlZCAtIENhbGxlZCBvbiB0aGUgY29tcGxldGlvbiBvZiB0aGUgbG9hZGluZyB0YXNrIHdpdGggYSBmaW5hbCBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgdXBkYXRlLlxuICAgICAqICAgVGhlIHVwZGF0ZSB3aWxsIGFsd2F5cyBoYXZlIGl0cyBgdGFza1N0YXRlYCBzZXQgdG8gYFwiU3VjY2Vzc1wiYC5cbiAgICAgKiBAcGFyYW0gb25SZWplY3RlZCAtIENhbGxlZCB3aGVuIGFuIGVycm9yIG9jY3VycyBkdXJpbmcgYnVuZGxlIGxvYWRpbmcuXG4gICAgICovICAgIHRoZW4odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLnRoZW4odCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgY29tcGxldGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi8gICAgX2NvbXBsZXRlV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVByb2dyZXNzKHQpLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuY29tcGxldGUoKSwgXG4gICAgICAgIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVzb2x2ZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTm90aWZpZXMgYWxsIG9ic2VydmVycyB0aGF0IGJ1bmRsZSBsb2FkaW5nIGhhcyBmYWlsZWQsIHdpdGggYSBwcm92aWRlZFxuICAgICAqIGBFcnJvcmAgYXMgdGhlIHJlYXNvbi5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9mYWlsV2l0aCh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcy50YXNrU3RhdGUgPSBcIkVycm9yXCIsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodGhpcy5fbGFzdFByb2dyZXNzKSwgXG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5lcnJvcih0KSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5yZWplY3QodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGEgcHJvZ3Jlc3MgdXBkYXRlIG9mIGxvYWRpbmcgYSBidW5kbGUuXG4gICAgICogQHBhcmFtIHByb2dyZXNzIC0gVGhlIG5ldyBwcm9ncmVzcy5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF91cGRhdGVQcm9ncmVzcyh0KSB7XG4gICAgICAgIHRoaXMuX2xhc3RQcm9ncmVzcyA9IHQsIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIubmV4dCAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIERPTUV4Y2VwdGlvbiBlcnJvciBjb2RlIGNvbnN0YW50cy4gKi8gY29uc3QgQWMgPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqL1xuY2xhc3MgUmMgZXh0ZW5kcyBoYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcgSWMsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCJuYW1lXCIgaW4gdCA/IHQubmFtZSA6IFwiW0RFRkFVTFRdXCI7XG4gICAgfVxuICAgIF90ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9maXJlc3RvcmVDbGllbnQgfHwgXG4gICAgICAgIC8vIFRoZSBjbGllbnQgbXVzdCBiZSBpbml0aWFsaXplZCB0byBlbnN1cmUgdGhhdCBhbGwgc3Vic2VxdWVudCBBUElcbiAgICAgICAgLy8gdXNhZ2UgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cbiAgICAgICAgdmModGhpcyksIHRoaXMuX2ZpcmVzdG9yZUNsaWVudC50ZXJtaW5hdGUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYSBuZXcgaW5zdGFuY2Ugb2Yge0BsaW5rIEZpcmVzdG9yZX0gd2l0aCB0aGUgcHJvdmlkZWQgc2V0dGluZ3MuXG4gKiBDYW4gb25seSBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbiwgaW5jbHVkaW5nXG4gKiB7QGxpbmsgZ2V0RmlyZXN0b3JlfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgZ2V0RmlyZXN0b3JlfS5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSB3aXRoIHdoaWNoIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiBiZSBhc3NvY2lhdGVkLlxuICogQHBhcmFtIHNldHRpbmdzIC0gQSBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZS5cbiAqIEByZXR1cm5zIEEgbmV3bHkgaW5pdGlhbGl6ZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gZnVuY3Rpb24gYmModCwgZSkge1xuICAgIGNvbnN0IG4gPSBfZ2V0UHJvdmlkZXIodCwgXCJmaXJlc3RvcmVcIik7XG4gICAgaWYgKG4uaXNJbml0aWFsaXplZCgpKSB7XG4gICAgICAgIGNvbnN0IHQgPSBuLmdldEltbWVkaWF0ZSgpLCBzID0gbi5nZXRPcHRpb25zKCk7XG4gICAgICAgIGlmIChkZWVwRXF1YWwocywgZSkpIHJldHVybiB0O1xuICAgICAgICB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIHdpdGggdGhlIHNhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRGaXJlc3RvcmUoKSB0byByZXR1cm4gdGhlIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuXCIpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIC0xICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIGUuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgIHJldHVybiBuLmluaXRpYWxpemUoe1xuICAgICAgICBvcHRpb25zOiBlXG4gICAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZXhpc3Rpbmcge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdGhhdCBpcyBhc3NvY2lhdGVkIHdpdGggdGhlXG4gKiBwcm92aWRlZCB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0uIElmIG5vIGluc3RhbmNlIGV4aXN0cywgaW5pdGlhbGl6ZXMgYSBuZXdcbiAqIGluc3RhbmNlIHdpdGggZGVmYXVsdCBzZXR0aW5ncy5cbiAqXG4gKiBAcGFyYW0gYXBwIC0gVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZSB0aGF0IHRoZSByZXR1cm5lZCB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgYXNzb2NpYXRlZCB3aXRoLlxuICogQHJldHVybnMgVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIG9mIHRoZSBwcm92aWRlZCBhcHAuXG4gKi8gZnVuY3Rpb24gUGMoZSA9IGdldEFwcCgpKSB7XG4gICAgcmV0dXJuIF9nZXRQcm92aWRlcihlLCBcImZpcmVzdG9yZVwiKS5nZXRJbW1lZGlhdGUoKTtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBWYyh0KSB7XG4gICAgcmV0dXJuIHQuX2ZpcmVzdG9yZUNsaWVudCB8fCB2Yyh0KSwgdC5fZmlyZXN0b3JlQ2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKSwgdC5fZmlyZXN0b3JlQ2xpZW50O1xufVxuXG5mdW5jdGlvbiB2Yyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgVnQodCwgZSwgbiwgcy5ob3N0LCBzLnNzbCwgcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgcy51c2VGZXRjaFN0cmVhbXMpO1xuICAgIH0odC5fZGF0YWJhc2VJZCwgKG51bGwgPT09IChlID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9wdGlvbnMuYXBwSWQpIHx8IFwiXCIsIHQuX3BlcnNpc3RlbmNlS2V5LCBuKTtcbiAgICB0Ll9maXJlc3RvcmVDbGllbnQgPSBuZXcgTWEodC5fYXV0aENyZWRlbnRpYWxzLCB0Ll9hcHBDaGVja0NyZWRlbnRpYWxzLCB0Ll9xdWV1ZSwgcyk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIGdldEZpcmVzdG9yZX0gb3JcbiAqIHtAbGluayBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlfS5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2UgaXRcbiAqIHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYi5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZVNldHRpbmdzIC0gT3B0aW9uYWwgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZVxuICogcGVyc2lzdGVuY2UuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnQgc3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBTYyh0LCBlKSB7XG4gICAgQmModCA9IHVjKHQsIFJjKSk7XG4gICAgY29uc3QgbiA9IFZjKHQpLCBzID0gdC5fZnJlZXplU2V0dGluZ3MoKSwgaSA9IG5ldyBTYTtcbiAgICByZXR1cm4gQ2MobiwgaSwgbmV3IFZhKGksIHMuY2FjaGVTaXplQnl0ZXMsIG51bGwgPT0gZSA/IHZvaWQgMCA6IGUuZm9yY2VPd25lcnNoaXApKTtcbn1cblxuLyoqXG4gKiBBdHRlbXB0cyB0byBlbmFibGUgbXVsdGktdGFiIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuIElmIGVuYWJsZWRcbiAqIGFjcm9zcyBhbGwgdGFicywgYWxsIG9wZXJhdGlvbnMgc2hhcmUgYWNjZXNzIHRvIGxvY2FsIHBlcnNpc3RlbmNlLCBpbmNsdWRpbmdcbiAqIHNoYXJlZCBleGVjdXRpb24gb2YgcXVlcmllcyBhbmQgbGF0ZW5jeS1jb21wZW5zYXRlZCBsb2NhbCBkb2N1bWVudCB1cGRhdGVzXG4gKiBhY3Jvc3MgYWxsIGNvbm5lY3RlZCBpbnN0YW5jZXMuXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgd2lsbCByZWplY3QgdGhlIHByb21pc2VcbiAqIGl0IHJldHVybnMuIE5vdGUgdGhhdCBldmVuIGFmdGVyIHRoaXMgZmFpbHVyZSwgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHdpbGxcbiAqIHJlbWFpbiB1c2FibGUsIGhvd2V2ZXIgb2ZmbGluZSBwZXJzaXN0ZW5jZSB3aWxsIGJlIGRpc2FibGVkLlxuICpcbiAqIFRoZXJlIGFyZSBzZXZlcmFsIHJlYXNvbnMgd2h5IHRoaXMgY2FuIGZhaWwsIHdoaWNoIGNhbiBiZSBpZGVudGlmaWVkIGJ5XG4gKiB0aGUgYGNvZGVgIG9uIHRoZSBlcnJvci5cbiAqXG4gKiAgICogZmFpbGVkLXByZWNvbmRpdGlvbjogVGhlIGFwcCBpcyBhbHJlYWR5IG9wZW4gaW4gYW5vdGhlciBicm93c2VyIHRhYiBhbmRcbiAqICAgICBtdWx0aS10YWIgaXMgbm90IGVuYWJsZWQuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGVuYWJsZSBwZXJzaXN0ZW5jZSBmb3IuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHJlcHJlc2VudHMgc3VjY2Vzc2Z1bGx5IGVuYWJsaW5nIHBlcnNpc3RlbnRcbiAqIHN0b3JhZ2UuXG4gKi8gZnVuY3Rpb24gRGModCkge1xuICAgIEJjKHQgPSB1Yyh0LCBSYykpO1xuICAgIGNvbnN0IGUgPSBWYyh0KSwgbiA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHMgPSBuZXcgU2E7XG4gICAgcmV0dXJuIENjKGUsIHMsIG5ldyB2YShzLCBuLmNhY2hlU2l6ZUJ5dGVzKSk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGJvdGggdGhlIGBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJgIGFuZCBgT25saW5lQ29tcG9uZW50UHJvdmlkZXJgLlxuICogSWYgdGhlIG9wZXJhdGlvbiBmYWlscyB3aXRoIGEgcmVjb3ZlcmFibGUgZXJyb3IgKHNlZVxuICogYGNhblJlY292ZXJGcm9tSW5kZXhlZERiRXJyb3IoKWAgYmVsb3cpLCB0aGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZWplY3RlZFxuICogYnV0IHRoZSBjbGllbnQgcmVtYWlucyB1c2FibGUuXG4gKi8gZnVuY3Rpb24gQ2ModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuZXcgajtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IE9hKHQsIG4pLCBhd2FpdCBGYSh0LCBlKSwgcy5yZXNvbHZlKCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghXG4gICAgICAgICAgICAvKipcbiAqIERlY2lkZXMgd2hldGhlciB0aGUgcHJvdmlkZWQgZXJyb3IgYWxsb3dzIHVzIHRvIGdyYWNlZnVsbHkgZGlzYWJsZVxuICogcGVyc2lzdGVuY2UgKGFzIG9wcG9zZWQgdG8gY3Jhc2hpbmcgdGhlIGNsaWVudCkuXG4gKi9cbiAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSkgcmV0dXJuIHQuY29kZSA9PT0gSy5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gSy5VTklNUExFTUVOVEVEO1xuICAgICAgICAgICAgICAgIGlmIChcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgXG4gICAgICAgICAgICAgICAgLy8gVGhlcmUgYXJlIGEgZmV3IGtub3duIGNpcmN1bXN0YW5jZXMgd2hlcmUgd2UgY2FuIG9wZW4gSW5kZXhlZERiIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHRyeWluZyB0byByZWFkL3dyaXRlIHdpbGwgZmFpbCAoZS5nLiBxdW90YSBleGNlZWRlZCkuIEZvclxuICAgICAgICAgICAgICAgIC8vIHdlbGwtdW5kZXJzdG9vZCBjYXNlcywgd2UgYXR0ZW1wdCB0byBkZXRlY3QgdGhlc2UgYW5kIHRoZW4gZ3JhY2VmdWxseVxuICAgICAgICAgICAgICAgIC8vIGZhbGwgYmFjayB0byBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgICAgICAgICAgLy8gTk9URTogUmF0aGVyIHRoYW4gY29udGludWUgdG8gYWRkIHRvIHRoaXMgbGlzdCwgd2UgY291bGQgZGVjaWRlIHRvXG4gICAgICAgICAgICAgICAgLy8gYWx3YXlzIGZhbGwgYmFjaywgd2l0aCB0aGUgcmlzayB0aGF0IHdlIG1pZ2h0IGFjY2lkZW50YWxseSBoaWRlIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIHJlcHJlc2VudGluZyBhY3R1YWwgU0RLIGJ1Z3MuXG4gICAgICAgICAgICAgICAgLy8gV2hlbiB0aGUgYnJvd3NlciBpcyBvdXQgb2YgcXVvdGEgd2UgY291bGQgZ2V0IGVpdGhlciBxdW90YSBleGNlZWRlZFxuICAgICAgICAgICAgICAgIC8vIG9yIGFuIGFib3J0ZWQgZXJyb3IgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGVycm9yIGhhcHBlbmVkIGR1cmluZ1xuICAgICAgICAgICAgICAgIC8vIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgICAgICAgICAgcmV0dXJuIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAgICAgICAgICAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgICAgICAgICAgICAgMTEgPT09IHQuY29kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENsZWFycyB0aGUgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGlzIGluY2x1ZGVzIHBlbmRpbmcgd3JpdGVzIGFuZCBjYWNoZWRcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBNdXN0IGJlIGNhbGxlZCB3aGlsZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgaXMgbm90IHN0YXJ0ZWQgKGFmdGVyIHRoZSBhcHAgaXNcbiAqIHRlcm1pbmF0ZWQgb3Igd2hlbiB0aGUgYXBwIGlzIGZpcnN0IGluaXRpYWxpemVkKS4gT24gc3RhcnR1cCwgdGhpcyBmdW5jdGlvblxuICogbXVzdCBiZSBjYWxsZWQgYmVmb3JlIG90aGVyIGZ1bmN0aW9ucyAob3RoZXIgdGhhbiB7QGxpbmtcbiAqIGluaXRpYWxpemVGaXJlc3RvcmV9IG9yIHtAbGluayBnZXRGaXJlc3RvcmV9KSkuIElmIHRoZSB7QGxpbmsgRmlyZXN0b3JlfVxuICogaW5zdGFuY2UgaXMgc3RpbGwgcnVubmluZywgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCB3aXRoIHRoZSBlcnJvciBjb2RlXG4gKiBvZiBgZmFpbGVkLXByZWNvbmRpdGlvbmAuXG4gKlxuICogTm90ZTogYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgaXMgcHJpbWFyaWx5IGludGVuZGVkIHRvIGhlbHAgd3JpdGVcbiAqIHJlbGlhYmxlIHRlc3RzIHRoYXQgdXNlIENsb3VkIEZpcmVzdG9yZS4gSXQgdXNlcyBhbiBlZmZpY2llbnQgbWVjaGFuaXNtIGZvclxuICogZHJvcHBpbmcgZXhpc3RpbmcgZGF0YSBidXQgZG9lcyBub3QgYXR0ZW1wdCB0byBzZWN1cmVseSBvdmVyd3JpdGUgb3JcbiAqIG90aGVyd2lzZSBtYWtlIGNhY2hlZCBkYXRhIHVucmVjb3ZlcmFibGUuIEZvciBhcHBsaWNhdGlvbnMgdGhhdCBhcmUgc2Vuc2l0aXZlXG4gKiB0byB0aGUgZGlzY2xvc3VyZSBvZiBjYWNoZWQgZGF0YSBpbiBiZXR3ZWVuIHVzZXIgc2Vzc2lvbnMsIHdlIHN0cm9uZ2x5XG4gKiByZWNvbW1lbmQgbm90IGVuYWJsaW5nIHBlcnNpc3RlbmNlIGF0IGFsbC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIHRvIGNsZWFyIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgcGVyc2lzdGVudCBzdG9yYWdlIGlzXG4gKiBjbGVhcmVkLiBPdGhlcndpc2UsIHRoZSBwcm9taXNlIGlzIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gKi8gKHQpKSB0aHJvdyB0O1xuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiRXJyb3IgZW5hYmxpbmcgb2ZmbGluZSBwZXJzaXN0ZW5jZS4gRmFsbGluZyBiYWNrIHRvIHBlcnNpc3RlbmNlIGRpc2FibGVkOiBcIiArIHQpLCBcbiAgICAgICAgICAgIHMucmVqZWN0KHQpO1xuICAgICAgICB9XG4gICAgfSkpLnRoZW4oKCgpID0+IHMucHJvbWlzZSkpO1xufVxuXG5mdW5jdGlvbiB4Yyh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkICYmICF0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgZSA9IG5ldyBqO1xuICAgIHJldHVybiB0Ll9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICghZ2kudnQoKSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0ICsgXCJtYWluXCI7XG4gICAgICAgICAgICAgICAgYXdhaXQgZ2kuZGVsZXRlKGUpO1xuICAgICAgICAgICAgfSh6cih0Ll9kYXRhYmFzZUlkLCB0Ll9wZXJzaXN0ZW5jZUtleSkpLCBlLnJlc29sdmUoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgZS5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9KSksIGUucHJvbWlzZTtcbn1cblxuLyoqXG4gKiBXYWl0cyB1bnRpbCBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGZvciB0aGUgYWN0aXZlIHVzZXIgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKlxuICogVGhlIHJldHVybmVkIHByb21pc2UgcmVzb2x2ZXMgaW1tZWRpYXRlbHkgaWYgdGhlcmUgYXJlIG5vIG91dHN0YW5kaW5nIHdyaXRlcy5cbiAqIE90aGVyd2lzZSwgdGhlIHByb21pc2Ugd2FpdHMgZm9yIGFsbCBwcmV2aW91c2x5IGlzc3VlZCB3cml0ZXMgKGluY2x1ZGluZ1xuICogdGhvc2Ugd3JpdHRlbiBpbiBhIHByZXZpb3VzIGFwcCBzZXNzaW9uKSwgYnV0IGl0IGRvZXMgbm90IHdhaXQgZm9yIHdyaXRlc1xuICogdGhhdCB3ZXJlIGFkZGVkIGFmdGVyIHRoZSBmdW5jdGlvbiBpcyBjYWxsZWQuIElmIHlvdSB3YW50IHRvIHdhaXQgZm9yXG4gKiBhZGRpdGlvbmFsIHdyaXRlcywgY2FsbCBgd2FpdEZvclBlbmRpbmdXcml0ZXMoKWAgYWdhaW4uXG4gKlxuICogQW55IG91dHN0YW5kaW5nIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBwcm9taXNlcyBhcmUgcmVqZWN0ZWQgZHVyaW5nIHVzZXJcbiAqIGNoYW5nZXMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgd2hpY2ggcmVzb2x2ZXMgd2hlbiBhbGwgY3VycmVudGx5IHBlbmRpbmcgd3JpdGVzIGhhdmUgYmVlblxuICogYWNrbm93bGVkZ2VkIGJ5IHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIE5jKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGo7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gc2EoYXdhaXQgR2EodCksIGUpKSksIGUucHJvbWlzZTtcbiAgICB9KFZjKHQgPSB1Yyh0LCBSYykpKTtcbn1cblxuLyoqXG4gKiBSZS1lbmFibGVzIHVzZSBvZiB0aGUgbmV0d29yayBmb3IgdGhpcyB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSBhZnRlciBhIHByaW9yXG4gKiBjYWxsIHRvIHtAbGluayBkaXNhYmxlTmV0d29ya30uXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGVuYWJsZWQuXG4gKi8gZnVuY3Rpb24ga2ModCkge1xuICAgIHJldHVybiBRYShWYyh0ID0gdWModCwgUmMpKSk7XG59XG5cbi8qKlxuICogRGlzYWJsZXMgbmV0d29yayB1c2FnZSBmb3IgdGhpcyBpbnN0YW5jZS4gSXQgY2FuIGJlIHJlLWVuYWJsZWQgdmlhIHtAbGlua1xuICogZW5hYmxlTmV0d29ya30uIFdoaWxlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkLCBhbnkgc25hcHNob3QgbGlzdGVuZXJzLFxuICogYGdldERvYygpYCBvciBgZ2V0RG9jcygpYCBjYWxscyB3aWxsIHJldHVybiByZXN1bHRzIGZyb20gY2FjaGUsIGFuZCBhbnkgd3JpdGVcbiAqIG9wZXJhdGlvbnMgd2lsbCBiZSBxdWV1ZWQgdW50aWwgdGhlIG5ldHdvcmsgaXMgcmVzdG9yZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGhhcyBiZWVuIGRpc2FibGVkLlxuICovIGZ1bmN0aW9uIE1jKHQpIHtcbiAgICByZXR1cm4gamEoVmModCA9IHVjKHQsIFJjKSkpO1xufVxuXG4vKipcbiAqIFRlcm1pbmF0ZXMgdGhlIHByb3ZpZGVkIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlLlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgYHRlcm1pbmF0ZSgpYCBvbmx5IHRoZSBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBmdW5jdGlvblxuICogbWF5IGJlIHVzZWQuIEFueSBvdGhlciBmdW5jdGlvbiB3aWxsIHRocm93IGEgYEZpcmVzdG9yZUVycm9yYC5cbiAqXG4gKiBUbyByZXN0YXJ0IGFmdGVyIHRlcm1pbmF0aW9uLCBjcmVhdGUgYSBuZXcgaW5zdGFuY2Ugb2YgRmlyZWJhc2VGaXJlc3RvcmUgd2l0aFxuICoge0BsaW5rIGdldEZpcmVzdG9yZX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gT2ModCkge1xuICAgIHJldHVybiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKHQuYXBwLCBcImZpcmVzdG9yZVwiKSwgdC5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvci5cbiAqIEBwYXJhbSBidW5kbGVEYXRhIC0gQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgYnVuZGxlIHRvIGJlIGxvYWRlZC4gVmFsaWRcbiAqIG9iamVjdHMgYXJlIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnMgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzXG4gKiB1cGRhdGVzLCBhbmQgY29tcGxldGlvbiBvciBlcnJvciBldmVudHMuIEl0IGNhbiBiZSB1c2VkIGFzIGFcbiAqIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyBmdW5jdGlvbiBGYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IFZjKHQgPSB1Yyh0LCBSYykpLCBzID0gbmV3IEVjO1xuICAgIHJldHVybiBaYShuLCB0Ll9kYXRhYmFzZUlkLCBlLCBzKSwgcztcbn1cblxuLyoqXG4gKiBSZWFkcyBhIEZpcmVzdG9yZSB7QGxpbmsgUXVlcnl9IGZyb20gbG9jYWwgY2FjaGUsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuXG4gKiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlXG4gKiBpbiBsb2NhbCBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byByZWFkIHRoZSBxdWVyeSBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIFF1ZXJ5IG9yIGBudWxsYC5cbiAqLyBmdW5jdGlvbiAkYyh0LCBlKSB7XG4gICAgcmV0dXJuIHRjKFZjKHQgPSB1Yyh0LCBSYykpLCBlKS50aGVuKChlID0+IGUgPyBuZXcgZGModCwgbnVsbCwgZS5xdWVyeSkgOiBudWxsKSk7XG59XG5cbmZ1bmN0aW9uIEJjKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgfHwgdC5fdGVybWluYXRlZCkgdGhyb3cgbmV3IFEoSy5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIHBlcnNpc3RlbmNlIGNhbiBubyBsb25nZXIgYmUgZW5hYmxlZC4gWW91IGNhbiBvbmx5IGVuYWJsZSBwZXJzaXN0ZW5jZSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRmllbGRQYXRoYCByZWZlcnMgdG8gYSBmaWVsZCBpbiBhIGRvY3VtZW50LiBUaGUgcGF0aCBtYXkgY29uc2lzdCBvZiBhXG4gKiBzaW5nbGUgZmllbGQgbmFtZSAocmVmZXJyaW5nIHRvIGEgdG9wLWxldmVsIGZpZWxkIGluIHRoZSBkb2N1bWVudCksIG9yIGFcbiAqIGxpc3Qgb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxuICpcbiAqIENyZWF0ZSBhIGBGaWVsZFBhdGhgIGJ5IHByb3ZpZGluZyBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxuICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICovXG5jbGFzcyBMYyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBGaWVsZFBhdGhgIGZyb20gdGhlIHByb3ZpZGVkIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkTmFtZXMgLSBBIGxpc3Qgb2YgZmllbGQgbmFtZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4udCkge1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyArK2UpIGlmICgwID09PSB0W2VdLmxlbmd0aCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gRmllbGQgbmFtZXMgbXVzdCBub3QgYmUgZW1wdHkuXCIpO1xuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgbXQodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEZpZWxkUGF0aGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKHQuX2ludGVybmFsUGF0aCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHNlbnRpbmVsIGBGaWVsZFBhdGhgIHRvIHJlZmVyIHRvIHRoZSBJRCBvZiBhIGRvY3VtZW50LlxuICogSXQgY2FuIGJlIHVzZWQgaW4gcXVlcmllcyB0byBzb3J0IG9yIGZpbHRlciBieSB0aGUgZG9jdW1lbnQgSUQuXG4gKi8gZnVuY3Rpb24gVWMoKSB7XG4gICAgcmV0dXJuIG5ldyBMYyhcIl9fbmFtZV9fXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhbiBhcnJheSBvZiBieXRlcy5cbiAqLyBjbGFzcyBxYyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuX2J5dGVTdHJpbmcgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGBCeXRlc2Agb2JqZWN0IGZyb20gdGhlIGdpdmVuIEJhc2U2NCBzdHJpbmcsIGNvbnZlcnRpbmcgaXQgdG9cbiAgICAgKiBieXRlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXNlNjQgLSBUaGUgQmFzZTY0IHN0cmluZyB1c2VkIHRvIGNyZWF0ZSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgcWMocHQuZnJvbUJhc2U2NFN0cmluZyh0KSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gY29uc3RydWN0IGRhdGEgZnJvbSBCYXNlNjQgc3RyaW5nOiBcIiArIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gVWludDhBcnJheS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBhcnJheSAtIFRoZSBVaW50OEFycmF5IHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxYyhwdC5mcm9tVWludDhBcnJheSh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgYXMgYSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBUaGUgQmFzZTY0LWVuY29kZWQgc3RyaW5nIGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvQmFzZTY0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b0Jhc2U2NCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB1bmRlcmx5aW5nIGJ5dGVzIGluIGEgbmV3IGBVaW50OEFycmF5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBVaW50OEFycmF5IGNyZWF0ZWQgZnJvbSB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvVWludDhBcnJheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcudG9VaW50OEFycmF5KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgQSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFwiQnl0ZXMoYmFzZTY0OiBcIiArIHRoaXMudG9CYXNlNjQoKSArIFwiKVwiO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBCeXRlc2Agb2JqZWN0IHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEJ5dGVzYCBvYmplY3QgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLmlzRXF1YWwodC5fYnl0ZVN0cmluZyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTZW50aW5lbCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aGVuIHdyaXRpbmcgZG9jdW1lbnQgZmllbGRzIHdpdGggYHNldCgpYFxuICogb3IgYHVwZGF0ZSgpYC5cbiAqLyBjbGFzcyBHYyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9tZXRob2ROYW1lIC0gVGhlIHB1YmxpYyBBUEkgZW5kcG9pbnQgdGhhdCByZXR1cm5zIHRoaXMgY2xhc3MuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIGdlb2dyYXBoaWMgbG9jYXRpb24gaW4gRmlyZXN0b3JlLiBUaGVcbiAqIGxvY2F0aW9uIGlzIHJlcHJlc2VudGVkIGFzIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIExhdGl0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstOTAsIDkwXS5cbiAqIExvbmdpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTE4MCwgMTgwXS5cbiAqLyBjbGFzcyBLYyB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgYEdlb1BvaW50YCBvYmplY3Qgd2l0aCB0aGUgcHJvdmlkZWQgbGF0aXR1ZGUgYW5kXG4gICAgICogbG9uZ2l0dWRlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cbiAgICAgKiBAcGFyYW0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBpZiAoIWlzRmluaXRlKHQpIHx8IHQgPCAtOTAgfHwgdCA+IDkwKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiTGF0aXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAsIGJ1dCB3YXM6IFwiICsgdCk7XG4gICAgICAgIGlmICghaXNGaW5pdGUoZSkgfHwgZSA8IC0xODAgfHwgZSA+IDE4MCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIkxvbmdpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLCBidXQgd2FzOiBcIiArIGUpO1xuICAgICAgICB0aGlzLl9sYXQgPSB0LCB0aGlzLl9sb25nID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhdGl0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxhdGl0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxvbmdpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgR2VvUG9pbnRgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdCA9PT0gdC5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IHQuX2xvbmc7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHZW9Qb2ludC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHRoaXMuX2xhdCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5fbG9uZ1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxuICAgICAqLyAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHJ0KHRoaXMuX2xhdCwgdC5fbGF0KSB8fCBydCh0aGlzLl9sb25nLCB0Ll9sb25nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IFFjID0gL15fXy4qX18kLztcblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBkb2N1bWVudCBkYXRhIChlLmcuIGZvciBhIHNldERhdGEgY2FsbCkuICovIGNsYXNzIGpjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZmllbGRNYXNrID8gbmV3IEFuKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKSA6IG5ldyBFbih0LCB0aGlzLmRhdGEsIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgXCJ1cGRhdGVcIiBkYXRhIChpLmUuIGZvciBhbiB1cGRhdGVEYXRhIGNhbGwpLiAqLyBjbGFzcyBXYyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gVGhlIGZpZWxkTWFzayBkb2VzIG5vdCBpbmNsdWRlIGRvY3VtZW50IHRyYW5zZm9ybXMuXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQW4odCwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gemModCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIFNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBNZXJnZVNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBVcGRhdGUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMyAvKiBBcmd1bWVudCAqLyA6XG4gICAgICBjYXNlIDQgLyogQXJyYXlBcmd1bWVudCAqLyA6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgTCgpO1xuICAgIH1cbn1cblxuLyoqIEEgXCJjb250ZXh0XCIgb2JqZWN0IHBhc3NlZCBhcm91bmQgd2hpbGUgcGFyc2luZyB1c2VyIGRhdGEuICovIGNsYXNzIEhjIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgLSBUaGUgc2V0dGluZ3MgZm9yIHRoZSBwYXJzZXIuXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgSUQgb2YgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgVmFsdWUgcHJvdG8uXG4gICAgICogQHBhcmFtIGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgLSBXaGV0aGVyIHRvIGlnbm9yZSB1bmRlZmluZWQgcHJvcGVydGllc1xuICAgICAqIHJhdGhlciB0aGFuIHRocm93LlxuICAgICAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCB0cmFuc2Zvcm1zIGVuY291bnRlcmVkXG4gICAgICogd2hpbGUgcGFyc2luZyB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgcGF0aHMgZW5jb3VudGVyZWQgd2hpbGUgcGFyc2luZ1xuICAgICAqIHRoZSBkYXRhLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXG4gICAgICogbnVsbCB0byBpbmRpY2F0ZSB0aGUgY29udGV4dCByZXByZXNlbnRzIGFueSBsb2NhdGlvbiB3aXRoaW4gYW4gYXJyYXkgKGluXG4gICAgICogd2hpY2ggY2FzZSBjZXJ0YWluIGZlYXR1cmVzIHdpbGwgbm90IHdvcmsgYW5kIGVycm9ycyB3aWxsIGJlIHNvbWV3aGF0XG4gICAgICogY29tcHJvbWlzZWQpLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IGUsIHRoaXMuTSA9IG4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IHMsIFxuICAgICAgICAvLyBNaW5vciBoYWNrOiBJZiBmaWVsZFRyYW5zZm9ybXMgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhpcyBpcyBhblxuICAgICAgICAvLyBleHRlcm5hbCBjYWxsIGFuZCB3ZSBuZWVkIHRvIHZhbGlkYXRlIHRoZSBlbnRpcmUgcGF0aC5cbiAgICAgICAgdm9pZCAwID09PSBpICYmIHRoaXMuSmEoKSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpIHx8IFtdLCB0aGlzLmZpZWxkTWFzayA9IHIgfHwgW107XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wYXRoO1xuICAgIH1cbiAgICBnZXQgWWEoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLllhO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG5ldyBjb250ZXh0IHdpdGggdGhlIHNwZWNpZmllZCBzZXR0aW5ncyBvdmVyd3JpdHRlbi4gKi8gICAgWGEodCkge1xuICAgICAgICByZXR1cm4gbmV3IEhjKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZXR0aW5ncyksIHQpLCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuTSwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xuICAgIH1cbiAgICBaYSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLlhhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICB0YzogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLmVjKHQpLCBzO1xuICAgIH1cbiAgICBuYyh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLlhhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICB0YzogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLkphKCksIHM7XG4gICAgfVxuICAgIHNjKHQpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3c7IHNvIG1ha2UgcGF0aFxuICAgICAgICAvLyB1bmRlZmluZWQuXG4gICAgICAgIHJldHVybiB0aGlzLlhhKHtcbiAgICAgICAgICAgIHBhdGg6IHZvaWQgMCxcbiAgICAgICAgICAgIHRjOiAhMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWModCkge1xuICAgICAgICByZXR1cm4gd2godCwgdGhpcy5zZXR0aW5ncy5tZXRob2ROYW1lLCB0aGlzLnNldHRpbmdzLnJjIHx8ICExLCB0aGlzLnBhdGgsIHRoaXMuc2V0dGluZ3Mub2MpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgJ2ZpZWxkUGF0aCcgd2FzIHRyYXZlcnNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgY29udGV4dC4gKi8gICAgY29udGFpbnModCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmZpZWxkTWFzay5maW5kKChlID0+IHQuaXNQcmVmaXhPZihlKSkpIHx8IHZvaWQgMCAhPT0gdGhpcy5maWVsZFRyYW5zZm9ybXMuZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZS5maWVsZCkpKTtcbiAgICB9XG4gICAgSmEoKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFJlbW92ZSBudWxsIGNoZWNrIG9uY2Ugd2UgaGF2ZSBwcm9wZXIgcGF0aHMgZm9yIGZpZWxkc1xuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAodGhpcy5wYXRoKSBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMucGF0aC5sZW5ndGg7IHQrKykgdGhpcy5lYyh0aGlzLnBhdGguZ2V0KHQpKTtcbiAgICB9XG4gICAgZWModCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHRocm93IHRoaXMuaWMoXCJEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIGlmICh6Yyh0aGlzLllhKSAmJiBRYy50ZXN0KHQpKSB0aHJvdyB0aGlzLmljKCdEb2N1bWVudCBmaWVsZHMgY2Fubm90IGJlZ2luIGFuZCBlbmQgd2l0aCBcIl9fXCInKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxuICogY2xhc3Nlcy5cbiAqLyBjbGFzcyBKYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBlLCB0aGlzLk0gPSBuIHx8IEdvKHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0b3AtbGV2ZWwgcGFyc2UgY29udGV4dC4gKi8gICAgdWModCwgZSwgbiwgcyA9ICExKSB7XG4gICAgICAgIHJldHVybiBuZXcgSGMoe1xuICAgICAgICAgICAgWWE6IHQsXG4gICAgICAgICAgICBtZXRob2ROYW1lOiBlLFxuICAgICAgICAgICAgb2M6IG4sXG4gICAgICAgICAgICBwYXRoOiBtdC5lbXB0eVBhdGgoKSxcbiAgICAgICAgICAgIHRjOiAhMSxcbiAgICAgICAgICAgIHJjOiBzXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5NLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWWModCkge1xuICAgIGNvbnN0IGUgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBuID0gR28odC5fZGF0YWJhc2VJZCk7XG4gICAgcmV0dXJuIG5ldyBKYyh0Ll9kYXRhYmFzZUlkLCAhIWUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgbik7XG59XG5cbi8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBzZXQoKSBjYWxsLiAqLyBmdW5jdGlvbiBYYyh0LCBlLCBuLCBzLCBpLCByID0ge30pIHtcbiAgICBjb25zdCBvID0gdC51YyhyLm1lcmdlIHx8IHIubWVyZ2VGaWVsZHMgPyAyIC8qIE1lcmdlU2V0ICovIDogMCAvKiBTZXQgKi8gLCBlLCBuLCBpKTtcbiAgICBsaChcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIG8sIHMpO1xuICAgIGNvbnN0IHUgPSBjaChzLCBvKTtcbiAgICBsZXQgYSwgYztcbiAgICBpZiAoci5tZXJnZSkgYSA9IG5ldyBndChvLmZpZWxkTWFzayksIGMgPSBvLmZpZWxkVHJhbnNmb3JtczsgZWxzZSBpZiAoci5tZXJnZUZpZWxkcykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByLm1lcmdlRmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gZmgoZSwgcywgbik7XG4gICAgICAgICAgICBpZiAoIW8uY29udGFpbnMoaSkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZpZWxkICcke2l9JyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLmApO1xuICAgICAgICAgICAgbWgodCwgaSkgfHwgdC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGEgPSBuZXcgZ3QodCksIGMgPSBvLmZpZWxkVHJhbnNmb3Jtcy5maWx0ZXIoKHQgPT4gYS5jb3ZlcnModC5maWVsZCkpKTtcbiAgICB9IGVsc2UgYSA9IG51bGwsIGMgPSBvLmZpZWxkVHJhbnNmb3JtcztcbiAgICByZXR1cm4gbmV3IGpjKG5ldyBYdCh1KSwgYSwgYyk7XG59XG5cbmNsYXNzIFpjIGV4dGVuZHMgR2Mge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgaWYgKDIgLyogTWVyZ2VTZXQgKi8gIT09IHQuWWEpIHRocm93IDEgLyogVXBkYXRlICovID09PSB0LllhID8gdC5pYyhgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIG9mIHlvdXIgdXBkYXRlIGRhdGFgKSA6IHQuaWMoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1gKTtcbiAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcbiAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cbiAgICAgICAgcmV0dXJuIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSwgbnVsbDtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgWmM7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjaGlsZCBjb250ZXh0IGZvciBwYXJzaW5nIFNlcmlhbGl6YWJsZUZpZWxkVmFsdWVzLlxuICpcbiAqIFRoaXMgaXMgZGlmZmVyZW50IHRoYW4gY2FsbGluZyBgUGFyc2VDb250ZXh0LmNvbnRleHRXaXRoYCBiZWNhdXNlIGl0IGtlZXBzXG4gKiB0aGUgZmllbGRUcmFuc2Zvcm1zIGFuZCBmaWVsZE1hc2sgc2VwYXJhdGUuXG4gKlxuICogVGhlIGNyZWF0ZWQgY29udGV4dCBoYXMgaXRzIGBkYXRhU291cmNlYCBzZXQgdG8gYFVzZXJEYXRhU291cmNlLkFyZ3VtZW50YC5cbiAqIEFsdGhvdWdoIHRoZXNlIHZhbHVlcyBhcmUgdXNlZCB3aXRoIHdyaXRlcywgYW55IGVsZW1lbnRzIGluIHRoZXNlIEZpZWxkVmFsdWVzXG4gKiBhcmUgbm90IGNvbnNpZGVyZWQgd3JpdGVzIHNpbmNlIHRoZXkgY2Fubm90IGNvbnRhaW4gYW55IEZpZWxkVmFsdWUgc2VudGluZWxzLFxuICogZXRjLlxuICpcbiAqIEBwYXJhbSBmaWVsZFZhbHVlIC0gVGhlIHNlbnRpbmVsIEZpZWxkVmFsdWUgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIGNoaWxkXG4gKiAgICAgY29udGV4dC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIHBhcmVudCBjb250ZXh0LlxuICogQHBhcmFtIGFycmF5RWxlbWVudCAtIFdoZXRoZXIgb3Igbm90IHRoZSBGaWVsZFZhbHVlIGhhcyBhbiBhcnJheS5cbiAqLyBmdW5jdGlvbiB0aCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBIYyh7XG4gICAgICAgIFlhOiAzIC8qIEFyZ3VtZW50ICovICxcbiAgICAgICAgb2M6IGUuc2V0dGluZ3Mub2MsXG4gICAgICAgIG1ldGhvZE5hbWU6IHQuX21ldGhvZE5hbWUsXG4gICAgICAgIHRjOiBuXG4gICAgfSwgZS5kYXRhYmFzZUlkLCBlLk0sIGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG59XG5cbmNsYXNzIGVoIGV4dGVuZHMgR2Mge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBsbih0LnBhdGgsIG5ldyBubik7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGVoO1xuICAgIH1cbn1cblxuY2xhc3MgbmggZXh0ZW5kcyBHYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5hYyA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoKHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMuYWMubWFwKCh0ID0+IGFoKHQsIGUpKSksIHMgPSBuZXcgc24obik7XG4gICAgICAgIHJldHVybiBuZXcgbG4odC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3Mgc2ggZXh0ZW5kcyBHYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5hYyA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoKHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMuYWMubWFwKCh0ID0+IGFoKHQsIGUpKSksIHMgPSBuZXcgb24obik7XG4gICAgICAgIHJldHVybiBuZXcgbG4odC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3MgaWggZXh0ZW5kcyBHYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5jYyA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBhbih0Lk0sIFllKHQuTSwgdGhpcy5jYykpO1xuICAgICAgICByZXR1cm4gbmV3IGxuKHQucGF0aCwgZSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovIGZ1bmN0aW9uIHJoKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gdC51YygxIC8qIFVwZGF0ZSAqLyAsIGUsIG4pO1xuICAgIGxoKFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgaSwgcyk7XG4gICAgY29uc3QgciA9IFtdLCBvID0gWHQuZW1wdHkoKTtcbiAgICBsdChzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgdSA9IF9oKGUsIHQsIG4pO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgcyA9IGdldE1vZHVsYXJJbnN0YW5jZShzKTtcbiAgICAgICAgY29uc3QgYSA9IGkubmModSk7XG4gICAgICAgIGlmIChzIGluc3RhbmNlb2YgWmMpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgci5wdXNoKHUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhaChzLCBhKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAoci5wdXNoKHUpLCBvLnNldCh1LCB0KSk7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgdSA9IG5ldyBndChyKTtcbiAgICByZXR1cm4gbmV3IFdjKG8sIHUsIGkuZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi8gZnVuY3Rpb24gb2godCwgZSwgbiwgcywgaSwgcikge1xuICAgIGNvbnN0IG8gPSB0LnVjKDEgLyogVXBkYXRlICovICwgZSwgbiksIHUgPSBbIGZoKGUsIHMsIG4pIF0sIGEgPSBbIGkgXTtcbiAgICBpZiAoci5sZW5ndGggJSAyICE9IDApIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLmApO1xuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgci5sZW5ndGg7IHQgKz0gMikgdS5wdXNoKGZoKGUsIHJbdF0pKSwgYS5wdXNoKHJbdCArIDFdKTtcbiAgICBjb25zdCBjID0gW10sIGggPSBYdC5lbXB0eSgpO1xuICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciB0byBwaWNrIHRoZSBsYXN0IHZhbHVlIGZvciBhIGZpZWxkIGlmIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHRoZSBmaWVsZCBtdWx0aXBsZSB0aW1lcy5cbiAgICBmb3IgKGxldCB0ID0gdS5sZW5ndGggLSAxOyB0ID49IDA7IC0tdCkgaWYgKCFtaChjLCB1W3RdKSkge1xuICAgICAgICBjb25zdCBlID0gdVt0XTtcbiAgICAgICAgbGV0IG4gPSBhW3RdO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKTtcbiAgICAgICAgY29uc3QgcyA9IG8ubmMoZSk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgWmMpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgYy5wdXNoKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhaChuLCBzKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAoYy5wdXNoKGUpLCBoLnNldChlLCB0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbCA9IG5ldyBndChjKTtcbiAgICByZXR1cm4gbmV3IFdjKGgsIGwsIG8uZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXG4gKiBib3VuZCkuXG4gKlxuICogQHBhcmFtIGFsbG93QXJyYXlzIC0gV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcbiAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXG4gKi8gZnVuY3Rpb24gdWgodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgcmV0dXJuIGFoKG4sIHQudWMocyA/IDQgLyogQXJyYXlBcmd1bWVudCAqLyA6IDMgLyogQXJndW1lbnQgKi8gLCBlKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHVzZXIgZGF0YSB0byBQcm90b2J1ZiBWYWx1ZXMuXG4gKlxuICogQHBhcmFtIGlucHV0IC0gRGF0YSB0byBiZSBwYXJzZWQuXG4gKiBAcGFyYW0gY29udGV4dCAtIEEgY29udGV4dCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHBhdGggYmVpbmcgcGFyc2VkLFxuICogdGhlIHNvdXJjZSBvZiB0aGUgZGF0YSBiZWluZyBwYXJzZWQsIGV0Yy5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcbiAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxuICovIGZ1bmN0aW9uIGFoKHQsIGUpIHtcbiAgICBpZiAoaGgoXG4gICAgLy8gVW53cmFwIHRoZSBBUEkgdHlwZSBmcm9tIHRoZSBDb21wYXQgU0RLLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBBUEkgdHlwZVxuICAgIC8vIGZyb20gZmlyZXN0b3JlLWV4cC5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIGxoKFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6XCIsIGUsIHQpLCBjaCh0LCBlKTtcbiAgICBpZiAodCBpbnN0YW5jZW9mIEdjKSBcbiAgICAvLyBGaWVsZFZhbHVlcyB1c3VhbGx5IHBhcnNlIGludG8gdHJhbnNmb3JtcyAoZXhjZXB0IGRlbGV0ZUZpZWxkKCkpXG4gICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXG4gICAgLy8gKGFzIGRvaW5nIHNvIHdpbGwgb3ZlcndyaXRlIHRoZSBmaWVsZCBkaXJlY3RseSBwcmlvciB0byB0aGUgdHJhbnNmb3JtXG4gICAgLy8gdHJ5aW5nIHRvIHRyYW5zZm9ybSBpdCkuIFNvIHdlIGRvbid0IGFkZCB0aGlzIGxvY2F0aW9uIHRvXG4gICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cbiAgICAvKipcbiAqIFwiUGFyc2VzXCIgdGhlIHByb3ZpZGVkIEZpZWxkVmFsdWVJbXBsLCBhZGRpbmcgYW55IG5lY2Vzc2FyeSB0cmFuc2Zvcm1zIHRvXG4gKiBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFNlbnRpbmVscyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCB3cml0ZXMsIGFuZCBub3Qgd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKCF6YyhlLllhKSkgdGhyb3cgZS5pYyhgJHt0Ll9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB1cGRhdGUoKSBhbmQgc2V0KClgKTtcbiAgICAgICAgaWYgKCFlLnBhdGgpIHRocm93IGUuaWMoYCR7dC5fbWV0aG9kTmFtZX0oKSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbnNpZGUgYXJyYXlzYCk7XG4gICAgICAgIGNvbnN0IG4gPSB0Ll90b0ZpZWxkVHJhbnNmb3JtKGUpO1xuICAgICAgICBuICYmIGUuZmllbGRUcmFuc2Zvcm1zLnB1c2gobik7XG4gICAgfVxuICAgIC8qKlxuICogSGVscGVyIHRvIHBhcnNlIGEgc2NhbGFyIHZhbHVlIChpLmUuIG5vdCBhbiBPYmplY3QsIEFycmF5LCBvciBGaWVsZFZhbHVlKVxuICpcbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWVcbiAqLyAodCwgZSksIG51bGw7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCAmJiBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpIFxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB1bmRlZmluZWQgaXQgY2FuIG5ldmVyIHBhcnRpY2lwYXRlIGluIHRoZSBmaWVsZE1hc2ssIHNvXG4gICAgLy8gZG9uJ3QgaGFuZGxlIHRoaXMgYmVsb3cuIElmIGBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzYCBpcyBmYWxzZSxcbiAgICAvLyBgcGFyc2VTY2FsYXJWYWx1ZWAgd2lsbCByZWplY3QgYW4gdW5kZWZpbmVkIHZhbHVlLlxuICAgIHJldHVybiBudWxsO1xuICAgIGlmIChcbiAgICAvLyBJZiBjb250ZXh0LnBhdGggaXMgbnVsbCB3ZSBhcmUgaW5zaWRlIGFuIGFycmF5IGFuZCB3ZSBkb24ndCBzdXBwb3J0XG4gICAgLy8gZmllbGQgbWFzayBwYXRocyBtb3JlIGdyYW51bGFyIHRoYW4gdGhlIHRvcC1sZXZlbCBhcnJheS5cbiAgICBlLnBhdGggJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpLCB0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogSW5jbHVkZSB0aGUgcGF0aCBjb250YWluaW5nIHRoZSBhcnJheSBpbiB0aGUgZXJyb3JcbiAgICAgICAgLy8gbWVzc2FnZS5cbiAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgSU4gcXVlcmllcywgdGhlIHBhcnNlZCBkYXRhIGlzIGFuIGFycmF5IChyZXByZXNlbnRpbmdcbiAgICAgICAgLy8gdGhlIHNldCBvZiB2YWx1ZXMgdG8gYmUgaW5jbHVkZWQgZm9yIHRoZSBJTiBxdWVyeSkgdGhhdCBtYXkgZGlyZWN0bHlcbiAgICAgICAgLy8gY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZWFjaCByZXByZXNlbnRpbmcgYW4gaW5kaXZpZHVhbCBmaWVsZFxuICAgICAgICAvLyB2YWx1ZSksIHNvIHdlIGRpc2FibGUgdGhpcyB2YWxpZGF0aW9uLlxuICAgICAgICBpZiAoZS5zZXR0aW5ncy50YyAmJiA0IC8qIEFycmF5QXJndW1lbnQgKi8gIT09IGUuWWEpIHRocm93IGUuaWMoXCJOZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGFoKGksIGUuc2MocykpO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gdCAmJiAoXG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpbmNsdWRlIG51bGxzIGluIHRoZSBhcnJheSBmb3IgZmllbGRzIGJlaW5nIHJlcGxhY2VkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxuICAgICAgICAgICAgICAgIHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgICAgICB9KSwgbi5wdXNoKHQpLCBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgPT09ICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQpIHJldHVybiBZZShlLk0sIHQpO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBib29sZWFuVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmdWYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBhdC5mcm9tRGF0ZSh0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IGNzKGUuTSwgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBhdCkge1xuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgYXQodC5zZWNvbmRzLCAxZTMgKiBNYXRoLmZsb29yKHQubmFub3NlY29uZHMgLyAxZTMpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IGNzKGUuTSwgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBLYykgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogdC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHQubG9uZ2l0dWRlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgcWMpIHJldHVybiB7XG4gICAgICAgICAgICBieXRlc1ZhbHVlOiBocyhlLk0sIHQuX2J5dGVTdHJpbmcpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgZmMpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmRhdGFiYXNlSWQsIHMgPSB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZDtcbiAgICAgICAgICAgIGlmICghcy5pc0VxdWFsKG4pKSB0aHJvdyBlLmljKGBEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0gYnV0IHNob3VsZCBiZSBmb3IgZGF0YWJhc2UgJHtuLnByb2plY3RJZH0vJHtuLmRhdGFiYXNlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VWYWx1ZTogZHModC5maXJlc3RvcmUuX2RhdGFiYXNlSWQgfHwgZS5kYXRhYmFzZUlkLCB0Ll9rZXkucGF0aClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZS5pYyhgVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6ICR7b2ModCl9YCk7XG4gICAgfVxuICAgIC8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGxvb2tzIGxpa2UgYSBKU09OIG9iamVjdCB0aGF0IHNob3VsZCBiZSBjb252ZXJ0ZWRcbiAqIGludG8gYSBzdHJ1Y3QuIE5vcm1hbCBjbGFzcy9wcm90b3R5cGUgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZVxuICogSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBhIHN0cnVjdCB2YWx1ZS4gQXJyYXlzLCBEYXRlcyxcbiAqIEdlb1BvaW50cywgZXRjLiBhcmUgbm90IGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IG1hcFxuICogdG8gc3BlY2lmaWMgRmllbGRWYWx1ZSB0eXBlcyBvdGhlciB0aGFuIE9iamVjdFZhbHVlLlxuICovICh0LCBlKTtcbn1cblxuZnVuY3Rpb24gY2godCwgZSkge1xuICAgIGNvbnN0IG4gPSB7fTtcbiAgICByZXR1cm4gZnQodCkgPyBcbiAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZW1wdHkgb2JqZWN0LCB3ZSBleHBsaWNpdGx5IGFkZCBpdCB0byB0aGUgdXBkYXRlXG4gICAgLy8gbWFzayB0byBlbnN1cmUgdGhhdCB0aGUgc2VydmVyIGNyZWF0ZXMgYSBtYXAgZW50cnkuXG4gICAgZS5wYXRoICYmIGUucGF0aC5sZW5ndGggPiAwICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSA6IGx0KHQsICgodCwgcykgPT4ge1xuICAgICAgICBjb25zdCBpID0gYWgocywgZS5aYSh0KSk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAoblt0XSA9IGkpO1xuICAgIH0pKSwge1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBoaCh0KSB7XG4gICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0IHx8IHQgaW5zdGFuY2VvZiBBcnJheSB8fCB0IGluc3RhbmNlb2YgRGF0ZSB8fCB0IGluc3RhbmNlb2YgYXQgfHwgdCBpbnN0YW5jZW9mIEtjIHx8IHQgaW5zdGFuY2VvZiBxYyB8fCB0IGluc3RhbmNlb2YgZmMgfHwgdCBpbnN0YW5jZW9mIEdjKTtcbn1cblxuZnVuY3Rpb24gbGgodCwgZSwgbikge1xuICAgIGlmICghaGgobikgfHwgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpID09PSBPYmplY3QucHJvdG90eXBlIHx8IG51bGwgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSk7XG4gICAgfShuKSkge1xuICAgICAgICBjb25zdCBzID0gb2Mobik7XG4gICAgICAgIHRocm93IFwiYW4gb2JqZWN0XCIgPT09IHMgPyBlLmljKHQgKyBcIiBhIGN1c3RvbSBvYmplY3RcIikgOiBlLmljKHQgKyBcIiBcIiArIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gZmgodCwgZSwgbikge1xuICAgIGlmICgoXG4gICAgLy8gSWYgcmVxdWlyZWQsIHJlcGxhY2UgdGhlIEZpZWxkUGF0aCBDb21wYXQgY2xhc3Mgd2l0aCB3aXRoIHRoZSBmaXJlc3RvcmUtZXhwXG4gICAgLy8gRmllbGRQYXRoLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIGluc3RhbmNlb2YgTGMpIHJldHVybiBlLl9pbnRlcm5hbFBhdGg7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBfaCh0LCBlKTtcbiAgICB0aHJvdyB3aChcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgXCIsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG59XG5cbi8qKlxuICogTWF0Y2hlcyBhbnkgY2hhcmFjdGVycyBpbiBhIGZpZWxkIHBhdGggc3RyaW5nIHRoYXQgYXJlIHJlc2VydmVkLlxuICovIGNvbnN0IGRoID0gbmV3IFJlZ0V4cChcIlt+XFxcXCovXFxcXFtcXFxcXV1cIik7XG5cbi8qKlxuICogV3JhcHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZyB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgdGhlIG1ldGhvZCB0aGF0XG4gKiB3YXMgdGhyb3duLlxuICogQHBhcmFtIG1ldGhvZE5hbWUgLSBUaGUgcHVibGljbHkgdmlzaWJsZSBtZXRob2QgbmFtZVxuICogQHBhcmFtIHBhdGggLSBUaGUgZG90LXNlcGFyYXRlZCBzdHJpbmcgZm9ybSBvZiBhIGZpZWxkIHBhdGggd2hpY2ggd2lsbCBiZVxuICogc3BsaXQgb24gZG90cy5cbiAqIEBwYXJhbSB0YXJnZXREb2MgLSBUaGUgZG9jdW1lbnQgYWdhaW5zdCB3aGljaCB0aGUgZmllbGQgcGF0aCB3aWxsIGJlXG4gKiBldmFsdWF0ZWQuXG4gKi8gZnVuY3Rpb24gX2godCwgZSwgbikge1xuICAgIGlmIChlLnNlYXJjaChkaCkgPj0gMCkgdGhyb3cgd2goYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gJ34nLCAnKicsICcvJywgJ1snLCBvciAnXSdgLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgTGMoLi4uZS5zcGxpdChcIi5cIikpLl9pbnRlcm5hbFBhdGg7XG4gICAgfSBjYXRjaCAocykge1xuICAgICAgICB0aHJvdyB3aChgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2AsIHQsIFxuICAgICAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAgICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHdoKHQsIGUsIG4sIHMsIGkpIHtcbiAgICBjb25zdCByID0gcyAmJiAhcy5pc0VtcHR5KCksIG8gPSB2b2lkIDAgIT09IGk7XG4gICAgbGV0IHUgPSBgRnVuY3Rpb24gJHtlfSgpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YWA7XG4gICAgbiAmJiAodSArPSBcIiAodmlhIGB0b0ZpcmVzdG9yZSgpYClcIiksIHUgKz0gXCIuIFwiO1xuICAgIGxldCBhID0gXCJcIjtcbiAgICByZXR1cm4gKHIgfHwgbykgJiYgKGEgKz0gXCIgKGZvdW5kXCIsIHIgJiYgKGEgKz0gYCBpbiBmaWVsZCAke3N9YCksIG8gJiYgKGEgKz0gYCBpbiBkb2N1bWVudCAke2l9YCksIFxuICAgIGEgKz0gXCIpXCIpLCBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIHUgKyB0ICsgYSk7XG59XG5cbi8qKiBDaGVja3MgYGhheXN0YWNrYCBpZiBGaWVsZFBhdGggYG5lZWRsZWAgaXMgcHJlc2VudC4gUnVucyBpbiBPKG4pLiAqLyBmdW5jdGlvbiBtaCh0LCBlKSB7XG4gICAgcmV0dXJuIHQuc29tZSgodCA9PiB0LmlzRXF1YWwoZSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBnaCB7XG4gICAgLy8gTm90ZTogVGhpcyBjbGFzcyBpcyBzdHJpcHBlZCBkb3duIHZlcnNpb24gb2YgdGhlIERvY3VtZW50U25hcHNob3QgaW5cbiAgICAvLyB0aGUgbGVnYWN5IFNESy4gVGhlIGNoYW5nZXMgYXJlOlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RNZXRhZGF0YS5cbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90T3B0aW9ucy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgdGhpcy5fZG9jdW1lbnQgPSBzLCBcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gaTtcbiAgICB9XG4gICAgLyoqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwcm92aWRlcyB0aGUgZG9jdW1lbnQncyBJRC4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGBEb2N1bWVudFJlZmVyZW5jZWAgZm9yIHRoZSBkb2N1bWVudCBpbmNsdWRlZCBpbiB0aGUgYERvY3VtZW50U25hcHNob3RgLlxuICAgICAqLyAgICBnZXQgcmVmKCkge1xuICAgICAgICByZXR1cm4gbmV3IGZjKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyLCB0aGlzLl9rZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkb2N1bWVudCBhdCB0aGUgc25hcHNob3QncyBsb2NhdGlvbiBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuX2RvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGBcbiAgICAgKiBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgeWgodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChwaChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgeWggZXh0ZW5kcyBnaCB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpYCBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBwaCh0LCBlKSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBfaCh0LCBlKSA6IGUgaW5zdGFuY2VvZiBMYyA/IGUuX2ludGVybmFsUGF0aCA6IGUuX2RlbGVnYXRlLl9pbnRlcm5hbFBhdGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1ldGFkYXRhIGFib3V0IGEgc25hcHNob3QsIGRlc2NyaWJpbmcgdGhlIHN0YXRlIG9mIHRoZSBzbmFwc2hvdC5cbiAqLyBjbGFzcyBJaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaGFzUGVuZGluZ1dyaXRlcyA9IHQsIHRoaXMuZnJvbUNhY2hlID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYFNuYXBzaG90TWV0YWRhdGFgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFNuYXBzaG90TWV0YWRhdGFgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICovICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNQZW5kaW5nV3JpdGVzID09PSB0Lmhhc1BlbmRpbmdXcml0ZXMgJiYgdGhpcy5mcm9tQ2FjaGUgPT09IHQuZnJvbUNhY2hlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXIgRmlyZXN0b3JlXG4gKiBkYXRhYmFzZS4gVGhlIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG9cbiAqIGdldCBhIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEZvciBhIGBEb2N1bWVudFNuYXBzaG90YCB0aGF0IHBvaW50cyB0byBhIG5vbi1leGlzdGluZyBkb2N1bWVudCwgYW55IGRhdGFcbiAqIGFjY2VzcyB3aWxsIHJldHVybiAndW5kZWZpbmVkJy4gWW91IGNhbiB1c2UgdGhlIGBleGlzdHMoKWAgbWV0aG9kIHRvXG4gKiBleHBsaWNpdGx5IHZlcmlmeSBhIGRvY3VtZW50J3MgZXhpc3RlbmNlLlxuICovIGNsYXNzIFRoIGV4dGVuZHMgZ2gge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yIHByb3RlY3RlZCAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgZSwgbiwgcywgciksIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2ZpcmVzdG9yZUltcGwgPSB0LCB0aGlzLm1ldGFkYXRhID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZGF0YSBleGlzdHMuIFRydWUgaWYgdGhlIGRvY3VtZW50IGV4aXN0cy5cbiAgICAgKi8gICAgZXhpc3RzKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZXhpc3RzKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYHNlcnZlclRpbWVzdGFtcCgpYCB2YWx1ZXMgdGhhdCBoYXZlIG5vdCB5ZXQgYmVlblxuICAgICAqIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgYnkgcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyBkYXRhIGlzIHJldHJpZXZlZCBmcm9tXG4gICAgICogdGhlIHNuYXBzaG90IChmb3IgZXhhbXBsZSB0aGUgZGVzaXJlZCBiZWhhdmlvciBmb3Igc2VydmVyIHRpbWVzdGFtcHMgdGhhdFxuICAgICAqIGhhdmUgbm90IHlldCBiZWVuIHNldCB0byB0aGVpciBmaW5hbCB2YWx1ZSkuXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBvciBgdW5kZWZpbmVkYCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBkb2Vzbid0IGV4aXN0LlxuICAgICAqLyAgICBkYXRhKHQgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9jb252ZXJ0ZXIpIHtcbiAgICAgICAgICAgICAgICAvLyBXZSBvbmx5IHdhbnQgdG8gdXNlIHRoZSBjb252ZXJ0ZXIgYW5kIGNyZWF0ZSBhIG5ldyBEb2N1bWVudFNuYXBzaG90XG4gICAgICAgICAgICAgICAgLy8gaWYgYSBjb252ZXJ0ZXIgaGFzIGJlZW4gcHJvdmlkZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBFaCh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9rZXksIHRoaXMuX2RvY3VtZW50LCB0aGlzLm1ldGFkYXRhLCBcbiAgICAgICAgICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb252ZXJ0ZXIuZnJvbUZpcmVzdG9yZShlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUodGhpcy5fZG9jdW1lbnQuZGF0YS52YWx1ZSwgdC5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgdGhlIGZpZWxkIHNwZWNpZmllZCBieSBgZmllbGRQYXRoYC4gUmV0dXJucyBgdW5kZWZpbmVkYCBpZiB0aGVcbiAgICAgKiBkb2N1bWVudCBvciBmaWVsZCBkb2Vzbid0IGV4aXN0LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCwgYSBgc2VydmVyVGltZXN0YW1wKClgIHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBzZXQgdG9cbiAgICAgKiBpdHMgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGUgdGhpcyBieVxuICAgICAqIHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gQW4gb3B0aW9ucyBvYmplY3QgdG8gY29uZmlndXJlIGhvdyB0aGUgZmllbGQgaXMgcmV0cmlldmVkXG4gICAgICogZnJvbSB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wc1xuICAgICAqIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBUaGUgZGF0YSBhdCB0aGUgc3BlY2lmaWVkIGZpZWxkIGxvY2F0aW9uIG9yIHVuZGVmaW5lZCBpZiBubyBzdWNoXG4gICAgICogZmllbGQgZXhpc3RzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGdldCh0LCBlID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChwaChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBuKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKG4sIGUuc2VydmVyVGltZXN0YW1wcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBjb250YWlucyBkYXRhIHJlYWQgZnJvbSBhIGRvY3VtZW50IGluIHlvdXJcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZSBhcyBwYXJ0IG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudCBpcyBndWFyYW50ZWVkIHRvIGV4aXN0XG4gKiBhbmQgaXRzIGRhdGEgY2FuIGJlIGV4dHJhY3RlZCB3aXRoIGAuZGF0YSgpYCBvciBgLmdldCg8ZmllbGQ+KWAgdG8gZ2V0IGFcbiAqIHNwZWNpZmljIGZpZWxkLlxuICpcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgb2ZmZXJzIHRoZSBzYW1lIEFQSSBzdXJmYWNlIGFzIGFcbiAqIGBEb2N1bWVudFNuYXBzaG90YC4gU2luY2UgcXVlcnkgcmVzdWx0cyBjb250YWluIG9ubHkgZXhpc3RpbmcgZG9jdW1lbnRzLCB0aGVcbiAqIGBleGlzdHNgIHByb3BlcnR5IHdpbGwgYWx3YXlzIGJlIHRydWUgYW5kIGBkYXRhKClgIHdpbGwgbmV2ZXIgcmV0dXJuXG4gKiAndW5kZWZpbmVkJy5cbiAqLyBjbGFzcyBFaCBleHRlbmRzIFRoIHtcbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIGRhdGEodCA9IHt9KSB7XG4gICAgICAgIHJldHVybiBzdXBlci5kYXRhKHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeVNuYXBzaG90YCBjb250YWlucyB6ZXJvIG9yIG1vcmUgYERvY3VtZW50U25hcHNob3RgIG9iamVjdHNcbiAqIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0cyBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnRzIGNhbiBiZSBhY2Nlc3NlZCBhcyBhblxuICogYXJyYXkgdmlhIHRoZSBgZG9jc2AgcHJvcGVydHkgb3IgZW51bWVyYXRlZCB1c2luZyB0aGUgYGZvckVhY2hgIG1ldGhvZC4gVGhlXG4gKiBudW1iZXIgb2YgZG9jdW1lbnRzIGNhbiBiZSBkZXRlcm1pbmVkIHZpYSB0aGUgYGVtcHR5YCBhbmQgYHNpemVgXG4gKiBwcm9wZXJ0aWVzLlxuICovIGNsYXNzIEFoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBlLCB0aGlzLl9zbmFwc2hvdCA9IHMsIHRoaXMubWV0YWRhdGEgPSBuZXcgSWgocy5oYXNQZW5kaW5nV3JpdGVzLCBzLmZyb21DYWNoZSksIFxuICAgICAgICB0aGlzLnF1ZXJ5ID0gbjtcbiAgICB9XG4gICAgLyoqIEFuIGFycmF5IG9mIGFsbCB0aGUgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBkb2NzKCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLmZvckVhY2goKGUgPT4gdC5wdXNoKGUpKSksIHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgc2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NuYXBzaG90LmRvY3Muc2l6ZTtcbiAgICB9XG4gICAgLyoqIFRydWUgaWYgdGhlcmUgYXJlIG5vIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLiAqLyAgICBnZXQgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVudW1lcmF0ZXMgYWxsIG9mIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIEEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIHdpdGggYSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBmb3JcbiAgICAgKiBlYWNoIGRvY3VtZW50IGluIHRoZSBzbmFwc2hvdC5cbiAgICAgKiBAcGFyYW0gdGhpc0FyZyAtIFRoZSBgdGhpc2AgYmluZGluZyBmb3IgdGhlIGNhbGxiYWNrLlxuICAgICAqLyAgICBmb3JFYWNoKHQsIGUpIHtcbiAgICAgICAgdGhpcy5fc25hcHNob3QuZG9jcy5mb3JFYWNoKChuID0+IHtcbiAgICAgICAgICAgIHQuY2FsbChlLCBuZXcgRWgodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgbi5rZXksIG4sIG5ldyBJaCh0aGlzLl9zbmFwc2hvdC5tdXRhdGVkS2V5cy5oYXMobi5rZXkpLCB0aGlzLl9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0aGlzLnF1ZXJ5LmNvbnZlcnRlcikpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGRvY3VtZW50cyBjaGFuZ2VzIHNpbmNlIHRoZSBsYXN0IHNuYXBzaG90LiBJZiB0aGlzXG4gICAgICogaXMgdGhlIGZpcnN0IHNuYXBzaG90LCBhbGwgZG9jdW1lbnRzIHdpbGwgYmUgaW4gdGhlIGxpc3QgYXMgJ2FkZGVkJ1xuICAgICAqIGNoYW5nZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIGBTbmFwc2hvdExpc3Rlbk9wdGlvbnNgIHRoYXQgY29udHJvbCB3aGV0aGVyIG1ldGFkYXRhLW9ubHlcbiAgICAgKiBjaGFuZ2VzIChpLmUuIG9ubHkgYERvY3VtZW50U25hcHNob3QubWV0YWRhdGFgIGNoYW5nZWQpIHNob3VsZCB0cmlnZ2VyXG4gICAgICogc25hcHNob3QgZXZlbnRzLlxuICAgICAqLyAgICBkb2NDaGFuZ2VzKHQgPSB7fSkge1xuICAgICAgICBjb25zdCBlID0gISF0LmluY2x1ZGVNZXRhZGF0YUNoYW5nZXM7XG4gICAgICAgIGlmIChlICYmIHRoaXMuX3NuYXBzaG90LmV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiVG8gaW5jbHVkZSBtZXRhZGF0YSBjaGFuZ2VzIHdpdGggeW91ciBkb2N1bWVudCBjaGFuZ2VzLCB5b3UgbXVzdCBhbHNvIHBhc3MgeyBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOnRydWUgfSB0byBvblNuYXBzaG90KCkuXCIpO1xuICAgICAgICByZXR1cm4gdGhpcy5fY2FjaGVkQ2hhbmdlcyAmJiB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9PT0gZSB8fCAodGhpcy5fY2FjaGVkQ2hhbmdlcyA9IFxuICAgICAgICAvKiogQ2FsY3VsYXRlcyB0aGUgYXJyYXkgb2YgYERvY3VtZW50Q2hhbmdlYHMgZm9yIGEgZ2l2ZW4gYFZpZXdTbmFwc2hvdGAuICovXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGlmICh0Ll9zbmFwc2hvdC5vbGREb2NzLmlzRW1wdHkoKSkge1xuICAgICAgICAgICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgICAgICAgICByZXR1cm4gdC5fc25hcHNob3QuZG9jQ2hhbmdlcy5tYXAoKG4gPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhZGRlZFwiLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IG5ldyBFaCh0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBuLmRvYy5rZXksIG4uZG9jLCBuZXcgSWgodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKG4uZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKSxcbiAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxuICAgICAgICAgICAgICAgICAgICBuZXdJbmRleDogZSsrXG4gICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBBIGBEb2N1bWVudFNldGAgdGhhdCBpcyB1cGRhdGVkIGluY3JlbWVudGFsbHkgYXMgY2hhbmdlcyBhcmUgYXBwbGllZCB0byB1c2VcbiAgICAgICAgICAgICAgICAvLyB0byBsb29rdXAgdGhlIGluZGV4IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSB0Ll9zbmFwc2hvdC5vbGREb2NzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9zbmFwc2hvdC5kb2NDaGFuZ2VzLmZpbHRlcigodCA9PiBlIHx8IDMgLyogTWV0YWRhdGEgKi8gIT09IHQudHlwZSkpLm1hcCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgRWgodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgZS5kb2Mua2V5LCBlLmRvYywgbmV3IEloKHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhlLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBpID0gLTEsIHIgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDAgLyogQWRkZWQgKi8gIT09IGUudHlwZSAmJiAoaSA9IG4uaW5kZXhPZihlLmRvYy5rZXkpLCBuID0gbi5kZWxldGUoZS5kb2Mua2V5KSksIFxuICAgICAgICAgICAgICAgICAgICAxIC8qIFJlbW92ZWQgKi8gIT09IGUudHlwZSAmJiAobiA9IG4uYWRkKGUuZG9jKSwgciA9IG4uaW5kZXhPZihlLmRvYy5rZXkpKSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogUmgoZS50eXBlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYzogcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZEluZGV4OiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IHJcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0odGhpcywgZSksIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID0gZSksIHRoaXMuX2NhY2hlZENoYW5nZXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBSaCh0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDAgLyogQWRkZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJhZGRlZFwiO1xuXG4gICAgICBjYXNlIDIgLyogTW9kaWZpZWQgKi8gOlxuICAgICAgY2FzZSAzIC8qIE1ldGFkYXRhICovIDpcbiAgICAgICAgcmV0dXJuIFwibW9kaWZpZWRcIjtcblxuICAgICAgY2FzZSAxIC8qIFJlbW92ZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJyZW1vdmVkXCI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBMKCk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWV4cCk6IEFkZCB0ZXN0cyBmb3Igc25hcHNob3RFcXVhbCB3aXRoIGRpZmZlcmVudCBzbmFwc2hvdFxuLy8gbWV0YWRhdGFcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqLyBmdW5jdGlvbiBiaCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBUaCAmJiBlIGluc3RhbmNlb2YgVGggPyB0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiB0Ll9rZXkuaXNFcXVhbChlLl9rZXkpICYmIChudWxsID09PSB0Ll9kb2N1bWVudCA/IG51bGwgPT09IGUuX2RvY3VtZW50IDogdC5fZG9jdW1lbnQuaXNFcXVhbChlLl9kb2N1bWVudCkpICYmIHQuX2NvbnZlcnRlciA9PT0gZS5fY29udmVydGVyIDogdCBpbnN0YW5jZW9mIEFoICYmIGUgaW5zdGFuY2VvZiBBaCAmJiAodC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgcGModC5xdWVyeSwgZS5xdWVyeSkgJiYgdC5tZXRhZGF0YS5pc0VxdWFsKGUubWV0YWRhdGEpICYmIHQuX3NuYXBzaG90LmlzRXF1YWwoZS5fc25hcHNob3QpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gUGgodCkge1xuICAgIGlmIChNZSh0KSAmJiAwID09PSB0LmV4cGxpY2l0T3JkZXJCeS5sZW5ndGgpIHRocm93IG5ldyBRKEsuVU5JTVBMRU1FTlRFRCwgXCJsaW1pdFRvTGFzdCgpIHF1ZXJpZXMgcmVxdWlyZSBzcGVjaWZ5aW5nIGF0IGxlYXN0IG9uZSBvcmRlckJ5KCkgY2xhdXNlXCIpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRmlyZXN0b3JlIHF1ZXJ5LiBgUXVlcnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSxcbiAqIHtAbGluayBvcmRlckJ5fSwge0BsaW5rIChzdGFydEF0OjEpfSwge0BsaW5rIChzdGFydEFmdGVyOjEpfSwge0BsaW5rXG4gKiBlbmRCZWZvcmU6MX0sIHtAbGluayAoZW5kQXQ6MSl9LCB7QGxpbmsgbGltaXR9IG9yIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kXG4gKiBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIHF1ZXJ5fSB0byBjcmVhdGUgYSBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdFxuICogYWxzbyBjb250YWlucyB0aGlzIGBRdWVyeUNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFZoIHt9XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgaW5zdGFuY2Ugb2Yge0BsaW5rIFF1ZXJ5fSB0aGF0IGlzIGV4dGVuZGVkIHRvIGFsc28gaW5jbHVkZVxuICogYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUge0BsaW5rIFF1ZXJ5fSBpbnN0YW5jZSB0byB1c2UgYXMgYSBiYXNlIGZvciB0aGUgbmV3IGNvbnN0cmFpbnRzLlxuICogQHBhcmFtIHF1ZXJ5Q29uc3RyYWludHMgLSBUaGUgbGlzdCBvZiB7QGxpbmsgUXVlcnlDb25zdHJhaW50fXMgdG8gYXBwbHkuXG4gKiBAdGhyb3dzIGlmIGFueSBvZiB0aGUgcHJvdmlkZWQgcXVlcnkgY29uc3RyYWludHMgY2Fubm90IGJlIGNvbWJpbmVkIHdpdGggdGhlXG4gKiBleGlzdGluZyBvciBuZXcgY29uc3RyYWludHMuXG4gKi8gZnVuY3Rpb24gdmgodCwgLi4uZSkge1xuICAgIGZvciAoY29uc3QgbiBvZiBlKSB0ID0gbi5fYXBwbHkodCk7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmNsYXNzIFNoIGV4dGVuZHMgVmgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5oYyA9IHQsIHRoaXMubGMgPSBlLCB0aGlzLmZjID0gbiwgdGhpcy50eXBlID0gXCJ3aGVyZVwiO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gWWModC5maXJlc3RvcmUpLCBuID0gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICAgICAgbGV0IHU7XG4gICAgICAgICAgICBpZiAoaS5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICBpZiAoXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovID09PSByIHx8IFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovID09PSByKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBZb3UgY2FuJ3QgcGVyZm9ybSAnJHtyfScgcXVlcmllcyBvbiBkb2N1bWVudElkKCkuYCk7XG4gICAgICAgICAgICAgICAgaWYgKFwiaW5cIiAvKiBJTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICBLaChvLCByKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgbykgZS5wdXNoKEdoKHMsIHQsIG4pKTtcbiAgICAgICAgICAgICAgICAgICAgdSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXM6IGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgdSA9IEdoKHMsIHQsIG8pO1xuICAgICAgICAgICAgfSBlbHNlIFwiaW5cIiAvKiBJTiAqLyAhPT0gciAmJiBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyAhPT0gciAmJiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAhPT0gciB8fCBLaChvLCByKSwgXG4gICAgICAgICAgICB1ID0gdWgobiwgZSwgbywgXG4gICAgICAgICAgICAvKiBhbGxvd0FycmF5cz0gKi8gXCJpblwiIC8qIElOICovID09PSByIHx8IFwibm90LWluXCIgLyogTk9UX0lOICovID09PSByKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBnZS5jcmVhdGUoaSwgciwgdSk7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLlMoKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gRmUodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBuICYmICFuLmlzRXF1YWwoZS5maWVsZCkpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICcke24udG9TdHJpbmcoKX0nIGFuZCAnJHtlLmZpZWxkLnRvU3RyaW5nKCl9J2ApO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gT2UodCk7XG4gICAgICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgUWgodCwgZS5maWVsZCwgcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmZpbHRlcnMpIGlmIChlLmluZGV4T2Yobi5vcCkgPj0gMCkgcmV0dXJuIG4ub3A7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH0odCwgXG4gICAgICAgICAgICAgICAgLyoqXG4gKiBHaXZlbiBhbiBvcGVyYXRvciwgcmV0dXJucyB0aGUgc2V0IG9mIG9wZXJhdG9ycyB0aGF0IGNhbm5vdCBiZSB1c2VkIHdpdGggaXQuXG4gKlxuICogT3BlcmF0b3JzIGluIGEgcXVlcnkgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBzZXQgb2YgcnVsZXM6XG4gKiAxLiBPbmx5IG9uZSBhcnJheSBvcGVyYXRvciBpcyBhbGxvd2VkLlxuICogMi4gT25seSBvbmUgZGlzanVuY3RpdmUgb3BlcmF0b3IgaXMgYWxsb3dlZC5cbiAqIDMuIGBOT1RfRVFVQUxgIGNhbm5vdCBiZSB1c2VkIHdpdGggYW5vdGhlciBgTk9UX0VRVUFMYCBvcGVyYXRvci5cbiAqIDQuIGBOT1RfSU5gIGNhbm5vdCBiZSB1c2VkIHdpdGggYXJyYXksIGRpc2p1bmN0aXZlLCBvciBgTk9UX0VRVUFMYCBvcGVyYXRvcnMuXG4gKlxuICogQXJyYXkgb3BlcmF0b3JzOiBgQVJSQVlfQ09OVEFJTlNgLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYFxuICogRGlzanVuY3RpdmUgb3BlcmF0b3JzOiBgSU5gLCBgQVJSQVlfQ09OVEFJTlNfQU5ZYCwgYE5PVF9JTmBcbiAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIiE9XCIgLyogTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiIT1cIiAvKiBOT1RfRVFVQUwgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWluc1wiIC8qIEFSUkFZX0NPTlRBSU5TICovICwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBBUlJBWV9DT05UQUlOU19BTlkgKi8gLCBcImluXCIgLyogSU4gKi8gLCBcIm5vdC1pblwiIC8qIE5PVF9JTiAqLyBdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyA6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBcImFycmF5LWNvbnRhaW5zXCIgLyogQVJSQVlfQ09OVEFJTlMgKi8gLCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIEFSUkFZX0NPTlRBSU5TX0FOWSAqLyAsIFwiaW5cIiAvKiBJTiAqLyAsIFwibm90LWluXCIgLyogTk9UX0lOICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogTk9UX0lOICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnNcIiAvKiBBUlJBWV9DT05UQUlOUyAqLyAsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIElOICovICwgXCJub3QtaW5cIiAvKiBOT1RfSU4gKi8gLCBcIiE9XCIgLyogTk9UX0VRVUFMICovIF07XG5cbiAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfShlLm9wKSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIFxuICAgICAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cbiAgICAgICAgICAgICAgICB0aHJvdyBuID09PSBlLm9wID8gbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXIuYCkgOiBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHdpdGggJyR7bi50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICAgICAgICAgIH0odCwgYSksIGE7XG4gICAgICAgIH0odC5fcXVlcnksIFwid2hlcmVcIiwgZSwgdC5maXJlc3RvcmUuX2RhdGFiYXNlSWQsIHRoaXMuaGMsIHRoaXMubGMsIHRoaXMuZmMpO1xuICAgICAgICByZXR1cm4gbmV3IGRjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoWyBlIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCBuLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgbikpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEge0BsaW5rIFF1ZXJ5Q29uc3RyYWludH0gdGhhdCBlbmZvcmNlcyB0aGF0IGRvY3VtZW50cyBtdXN0IGNvbnRhaW4gdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQgYW5kIHRoYXQgdGhlIHZhbHVlIHNob3VsZCBzYXRpc2Z5IHRoZSByZWxhdGlvbiBjb25zdHJhaW50XG4gKiBwcm92aWRlZC5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggdG8gY29tcGFyZVxuICogQHBhcmFtIG9wU3RyIC0gVGhlIG9wZXJhdGlvbiBzdHJpbmcgKGUuZyBcIiZsdDtcIiwgXCImbHQ7PVwiLCBcIj09XCIsIFwiJmx0O1wiLFxuICogICBcIiZsdDs9XCIsIFwiIT1cIikuXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgZm9yIGNvbXBhcmlzb25cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24gRGgodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBlLCBpID0gcGgoXCJ3aGVyZVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IFNoKGksIHMsIG4pO1xufVxuXG5jbGFzcyBDaCBleHRlbmRzIFZoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuaGMgPSB0LCB0aGlzLmRjID0gZSwgdGhpcy50eXBlID0gXCJvcmRlckJ5XCI7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5zdGFydEF0KSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgc3RhcnRBdCgpIG9yIHN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuZW5kQXQpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IFZlKGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gT2UodCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3Qgb3JkZXIgYnkuIEl0IG11c3QgbWF0Y2ggYW55IGluZXF1YWxpdHkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBGZSh0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBRaCh0LCBuLCBlLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KHQsIHMpLCBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlIGEgYEJvdW5kYCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBgQm91bmRgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcbiAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXG4gKiBwb3NpdGlvbi5cbiAqXG4gKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XG4gKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxuICogc2VydmVyIHRpbWVzdGFtcC5cbiAqLyAodC5fcXVlcnksIHRoaXMuaGMsIHRoaXMuZGMpO1xuICAgICAgICByZXR1cm4gbmV3IGRjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0ZSB0aGF0IG9yZGVyQnkgZG9lcyBub3QgbGlzdCB0aGUgc2FtZSBrZXkgdHdpY2UuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5leHBsaWNpdE9yZGVyQnkuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgbiwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IHNvcnRzIHRoZSBxdWVyeSByZXN1bHQgYnkgdGhlXG4gKiBzcGVjaWZpZWQgZmllbGQsIG9wdGlvbmFsbHkgaW4gZGVzY2VuZGluZyBvcmRlciBpbnN0ZWFkIG9mIGFzY2VuZGluZy5cbiAqXG4gKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIGZpZWxkIHRvIHNvcnQgYnkuXG4gKiBAcGFyYW0gZGlyZWN0aW9uU3RyIC0gT3B0aW9uYWwgZGlyZWN0aW9uIHRvIHNvcnQgYnkgKCdhc2MnIG9yICdkZXNjJykuIElmXG4gKiBub3Qgc3BlY2lmaWVkLCBvcmRlciB3aWxsIGJlIGFzY2VuZGluZy5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeX0uXG4gKi8gZnVuY3Rpb24geGgodCwgZSA9IFwiYXNjXCIpIHtcbiAgICBjb25zdCBuID0gZSwgcyA9IHBoKFwib3JkZXJCeVwiLCB0KTtcbiAgICByZXR1cm4gbmV3IENoKHMsIG4pO1xufVxuXG5jbGFzcyBOaCBleHRlbmRzIFZoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX2MgPSBlLCB0aGlzLndjID0gbjtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIFVlKHQuX3F1ZXJ5LCB0aGlzLl9jLCB0aGlzLndjKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgZmlyc3QgbWF0Y2hpbmcgZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIGtoKHQpIHtcbiAgICByZXR1cm4gYWMoXCJsaW1pdFwiLCB0KSwgbmV3IE5oKFwibGltaXRcIiwgdCwgXCJGXCIgLyogRmlyc3QgKi8pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlDb25zdHJhaW50fSB0aGF0IG9ubHkgcmV0dXJucyB0aGUgbGFzdCBtYXRjaGluZyBkb2N1bWVudHMuXG4gKlxuICogWW91IG11c3Qgc3BlY2lmeSBhdCBsZWFzdCBvbmUgYG9yZGVyQnlgIGNsYXVzZSBmb3IgYGxpbWl0VG9MYXN0YCBxdWVyaWVzLFxuICogb3RoZXJ3aXNlIGFuIGV4Y2VwdGlvbiB3aWxsIGJlIHRocm93biBkdXJpbmcgZXhlY3V0aW9uLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnl9LlxuICovIGZ1bmN0aW9uIE1oKHQpIHtcbiAgICByZXR1cm4gYWMoXCJsaW1pdFRvTGFzdFwiLCB0KSwgbmV3IE5oKFwibGltaXRUb0xhc3RcIiwgdCwgXCJMXCIgLyogTGFzdCAqLyk7XG59XG5cbmNsYXNzIE9oIGV4dGVuZHMgVmgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy50eXBlID0gdCwgdGhpcy5tYyA9IGUsIHRoaXMuZ2MgPSBuO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gcWgodCwgdGhpcy50eXBlLCB0aGlzLm1jLCB0aGlzLmdjKTtcbiAgICAgICAgcmV0dXJuIG5ldyBkYyh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ2UodC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCBlLCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRmgoLi4udCkge1xuICAgIHJldHVybiBuZXcgT2goXCJzdGFydEF0XCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICEwKTtcbn1cblxuZnVuY3Rpb24gJGgoLi4udCkge1xuICAgIHJldHVybiBuZXcgT2goXCJzdGFydEFmdGVyXCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICExKTtcbn1cblxuY2xhc3MgQmggZXh0ZW5kcyBWaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLm1jID0gZSwgdGhpcy5nYyA9IG47XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBxaCh0LCB0aGlzLnR5cGUsIHRoaXMubWMsIHRoaXMuZ2MpO1xuICAgICAgICByZXR1cm4gbmV3IGRjKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBDZSh0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0LmV4cGxpY2l0T3JkZXJCeS5zbGljZSgpLCB0LmZpbHRlcnMuc2xpY2UoKSwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgZSk7XG4gICAgICAgIH0odC5fcXVlcnksIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIExoKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IEJoKFwiZW5kQmVmb3JlXCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICExKTtcbn1cblxuZnVuY3Rpb24gVWgoLi4udCkge1xuICAgIHJldHVybiBuZXcgQmgoXCJlbmRBdFwiLCB0LCAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gY3JlYXRlIGEgYm91bmQgZnJvbSBhIGRvY3VtZW50IG9yIGZpZWxkcyAqLyBmdW5jdGlvbiBxaCh0LCBlLCBuLCBzKSB7XG4gICAgaWYgKG5bMF0gPSBnZXRNb2R1bGFySW5zdGFuY2UoblswXSksIG5bMF0gaW5zdGFuY2VvZiBnaCkgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgaWYgKCFzKSB0aHJvdyBuZXcgUShLLk5PVF9GT1VORCwgYENhbid0IHVzZSBhIERvY3VtZW50U25hcHNob3QgdGhhdCBkb2Vzbid0IGV4aXN0IGZvciAke259KCkuYCk7XG4gICAgICAgIGNvbnN0IHIgPSBbXTtcbiAgICAgICAgLy8gQmVjYXVzZSBwZW9wbGUgZXhwZWN0IHRvIGNvbnRpbnVlL2VuZCBhIHF1ZXJ5IGF0IHRoZSBleGFjdCBkb2N1bWVudFxuICAgICAgICAvLyBwcm92aWRlZCwgd2UgbmVlZCB0byB1c2UgdGhlIGltcGxpY2l0IHNvcnQgb3JkZXIgcmF0aGVyIHRoYW4gdGhlIGV4cGxpY2l0XG4gICAgICAgIC8vIHNvcnQgb3JkZXIsIGJlY2F1c2UgaXQncyBndWFyYW50ZWVkIHRvIGNvbnRhaW4gdGhlIGRvY3VtZW50IGtleS4gVGhhdCB3YXlcbiAgICAgICAgLy8gdGhlIHBvc2l0aW9uIGJlY29tZXMgdW5hbWJpZ3VvdXMgYW5kIHRoZSBxdWVyeSBjb250aW51ZXMvZW5kcyBleGFjdGx5IGF0XG4gICAgICAgIC8vIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gV2l0aG91dCB0aGUga2V5IChieSB1c2luZyB0aGUgZXhwbGljaXQgc29ydFxuICAgICAgICAvLyBvcmRlcnMpLCBtdWx0aXBsZSBkb2N1bWVudHMgY291bGQgbWF0Y2ggdGhlIHBvc2l0aW9uLCB5aWVsZGluZyBkdXBsaWNhdGVcbiAgICAgICAgLy8gcmVzdWx0cy5cbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgQmUodCkpIGlmIChuLmZpZWxkLmlzS2V5RmllbGQoKSkgci5wdXNoKHF0KGUsIHMua2V5KSk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMuZGF0YS5maWVsZChuLmZpZWxkKTtcbiAgICAgICAgICAgIGlmIChSdCh0KSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCAnSW52YWxpZCBxdWVyeS4gWW91IGFyZSB0cnlpbmcgdG8gc3RhcnQgb3IgZW5kIGEgcXVlcnkgdXNpbmcgYSBkb2N1bWVudCBmb3Igd2hpY2ggdGhlIGZpZWxkIFwiJyArIG4uZmllbGQgKyAnXCIgaXMgYW4gdW5jb21taXR0ZWQgc2VydmVyIHRpbWVzdGFtcC4gKFNpbmNlIHRoZSB2YWx1ZSBvZiB0aGlzIGZpZWxkIGlzIHVua25vd24sIHlvdSBjYW5ub3Qgc3RhcnQvZW5kIGEgcXVlcnkgd2l0aCBpdC4pJyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCAnJHt0fScgKHVzZWQgYXMgdGhlIG9yZGVyQnkpIGRvZXMgbm90IGV4aXN0LmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgci5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUGUociwgaSk7XG4gICAgfVxuICAgIC8qKlxuICogQ29udmVydHMgYSBsaXN0IG9mIGZpZWxkIHZhbHVlcyB0byBhIGBCb3VuZGAgZm9yIHRoZSBnaXZlbiBxdWVyeS5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBlLCBuWzBdLl9kb2N1bWVudCwgcyk7XG4gICAge1xuICAgICAgICBjb25zdCBpID0gWWModC5maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICAgICAgLy8gVXNlIGV4cGxpY2l0IG9yZGVyIGJ5J3MgYmVjYXVzZSBpdCBoYXMgdG8gbWF0Y2ggdGhlIHF1ZXJ5IHRoZSB1c2VyIG1hZGVcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0LmV4cGxpY2l0T3JkZXJCeTtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IG8ubGVuZ3RoKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBUb28gbWFueSBhcmd1bWVudHMgcHJvdmlkZWQgdG8gJHtzfSgpLiBUaGUgbnVtYmVyIG9mIGFyZ3VtZW50cyBtdXN0IGJlIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgbnVtYmVyIG9mIG9yZGVyQnkoKSBjbGF1c2VzYCk7XG4gICAgICAgICAgICBjb25zdCB1ID0gW107XG4gICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IGkubGVuZ3RoOyByKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhID0gaVtyXTtcbiAgICAgICAgICAgICAgICBpZiAob1tyXS5maWVsZC5pc0tleUZpZWxkKCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgIT0gdHlwZW9mIGEpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEV4cGVjdGVkIGEgc3RyaW5nIGZvciBkb2N1bWVudCBJRCBpbiAke3N9KCksIGJ1dCBnb3QgYSAke3R5cGVvZiBhfWApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoISRlKHQpICYmIC0xICE9PSBhLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IGJlIGEgcGxhaW4gZG9jdW1lbnQgSUQsIGJ1dCAnJHthfScgY29udGFpbnMgYSBzbGFzaC5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IHQucGF0aC5jaGlsZChfdC5mcm9tU3RyaW5nKGEpKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF4dC5pc0RvY3VtZW50S2V5KG4pKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBhbmQgb3JkZXJpbmcgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcGFzc2VkIHRvICR7c30oKSBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtufScgaXMgbm90IGJlY2F1c2UgaXQgY29udGFpbnMgYW4gb2RkIG51bWJlciBvZiBzZWdtZW50cy5gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IG5ldyB4dChuKTtcbiAgICAgICAgICAgICAgICAgICAgdS5wdXNoKHF0KGUsIGkpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdWgobiwgcywgYSk7XG4gICAgICAgICAgICAgICAgICAgIHUucHVzaCh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlKHUsIHIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUGFyc2VzIHRoZSBnaXZlbiBgZG9jdW1lbnRJZFZhbHVlYCBpbnRvIGEgYFJlZmVyZW5jZVZhbHVlYCwgdGhyb3dpbmdcbiAqIGFwcHJvcHJpYXRlIGVycm9ycyBpZiB0aGUgdmFsdWUgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBhIGBEb2N1bWVudFJlZmVyZW5jZWBcbiAqIG9yIGBzdHJpbmdgLCBvciBpZiB0aGUgc3RyaW5nIGlzIG1hbGZvcm1lZC5cbiAqLyAodC5fcXVlcnksIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCBpLCBlLCBuLCBzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEdoKHQsIGUsIG4pIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgKG4gPSBnZXRNb2R1bGFySW5zdGFuY2UobikpKSB7XG4gICAgICAgIGlmIChcIlwiID09PSBuKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyB3aXRoIGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHZhbGlkIGRvY3VtZW50IElELCBidXQgaXQgd2FzIGFuIGVtcHR5IHN0cmluZy5cIik7XG4gICAgICAgIGlmICghJGUoZSkgJiYgLTEgIT09IG4uaW5kZXhPZihcIi9cIikpIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgYSBjb2xsZWN0aW9uIGJ5IGRvY3VtZW50SWQoKSwgeW91IG11c3QgcHJvdmlkZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7bn0nIGNvbnRhaW5zIGEgJy8nIGNoYXJhY3Rlci5gKTtcbiAgICAgICAgY29uc3QgcyA9IGUucGF0aC5jaGlsZChfdC5mcm9tU3RyaW5nKG4pKTtcbiAgICAgICAgaWYgKCF4dC5pc0RvY3VtZW50S2V5KHMpKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBncm91cCBieSBkb2N1bWVudElkKCksIHRoZSB2YWx1ZSBwcm92aWRlZCBtdXN0IHJlc3VsdCBpbiBhIHZhbGlkIGRvY3VtZW50IHBhdGgsIGJ1dCAnJHtzfScgaXMgbm90IGJlY2F1c2UgaXQgaGFzIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMgKCR7cy5sZW5ndGh9KS5gKTtcbiAgICAgICAgcmV0dXJuIHF0KHQsIG5ldyB4dChzKSk7XG4gICAgfVxuICAgIGlmIChuIGluc3RhbmNlb2YgZmMpIHJldHVybiBxdCh0LCBuLl9rZXkpO1xuICAgIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBzdHJpbmcgb3IgYSBEb2N1bWVudFJlZmVyZW5jZSwgYnV0IGl0IHdhczogJHtvYyhuKX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdGhlIHZhbHVlIHBhc3NlZCBpbnRvIGEgZGlzanVuY3RpdmUgZmlsdGVyIHNhdGlzZmllcyBhbGxcbiAqIGFycmF5IHJlcXVpcmVtZW50cy5cbiAqLyBmdW5jdGlvbiBLaCh0LCBlKSB7XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHQpIHx8IDAgPT09IHQubGVuZ3RoKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIFF1ZXJ5LiBBIG5vbi1lbXB0eSBhcnJheSBpcyByZXF1aXJlZCBmb3IgJyR7ZS50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbiAgICBpZiAodC5sZW5ndGggPiAxMCkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gJyR7ZS50b1N0cmluZygpfScgZmlsdGVycyBzdXBwb3J0IGEgbWF4aW11bSBvZiAxMCBlbGVtZW50cyBpbiB0aGUgdmFsdWUgYXJyYXkuYCk7XG59XG5cbmZ1bmN0aW9uIFFoKHQsIGUsIG4pIHtcbiAgICBpZiAoIW4uaXNFcXVhbChlKSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGhhdmUgYSB3aGVyZSBmaWx0ZXIgd2l0aCBhbiBpbmVxdWFsaXR5ICg8LCA8PSwgIT0sIG5vdC1pbiwgPiwgb3IgPj0pIG9uIGZpZWxkICcke2UudG9TdHJpbmcoKX0nIGFuZCBzbyB5b3UgbXVzdCBhbHNvIHVzZSAnJHtlLnRvU3RyaW5nKCl9JyBhcyB5b3VyIGZpcnN0IGFyZ3VtZW50IHRvIG9yZGVyQnkoKSwgYnV0IHlvdXIgZmlyc3Qgb3JkZXJCeSgpIGlzIG9uIGZpZWxkICcke24udG9TdHJpbmcoKX0nIGluc3RlYWQuYCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENvbnZlcnRzIEZpcmVzdG9yZSdzIGludGVybmFsIHR5cGVzIHRvIHRoZSBKYXZhU2NyaXB0IHR5cGVzIHRoYXQgd2UgZXhwb3NlXG4gKiB0byB0aGUgdXNlci5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBqaCB7XG4gICAgY29udmVydFZhbHVlKHQsIGUgPSBcIm5vbmVcIikge1xuICAgICAgICBzd2l0Y2ggKE10KHQpKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIE51bGxWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgMSAvKiBCb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIE51bWJlclZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBFdCh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKTtcblxuICAgICAgICAgIGNhc2UgMyAvKiBUaW1lc3RhbXBWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0VGltZXN0YW1wKHQudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA0IC8qIFNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSk7XG5cbiAgICAgICAgICBjYXNlIDUgLyogU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWU7XG5cbiAgICAgICAgICBjYXNlIDYgLyogQmxvYlZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRCeXRlcyhBdCh0LmJ5dGVzVmFsdWUpKTtcblxuICAgICAgICAgIGNhc2UgNyAvKiBSZWZWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVmZXJlbmNlKHQucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA4IC8qIEdlb1BvaW50VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEdlb1BvaW50KHQuZ2VvUG9pbnRWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDkgLyogQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0QXJyYXkodC5hcnJheVZhbHVlLCBlKTtcblxuICAgICAgICAgIGNhc2UgMTAgLyogT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdCh0Lm1hcFZhbHVlLCBlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydE9iamVjdCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB7fTtcbiAgICAgICAgcmV0dXJuIGx0KHQuZmllbGRzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG5bdF0gPSB0aGlzLmNvbnZlcnRWYWx1ZShzLCBlKTtcbiAgICAgICAgfSkpLCBuO1xuICAgIH1cbiAgICBjb252ZXJ0R2VvUG9pbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IEtjKEV0KHQubGF0aXR1ZGUpLCBFdCh0LmxvbmdpdHVkZSkpO1xuICAgIH1cbiAgICBjb252ZXJ0QXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gKHQudmFsdWVzIHx8IFtdKS5tYXAoKHQgPT4gdGhpcy5jb252ZXJ0VmFsdWUodCwgZSkpKTtcbiAgICB9XG4gICAgY29udmVydFNlcnZlclRpbWVzdGFtcCh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJwcmV2aW91c1wiOlxuICAgICAgICAgICAgY29uc3QgbiA9IGJ0KHQpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IG51bGwgOiB0aGlzLmNvbnZlcnRWYWx1ZShuLCBlKTtcblxuICAgICAgICAgIGNhc2UgXCJlc3RpbWF0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydFRpbWVzdGFtcChQdCh0KSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydFRpbWVzdGFtcCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBUdCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlLnNlY29uZHMsIGUubmFub3MpO1xuICAgIH1cbiAgICBjb252ZXJ0RG9jdW1lbnRLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gX3QuZnJvbVN0cmluZyh0KTtcbiAgICAgICAgVShMcyhuKSk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgdnQobi5nZXQoMSksIG4uZ2V0KDMpKSwgaSA9IG5ldyB4dChuLnBvcEZpcnN0KDUpKTtcbiAgICAgICAgcmV0dXJuIHMuaXNFcXVhbChlKSB8fCBcbiAgICAgICAgLy8gVE9ETyhiLzY0MTMwMjAyKTogU29tZWhvdyBzdXBwb3J0IGZvcmVpZ24gcmVmZXJlbmNlcy5cbiAgICAgICAgRihgRG9jdW1lbnQgJHtpfSBjb250YWlucyBhIGRvY3VtZW50IHJlZmVyZW5jZSB3aXRoaW4gYSBkaWZmZXJlbnQgZGF0YWJhc2UgKCR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0pIHdoaWNoIGlzIG5vdCBzdXBwb3J0ZWQuIEl0IHdpbGwgYmUgdHJlYXRlZCBhcyBhIHJlZmVyZW5jZSBpbiB0aGUgY3VycmVudCBkYXRhYmFzZSAoJHtlLnByb2plY3RJZH0vJHtlLmRhdGFiYXNlfSkgaW5zdGVhZC5gKSwgXG4gICAgICAgIGk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb252ZXJ0cyBjdXN0b20gbW9kZWwgb2JqZWN0IG9mIHR5cGUgVCBpbnRvIGBEb2N1bWVudERhdGFgIGJ5IGFwcGx5aW5nIHRoZVxuICogY29udmVydGVyIGlmIGl0IGV4aXN0cy5cbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgd2hlbiBjb252ZXJ0aW5nIHVzZXIgb2JqZWN0cyB0byBgRG9jdW1lbnREYXRhYFxuICogYmVjYXVzZSB3ZSB3YW50IHRvIHByb3ZpZGUgdGhlIHVzZXIgd2l0aCBhIG1vcmUgc3BlY2lmaWMgZXJyb3IgbWVzc2FnZSBpZlxuICogdGhlaXIgYHNldCgpYCBvciBmYWlscyBkdWUgdG8gaW52YWxpZCBkYXRhIG9yaWdpbmF0aW5nIGZyb20gYSBgdG9GaXJlc3RvcmUoKWBcbiAqIGNhbGwuXG4gKi8gZnVuY3Rpb24gV2godCwgZSwgbikge1xuICAgIGxldCBzO1xuICAgIC8vIENhc3QgdG8gYGFueWAgaW4gb3JkZXIgdG8gc2F0aXNmeSB0aGUgdW5pb24gdHlwZSBjb25zdHJhaW50IG9uXG4gICAgLy8gdG9GaXJlc3RvcmUoKS5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiBzID0gdCA/IG4gJiYgKG4ubWVyZ2UgfHwgbi5tZXJnZUZpZWxkcykgPyB0LnRvRmlyZXN0b3JlKGUsIG4pIDogdC50b0ZpcmVzdG9yZShlKSA6IGUsIFxuICAgIHM7XG59XG5cbmNsYXNzIHpoIGV4dGVuZHMgamgge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBjb252ZXJ0Qnl0ZXModCkge1xuICAgICAgICByZXR1cm4gbmV3IHFjKHQpO1xuICAgIH1cbiAgICBjb252ZXJ0UmVmZXJlbmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29udmVydERvY3VtZW50S2V5KHQsIHRoaXMuZmlyZXN0b3JlLl9kYXRhYmFzZUlkKTtcbiAgICAgICAgcmV0dXJuIG5ldyBmYyh0aGlzLmZpcmVzdG9yZSwgLyogY29udmVydGVyPSAqLyBudWxsLCBlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgd3JpdGUgYmF0Y2gsIHVzZWQgdG8gcGVyZm9ybSBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gKlxuICogQSBgV3JpdGVCYXRjaGAgb2JqZWN0IGNhbiBiZSBhY3F1aXJlZCBieSBjYWxsaW5nIHtAbGluayB3cml0ZUJhdGNofS4gSXRcbiAqIHByb3ZpZGVzIG1ldGhvZHMgZm9yIGFkZGluZyB3cml0ZXMgdG8gdGhlIHdyaXRlIGJhdGNoLiBOb25lIG9mIHRoZSB3cml0ZXNcbiAqIHdpbGwgYmUgY29tbWl0dGVkIChvciB2aXNpYmxlIGxvY2FsbHkpIHVudGlsIHtAbGluayBXcml0ZUJhdGNoLmNvbW1pdH0gaXNcbiAqIGNhbGxlZC5cbiAqLyBjbGFzcyBIaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSBlLCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gWWModCk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBzID0gSmgodCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IFdoKHMuY29udmVydGVyLCBlLCBuKSwgciA9IFhjKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24ocy5fa2V5LCBfbi5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGkgPSBKaCh0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBMYyA/IG9oKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IHJoKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihpLl9rZXksIF9uLmV4aXN0cyghMCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBXcml0ZUJhdGNoYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgZSA9IEpoKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBWbihlLl9rZXksIF9uLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgUShLLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSB3cml0ZSBiYXRjaCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXIgY29tbWl0KCkgaGFzIGJlZW4gY2FsbGVkLlwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEpoKHQsIGUpIHtcbiAgICBpZiAoKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpLmZpcmVzdG9yZSAhPT0gZSkgdGhyb3cgbmV3IFEoSy5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAuXG4gKlxuICogTm90ZTogYGdldERvYygpYCBhdHRlbXB0cyB0byBwcm92aWRlIHVwLXRvLWRhdGUgZGF0YSB3aGVuIHBvc3NpYmxlIGJ5IHdhaXRpbmdcbiAqIGZvciBkYXRhIGZyb20gdGhlIHNlcnZlciwgYnV0IGl0IG1heSByZXR1cm4gY2FjaGVkIGRhdGEgb3IgZmFpbCBpZiB5b3UgYXJlXG4gKiBvZmZsaW5lIGFuZCB0aGUgc2VydmVyIGNhbm5vdCBiZSByZWFjaGVkLiBUbyBzcGVjaWZ5IHRoaXMgYmVoYXZpb3IsIGludm9rZVxuICoge0BsaW5rIGdldERvY0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBUaGUgcmVmZXJlbmNlIG9mIHRoZSBkb2N1bWVudCB0byBmZXRjaC5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovXG5mdW5jdGlvbiBZaCh0KSB7XG4gICAgdCA9IHVjKHQsIGZjKTtcbiAgICBjb25zdCBlID0gdWModC5maXJlc3RvcmUsIFJjKTtcbiAgICByZXR1cm4gemEoVmMoZSksIHQuX2tleSkudGhlbigobiA9PiBsbChlLCB0LCBuKSkpO1xufVxuXG5jbGFzcyBYaCBleHRlbmRzIGpoIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBxYyh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgZmModGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIGRvY3VtZW50IGlzIG5vdCBjdXJyZW50bHkgY2FjaGVkLlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gWmgodCkge1xuICAgIHQgPSB1Yyh0LCBmYyk7XG4gICAgY29uc3QgZSA9IHVjKHQuZmlyZXN0b3JlLCBSYyksIG4gPSBWYyhlKSwgcyA9IG5ldyBYaChlKTtcbiAgICByZXR1cm4gV2EobiwgdC5fa2V5KS50aGVuKChuID0+IG5ldyBUaChlLCBzLCB0Ll9rZXksIG4sIG5ldyBJaChudWxsICE9PSBuICYmIG4uaGFzTG9jYWxNdXRhdGlvbnMsIFxuICAgIC8qIGZyb21DYWNoZT0gKi8gITApLCB0LmNvbnZlcnRlcikpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gdGhlIHNlcnZlci5cbiAqIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIHRsKHQpIHtcbiAgICB0ID0gdWModCwgZmMpO1xuICAgIGNvbnN0IGUgPSB1Yyh0LmZpcmVzdG9yZSwgUmMpO1xuICAgIHJldHVybiB6YShWYyhlKSwgdC5fa2V5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbGwoZSwgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAuXG4gKlxuICogTm90ZTogYGdldERvY3MoKWAgYXR0ZW1wdHMgdG8gcHJvdmlkZSB1cC10by1kYXRlIGRhdGEgd2hlbiBwb3NzaWJsZSBieVxuICogd2FpdGluZyBmb3IgZGF0YSBmcm9tIHRoZSBzZXJ2ZXIsIGJ1dCBpdCBtYXkgcmV0dXJuIGNhY2hlZCBkYXRhIG9yIGZhaWwgaWZcbiAqIHlvdSBhcmUgb2ZmbGluZSBhbmQgdGhlIHNlcnZlciBjYW5ub3QgYmUgcmVhY2hlZC4gVG8gc3BlY2lmeSB0aGlzIGJlaGF2aW9yLFxuICogaW52b2tlIHtAbGluayBnZXREb2NzRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jc0Zyb21TZXJ2ZXJ9LlxuICpcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgd2lsbCBiZSByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRzIG9mIHRoZSBxdWVyeS5cbiAqLyBmdW5jdGlvbiBlbCh0KSB7XG4gICAgdCA9IHVjKHQsIGRjKTtcbiAgICBjb25zdCBlID0gdWModC5maXJlc3RvcmUsIFJjKSwgbiA9IFZjKGUpLCBzID0gbmV3IFhoKGUpO1xuICAgIHJldHVybiBQaCh0Ll9xdWVyeSksIEphKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBBaChlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIGNhY2hlLlxuICogUmV0dXJucyBhbiBlcnJvciBpZiB0aGUgZG9jdW1lbnQgaXMgbm90IGN1cnJlbnRseSBjYWNoZWQuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIG5sKHQpIHtcbiAgICB0ID0gdWModCwgZGMpO1xuICAgIGNvbnN0IGUgPSB1Yyh0LmZpcmVzdG9yZSwgUmMpLCBuID0gVmMoZSksIHMgPSBuZXcgWGgoZSk7XG4gICAgcmV0dXJuIEhhKG4sIHQuX3F1ZXJ5KS50aGVuKChuID0+IG5ldyBBaChlLCBzLCB0LCBuKSkpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBxdWVyeSBhbmQgcmV0dXJucyB0aGUgcmVzdWx0cyBhcyBhIGBRdWVyeVNuYXBzaG90YCBmcm9tIHRoZVxuICogc2VydmVyLiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCB3aWxsIGJlIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIHF1ZXJ5LlxuICovIGZ1bmN0aW9uIHNsKHQpIHtcbiAgICB0ID0gdWModCwgZGMpO1xuICAgIGNvbnN0IGUgPSB1Yyh0LmZpcmVzdG9yZSwgUmMpLCBuID0gVmMoZSksIHMgPSBuZXcgWGgoZSk7XG4gICAgcmV0dXJuIEphKG4sIHQuX3F1ZXJ5LCB7XG4gICAgICAgIHNvdXJjZTogXCJzZXJ2ZXJcIlxuICAgIH0pLnRoZW4oKG4gPT4gbmV3IEFoKGUsIHMsIHQsIG4pKSk7XG59XG5cbmZ1bmN0aW9uIGlsKHQsIGUsIG4pIHtcbiAgICB0ID0gdWModCwgZmMpO1xuICAgIGNvbnN0IHMgPSB1Yyh0LmZpcmVzdG9yZSwgUmMpLCBpID0gV2godC5jb252ZXJ0ZXIsIGUsIG4pO1xuICAgIHJldHVybiBobChzLCBbIFhjKFljKHMpLCBcInNldERvY1wiLCB0Ll9rZXksIGksIG51bGwgIT09IHQuY29udmVydGVyLCBuKS50b011dGF0aW9uKHQuX2tleSwgX24ubm9uZSgpKSBdKTtcbn1cblxuZnVuY3Rpb24gcmwodCwgZSwgbiwgLi4ucykge1xuICAgIHQgPSB1Yyh0LCBmYyk7XG4gICAgY29uc3QgaSA9IHVjKHQuZmlyZXN0b3JlLCBSYyksIHIgPSBZYyhpKTtcbiAgICBsZXQgbztcbiAgICBvID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKFxuICAgIC8vIEZvciBDb21wYXQgdHlwZXMsIHdlIGhhdmUgdG8gXCJleHRyYWN0XCIgdGhlIHVuZGVybHlpbmcgdHlwZXMgYmVmb3JlXG4gICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBMYyA/IG9oKHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSwgbiwgcykgOiByaChyLCBcInVwZGF0ZURvY1wiLCB0Ll9rZXksIGUpO1xuICAgIHJldHVybiBobChpLCBbIG8udG9NdXRhdGlvbih0Ll9rZXksIF9uLmV4aXN0cyghMCkpIF0pO1xufVxuXG4vKipcbiAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBzcGVjaWZpZWQgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBAcGFyYW0gcmVmZXJlbmNlIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGRlbGV0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSByZXNvbHZlZCBvbmNlIHRoZSBkb2N1bWVudCBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIGRlbGV0ZWQgZnJvbSB0aGUgYmFja2VuZCAobm90ZSB0aGF0IGl0IHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIG9sKHQpIHtcbiAgICByZXR1cm4gaGwodWModC5maXJlc3RvcmUsIFJjKSwgWyBuZXcgVm4odC5fa2V5LCBfbi5ub25lKCkpIF0pO1xufVxuXG4vKipcbiAqIEFkZCBhIG5ldyBkb2N1bWVudCB0byBzcGVjaWZpZWQgYENvbGxlY3Rpb25SZWZlcmVuY2VgIHdpdGggdGhlIGdpdmVuIGRhdGEsXG4gKiBhc3NpZ25pbmcgaXQgYSBkb2N1bWVudCBJRCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgY29sbGVjdGlvbiB0byBhZGQgdGhpcyBkb2N1bWVudCB0by5cbiAqIEBwYXJhbSBkYXRhIC0gQW4gT2JqZWN0IGNvbnRhaW5pbmcgdGhlIGRhdGEgZm9yIHRoZSBuZXcgZG9jdW1lbnQuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50UmVmZXJlbmNlYCBwb2ludGluZyB0byB0aGVcbiAqIG5ld2x5IGNyZWF0ZWQgZG9jdW1lbnQgYWZ0ZXIgaXQgaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgYmFja2VuZCAoTm90ZSB0aGF0IGl0XG4gKiB3b24ndCByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAqLyBmdW5jdGlvbiB1bCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHVjKHQuZmlyZXN0b3JlLCBSYyksIHMgPSBnYyh0KSwgaSA9IFdoKHQuY29udmVydGVyLCBlKTtcbiAgICByZXR1cm4gaGwobiwgWyBYYyhZYyh0LmZpcmVzdG9yZSksIFwiYWRkRG9jXCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIHt9KS50b011dGF0aW9uKHMuX2tleSwgX24uZXhpc3RzKCExKSkgXSkudGhlbigoKCkgPT4gcykpO1xufVxuXG5mdW5jdGlvbiBhbCh0LCAuLi5lKSB7XG4gICAgdmFyIG4sIHMsIGk7XG4gICAgdCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KTtcbiAgICBsZXQgciA9IHtcbiAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITFcbiAgICB9LCBvID0gMDtcbiAgICBcIm9iamVjdFwiICE9IHR5cGVvZiBlW29dIHx8IFRjKGVbb10pIHx8IChyID0gZVtvXSwgbysrKTtcbiAgICBjb25zdCB1ID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiByLmluY2x1ZGVNZXRhZGF0YUNoYW5nZXNcbiAgICB9O1xuICAgIGlmIChUYyhlW29dKSkge1xuICAgICAgICBjb25zdCB0ID0gZVtvXTtcbiAgICAgICAgZVtvXSA9IG51bGwgPT09IChuID0gdC5uZXh0KSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmJpbmQodCksIGVbbyArIDFdID0gbnVsbCA9PT0gKHMgPSB0LmVycm9yKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmJpbmQodCksIFxuICAgICAgICBlW28gKyAyXSA9IG51bGwgPT09IChpID0gdC5jb21wbGV0ZSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5iaW5kKHQpO1xuICAgIH1cbiAgICBsZXQgYSwgYywgaDtcbiAgICBpZiAodCBpbnN0YW5jZW9mIGZjKSBjID0gdWModC5maXJlc3RvcmUsIFJjKSwgaCA9IE5lKHQuX2tleS5wYXRoKSwgYSA9IHtcbiAgICAgICAgbmV4dDogbiA9PiB7XG4gICAgICAgICAgICBlW29dICYmIGVbb10obGwoYywgdCwgbikpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgIGNvbXBsZXRlOiBlW28gKyAyXVxuICAgIH07IGVsc2Uge1xuICAgICAgICBjb25zdCBuID0gdWModCwgZGMpO1xuICAgICAgICBjID0gdWMobi5maXJlc3RvcmUsIFJjKSwgaCA9IG4uX3F1ZXJ5O1xuICAgICAgICBjb25zdCBzID0gbmV3IFhoKGMpO1xuICAgICAgICBhID0ge1xuICAgICAgICAgICAgbmV4dDogdCA9PiB7XG4gICAgICAgICAgICAgICAgZVtvXSAmJiBlW29dKG5ldyBBaChjLCBzLCBuLCB0KSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGVbbyArIDFdLFxuICAgICAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgICAgIH0sIFBoKHQuX3F1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBDYShzKSwgciA9IG5ldyBGdShlLCBpLCBuKTtcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB4dShhd2FpdCBLYSh0KSwgcikpKSwgKCkgPT4ge1xuICAgICAgICAgICAgaS5wYSgpLCB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gTnUoYXdhaXQgS2EodCksIHIpKSk7XG4gICAgICAgIH07XG4gICAgfShWYyhjKSwgaCwgdSwgYSk7XG59XG5cbmZ1bmN0aW9uIGNsKHQsIGUpIHtcbiAgICByZXR1cm4gWWEoVmModCA9IHVjKHQsIFJjKSksIFRjKGUpID8gZSA6IHtcbiAgICAgICAgbmV4dDogZVxuICAgIH0pO1xufVxuXG4vKipcbiAqIExvY2FsbHkgd3JpdGVzIGBtdXRhdGlvbnNgIG9uIHRoZSBhc3luYyBxdWV1ZS5cbiAqIEBpbnRlcm5hbFxuICovIGZ1bmN0aW9uIGhsKHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IGo7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4gWXUoYXdhaXQgR2EodCksIGUsIG4pKSksIG4ucHJvbWlzZTtcbiAgICB9KFZjKHQpLCBlKTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIHtAbGluayBWaWV3U25hcHNob3R9IHRoYXQgY29udGFpbnMgdGhlIHNpbmdsZSBkb2N1bWVudCBzcGVjaWZpZWQgYnkgYHJlZmBcbiAqIHRvIGEge0BsaW5rIERvY3VtZW50U25hcHNob3R9LlxuICovIGZ1bmN0aW9uIGxsKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbi5kb2NzLmdldChlLl9rZXkpLCBpID0gbmV3IFhoKHQpO1xuICAgIHJldHVybiBuZXcgVGgodCwgaSwgZS5fa2V5LCBzLCBuZXcgSWgobi5oYXNQZW5kaW5nV3JpdGVzLCBuLmZyb21DYWNoZSksIGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBUaGUgYFRyYW5zYWN0aW9uYCBvYmplY3QgcGFzc2VkIHRvIGEgdHJhbnNhY3Rpb24ncyBgdXBkYXRlRnVuY3Rpb25gIHByb3ZpZGVzXG4gKiB0aGUgbWV0aG9kcyB0byByZWFkIGFuZCB3cml0ZSBkYXRhIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24gY29udGV4dC4gU2VlXG4gKiB7QGxpbmsgcnVuVHJhbnNhY3Rpb259LlxuICovIGNsYXNzIGZsIGV4dGVuZHMgY2xhc3Mge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl90cmFuc2FjdGlvbiA9IGUsIHRoaXMuX2RhdGFSZWFkZXIgPSBZYyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVyZW5jZWQgYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgcmVhZC5cbiAgICAgKiBAcmV0dXJucyBBIGBEb2N1bWVudFNuYXBzaG90YCB3aXRoIHRoZSByZWFkIGRhdGEuXG4gICAgICovICAgIGdldCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKaCh0LCB0aGlzLl9maXJlc3RvcmUpLCBuID0gbmV3IHpoKHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl90cmFuc2FjdGlvbi5sb29rdXAoWyBlLl9rZXkgXSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICBpZiAoIXQgfHwgMSAhPT0gdC5sZW5ndGgpIHJldHVybiBMKCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdFswXTtcbiAgICAgICAgICAgIGlmIChzLmlzRm91bmREb2N1bWVudCgpKSByZXR1cm4gbmV3IGdoKHRoaXMuX2ZpcmVzdG9yZSwgbiwgcy5rZXksIHMsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIGlmIChzLmlzTm9Eb2N1bWVudCgpKSByZXR1cm4gbmV3IGdoKHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCBudWxsLCBlLmNvbnZlcnRlcik7XG4gICAgICAgICAgICB0aHJvdyBMKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEpoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIGkgPSBXaChzLmNvbnZlcnRlciwgZSwgbiksIHIgPSBYYyh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnNldFwiLCBzLl9rZXksIGksIG51bGwgIT09IHMuY29udmVydGVyLCBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLnNldChzLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICB1cGRhdGUodCwgZSwgbiwgLi4ucykge1xuICAgICAgICBjb25zdCBpID0gSmgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAgICAgLy8gcGVyZm9ybWluZyB2YWxpZGF0aW9uLlxuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICByZXR1cm4gciA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIChlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpKSB8fCBlIGluc3RhbmNlb2YgTGMgPyBvaCh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUsIG4sIHMpIDogcmgodGhpcy5fZGF0YVJlYWRlciwgXCJUcmFuc2FjdGlvbi51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX3RyYW5zYWN0aW9uLnVwZGF0ZShpLl9rZXksIHIpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWxldGVzIHRoZSBkb2N1bWVudCByZWZlcnJlZCB0byBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSBkZWxldGVkLlxuICAgICAqIEByZXR1cm5zIFRoaXMgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gSmgodCwgdGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmRlbGV0ZShlLl9rZXkpLCB0aGlzO1xuICAgIH1cbn0ge1xuICAgIC8vIFRoaXMgY2xhc3MgaW1wbGVtZW50cyB0aGUgc2FtZSBsb2dpYyBhcyB0aGUgVHJhbnNhY3Rpb24gQVBJIGluIHRoZSBMaXRlIFNES1xuICAgIC8vIGJ1dCBpcyBzdWJjbGFzc2VkIGluIG9yZGVyIHRvIHJldHVybiBpdHMgb3duIERvY3VtZW50U25hcHNob3QgdHlwZXMuXG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLl9maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpoKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgWGgodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmdldCh0KS50aGVuKCh0ID0+IG5ldyBUaCh0aGlzLl9maXJlc3RvcmUsIG4sIGUuX2tleSwgdC5fZG9jdW1lbnQsIG5ldyBJaChcbiAgICAgICAgLyogaGFzUGVuZGluZ1dyaXRlcz0gKi8gITEsIFxuICAgICAgICAvKiBmcm9tQ2FjaGU9ICovICExKSwgZS5jb252ZXJ0ZXIpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEV4ZWN1dGVzIHRoZSBnaXZlbiBgdXBkYXRlRnVuY3Rpb25gIGFuZCB0aGVuIGF0dGVtcHRzIHRvIGNvbW1pdCB0aGUgY2hhbmdlc1xuICogYXBwbGllZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uLiBJZiBhbnkgZG9jdW1lbnQgcmVhZCB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBoYXMgY2hhbmdlZCwgQ2xvdWQgRmlyZXN0b3JlIHJldHJpZXMgdGhlIGB1cGRhdGVGdW5jdGlvbmAuIElmIGl0IGZhaWxzIHRvXG4gKiBjb21taXQgYWZ0ZXIgNSBhdHRlbXB0cywgdGhlIHRyYW5zYWN0aW9uIGZhaWxzLlxuICpcbiAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB0cmFuc2FjdGlvbiBpcyA1MDAuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBGaXJlc3RvcmUgZGF0YWJhc2UgdG8gcnVuIHRoaXNcbiAqIHRyYW5zYWN0aW9uIGFnYWluc3QuXG4gKiBAcGFyYW0gdXBkYXRlRnVuY3Rpb24gLSBUaGUgZnVuY3Rpb24gdG8gZXhlY3V0ZSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uXG4gKiBjb250ZXh0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBkbCh0LCBlKSB7XG4gICAgcmV0dXJuIFhhKFZjKHQgPSB1Yyh0LCBSYykpLCAobiA9PiBlKG5ldyBmbCh0LCBuKSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIGZvciB1c2Ugd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IG9yXG4gKiB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IHdpdGggYHttZXJnZTogdHJ1ZX1gIHRvIG1hcmsgYSBmaWVsZCBmb3IgZGVsZXRpb24uXG4gKi8gZnVuY3Rpb24gX2woKSB7XG4gICAgcmV0dXJuIG5ldyBaYyhcImRlbGV0ZUZpZWxkXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzZW50aW5lbCB1c2VkIHdpdGgge0BsaW5rIEBmaXJlYmFzZS9maXJlc3RvcmUvbGl0ZSMoc2V0RG9jOjEpfSBvciB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRvXG4gKiBpbmNsdWRlIGEgc2VydmVyLWdlbmVyYXRlZCB0aW1lc3RhbXAgaW4gdGhlIHdyaXR0ZW4gZGF0YS5cbiAqLyBmdW5jdGlvbiB3bCgpIHtcbiAgICByZXR1cm4gbmV3IGVoKFwic2VydmVyVGltZXN0YW1wXCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byB1bmlvbiB0aGUgZ2l2ZW4gZWxlbWVudHMgd2l0aCBhbnkgYXJyYXlcbiAqIHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gRWFjaCBzcGVjaWZpZWQgZWxlbWVudCB0aGF0IGRvZXNuJ3RcbiAqIGFscmVhZHkgZXhpc3QgaW4gdGhlIGFycmF5IHdpbGwgYmUgYWRkZWQgdG8gdGhlIGVuZC4gSWYgdGhlIGZpZWxkIGJlaW5nXG4gKiBtb2RpZmllZCBpcyBub3QgYWxyZWFkeSBhbiBhcnJheSBpdCB3aWxsIGJlIG92ZXJ3cml0dGVuIHdpdGggYW4gYXJyYXlcbiAqIGNvbnRhaW5pbmcgZXhhY3RseSB0aGUgc3BlY2lmaWVkIGVsZW1lbnRzLlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byB1bmlvbiBpbnRvIHRoZSBhcnJheS5cbiAqIEByZXR1cm5zIFRoZSBgRmllbGRWYWx1ZWAgc2VudGluZWwgZm9yIHVzZSBpbiBhIGNhbGwgdG8gYHNldERvYygpYCBvclxuICogYHVwZGF0ZURvYygpYC5cbiAqLyBmdW5jdGlvbiBtbCguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IG5oKFwiYXJyYXlVbmlvblwiLCB0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgc3BlY2lhbCB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIHdpdGgge0BsaW5rIChzZXREb2M6MSl9IG9yIHtAbGlua1xuICogdXBkYXRlRG9jOjF9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byByZW1vdmUgdGhlIGdpdmVuIGVsZW1lbnRzIGZyb20gYW55XG4gKiBhcnJheSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uIHRoZSBzZXJ2ZXIuIEFsbCBpbnN0YW5jZXMgb2YgZWFjaCBlbGVtZW50XG4gKiBzcGVjaWZpZWQgd2lsbCBiZSByZW1vdmVkIGZyb20gdGhlIGFycmF5LiBJZiB0aGUgZmllbGQgYmVpbmcgbW9kaWZpZWQgaXMgbm90XG4gKiBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBlbXB0eSBhcnJheS5cbiAqXG4gKiBAcGFyYW0gZWxlbWVudHMgLSBUaGUgZWxlbWVudHMgdG8gcmVtb3ZlIGZyb20gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24gZ2woLi4udCkge1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IGFjdHVhbGx5IHBhcnNlIHRoZSBkYXRhIHVudGlsIGl0J3MgdXNlZCBpbiBzZXQoKSBvclxuICAgIC8vIHVwZGF0ZSgpIHNpbmNlIHdlJ2QgbmVlZCB0aGUgRmlyZXN0b3JlIGluc3RhbmNlIHRvIGRvIHRoaXMuXG4gICAgcmV0dXJuIG5ldyBzaChcImFycmF5UmVtb3ZlXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGlua1xuICogQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyh1cGRhdGVEb2M6MSl9IHRoYXQgdGVsbHMgdGhlIHNlcnZlciB0byBpbmNyZW1lbnQgdGhlIGZpZWxkJ3MgY3VycmVudCB2YWx1ZSBieVxuICogdGhlIGdpdmVuIHZhbHVlLlxuICpcbiAqIElmIGVpdGhlciB0aGUgb3BlcmFuZCBvciB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSB1c2VzIGZsb2F0aW5nIHBvaW50XG4gKiBwcmVjaXNpb24sIGFsbCBhcml0aG1ldGljIGZvbGxvd3MgSUVFRSA3NTQgc2VtYW50aWNzLiBJZiBib3RoIHZhbHVlcyBhcmVcbiAqIGludGVnZXJzLCB2YWx1ZXMgb3V0c2lkZSBvZiBKYXZhU2NyaXB0J3Mgc2FmZSBudW1iZXIgcmFuZ2VcbiAqIChgTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJgIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmApIGFyZSBhbHNvIHN1YmplY3QgdG9cbiAqIHByZWNpc2lvbiBsb3NzLiBGdXJ0aGVybW9yZSwgb25jZSBwcm9jZXNzZWQgYnkgdGhlIEZpcmVzdG9yZSBiYWNrZW5kLCBhbGxcbiAqIGludGVnZXIgb3BlcmF0aW9ucyBhcmUgY2FwcGVkIGJldHdlZW4gLTJeNjMgYW5kIDJeNjMtMS5cbiAqXG4gKiBJZiB0aGUgY3VycmVudCBmaWVsZCB2YWx1ZSBpcyBub3Qgb2YgdHlwZSBgbnVtYmVyYCwgb3IgaWYgdGhlIGZpZWxkIGRvZXMgbm90XG4gKiB5ZXQgZXhpc3QsIHRoZSB0cmFuc2Zvcm1hdGlvbiBzZXRzIHRoZSBmaWVsZCB0byB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogQHBhcmFtIG4gLSBUaGUgdmFsdWUgdG8gaW5jcmVtZW50IGJ5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgXG4gKi8gZnVuY3Rpb24geWwodCkge1xuICAgIHJldHVybiBuZXcgaWgoXCJpbmNyZW1lbnRcIiwgdCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIENyZWF0ZXMgYSB3cml0ZSBiYXRjaCwgdXNlZCBmb3IgcGVyZm9ybWluZyBtdWx0aXBsZSB3cml0ZXMgYXMgYSBzaW5nbGVcbiAqIGF0b21pYyBvcGVyYXRpb24uIFRoZSBtYXhpbXVtIG51bWJlciBvZiB3cml0ZXMgYWxsb3dlZCBpbiBhIHNpbmdsZSB7QGxpbmsgV3JpdGVCYXRjaH1cbiAqIGlzIDUwMC5cbiAqXG4gKiBVbmxpa2UgdHJhbnNhY3Rpb25zLCB3cml0ZSBiYXRjaGVzIGFyZSBwZXJzaXN0ZWQgb2ZmbGluZSBhbmQgdGhlcmVmb3JlIGFyZVxuICogcHJlZmVyYWJsZSB3aGVuIHlvdSBkb24ndCBuZWVkIHRvIGNvbmRpdGlvbiB5b3VyIHdyaXRlcyBvbiByZWFkIGRhdGEuXG4gKlxuICogQHJldHVybnMgQSB7QGxpbmsgV3JpdGVCYXRjaH0gdGhhdCBjYW4gYmUgdXNlZCB0byBhdG9taWNhbGx5IGV4ZWN1dGUgbXVsdGlwbGVcbiAqIHdyaXRlcy5cbiAqLyBmdW5jdGlvbiBwbCh0KSB7XG4gICAgcmV0dXJuIFZjKHQgPSB1Yyh0LCBSYykpLCBuZXcgSGgodCwgKGUgPT4gaGwodCwgZSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gSWwodCwgZSkge1xuICAgIFZjKHQgPSB1Yyh0LCBSYykpO1xuICAgIGNvbnN0IG4gPSBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gZnVuY3Rpb24odCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBRKEsuSU5WQUxJRF9BUkdVTUVOVCwgXCJGYWlsZWQgdG8gcGFyc2UgSlNPTjpcIiArIHQubWVzc2FnZSk7XG4gICAgICAgIH1cbiAgICB9KGUpIDogZSwgcyA9IFtdO1xuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgcmV0dXJuIGFuIGVycm9yIGlmIHRoZSB1c2VyIGhhcyBub3QgZW5hYmxlZFxuICAgIC8vIHBlcnNpc3RlbmNlIHNpbmNlIGBlbmFibGVJbmRleGVkZGJQZXJzaXN0ZW5jZSgpYCBjYW4gZmFpbCBvbiB0aGUgV2ViLlxuICAgIGlmIChBcnJheS5pc0FycmF5KG4uaW5kZXhlcykpIGZvciAoY29uc3QgdCBvZiBuLmluZGV4ZXMpIHtcbiAgICAgICAgY29uc3QgZSA9IFRsKHQsIFwiY29sbGVjdGlvbkdyb3VwXCIpLCBuID0gW107XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQuZmllbGRzKSkgZm9yIChjb25zdCBlIG9mIHQuZmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gX2goXCJzZXRJbmRleENvbmZpZ3VyYXRpb25cIiwgVGwoZSwgXCJmaWVsZFBhdGhcIikpO1xuICAgICAgICAgICAgXCJDT05UQUlOU1wiID09PSBlLmFycmF5Q29uZmlnID8gbi5wdXNoKG5ldyBpZSh0LCAyIC8qIENPTlRBSU5TICovKSkgOiBcIkFTQ0VORElOR1wiID09PSBlLm9yZGVyID8gbi5wdXNoKG5ldyBpZSh0LCAwIC8qIEFTQ0VORElORyAqLykpIDogXCJERVNDRU5ESU5HXCIgPT09IGUub3JkZXIgJiYgbi5wdXNoKG5ldyBpZSh0LCAxIC8qIERFU0NFTkRJTkcgKi8pKTtcbiAgICAgICAgfVxuICAgICAgICBzLnB1c2gobmV3IGVlKGVlLlVOS05PV05fSUQsIGUsIG4sIHJlLmVtcHR5KCkpKTtcbiAgICB9XG4gICAgLy8gVE9ETyhpbmRleGluZyk6IENvbmZpZ3VyZSBpbmRleGVzXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbn1cblxuZnVuY3Rpb24gVGwodCwgZSkge1xuICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiB0W2VdKSB0aHJvdyBuZXcgUShLLklOVkFMSURfQVJHVU1FTlQsIFwiTWlzc2luZyBzdHJpbmcgdmFsdWUgZm9yOiBcIiArIGUpO1xuICAgIHJldHVybiB0W2VdO1xufVxuXG4vKipcbiAqIENsb3VkIEZpcmVzdG9yZVxuICpcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICovICFmdW5jdGlvbih0LCBlID0gITApIHtcbiAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICB4ID0gdDtcbiAgICB9KFNES19WRVJTSU9OKSwgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJmaXJlc3RvcmVcIiwgKCh0LCB7b3B0aW9uczogbn0pID0+IHtcbiAgICAgICAgY29uc3QgcyA9IHQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksIGkgPSBuZXcgUmMocywgbmV3IEoodC5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIikpLCBuZXcgdHQodC5nZXRQcm92aWRlcihcImFwcC1jaGVjay1pbnRlcm5hbFwiKSkpO1xuICAgICAgICByZXR1cm4gbiA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgdXNlRmV0Y2hTdHJlYW1zOiBlXG4gICAgICAgIH0sIG4pLCBpLl9zZXRTZXR0aW5ncyhuKSwgaTtcbiAgICB9KSwgXCJQVUJMSUNcIikpLCByZWdpc3RlclZlcnNpb24oRCwgXCIzLjQuN1wiLCB0KSwgXG4gICAgLy8gQlVJTERfVEFSR0VUIHdpbGwgYmUgcmVwbGFjZWQgYnkgdmFsdWVzIGxpa2UgZXNtNSwgZXNtMjAxNywgY2pzNSwgZXRjIGR1cmluZyB0aGUgY29tcGlsYXRpb25cbiAgICByZWdpc3RlclZlcnNpb24oRCwgXCIzLjQuN1wiLCBcImVzbTIwMTdcIik7XG59KCk7XG5cbmV4cG9ydCB7IGpoIGFzIEFic3RyYWN0VXNlckRhdGFXcml0ZXIsIHFjIGFzIEJ5dGVzLCBBYyBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgX2MgYXMgQ29sbGVjdGlvblJlZmVyZW5jZSwgZmMgYXMgRG9jdW1lbnRSZWZlcmVuY2UsIFRoIGFzIERvY3VtZW50U25hcHNob3QsIExjIGFzIEZpZWxkUGF0aCwgR2MgYXMgRmllbGRWYWx1ZSwgUmMgYXMgRmlyZXN0b3JlLCBRIGFzIEZpcmVzdG9yZUVycm9yLCBLYyBhcyBHZW9Qb2ludCwgRWMgYXMgTG9hZEJ1bmRsZVRhc2ssIGRjIGFzIFF1ZXJ5LCBWaCBhcyBRdWVyeUNvbnN0cmFpbnQsIEVoIGFzIFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCwgQWggYXMgUXVlcnlTbmFwc2hvdCwgSWggYXMgU25hcHNob3RNZXRhZGF0YSwgYXQgYXMgVGltZXN0YW1wLCBmbCBhcyBUcmFuc2FjdGlvbiwgSGggYXMgV3JpdGVCYXRjaCwgdnQgYXMgX0RhdGFiYXNlSWQsIHh0IGFzIF9Eb2N1bWVudEtleSwgZXQgYXMgX0VtcHR5QXBwQ2hlY2tUb2tlblByb3ZpZGVyLCB6IGFzIF9FbXB0eUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLCBtdCBhcyBfRmllbGRQYXRoLCB1YyBhcyBfY2FzdCwgcSBhcyBfZGVidWdBc3NlcnQsIHl0IGFzIF9pc0Jhc2U2NEF2YWlsYWJsZSwgJCBhcyBfbG9nV2FybiwgSWwgYXMgX3NldEluZGV4Q29uZmlndXJhdGlvbiwgc2MgYXMgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIsIHVsIGFzIGFkZERvYywgZ2wgYXMgYXJyYXlSZW1vdmUsIG1sIGFzIGFycmF5VW5pb24sIHhjIGFzIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UsIHdjIGFzIGNvbGxlY3Rpb24sIG1jIGFzIGNvbGxlY3Rpb25Hcm91cCwgbGMgYXMgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yLCBvbCBhcyBkZWxldGVEb2MsIF9sIGFzIGRlbGV0ZUZpZWxkLCBNYyBhcyBkaXNhYmxlTmV0d29yaywgZ2MgYXMgZG9jLCBVYyBhcyBkb2N1bWVudElkLCBTYyBhcyBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgRGMgYXMgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwga2MgYXMgZW5hYmxlTmV0d29yaywgVWggYXMgZW5kQXQsIExoIGFzIGVuZEJlZm9yZSwgVmMgYXMgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgaGwgYXMgZXhlY3V0ZVdyaXRlLCBZaCBhcyBnZXREb2MsIFpoIGFzIGdldERvY0Zyb21DYWNoZSwgdGwgYXMgZ2V0RG9jRnJvbVNlcnZlciwgZWwgYXMgZ2V0RG9jcywgbmwgYXMgZ2V0RG9jc0Zyb21DYWNoZSwgc2wgYXMgZ2V0RG9jc0Zyb21TZXJ2ZXIsIFBjIGFzIGdldEZpcmVzdG9yZSwgeWwgYXMgaW5jcmVtZW50LCBiYyBhcyBpbml0aWFsaXplRmlyZXN0b3JlLCBraCBhcyBsaW1pdCwgTWggYXMgbGltaXRUb0xhc3QsIEZjIGFzIGxvYWRCdW5kbGUsICRjIGFzIG5hbWVkUXVlcnksIGFsIGFzIG9uU25hcHNob3QsIGNsIGFzIG9uU25hcHNob3RzSW5TeW5jLCB4aCBhcyBvcmRlckJ5LCB2aCBhcyBxdWVyeSwgcGMgYXMgcXVlcnlFcXVhbCwgeWMgYXMgcmVmRXF1YWwsIGRsIGFzIHJ1blRyYW5zYWN0aW9uLCB3bCBhcyBzZXJ2ZXJUaW1lc3RhbXAsIGlsIGFzIHNldERvYywgTSBhcyBzZXRMb2dMZXZlbCwgYmggYXMgc25hcHNob3RFcXVhbCwgJGggYXMgc3RhcnRBZnRlciwgRmggYXMgc3RhcnRBdCwgT2MgYXMgdGVybWluYXRlLCBybCBhcyB1cGRhdGVEb2MsIE5jIGFzIHdhaXRGb3JQZW5kaW5nV3JpdGVzLCBEaCBhcyB3aGVyZSwgcGwgYXMgd3JpdGVCYXRjaCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlICovXHJcblxyXG52YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICB0W3BbaV1dID0gc1twW2ldXTtcclxuICAgICAgICB9XHJcbiAgICByZXR1cm4gdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xyXG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3BhcmFtKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZ2VuZXJhdG9yKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcclxuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxyXG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgdmFyIF9fY3JlYXRlQmluZGluZyA9IE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XHJcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgb1trMl0gPSBtW2tdO1xyXG59KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgbykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAocCAhPT0gXCJkZWZhdWx0XCIgJiYgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBwKSkgX19jcmVhdGVCaW5kaW5nKG8sIG0sIHApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3JlYWQobywgbikge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgaWYgKCFtKSByZXR1cm4gbztcclxuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG4vKiogQGRlcHJlY2F0ZWQgKi9cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZEFycmF5KHRvLCBmcm9tLCBwYWNrKSB7XHJcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcclxuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcclxuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XHJcbn0pIDogZnVuY3Rpb24obywgdikge1xyXG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0U3Rhcihtb2QpIHtcclxuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICB2YXIgcmVzdWx0ID0ge307XHJcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XHJcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9faW1wb3J0RGVmYXVsdChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgZGVmYXVsdDogbW9kIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cclxuIiwiaW1wb3J0IHsgRXJyb3JGYWN0b3J5LCBkZWVwRXF1YWwsIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNNb2JpbGVDb3Jkb3ZhLCBpc1JlYWN0TmF0aXZlLCBGaXJlYmFzZUVycm9yLCBxdWVyeXN0cmluZywgZ2V0TW9kdWxhckluc3RhbmNlLCBiYXNlNjREZWNvZGUsIGdldFVBLCBpc0lFLCBjcmVhdGVTdWJzY3JpYmUsIHF1ZXJ5c3RyaW5nRGVjb2RlLCBleHRyYWN0UXVlcnlzdHJpbmcsIGlzRW1wdHkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBTREtfVkVSU0lPTiwgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgZ2V0QXBwIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBfX3Jlc3QgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBMb2dnZXIsIExvZ0xldmVsIH0gZnJvbSAnQGZpcmViYXNlL2xvZ2dlcic7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFuIGVudW0gb2YgZmFjdG9ycyB0aGF0IG1heSBiZSB1c2VkIGZvciBtdWx0aWZhY3RvciBhdXRoZW50aWNhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgRmFjdG9ySWQgPSB7XHJcbiAgICAvKiogUGhvbmUgYXMgc2Vjb25kIGZhY3RvciAqL1xyXG4gICAgUEhPTkU6ICdwaG9uZSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBwcm92aWRlcnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFByb3ZpZGVySWQgPSB7XHJcbiAgICAvKiogRmFjZWJvb2sgcHJvdmlkZXIgSUQgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgcHJvdmlkZXIgSUQgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBwcm92aWRlciBJRCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGFzc3dvcmQgcHJvdmlkZXIgKi9cclxuICAgIFBBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIFBob25lIHByb3ZpZGVyICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHByb3ZpZGVyIElEICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgc2lnbi1pbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBTaWduSW5NZXRob2QgPSB7XHJcbiAgICAvKiogRW1haWwgbGluayBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfTElOSzogJ2VtYWlsTGluaycsXHJcbiAgICAvKiogRW1haWwvcGFzc3dvcmQgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEVNQUlMX1BBU1NXT1JEOiAncGFzc3dvcmQnLFxyXG4gICAgLyoqIEZhY2Vib29rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBGQUNFQk9PSzogJ2ZhY2Vib29rLmNvbScsXHJcbiAgICAvKiogR2l0SHViIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBHSVRIVUI6ICdnaXRodWIuY29tJyxcclxuICAgIC8qKiBHb29nbGUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdPT0dMRTogJ2dvb2dsZS5jb20nLFxyXG4gICAgLyoqIFBob25lIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIC8qKiBUd2l0dGVyIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBUV0lUVEVSOiAndHdpdHRlci5jb20nXHJcbn07XHJcbi8qKlxyXG4gKiBFbnVtZXJhdGlvbiBvZiBzdXBwb3J0ZWQgb3BlcmF0aW9uIHR5cGVzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBPcGVyYXRpb25UeXBlID0ge1xyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgbGlua2luZyBhbiBhZGRpdGlvbmFsIHByb3ZpZGVyIHRvIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBMSU5LOiAnbGluaycsXHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyB1c2luZyBhIHByb3ZpZGVyIHRvIHJlYXV0aGVudGljYXRlIGFuIGFscmVhZHkgc2lnbmVkLWluIHVzZXIuICovXHJcbiAgICBSRUFVVEhFTlRJQ0FURTogJ3JlYXV0aGVudGljYXRlJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHNpZ25pbmcgaW4gYSB1c2VyLiAqL1xyXG4gICAgU0lHTl9JTjogJ3NpZ25JbidcclxufTtcclxuLyoqXHJcbiAqIEFuIGVudW1lcmF0aW9uIG9mIHRoZSBwb3NzaWJsZSBlbWFpbCBhY3Rpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IEFjdGlvbkNvZGVPcGVyYXRpb24gPSB7XHJcbiAgICAvKiogVGhlIGVtYWlsIGxpbmsgc2lnbi1pbiBhY3Rpb24uICovXHJcbiAgICBFTUFJTF9TSUdOSU46ICdFTUFJTF9TSUdOSU4nLFxyXG4gICAgLyoqIFRoZSBwYXNzd29yZCByZXNldCBhY3Rpb24uICovXHJcbiAgICBQQVNTV09SRF9SRVNFVDogJ1BBU1NXT1JEX1JFU0VUJyxcclxuICAgIC8qKiBUaGUgZW1haWwgcmV2b2NhdGlvbiBhY3Rpb24uICovXHJcbiAgICBSRUNPVkVSX0VNQUlMOiAnUkVDT1ZFUl9FTUFJTCcsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiAnUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04nLFxyXG4gICAgLyoqIFRoZSByZXZlcnQgc2Vjb25kIGZhY3RvciBhZGRpdGlvbiBlbWFpbCBhY3Rpb24uICovXHJcbiAgICBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTDogJ1ZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgZW1haWwgdmVyaWZpY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9FTUFJTDogJ1ZFUklGWV9FTUFJTCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2RlYnVnRXJyb3JNYXAoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIFtcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgcmVzdHJpY3RlZCB0byBhZG1pbmlzdHJhdG9ycyBvbmx5LicsXHJcbiAgICAgICAgW1wiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqL106ICcnLFxyXG4gICAgICAgIFtcImFwcC1ub3QtYXV0aG9yaXplZFwiIC8qIEFQUF9OT1RfQVVUSE9SSVpFRCAqL106IFwiVGhpcyBhcHAsIGlkZW50aWZpZWQgYnkgdGhlIGRvbWFpbiB3aGVyZSBpdCdzIGhvc3RlZCwgaXMgbm90IFwiICtcclxuICAgICAgICAgICAgJ2F1dGhvcml6ZWQgdG8gdXNlIEZpcmViYXNlIEF1dGhlbnRpY2F0aW9uIHdpdGggdGhlIHByb3ZpZGVkIEFQSSBrZXkuICcgK1xyXG4gICAgICAgICAgICAnUmV2aWV3IHlvdXIga2V5IGNvbmZpZ3VyYXRpb24gaW4gdGhlIEdvb2dsZSBBUEkgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImFwcC1ub3QtaW5zdGFsbGVkXCIgLyogQVBQX05PVF9JTlNUQUxMRUQgKi9dOiAnVGhlIHJlcXVlc3RlZCBtb2JpbGUgYXBwbGljYXRpb24gY29ycmVzcG9uZGluZyB0byB0aGUgaWRlbnRpZmllciAoJyArXHJcbiAgICAgICAgICAgICdBbmRyb2lkIHBhY2thZ2UgbmFtZSBvciBpT1MgYnVuZGxlIElEKSBwcm92aWRlZCBpcyBub3QgaW5zdGFsbGVkIG9uICcgK1xyXG4gICAgICAgICAgICAndGhpcyBkZXZpY2UuJyxcclxuICAgICAgICBbXCJjYXB0Y2hhLWNoZWNrLWZhaWxlZFwiIC8qIENBUFRDSEFfQ0hFQ0tfRkFJTEVEICovXTogJ1RoZSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQsIGV4cGlyZWQsICcgK1xyXG4gICAgICAgICAgICAnYWxyZWFkeSB1c2VkIG9yIHRoZSBkb21haW4gYXNzb2NpYXRlZCB3aXRoIGl0IGRvZXMgbm90IG1hdGNoIHRoZSBsaXN0ICcgK1xyXG4gICAgICAgICAgICAnb2Ygd2hpdGVsaXN0ZWQgZG9tYWlucy4nLFxyXG4gICAgICAgIFtcImNvZGUtZXhwaXJlZFwiIC8qIENPREVfRVhQSVJFRCAqL106ICdUaGUgU01TIGNvZGUgaGFzIGV4cGlyZWQuIFBsZWFzZSByZS1zZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSB0byB0cnkgJyArXHJcbiAgICAgICAgICAgICdhZ2Fpbi4nLFxyXG4gICAgICAgIFtcImNvcmRvdmEtbm90LXJlYWR5XCIgLyogQ09SRE9WQV9OT1RfUkVBRFkgKi9dOiAnQ29yZG92YSBmcmFtZXdvcmsgaXMgbm90IHJlYWR5LicsXHJcbiAgICAgICAgW1wiY29ycy11bnN1cHBvcnRlZFwiIC8qIENPUlNfVU5TVVBQT1JURUQgKi9dOiAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuJyxcclxuICAgICAgICBbXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqL106ICdUaGlzIGNyZWRlbnRpYWwgaXMgYWxyZWFkeSBhc3NvY2lhdGVkIHdpdGggYSBkaWZmZXJlbnQgdXNlciBhY2NvdW50LicsXHJcbiAgICAgICAgW1wiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106ICdUaGUgY3VzdG9tIHRva2VuIGNvcnJlc3BvbmRzIHRvIGEgZGlmZmVyZW50IGF1ZGllbmNlLicsXHJcbiAgICAgICAgW1wicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIHNlbnNpdGl2ZSBhbmQgcmVxdWlyZXMgcmVjZW50IGF1dGhlbnRpY2F0aW9uLiBMb2cgaW4gJyArXHJcbiAgICAgICAgICAgICdhZ2FpbiBiZWZvcmUgcmV0cnlpbmcgdGhpcyByZXF1ZXN0LicsXHJcbiAgICAgICAgW1wiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqL106ICdBbm90aGVyIEZpcmViYXNlIFNESyB3YXMgaW5pdGlhbGl6ZWQgYW5kIGlzIHRyeWluZyB0byB1c2UgQXV0aCBiZWZvcmUgQXV0aCBpcyAnICtcclxuICAgICAgICAgICAgJ2luaXRpYWxpemVkLiBQbGVhc2UgYmUgc3VyZSB0byBjYWxsIGBpbml0aWFsaXplQXV0aGAgb3IgYGdldEF1dGhgIGJlZm9yZSAnICtcclxuICAgICAgICAgICAgJ3N0YXJ0aW5nIGFueSBvdGhlciBGaXJlYmFzZSBTREsuJyxcclxuICAgICAgICBbXCJkeW5hbWljLWxpbmstbm90LWFjdGl2YXRlZFwiIC8qIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEICovXTogJ1BsZWFzZSBhY3RpdmF0ZSBEeW5hbWljIExpbmtzIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlIGFuZCBhZ3JlZSB0byB0aGUgdGVybXMgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29uZGl0aW9ucy4nLFxyXG4gICAgICAgIFtcImVtYWlsLWNoYW5nZS1uZWVkcy12ZXJpZmljYXRpb25cIiAvKiBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OICovXTogJ011bHRpLWZhY3RvciB1c2VycyBtdXN0IGFsd2F5cyBoYXZlIGEgdmVyaWZpZWQgZW1haWwuJyxcclxuICAgICAgICBbXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqL106ICdUaGUgZW1haWwgYWRkcmVzcyBpcyBhbHJlYWR5IGluIHVzZSBieSBhbm90aGVyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogRU1VTEFUT1JfQ09ORklHX0ZBSUxFRCAqL106ICdBdXRoIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gdXNlZCB0byBtYWtlIGEgbmV0d29yayBjYWxsLiBBdXRoIGNhbiAnICtcclxuICAgICAgICAgICAgJ25vIGxvbmdlciBiZSBjb25maWd1cmVkIHRvIHVzZSB0aGUgZW11bGF0b3IuIFRyeSBjYWxsaW5nICcgK1xyXG4gICAgICAgICAgICAnXCJjb25uZWN0QXV0aEVtdWxhdG9yKClcIiBzb29uZXIuJyxcclxuICAgICAgICBbXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqL106ICdUaGUgYWN0aW9uIGNvZGUgaGFzIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEVYUElSRURfUE9QVVBfUkVRVUVTVCAqL106ICdUaGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBjYW5jZWxsZWQgZHVlIHRvIGFub3RoZXIgY29uZmxpY3RpbmcgcG9wdXAgYmVpbmcgb3BlbmVkLicsXHJcbiAgICAgICAgW1wiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfQVBQX0NSRURFTlRJQUwgKi9dOiAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGNvbnRhaW5zIGFuIGludmFsaWQgYXBwbGljYXRpb24gdmVyaWZpZXIuJyArXHJcbiAgICAgICAgICAgICcgVGhlIHJlQ0FQVENIQSB0b2tlbiByZXNwb25zZSBpcyBlaXRoZXIgaW52YWxpZCBvciBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtaWRcIiAvKiBJTlZBTElEX0FQUF9JRCAqL106ICdUaGUgbW9iaWxlIGFwcCBpZGVudGlmaWVyIGlzIG5vdCByZWdpc3RlZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqL106IFwiVGhpcyB1c2VyJ3MgY3JlZGVudGlhbCBpc24ndCB2YWxpZCBmb3IgdGhpcyBwcm9qZWN0LiBUaGlzIGNhbiBoYXBwZW4gXCIgK1xyXG4gICAgICAgICAgICBcImlmIHRoZSB1c2VyJ3MgdG9rZW4gaGFzIGJlZW4gdGFtcGVyZWQgd2l0aCwgb3IgaWYgdGhlIHVzZXIgaXNuJ3QgZm9yIFwiICtcclxuICAgICAgICAgICAgJ3RoZSBwcm9qZWN0IGFzc29jaWF0ZWQgd2l0aCB0aGlzIEFQSSBrZXkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWF1dGgtZXZlbnRcIiAvKiBJTlZBTElEX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBJTlZBTElEX0NPREUgKi9dOiAnVGhlIFNNUyB2ZXJpZmljYXRpb24gY29kZSB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzICcgK1xyXG4gICAgICAgICAgICAnaW52YWxpZC4gUGxlYXNlIHJlc2VuZCB0aGUgdmVyaWZpY2F0aW9uIGNvZGUgc21zIGFuZCBiZSBzdXJlIHRvIHVzZSB0aGUgJyArXHJcbiAgICAgICAgICAgICd2ZXJpZmljYXRpb24gY29kZSBwcm92aWRlZCBieSB0aGUgdXNlci4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY29udGludWUtdXJpXCIgLyogSU5WQUxJRF9DT05USU5VRV9VUkkgKi9dOiAnVGhlIGNvbnRpbnVlIFVSTCBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdCBpcyBpbnZhbGlkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqL106ICdUaGUgZm9sbG93aW5nIENvcmRvdmEgcGx1Z2lucyBtdXN0IGJlIGluc3RhbGxlZCB0byBlbmFibGUgT0F1dGggc2lnbi1pbjogJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm8sIGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiwgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiLCBjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXIgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tY3VzdG9tdXJsc2NoZW1lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jdXN0b20tdG9rZW5cIiAvKiBJTlZBTElEX0NVU1RPTV9UT0tFTiAqL106ICdUaGUgY3VzdG9tIHRva2VuIGZvcm1hdCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBjaGVjayB0aGUgZG9jdW1lbnRhdGlvbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZHluYW1pYy1saW5rLWRvbWFpblwiIC8qIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTiAqL106ICdUaGUgcHJvdmlkZWQgZHluYW1pYyBsaW5rIGRvbWFpbiBpcyBub3QgY29uZmlndXJlZCBvciBhdXRob3JpemVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbWFpbFwiIC8qIElOVkFMSURfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGFkZHJlc3MgaXMgYmFkbHkgZm9ybWF0dGVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRSAqL106ICdFbXVsYXRvciBVUkwgbXVzdCBzdGFydCB3aXRoIGEgdmFsaWQgc2NoZW1lIChodHRwOi8vIG9yIGh0dHBzOi8vKS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBpLWtleVwiIC8qIElOVkFMSURfQVBJX0tFWSAqL106ICdZb3VyIEFQSSBrZXkgaXMgaW52YWxpZCwgcGxlYXNlIGNoZWNrIHlvdSBoYXZlIGNvcGllZCBpdCBjb3JyZWN0bHkuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNlcnQtaGFzaFwiIC8qIElOVkFMSURfQ0VSVF9IQVNIICovXTogJ1RoZSBTSEEtMSBjZXJ0aWZpY2F0ZSBoYXNoIHByb3ZpZGVkIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqL106ICdUaGUgc3VwcGxpZWQgYXV0aCBjcmVkZW50aWFsIGlzIG1hbGZvcm1lZCBvciBoYXMgZXhwaXJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtbWVzc2FnZS1wYXlsb2FkXCIgLyogSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIGluIGl0cyBtZXNzYWdlLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW11bHRpLWZhY3Rvci1zZXNzaW9uXCIgLyogSU5WQUxJRF9NRkFfU0VTU0lPTiAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIiAvKiBJTlZBTElEX09BVVRIX1BST1ZJREVSICovXTogJ0VtYWlsQXV0aFByb3ZpZGVyIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIHRoaXMgb3BlcmF0aW9uLiBUaGlzIG9wZXJhdGlvbiAnICtcclxuICAgICAgICAgICAgJ29ubHkgc3VwcG9ydHMgT0F1dGggcHJvdmlkZXJzLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1vYXV0aC1jbGllbnQtaWRcIiAvKiBJTlZBTElEX09BVVRIX0NMSUVOVF9JRCAqL106ICdUaGUgT0F1dGggY2xpZW50IElEIHByb3ZpZGVkIGlzIGVpdGhlciBpbnZhbGlkIG9yIGRvZXMgbm90IG1hdGNoIHRoZSAnICtcclxuICAgICAgICAgICAgJ3NwZWNpZmllZCBBUEkga2V5LicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWRvbWFpblwiIC8qIElOVkFMSURfT1JJR0lOICovXTogJ1RoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlICcgK1xyXG4gICAgICAgICAgICAncHJvamVjdC4gRWRpdCB0aGUgbGlzdCBvZiBhdXRob3JpemVkIGRvbWFpbnMgZnJvbSB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogJ1RoZSBhY3Rpb24gY29kZSBpcyBpbnZhbGlkLiBUaGlzIGNhbiBoYXBwZW4gaWYgdGhlIGNvZGUgaXMgbWFsZm9ybWVkLCAnICtcclxuICAgICAgICAgICAgJ2V4cGlyZWQsIG9yIGhhcyBhbHJlYWR5IGJlZW4gdXNlZC4nLFxyXG4gICAgICAgIFtcIndyb25nLXBhc3N3b3JkXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgaXMgaW52YWxpZCBvciB0aGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgcGFzc3dvcmQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBJTlZBTElEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZSBpcyBpbnZhbGlkLiBJdCBjYW4gb25seSBiZSBsb2NhbCwgc2Vzc2lvbiBvciBub25lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1waG9uZS1udW1iZXJcIiAvKiBJTlZBTElEX1BIT05FX05VTUJFUiAqL106ICdUaGUgZm9ybWF0IG9mIHRoZSBwaG9uZSBudW1iZXIgcHJvdmlkZWQgaXMgaW5jb3JyZWN0LiBQbGVhc2UgZW50ZXIgdGhlICcgK1xyXG4gICAgICAgICAgICAncGhvbmUgbnVtYmVyIGluIGEgZm9ybWF0IHRoYXQgY2FuIGJlIHBhcnNlZCBpbnRvIEUuMTY0IGZvcm1hdC4gRS4xNjQgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXJzIGFyZSB3cml0dGVuIGluIHRoZSBmb3JtYXQgWytdW2NvdW50cnkgY29kZV1bc3Vic2NyaWJlciAnICtcclxuICAgICAgICAgICAgJ251bWJlciBpbmNsdWRpbmcgYXJlYSBjb2RlXS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcHJvdmlkZXItaWRcIiAvKiBJTlZBTElEX1BST1ZJREVSX0lEICovXTogJ1RoZSBzcGVjaWZpZWQgcHJvdmlkZXIgSUQgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtcmVjaXBpZW50LWVtYWlsXCIgLyogSU5WQUxJRF9SRUNJUElFTlRfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gZmFpbGVkIHRvIHNlbmQgYXMgdGhlIHByb3ZpZGVkICcgK1xyXG4gICAgICAgICAgICAncmVjaXBpZW50IGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtc2VuZGVyXCIgLyogSU5WQUxJRF9TRU5ERVIgKi9dOiAnVGhlIGVtYWlsIHRlbXBsYXRlIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gY29udGFpbnMgYW4gaW52YWxpZCBzZW5kZXIgZW1haWwgb3IgbmFtZS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgZml4IGJ5IGdvaW5nIHRvIHRoZSBBdXRoIGVtYWlsIHRlbXBsYXRlcyBzZWN0aW9uIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106ICdUaGUgdmVyaWZpY2F0aW9uIElEIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdGVuYW50LWlkXCIgLyogSU5WQUxJRF9URU5BTlRfSUQgKi9dOiBcIlRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEIGlzIGludmFsaWQuXCIsXHJcbiAgICAgICAgW1wibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106ICdBbiBBbmRyb2lkIFBhY2thZ2UgTmFtZSBtdXN0IGJlIHByb3ZpZGVkIGlmIHRoZSBBbmRyb2lkIEFwcCBpcyByZXF1aXJlZCB0byBiZSBpbnN0YWxsZWQuJyxcclxuICAgICAgICBbXCJhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWRcIiAvKiBNSVNTSU5HX0FVVEhfRE9NQUlOICovXTogJ0JlIHN1cmUgdG8gaW5jbHVkZSBhdXRoRG9tYWluIHdoZW4gY2FsbGluZyBmaXJlYmFzZS5pbml0aWFsaXplQXBwKCksICcgK1xyXG4gICAgICAgICAgICAnYnkgZm9sbG93aW5nIHRoZSBpbnN0cnVjdGlvbnMgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWFwcC1jcmVkZW50aWFsXCIgLyogTUlTU0lOR19BUFBfQ1JFREVOVElBTCAqL106ICdUaGUgcGhvbmUgdmVyaWZpY2F0aW9uIHJlcXVlc3QgaXMgbWlzc2luZyBhbiBhcHBsaWNhdGlvbiB2ZXJpZmllciAnICtcclxuICAgICAgICAgICAgJ2Fzc2VydGlvbi4gQSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gbmVlZHMgdG8gYmUgcHJvdmlkZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogTUlTU0lOR19DT0RFICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWNvbnRpbnVlLXVyaVwiIC8qIE1JU1NJTkdfQ09OVElOVUVfVVJJICovXTogJ0EgY29udGludWUgVVJMIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlmcmFtZS1zdGFydFwiIC8qIE1JU1NJTkdfSUZSQU1FX1NUQVJUICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIiAvKiBNSVNTSU5HX0lPU19CVU5ETEVfSUQgKi9dOiAnQW4gaU9TIEJ1bmRsZSBJRCBtdXN0IGJlIHByb3ZpZGVkIGlmIGFuIEFwcCBTdG9yZSBJRCBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3Npbmctb3ItaW52YWxpZC1ub25jZVwiIC8qIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRSAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgbm9uY2UuIFRoaXMgY2FuIG9jY3VyIGlmIHRoZSAnICtcclxuICAgICAgICAgICAgJ1NIQS0yNTYgaGFzaCBvZiB0aGUgcHJvdmlkZWQgcmF3IG5vbmNlIGRvZXMgbm90IG1hdGNoIHRoZSBoYXNoZWQgbm9uY2UgJyArXHJcbiAgICAgICAgICAgICdpbiB0aGUgSUQgdG9rZW4gcGF5bG9hZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLWluZm9cIiAvKiBNSVNTSU5HX01GQV9JTkZPICovXTogJ05vIHNlY29uZCBmYWN0b3IgaWRlbnRpZmllciBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovXTogJ1RoZSByZXF1ZXN0IGlzIG1pc3NpbmcgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcGhvbmUtbnVtYmVyXCIgLyogTUlTU0lOR19QSE9ORV9OVU1CRVIgKi9dOiAnVG8gc2VuZCB2ZXJpZmljYXRpb24gY29kZXMsIHByb3ZpZGUgYSBwaG9uZSBudW1iZXIgZm9yIHRoZSByZWNpcGllbnQuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIE1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSB2ZXJpZmljYXRpb24gSUQuJyxcclxuICAgICAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIE1PRFVMRV9ERVNUUk9ZRUQgKi9dOiAnVGhpcyBpbnN0YW5jZSBvZiBGaXJlYmFzZUFwcCBoYXMgYmVlbiBkZWxldGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCIgLyogTUZBX0lORk9fTk9UX0ZPVU5EICovXTogJ1RoZSB1c2VyIGRvZXMgbm90IGhhdmUgYSBzZWNvbmQgZmFjdG9yIG1hdGNoaW5nIHRoZSBpZGVudGlmaWVyIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBNRkFfUkVRVUlSRUQgKi9dOiAnUHJvb2Ygb2Ygb3duZXJzaGlwIG9mIGEgc2Vjb25kIGZhY3RvciBpcyByZXF1aXJlZCB0byBjb21wbGV0ZSBzaWduLWluLicsXHJcbiAgICAgICAgW1wiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovXTogJ0FuIGFjY291bnQgYWxyZWFkeSBleGlzdHMgd2l0aCB0aGUgc2FtZSBlbWFpbCBhZGRyZXNzIGJ1dCBkaWZmZXJlbnQgJyArXHJcbiAgICAgICAgICAgICdzaWduLWluIGNyZWRlbnRpYWxzLiBTaWduIGluIHVzaW5nIGEgcHJvdmlkZXIgYXNzb2NpYXRlZCB3aXRoIHRoaXMgJyArXHJcbiAgICAgICAgICAgICdlbWFpbCBhZGRyZXNzLicsXHJcbiAgICAgICAgW1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi9dOiAnQSBuZXR3b3JrIEF1dGhFcnJvciAoc3VjaCBhcyB0aW1lb3V0LCBpbnRlcnJ1cHRlZCBjb25uZWN0aW9uIG9yIHVucmVhY2hhYmxlIGhvc3QpIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogTk9fU1VDSF9QUk9WSURFUiAqL106ICdVc2VyIHdhcyBub3QgbGlua2VkIHRvIGFuIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJudWxsLXVzZXJcIiAvKiBOVUxMX1VTRVIgKi9dOiAnQSBudWxsIHVzZXIgb2JqZWN0IHdhcyBwcm92aWRlZCBhcyB0aGUgYXJndW1lbnQgZm9yIGFuIG9wZXJhdGlvbiB3aGljaCAnICtcclxuICAgICAgICAgICAgJ3JlcXVpcmVzIGEgbm9uLW51bGwgdXNlciBvYmplY3QuJyxcclxuICAgICAgICBbXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi9dOiAnVGhlIGdpdmVuIHNpZ24taW4gcHJvdmlkZXIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgRmlyZWJhc2UgcHJvamVjdC4gJyArXHJcbiAgICAgICAgICAgICdFbmFibGUgaXQgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUsIHVuZGVyIHRoZSBzaWduLWluIG1ldGhvZCB0YWIgb2YgdGhlICcgK1xyXG4gICAgICAgICAgICAnQXV0aCBzZWN0aW9uLicsXHJcbiAgICAgICAgW1wib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhlIGVudmlyb25tZW50IHRoaXMgYXBwbGljYXRpb24gaXMgJyArXHJcbiAgICAgICAgICAgICdydW5uaW5nIG9uLiBcImxvY2F0aW9uLnByb3RvY29sXCIgbXVzdCBiZSBodHRwLCBodHRwcyBvciBjaHJvbWUtZXh0ZW5zaW9uJyArXHJcbiAgICAgICAgICAgICcgYW5kIHdlYiBzdG9yYWdlIG11c3QgYmUgZW5hYmxlZC4nLFxyXG4gICAgICAgIFtcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovXTogJ1VuYWJsZSB0byBlc3RhYmxpc2ggYSBjb25uZWN0aW9uIHdpdGggdGhlIHBvcHVwLiBJdCBtYXkgaGF2ZSBiZWVuIGJsb2NrZWQgYnkgdGhlIGJyb3dzZXIuJyxcclxuICAgICAgICBbXCJwb3B1cC1jbG9zZWQtYnktdXNlclwiIC8qIFBPUFVQX0NMT1NFRF9CWV9VU0VSICovXTogJ1RoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi4nLFxyXG4gICAgICAgIFtcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogUFJPVklERVJfQUxSRUFEWV9MSU5LRUQgKi9dOiAnVXNlciBjYW4gb25seSBiZSBsaW5rZWQgdG8gb25lIGlkZW50aXR5IGZvciB0aGUgZ2l2ZW4gcHJvdmlkZXIuJyxcclxuICAgICAgICBbXCJxdW90YS1leGNlZWRlZFwiIC8qIFFVT1RBX0VYQ0VFREVEICovXTogXCJUaGUgcHJvamVjdCdzIHF1b3RhIGZvciB0aGlzIG9wZXJhdGlvbiBoYXMgYmVlbiBleGNlZWRlZC5cIixcclxuICAgICAgICBbXCJyZWRpcmVjdC1jYW5jZWxsZWQtYnktdXNlclwiIC8qIFJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovXTogJ1RoZSByZWRpcmVjdCBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nLicsXHJcbiAgICAgICAgW1wicmVkaXJlY3Qtb3BlcmF0aW9uLXBlbmRpbmdcIiAvKiBSRURJUkVDVF9PUEVSQVRJT05fUEVORElORyAqL106ICdBIHJlZGlyZWN0IHNpZ24taW4gb3BlcmF0aW9uIGlzIGFscmVhZHkgcGVuZGluZy4nLFxyXG4gICAgICAgIFtcInJlamVjdGVkLWNyZWRlbnRpYWxcIiAvKiBSRUpFQ1RFRF9DUkVERU5USUFMICovXTogJ1RoZSByZXF1ZXN0IGNvbnRhaW5zIG1hbGZvcm1lZCBvciBtaXNtYXRjaGluZyBjcmVkZW50aWFscy4nLFxyXG4gICAgICAgIFtcInNlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2VcIiAvKiBTRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQgKi9dOiAnVGhlIHNlY29uZCBmYWN0b3IgaXMgYWxyZWFkeSBlbnJvbGxlZCBvbiB0aGlzIGFjY291bnQuJyxcclxuICAgICAgICBbXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogJ1RoZSBtYXhpbXVtIGFsbG93ZWQgbnVtYmVyIG9mIHNlY29uZCBmYWN0b3JzIG9uIGEgdXNlciBoYXMgYmVlbiBleGNlZWRlZC4nLFxyXG4gICAgICAgIFtcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIFRFTkFOVF9JRF9NSVNNQVRDSCAqL106IFwiVGhlIHByb3ZpZGVkIHRlbmFudCBJRCBkb2VzIG5vdCBtYXRjaCB0aGUgQXV0aCBpbnN0YW5jZSdzIHRlbmFudCBJRFwiLFxyXG4gICAgICAgIFtcInRpbWVvdXRcIiAvKiBUSU1FT1VUICovXTogJ1RoZSBvcGVyYXRpb24gaGFzIHRpbWVkIG91dC4nLFxyXG4gICAgICAgIFtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi9dOiBcIlRoZSB1c2VyJ3MgY3JlZGVudGlhbCBpcyBubyBsb25nZXIgdmFsaWQuIFRoZSB1c2VyIG11c3Qgc2lnbiBpbiBhZ2Fpbi5cIixcclxuICAgICAgICBbXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106ICdXZSBoYXZlIGJsb2NrZWQgYWxsIHJlcXVlc3RzIGZyb20gdGhpcyBkZXZpY2UgZHVlIHRvIHVudXN1YWwgYWN0aXZpdHkuICcgK1xyXG4gICAgICAgICAgICAnVHJ5IGFnYWluIGxhdGVyLicsXHJcbiAgICAgICAgW1widW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi9dOiAnVGhlIGRvbWFpbiBvZiB0aGUgY29udGludWUgVVJMIGlzIG5vdCB3aGl0ZWxpc3RlZC4gIFBsZWFzZSB3aGl0ZWxpc3QgJyArXHJcbiAgICAgICAgICAgICd0aGUgZG9tYWluIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yXCIgLyogVU5TVVBQT1JURURfRklSU1RfRkFDVE9SICovXTogJ0Vucm9sbGluZyBhIHNlY29uZCBmYWN0b3Igb3Igc2lnbmluZyBpbiB3aXRoIGEgbXVsdGktZmFjdG9yIGFjY291bnQgcmVxdWlyZXMgc2lnbi1pbiB3aXRoIGEgc3VwcG9ydGVkIGZpcnN0IGZhY3Rvci4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGVcIiAvKiBVTlNVUFBPUlRFRF9QRVJTSVNURU5DRSAqL106ICdUaGUgY3VycmVudCBlbnZpcm9ubWVudCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZS4nLFxyXG4gICAgICAgIFtcInVuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb25cIiAvKiBVTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBtdWx0aS10ZW5hbnQgY29udGV4dC4nLFxyXG4gICAgICAgIFtcInVudmVyaWZpZWQtZW1haWxcIiAvKiBVTlZFUklGSUVEX0VNQUlMICovXTogJ1RoZSBvcGVyYXRpb24gcmVxdWlyZXMgYSB2ZXJpZmllZCBlbWFpbC4nLFxyXG4gICAgICAgIFtcInVzZXItY2FuY2VsbGVkXCIgLyogVVNFUl9DQU5DRUxMRUQgKi9dOiAnVGhlIHVzZXIgZGlkIG5vdCBncmFudCB5b3VyIGFwcGxpY2F0aW9uIHRoZSBwZXJtaXNzaW9ucyBpdCByZXF1ZXN0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLW5vdC1mb3VuZFwiIC8qIFVTRVJfREVMRVRFRCAqL106ICdUaGVyZSBpcyBubyB1c2VyIHJlY29yZCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgaWRlbnRpZmllci4gVGhlIHVzZXIgbWF5ICcgK1xyXG4gICAgICAgICAgICAnaGF2ZSBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLWRpc2FibGVkXCIgLyogVVNFUl9ESVNBQkxFRCAqL106ICdUaGUgdXNlciBhY2NvdW50IGhhcyBiZWVuIGRpc2FibGVkIGJ5IGFuIGFkbWluaXN0cmF0b3IuJyxcclxuICAgICAgICBbXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqL106ICdUaGUgc3VwcGxpZWQgY3JlZGVudGlhbHMgZG8gbm90IGNvcnJlc3BvbmQgdG8gdGhlIHByZXZpb3VzbHkgc2lnbmVkIGluIHVzZXIuJyxcclxuICAgICAgICBbXCJ1c2VyLXNpZ25lZC1vdXRcIiAvKiBVU0VSX1NJR05FRF9PVVQgKi9dOiAnJyxcclxuICAgICAgICBbXCJ3ZWFrLXBhc3N3b3JkXCIgLyogV0VBS19QQVNTV09SRCAqL106ICdUaGUgcGFzc3dvcmQgbXVzdCBiZSA2IGNoYXJhY3RlcnMgbG9uZyBvciBtb3JlLicsXHJcbiAgICAgICAgW1wid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqL106ICdUaGlzIGJyb3dzZXIgaXMgbm90IHN1cHBvcnRlZCBvciAzcmQgcGFydHkgY29va2llcyBhbmQgZGF0YSBtYXkgYmUgZGlzYWJsZWQuJyxcclxuICAgICAgICBbXCJhbHJlYWR5LWluaXRpYWxpemVkXCIgLyogQUxSRUFEWV9JTklUSUFMSVpFRCAqL106ICdpbml0aWFsaXplQXV0aCgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgICdkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplQXV0aCgpIHdpdGggdGhlICcgK1xyXG4gICAgICAgICAgICAnc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEF1dGgoKSB0byByZXR1cm4gdGhlJyArXHJcbiAgICAgICAgICAgICcgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS4nXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIF9wcm9kRXJyb3JNYXAoKSB7XHJcbiAgICAvLyBXZSB3aWxsIGluY2x1ZGUgdGhpcyBvbmUgbWVzc2FnZSBpbiB0aGUgcHJvZCBlcnJvciBtYXAgc2luY2UgYnkgdGhlIHZlcnlcclxuICAgIC8vIG5hdHVyZSBvZiB0aGlzIGVycm9yLCBkZXZlbG9wZXJzIHdpbGwgbmV2ZXIgYmUgYWJsZSB0byBzZWUgdGhlIG1lc3NhZ2VcclxuICAgIC8vIHVzaW5nIHRoZSBkZWJ1Z0Vycm9yTWFwICh3aGljaCBpcyBpbnN0YWxsZWQgZHVyaW5nIGF1dGggaW5pdGlhbGl6YXRpb24pLlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBBIHZlcmJvc2UgZXJyb3IgbWFwIHdpdGggZGV0YWlsZWQgZGVzY3JpcHRpb25zIGZvciBtb3N0IGVycm9yIGNvZGVzLlxyXG4gKlxyXG4gKiBTZWUgZGlzY3Vzc2lvbiBhdCB7QGxpbmsgQXV0aEVycm9yTWFwfVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBkZWJ1Z0Vycm9yTWFwID0gX2RlYnVnRXJyb3JNYXA7XHJcbi8qKlxyXG4gKiBBIG1pbmltYWwgZXJyb3IgbWFwIHdpdGggYWxsIHZlcmJvc2UgZXJyb3IgbWVzc2FnZXMgc3RyaXBwZWQuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IHByb2RFcnJvck1hcCA9IF9wcm9kRXJyb3JNYXA7XHJcbmNvbnN0IF9ERUZBVUxUX0FVVEhfRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBfcHJvZEVycm9yTWFwKCkpO1xyXG4vKipcclxuICogQSBtYXAgb2YgcG90ZW50aWFsIGBBdXRoYCBlcnJvciBjb2RlcywgZm9yIGVhc2llciBjb21wYXJpc29uIHdpdGggZXJyb3JzXHJcbiAqIHRocm93biBieSB0aGUgU0RLLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBOb3RlIHRoYXQgeW91IGNhbid0IHRyZWUtc2hha2UgaW5kaXZpZHVhbCBrZXlzXHJcbiAqIGluIHRoZSBtYXAsIHNvIGJ5IHVzaW5nIHRoZSBtYXAgeW91IG1pZ2h0IHN1YnN0YW50aWFsbHkgaW5jcmVhc2UgeW91clxyXG4gKiBidW5kbGUgc2l6ZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQVVUSF9FUlJPUl9DT0RFU19NQVBfRE9fTk9UX1VTRV9JTlRFUk5BTExZID0ge1xyXG4gICAgQURNSU5fT05MWV9PUEVSQVRJT046ICdhdXRoL2FkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uJyxcclxuICAgIEFSR1VNRU5UX0VSUk9SOiAnYXV0aC9hcmd1bWVudC1lcnJvcicsXHJcbiAgICBBUFBfTk9UX0FVVEhPUklaRUQ6ICdhdXRoL2FwcC1ub3QtYXV0aG9yaXplZCcsXHJcbiAgICBBUFBfTk9UX0lOU1RBTExFRDogJ2F1dGgvYXBwLW5vdC1pbnN0YWxsZWQnLFxyXG4gICAgQ0FQVENIQV9DSEVDS19GQUlMRUQ6ICdhdXRoL2NhcHRjaGEtY2hlY2stZmFpbGVkJyxcclxuICAgIENPREVfRVhQSVJFRDogJ2F1dGgvY29kZS1leHBpcmVkJyxcclxuICAgIENPUkRPVkFfTk9UX1JFQURZOiAnYXV0aC9jb3Jkb3ZhLW5vdC1yZWFkeScsXHJcbiAgICBDT1JTX1VOU1VQUE9SVEVEOiAnYXV0aC9jb3JzLXVuc3VwcG9ydGVkJyxcclxuICAgIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0U6ICdhdXRoL2NyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgQ1JFREVOVElBTF9NSVNNQVRDSDogJ2F1dGgvY3VzdG9tLXRva2VuLW1pc21hdGNoJyxcclxuICAgIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTjogJ2F1dGgvcmVxdWlyZXMtcmVjZW50LWxvZ2luJyxcclxuICAgIERFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSDogJ2F1dGgvZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aCcsXHJcbiAgICBEWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRDogJ2F1dGgvZHluYW1pYy1saW5rLW5vdC1hY3RpdmF0ZWQnLFxyXG4gICAgRU1BSUxfQ0hBTkdFX05FRURTX1ZFUklGSUNBVElPTjogJ2F1dGgvZW1haWwtY2hhbmdlLW5lZWRzLXZlcmlmaWNhdGlvbicsXHJcbiAgICBFTUFJTF9FWElTVFM6ICdhdXRoL2VtYWlsLWFscmVhZHktaW4tdXNlJyxcclxuICAgIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQ6ICdhdXRoL2VtdWxhdG9yLWNvbmZpZy1mYWlsZWQnLFxyXG4gICAgRVhQSVJFRF9PT0JfQ09ERTogJ2F1dGgvZXhwaXJlZC1hY3Rpb24tY29kZScsXHJcbiAgICBFWFBJUkVEX1BPUFVQX1JFUVVFU1Q6ICdhdXRoL2NhbmNlbGxlZC1wb3B1cC1yZXF1ZXN0JyxcclxuICAgIElOVEVSTkFMX0VSUk9SOiAnYXV0aC9pbnRlcm5hbC1lcnJvcicsXHJcbiAgICBJTlZBTElEX0FQSV9LRVk6ICdhdXRoL2ludmFsaWQtYXBpLWtleScsXHJcbiAgICBJTlZBTElEX0FQUF9DUkVERU5USUFMOiAnYXV0aC9pbnZhbGlkLWFwcC1jcmVkZW50aWFsJyxcclxuICAgIElOVkFMSURfQVBQX0lEOiAnYXV0aC9pbnZhbGlkLWFwcC1pZCcsXHJcbiAgICBJTlZBTElEX0FVVEg6ICdhdXRoL2ludmFsaWQtdXNlci10b2tlbicsXHJcbiAgICBJTlZBTElEX0FVVEhfRVZFTlQ6ICdhdXRoL2ludmFsaWQtYXV0aC1ldmVudCcsXHJcbiAgICBJTlZBTElEX0NFUlRfSEFTSDogJ2F1dGgvaW52YWxpZC1jZXJ0LWhhc2gnLFxyXG4gICAgSU5WQUxJRF9DT0RFOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfQ09OVElOVUVfVVJJOiAnYXV0aC9pbnZhbGlkLWNvbnRpbnVlLXVyaScsXHJcbiAgICBJTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTjogJ2F1dGgvaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb24nLFxyXG4gICAgSU5WQUxJRF9DVVNUT01fVE9LRU46ICdhdXRoL2ludmFsaWQtY3VzdG9tLXRva2VuJyxcclxuICAgIElOVkFMSURfRFlOQU1JQ19MSU5LX0RPTUFJTjogJ2F1dGgvaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluJyxcclxuICAgIElOVkFMSURfRU1BSUw6ICdhdXRoL2ludmFsaWQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUU6ICdhdXRoL2ludmFsaWQtZW11bGF0b3Itc2NoZW1lJyxcclxuICAgIElOVkFMSURfSURQX1JFU1BPTlNFOiAnYXV0aC9pbnZhbGlkLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9NRVNTQUdFX1BBWUxPQUQ6ICdhdXRoL2ludmFsaWQtbWVzc2FnZS1wYXlsb2FkJyxcclxuICAgIElOVkFMSURfTUZBX1NFU1NJT046ICdhdXRoL2ludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb24nLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQ6ICdhdXRoL2ludmFsaWQtb2F1dGgtY2xpZW50LWlkJyxcclxuICAgIElOVkFMSURfT0FVVEhfUFJPVklERVI6ICdhdXRoL2ludmFsaWQtb2F1dGgtcHJvdmlkZXInLFxyXG4gICAgSU5WQUxJRF9PT0JfQ09ERTogJ2F1dGgvaW52YWxpZC1hY3Rpb24tY29kZScsXHJcbiAgICBJTlZBTElEX09SSUdJTjogJ2F1dGgvdW5hdXRob3JpemVkLWRvbWFpbicsXHJcbiAgICBJTlZBTElEX1BBU1NXT1JEOiAnYXV0aC93cm9uZy1wYXNzd29yZCcsXHJcbiAgICBJTlZBTElEX1BFUlNJU1RFTkNFOiAnYXV0aC9pbnZhbGlkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgSU5WQUxJRF9QSE9ORV9OVU1CRVI6ICdhdXRoL2ludmFsaWQtcGhvbmUtbnVtYmVyJyxcclxuICAgIElOVkFMSURfUFJPVklERVJfSUQ6ICdhdXRoL2ludmFsaWQtcHJvdmlkZXItaWQnLFxyXG4gICAgSU5WQUxJRF9SRUNJUElFTlRfRU1BSUw6ICdhdXRoL2ludmFsaWQtcmVjaXBpZW50LWVtYWlsJyxcclxuICAgIElOVkFMSURfU0VOREVSOiAnYXV0aC9pbnZhbGlkLXNlbmRlcicsXHJcbiAgICBJTlZBTElEX1NFU1NJT05fSU5GTzogJ2F1dGgvaW52YWxpZC12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgSU5WQUxJRF9URU5BTlRfSUQ6ICdhdXRoL2ludmFsaWQtdGVuYW50LWlkJyxcclxuICAgIE1GQV9JTkZPX05PVF9GT1VORDogJ2F1dGgvbXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kJyxcclxuICAgIE1GQV9SRVFVSVJFRDogJ2F1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRTogJ2F1dGgvbWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lJyxcclxuICAgIE1JU1NJTkdfQVBQX0NSRURFTlRJQUw6ICdhdXRoL21pc3NpbmctYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgTUlTU0lOR19BVVRIX0RPTUFJTjogJ2F1dGgvYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkJyxcclxuICAgIE1JU1NJTkdfQ09ERTogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24tY29kZScsXHJcbiAgICBNSVNTSU5HX0NPTlRJTlVFX1VSSTogJ2F1dGgvbWlzc2luZy1jb250aW51ZS11cmknLFxyXG4gICAgTUlTU0lOR19JRlJBTUVfU1RBUlQ6ICdhdXRoL21pc3NpbmctaWZyYW1lLXN0YXJ0JyxcclxuICAgIE1JU1NJTkdfSU9TX0JVTkRMRV9JRDogJ2F1dGgvbWlzc2luZy1pb3MtYnVuZGxlLWlkJyxcclxuICAgIE1JU1NJTkdfT1JfSU5WQUxJRF9OT05DRTogJ2F1dGgvbWlzc2luZy1vci1pbnZhbGlkLW5vbmNlJyxcclxuICAgIE1JU1NJTkdfTUZBX0lORk86ICdhdXRoL21pc3NpbmctbXVsdGktZmFjdG9yLWluZm8nLFxyXG4gICAgTUlTU0lOR19NRkFfU0VTU0lPTjogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBNSVNTSU5HX1BIT05FX05VTUJFUjogJ2F1dGgvbWlzc2luZy1waG9uZS1udW1iZXInLFxyXG4gICAgTUlTU0lOR19TRVNTSU9OX0lORk86ICdhdXRoL21pc3NpbmctdmVyaWZpY2F0aW9uLWlkJyxcclxuICAgIE1PRFVMRV9ERVNUUk9ZRUQ6ICdhdXRoL2FwcC1kZWxldGVkJyxcclxuICAgIE5FRURfQ09ORklSTUFUSU9OOiAnYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsJyxcclxuICAgIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQ6ICdhdXRoL25ldHdvcmstcmVxdWVzdC1mYWlsZWQnLFxyXG4gICAgTlVMTF9VU0VSOiAnYXV0aC9udWxsLXVzZXInLFxyXG4gICAgTk9fQVVUSF9FVkVOVDogJ2F1dGgvbm8tYXV0aC1ldmVudCcsXHJcbiAgICBOT19TVUNIX1BST1ZJREVSOiAnYXV0aC9uby1zdWNoLXByb3ZpZGVyJyxcclxuICAgIE9QRVJBVElPTl9OT1RfQUxMT1dFRDogJ2F1dGgvb3BlcmF0aW9uLW5vdC1hbGxvd2VkJyxcclxuICAgIE9QRVJBVElPTl9OT1RfU1VQUE9SVEVEOiAnYXV0aC9vcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50JyxcclxuICAgIFBPUFVQX0JMT0NLRUQ6ICdhdXRoL3BvcHVwLWJsb2NrZWQnLFxyXG4gICAgUE9QVVBfQ0xPU0VEX0JZX1VTRVI6ICdhdXRoL3BvcHVwLWNsb3NlZC1ieS11c2VyJyxcclxuICAgIFBST1ZJREVSX0FMUkVBRFlfTElOS0VEOiAnYXV0aC9wcm92aWRlci1hbHJlYWR5LWxpbmtlZCcsXHJcbiAgICBRVU9UQV9FWENFRURFRDogJ2F1dGgvcXVvdGEtZXhjZWVkZWQnLFxyXG4gICAgUkVESVJFQ1RfQ0FOQ0VMTEVEX0JZX1VTRVI6ICdhdXRoL3JlZGlyZWN0LWNhbmNlbGxlZC1ieS11c2VyJyxcclxuICAgIFJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HOiAnYXV0aC9yZWRpcmVjdC1vcGVyYXRpb24tcGVuZGluZycsXHJcbiAgICBSRUpFQ1RFRF9DUkVERU5USUFMOiAnYXV0aC9yZWplY3RlZC1jcmVkZW50aWFsJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRDogJ2F1dGgvc2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEOiAnYXV0aC9tYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWQnLFxyXG4gICAgVEVOQU5UX0lEX01JU01BVENIOiAnYXV0aC90ZW5hbnQtaWQtbWlzbWF0Y2gnLFxyXG4gICAgVElNRU9VVDogJ2F1dGgvdGltZW91dCcsXHJcbiAgICBUT0tFTl9FWFBJUkVEOiAnYXV0aC91c2VyLXRva2VuLWV4cGlyZWQnLFxyXG4gICAgVE9PX01BTllfQVRURU1QVFNfVFJZX0xBVEVSOiAnYXV0aC90b28tbWFueS1yZXF1ZXN0cycsXHJcbiAgICBVTkFVVEhPUklaRURfRE9NQUlOOiAnYXV0aC91bmF1dGhvcml6ZWQtY29udGludWUtdXJpJyxcclxuICAgIFVOU1VQUE9SVEVEX0ZJUlNUX0ZBQ1RPUjogJ2F1dGgvdW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yJyxcclxuICAgIFVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFOiAnYXV0aC91bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlJyxcclxuICAgIFVOU1VQUE9SVEVEX1RFTkFOVF9PUEVSQVRJT046ICdhdXRoL3Vuc3VwcG9ydGVkLXRlbmFudC1vcGVyYXRpb24nLFxyXG4gICAgVU5WRVJJRklFRF9FTUFJTDogJ2F1dGgvdW52ZXJpZmllZC1lbWFpbCcsXHJcbiAgICBVU0VSX0NBTkNFTExFRDogJ2F1dGgvdXNlci1jYW5jZWxsZWQnLFxyXG4gICAgVVNFUl9ERUxFVEVEOiAnYXV0aC91c2VyLW5vdC1mb3VuZCcsXHJcbiAgICBVU0VSX0RJU0FCTEVEOiAnYXV0aC91c2VyLWRpc2FibGVkJyxcclxuICAgIFVTRVJfTUlTTUFUQ0g6ICdhdXRoL3VzZXItbWlzbWF0Y2gnLFxyXG4gICAgVVNFUl9TSUdORURfT1VUOiAnYXV0aC91c2VyLXNpZ25lZC1vdXQnLFxyXG4gICAgV0VBS19QQVNTV09SRDogJ2F1dGgvd2Vhay1wYXNzd29yZCcsXHJcbiAgICBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRDogJ2F1dGgvd2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQUxSRUFEWV9JTklUSUFMSVpFRDogJ2F1dGgvYWxyZWFkeS1pbml0aWFsaXplZCdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nQ2xpZW50ID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2F1dGgnKTtcclxuZnVuY3Rpb24gX2xvZ0Vycm9yKG1zZywgLi4uYXJncykge1xyXG4gICAgaWYgKGxvZ0NsaWVudC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5FUlJPUikge1xyXG4gICAgICAgIGxvZ0NsaWVudC5lcnJvcihgQXV0aCAoJHtTREtfVkVSU0lPTn0pOiAke21zZ31gLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZmFpbChhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9jcmVhdGVFcnJvcihhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICByZXR1cm4gY3JlYXRlRXJyb3JJbnRlcm5hbChhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBjb2RlLCBtZXNzYWdlKSB7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcHJvZEVycm9yTWFwKCkpLCB7IFtjb2RlXTogbWVzc2FnZSB9KTtcclxuICAgIGNvbnN0IGZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXApO1xyXG4gICAgcmV0dXJuIGZhY3RvcnkuY3JlYXRlKGNvZGUsIHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBvYmplY3QsIGluc3RhbmNlKSB7XHJcbiAgICBjb25zdCBjb25zdHJ1Y3Rvckluc3RhbmNlID0gaW5zdGFuY2U7XHJcbiAgICBpZiAoIShvYmplY3QgaW5zdGFuY2VvZiBjb25zdHJ1Y3Rvckluc3RhbmNlKSkge1xyXG4gICAgICAgIGlmIChjb25zdHJ1Y3Rvckluc3RhbmNlLm5hbWUgIT09IG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lKSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgYFR5cGUgb2YgJHtvYmplY3QuY29uc3RydWN0b3IubmFtZX0gZG9lcyBub3QgbWF0Y2ggZXhwZWN0ZWQgaW5zdGFuY2UuYCArXHJcbiAgICAgICAgICAgIGBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBBdXRoIFNESz9gKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIGlmICh0eXBlb2YgYXV0aE9yQ29kZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBjb25zdCBjb2RlID0gcmVzdFswXTtcclxuICAgICAgICBjb25zdCBmdWxsUGFyYW1zID0gWy4uLnJlc3Quc2xpY2UoMSldO1xyXG4gICAgICAgIGlmIChmdWxsUGFyYW1zWzBdKSB7XHJcbiAgICAgICAgICAgIGZ1bGxQYXJhbXNbMF0uYXBwTmFtZSA9IGF1dGhPckNvZGUubmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF1dGhPckNvZGUuX2Vycm9yRmFjdG9yeS5jcmVhdGUoY29kZSwgLi4uZnVsbFBhcmFtcyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZLmNyZWF0ZShhdXRoT3JDb2RlLCAuLi5yZXN0KTtcclxufVxyXG5mdW5jdGlvbiBfYXNzZXJ0KGFzc2VydGlvbiwgYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICB0aHJvdyBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIGludGVybmFsIGVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBmYWlsdXJlIHR5cGUgb2YgZmFpbHVyZSBlbmNvdW50ZXJlZFxyXG4gKiBAdGhyb3dzIEVycm9yXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0ZhaWwoZmFpbHVyZSkge1xyXG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxyXG4gICAgLy8gZXhjZXB0aW9uIGlzIHN3YWxsb3dlZC5cclxuICAgIGNvbnN0IG1lc3NhZ2UgPSBgSU5URVJOQUwgQVNTRVJUSU9OIEZBSUxFRDogYCArIGZhaWx1cmU7XHJcbiAgICBfbG9nRXJyb3IobWVzc2FnZSk7XHJcbiAgICAvLyBOT1RFOiBXZSBkb24ndCB1c2UgRmlyZWJhc2VFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXHJcbiAgICAvLyB0aGF0IGNhbm5vdCBiZSBoYW5kbGVkIGJ5IHRoZSB1c2VyLiAoQWxzbyBpdCB3b3VsZCBjcmVhdGUgYSBjaXJjdWxhclxyXG4gICAgLy8gZGVwZW5kZW5jeSBiZXR3ZWVuIHRoZSBlcnJvciBhbmQgYXNzZXJ0IG1vZHVsZXMgd2hpY2ggZG9lc24ndCB3b3JrLilcclxuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlKTtcclxufVxyXG4vKipcclxuICogRmFpbHMgaWYgdGhlIGdpdmVuIGFzc2VydGlvbiBjb25kaXRpb24gaXMgZmFsc2UsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlXHJcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXNzZXJ0aW9uXHJcbiAqIEBwYXJhbSBtZXNzYWdlXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWJ1Z0Fzc2VydChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgZGVidWdGYWlsKG1lc3NhZ2UpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGluc3RhbmNlQ2FjaGUgPSBuZXcgTWFwKCk7XHJcbmZ1bmN0aW9uIF9nZXRJbnN0YW5jZShjbHMpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNscyBpbnN0YW5jZW9mIEZ1bmN0aW9uLCAnRXhwZWN0ZWQgYSBjbGFzcyBkZWZpbml0aW9uJyk7XHJcbiAgICBsZXQgaW5zdGFuY2UgPSBpbnN0YW5jZUNhY2hlLmdldChjbHMpO1xyXG4gICAgaWYgKGluc3RhbmNlKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoaW5zdGFuY2UgaW5zdGFuY2VvZiBjbHMsICdJbnN0YW5jZSBzdG9yZWQgaW4gY2FjaGUgbWlzbWF0Y2hlZCB3aXRoIGNsYXNzJyk7XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaW5zdGFuY2UgPSBuZXcgY2xzKCk7XHJcbiAgICBpbnN0YW5jZUNhY2hlLnNldChjbHMsIGluc3RhbmNlKTtcclxuICAgIHJldHVybiBpbnN0YW5jZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW5pdGlhbGl6ZXMgYW4ge0BsaW5rIEF1dGh9IGluc3RhbmNlIHdpdGggZmluZS1ncmFpbmVkIGNvbnRyb2wgb3ZlclxyXG4gKiB7QGxpbmsgRGVwZW5kZW5jaWVzfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICpcclxuICogVGhpcyBmdW5jdGlvbiBhbGxvd3MgbW9yZSBjb250cm9sIG92ZXIgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0aGFuXHJcbiAqIHtAbGluayBnZXRBdXRofS4gYGdldEF1dGhgIHVzZXMgcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdHMgdG8gc3VwcGx5XHJcbiAqIHRoZSB7QGxpbmsgRGVwZW5kZW5jaWVzfS4gSW4gZ2VuZXJhbCwgYGdldEF1dGhgIGlzIHRoZSBlYXNpZXN0IHdheSB0b1xyXG4gKiBpbml0aWFsaXplIEF1dGggYW5kIHdvcmtzIGZvciBtb3N0IHVzZSBjYXNlcy4gVXNlIGBpbml0aWFsaXplQXV0aGAgaWYgeW91XHJcbiAqIG5lZWQgY29udHJvbCBvdmVyIHdoaWNoIHBlcnNpc3RlbmNlIGxheWVyIGlzIHVzZWQsIG9yIHRvIG1pbmltaXplIGJ1bmRsZVxyXG4gKiBzaXplIGlmIHlvdSdyZSBub3QgdXNpbmcgZWl0aGVyIGBzaWduSW5XaXRoUG9wdXBgIG9yIGBzaWduSW5XaXRoUmVkaXJlY3RgLlxyXG4gKlxyXG4gKiBGb3IgZXhhbXBsZSwgaWYgeW91ciBhcHAgb25seSB1c2VzIGFub255bW91cyBhY2NvdW50cyBhbmQgeW91IG9ubHkgd2FudFxyXG4gKiBhY2NvdW50cyBzYXZlZCBmb3IgdGhlIGN1cnJlbnQgc2Vzc2lvbiwgaW5pdGlhbGl6ZSBgQXV0aGAgd2l0aDpcclxuICpcclxuICogYGBganNcclxuICogY29uc3QgYXV0aCA9IGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gKiAgIHBlcnNpc3RlbmNlOiBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLFxyXG4gKiAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogdW5kZWZpbmVkLFxyXG4gKiB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGluaXRpYWxpemVBdXRoKGFwcCwgZGVwcykge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBpbml0aWFsT3B0aW9ucyA9IHByb3ZpZGVyLmdldE9wdGlvbnMoKTtcclxuICAgICAgICBpZiAoZGVlcEVxdWFsKGluaXRpYWxPcHRpb25zLCBkZXBzICE9PSBudWxsICYmIGRlcHMgIT09IHZvaWQgMCA/IGRlcHMgOiB7fSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGF1dGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImFscmVhZHktaW5pdGlhbGl6ZWRcIiAvKiBBTFJFQURZX0lOSVRJQUxJWkVEICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjb25zdCBhdXRoID0gcHJvdmlkZXIuaW5pdGlhbGl6ZSh7IG9wdGlvbnM6IGRlcHMgfSk7XHJcbiAgICByZXR1cm4gYXV0aDtcclxufVxyXG5mdW5jdGlvbiBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZSA9IChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMucGVyc2lzdGVuY2UpIHx8IFtdO1xyXG4gICAgY29uc3QgaGllcmFyY2h5ID0gKEFycmF5LmlzQXJyYXkocGVyc2lzdGVuY2UpID8gcGVyc2lzdGVuY2UgOiBbcGVyc2lzdGVuY2VdKS5tYXAoX2dldEluc3RhbmNlKTtcclxuICAgIGlmIChkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMuZXJyb3JNYXApIHtcclxuICAgICAgICBhdXRoLl91cGRhdGVFcnJvck1hcChkZXBzLmVycm9yTWFwKTtcclxuICAgIH1cclxuICAgIC8vIFRoaXMgcHJvbWlzZSBpcyBpbnRlbmRlZCB0byBmbG9hdDsgYXV0aCBpbml0aWFsaXphdGlvbiBoYXBwZW5zIGluIHRoZVxyXG4gICAgLy8gYmFja2dyb3VuZCwgbWVhbndoaWxlIHRoZSBhdXRoIG9iamVjdCBtYXkgYmUgdXNlZCBieSB0aGUgYXBwLlxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xyXG4gICAgYXV0aC5faW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZShoaWVyYXJjaHksIGRlcHMgPT09IG51bGwgfHwgZGVwcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogZGVwcy5wb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50VXJsKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5ocmVmKSkgfHwgJyc7XHJcbn1cclxuZnVuY3Rpb24gX2lzSHR0cE9ySHR0cHMoKSB7XHJcbiAgICByZXR1cm4gX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2h0dHA6JyB8fCBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cHM6JztcclxufVxyXG5mdW5jdGlvbiBfZ2V0Q3VycmVudFNjaGVtZSgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICgoX2EgPSBzZWxmLmxvY2F0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHJvdG9jb2wpKSB8fCBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEZXRlcm1pbmUgd2hldGhlciB0aGUgYnJvd3NlciBpcyB3b3JraW5nIG9ubGluZVxyXG4gKi9cclxuZnVuY3Rpb24gX2lzT25saW5lKCkge1xyXG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgbmF2aWdhdG9yICYmXHJcbiAgICAgICAgJ29uTGluZScgaW4gbmF2aWdhdG9yICYmXHJcbiAgICAgICAgdHlwZW9mIG5hdmlnYXRvci5vbkxpbmUgPT09ICdib29sZWFuJyAmJlxyXG4gICAgICAgIC8vIEFwcGx5IG9ubHkgZm9yIHRyYWRpdGlvbmFsIHdlYiBhcHBzIGFuZCBDaHJvbWUgZXh0ZW5zaW9ucy5cclxuICAgICAgICAvLyBUaGlzIGlzIGVzcGVjaWFsbHkgdHJ1ZSBmb3IgQ29yZG92YSBhcHBzIHdoaWNoIGhhdmUgdW5yZWxpYWJsZVxyXG4gICAgICAgIC8vIG5hdmlnYXRvci5vbkxpbmUgYmVoYXZpb3IgdW5sZXNzIGNvcmRvdmEtcGx1Z2luLW5ldHdvcmstaW5mb3JtYXRpb24gaXNcclxuICAgICAgICAvLyBpbnN0YWxsZWQgd2hpY2ggb3ZlcndyaXRlcyB0aGUgbmF0aXZlIG5hdmlnYXRvci5vbkxpbmUgdmFsdWUgYW5kXHJcbiAgICAgICAgLy8gZGVmaW5lcyBuYXZpZ2F0b3IuY29ubmVjdGlvbi5cclxuICAgICAgICAoX2lzSHR0cE9ySHR0cHMoKSB8fCBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fCAnY29ubmVjdGlvbicgaW4gbmF2aWdhdG9yKSkge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3Iub25MaW5lO1xyXG4gICAgfVxyXG4gICAgLy8gSWYgd2UgY2FuJ3QgZGV0ZXJtaW5lIHRoZSBzdGF0ZSwgYXNzdW1lIGl0IGlzIG9ubGluZS5cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRVc2VyTGFuZ3VhZ2UoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IG5hdmlnYXRvckxhbmd1YWdlID0gbmF2aWdhdG9yO1xyXG4gICAgcmV0dXJuIChcclxuICAgIC8vIE1vc3QgcmVsaWFibGUsIGJ1dCBvbmx5IHN1cHBvcnRlZCBpbiBDaHJvbWUvRmlyZWZveC5cclxuICAgIChuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXMgJiYgbmF2aWdhdG9yTGFuZ3VhZ2UubGFuZ3VhZ2VzWzBdKSB8fFxyXG4gICAgICAgIC8vIFN1cHBvcnRlZCBpbiBtb3N0IGJyb3dzZXJzLCBidXQgcmV0dXJucyB0aGUgbGFuZ3VhZ2Ugb2YgdGhlIGJyb3dzZXJcclxuICAgICAgICAvLyBVSSwgbm90IHRoZSBsYW5ndWFnZSBzZXQgaW4gYnJvd3NlciBzZXR0aW5ncy5cclxuICAgICAgICBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZSB8fFxyXG4gICAgICAgIC8vIENvdWxkbid0IGRldGVybWluZSBsYW5ndWFnZS5cclxuICAgICAgICBudWxsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQSBzdHJ1Y3R1cmUgdG8gaGVscCBwaWNrIGJldHdlZW4gYSByYW5nZSBvZiBsb25nIGFuZCBzaG9ydCBkZWxheSBkdXJhdGlvbnNcclxuICogZGVwZW5kaW5nIG9uIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiBJbiBnZW5lcmFsLCB0aGUgbG9uZyBkZWxheSBpcyB1c2VkIGZvclxyXG4gKiBtb2JpbGUgZW52aXJvbm1lbnRzIHdoZXJlYXMgc2hvcnQgZGVsYXlzIGFyZSB1c2VkIGZvciBkZXNrdG9wIGVudmlyb25tZW50cy5cclxuICovXHJcbmNsYXNzIERlbGF5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNob3J0RGVsYXksIGxvbmdEZWxheSkge1xyXG4gICAgICAgIHRoaXMuc2hvcnREZWxheSA9IHNob3J0RGVsYXk7XHJcbiAgICAgICAgdGhpcy5sb25nRGVsYXkgPSBsb25nRGVsYXk7XHJcbiAgICAgICAgLy8gSW50ZXJuYWwgZXJyb3Igd2hlbiBpbXByb3Blcmx5IGluaXRpYWxpemVkLlxyXG4gICAgICAgIGRlYnVnQXNzZXJ0KGxvbmdEZWxheSA+IHNob3J0RGVsYXksICdTaG9ydCBkZWxheSBzaG91bGQgYmUgbGVzcyB0aGFuIGxvbmcgZGVsYXkhJyk7XHJcbiAgICAgICAgdGhpcy5pc01vYmlsZSA9IGlzTW9iaWxlQ29yZG92YSgpIHx8IGlzUmVhY3ROYXRpdmUoKTtcclxuICAgIH1cclxuICAgIGdldCgpIHtcclxuICAgICAgICBpZiAoIV9pc09ubGluZSgpKSB7XHJcbiAgICAgICAgICAgIC8vIFBpY2sgdGhlIHNob3J0ZXIgdGltZW91dC5cclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKDUwMDAgLyogT0ZGTElORSAqLywgdGhpcy5zaG9ydERlbGF5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgcnVubmluZyBpbiBhIG1vYmlsZSBlbnZpcm9ubWVudCwgcmV0dXJuIHRoZSBsb25nIGRlbGF5LCBvdGhlcndpc2VcclxuICAgICAgICAvLyByZXR1cm4gdGhlIHNob3J0IGRlbGF5LlxyXG4gICAgICAgIC8vIFRoaXMgY291bGQgYmUgaW1wcm92ZWQgaW4gdGhlIGZ1dHVyZSB0byBkeW5hbWljYWxseSBjaGFuZ2UgYmFzZWQgb24gb3RoZXJcclxuICAgICAgICAvLyB2YXJpYWJsZXMgaW5zdGVhZCBvZiBqdXN0IHJlYWRpbmcgdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNNb2JpbGUgPyB0aGlzLmxvbmdEZWxheSA6IHRoaXMuc2hvcnREZWxheTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZW11bGF0b3JVcmwoY29uZmlnLCBwYXRoKSB7XHJcbiAgICBkZWJ1Z0Fzc2VydChjb25maWcuZW11bGF0b3IsICdFbXVsYXRvciBzaG91bGQgYWx3YXlzIGJlIHNldCBoZXJlJyk7XHJcbiAgICBjb25zdCB7IHVybCB9ID0gY29uZmlnLmVtdWxhdG9yO1xyXG4gICAgaWYgKCFwYXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHVybDtcclxuICAgIH1cclxuICAgIHJldHVybiBgJHt1cmx9JHtwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRofWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmV0Y2hQcm92aWRlciB7XHJcbiAgICBzdGF0aWMgaW5pdGlhbGl6ZShmZXRjaEltcGwsIGhlYWRlcnNJbXBsLCByZXNwb25zZUltcGwpIHtcclxuICAgICAgICB0aGlzLmZldGNoSW1wbCA9IGZldGNoSW1wbDtcclxuICAgICAgICBpZiAoaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5oZWFkZXJzSW1wbCA9IGhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzcG9uc2VJbXBsKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzcG9uc2VJbXBsID0gcmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBmZXRjaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5mZXRjaEltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdmZXRjaCcgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5mZXRjaDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBmZXRjaCBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBoZWFkZXJzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhlYWRlcnNJbXBsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnNJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdIZWFkZXJzJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLkhlYWRlcnM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGRlYnVnRmFpbCgnQ291bGQgbm90IGZpbmQgSGVhZGVycyBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyByZXNwb25zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5yZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2VJbXBsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnICYmICdSZXNwb25zZScgaW4gc2VsZikge1xyXG4gICAgICAgICAgICByZXR1cm4gc2VsZi5SZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBSZXNwb25zZSBpbXBsZW1lbnRhdGlvbiwgbWFrZSBzdXJlIHlvdSBjYWxsIEZldGNoUHJvdmlkZXIuaW5pdGlhbGl6ZSgpIHdpdGggYW4gYXBwcm9wcmlhdGUgcG9seWZpbGwnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTWFwIGZyb20gZXJyb3JzIHJldHVybmVkIGJ5IHRoZSBzZXJ2ZXIgdG8gZXJyb3JzIHRvIGRldmVsb3BlciB2aXNpYmxlIGVycm9yc1xyXG4gKi9cclxuY29uc3QgU0VSVkVSX0VSUk9SX01BUCA9IHtcclxuICAgIC8vIEN1c3RvbSB0b2tlbiBlcnJvcnMuXHJcbiAgICBbXCJDUkVERU5USUFMX01JU01BVENIXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqL106IFwiY3VzdG9tLXRva2VuLW1pc21hdGNoXCIgLyogQ1JFREVOVElBTF9NSVNNQVRDSCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ1VTVE9NX1RPS0VOXCIgLyogTUlTU0lOR19DVVNUT01fVE9LRU4gKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBDcmVhdGUgQXV0aCBVUkkgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9JREVOVElGSUVSXCIgLyogSU5WQUxJRF9JREVOVElGSUVSICovXTogXCJpbnZhbGlkLWVtYWlsXCIgLyogSU5WQUxJRF9FTUFJTCAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfQ09OVElOVUVfVVJJXCIgLyogTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycyAoc29tZSBhcHBseSB0byBzaWduIHVwIHRvbykuXHJcbiAgICBbXCJJTlZBTElEX1BBU1NXT1JEXCIgLyogSU5WQUxJRF9QQVNTV09SRCAqL106IFwid3JvbmctcGFzc3dvcmRcIiAvKiBJTlZBTElEX1BBU1NXT1JEICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19QQVNTV09SRFwiIC8qIE1JU1NJTkdfUEFTU1dPUkQgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBTaWduIHVwIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycy5cclxuICAgIFtcIkVNQUlMX0VYSVNUU1wiIC8qIEVNQUlMX0VYSVNUUyAqL106IFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBFTUFJTF9FWElTVFMgKi8sXHJcbiAgICBbXCJQQVNTV09SRF9MT0dJTl9ESVNBQkxFRFwiIC8qIFBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEICovXTogXCJvcGVyYXRpb24tbm90LWFsbG93ZWRcIiAvKiBPUEVSQVRJT05fTk9UX0FMTE9XRUQgKi8sXHJcbiAgICAvLyBWZXJpZnkgYXNzZXJ0aW9uIGZvciBzaWduIGluIHdpdGggY3JlZGVudGlhbCBlcnJvcnM6XHJcbiAgICBbXCJJTlZBTElEX0lEUF9SRVNQT05TRVwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovXTogXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBJTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIklOVkFMSURfUEVORElOR19UT0tFTlwiIC8qIElOVkFMSURfUEVORElOR19UT0tFTiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIEZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovXTogXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfUkVRX1RZUEVcIiAvKiBNSVNTSU5HX1JFUV9UWVBFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2VuZCBQYXNzd29yZCByZXNldCBlbWFpbCBlcnJvcnM6XHJcbiAgICBbXCJFTUFJTF9OT1RfRk9VTkRcIiAvKiBFTUFJTF9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovLFxyXG4gICAgW1wiUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUXCIgLyogUkVTRVRfUEFTU1dPUkRfRVhDRUVEX0xJTUlUICovXTogXCJ0b28tbWFueS1yZXF1ZXN0c1wiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIFtcIkVYUElSRURfT09CX0NPREVcIiAvKiBFWFBJUkVEX09PQl9DT0RFICovXTogXCJleHBpcmVkLWFjdGlvbi1jb2RlXCIgLyogRVhQSVJFRF9PT0JfQ09ERSAqLyxcclxuICAgIFtcIklOVkFMSURfT09CX0NPREVcIiAvKiBJTlZBTElEX09PQl9DT0RFICovXTogXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9PT0JfQ09ERSAqLyxcclxuICAgIC8vIFRoaXMgY2FuIG9ubHkgaGFwcGVuIGlmIHRoZSBTREsgc2VuZHMgYSBiYWQgcmVxdWVzdC5cclxuICAgIFtcIk1JU1NJTkdfT09CX0NPREVcIiAvKiBNSVNTSU5HX09PQl9DT0RFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gT3BlcmF0aW9ucyB0aGF0IHJlcXVpcmUgSUQgdG9rZW4gaW4gcmVxdWVzdDpcclxuICAgIFtcIkNSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTlwiIC8qIENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTiAqL106IFwicmVxdWlyZXMtcmVjZW50LWxvZ2luXCIgLyogQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovLFxyXG4gICAgW1wiSU5WQUxJRF9JRF9UT0tFTlwiIC8qIElOVkFMSURfSURfVE9LRU4gKi9dOiBcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqLyxcclxuICAgIFtcIlRPS0VOX0VYUElSRURcIiAvKiBUT0tFTl9FWFBJUkVEICovXTogXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovLFxyXG4gICAgW1wiVVNFUl9OT1RfRk9VTkRcIiAvKiBVU0VSX05PVF9GT1VORCAqL106IFwidXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqLyxcclxuICAgIC8vIE90aGVyIGVycm9ycy5cclxuICAgIFtcIlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUlwiIC8qIFRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106IFwidG9vLW1hbnktcmVxdWVzdHNcIiAvKiBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi8sXHJcbiAgICAvLyBQaG9uZSBBdXRoIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9DT0RFXCIgLyogSU5WQUxJRF9DT0RFICovXTogXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1jb2RlXCIgLyogSU5WQUxJRF9DT0RFICovLFxyXG4gICAgW1wiSU5WQUxJRF9TRVNTSU9OX0lORk9cIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqL106IFwiaW52YWxpZC12ZXJpZmljYXRpb24taWRcIiAvKiBJTlZBTElEX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIklOVkFMSURfVEVNUE9SQVJZX1BST09GXCIgLyogSU5WQUxJRF9URU1QT1JBUllfUFJPT0YgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIElOVkFMSURfSURQX1JFU1BPTlNFICovLFxyXG4gICAgW1wiTUlTU0lOR19TRVNTSU9OX0lORk9cIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqL106IFwibWlzc2luZy12ZXJpZmljYXRpb24taWRcIiAvKiBNSVNTSU5HX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIlNFU1NJT05fRVhQSVJFRFwiIC8qIFNFU1NJT05fRVhQSVJFRCAqL106IFwiY29kZS1leHBpcmVkXCIgLyogQ09ERV9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgYWN0aW9uIGNvZGUgZXJyb3JzIHdoZW4gYWRkaXRpb25hbCBzZXR0aW5ncyBwYXNzZWQuXHJcbiAgICAvLyBNSVNTSU5HX0NPTlRJTlVFX1VSSSBpcyBnZXR0aW5nIG1hcHBlZCB0byBJTlRFUk5BTF9FUlJPUiBhYm92ZS5cclxuICAgIC8vIFRoaXMgaXMgT0sgYXMgdGhpcyBlcnJvciB3aWxsIGJlIGNhdWdodCBieSBjbGllbnQgc2lkZSB2YWxpZGF0aW9uLlxyXG4gICAgW1wiTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi9dOiBcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIE1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi8sXHJcbiAgICBbXCJVTkFVVEhPUklaRURfRE9NQUlOXCIgLyogVU5BVVRIT1JJWkVEX0RPTUFJTiAqL106IFwidW5hdXRob3JpemVkLWNvbnRpbnVlLXVyaVwiIC8qIFVOQVVUSE9SSVpFRF9ET01BSU4gKi8sXHJcbiAgICAvLyBnZXRQcm9qZWN0Q29uZmlnIGVycm9ycyB3aGVuIGNsaWVudElkIGlzIHBhc3NlZC5cclxuICAgIFtcIklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi9dOiBcImludmFsaWQtb2F1dGgtY2xpZW50LWlkXCIgLyogSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi8sXHJcbiAgICAvLyBVc2VyIGFjdGlvbnMgKHNpZ24tdXAgb3IgZGVsZXRpb24pIGRpc2FibGVkIGVycm9ycy5cclxuICAgIFtcIkFETUlOX09OTFlfT1BFUkFUSU9OXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiBcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQURNSU5fT05MWV9PUEVSQVRJT04gKi8sXHJcbiAgICAvLyBNdWx0aSBmYWN0b3IgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBJTlZBTElEX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcImludmFsaWQtbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBJTlZBTElEX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EXCIgLyogTUZBX0VOUk9MTE1FTlRfTk9UX0ZPVU5EICovXTogXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBNRkFfSU5GT19OT1RfRk9VTkQgKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEXCIgLyogTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUxcIiAvKiBNSVNTSU5HX01GQV9QRU5ESU5HX0NSRURFTlRJQUwgKi9dOiBcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBNSVNTSU5HX01GQV9TRVNTSU9OICovLFxyXG4gICAgW1wiU0VDT05EX0ZBQ1RPUl9FWElTVFNcIiAvKiBTRUNPTkRfRkFDVE9SX0VYSVNUUyAqL106IFwic2Vjb25kLWZhY3Rvci1hbHJlYWR5LWluLXVzZVwiIC8qIFNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqLyxcclxuICAgIFtcIlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERURcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBTRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovLFxyXG4gICAgLy8gQmxvY2tpbmcgZnVuY3Rpb25zIHJlbGF0ZWQgZXJyb3JzLlxyXG4gICAgW1wiQkxPQ0tJTkdfRlVOQ1RJT05fRVJST1JfUkVTUE9OU0VcIiAvKiBCTE9DS0lOR19GVU5DVElPTl9FUlJPUl9SRVNQT05TRSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyxcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9BUElfVElNRU9VVF9NUyA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5mdW5jdGlvbiBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgaWYgKGF1dGgudGVuYW50SWQgJiYgIXJlcXVlc3QudGVuYW50SWQpIHtcclxuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyB0ZW5hbnRJZDogYXV0aC50ZW5hbnRJZCB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiByZXF1ZXN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBsZXQgYm9keSA9IHt9O1xyXG4gICAgICAgIGxldCBwYXJhbXMgPSB7fTtcclxuICAgICAgICBpZiAocmVxdWVzdCkge1xyXG4gICAgICAgICAgICBpZiAobWV0aG9kID09PSBcIkdFVFwiIC8qIEdFVCAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcmVxdWVzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSBxdWVyeXN0cmluZyhPYmplY3QuYXNzaWduKHsga2V5OiBhdXRoLmNvbmZpZy5hcGlLZXkgfSwgcGFyYW1zKSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGF1dGguX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiIC8qIENPTlRFTlRfVFlQRSAqL10gPSAnYXBwbGljYXRpb24vanNvbic7XHJcbiAgICAgICAgaWYgKGF1dGgubGFuZ3VhZ2VDb2RlKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnNbXCJYLUZpcmViYXNlLUxvY2FsZVwiIC8qIFhfRklSRUJBU0VfTE9DQUxFICovXSA9IGF1dGgubGFuZ3VhZ2VDb2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKF9nZXRGaW5hbFRhcmdldChhdXRoLCBhdXRoLmNvbmZpZy5hcGlIb3N0LCBwYXRoLCBxdWVyeSksIE9iamVjdC5hc3NpZ24oeyBtZXRob2QsXHJcbiAgICAgICAgICAgIGhlYWRlcnMsIHJlZmVycmVyUG9saWN5OiAnbm8tcmVmZXJyZXInIH0sIGJvZHkpKTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCBjdXN0b21FcnJvck1hcCwgZmV0Y2hGbikge1xyXG4gICAgYXV0aC5fY2FuSW5pdEVtdWxhdG9yID0gZmFsc2U7XHJcbiAgICBjb25zdCBlcnJvck1hcCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgU0VSVkVSX0VSUk9SX01BUCksIGN1c3RvbUVycm9yTWFwKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya1RpbWVvdXQgPSBuZXcgTmV0d29ya1RpbWVvdXQoYXV0aCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBQcm9taXNlLnJhY2UoW1xyXG4gICAgICAgICAgICBmZXRjaEZuKCksXHJcbiAgICAgICAgICAgIG5ldHdvcmtUaW1lb3V0LnByb21pc2VcclxuICAgICAgICBdKTtcclxuICAgICAgICAvLyBJZiB3ZSd2ZSByZWFjaGVkIHRoaXMgcG9pbnQsIHRoZSBmZXRjaCBzdWNjZWVkZWQgYW5kIHRoZSBuZXR3b3JrVGltZW91dFxyXG4gICAgICAgIC8vIGRpZG4ndCB0aHJvdzsgY2xlYXIgdGhlIG5ldHdvcmsgdGltZW91dCBkZWxheSBzbyB0aGF0IE5vZGUgd29uJ3QgaGFuZ1xyXG4gICAgICAgIG5ldHdvcmtUaW1lb3V0LmNsZWFyTmV0d29ya1RpbWVvdXQoKTtcclxuICAgICAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgIGlmICgnbmVlZENvbmZpcm1hdGlvbicgaW4ganNvbikge1xyXG4gICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovLCBqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rICYmICEoJ2Vycm9yTWVzc2FnZScgaW4ganNvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5vayA/IGpzb24uZXJyb3JNZXNzYWdlIDoganNvbi5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb25zdCBbc2VydmVyRXJyb3JDb2RlLCBzZXJ2ZXJFcnJvck1lc3NhZ2VdID0gZXJyb3JNZXNzYWdlLnNwbGl0KCcgOiAnKTtcclxuICAgICAgICAgICAgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIEZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiIC8qIENSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0UgKi8sIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJFTUFJTF9FWElTVFNcIiAvKiBFTUFJTF9FWElTVFMgKi8pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEVNQUlMX0VYSVNUUyAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3JNYXBbc2VydmVyRXJyb3JDb2RlXSB8fFxyXG4gICAgICAgICAgICAgICAgc2VydmVyRXJyb3JDb2RlXHJcbiAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcclxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvW19cXHNdKy9nLCAnLScpO1xyXG4gICAgICAgICAgICBpZiAoc2VydmVyRXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfZXJyb3JXaXRoQ3VzdG9tTWVzc2FnZShhdXRoLCBhdXRoRXJyb3IsIHNlcnZlckVycm9yTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBhdXRoRXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLyk7XHJcbiAgICB9XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXAgPSB7fSkge1xyXG4gICAgY29uc3Qgc2VydmVyUmVzcG9uc2UgPSAoYXdhaXQgX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIG1ldGhvZCwgcGF0aCwgcmVxdWVzdCwgY3VzdG9tRXJyb3JNYXApKTtcclxuICAgIGlmICgnbWZhUGVuZGluZ0NyZWRlbnRpYWwnIGluIHNlcnZlclJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIE1GQV9SRVFVSVJFRCAqLywge1xyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IHNlcnZlclJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VydmVyUmVzcG9uc2U7XHJcbn1cclxuZnVuY3Rpb24gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGhvc3QsIHBhdGgsIHF1ZXJ5KSB7XHJcbiAgICBjb25zdCBiYXNlID0gYCR7aG9zdH0ke3BhdGh9PyR7cXVlcnl9YDtcclxuICAgIGlmICghYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm4gYCR7YXV0aC5jb25maWcuYXBpU2NoZW1lfTovLyR7YmFzZX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9lbXVsYXRvclVybChhdXRoLmNvbmZpZywgYmFzZSk7XHJcbn1cclxuY2xhc3MgTmV0d29ya1RpbWVvdXQge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIGFyZSBmdW5kYW1lbnRhbGx5IGluY29tcGF0aWJsZSwgYnV0IHdlXHJcbiAgICAgICAgLy8gZG9uJ3QgY2FyZSBhYm91dCB0aGUgdmFsdWUgaGVyZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy50aW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgfSwgREVGQVVMVF9BUElfVElNRU9VVF9NUy5nZXQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhck5ldHdvcmtUaW1lb3V0KCkge1xyXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIGNvZGUsIHJlc3BvbnNlKSB7XHJcbiAgICBjb25zdCBlcnJvclBhcmFtcyA9IHtcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWVcclxuICAgIH07XHJcbiAgICBpZiAocmVzcG9uc2UuZW1haWwpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5lbWFpbCA9IHJlc3BvbnNlLmVtYWlsO1xyXG4gICAgfVxyXG4gICAgaWYgKHJlc3BvbnNlLnBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgZXJyb3JQYXJhbXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZU51bWJlcjtcclxuICAgIH1cclxuICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIGNvZGUsIGVycm9yUGFyYW1zKTtcclxuICAgIC8vIFdlIGtub3cgY3VzdG9tRGF0YSBpcyBkZWZpbmVkIG9uIGVycm9yIGJlY2F1c2UgZXJyb3JQYXJhbXMgaXMgZGVmaW5lZFxyXG4gICAgZXJyb3IuY3VzdG9tRGF0YS5fdG9rZW5SZXNwb25zZSA9IHJlc3BvbnNlO1xyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFjY291bnQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpkZWxldGVcIiAvKiBERUxFVEVfQUNDT1VOVCAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlTGlua2VkQWNjb3VudHMoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SW5mbyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmxvb2t1cFwiIC8qIEdFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyh1dGNUaW1lc3RhbXApIHtcclxuICAgIGlmICghdXRjVGltZXN0YW1wKSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB0byBkYXRlIG9iamVjdC5cclxuICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoTnVtYmVyKHV0Y1RpbWVzdGFtcCkpO1xyXG4gICAgICAgIC8vIFRlc3QgZGF0ZSBpcyB2YWxpZC5cclxuICAgICAgICBpZiAoIWlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xyXG4gICAgICAgICAgICAvLyBDb252ZXJ0IHRvIFVUQyBkYXRlIHN0cmluZy5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGUudG9VVENTdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIERvIG5vdGhpbmcuIHVuZGVmaW5lZCB3aWxsIGJlIHJldHVybmVkLlxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHVzZXIgdG8gYSBGaXJlYmFzZSBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRva2VuIGlmIGl0IGhhcyBub3QgZXhwaXJlZCBvciBpZiBpdCB3aWxsIG5vdCBleHBpcmUgaW4gdGhlIG5leHQgZml2ZVxyXG4gKiBtaW51dGVzLiBPdGhlcndpc2UsIHRoaXMgd2lsbCByZWZyZXNoIHRoZSB0b2tlbiBhbmQgcmV0dXJuIGEgbmV3IG9uZS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRJZFRva2VuKHVzZXIsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIGRlc2VyaWFsaXplZCBKU09OIFdlYiBUb2tlbiAoSldUKSB1c2VkIHRvIGlkZW50aXRmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGdldElkVG9rZW5SZXN1bHQodXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgIGNvbnN0IGNsYWltcyA9IF9wYXJzZVRva2VuKHRva2VuKTtcclxuICAgIF9hc3NlcnQoY2xhaW1zICYmIGNsYWltcy5leHAgJiYgY2xhaW1zLmF1dGhfdGltZSAmJiBjbGFpbXMuaWF0LCB1c2VySW50ZXJuYWwuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGZpcmViYXNlID0gdHlwZW9mIGNsYWltcy5maXJlYmFzZSA9PT0gJ29iamVjdCcgPyBjbGFpbXMuZmlyZWJhc2UgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgYXV0aFRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmF1dGhfdGltZSkpLFxyXG4gICAgICAgIGlzc3VlZEF0VGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuaWF0KSksXHJcbiAgICAgICAgZXhwaXJhdGlvblRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmV4cCkpLFxyXG4gICAgICAgIHNpZ25JblByb3ZpZGVyOiBzaWduSW5Qcm92aWRlciB8fCBudWxsLFxyXG4gICAgICAgIHNpZ25JblNlY29uZEZhY3RvcjogKGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9zZWNvbmRfZmFjdG9yJ10pIHx8IG51bGxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKHNlY29uZHMpIHtcclxuICAgIHJldHVybiBOdW1iZXIoc2Vjb25kcykgKiAxMDAwO1xyXG59XHJcbmZ1bmN0aW9uIF9wYXJzZVRva2VuKHRva2VuKSB7XHJcbiAgICBjb25zdCBbYWxnb3JpdGhtLCBwYXlsb2FkLCBzaWduYXR1cmVdID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgIGlmIChhbGdvcml0aG0gPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHBheWxvYWQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHNpZ25hdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgX2xvZ0Vycm9yKCdKV1QgbWFsZm9ybWVkLCBjb250YWluZWQgZmV3ZXIgdGhhbiAzIHNlY3Rpb25zJyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBiYXNlNjREZWNvZGUocGF5bG9hZCk7XHJcbiAgICAgICAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICAgICAgICAgIF9sb2dFcnJvcignRmFpbGVkIHRvIGRlY29kZSBiYXNlNjQgSldUIHBheWxvYWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlY29kZWQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0NhdWdodCBlcnJvciBwYXJzaW5nIEpXVCBwYXlsb2FkIGFzIEpTT04nLCBlKTtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdCBleHBpcmVzSW4gVFRMIGZyb20gYSB0b2tlbiBieSBzdWJ0cmFjdGluZyB0aGUgZXhwaXJhdGlvbiBmcm9tIHRoZSBpc3N1YW5jZS5cclxuICovXHJcbmZ1bmN0aW9uIF90b2tlbkV4cGlyZXNJbih0b2tlbikge1xyXG4gICAgY29uc3QgcGFyc2VkVG9rZW4gPSBfcGFyc2VUb2tlbih0b2tlbik7XHJcbiAgICBfYXNzZXJ0KHBhcnNlZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uZXhwICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQodHlwZW9mIHBhcnNlZFRva2VuLmlhdCAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gTnVtYmVyKHBhcnNlZFRva2VuLmV4cCkgLSBOdW1iZXIocGFyc2VkVG9rZW4uaWF0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBwcm9taXNlLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgaWYgKGJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgcHJvbWlzZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yICYmIGlzVXNlckludmFsaWRhdGVkKGUpKSB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyLmF1dGguY3VycmVudFVzZXIgPT09IHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHVzZXIuYXV0aC5zaWduT3V0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBpc1VzZXJJbnZhbGlkYXRlZCh7IGNvZGUgfSkge1xyXG4gICAgcmV0dXJuIChjb2RlID09PSBgYXV0aC8ke1widXNlci1kaXNhYmxlZFwiIC8qIFVTRVJfRElTQUJMRUQgKi99YCB8fFxyXG4gICAgICAgIGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBUT0tFTl9FWFBJUkVEICovfWApO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFByb2FjdGl2ZVJlZnJlc2gge1xyXG4gICAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSBmYWxzZTtcclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICB9XHJcbiAgICBfc3RhcnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNSdW5uaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUoKTtcclxuICAgIH1cclxuICAgIF9zdG9wKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLnRpbWVySWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0SW50ZXJ2YWwod2FzRXJyb3IpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKHdhc0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGludGVydmFsID0gdGhpcy5lcnJvckJhY2tvZmY7XHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gTWF0aC5taW4odGhpcy5lcnJvckJhY2tvZmYgKiAyLCA5NjAwMDAgLyogUkVUUllfQkFDS09GRl9NQVggKi8pO1xyXG4gICAgICAgICAgICByZXR1cm4gaW50ZXJ2YWw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBSZXNldCB0aGUgZXJyb3IgYmFja29mZlxyXG4gICAgICAgICAgICB0aGlzLmVycm9yQmFja29mZiA9IDMwMDAwIC8qIFJFVFJZX0JBQ0tPRkZfTUlOICovO1xyXG4gICAgICAgICAgICBjb25zdCBleHBUaW1lID0gKF9hID0gdGhpcy51c2VyLnN0c1Rva2VuTWFuYWdlci5leHBpcmF0aW9uVGltZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSBleHBUaW1lIC0gRGF0ZS5ub3coKSAtIDMwMDAwMCAvKiBPRkZTRVQgKi87XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1heCgwLCBpbnRlcnZhbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2NoZWR1bGUod2FzRXJyb3IgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgLy8gSnVzdCBpbiBjYXNlLi4uXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmdldEludGVydmFsKHdhc0Vycm9yKTtcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBzZXRUaW1lb3V0KGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVyYXRpb24oKTtcclxuICAgICAgICB9LCBpbnRlcnZhbCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpdGVyYXRpb24oKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLmdldElkVG9rZW4odHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgcmV0cnkgb24gbmV0d29yayBlcnJvcnNcclxuICAgICAgICAgICAgaWYgKGUuY29kZSA9PT0gYGF1dGgvJHtcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoLyogd2FzRXJyb3IgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlck1ldGFkYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWF0ZWRBdCwgbGFzdExvZ2luQXQpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplVGltZSgpIHtcclxuICAgICAgICB0aGlzLmxhc3RTaWduSW5UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMubGFzdExvZ2luQXQpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRpb25UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMuY3JlYXRlZEF0KTtcclxuICAgIH1cclxuICAgIF9jb3B5KG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgdGhpcy5sYXN0TG9naW5BdCA9IG1ldGFkYXRhLmxhc3RMb2dpbkF0O1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVUaW1lKCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbGFzdExvZ2luQXQ6IHRoaXMubGFzdExvZ2luQXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGggPSB1c2VyLmF1dGg7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGdldEFjY291bnRJbmZvKGF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICBfYXNzZXJ0KHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS51c2Vycy5sZW5ndGgsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBjb25zdCBjb3JlQWNjb3VudCA9IHJlc3BvbnNlLnVzZXJzWzBdO1xyXG4gICAgdXNlci5fbm90aWZ5UmVsb2FkTGlzdGVuZXIoY29yZUFjY291bnQpO1xyXG4gICAgY29uc3QgbmV3UHJvdmlkZXJEYXRhID0gKChfYSA9IGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sZW5ndGgpXHJcbiAgICAgICAgPyBleHRyYWN0UHJvdmlkZXJEYXRhKGNvcmVBY2NvdW50LnByb3ZpZGVyVXNlckluZm8pXHJcbiAgICAgICAgOiBbXTtcclxuICAgIGNvbnN0IHByb3ZpZGVyRGF0YSA9IG1lcmdlUHJvdmlkZXJEYXRhKHVzZXIucHJvdmlkZXJEYXRhLCBuZXdQcm92aWRlckRhdGEpO1xyXG4gICAgLy8gUHJlc2VydmVzIHRoZSBub24tbm9ueW1vdXMgc3RhdHVzIG9mIHRoZSBzdG9yZWQgdXNlciwgZXZlbiBpZiBubyBtb3JlXHJcbiAgICAvLyBjcmVkZW50aWFscyAoZmVkZXJhdGVkIG9yIGVtYWlsL3Bhc3N3b3JkKSBhcmUgbGlua2VkIHRvIHRoZSB1c2VyLiBJZlxyXG4gICAgLy8gdGhlIHVzZXIgd2FzIHByZXZpb3VzbHkgYW5vbnltb3VzLCB0aGVuIHVzZSBwcm92aWRlciBkYXRhIHRvIHVwZGF0ZS5cclxuICAgIC8vIE9uIHRoZSBvdGhlciBoYW5kLCBpZiBpdCB3YXMgbm90IGFub255bW91cyBiZWZvcmUsIGl0IHNob3VsZCBuZXZlciBiZVxyXG4gICAgLy8gY29uc2lkZXJlZCBhbm9ueW1vdXMgbm93LlxyXG4gICAgY29uc3Qgb2xkSXNBbm9ueW1vdXMgPSB1c2VyLmlzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgbmV3SXNBbm9ueW1vdXMgPSAhKHVzZXIuZW1haWwgJiYgY29yZUFjY291bnQucGFzc3dvcmRIYXNoKSAmJiAhKHByb3ZpZGVyRGF0YSA9PT0gbnVsbCB8fCBwcm92aWRlckRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb3ZpZGVyRGF0YS5sZW5ndGgpO1xyXG4gICAgY29uc3QgaXNBbm9ueW1vdXMgPSAhb2xkSXNBbm9ueW1vdXMgPyBmYWxzZSA6IG5ld0lzQW5vbnltb3VzO1xyXG4gICAgY29uc3QgdXBkYXRlcyA9IHtcclxuICAgICAgICB1aWQ6IGNvcmVBY2NvdW50LmxvY2FsSWQsXHJcbiAgICAgICAgZGlzcGxheU5hbWU6IGNvcmVBY2NvdW50LmRpc3BsYXlOYW1lIHx8IG51bGwsXHJcbiAgICAgICAgcGhvdG9VUkw6IGNvcmVBY2NvdW50LnBob3RvVXJsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWw6IGNvcmVBY2NvdW50LmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgZW1haWxWZXJpZmllZDogY29yZUFjY291bnQuZW1haWxWZXJpZmllZCB8fCBmYWxzZSxcclxuICAgICAgICBwaG9uZU51bWJlcjogY29yZUFjY291bnQucGhvbmVOdW1iZXIgfHwgbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogY29yZUFjY291bnQudGVuYW50SWQgfHwgbnVsbCxcclxuICAgICAgICBwcm92aWRlckRhdGEsXHJcbiAgICAgICAgbWV0YWRhdGE6IG5ldyBVc2VyTWV0YWRhdGEoY29yZUFjY291bnQuY3JlYXRlZEF0LCBjb3JlQWNjb3VudC5sYXN0TG9naW5BdCksXHJcbiAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgIH07XHJcbiAgICBPYmplY3QuYXNzaWduKHVzZXIsIHVwZGF0ZXMpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWxvYWRzIHVzZXIgYWNjb3VudCBkYXRhLCBpZiBzaWduZWQgaW4uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbG9hZCh1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VySW50ZXJuYWwpO1xyXG4gICAgLy8gRXZlbiB0aG91Z2ggdGhlIGN1cnJlbnQgdXNlciBoYXNuJ3QgY2hhbmdlZCwgdXBkYXRlXHJcbiAgICAvLyBjdXJyZW50IHVzZXIgd2lsbCB0cmlnZ2VyIGEgcGVyc2lzdGVuY2UgdXBkYXRlIHcvIHRoZVxyXG4gICAgLy8gbmV3IGluZm8uXHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxuICAgIHVzZXJJbnRlcm5hbC5hdXRoLl9ub3RpZnlMaXN0ZW5lcnNJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxufVxyXG5mdW5jdGlvbiBtZXJnZVByb3ZpZGVyRGF0YShvcmlnaW5hbCwgbmV3RGF0YSkge1xyXG4gICAgY29uc3QgZGVkdXBlZCA9IG9yaWdpbmFsLmZpbHRlcihvID0+ICFuZXdEYXRhLnNvbWUobiA9PiBuLnByb3ZpZGVySWQgPT09IG8ucHJvdmlkZXJJZCkpO1xyXG4gICAgcmV0dXJuIFsuLi5kZWR1cGVkLCAuLi5uZXdEYXRhXTtcclxufVxyXG5mdW5jdGlvbiBleHRyYWN0UHJvdmlkZXJEYXRhKHByb3ZpZGVycykge1xyXG4gICAgcmV0dXJuIHByb3ZpZGVycy5tYXAoKF9hKSA9PiB7XHJcbiAgICAgICAgdmFyIHsgcHJvdmlkZXJJZCB9ID0gX2EsIHByb3ZpZGVyID0gX19yZXN0KF9hLCBbXCJwcm92aWRlcklkXCJdKTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICB1aWQ6IHByb3ZpZGVyLnJhd0lkIHx8ICcnLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcHJvdmlkZXIuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICAgICAgZW1haWw6IHByb3ZpZGVyLmVtYWlsIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyOiBwcm92aWRlci5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgICAgICBwaG90b1VSTDogcHJvdmlkZXIucGhvdG9VcmwgfHwgbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgcmVmcmVzaFRva2VuKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9wZXJmb3JtRmV0Y2hXaXRoRXJyb3JIYW5kbGluZyhhdXRoLCB7fSwgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGJvZHkgPSBxdWVyeXN0cmluZyh7XHJcbiAgICAgICAgICAgICdncmFudF90eXBlJzogJ3JlZnJlc2hfdG9rZW4nLFxyXG4gICAgICAgICAgICAncmVmcmVzaF90b2tlbic6IHJlZnJlc2hUb2tlblxyXG4gICAgICAgIH0pLnNsaWNlKDEpO1xyXG4gICAgICAgIGNvbnN0IHsgdG9rZW5BcGlIb3N0LCBhcGlLZXkgfSA9IGF1dGguY29uZmlnO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRGaW5hbFRhcmdldChhdXRoLCB0b2tlbkFwaUhvc3QsIFwiL3YxL3Rva2VuXCIgLyogVE9LRU4gKi8sIGBrZXk9JHthcGlLZXl9YCk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGF1dGguX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiIC8qIENPTlRFTlRfVFlQRSAqL10gPSAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJztcclxuICAgICAgICByZXR1cm4gRmV0Y2hQcm92aWRlci5mZXRjaCgpKHVybCwge1xyXG4gICAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiIC8qIFBPU1QgKi8sXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHlcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gVGhlIHJlc3BvbnNlIGNvbWVzIGJhY2sgaW4gc25ha2VfY2FzZS4gQ29udmVydCB0byBjYW1lbDpcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWNjZXNzVG9rZW46IHJlc3BvbnNlLmFjY2Vzc190b2tlbixcclxuICAgICAgICBleHBpcmVzSW46IHJlc3BvbnNlLmV4cGlyZXNfaW4sXHJcbiAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZS5yZWZyZXNoX3Rva2VuXHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBXZSBuZWVkIHRvIG1hcmsgdGhpcyBjbGFzcyBhcyBpbnRlcm5hbCBleHBsaWNpdGx5IHRvIGV4Y2x1ZGUgaXQgaW4gdGhlIHB1YmxpYyB0eXBpbmdzLCBiZWNhdXNlXHJcbiAqIGl0IHJlZmVyZW5jZXMgQXV0aEludGVybmFsIHdoaWNoIGhhcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBVc2VySW50ZXJuYWwuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgU3RzVG9rZW5NYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gbnVsbDtcclxuICAgIH1cclxuICAgIGdldCBpc0V4cGlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5leHBpcmF0aW9uVGltZSB8fFxyXG4gICAgICAgICAgICBEYXRlLm5vdygpID4gdGhpcy5leHBpcmF0aW9uVGltZSAtIDMwMDAwIC8qIFRPS0VOX1JFRlJFU0ggKi8pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLmlkVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiAhPT0gJ3VuZGVmaW5lZCcsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgZXhwaXJlc0luID0gJ2V4cGlyZXNJbicgaW4gcmVzcG9uc2UgJiYgdHlwZW9mIHJlc3BvbnNlLmV4cGlyZXNJbiAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgPyBOdW1iZXIocmVzcG9uc2UuZXhwaXJlc0luKVxyXG4gICAgICAgICAgICA6IF90b2tlbkV4cGlyZXNJbihyZXNwb25zZS5pZFRva2VuKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVRva2Vuc0FuZEV4cGlyYXRpb24ocmVzcG9uc2UuaWRUb2tlbiwgcmVzcG9uc2UucmVmcmVzaFRva2VuLCBleHBpcmVzSW4pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0VG9rZW4oYXV0aCwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLmFjY2Vzc1Rva2VuIHx8IHRoaXMucmVmcmVzaFRva2VuLCBhdXRoLCBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIFRPS0VOX0VYUElSRUQgKi8pO1xyXG4gICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIHRoaXMuYWNjZXNzVG9rZW4gJiYgIXRoaXMuaXNFeHBpcmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKGF1dGgsIHRoaXMucmVmcmVzaFRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xlYXJSZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVmcmVzaChhdXRoLCBvbGRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luIH0gPSBhd2FpdCByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgb2xkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBOdW1iZXIoZXhwaXJlc0luKSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJblNlYykge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IERhdGUubm93KCkgKyBleHBpcmVzSW5TZWMgKiAxMDAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKGFwcE5hbWUsIG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuLCBhY2Nlc3NUb2tlbiwgZXhwaXJhdGlvblRpbWUgfSA9IG9iamVjdDtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVmcmVzaFRva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLnJlZnJlc2hUb2tlbiA9IHJlZnJlc2hUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodHlwZW9mIGFjY2Vzc1Rva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovLCB7XHJcbiAgICAgICAgICAgICAgICBhcHBOYW1lXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBtYW5hZ2VyLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChleHBpcmF0aW9uVGltZSkge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHR5cGVvZiBleHBpcmF0aW9uVGltZSA9PT0gJ251bWJlcicsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5leHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHRoaXMucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHRoaXMuZXhwaXJhdGlvblRpbWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbihzdHNUb2tlbk1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gc3RzVG9rZW5NYW5hZ2VyLnJlZnJlc2hUb2tlbjtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lO1xyXG4gICAgfVxyXG4gICAgX2Nsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBTdHNUb2tlbk1hbmFnZXIoKSwgdGhpcy50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICBfcGVyZm9ybVJlZnJlc2goKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoYXNzZXJ0aW9uLCBhcHBOYW1lKSB7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhc3NlcnRpb24gPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBhc3NlcnRpb24gPT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8sIHsgYXBwTmFtZSB9KTtcclxufVxyXG5jbGFzcyBVc2VySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihfYSkge1xyXG4gICAgICAgIHZhciB7IHVpZCwgYXV0aCwgc3RzVG9rZW5NYW5hZ2VyIH0gPSBfYSwgb3B0ID0gX19yZXN0KF9hLCBbXCJ1aWRcIiwgXCJhdXRoXCIsIFwic3RzVG9rZW5NYW5hZ2VyXCJdKTtcclxuICAgICAgICAvLyBGb3IgdGhlIHVzZXIgb2JqZWN0LCBwcm92aWRlciBpcyBhbHdheXMgRmlyZWJhc2UuXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gXCJmaXJlYmFzZVwiIC8qIEZJUkVCQVNFICovO1xyXG4gICAgICAgIHRoaXMucHJvYWN0aXZlUmVmcmVzaCA9IG5ldyBQcm9hY3RpdmVSZWZyZXNoKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVsb2FkVXNlckluZm8gPSBudWxsO1xyXG4gICAgICAgIHRoaXMucmVsb2FkTGlzdGVuZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudWlkID0gdWlkO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIgPSBzdHNUb2tlbk1hbmFnZXI7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IHN0c1Rva2VuTWFuYWdlci5hY2Nlc3NUb2tlbjtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gb3B0LmRpc3BsYXlOYW1lIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5lbWFpbCA9IG9wdC5lbWFpbCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IG9wdC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSBvcHQucGhvbmVOdW1iZXIgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gb3B0LnBob3RvVVJMIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IG9wdC5pc0Fub255bW91cyB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gb3B0LnRlbmFudElkIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSBvcHQucHJvdmlkZXJEYXRhID8gWy4uLm9wdC5wcm92aWRlckRhdGFdIDogW107XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBVc2VyTWV0YWRhdGEob3B0LmNyZWF0ZWRBdCB8fCB1bmRlZmluZWQsIG9wdC5sYXN0TG9naW5BdCB8fCB1bmRlZmluZWQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICBjb25zdCBhY2Nlc3NUb2tlbiA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmdldFRva2VuKHRoaXMuYXV0aCwgZm9yY2VSZWZyZXNoKSk7XHJcbiAgICAgICAgX2Fzc2VydChhY2Nlc3NUb2tlbiwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICE9PSBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiBnZXRJZFRva2VuUmVzdWx0KHRoaXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbG9hZCh0aGlzKTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24odXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnVpZCA9PT0gdXNlci51aWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gdXNlci5kaXNwbGF5TmFtZTtcclxuICAgICAgICB0aGlzLnBob3RvVVJMID0gdXNlci5waG90b1VSTDtcclxuICAgICAgICB0aGlzLmVtYWlsID0gdXNlci5lbWFpbDtcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSB1c2VyLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICAgICAgdGhpcy5waG9uZU51bWJlciA9IHVzZXIucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgdGhpcy5pc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IHVzZXIudGVuYW50SWQ7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlckRhdGEgPSB1c2VyLnByb3ZpZGVyRGF0YS5tYXAodXNlckluZm8gPT4gKE9iamVjdC5hc3NpZ24oe30sIHVzZXJJbmZvKSkpO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEuX2NvcHkodXNlci5tZXRhZGF0YSk7XHJcbiAgICAgICAgdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Fzc2lnbih1c2VyLnN0c1Rva2VuTWFuYWdlcik7XHJcbiAgICB9XHJcbiAgICBfY2xvbmUoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckltcGwoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzKSwgeyBhdXRoLCBzdHNUb2tlbk1hbmFnZXI6IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLl9jbG9uZSgpIH0pKTtcclxuICAgIH1cclxuICAgIF9vblJlbG9hZChjYWxsYmFjaykge1xyXG4gICAgICAgIC8vIFRoZXJlIHNob3VsZCBvbmx5IGV2ZXIgYmUgb25lIGxpc3RlbmVyLCBhbmQgdGhhdCBpcyBhIHNpbmdsZSBpbnN0YW5jZSBvZiBNdWx0aUZhY3RvclVzZXJcclxuICAgICAgICBfYXNzZXJ0KCF0aGlzLnJlbG9hZExpc3RlbmVyLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IGNhbGxiYWNrO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZFVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlbG9hZExpc3RlbmVyKHRoaXMucmVsb2FkVXNlckluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfbm90aWZ5UmVsb2FkTGlzdGVuZXIodXNlckluZm8pIHtcclxuICAgICAgICBpZiAodGhpcy5yZWxvYWRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyKHVzZXJJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGxpc3RlbmVyIGlzIHN1YnNjcmliZWQgeWV0LCBzYXZlIHRoZSByZXN1bHQgc28gaXQncyBhdmFpbGFibGUgd2hlbiB0aGV5IGRvIHN1YnNjcmliZVxyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gdXNlckluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoLl9zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIHJlbG9hZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHRva2Vuc1JlZnJlc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5pZFRva2VuICYmXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmlkVG9rZW4gIT09IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHRva2Vuc1JlZnJlc2hlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWxvYWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgaWYgKHRva2Vuc1JlZnJlc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIGRlbGV0ZUFjY291bnQodGhpcy5hdXRoLCB7IGlkVG9rZW4gfSkpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmNsZWFyUmVmcmVzaFRva2VuKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRGV0ZXJtaW5lIGlmIGNhbmNlbGxhYmxlLXByb21pc2VzIGFyZSBuZWNlc3NhcnkgdG8gdXNlIGluIHRoaXMgY2xhc3Mgc28gdGhhdCBkZWxldGUoKVxyXG4gICAgICAgIC8vICAgICAgIGNhbmNlbHMgcGVuZGluZyBhY3Rpb25zLi4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5zaWduT3V0KCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IHVpZDogdGhpcy51aWQsIGVtYWlsOiB0aGlzLmVtYWlsIHx8IHVuZGVmaW5lZCwgZW1haWxWZXJpZmllZDogdGhpcy5lbWFpbFZlcmlmaWVkLCBkaXNwbGF5TmFtZTogdGhpcy5kaXNwbGF5TmFtZSB8fCB1bmRlZmluZWQsIGlzQW5vbnltb3VzOiB0aGlzLmlzQW5vbnltb3VzLCBwaG90b1VSTDogdGhpcy5waG90b1VSTCB8fCB1bmRlZmluZWQsIHBob25lTnVtYmVyOiB0aGlzLnBob25lTnVtYmVyIHx8IHVuZGVmaW5lZCwgdGVuYW50SWQ6IHRoaXMudGVuYW50SWQgfHwgdW5kZWZpbmVkLCBwcm92aWRlckRhdGE6IHRoaXMucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSksIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIudG9KU09OKCksIFxyXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBldmVudCBJRCBtdXN0IGJlIG1haW50YWluZWQgaW4gY2FzZSB0aGVyZSBpcyBhIHBlbmRpbmdcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgICAgIF9yZWRpcmVjdEV2ZW50SWQ6IHRoaXMuX3JlZGlyZWN0RXZlbnRJZCB9LCB0aGlzLm1ldGFkYXRhLnRvSlNPTigpKSwgeyBcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgbGVnYWN5IFNESyAoZ28vZmlyZWJhc2UtYXV0aC1zZGstcGVyc2lzdGVuY2UtcGFyc2luZyk6XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hdXRoLmNvbmZpZy5hcGlLZXksIGFwcE5hbWU6IHRoaXMuYXV0aC5uYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSlNPTihhdXRoLCBvYmplY3QpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKF9hID0gb2JqZWN0LmRpc3BsYXlOYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSAoX2IgPSBvYmplY3QuZW1haWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwaG9uZU51bWJlciA9IChfYyA9IG9iamVjdC5waG9uZU51bWJlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob3RvVVJMID0gKF9kID0gb2JqZWN0LnBob3RvVVJMKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSAoX2UgPSBvYmplY3QudGVuYW50SWQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBfcmVkaXJlY3RFdmVudElkID0gKF9mID0gb2JqZWN0Ll9yZWRpcmVjdEV2ZW50SWQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBjcmVhdGVkQXQgPSAoX2cgPSBvYmplY3QuY3JlYXRlZEF0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgbGFzdExvZ2luQXQgPSAoX2ggPSBvYmplY3QubGFzdExvZ2luQXQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB7IHVpZCwgZW1haWxWZXJpZmllZCwgaXNBbm9ueW1vdXMsIHByb3ZpZGVyRGF0YSwgc3RzVG9rZW5NYW5hZ2VyOiBwbGFpbk9iamVjdFRva2VuTWFuYWdlciB9ID0gb2JqZWN0O1xyXG4gICAgICAgIF9hc3NlcnQodWlkICYmIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHN0c1Rva2VuTWFuYWdlciA9IFN0c1Rva2VuTWFuYWdlci5mcm9tSlNPTih0aGlzLm5hbWUsIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiB1aWQgPT09ICdzdHJpbmcnLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGRpc3BsYXlOYW1lLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGVtYWlsLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGVtYWlsVmVyaWZpZWQgPT09ICdib29sZWFuJywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBpc0Fub255bW91cyA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob25lTnVtYmVyLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHBob3RvVVJMLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKHRlbmFudElkLCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKF9yZWRpcmVjdEV2ZW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoY3JlYXRlZEF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGFzc2VydFN0cmluZ09yVW5kZWZpbmVkKGxhc3RMb2dpbkF0LCBhdXRoLm5hbWUpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlckltcGwoe1xyXG4gICAgICAgICAgICB1aWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIGVtYWlsLFxyXG4gICAgICAgICAgICBlbWFpbFZlcmlmaWVkLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXMsXHJcbiAgICAgICAgICAgIHBob3RvVVJMLFxyXG4gICAgICAgICAgICBwaG9uZU51bWJlcixcclxuICAgICAgICAgICAgdGVuYW50SWQsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgY3JlYXRlZEF0LFxyXG4gICAgICAgICAgICBsYXN0TG9naW5BdFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChwcm92aWRlckRhdGEgJiYgQXJyYXkuaXNBcnJheShwcm92aWRlckRhdGEpKSB7XHJcbiAgICAgICAgICAgIHVzZXIucHJvdmlkZXJEYXRhID0gcHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChfcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHVzZXIuX3JlZGlyZWN0RXZlbnRJZCA9IF9yZWRpcmVjdEV2ZW50SWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGEgVXNlciBmcm9tIGFuIGlkVG9rZW4gc2VydmVyIHJlc3BvbnNlXHJcbiAgICAgKiBAcGFyYW0gYXV0aFxyXG4gICAgICogQHBhcmFtIGlkVG9rZW5SZXNwb25zZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIHN0c1Rva2VuTWFuYWdlci51cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBGaXJlYmFzZSBBdXRoIHVzZXIuXHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZDogaWRUb2tlblJlc3BvbnNlLmxvY2FsSWQsXHJcbiAgICAgICAgICAgIGF1dGgsXHJcbiAgICAgICAgICAgIHN0c1Rva2VuTWFuYWdlcixcclxuICAgICAgICAgICAgaXNBbm9ueW1vdXNcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBVcGRhdGVzIHRoZSB1c2VyIGluZm8gYW5kIGRhdGEgYW5kIHJlc29sdmVzIHdpdGggYSB1c2VyIGluc3RhbmNlLlxyXG4gICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEluTWVtb3J5UGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJOT05FXCIgLyogTk9ORSAqLztcclxuICAgICAgICB0aGlzLnN0b3JhZ2UgPSB7fTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZVtrZXldID0gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyBudWxsIDogdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0b3JhZ2Vba2V5XTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIGluLW1lbW9yeSBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3Mvd29ya2Vyc1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Jbk1lbW9yeVBlcnNpc3RlbmNlLnR5cGUgPSAnTk9ORSc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgJ05PTkUnLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbk1lbW9yeVBlcnNpc3RlbmNlID0gSW5NZW1vcnlQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX3BlcnNpc3RlbmNlS2V5TmFtZShrZXksIGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgcmV0dXJuIGAke1wiZmlyZWJhc2VcIiAvKiBQRVJTSVNURU5DRSAqL306JHtrZXl9OiR7YXBpS2V5fToke2FwcE5hbWV9YDtcclxufVxyXG5jbGFzcyBQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKHBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KSB7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IHBlcnNpc3RlbmNlO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy51c2VyS2V5ID0gdXNlcktleTtcclxuICAgICAgICBjb25zdCB7IGNvbmZpZywgbmFtZSB9ID0gdGhpcy5hdXRoO1xyXG4gICAgICAgIHRoaXMuZnVsbFVzZXJLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKHRoaXMudXNlcktleSwgY29uZmlnLmFwaUtleSwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5mdWxsUGVyc2lzdGVuY2VLZXkgPSBfcGVyc2lzdGVuY2VLZXlOYW1lKFwicGVyc2lzdGVuY2VcIiAvKiBQRVJTSVNURU5DRV9VU0VSICovLCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gYXV0aC5fb25TdG9yYWdlRXZlbnQuYmluZChhdXRoKTtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9hZGRMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHNldEN1cnJlbnRVc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFVzZXJLZXksIHVzZXIudG9KU09OKCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0Q3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuX2dldCh0aGlzLmZ1bGxVc2VyS2V5KTtcclxuICAgICAgICByZXR1cm4gYmxvYiA/IFVzZXJJbXBsLl9mcm9tSlNPTih0aGlzLmF1dGgsIGJsb2IpIDogbnVsbDtcclxuICAgIH1cclxuICAgIHJlbW92ZUN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmUodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICB9XHJcbiAgICBzYXZlUGVyc2lzdGVuY2VGb3JSZWRpcmVjdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fc2V0KHRoaXMuZnVsbFBlcnNpc3RlbmNlS2V5LCB0aGlzLnBlcnNpc3RlbmNlLnR5cGUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2V0UGVyc2lzdGVuY2UobmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW5jZSA9PT0gbmV3UGVyc2lzdGVuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjdXJyZW50VXNlciA9IGF3YWl0IHRoaXMuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZSA9IG5ld1BlcnNpc3RlbmNlO1xyXG4gICAgICAgIGlmIChjdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRDdXJyZW50VXNlcihjdXJyZW50VXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UuX3JlbW92ZUxpc3RlbmVyKHRoaXMuZnVsbFVzZXJLZXksIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIGNyZWF0ZShhdXRoLCBwZXJzaXN0ZW5jZUhpZXJhcmNoeSwgdXNlcktleSA9IFwiYXV0aFVzZXJcIiAvKiBBVVRIX1VTRVIgKi8pIHtcclxuICAgICAgICBpZiAoIXBlcnNpc3RlbmNlSGllcmFyY2h5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxpbWluYXRlIGFueSBwZXJzaXN0ZW5jZXMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVBlcnNpc3RlbmNlcyA9IChhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSkpKS5maWx0ZXIocGVyc2lzdGVuY2UgPT4gcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgZmlyc3QgcGVyc2lzdGVuY2UgbGlzdGVkLCBvciBpbiBtZW1vcnkgaWYgbm9uZSBhdmFpbGFibGVcclxuICAgICAgICBsZXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlc1swXSB8fFxyXG4gICAgICAgICAgICBfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh1c2VyS2V5LCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbiAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGV4aXN0aW5nIHVzZXIsIHNldHRpbmcgdGhlIGNob3NlbiBwZXJzaXN0ZW5jZSB0byB0aGF0XHJcbiAgICAgICAgLy8gcGVyc2lzdGVuY2UgaWYgdGhlIHVzZXIgZXhpc3RzLlxyXG4gICAgICAgIGxldCB1c2VyVG9NaWdyYXRlID0gbnVsbDtcclxuICAgICAgICAvLyBOb3RlLCBoZXJlIHdlIGNoZWNrIGZvciBhIHVzZXIgaW4gX2FsbF8gcGVyc2lzdGVuY2VzLCBub3QganVzdCB0aGVcclxuICAgICAgICAvLyBvbmVzIGRlZW1lZCBhdmFpbGFibGUuIElmIHdlIGNhbiBtaWdyYXRlIGEgdXNlciBvdXQgb2YgYSBicm9rZW5cclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSwgd2Ugd2lsbCAoYnV0IG9ubHkgaWYgdGhhdCBwZXJzaXN0ZW5jZSBzdXBwb3J0cyBtaWdyYXRpb24pLlxyXG4gICAgICAgIGZvciAoY29uc3QgcGVyc2lzdGVuY2Ugb2YgcGVyc2lzdGVuY2VIaWVyYXJjaHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBVc2VySW1wbC5fZnJvbUpTT04oYXV0aCwgYmxvYik7IC8vIHRocm93cyBmb3IgdW5wYXJzYWJsZSBibG9iICh3cm9uZyBmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJUb01pZ3JhdGUgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGUgdXNlciBpbiBhIHBlcnNpc3RlbmNlIHRoYXQgZG9lcyBzdXBwb3J0IG1pZ3JhdGlvbiwgdXNlXHJcbiAgICAgICAgLy8gdGhhdCBtaWdyYXRpb24gcGF0aCAob2Ygb25seSBwZXJzaXN0ZW5jZXMgdGhhdCBzdXBwb3J0IG1pZ3JhdGlvbilcclxuICAgICAgICBjb25zdCBtaWdyYXRpb25IaWVyYXJjaHkgPSBhdmFpbGFibGVQZXJzaXN0ZW5jZXMuZmlsdGVyKHAgPT4gcC5fc2hvdWxkQWxsb3dNaWdyYXRpb24pO1xyXG4gICAgICAgIC8vIElmIHRoZSBwZXJzaXN0ZW5jZSBkb2VzIF9ub3RfIGFsbG93IG1pZ3JhdGlvbiwganVzdCBmaW5pc2ggb2ZmIGhlcmVcclxuICAgICAgICBpZiAoIXNlbGVjdGVkUGVyc2lzdGVuY2UuX3Nob3VsZEFsbG93TWlncmF0aW9uIHx8XHJcbiAgICAgICAgICAgICFtaWdyYXRpb25IaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IG1pZ3JhdGlvbkhpZXJhcmNoeVswXTtcclxuICAgICAgICBpZiAodXNlclRvTWlncmF0ZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG5vcm1hbGx5IHNob3VsZG4ndCB0aHJvdyBzaW5jZSBjaG9zZW5QZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpIGlzIHRydWUsIGJ1dCBpZiBpdCBkb2VzXHJcbiAgICAgICAgICAgIC8vIHdlJ2xsIGp1c3QgbGV0IGl0IGJ1YmJsZSB0byBzdXJmYWNlIHRoZSBlcnJvci5cclxuICAgICAgICAgICAgYXdhaXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2V0KGtleSwgdXNlclRvTWlncmF0ZS50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gY2xlYXIgdGhlIGtleSBpbiBvdGhlciBwZXJzaXN0ZW5jZXMgYnV0IGlnbm9yZSBlcnJvcnMuIFRoaXMgaGVscHMgcHJldmVudCBpc3N1ZXNcclxuICAgICAgICAvLyBzdWNoIGFzIHVzZXJzIGdldHRpbmcgc3R1Y2sgd2l0aCBhIHByZXZpb3VzIGFjY291bnQgYWZ0ZXIgc2lnbmluZyBvdXQgYW5kIHJlZnJlc2hpbmcgdGhlIHRhYi5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGV0ZXJtaW5lIHRoZSBicm93c2VyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVwb3J0aW5nIHVzYWdlIHRvIHRoZSBBUElcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRCcm93c2VyTmFtZSh1c2VyQWdlbnQpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAodWEuaW5jbHVkZXMoJ29wZXJhLycpIHx8IHVhLmluY2x1ZGVzKCdvcHIvJykgfHwgdWEuaW5jbHVkZXMoJ29waW9zLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiT3BlcmFcIiAvKiBPUEVSQSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0lFTW9iaWxlKHVhKSkge1xyXG4gICAgICAgIC8vIFdpbmRvd3MgcGhvbmUgSUVNb2JpbGUgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJJRU1vYmlsZVwiIC8qIElFTU9CSUxFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ21zaWUnKSB8fCB1YS5pbmNsdWRlcygndHJpZGVudC8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIklFXCIgLyogSUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIkVkZ2VcIiAvKiBFREdFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzRmlyZWZveCh1YSkpIHtcclxuICAgICAgICByZXR1cm4gXCJGaXJlZm94XCIgLyogRklSRUZPWCAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdzaWxrLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2lsa1wiIC8qIFNJTEsgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNCbGFja0JlcnJ5KHVhKSkge1xyXG4gICAgICAgIC8vIEJsYWNrYmVycnkgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJCbGFja2JlcnJ5XCIgLyogQkxBQ0tCRVJSWSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc1dlYk9TKHVhKSkge1xyXG4gICAgICAgIC8vIFdlYk9TIGRlZmF1bHQgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJXZWJvc1wiIC8qIFdFQk9TICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzU2FmYXJpKHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIlNhZmFyaVwiIC8qIFNBRkFSSSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCh1YS5pbmNsdWRlcygnY2hyb21lLycpIHx8IF9pc0Nocm9tZUlPUyh1YSkpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hyb21lXCIgLyogQ0hST01FICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCh1YSkpIHtcclxuICAgICAgICAvLyBBbmRyb2lkIHN0b2NrIGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiIC8qIEFORFJPSUQgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBNb3N0IG1vZGVybiBicm93c2VycyBoYXZlIG5hbWUvdmVyc2lvbiBhdCBlbmQgb2YgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAgICAgICAgY29uc3QgcmUgPSAvKFthLXpBLVpcXGRcXC5dKylcXC9bYS16QS1aXFxkXFwuXSokLztcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXNlckFnZW50Lm1hdGNoKHJlKTtcclxuICAgICAgICBpZiAoKG1hdGNoZXMgPT09IG51bGwgfHwgbWF0Y2hlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hlcy5sZW5ndGgpID09PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIk90aGVyXCIgLyogT1RIRVIgKi87XHJcbn1cclxuZnVuY3Rpb24gX2lzRmlyZWZveCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvZmlyZWZveFxcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1NhZmFyaSh1c2VyQWdlbnQgPSBnZXRVQSgpKSB7XHJcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuICh1YS5pbmNsdWRlcygnc2FmYXJpLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdjaHJvbWUvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2NyaW9zLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdhbmRyb2lkJykpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0Nocm9tZUlPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvY3Jpb3NcXC8vaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRU1vYmlsZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaWVtb2JpbGUvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNBbmRyb2lkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9hbmRyb2lkL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQmxhY2tCZXJyeSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1dlYk9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC93ZWJvcy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaXBob25lfGlwYWR8aXBvZC9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUzdPcjgodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gKC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDdfXFxkL2kudGVzdCh1YSkgfHxcclxuICAgICAgICAvKGlQYWR8aVBob25lfGlQb2QpLipPUyA4X1xcZC9pLnRlc3QodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJT1NTdGFuZGFsb25lKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuIF9pc0lPUyh1YSkgJiYgISEoKF9hID0gd2luZG93Lm5hdmlnYXRvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN0YW5kYWxvbmUpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lFMTAoKSB7XHJcbiAgICByZXR1cm4gaXNJRSgpICYmIGRvY3VtZW50LmRvY3VtZW50TW9kZSA9PT0gMTA7XHJcbn1cclxuZnVuY3Rpb24gX2lzTW9iaWxlQnJvd3Nlcih1YSA9IGdldFVBKCkpIHtcclxuICAgIC8vIFRPRE86IGltcGxlbWVudCBnZXRCcm93c2VyTmFtZSBlcXVpdmFsZW50IGZvciBPUy5cclxuICAgIHJldHVybiAoX2lzSU9TKHVhKSB8fFxyXG4gICAgICAgIF9pc0FuZHJvaWQodWEpIHx8XHJcbiAgICAgICAgX2lzV2ViT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQmxhY2tCZXJyeSh1YSkgfHxcclxuICAgICAgICAvd2luZG93cyBwaG9uZS9pLnRlc3QodWEpIHx8XHJcbiAgICAgICAgX2lzSUVNb2JpbGUodWEpKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJZnJhbWUoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIENoZWNrIHRoYXQgdGhlIGN1cnJlbnQgd2luZG93IGlzIG5vdCB0aGUgdG9wIHdpbmRvdy5cclxuICAgICAgICAvLyBJZiBzbywgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgcmV0dXJuICEhKHdpbmRvdyAmJiB3aW5kb3cgIT09IHdpbmRvdy50b3ApO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLypcclxuICogRGV0ZXJtaW5lIHRoZSBTREsgdmVyc2lvbiBzdHJpbmdcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRDbGllbnRWZXJzaW9uKGNsaWVudFBsYXRmb3JtLCBmcmFtZXdvcmtzID0gW10pIHtcclxuICAgIGxldCByZXBvcnRlZFBsYXRmb3JtO1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJCcm93c2VyXCIgLyogQlJPV1NFUiAqLzpcclxuICAgICAgICAgICAgLy8gSW4gYSBicm93c2VyIGVudmlyb25tZW50LCByZXBvcnQgdGhlIGJyb3dzZXIgbmFtZS5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IF9nZXRCcm93c2VyTmFtZShnZXRVQSgpKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIldvcmtlclwiIC8qIFdPUktFUiAqLzpcclxuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgYSB3b3JrZXIgcnVucyBmcm9tIGEgYnJvd3NlciBidXQgd2UgbmVlZCB0byBkaWZmZXJlbnRpYXRlIGFcclxuICAgICAgICAgICAgLy8gd29ya2VyIGZyb20gYSBicm93c2VyLlxyXG4gICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogQ2hyb21lLVdvcmtlci9Kc0NvcmUvNC45LjEvRmlyZWJhc2VDb3JlLXdlYi5cclxuICAgICAgICAgICAgcmVwb3J0ZWRQbGF0Zm9ybSA9IGAke19nZXRCcm93c2VyTmFtZShnZXRVQSgpKX0tJHtjbGllbnRQbGF0Zm9ybX1gO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gY2xpZW50UGxhdGZvcm07XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXBvcnRlZEZyYW1ld29ya3MgPSBmcmFtZXdvcmtzLmxlbmd0aFxyXG4gICAgICAgID8gZnJhbWV3b3Jrcy5qb2luKCcsJylcclxuICAgICAgICA6ICdGaXJlYmFzZUNvcmUtd2ViJzsgLyogZGVmYXVsdCB2YWx1ZSBpZiBubyBvdGhlciBmcmFtZXdvcmsgaXMgdXNlZCAqL1xyXG4gICAgcmV0dXJuIGAke3JlcG9ydGVkUGxhdGZvcm19LyR7XCJKc0NvcmVcIiAvKiBDT1JFICovfS8ke1NES19WRVJTSU9OfS8ke3JlcG9ydGVkRnJhbWV3b3Jrc31gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCwgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLCBjb25maWcpIHtcclxuICAgICAgICB0aGlzLmFwcCA9IGFwcDtcclxuICAgICAgICB0aGlzLmhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciA9IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlcjtcclxuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmVtdWxhdG9yQ29uZmlnID0gbnVsbDtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbiA9IG5ldyBTdWJzY3JpcHRpb24odGhpcyk7XHJcbiAgICAgICAgdGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzKTtcclxuICAgICAgICB0aGlzLnJlZGlyZWN0VXNlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gZmFsc2U7XHJcbiAgICAgICAgLy8gQW55IG5ldHdvcmsgY2FsbHMgd2lsbCBzZXQgdGhpcyB0byB0cnVlIGFuZCBwcmV2ZW50IHN1YnNlcXVlbnQgZW11bGF0b3JcclxuICAgICAgICAvLyBpbml0aWFsaXphdGlvblxyXG4gICAgICAgIHRoaXMuX2NhbkluaXRFbXVsYXRvciA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2RlbGV0ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fZXJyb3JGYWN0b3J5ID0gX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZO1xyXG4gICAgICAgIC8vIFRyYWNrcyB0aGUgbGFzdCBub3RpZmllZCBVSUQgZm9yIHN0YXRlIGNoYW5nZSBsaXN0ZW5lcnMgdG8gcHJldmVudFxyXG4gICAgICAgIC8vIHJlcGVhdGVkIGNhbGxzIHRvIHRoZSBjYWxsYmFja3MuIFVuZGVmaW5lZCBtZWFucyBpdCdzIG5ldmVyIGJlZW5cclxuICAgICAgICAvLyBjYWxsZWQsIHdoZXJlYXMgbnVsbCBtZWFucyBpdCdzIGJlZW4gY2FsbGVkIHdpdGggYSBzaWduZWQgb3V0IHVzZXJcclxuICAgICAgICB0aGlzLmxhc3ROb3RpZmllZFVpZCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHsgYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nOiBmYWxzZSB9O1xyXG4gICAgICAgIHRoaXMuZnJhbWV3b3JrcyA9IFtdO1xyXG4gICAgICAgIHRoaXMubmFtZSA9IGFwcC5uYW1lO1xyXG4gICAgICAgIHRoaXMuY2xpZW50VmVyc2lvbiA9IGNvbmZpZy5zZGtDbGllbnRWZXJzaW9uO1xyXG4gICAgfVxyXG4gICAgX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UocGVyc2lzdGVuY2VIaWVyYXJjaHksIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGlmIChwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyID0gX2dldEluc3RhbmNlKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEhhdmUgdG8gY2hlY2sgZm9yIGFwcCBkZWxldGlvbiB0aHJvdWdob3V0IGluaXRpYWxpemF0aW9uIChhZnRlciBlYWNoXHJcbiAgICAgICAgLy8gcHJvbWlzZSByZXNvbHV0aW9uKVxyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZSA9IHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgcGVyc2lzdGVuY2VIaWVyYXJjaHkpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHJlc29sdmVyIGVhcmx5IGlmIG5lY2Vzc2FyeSAob25seSBhcHBsaWNhYmxlIHRvIHdlYjpcclxuICAgICAgICAgICAgLy8gdGhpcyB3aWxsIGNhdXNlIHRoZSBpZnJhbWUgdG8gbG9hZCBpbW1lZGlhdGVseSBpbiBjZXJ0YWluIGNhc2VzKVxyXG4gICAgICAgICAgICBpZiAoKF9hID0gdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3Nob3VsZEluaXRQcm9hY3RpdmVseSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWlscywgZG9uJ3QgaGFsdCBhdXRoIGxvYWRpbmdcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9pbml0aWFsaXplKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHsgLyogSWdub3JlIHRoZSBlcnJvciAqLyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSAoKF9iID0gdGhpcy5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnVpZCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gdHJ1ZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJZiB0aGUgcGVyc2lzdGVuY2UgaXMgY2hhbmdlZCBpbiBhbm90aGVyIHdpbmRvdywgdGhlIHVzZXIgbWFuYWdlciB3aWxsIGxldCB1cyBrbm93XHJcbiAgICAgKi9cclxuICAgIGFzeW5jIF9vblN0b3JhZ2VFdmVudCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fZGVsZXRlZCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuY3VycmVudFVzZXIgJiYgIXVzZXIpIHtcclxuICAgICAgICAgICAgLy8gTm8gY2hhbmdlLCBkbyBub3RoaW5nICh3YXMgc2lnbmVkIG91dCBhbmQgcmVtYWluZWQgc2lnbmVkIG91dCkuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIHNhbWUgdXNlciBpcyB0byBiZSBzeW5jaHJvbml6ZWQuXHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdXNlciAmJiB0aGlzLmN1cnJlbnRVc2VyLnVpZCA9PT0gdXNlci51aWQpIHtcclxuICAgICAgICAgICAgLy8gRGF0YSB1cGRhdGUsIHNpbXBseSBjb3B5IGRhdGEgY2hhbmdlcy5cclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX2Fzc2lnbih1c2VyKTtcclxuICAgICAgICAgICAgLy8gSWYgdG9rZW5zIGNoYW5nZWQgZnJvbSBwcmV2aW91cyB1c2VyIHRva2VucywgdGhpcyB3aWxsIHRyaWdnZXJcclxuICAgICAgICAgICAgLy8gbm90aWZ5QXV0aExpc3RlbmVyc18uXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3VycmVudFVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFVwZGF0ZSBjdXJyZW50IEF1dGggc3RhdGUuIEVpdGhlciBhIG5ldyBsb2dpbiBvciBsb2dvdXQuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0aWFsaXplQ3VycmVudFVzZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIEZpcnN0IGNoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcGVuZGluZyByZWRpcmVjdCBldmVudC5cclxuICAgICAgICBsZXQgc3RvcmVkVXNlciA9IChhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UuZ2V0Q3VycmVudFVzZXIoKSk7XHJcbiAgICAgICAgaWYgKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVc2VyRXZlbnRJZCA9IChfYSA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVXNlckV2ZW50SWQgPSBzdG9yZWRVc2VyID09PSBudWxsIHx8IHN0b3JlZFVzZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0b3JlZFVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50cnlSZWRpcmVjdFNpZ25Jbihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgc3RvcmVkIHVzZXIgKGkuZS4gdGhlIG9sZCBcImN1cnJlbnRVc2VyXCIpIGhhcyBhIHJlZGlyZWN0SWQgdGhhdFxyXG4gICAgICAgICAgICAvLyBtYXRjaGVzIHRoZSByZWRpcmVjdCB1c2VyLCB0aGVuIHdlIHdhbnQgdG8gaW5pdGlhbGx5IHNpZ24gaW4gd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gbmV3IHVzZXIgb2JqZWN0IGZyb20gcmVzdWx0LlxyXG4gICAgICAgICAgICAvLyBUT0RPKHNhbWdobyk6IE1vcmUgdGhvcm91Z2hseSB0ZXN0IGFsbCBvZiB0aGlzXHJcbiAgICAgICAgICAgIGlmICgoIXJlZGlyZWN0VXNlckV2ZW50SWQgfHwgcmVkaXJlY3RVc2VyRXZlbnRJZCA9PT0gc3RvcmVkVXNlckV2ZW50SWQpICYmXHJcbiAgICAgICAgICAgICAgICAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LnVzZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBzdG9yZWRVc2VyID0gcmVzdWx0LnVzZXI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgbm8gdXNlciBpbiBwZXJzaXN0ZW5jZSwgdGhlcmUgaXMgbm8gY3VycmVudCB1c2VyLiBTZXQgdG8gbnVsbC5cclxuICAgICAgICBpZiAoIXN0b3JlZFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpc24ndCBhIHJlZGlyZWN0IHVzZXIsIHdlIGNhbiByZWxvYWQgYW5kIGJhaWxcclxuICAgICAgICAgICAgLy8gVGhpcyB3aWxsIGFsc28gY2F0Y2ggdGhlIHJlZGlyZWN0ZWQgdXNlciwgaWYgYXZhaWxhYmxlLCBhcyB0aGF0IG1ldGhvZFxyXG4gICAgICAgICAgICAvLyBzdHJpcHMgdGhlIF9yZWRpcmVjdEV2ZW50SWRcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHN0b3JlZFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfYXNzZXJ0KHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHVzZXIncyBldmVudCBJRCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBldmVudCBJRCxcclxuICAgICAgICAvLyBETyBOT1QgcmVsb2FkIHRoZSBjdXJyZW50IHVzZXIsIG90aGVyd2lzZSB0aGV5J2xsIGJlIGNsZWFyZWQgZnJvbSBzdG9yYWdlLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgaW1wb3J0YW50IGZvciB0aGUgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QoKSBmbG93LlxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0VXNlciAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXNlci5fcmVkaXJlY3RFdmVudElkID09PSBzdG9yZWRVc2VyLl9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcihzdG9yZWRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKHN0b3JlZFVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdHJ5UmVkaXJlY3RTaWduSW4ocmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIC8vIFRoZSByZWRpcmVjdCB1c2VyIG5lZWRzIHRvIGJlIGNoZWNrZWQgKGFuZCBzaWduZWQgaW4gaWYgYXZhaWxhYmxlKVxyXG4gICAgICAgIC8vIGR1cmluZyBhdXRoIGluaXRpYWxpemF0aW9uLiBBbGwgb2YgdGhlIG5vcm1hbCBzaWduIGluIGFuZCBsaW5rL3JlYXV0aFxyXG4gICAgICAgIC8vIGZsb3dzIGNhbGwgYmFjayBpbnRvIGF1dGggYW5kIHB1c2ggdGhpbmdzIG9udG8gdGhlIHByb21pc2UgcXVldWUuIFdlXHJcbiAgICAgICAgLy8gbmVlZCB0byBhd2FpdCB0aGUgcmVzdWx0IG9mIHRoZSByZWRpcmVjdCBzaWduIGluICppbnNpZGUgdGhlIHByb21pc2VcclxuICAgICAgICAvLyBxdWV1ZSouIFRoaXMgcHJlc2VudHMgYSBwcm9ibGVtOiB3ZSBydW4gaW50byBkZWFkbG9jay4gU2VlOlxyXG4gICAgICAgIC8vICAgIOKUjD4gW0luaXRpYWxpemF0aW9uXSDilIDilIDilIDilIDilIDilJBcclxuICAgICAgICAvLyAgICDilIw+IFs8b3RoZXIgcXVldWUgdGFza3M+XSDilIJcclxuICAgICAgICAvLyAgICDilJTilIAgW2dldFJlZGlyZWN0UmVzdWx0XSA84pSA4pSYXHJcbiAgICAgICAgLy8gICAgd2hlcmUgW10gYXJlIHRhc2tzIG9uIHRoZSBxdWV1ZSBhbmQgYXJyb3dzIGRlbm90ZSBhd2FpdHNcclxuICAgICAgICAvLyBJbml0aWFsaXphdGlvbiB3aWxsIG5ldmVyIGNvbXBsZXRlIGJlY2F1c2UgaXQncyB3YWl0aW5nIG9uIHNvbWV0aGluZ1xyXG4gICAgICAgIC8vIHRoYXQncyB3YWl0aW5nIGZvciBpbml0aWFsaXphdGlvbiB0byBjb21wbGV0ZSFcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIEluc3RlYWQsIHRoaXMgbWV0aG9kIGNhbGxzIGdldFJlZGlyZWN0UmVzdWx0KCkgKHN0b3JlZCBpblxyXG4gICAgICAgIC8vIF9jb21wbGV0ZVJlZGlyZWN0Rm4pIHdpdGggYW4gb3B0aW9uYWwgcGFyYW1ldGVyIHRoYXQgaW5zdHJ1Y3RzIGFsbCBvZlxyXG4gICAgICAgIC8vIHRoZSB1bmRlcmx5aW5nIGF1dGggb3BlcmF0aW9ucyB0byBza2lwIGFueXRoaW5nIHRoYXQgbXV0YXRlcyBhdXRoIHN0YXRlLlxyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGtub3cgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyIGlzIHNldCBzaW5jZSByZWRpcmVjdFJlc29sdmVyXHJcbiAgICAgICAgICAgIC8vIGlzIHBhc3NlZCBpbi4gVGhlIF9jb21wbGV0ZVJlZGlyZWN0Rm4gZXhwZWN0cyB0aGUgdW53cmFwcGVkIGV4dGVybi5cclxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9jb21wbGV0ZVJlZGlyZWN0Rm4odGhpcywgcmVkaXJlY3RSZXNvbHZlciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIFN3YWxsb3cgYW55IGVycm9ycyBoZXJlOyB0aGUgY29kZSBjYW4gcmV0cmlldmUgdGhlbSBpblxyXG4gICAgICAgICAgICAvLyBnZXRSZWRpcmVjdFJlc3VsdCgpLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIodXNlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlICE9PSBgYXV0aC8ke1wibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi99YCkge1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZXRoaW5nJ3Mgd3Jvbmcgd2l0aCB0aGUgdXNlcidzIHRva2VuLiBMb2cgdGhlbSBvdXQgYW5kIHJlbW92ZVxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbSBmcm9tIHN0b3JhZ2VcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKTtcclxuICAgIH1cclxuICAgIHVzZURldmljZUxhbmd1YWdlKCkge1xyXG4gICAgICAgIHRoaXMubGFuZ3VhZ2VDb2RlID0gX2dldFVzZXJMYW5ndWFnZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2RlbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLl9kZWxldGVkID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIHVwZGF0ZUN1cnJlbnRVc2VyKHVzZXJFeHRlcm4pIHtcclxuICAgICAgICAvLyBUaGUgcHVibGljIHVwZGF0ZUN1cnJlbnRVc2VyIG1ldGhvZCBuZWVkcyB0byBtYWtlIGEgY29weSBvZiB0aGUgdXNlcixcclxuICAgICAgICAvLyBhbmQgYWxzbyBjaGVjayB0aGF0IHRoZSBwcm9qZWN0IG1hdGNoZXNcclxuICAgICAgICBjb25zdCB1c2VyID0gdXNlckV4dGVyblxyXG4gICAgICAgICAgICA/IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyRXh0ZXJuKVxyXG4gICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh1c2VyLmF1dGguY29uZmlnLmFwaUtleSA9PT0gdGhpcy5jb25maWcuYXBpS2V5LCB0aGlzLCBcImludmFsaWQtdXNlci10b2tlblwiIC8qIElOVkFMSURfQVVUSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcih1c2VyICYmIHVzZXIuX2Nsb25lKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHRoaXMudGVuYW50SWQgPT09IHVzZXIudGVuYW50SWQsIHRoaXMsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5QXV0aExpc3RlbmVycygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2lnbk91dCgpIHtcclxuICAgICAgICAvLyBDbGVhciB0aGUgcmVkaXJlY3QgdXNlciB3aGVuIHNpZ25PdXQgaXMgY2FsbGVkXHJcbiAgICAgICAgaWYgKHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIgfHwgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3NldFJlZGlyZWN0VXNlcihudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VwZGF0ZUN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgfVxyXG4gICAgc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXNzZXJ0ZWRQZXJzaXN0ZW5jZS5zZXRQZXJzaXN0ZW5jZShfZ2V0SW5zdGFuY2UocGVyc2lzdGVuY2UpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIF9nZXRQZXJzaXN0ZW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnBlcnNpc3RlbmNlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlRXJyb3JNYXAoZXJyb3JNYXApIHtcclxuICAgICAgICB0aGlzLl9lcnJvckZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXAoKSk7XHJcbiAgICB9XHJcbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgIH1cclxuICAgIG9uSWRUb2tlbkNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5jb25maWcuYXBpS2V5LFxyXG4gICAgICAgICAgICBhdXRoRG9tYWluOiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluLFxyXG4gICAgICAgICAgICBhcHBOYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGN1cnJlbnRVc2VyOiAoX2EgPSB0aGlzLl9jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnRvSlNPTigpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXRSZWRpcmVjdFVzZXIodXNlciwgcG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgY29uc3QgcmVkaXJlY3RNYW5hZ2VyID0gYXdhaXQgdGhpcy5nZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1c2VyID09PSBudWxsXHJcbiAgICAgICAgICAgID8gcmVkaXJlY3RNYW5hZ2VyLnJlbW92ZUN1cnJlbnRVc2VyKClcclxuICAgICAgICAgICAgOiByZWRpcmVjdE1hbmFnZXIuc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlcihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAoIXRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgcmVzb2x2ZXIgPSAocG9wdXBSZWRpcmVjdFJlc29sdmVyICYmIF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyO1xyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc29sdmVyLCB0aGlzLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgW19nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSldLCBcInJlZGlyZWN0VXNlclwiIC8qIFJFRElSRUNUX1VTRVIgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXNlciA9XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlZGlyZWN0VXNlckZvcklkKGlkKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UndmUgY2xlYXJlZCBhbnkgcGVuZGluZyBwZXJzaXN0ZW5jZSBhY3Rpb25zIGlmIHdlJ3JlIG5vdCBpblxyXG4gICAgICAgIC8vIHRoZSBpbml0aWFsaXplclxyXG4gICAgICAgIGlmICh0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucXVldWUoYXN5bmMgKCkgPT4geyB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSB0aGlzLl9jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9yZWRpcmVjdEV2ZW50SWQpID09PSBpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoKF9iID0gdGhpcy5yZWRpcmVjdFVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5fcmVkaXJlY3RFdmVudElkKSA9PT0gaWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3RVc2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VyKSB7XHJcbiAgICAgICAgaWYgKHVzZXIgPT09IHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucXVldWUoYXN5bmMgKCkgPT4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogTm90aWZpZXMgbGlzdGVuZXJzIG9ubHkgaWYgdGhlIHVzZXIgaXMgY3VycmVudCAqL1xyXG4gICAgX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh1c2VyKSB7XHJcbiAgICAgICAgaWYgKHVzZXIgPT09IHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5ub3RpZnlBdXRoTGlzdGVuZXJzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2tleSgpIHtcclxuICAgICAgICByZXR1cm4gYCR7dGhpcy5jb25maWcuYXV0aERvbWFpbn06JHt0aGlzLmNvbmZpZy5hcGlLZXl9OiR7dGhpcy5uYW1lfWA7XHJcbiAgICB9XHJcbiAgICBfc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKiogUmV0dXJucyB0aGUgY3VycmVudCB1c2VyIGNhc3QgYXMgdGhlIGludGVybmFsIHR5cGUgKi9cclxuICAgIGdldCBfY3VycmVudFVzZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXI7XHJcbiAgICB9XHJcbiAgICBub3RpZnlBdXRoTGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pZFRva2VuU3Vic2NyaXB0aW9uLm5leHQodGhpcy5jdXJyZW50VXNlcik7XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVpZCA9IChfYiA9IChfYSA9IHRoaXMuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XHJcbiAgICAgICAgaWYgKHRoaXMubGFzdE5vdGlmaWVkVWlkICE9PSBjdXJyZW50VWlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gY3VycmVudFVpZDtcclxuICAgICAgICAgICAgdGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24ubmV4dCh0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZWdpc3RlclN0YXRlTGlzdGVuZXIoc3Vic2NyaXB0aW9uLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7IH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNiID0gdHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nXHJcbiAgICAgICAgICAgID8gbmV4dE9yT2JzZXJ2ZXJcclxuICAgICAgICAgICAgOiBuZXh0T3JPYnNlcnZlci5uZXh0LmJpbmQobmV4dE9yT2JzZXJ2ZXIpO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9pc0luaXRpYWxpemVkXHJcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKClcclxuICAgICAgICAgICAgOiB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgX2Fzc2VydChwcm9taXNlLCB0aGlzLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIC8vIFRoZSBjYWxsYmFjayBuZWVkcyB0byBiZSBjYWxsZWQgYXN5bmNocm9ub3VzbHkgcGVyIHRoZSBzcGVjLlxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICBwcm9taXNlLnRoZW4oKCkgPT4gY2IodGhpcy5jdXJyZW50VXNlcikpO1xyXG4gICAgICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gc3Vic2NyaXB0aW9uLmFkZE9ic2VydmVyKG5leHRPck9ic2VydmVyKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVucHJvdGVjdGVkIChmcm9tIHJhY2UgY29uZGl0aW9ucykgbWV0aG9kIHRvIHNldCB0aGUgY3VycmVudCB1c2VyLiBUaGlzXHJcbiAgICAgKiBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB3aXRoaW4gYSBxdWV1ZWQgY2FsbGJhY2suIFRoaXMgaXMgbmVjZXNzYXJ5XHJcbiAgICAgKiBiZWNhdXNlIHRoZSBxdWV1ZSBzaG91bGRuJ3QgcmVseSBvbiBhbm90aGVyIHF1ZXVlZCBjYWxsYmFjay5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZGlyZWN0bHlTZXRDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlciAhPT0gdXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RvcFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICAgICAgaWYgKHVzZXIgJiYgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICB1c2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmN1cnJlbnRVc2VyID0gdXNlcjtcclxuICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2Uuc2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFzc2VydGVkUGVyc2lzdGVuY2UucmVtb3ZlQ3VycmVudFVzZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBxdWV1ZShhY3Rpb24pIHtcclxuICAgICAgICAvLyBJbiBjYXNlIHNvbWV0aGluZyBlcnJvcnMsIHRoZSBjYWxsYmFjayBzdGlsbCBzaG91bGQgYmUgY2FsbGVkIGluIG9yZGVyXHJcbiAgICAgICAgLy8gdG8ga2VlcCB0aGUgcHJvbWlzZSBjaGFpbiBhbGl2ZVxyXG4gICAgICAgIHRoaXMub3BlcmF0aW9ucyA9IHRoaXMub3BlcmF0aW9ucy50aGVuKGFjdGlvbiwgYWN0aW9uKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vcGVyYXRpb25zO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFzc2VydGVkUGVyc2lzdGVuY2UoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciwgdGhpcywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfbG9nRnJhbWV3b3JrKGZyYW1ld29yaykge1xyXG4gICAgICAgIGlmICghZnJhbWV3b3JrIHx8IHRoaXMuZnJhbWV3b3Jrcy5pbmNsdWRlcyhmcmFtZXdvcmspKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnB1c2goZnJhbWV3b3JrKTtcclxuICAgICAgICAvLyBTb3J0IGFscGhhYmV0aWNhbGx5IHNvIHRoYXQgXCJGaXJlYmFzZUNvcmUtd2ViLEZpcmViYXNlVUktd2ViXCIgYW5kXHJcbiAgICAgICAgLy8gXCJGaXJlYmFzZVVJLXdlYixGaXJlYmFzZUNvcmUtd2ViXCIgYXJlbid0IHZpZXdlZCBhcyBkaWZmZXJlbnQuXHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnNvcnQoKTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBfZ2V0Q2xpZW50VmVyc2lvbih0aGlzLmNvbmZpZy5jbGllbnRQbGF0Zm9ybSwgdGhpcy5fZ2V0RnJhbWV3b3JrcygpKTtcclxuICAgIH1cclxuICAgIF9nZXRGcmFtZXdvcmtzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1ld29ya3M7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0QWRkaXRpb25hbEhlYWRlcnMoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgaGVhZGVycyBvbiBldmVyeSByZXF1ZXN0XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgW1wiWC1DbGllbnQtVmVyc2lvblwiIC8qIFhfQ0xJRU5UX1ZFUlNJT04gKi9dOiB0aGlzLmNsaWVudFZlcnNpb24sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5hcHAub3B0aW9ucy5hcHBJZCkge1xyXG4gICAgICAgICAgICBoZWFkZXJzW1wiWC1GaXJlYmFzZS1nbXBpZFwiIC8qIFhfRklSRUJBU0VfR01QSUQgKi9dID0gdGhpcy5hcHAub3B0aW9ucy5hcHBJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0c0hlYWRlciA9IGF3YWl0ICgoX2EgPSB0aGlzLmhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlci5nZXRJbW1lZGlhdGUoe1xyXG4gICAgICAgICAgICBvcHRpb25hbDogdHJ1ZSxcclxuICAgICAgICB9KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEhlYXJ0YmVhdHNIZWFkZXIoKSk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtQ2xpZW50XCIgLyogWF9GSVJFQkFTRV9DTElFTlQgKi9dID0gaGVhcnRiZWF0c0hlYWRlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlcnM7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIE1ldGhvZCB0byBiZSB1c2VkIHRvIGNhc3QgZG93biB0byBvdXIgcHJpdmF0ZSBpbXBsbWVudGF0aW9uIG9mIEF1dGguXHJcbiAqIEl0IHdpbGwgYWxzbyBoYW5kbGUgdW53cmFwcGluZyBmcm9tIHRoZSBjb21wYXQgdHlwZSBpZiBuZWNlc3NhcnlcclxuICpcclxuICogQHBhcmFtIGF1dGggQXV0aCBvYmplY3QgcGFzc2VkIGluIGZyb20gZGV2ZWxvcGVyXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2FzdEF1dGgoYXV0aCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxufVxyXG4vKiogSGVscGVyIGNsYXNzIHRvIHdyYXAgc3Vic2NyaWJlciBsb2dpYyAqL1xyXG5jbGFzcyBTdWJzY3JpcHRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5hZGRPYnNlcnZlciA9IGNyZWF0ZVN1YnNjcmliZShvYnNlcnZlciA9PiAodGhpcy5vYnNlcnZlciA9IG9ic2VydmVyKSk7XHJcbiAgICB9XHJcbiAgICBnZXQgbmV4dCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMub2JzZXJ2ZXIsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZlci5uZXh0LmJpbmQodGhpcy5vYnNlcnZlcik7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBGaXJlYmFzZSBBdXRoIEVtdWxhdG9yLCBpbnN0ZWFkIG9mIHByb2R1Y3Rpb25cclxuICogRmlyZWJhc2UgQXV0aCBzZXJ2aWNlcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtdXN0IGJlIGNhbGxlZCBzeW5jaHJvbm91c2x5IGltbWVkaWF0ZWx5IGZvbGxvd2luZyB0aGUgZmlyc3QgY2FsbCB0b1xyXG4gKiB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9LiAgRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMgYXMgZW11bGF0b3JcclxuICogdHJhZmZpYyBpcyBub3QgZW5jcnlwdGVkLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgJ2h0dHA6Ly8xMjcuMC4wLjE6OTA5OScsIHsgZGlzYWJsZVdhcm5pbmdzOiB0cnVlIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gdXJsIC0gVGhlIFVSTCBhdCB3aGljaCB0aGUgZW11bGF0b3IgaXMgcnVubmluZyAoZWcsICdodHRwOi8vbG9jYWxob3N0OjkwOTknKS5cclxuICogQHBhcmFtIG9wdGlvbnMgLSBPcHRpb25hbC4gYG9wdGlvbnMuZGlzYWJsZVdhcm5pbmdzYCBkZWZhdWx0cyB0byBgZmFsc2VgLiBTZXQgaXQgdG9cclxuICogYHRydWVgIHRvIGRpc2FibGUgdGhlIHdhcm5pbmcgYmFubmVyIGF0dGFjaGVkIHRvIHRoZSBET00uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgdXJsLCBvcHRpb25zKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0KGF1dGhJbnRlcm5hbC5fY2FuSW5pdEVtdWxhdG9yLCBhdXRoSW50ZXJuYWwsIFwiZW11bGF0b3ItY29uZmlnLWZhaWxlZFwiIC8qIEVNVUxBVE9SX0NPTkZJR19GQUlMRUQgKi8pO1xyXG4gICAgX2Fzc2VydCgvXmh0dHBzPzpcXC9cXC8vLnRlc3QodXJsKSwgYXV0aEludGVybmFsLCBcImludmFsaWQtZW11bGF0b3Itc2NoZW1lXCIgLyogSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUUgKi8pO1xyXG4gICAgY29uc3QgZGlzYWJsZVdhcm5pbmdzID0gISEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRpc2FibGVXYXJuaW5ncyk7XHJcbiAgICBjb25zdCBwcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbCh1cmwpO1xyXG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSBleHRyYWN0SG9zdEFuZFBvcnQodXJsKTtcclxuICAgIGNvbnN0IHBvcnRTdHIgPSBwb3J0ID09PSBudWxsID8gJycgOiBgOiR7cG9ydH1gO1xyXG4gICAgLy8gQWx3YXlzIHJlcGxhY2UgcGF0aCB3aXRoIFwiL1wiIChldmVuIGlmIGlucHV0IHVybCBoYWQgbm8gcGF0aCBhdCBhbGwsIG9yIGhhZCBhIGRpZmZlcmVudCBvbmUpLlxyXG4gICAgYXV0aEludGVybmFsLmNvbmZpZy5lbXVsYXRvciA9IHsgdXJsOiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BvcnRTdHJ9L2AgfTtcclxuICAgIGF1dGhJbnRlcm5hbC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmcgPSB0cnVlO1xyXG4gICAgYXV0aEludGVybmFsLmVtdWxhdG9yQ29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBwb3J0LFxyXG4gICAgICAgIHByb3RvY29sOiBwcm90b2NvbC5yZXBsYWNlKCc6JywgJycpLFxyXG4gICAgICAgIG9wdGlvbnM6IE9iamVjdC5mcmVlemUoeyBkaXNhYmxlV2FybmluZ3MgfSlcclxuICAgIH0pO1xyXG4gICAgaWYgKCFkaXNhYmxlV2FybmluZ3MpIHtcclxuICAgICAgICBlbWl0RW11bGF0b3JXYXJuaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xyXG4gICAgcmV0dXJuIHByb3RvY29sRW5kIDwgMCA/ICcnIDogdXJsLnN1YnN0cigwLCBwcm90b2NvbEVuZCArIDEpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCBhdXRob3JpdHkgPSAvKFxcL1xcLyk/KFtePyMvXSspLy5leGVjKHVybC5zdWJzdHIocHJvdG9jb2wubGVuZ3RoKSk7IC8vIEJldHdlZW4gLy8gYW5kIC8sID8gb3IgIy5cclxuICAgIGlmICghYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdDogJycsIHBvcnQ6IG51bGwgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhvc3RBbmRQb3J0ID0gYXV0aG9yaXR5WzJdLnNwbGl0KCdAJykucG9wKCkgfHwgJyc7IC8vIFN0cmlwIG91dCBcInVzZXJuYW1lOnBhc3N3b3JkQFwiLlxyXG4gICAgY29uc3QgYnJhY2tldGVkSVB2NiA9IC9eKFxcW1teXFxdXStcXF0pKDp8JCkvLmV4ZWMoaG9zdEFuZFBvcnQpO1xyXG4gICAgaWYgKGJyYWNrZXRlZElQdjYpIHtcclxuICAgICAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbaG9zdCwgcG9ydF0gPSBob3N0QW5kUG9ydC5zcGxpdCgnOicpO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChwb3J0KSB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlUG9ydChwb3J0U3RyKSB7XHJcbiAgICBpZiAoIXBvcnRTdHIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XHJcbiAgICBpZiAoaXNOYU4ocG9ydCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3J0O1xyXG59XHJcbmZ1bmN0aW9uIGVtaXRFbXVsYXRvcldhcm5pbmcoKSB7XHJcbiAgICBmdW5jdGlvbiBhdHRhY2hCYW5uZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgY29uc3Qgc3R5ID0gZWwuc3R5bGU7XHJcbiAgICAgICAgZWwuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgJ1J1bm5pbmcgaW4gZW11bGF0b3IgbW9kZS4gRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJztcclxuICAgICAgICBzdHkucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgIHN0eS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBzdHkuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIHN0eS5ib3JkZXIgPSAnLjFlbSBzb2xpZCAjMDAwMDAwJztcclxuICAgICAgICBzdHkuY29sb3IgPSAnI2I1MDAwMCc7XHJcbiAgICAgICAgc3R5LmJvdHRvbSA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5sZWZ0ID0gJzBweCc7XHJcbiAgICAgICAgc3R5Lm1hcmdpbiA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS56SW5kZXggPSAnMTAwMDAnO1xyXG4gICAgICAgIHN0eS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmaXJlYmFzZS1lbXVsYXRvci13YXJuaW5nJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmluZm8gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsJyArXHJcbiAgICAgICAgICAgICcgd2hpY2ggaXMgaW50ZW5kZWQgZm9yIGxvY2FsIHRlc3Rpbmcgb25seS4gIERvIG5vdCB1c2Ugd2l0aCcgK1xyXG4gICAgICAgICAgICAnIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdsb2FkaW5nJykge1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGF0dGFjaEJhbm5lcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhdHRhY2hCYW5uZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IGFuIHtAbGluayBBdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBwcm92aWRlciBJRCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCAnZmFjZWJvb2suY29tJywgb3IgJ2dvb2dsZS5jb20nLlxyXG4gICAgICovXHJcbiAgICBwcm92aWRlcklkLCBcclxuICAgIC8qKlxyXG4gICAgICogVGhlIGF1dGhlbnRpY2F0aW9uIHNpZ24gaW4gbWV0aG9kIGZvciB0aGUgY3JlZGVudGlhbC5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGV4YW1wbGUsIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELCBvclxyXG4gICAgICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy4gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgc2lnbi1pbiBtZXRob2RcclxuICAgICAqIGlkZW50aWZpZXIgYXMgcmV0dXJuZWQgaW4ge0BsaW5rIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsfS5cclxuICAgICAqL1xyXG4gICAgc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gcHJvdmlkZXJJZDtcclxuICAgICAgICB0aGlzLnNpZ25Jbk1ldGhvZCA9IHNpZ25Jbk1ldGhvZDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBvYmplY3QuXHJcbiAgICAgKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKF9hdXRoLCBfaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihfYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ25vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlc2V0UGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpyZXNldFBhc3N3b3JkXCIgLyogUkVTRVRfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIFNFVF9BQ0NPVU5UX0lORk8gKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGFwcGx5QWN0aW9uQ29kZSQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogU0VUX0FDQ09VTlRfSU5GTyAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmRcIiAvKiBTSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzZW5kT29iQ29kZVwiIC8qIFNFTkRfT09CX0NPREUgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUFuZENoYW5nZUVtYWlsKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yXHJcbiAqIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRFxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDb3ZlcnMgYm90aCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2VtYWlsLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9wYXNzd29yZCwgc2lnbkluTWV0aG9kLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF90ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi8sIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgdGhpcy5fZW1haWwgPSBfZW1haWw7XHJcbiAgICAgICAgdGhpcy5fcGFzc3dvcmQgPSBfcGFzc3dvcmQ7XHJcbiAgICAgICAgdGhpcy5fdGVuYW50SWQgPSBfdGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQsIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIG9vYkNvZGUsIHRlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgb29iQ29kZSwgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovLCB0ZW5hbnRJZCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMuX3RlbmFudElkXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBFaXRoZXIgYG9iamVjdGAgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuIFdoZW4gc3RyaW5nIGlzXHJcbiAgICAgKiBwcm92aWRlZCwgYEpTT04ucGFyc2VgIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBpZiAoKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5lbWFpbCkgJiYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5wYXNzd29yZCkpIHtcclxuICAgICAgICAgICAgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2Zyb21FbWFpbEFuZFBhc3N3b3JkKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcImVtYWlsTGlua1wiIC8qIEVNQUlMX0xJTksgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tRW1haWxBbmRDb2RlKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkLCBvYmoudGVuYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICBjYXNlIFwicGFzc3dvcmRcIiAvKiBFTUFJTF9QQVNTV09SRCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjYXNlIFwiZW1haWxMaW5rXCIgLyogRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMuc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJwYXNzd29yZFwiIC8qIEVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhJZHBcIiAvKiBTSUdOX0lOX1dJVEhfSURQICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSQxID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgT0F1dGggY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBsZW1lbnRhdGlvbnMgc3BlY2lmeSB0aGUgZGV0YWlscyBhYm91dCBlYWNoIGF1dGggcHJvdmlkZXIncyBjcmVkZW50aWFsIHJlcXVpcmVtZW50cy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdUb2tlbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21QYXJhbXMocGFyYW1zKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZCA9IG5ldyBPQXV0aENyZWRlbnRpYWwocGFyYW1zLnByb3ZpZGVySWQsIHBhcmFtcy5zaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGlmIChwYXJhbXMuaWRUb2tlbiB8fCBwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMiBhbmQgZWl0aGVyIElEIHRva2VuIG9yIGFjY2VzcyB0b2tlbi5cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmlkVG9rZW4gPSBwYXJhbXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIEFkZCBub25jZSBpZiBhdmFpbGFibGUgYW5kIG5vIHBlbmRpbmdUb2tlbiBpcyBwcmVzZW50LlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLm5vbmNlICYmICFwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLm5vbmNlID0gcGFyYW1zLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHBhcmFtcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAocGFyYW1zLm9hdXRoVG9rZW4gJiYgcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgLy8gT0F1dGggMSBhbmQgT0F1dGggdG9rZW4gd2l0aCB0b2tlbiBzZWNyZXRcclxuICAgICAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHBhcmFtcy5vYXV0aFRva2VuO1xyXG4gICAgICAgICAgICBjcmVkLnNlY3JldCA9IHBhcmFtcy5vYXV0aFRva2VuU2VjcmV0O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgX2ZhaWwoXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgaWRUb2tlbjogdGhpcy5pZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgc2VjcmV0OiB0aGlzLnNlY3JldCxcclxuICAgICAgICAgICAgbm9uY2U6IHRoaXMubm9uY2UsXHJcbiAgICAgICAgICAgIHBlbmRpbmdUb2tlbjogdGhpcy5wZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCB9ID0gb2JqLCByZXN0ID0gX19yZXN0KG9iaiwgW1wicHJvdmlkZXJJZFwiLCBcInNpZ25Jbk1ldGhvZFwiXSk7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8ICFzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGNyZWQgPSBuZXcgT0F1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgY3JlZC5pZFRva2VuID0gcmVzdC5pZFRva2VuIHx8IHVuZGVmaW5lZDtcclxuICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcmVzdC5hY2Nlc3NUb2tlbiB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgY3JlZC5zZWNyZXQgPSByZXN0LnNlY3JldDtcclxuICAgICAgICBjcmVkLm5vbmNlID0gcmVzdC5ub25jZTtcclxuICAgICAgICBjcmVkLnBlbmRpbmdUb2tlbiA9IHJlc3QucGVuZGluZ1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgcmV0dXJuIGNyZWQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICBidWlsZFJlcXVlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogSURQX1JFUVVFU1RfVVJJJDEsXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmVxdWVzdC5wZW5kaW5nVG9rZW4gPSB0aGlzLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBvc3RCb2R5ID0ge307XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydpZF90b2tlbiddID0gdGhpcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnYWNjZXNzX3Rva2VuJ10gPSB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlY3JldCkge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ29hdXRoX3Rva2VuX3NlY3JldCddID0gdGhpcy5zZWNyZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcG9zdEJvZHlbJ3Byb3ZpZGVySWQnXSA9IHRoaXMucHJvdmlkZXJJZDtcclxuICAgICAgICAgICAgaWYgKHRoaXMubm9uY2UgJiYgIXRoaXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnbm9uY2UnXSA9IHRoaXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVxdWVzdC5wb3N0Qm9keSA9IHF1ZXJ5c3RyaW5nKHBvc3RCb2R5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlcXVlc3Q7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRWZXJpZmljYXRpb25Db2RlXCIgLyogU0VORF9WRVJJRklDQVRJT05fQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gbGlua1dpdGhQaG9uZU51bWJlciQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIFNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbiAgICBpZiAocmVzcG9uc2UudGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIE5FRURfQ09ORklSTUFUSU9OICovLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuY29uc3QgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyA9IHtcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovXHJcbn07XHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgYXBpUmVxdWVzdCA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgb3BlcmF0aW9uOiAnUkVBVVRIJyB9KTtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIGFwaVJlcXVlc3QpLCBWRVJJRllfUEhPTkVfTlVNQkVSX0ZPUl9FWElTVElOR19FUlJPUl9NQVBfKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmVwcmVzZW50cyB0aGUgY3JlZGVudGlhbHMgcmV0dXJuZWQgYnkge0BsaW5rIFBob25lQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLywgXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVBdXRoQ3JlZGVudGlhbCh7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIGxpbmtXaXRoUGhvbmVOdW1iZXIkMShhdXRoLCBPYmplY3QuYXNzaWduKHsgaWRUb2tlbiB9LCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCB0aGlzLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpIHtcclxuICAgICAgICBjb25zdCB7IHRlbXBvcmFyeVByb29mLCBwaG9uZU51bWJlciwgdmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUgfSA9IHRoaXMucGFyYW1zO1xyXG4gICAgICAgIGlmICh0ZW1wb3JhcnlQcm9vZiAmJiBwaG9uZU51bWJlcikge1xyXG4gICAgICAgICAgICByZXR1cm4geyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2Vzc2lvbkluZm86IHZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgICAgICBjb2RlOiB2ZXJpZmljYXRpb25Db2RlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKiB7QGluaGVyaXRkb2MgQXV0aENyZWRlbnRpYWwudG9KU09OfSAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkXHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgb2JqLnBob25lTnVtYmVyID0gdGhpcy5wYXJhbXMucGhvbmVOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICBvYmoudGVtcG9yYXJ5UHJvb2YgPSB0aGlzLnBhcmFtcy50ZW1wb3JhcnlQcm9vZjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbkNvZGUgPSB0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQpIHtcclxuICAgICAgICAgICAgb2JqLnZlcmlmaWNhdGlvbklkID0gdGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvYmo7XHJcbiAgICB9XHJcbiAgICAvKiogR2VuZXJhdGVzIGEgcGhvbmUgY3JlZGVudGlhbCBiYXNlZCBvbiBhIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nLiAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBpZiAodHlwZW9mIGpzb24gPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKGpzb24pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlLCBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IGpzb247XHJcbiAgICAgICAgaWYgKCF2ZXJpZmljYXRpb25Db2RlICYmXHJcbiAgICAgICAgICAgICF2ZXJpZmljYXRpb25JZCAmJlxyXG4gICAgICAgICAgICAhcGhvbmVOdW1iZXIgJiZcclxuICAgICAgICAgICAgIXRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICB2ZXJpZmljYXRpb25JZCxcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uQ29kZSxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgIHRlbXBvcmFyeVByb29mXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIE1hcHMgdGhlIG1vZGUgc3RyaW5nIGluIGFjdGlvbiBjb2RlIFVSTCB0byBBY3Rpb24gQ29kZSBJbmZvIG9wZXJhdGlvbi5cclxuICpcclxuICogQHBhcmFtIG1vZGVcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlTW9kZShtb2RlKSB7XHJcbiAgICBzd2l0Y2ggKG1vZGUpIHtcclxuICAgICAgICBjYXNlICdyZWNvdmVyRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRUNPVkVSX0VNQUlMXCIgLyogUkVDT1ZFUl9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICdyZXNldFBhc3N3b3JkJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBQQVNTV09SRF9SRVNFVCAqLztcclxuICAgICAgICBjYXNlICdzaWduSW4nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5RW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfRU1BSUxcIiAvKiBWRVJJRllfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5QW5kQ2hhbmdlRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovO1xyXG4gICAgICAgIGNhc2UgJ3JldmVydFNlY29uZEZhY3RvckFkZGl0aW9uJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT05cIiAvKiBSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTiAqLztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogSGVscGVyIHRvIHBhcnNlIEZETCBsaW5rc1xyXG4gKlxyXG4gKiBAcGFyYW0gdXJsXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZURlZXBMaW5rKHVybCkge1xyXG4gICAgY29uc3QgbGluayA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpKVsnbGluayddO1xyXG4gICAgLy8gRG91YmxlIGxpbmsgY2FzZSAoYXV0b21hdGljIHJlZGlyZWN0KS5cclxuICAgIGNvbnN0IGRvdWJsZURlZXBMaW5rID0gbGlua1xyXG4gICAgICAgID8gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGxpbmspKVsnZGVlcF9saW5rX2lkJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICAvLyBpT1MgY3VzdG9tIHNjaGVtZSBsaW5rcy5cclxuICAgIGNvbnN0IGlPU0RlZXBMaW5rID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKHVybCkpWydkZWVwX2xpbmtfaWQnXTtcclxuICAgIGNvbnN0IGlPU0RvdWJsZURlZXBMaW5rID0gaU9TRGVlcExpbmtcclxuICAgICAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhpT1NEZWVwTGluaykpWydsaW5rJ11cclxuICAgICAgICA6IG51bGw7XHJcbiAgICByZXR1cm4gaU9TRG91YmxlRGVlcExpbmsgfHwgaU9TRGVlcExpbmsgfHwgZG91YmxlRGVlcExpbmsgfHwgbGluayB8fCB1cmw7XHJcbn1cclxuLyoqXHJcbiAqIEEgdXRpbGl0eSBjbGFzcyB0byBwYXJzZSBlbWFpbCBhY3Rpb24gVVJMcyBzdWNoIGFzIHBhc3N3b3JkIHJlc2V0LCBlbWFpbCB2ZXJpZmljYXRpb24sXHJcbiAqIGVtYWlsIGxpbmsgc2lnbiBpbiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBBY3Rpb25Db2RlVVJMIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGFjdGlvbkxpbmsgLSBUaGUgbGluayBmcm9tIHdoaWNoIHRvIGV4dHJhY3QgdGhlIFVSTC5cclxuICAgICAqIEByZXR1cm5zIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gb2JqZWN0LCBvciBudWxsIGlmIHRoZSBsaW5rIGlzIGludmFsaWQuXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGFjdGlvbkxpbmspIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZjtcclxuICAgICAgICBjb25zdCBzZWFyY2hQYXJhbXMgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoYWN0aW9uTGluaykpO1xyXG4gICAgICAgIGNvbnN0IGFwaUtleSA9IChfYSA9IHNlYXJjaFBhcmFtc1tcImFwaUtleVwiIC8qIEFQSV9LRVkgKi9dKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSBzZWFyY2hQYXJhbXNbXCJvb2JDb2RlXCIgLyogQ09ERSAqL10pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IG51bGw7XHJcbiAgICAgICAgY29uc3Qgb3BlcmF0aW9uID0gcGFyc2VNb2RlKChfYyA9IHNlYXJjaFBhcmFtc1tcIm1vZGVcIiAvKiBNT0RFICovXSkgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogbnVsbCk7XHJcbiAgICAgICAgLy8gVmFsaWRhdGUgQVBJIGtleSwgY29kZSBhbmQgbW9kZS5cclxuICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiBjb2RlICYmIG9wZXJhdGlvbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY29udGludWVVcmwgPSAoX2QgPSBzZWFyY2hQYXJhbXNbXCJjb250aW51ZVVybFwiIC8qIENPTlRJTlVFX1VSTCAqL10pICE9PSBudWxsICYmIF9kICE9PSB2b2lkIDAgPyBfZCA6IG51bGw7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSAoX2UgPSBzZWFyY2hQYXJhbXNbXCJsYW5ndWFnZUNvZGVcIiAvKiBMQU5HVUFHRV9DT0RFICovXSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogbnVsbDtcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gKF9mID0gc2VhcmNoUGFyYW1zW1widGVuYW50SWRcIiAvKiBURU5BTlRfSUQgKi9dKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWYgdGhlIGxpbmsgaXMgdmFsaWQsXHJcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsaW5rICAtIFRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlTGluayhsaW5rKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uTGluayA9IHBhcnNlRGVlcExpbmsobGluayk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25Db2RlVVJMKGFjdGlvbkxpbmspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWZcclxuICogdGhlIGxpbmsgaXMgdmFsaWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlQWN0aW9uQ29kZVVSTChsaW5rKSB7XHJcbiAgICByZXR1cm4gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsobGluayk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIHtAbGluayBFbWFpbEF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCAtIFVzZXIgYWNjb3VudCBwYXNzd29yZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIGFuIGVtYWlsIGxpbmsgYWZ0ZXIgYSBzaWduIGluIHdpdGhcclxuICAgICAqIGVtYWlsIGxpbmsgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCk7XHJcbiAgICAgKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB1c2VkIHRvIHZlcmlmeSB0aGUgbGluay5cclxuICAgICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gZW1haWxMaW5rIC0gU2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gICAgICogQHJldHVybnMgLSBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVVcmwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIEVtYWlsQXV0aENyZWRlbnRpYWwuX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIGFjdGlvbkNvZGVVcmwuY29kZSwgYWN0aW9uQ29kZVVybC50ZW5hbnRJZCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlBBU1NXT1JELCBldmVuIGZvciBlbWFpbCBsaW5rLlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInBhc3N3b3JkXCIgLyogUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JELlxyXG4gKi9cclxuRW1haWxBdXRoUHJvdmlkZXIuRU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0QgPSBcInBhc3N3b3JkXCIgLyogRU1BSUxfUEFTU1dPUkQgKi87XHJcbi8qKlxyXG4gKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5FTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EID0gXCJlbWFpbExpbmtcIiAvKiBFTUFJTF9MSU5LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBGZWRlcmF0ZWQgcHJvdmlkZXJzIChPQXV0aCAoaW5jbHVkaW5nIE9JREMpLCBTQU1MKS5cclxuICpcclxuICogVGhpcyBjbGFzcyBpcyBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBQcm92aWRlciBmb3Igd2hpY2ggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGdlbmVyYXRlZC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGxhbmd1YWdlIGdvZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlQ29kZSAtIGxhbmd1YWdlIGNvZGVcclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgT0F1dGggY3VzdG9tIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiBhbiBPQXV0aCByZXF1ZXN0IGZvciBwb3B1cCBhbmQgcmVkaXJlY3Qgc2lnbi1pblxyXG4gICAgICogb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGEgZGV0YWlsZWQgbGlzdCwgY2hlY2sgdGhlIHJlc2VydmVkIHJlcXVpcmVkIE9BdXRoIDIuMCBwYXJhbWV0ZXJzIHN1Y2ggYXMgYGNsaWVudF9pZGAsXHJcbiAgICAgKiBgcmVkaXJlY3RfdXJpYCwgYHNjb3BlYCwgYHJlc3BvbnNlX3R5cGVgLCBhbmQgYHN0YXRlYCBhcmUgbm90IGFsbG93ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIC0gVGhlIGN1c3RvbSBPQXV0aCBwYXJhbWV0ZXJzIHRvIHBhc3MgaW4gdGhlIE9BdXRoIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBDdXN0b21QYXJhbWV0ZXJzfS5cclxuICAgICAqL1xyXG4gICAgZ2V0Q3VzdG9tUGFyYW1ldGVycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21QYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21tb24gY29kZSB0byBhbGwgT0F1dGggcHJvdmlkZXJzLiBUaGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlXHJcbiAqIHtAbGluayBPQXV0aFByb3ZpZGVyfSBzbyB0aGF0IGNoaWxkIHByb3ZpZGVycyAobGlrZVxyXG4gKiB7QGxpbmsgR29vZ2xlQXV0aFByb3ZpZGVyfSkgZG9uJ3QgaW5oZXJpdCB0aGUgYGNyZWRlbnRpYWxgIGluc3RhbmNlIG1ldGhvZC5cclxuICogSW5zdGVhZCwgdGhleSByZWx5IG9uIGEgc3RhdGljIGBjcmVkZW50aWFsYCBtZXRob2QuXHJcbiAqL1xyXG5jbGFzcyBCYXNlT0F1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLnNjb3BlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gT0F1dGggc2NvcGUgdG8gdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjb3BlIC0gUHJvdmlkZXIgT0F1dGggc2NvcGUgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBhZGRTY29wZShzY29wZSkge1xyXG4gICAgICAgIC8vIElmIG5vdCBhbHJlYWR5IGFkZGVkLCBhZGQgc2NvcGUgdG8gbGlzdC5cclxuICAgICAgICBpZiAoIXRoaXMuc2NvcGVzLmluY2x1ZGVzKHNjb3BlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3Blcy5wdXNoKHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2YgT0F1dGggc2NvcGVzLlxyXG4gICAgICovXHJcbiAgICBnZXRTY29wZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLnNjb3Blc107XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGdlbmVyaWMge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgX2Fzc2VydCgncHJvdmlkZXJJZCcgaW4gb2JqICYmICdzaWduSW5NZXRob2QnIGluIG9iaiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKG9iaik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcidzIGFjY2VzcyB0b2tlbiBvciBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhlIHJhdyBub25jZSBpcyByZXF1aXJlZCB3aGVuIGFuIElEIHRva2VuIHdpdGggYSBub25jZSBmaWVsZCBpcyBwcm92aWRlZC4gVGhlIFNIQS0yNTYgaGFzaCBvZlxyXG4gICAgICogdGhlIHJhdyBub25jZSBtdXN0IG1hdGNoIHRoZSBub25jZSBmaWVsZCBpbiB0aGUgSUQgdG9rZW4uXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIGBnb29nbGVVc2VyYCBmcm9tIHRoZSBvbnN1Y2Nlc3MgR29vZ2xlIFNpZ24gSW4gY2FsbGJhY2suXHJcbiAgICAgKiAvLyBJbml0aWFsaXplIGEgZ2VuZXJhdGUgT0F1dGggcHJvdmlkZXIgd2l0aCBhIGBnb29nbGUuY29tYCBwcm92aWRlcklkLlxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgT0F1dGhQcm92aWRlcignZ29vZ2xlLmNvbScpO1xyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWwoe1xyXG4gICAgICogICBpZFRva2VuOiBnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuLFxyXG4gICAgICogfSk7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwYXJhbXMgLSBFaXRoZXIgdGhlIG9wdGlvbnMgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIElEIHRva2VuLCBhY2Nlc3MgdG9rZW4gYW5kIHJhdyBub25jZVxyXG4gICAgICogb3IgdGhlIElEIHRva2VuIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fY3JlZGVudGlhbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgbm9uY2U6IHBhcmFtcy5yYXdOb25jZSB9KSk7XHJcbiAgICB9XHJcbiAgICAvKiogQW4gaW50ZXJuYWwgY3JlZGVudGlhbCBtZXRob2QgdGhhdCBhY2NlcHRzIG1vcmUgcGVybWlzc2l2ZSBvcHRpb25zICovXHJcbiAgICBfY3JlZGVudGlhbChwYXJhbXMpIHtcclxuICAgICAgICBfYXNzZXJ0KHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICAvLyBGb3IgT0F1dGhDcmVkZW50aWFsLCBzaWduIGluIG1ldGhvZCBpcyBzYW1lIGFzIHByb3ZpZGVySWQuXHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcmFtcyksIHsgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLCBzaWduSW5NZXRob2Q6IHRoaXMucHJvdmlkZXJJZCB9KSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhQcm92aWRlci5vYXV0aENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgb2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuLCBvYXV0aFRva2VuU2VjcmV0LCBwZW5kaW5nVG9rZW4sIG5vbmNlLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAhb2F1dGhUb2tlblNlY3JldCAmJlxyXG4gICAgICAgICAgICAhb2F1dGhJZFRva2VuICYmXHJcbiAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLl9jcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuOiBvYXV0aEFjY2Vzc1Rva2VuLFxyXG4gICAgICAgICAgICAgICAgbm9uY2UsXHJcbiAgICAgICAgICAgICAgICBwZW5kaW5nVG9rZW5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYW4ge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZm9yIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgndXNlcl9iaXJ0aGRheScpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEZhY2Vib29rQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBGYWNlYm9vay5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGV2ZW50YCBmcm9tIHRoZSBGYWNlYm9vayBhdXRoLmF1dGhSZXNwb25zZUNoYW5nZSBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKGV2ZW50LmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEZhY2Vib29rIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EID0gXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkZBQ0VCT09LLiAqL1xyXG5GYWNlYm9va0F1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR29vZ2xlQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovKTtcclxuICAgICAgICB0aGlzLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBHb29nbGUuIEF0IGxlYXN0IG9uZSBvZiBJRCB0b2tlbiBhbmQgYWNjZXNzIHRva2VuIGlzIHJlcXVpcmVkLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiAvLyBcXGBnb29nbGVVc2VyXFxgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChnb29nbGVVc2VyLmdldEF1dGhSZXNwb25zZSgpLmlkX3Rva2VuKTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlkVG9rZW4gLSBHb29nbGUgSUQgdG9rZW4uXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHb29nbGUgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChpZFRva2VuLCBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBHb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogR29vZ2xlQXV0aFByb3ZpZGVyLkdPT0dMRV9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghb2F1dGhJZFRva2VuICYmICFvYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIC8vIFRoaXMgY291bGQgYmUgYW4gb2F1dGggMSBjcmVkZW50aWFsIG9yIGEgcGhvbmUgY3JlZGVudGlhbFxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9EID0gXCJnb29nbGUuY29tXCIgLyogR09PR0xFICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImdvb2dsZS5jb21cIiAvKiBHT09HTEUgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi5cclxuICpcclxuICogQHJlbWFya3NcclxuICogR2l0SHViIHJlcXVpcmVzIGFuIE9BdXRoIDIuMCByZWRpcmVjdCwgc28geW91IGNhbiBlaXRoZXIgaGFuZGxlIHRoZSByZWRpcmVjdCBkaXJlY3RseSwgb3IgdXNlXHJcbiAqIHRoZSB7QGxpbmsgc2lnbkluV2l0aFBvcHVwfSBoYW5kbGVyOlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR2l0aHViQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3JlcG8nKTtcclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdpdGh1YkF1dGhQcm92aWRlcigpO1xyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdpdGh1YiBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR2l0aHViQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdpdGh1Yi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYWNjZXNzVG9rZW4gLSBHaXRodWIgYWNjZXNzIHRva2VuLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbChhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBHaXRodWJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogR2l0aHViQXV0aFByb3ZpZGVyLkdJVEhVQl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW5cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBHaXRodWJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UgfHwgISgnb2F1dGhBY2Nlc3NUb2tlbicgaW4gdG9rZW5SZXNwb25zZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodG9rZW5SZXNwb25zZS5vYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QgPSBcImdpdGh1Yi5jb21cIiAvKiBHSVRIVUIgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5HSVRIVUIuICovXHJcbkdpdGh1YkF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4vKipcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCwgcHJvdmlkZXJJZCk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nVG9rZW4gPSBwZW5kaW5nVG9rZW47XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5idWlsZFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0LmlkVG9rZW4gPSBpZFRva2VuO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5hdXRvQ3JlYXRlID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiB0aGlzLnNpZ25Jbk1ldGhvZCxcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogdGhpcy5wcm92aWRlcklkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3RhdGljIG1ldGhvZCB0byBkZXNlcmlhbGl6ZSBhIEpTT04gcmVwcmVzZW50YXRpb24gb2YgYW4gb2JqZWN0IGludG8gYW5cclxuICAgICAqIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gSW5wdXQgY2FuIGJlIGVpdGhlciBPYmplY3Qgb3IgdGhlIHN0cmluZ2lmaWVkIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBvYmplY3QuXHJcbiAgICAgKiBXaGVuIHN0cmluZyBpcyBwcm92aWRlZCwgSlNPTi5wYXJzZSB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LCBudWxsIGlzIHJldHVybmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IG9iaiA9IHR5cGVvZiBqc29uID09PSAnc3RyaW5nJyA/IEpTT04ucGFyc2UoanNvbikgOiBqc29uO1xyXG4gICAgICAgIGNvbnN0IHsgcHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kLCBwZW5kaW5nVG9rZW4gfSA9IG9iajtcclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQgfHxcclxuICAgICAgICAgICAgIXNpZ25Jbk1ldGhvZCB8fFxyXG4gICAgICAgICAgICAhcGVuZGluZ1Rva2VuIHx8XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQgIT09IHNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSGVscGVyIHN0YXRpYyBtZXRob2QgdG8gYXZvaWQgZXhwb3NpbmcgdGhlIGNvbnN0cnVjdG9yIHRvIGVuZCB1c2Vycy5cclxuICAgICAqXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBTQU1MQXV0aENyZWRlbnRpYWwocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgIH1cclxuICAgIGJ1aWxkUmVxdWVzdCgpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiBJRFBfUkVRVUVTVF9VUkksXHJcbiAgICAgICAgICAgIHJldHVyblNlY3VyZVRva2VuOiB0cnVlLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBTQU1MX1BST1ZJREVSX1BSRUZJWCA9ICdzYW1sLic7XHJcbi8qKlxyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBmb3IgU0FNTC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgU0FNTEF1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnN0cnVjdG9yLiBUaGUgcHJvdmlkZXJJZCBtdXN0IHN0YXJ0IHdpdGggXCJzYW1sLlwiXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXJJZCAtIFNBTUwgcHJvdmlkZXIgSUQuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBfYXNzZXJ0KHByb3ZpZGVySWQuc3RhcnRzV2l0aChTQU1MX1BST1ZJREVSX1BSRUZJWCksIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGFmdGVyIGFcclxuICAgICAqIHN1Y2Nlc3NmdWwgU0FNTCBmbG93IGNvbXBsZXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlLCB0byBnZXQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgeW91IGNvdWxkIHdyaXRlIHRoZVxyXG4gICAgICogZm9sbG93aW5nIGNvZGU6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHNhbWxQcm92aWRlcik7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIEpTT04gc3RyaW5nIG9yIGEgcGxhaW4gb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aENyZWRlbnRpYWwuZnJvbUpTT04oanNvbik7XHJcbiAgICAgICAgX2Fzc2VydChjcmVkZW50aWFsLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgcGVuZGluZ1Rva2VuLCBwcm92aWRlcklkIH0gPSB0b2tlblJlc3BvbnNlO1xyXG4gICAgICAgIGlmICghcGVuZGluZ1Rva2VuIHx8ICFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gU0FNTEF1dGhDcmVkZW50aWFsLl9jcmVhdGUocHJvdmlkZXJJZCwgcGVuZGluZ1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIFR3aXR0ZXIgQWNjZXNzIFRva2VuIGFuZCBTZWNyZXQuXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqICAgY29uc3Qgc2VjcmV0ID0gY3JlZGVudGlhbC5zZWNyZXQ7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBUd2l0dGVyQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFR3aXR0ZXJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcInR3aXR0ZXIuY29tXCIgLyogVFdJVFRFUiAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBUd2l0dGVyLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB0b2tlbiAtIFR3aXR0ZXIgYWNjZXNzIHRva2VuLlxyXG4gICAgICogQHBhcmFtIHNlY3JldCAtIFR3aXR0ZXIgc2VjcmV0LlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbCh0b2tlbiwgc2VjcmV0KSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IFR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogVHdpdHRlckF1dGhQcm92aWRlci5UV0lUVEVSX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBvYXV0aFRva2VuOiB0b2tlbixcclxuICAgICAgICAgICAgb2F1dGhUb2tlblNlY3JldDogc2VjcmV0XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoKGVycm9yLmN1c3RvbURhdGEgfHwge30pKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh7IF90b2tlblJlc3BvbnNlOiB0b2tlblJlc3BvbnNlIH0pIHtcclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHsgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoQWNjZXNzVG9rZW4gfHwgIW9hdXRoVG9rZW5TZWNyZXQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uVFdJVFRFUi4gKi9cclxuVHdpdHRlckF1dGhQcm92aWRlci5UV0lUVEVSX1NJR05fSU5fTUVUSE9EID0gXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5UV0lUVEVSLiAqL1xyXG5Ud2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJ0d2l0dGVyLmNvbVwiIC8qIFRXSVRURVIgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25VcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25VcFwiIC8qIFNJR05fVVAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlckNyZWRlbnRpYWxJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHBhcmFtcy51c2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHBhcmFtcy5wcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMuX3Rva2VuUmVzcG9uc2UgPSBwYXJhbXMuX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gcGFyYW1zLm9wZXJhdGlvblR5cGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICBjb25zdCB1c2VyQ3JlZCA9IG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogaWRUb2tlblJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJDcmVkO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIF9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpIHtcclxuICAgICAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgX3Rva2VuUmVzcG9uc2U6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcHJvdmlkZXJJZEZvclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICBpZiAocmVzcG9uc2UucHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5wcm92aWRlcklkO1xyXG4gICAgfVxyXG4gICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gXCJwaG9uZVwiIC8qIFBIT05FICovO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIGFzIGFuIGFub255bW91cyB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGVyZSBpcyBhbHJlYWR5IGFuIGFub255bW91cyB1c2VyIHNpZ25lZCBpbiwgdGhhdCB1c2VyIHdpbGwgYmUgcmV0dXJuZWQ7IG90aGVyd2lzZSwgYVxyXG4gKiBuZXcgYW5vbnltb3VzIHVzZXIgaWRlbnRpdHkgd2lsbCBiZSBjcmVhdGVkIGFuZCByZXR1cm5lZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5Bbm9ueW1vdXNseShhdXRoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIGlmICgoX2EgPSBhdXRoSW50ZXJuYWwuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pc0Fub255bW91cykge1xyXG4gICAgICAgIC8vIElmIGFuIGFub255bW91cyB1c2VyIGlzIGFscmVhZHkgc2lnbmVkIGluLCBubyBuZWVkIHRvIHNpZ24gdGhlbSBpbiBhZ2Fpbi5cclxuICAgICAgICByZXR1cm4gbmV3IFVzZXJDcmVkZW50aWFsSW1wbCh7XHJcbiAgICAgICAgICAgIHVzZXI6IGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgb3BlcmF0aW9uVHlwZTogXCJzaWduSW5cIiAvKiBTSUdOX0lOICovXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHNpZ25VcChhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UsIHRydWUpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvckVycm9yIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBzdXBlcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBvcGVyYXRpb25UeXBlO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTXVsdGlGYWN0b3JFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogKF9hID0gYXV0aC50ZW5hbnRJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IGVycm9yLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlLFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21FcnJvckFuZE9wZXJhdGlvbihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JFcnJvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcik7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwsIHVzZXIpIHtcclxuICAgIGNvbnN0IGlkVG9rZW5Qcm92aWRlciA9IG9wZXJhdGlvblR5cGUgPT09IFwicmVhdXRoZW50aWNhdGVcIiAvKiBSRUFVVEhFTlRJQ0FURSAqL1xyXG4gICAgICAgID8gY3JlZGVudGlhbC5fZ2V0UmVhdXRoZW50aWNhdGlvblJlc29sdmVyKGF1dGgpXHJcbiAgICAgICAgOiBjcmVkZW50aWFsLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICByZXR1cm4gaWRUb2tlblByb3ZpZGVyLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogTUZBX1JFUVVJUkVEICovfWApIHtcclxuICAgICAgICAgICAgdGhyb3cgTXVsdGlGYWN0b3JFcnJvci5fZnJvbUVycm9yQW5kT3BlcmF0aW9uKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGFrZXMgYSBzZXQgb2YgVXNlckluZm8gcHJvdmlkZXIgZGF0YSBhbmQgY29udmVydHMgaXQgdG8gYSBzZXQgb2YgbmFtZXNcclxuICovXHJcbmZ1bmN0aW9uIHByb3ZpZGVyRGF0YUFzTmFtZXMocHJvdmlkZXJEYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IFNldChwcm92aWRlckRhdGFcclxuICAgICAgICAubWFwKCh7IHByb3ZpZGVySWQgfSkgPT4gcHJvdmlkZXJJZClcclxuICAgICAgICAuZmlsdGVyKHBpZCA9PiAhIXBpZCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVbmxpbmtzIGEgcHJvdmlkZXIgZnJvbSBhIHVzZXIgYWNjb3VudC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVySWQgLSBUaGUgcHJvdmlkZXIgdG8gdW5saW5rLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1bmxpbmsodXNlciwgcHJvdmlkZXJJZCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyh0cnVlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVySWQpO1xyXG4gICAgY29uc3QgeyBwcm92aWRlclVzZXJJbmZvIH0gPSBhd2FpdCBkZWxldGVMaW5rZWRBY2NvdW50cyh1c2VySW50ZXJuYWwuYXV0aCwge1xyXG4gICAgICAgIGlkVG9rZW46IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKCksXHJcbiAgICAgICAgZGVsZXRlUHJvdmlkZXI6IFtwcm92aWRlcklkXVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBwcm92aWRlcnNMZWZ0ID0gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlclVzZXJJbmZvIHx8IFtdKTtcclxuICAgIHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbHRlcihwZCA9PiBwcm92aWRlcnNMZWZ0LmhhcyhwZC5wcm92aWRlcklkKSk7XHJcbiAgICBpZiAoIXByb3ZpZGVyc0xlZnQuaGFzKFwicGhvbmVcIiAvKiBQSE9ORSAqLykpIHtcclxuICAgICAgICB1c2VySW50ZXJuYWwucGhvbmVOdW1iZXIgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgdXNlckludGVybmFsLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gdXNlckludGVybmFsO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rJDEodXNlciwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgY3JlZGVudGlhbC5fbGlua1RvSWRUb2tlbih1c2VyLmF1dGgsIGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpKSwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbih1c2VyLCBcImxpbmtcIiAvKiBMSU5LICovLCByZXNwb25zZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2Fzc2VydExpbmtlZFN0YXR1cyhleHBlY3RlZCwgdXNlciwgcHJvdmlkZXIpIHtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgY29uc3QgcHJvdmlkZXJJZHMgPSBwcm92aWRlckRhdGFBc05hbWVzKHVzZXIucHJvdmlkZXJEYXRhKTtcclxuICAgIGNvbnN0IGNvZGUgPSBleHBlY3RlZCA9PT0gZmFsc2VcclxuICAgICAgICA/IFwicHJvdmlkZXItYWxyZWFkeS1saW5rZWRcIiAvKiBQUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL1xyXG4gICAgICAgIDogXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogTk9fU1VDSF9QUk9WSURFUiAqLztcclxuICAgIF9hc3NlcnQocHJvdmlkZXJJZHMuaGFzKHByb3ZpZGVyKSA9PT0gZXhwZWN0ZWQsIHVzZXIuYXV0aCwgY29kZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3JlYXV0aGVudGljYXRlKHVzZXIsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XHJcbiAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIFJFQVVUSEVOVElDQVRFICovO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIF9wcm9jZXNzQ3JlZGVudGlhbFNhdmluZ01mYUNvbnRleHRJZk5lY2Vzc2FyeShhdXRoLCBvcGVyYXRpb25UeXBlLCBjcmVkZW50aWFsLCB1c2VyKSwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLmlkVG9rZW4sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gX3BhcnNlVG9rZW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgX2Fzc2VydChwYXJzZWQsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgeyBzdWI6IGxvY2FsSWQgfSA9IHBhcnNlZDtcclxuICAgICAgICBfYXNzZXJ0KHVzZXIudWlkID09PSBsb2NhbElkLCBhdXRoLCBcInVzZXItbWlzbWF0Y2hcIiAvKiBVU0VSX01JU01BVENIICovKTtcclxuICAgICAgICByZXR1cm4gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBDb252ZXJ0IHVzZXIgZGVsZXRlZCBlcnJvciBpbnRvIHVzZXIgbWlzbWF0Y2hcclxuICAgICAgICBpZiAoKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5jb2RlKSA9PT0gYGF1dGgvJHtcInVzZXItbm90LWZvdW5kXCIgLyogVVNFUl9ERUxFVEVEICovfWApIHtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJ1c2VyLW1pc21hdGNoXCIgLyogVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3NpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWwsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCBvcGVyYXRpb25UeXBlID0gXCJzaWduSW5cIiAvKiBTSUdOX0lOICovO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCk7XHJcbiAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBvcGVyYXRpb25UeXBlLCByZXNwb25zZSk7XHJcbiAgICBpZiAoIWJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB3aXRoIHRoZSBnaXZlbiBjcmVkZW50aWFscy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gY2FuIGJlIHVzZWQgdG8gZ2VuZXJhdGUgdGhlIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKF9jYXN0QXV0aChhdXRoKSwgY3JlZGVudGlhbCk7XHJcbn1cclxuLyoqXHJcbiAqIExpbmtzIHRoZSB1c2VyIGFjY291bnQgd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIFRoZSBhdXRoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBhd2FpdCBfYXNzZXJ0TGlua2VkU3RhdHVzKGZhbHNlLCB1c2VySW50ZXJuYWwsIGNyZWRlbnRpYWwucHJvdmlkZXJJZCk7XHJcbiAgICByZXR1cm4gX2xpbmskMSh1c2VySW50ZXJuYWwsIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBSZS1hdXRoZW50aWNhdGVzIGEgdXNlciB1c2luZyBhIGZyZXNoIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFVzZSBiZWZvcmUgb3BlcmF0aW9ucyBzdWNoIGFzIHtAbGluayB1cGRhdGVQYXNzd29yZH0gdGhhdCByZXF1aXJlIHRva2VucyBmcm9tIHJlY2VudCBzaWduLWluXHJcbiAqIGF0dGVtcHRzLiBUaGlzIG1ldGhvZCBjYW4gYmUgdXNlZCB0byByZWNvdmVyIGZyb20gYSBgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOYCBlcnJvci5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHVzZXIsIGNyZWRlbnRpYWwpIHtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGUoZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhDdXN0b21Ub2tlblwiIC8qIFNJR05fSU5fV0lUSF9DVVNUT01fVE9LRU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgY3VzdG9tIHRva2VuLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDdXN0b20gdG9rZW5zIGFyZSB1c2VkIHRvIGludGVncmF0ZSBGaXJlYmFzZSBBdXRoIHdpdGggZXhpc3RpbmcgYXV0aCBzeXN0ZW1zLCBhbmQgbXVzdFxyXG4gKiBiZSBnZW5lcmF0ZWQgYnkgYW4gYXV0aCBiYWNrZW5kIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvcmVmZXJlbmNlL2FkbWluL25vZGUvYWRtaW4uYXV0aC5BdXRoI2NyZWF0ZWN1c3RvbXRva2VuIHwgY3JlYXRlQ3VzdG9tVG9rZW59XHJcbiAqIG1ldGhvZCBpbiB0aGUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2F1dGgvYWRtaW4gfCBBZG1pbiBTREt9IC5cclxuICpcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdG9rZW4gaXMgaW52YWxpZCwgZXhwaXJlZCwgb3Igbm90IGFjY2VwdGVkIGJ5IHRoZSBGaXJlYmFzZSBBdXRoIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGN1c3RvbVRva2VuIC0gVGhlIGN1c3RvbSB0b2tlbiB0byBzaWduIGluIHdpdGguXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbihhdXRoLCBjdXN0b21Ub2tlbikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMShhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICB0b2tlbjogY3VzdG9tVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgY3JlZCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogU0lHTl9JTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcihjcmVkLnVzZXIpO1xyXG4gICAgcmV0dXJuIGNyZWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihmYWN0b3JJZCwgcmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcklkID0gZmFjdG9ySWQ7XHJcbiAgICAgICAgdGhpcy51aWQgPSByZXNwb25zZS5tZmFFbnJvbGxtZW50SWQ7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxtZW50VGltZSA9IG5ldyBEYXRlKHJlc3BvbnNlLmVucm9sbGVkQXQpLnRvVVRDU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IHJlc3BvbnNlLmRpc3BsYXlOYW1lO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCkge1xyXG4gICAgICAgIGlmICgncGhvbmVJbmZvJyBpbiBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaG9uZU11bHRpRmFjdG9ySW5mb0ltcGwuX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsIGV4dGVuZHMgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBQSE9ORSAqLywgcmVzcG9uc2UpO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZUluZm87XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShfYXV0aCwgZW5yb2xsbWVudCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsKGVucm9sbG1lbnQpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBfYXNzZXJ0KCgoX2EgPSBhY3Rpb25Db2RlU2V0dGluZ3MudXJsKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubGVuZ3RoKSA+IDAsIGF1dGgsIFwiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBJTlZBTElEX0NPTlRJTlVFX1VSSSAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW4gPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluLmxlbmd0aCA+IDAsIGF1dGgsIFwiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOICovKTtcclxuICAgIHJlcXVlc3QuY29udGludWVVcmwgPSBhY3Rpb25Db2RlU2V0dGluZ3MudXJsO1xyXG4gICAgcmVxdWVzdC5keW5hbWljTGlua0RvbWFpbiA9IGFjdGlvbkNvZGVTZXR0aW5ncy5keW5hbWljTGlua0RvbWFpbjtcclxuICAgIHJlcXVlc3QuY2FuSGFuZGxlQ29kZUluQXBwID0gYWN0aW9uQ29kZVNldHRpbmdzLmhhbmRsZUNvZGVJbkFwcDtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuaU9TKSB7XHJcbiAgICAgICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuaU9TLmJ1bmRsZUlkLmxlbmd0aCA+IDAsIGF1dGgsIFwibWlzc2luZy1pb3MtYnVuZGxlLWlkXCIgLyogTUlTU0lOR19JT1NfQlVORExFX0lEICovKTtcclxuICAgICAgICByZXF1ZXN0LmlPU0J1bmRsZUlkID0gYWN0aW9uQ29kZVNldHRpbmdzLmlPUy5idW5kbGVJZDtcclxuICAgIH1cclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZCkge1xyXG4gICAgICAgIF9hc3NlcnQoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQucGFja2FnZU5hbWUubGVuZ3RoID4gMCwgYXV0aCwgXCJtaXNzaW5nLWFuZHJvaWQtcGtnLW5hbWVcIiAvKiBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovKTtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRJbnN0YWxsQXBwID0gYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQuaW5zdGFsbEFwcDtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRNaW5pbXVtVmVyc2lvbkNvZGUgPVxyXG4gICAgICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5taW5pbXVtVmVyc2lvbjtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZW5kcyBhIHBhc3N3b3JkIHJlc2V0IGVtYWlsIHRvIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBjb21wbGV0ZSB0aGUgcGFzc3dvcmQgcmVzZXQsIGNhbGwge0BsaW5rIGNvbmZpcm1QYXNzd29yZFJlc2V0fSB3aXRoIHRoZSBjb2RlIHN1cHBsaWVkIGluXHJcbiAqIHRoZSBlbWFpbCBzZW50IHRvIHRoZSB1c2VyLCBhbG9uZyB3aXRoIHRoZSBuZXcgcGFzc3dvcmQgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdXNlci5cclxuICogYXdhaXQgY29uZmlybVBhc3N3b3JkUmVzZXQoJ3VzZXJAZXhhbXBsZS5jb20nLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGF1dGgsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJQQVNTV09SRF9SRVNFVFwiIC8qIFBBU1NXT1JEX1JFU0VUICovLFxyXG4gICAgICAgIGVtYWlsXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QoYXV0aE1vZHVsYXIsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhd2FpdCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEoYXV0aE1vZHVsYXIsIHJlcXVlc3QpO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wbGV0ZXMgdGhlIHBhc3N3b3JkIHJlc2V0IHByb2Nlc3MsIGdpdmVuIGEgY29uZmlybWF0aW9uIGNvZGUgYW5kIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgY29uZmlybWF0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVBhc3N3b3JkUmVzZXQoYXV0aCwgb29iQ29kZSwgbmV3UGFzc3dvcmQpIHtcclxuICAgIGF3YWl0IHJlc2V0UGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7XHJcbiAgICAgICAgb29iQ29kZSxcclxuICAgICAgICBuZXdQYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICAvLyBEbyBub3QgcmV0dXJuIHRoZSBlbWFpbC5cclxufVxyXG4vKipcclxuICogQXBwbGllcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhcHBseUFjdGlvbkNvZGUoYXV0aCwgb29iQ29kZSkge1xyXG4gICAgYXdhaXQgYXBwbHlBY3Rpb25Db2RlJDEoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7IG9vYkNvZGUgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBtZXRhZGF0YSBhYm91dCB0aGUgY29kZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tBY3Rpb25Db2RlKGF1dGgsIG9vYkNvZGUpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXNldFBhc3N3b3JkKGF1dGhNb2R1bGFyLCB7IG9vYkNvZGUgfSk7XHJcbiAgICAvLyBFbWFpbCBjb3VsZCBiZSBlbXB0eSBvbmx5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXMgRU1BSUxfU0lHTklOIG9yXHJcbiAgICAvLyBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTC5cclxuICAgIC8vIE5ldyBlbWFpbCBzaG91bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLlxyXG4gICAgLy8gTXVsdGktZmFjdG9yIGluZm8gY291bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OLlxyXG4gICAgY29uc3Qgb3BlcmF0aW9uID0gcmVzcG9uc2UucmVxdWVzdFR5cGU7XHJcbiAgICBfYXNzZXJ0KG9wZXJhdGlvbiwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICBzd2l0Y2ggKG9wZXJhdGlvbikge1xyXG4gICAgICAgIGNhc2UgXCJFTUFJTF9TSUdOSU5cIiAvKiBFTUFJTF9TSUdOSU4gKi86XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm5ld0VtYWlsLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBcIlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OXCIgLyogUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04gKi86XHJcbiAgICAgICAgICAgIF9hc3NlcnQocmVzcG9uc2UubWZhSW5mbywgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5lbWFpbCwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGUgbXVsdGktZmFjdG9yIGluZm8gZm9yIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uXHJcbiAgICBsZXQgbXVsdGlGYWN0b3JJbmZvID0gbnVsbDtcclxuICAgIGlmIChyZXNwb25zZS5tZmFJbmZvKSB7XHJcbiAgICAgICAgbXVsdGlGYWN0b3JJbmZvID0gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKF9jYXN0QXV0aChhdXRoTW9kdWxhciksIHJlc3BvbnNlLm1mYUluZm8pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGVtYWlsOiAocmVzcG9uc2UucmVxdWVzdFR5cGUgPT09IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqL1xyXG4gICAgICAgICAgICAgICAgPyByZXNwb25zZS5uZXdFbWFpbFxyXG4gICAgICAgICAgICAgICAgOiByZXNwb25zZS5lbWFpbCkgfHwgbnVsbCxcclxuICAgICAgICAgICAgcHJldmlvdXNFbWFpbDogKHJlc3BvbnNlLnJlcXVlc3RUeXBlID09PSBcIlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMXCIgLyogVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UuZW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UubmV3RW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIG11bHRpRmFjdG9ySW5mb1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3BlcmF0aW9uXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgYSBwYXNzd29yZCByZXNldCBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MgaWYgdmFsaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKGF1dGgsIGNvZGUpIHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2hlY2tBY3Rpb25Db2RlKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgY29kZSk7XHJcbiAgICAvLyBFbWFpbCBzaG91bGQgYWx3YXlzIGJlIHByZXNlbnQgc2luY2UgYSBjb2RlIHdhcyBzZW50IHRvIGl0XHJcbiAgICByZXR1cm4gZGF0YS5lbWFpbDtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyB1c2VyIGFjY291bnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE9uIHN1Y2Nlc3NmdWwgY3JlYXRpb24gb2YgdGhlIHVzZXIgYWNjb3VudCwgdGhpcyB1c2VyIHdpbGwgYWxzbyBiZSBzaWduZWQgaW4gdG8geW91ciBhcHBsaWNhdGlvbi5cclxuICpcclxuICogVXNlciBhY2NvdW50IGNyZWF0aW9uIGNhbiBmYWlsIGlmIHRoZSBhY2NvdW50IGFscmVhZHkgZXhpc3RzIG9yIHRoZSBwYXNzd29yZCBpcyBpbnZhbGlkLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgZW1haWwgYWRkcmVzcyBhY3RzIGFzIGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyIGFuZCBlbmFibGVzIGFuIGVtYWlsLWJhc2VkXHJcbiAqIHBhc3N3b3JkIHJlc2V0LiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgc2V0IHRoZSBpbml0aWFsIHVzZXIgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgLSBUaGUgdXNlcidzIGNob3NlbiBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduVXAoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgcGFzc3dvcmRcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIFNJR05fSU4gKi8sIHJlc3BvbnNlKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICByZXR1cm4gdXNlckNyZWRlbnRpYWw7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGFuIGVtYWlsIGFuZCBwYXNzd29yZC5cclxuICpcclxuICogQHJlbWFya3NcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQgZG8gbm90IG1hdGNoLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgdXNlcidzIHBhc3N3b3JkIGlzIE5PVCB0aGUgcGFzc3dvcmQgdXNlZCB0byBhY2Nlc3MgdGhlIHVzZXIncyBlbWFpbCBhY2NvdW50LiBUaGVcclxuICogZW1haWwgYWRkcmVzcyBzZXJ2ZXMgYXMgYSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIsIGFuZCB0aGUgcGFzc3dvcmQgaXMgdXNlZCB0byBhY2Nlc3NcclxuICogdGhlIHVzZXIncyBhY2NvdW50IGluIHlvdXIgRmlyZWJhc2UgcHJvamVjdC4gU2VlIGFsc286IHtAbGluayBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VycyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgLSBUaGUgdXNlcnMgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogU2VuZHMgYSBzaWduLWluIGVtYWlsIGxpbmsgdG8gdGhlIHVzZXIgd2l0aCB0aGUgc3BlY2lmaWVkIGVtYWlsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgc2lnbi1pbiBvcGVyYXRpb24gaGFzIHRvIGFsd2F5cyBiZSBjb21wbGV0ZWQgaW4gdGhlIGFwcCB1bmxpa2Ugb3RoZXIgb3V0IG9mIGJhbmQgZW1haWxcclxuICogYWN0aW9ucyAocGFzc3dvcmQgcmVzZXQgYW5kIGVtYWlsIHZlcmlmaWNhdGlvbnMpLiBUaGlzIGlzIGJlY2F1c2UsIGF0IHRoZSBlbmQgb2YgdGhlIGZsb3csXHJcbiAqIHRoZSB1c2VyIGlzIGV4cGVjdGVkIHRvIGJlIHNpZ25lZCBpbiBhbmQgdGhlaXIgQXV0aCBzdGF0ZSBwZXJzaXN0ZWQgd2l0aGluIHRoZSBhcHAuXHJcbiAqXHJcbiAqIFRvIGNvbXBsZXRlIHNpZ24gaW4gd2l0aCB0aGUgZW1haWwgbGluaywgY2FsbCB7QGxpbmsgc2lnbkluV2l0aEVtYWlsTGlua30gd2l0aCB0aGUgZW1haWxcclxuICogYWRkcmVzcyBhbmQgdGhlIGVtYWlsIGxpbmsgc3VwcGxpZWQgaW4gdGhlIGVtYWlsIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoSW50ZXJuYWwgLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCwgYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovLFxyXG4gICAgICAgIGVtYWlsXHJcbiAgICB9O1xyXG4gICAgX2Fzc2VydChhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGhNb2R1bGFyLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgYXdhaXQgc2VuZFNpZ25JbkxpbmtUb0VtYWlsJDEoYXV0aE1vZHVsYXIsIHJlcXVlc3QpO1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgaWYgYW4gaW5jb21pbmcgbGluayBpcyBhIHNpZ24taW4gd2l0aCBlbWFpbCBsaW5rIHN1aXRhYmxlIGZvciB7QGxpbmsgc2lnbkluV2l0aEVtYWlsTGlua30uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsTGluayAtIFRoZSBsaW5rIHNlbnQgdG8gdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1NpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWxMaW5rKSB7XHJcbiAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgIHJldHVybiAoYWN0aW9uQ29kZVVybCA9PT0gbnVsbCB8fCBhY3Rpb25Db2RlVXJsID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhY3Rpb25Db2RlVXJsLm9wZXJhdGlvbikgPT09IFwiRU1BSUxfU0lHTklOXCIgLyogRU1BSUxfU0lHTklOICovO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhbiBlbWFpbCBhbmQgc2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBubyBsaW5rIGlzIHBhc3NlZCwgdGhlIGxpbmsgaXMgaW5mZXJyZWQgZnJvbSB0aGUgY3VycmVudCBVUkwuXHJcbiAqXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZCBvciBPVFAgaW4gZW1haWwgbGluayBleHBpcmVzLlxyXG4gKlxyXG4gKiBOb3RlOiBDb25maXJtIHRoZSBsaW5rIGlzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIGJlZm9yZSBjYWxsaW5nIHRoaXMgbWV0aG9kIGZpcmViYXNlLmF1dGguQXV0aC5pc1NpZ25JbldpdGhFbWFpbExpbmsuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gZW1haWxMaW5rIC0gVGhlIGxpbmsgc2VudCB0byB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBjcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmsgfHwgX2dldEN1cnJlbnRVcmwoKSk7XHJcbiAgICAvLyBDaGVjayBpZiB0aGUgdGVuYW50IElEIGluIHRoZSBlbWFpbCBsaW5rIG1hdGNoZXMgdGhlIHRlbmFudCBJRCBvbiBBdXRoXHJcbiAgICAvLyBpbnN0YW5jZS5cclxuICAgIF9hc3NlcnQoY3JlZGVudGlhbC5fdGVuYW50SWQgPT09IChhdXRoTW9kdWxhci50ZW5hbnRJZCB8fCBudWxsKSwgYXV0aE1vZHVsYXIsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgIHJldHVybiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoTW9kdWxhciwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlQXV0aFVyaShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIFBPU1QgKi8sIFwiL3YxL2FjY291bnRzOmNyZWF0ZUF1dGhVcmlcIiAvKiBDUkVBVEVfQVVUSF9VUkkgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEdldHMgdGhlIGxpc3Qgb2YgcG9zc2libGUgc2lnbiBpbiBtZXRob2RzIGZvciB0aGUgZ2l2ZW4gZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBpcyB1c2VmdWwgdG8gZGlmZmVyZW50aWF0ZSBtZXRob2RzIG9mIHNpZ24taW4gZm9yIHRoZSBzYW1lIHByb3ZpZGVyLCBlZy5cclxuICoge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aGljaCBoYXMgMiBtZXRob2RzIG9mIHNpZ24taW4sXHJcbiAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX1BBU1NXT1JEIGFuZFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9MSU5LLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoYXV0aCwgZW1haWwpIHtcclxuICAgIC8vIGNyZWF0ZUF1dGhVcmkgcmV0dXJucyBhbiBlcnJvciBpZiBjb250aW51ZSBVUkkgaXMgbm90IGh0dHAgb3IgaHR0cHMuXHJcbiAgICAvLyBGb3IgZW52aXJvbm1lbnRzIGxpa2UgQ29yZG92YSwgQ2hyb21lIGV4dGVuc2lvbnMsIG5hdGl2ZSBmcmFtZXdvcmtzLCBmaWxlXHJcbiAgICAvLyBzeXN0ZW1zLCBldGMsIHVzZSBodHRwOi8vbG9jYWxob3N0IGFzIGNvbnRpbnVlIFVSTC5cclxuICAgIGNvbnN0IGNvbnRpbnVlVXJpID0gX2lzSHR0cE9ySHR0cHMoKSA/IF9nZXRDdXJyZW50VXJsKCkgOiAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkZW50aWZpZXI6IGVtYWlsLFxyXG4gICAgICAgIGNvbnRpbnVlVXJpXHJcbiAgICB9O1xyXG4gICAgY29uc3QgeyBzaWduaW5NZXRob2RzIH0gPSBhd2FpdCBjcmVhdGVBdXRoVXJpKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgcmVxdWVzdCk7XHJcbiAgICByZXR1cm4gc2lnbmluTWV0aG9kcyB8fCBbXTtcclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGUgdmVyaWZpY2F0aW9uIHByb2Nlc3MgaXMgY29tcGxldGVkIGJ5IGNhbGxpbmcge0BsaW5rIGFwcGx5QWN0aW9uQ29kZX0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kRW1haWxWZXJpZmljYXRpb24odXNlciwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXF1ZXN0VHlwZTogXCJWRVJJRllfRU1BSUxcIiAvKiBWRVJJRllfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlblxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHVzZXIncyBlbWFpbCB3aWxsIGJlIHVwZGF0ZWQgdG8gdGhlIG5ldyBvbmUgYWZ0ZXIgYmVpbmcgdmVyaWZpZWQuXHJcbiAqXHJcbiAqIElmIHlvdSBoYXZlIGEgY3VzdG9tIGVtYWlsIGFjdGlvbiBoYW5kbGVyLCB5b3UgY2FuIGNvbXBsZXRlIHRoZSB2ZXJpZmljYXRpb24gcHJvY2VzcyBieSBjYWxsaW5nXHJcbiAqIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodXNlciwgJ25ld2VtYWlsQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzIHRvIGJlIHZlcmlmaWVkIGJlZm9yZSB1cGRhdGUuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCAqLyxcclxuICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgIG5ld0VtYWlsXHJcbiAgICB9O1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIF9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGVtYWlsIH0gPSBhd2FpdCB2ZXJpZnlBbmRDaGFuZ2VFbWFpbCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCk7XHJcbiAgICBpZiAoZW1haWwgIT09IHVzZXIuZW1haWwpIHtcclxuICAgICAgICAvLyBJZiB0aGUgbG9jYWwgY29weSBvZiB0aGUgZW1haWwgb24gdXNlciBpcyBvdXRkYXRlZCwgcmVsb2FkIHRoZVxyXG4gICAgICAgIC8vIHVzZXIuXHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQcm9maWxlJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBTRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVXBkYXRlcyBhIHVzZXIncyBwcm9maWxlIGRhdGEuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm9maWxlIC0gVGhlIHByb2ZpbGUncyBgZGlzcGxheU5hbWVgIGFuZCBgcGhvdG9VUkxgIHRvIHVwZGF0ZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUHJvZmlsZSh1c2VyLCB7IGRpc3BsYXlOYW1lLCBwaG90b1VSTDogcGhvdG9VcmwgfSkge1xyXG4gICAgaWYgKGRpc3BsYXlOYW1lID09PSB1bmRlZmluZWQgJiYgcGhvdG9VcmwgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VySW50ZXJuYWwuZ2V0SWRUb2tlbigpO1xyXG4gICAgY29uc3QgcHJvZmlsZVJlcXVlc3QgPSB7XHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICBwaG90b1VybCxcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX2xvZ291dElmSW52YWxpZGF0ZWQodXNlckludGVybmFsLCB1cGRhdGVQcm9maWxlJDEodXNlckludGVybmFsLmF1dGgsIHByb2ZpbGVSZXF1ZXN0KSk7XHJcbiAgICB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWUgPSByZXNwb25zZS5kaXNwbGF5TmFtZSB8fCBudWxsO1xyXG4gICAgdXNlckludGVybmFsLnBob3RvVVJMID0gcmVzcG9uc2UucGhvdG9VcmwgfHwgbnVsbDtcclxuICAgIC8vIFVwZGF0ZSB0aGUgcGFzc3dvcmQgcHJvdmlkZXIgYXMgd2VsbFxyXG4gICAgY29uc3QgcGFzc3dvcmRQcm92aWRlciA9IHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEuZmluZCgoeyBwcm92aWRlcklkIH0pID0+IHByb3ZpZGVySWQgPT09IFwicGFzc3dvcmRcIiAvKiBQQVNTV09SRCAqLyk7XHJcbiAgICBpZiAocGFzc3dvcmRQcm92aWRlcikge1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIuZGlzcGxheU5hbWUgPSB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgcGFzc3dvcmRQcm92aWRlci5waG90b1VSTCA9IHVzZXJJbnRlcm5hbC5waG90b1VSTDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4gZW1haWwgd2lsbCBiZSBzZW50IHRvIHRoZSBvcmlnaW5hbCBlbWFpbCBhZGRyZXNzIChpZiBpdCB3YXMgc2V0KSB0aGF0IGFsbG93cyB0byByZXZva2UgdGhlXHJcbiAqIGVtYWlsIGFkZHJlc3MgY2hhbmdlLCBpbiBvcmRlciB0byBwcm90ZWN0IHRoZW0gZnJvbSBhY2NvdW50IGhpamFja2luZy5cclxuICpcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVFbWFpbCh1c2VyLCBuZXdFbWFpbCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG5ld0VtYWlsLCBudWxsKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcclxuICogaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3UGFzc3dvcmQgLSBUaGUgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVQYXNzd29yZCh1c2VyLCBuZXdQYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG51bGwsIG5ld1Bhc3N3b3JkKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQodXNlciwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgICByZXF1ZXN0LmVtYWlsID0gZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocGFzc3dvcmQpIHtcclxuICAgICAgICByZXF1ZXN0LnBhc3N3b3JkID0gcGFzc3dvcmQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkpO1xyXG4gICAgYXdhaXQgdXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIC8qIHJlbG9hZCAqLyB0cnVlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUGFyc2UgdGhlIGBBZGRpdGlvbmFsVXNlckluZm9gIGZyb20gdGhlIElEIHRva2VuIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gX2Zyb21JZFRva2VuUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgaWYgKCFpZFRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgcHJvdmlkZXJJZCB9ID0gaWRUb2tlblJlc3BvbnNlO1xyXG4gICAgY29uc3QgcHJvZmlsZSA9IGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mb1xyXG4gICAgICAgID8gSlNPTi5wYXJzZShpZFRva2VuUmVzcG9uc2UucmF3VXNlckluZm8pXHJcbiAgICAgICAgOiB7fTtcclxuICAgIGNvbnN0IGlzTmV3VXNlciA9IGlkVG9rZW5SZXNwb25zZS5pc05ld1VzZXIgfHxcclxuICAgICAgICBpZFRva2VuUmVzcG9uc2Uua2luZCA9PT0gXCJpZGVudGl0eXRvb2xraXQjU2lnbnVwTmV3VXNlclJlc3BvbnNlXCIgLyogU2lnbnVwTmV3VXNlciAqLztcclxuICAgIGlmICghcHJvdmlkZXJJZCAmJiAoaWRUb2tlblJlc3BvbnNlID09PSBudWxsIHx8IGlkVG9rZW5SZXNwb25zZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRUb2tlblJlc3BvbnNlLmlkVG9rZW4pKSB7XHJcbiAgICAgICAgY29uc3Qgc2lnbkluUHJvdmlkZXIgPSAoX2IgPSAoX2EgPSBfcGFyc2VUb2tlbihpZFRva2VuUmVzcG9uc2UuaWRUb2tlbikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5maXJlYmFzZSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iWydzaWduX2luX3Byb3ZpZGVyJ107XHJcbiAgICAgICAgaWYgKHNpZ25JblByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlcmVkUHJvdmlkZXJJZCA9IHNpZ25JblByb3ZpZGVyICE9PSBcImFub255bW91c1wiIC8qIEFOT05ZTU9VUyAqLyAmJlxyXG4gICAgICAgICAgICAgICAgc2lnbkluUHJvdmlkZXIgIT09IFwiY3VzdG9tXCIgLyogQ1VTVE9NICovXHJcbiAgICAgICAgICAgICAgICA/IHNpZ25JblByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgIC8vIFVzZXMgZ2VuZXJpYyBjbGFzcyBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIGxlZ2FjeSBTREsuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIGZpbHRlcmVkUHJvdmlkZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBjYXNlIFwiZmFjZWJvb2suY29tXCIgLyogRkFDRUJPT0sgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwiZ2l0aHViLmNvbVwiIC8qIEdJVEhVQiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFR3aXR0ZXJBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlLCBpZFRva2VuUmVzcG9uc2Uuc2NyZWVuTmFtZSB8fCBudWxsKTtcclxuICAgICAgICBjYXNlIFwiY3VzdG9tXCIgLyogQ1VTVE9NICovOlxyXG4gICAgICAgIGNhc2UgXCJhbm9ueW1vdXNcIiAvKiBBTk9OWU1PVVMgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIG51bGwpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlID0ge30pIHtcclxuICAgICAgICB0aGlzLmlzTmV3VXNlciA9IGlzTmV3VXNlcjtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUsIHVzZXJuYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcclxuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJmYWNlYm9vay5jb21cIiAvKiBGQUNFQk9PSyAqLywgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJnaXRodWIuY29tXCIgLyogR0lUSFVCICovLCBwcm9maWxlLCB0eXBlb2YgKHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbikgPT09ICdzdHJpbmcnID8gcHJvZmlsZSA9PT0gbnVsbCB8fCBwcm9maWxlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwcm9maWxlLmxvZ2luIDogbnVsbCk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwiZ29vZ2xlLmNvbVwiIC8qIEdPT0dMRSAqLywgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUsIHNjcmVlbk5hbWUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwidHdpdHRlci5jb21cIiAvKiBUV0lUVEVSICovLCBwcm9maWxlLCBzY3JlZW5OYW1lKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRXh0cmFjdHMgcHJvdmlkZXIgc3BlY2lmaWMge0BsaW5rIEFkZGl0aW9uYWxVc2VySW5mb30gZm9yIHRoZSBnaXZlbiBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBZGRpdGlvbmFsVXNlckluZm8odXNlckNyZWRlbnRpYWwpIHtcclxuICAgIGNvbnN0IHsgdXNlciwgX3Rva2VuUmVzcG9uc2UgfSA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgaWYgKHVzZXIuaXNBbm9ueW1vdXMgJiYgIV90b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgLy8gSGFuZGxlIHRoZSBzcGVjaWFsIGNhc2Ugd2hlcmUgc2lnbkluQW5vbnltb3VzbHkoKSBnZXRzIGNhbGxlZCB0d2ljZS5cclxuICAgICAgICAvLyBObyBuZXR3b3JrIGNhbGwgaXMgbWFkZSBzbyB0aGVyZSdzIG5vdGhpbmcgdG8gYWN0dWFsbHkgZmlsbCB0aGlzIGluXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogbnVsbCxcclxuICAgICAgICAgICAgaXNOZXdVc2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgcHJvZmlsZTogbnVsbFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2Zyb21JZFRva2VuUmVzcG9uc2UoX3Rva2VuUmVzcG9uc2UpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIE5vbi1vcHRpb25hbCBhdXRoIG1ldGhvZHMuXHJcbi8qKlxyXG4gKiBDaGFuZ2VzIHRoZSB0eXBlIG9mIHBlcnNpc3RlbmNlIG9uIHRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgZm9yIHRoZSBjdXJyZW50bHkgc2F2ZWRcclxuICogYEF1dGhgIHNlc3Npb24gYW5kIGFwcGxpZXMgdGhpcyB0eXBlIG9mIHBlcnNpc3RlbmNlIGZvciBmdXR1cmUgc2lnbi1pbiByZXF1ZXN0cywgaW5jbHVkaW5nXHJcbiAqIHNpZ24taW4gd2l0aCByZWRpcmVjdCByZXF1ZXN0cy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhpcyBtYWtlcyBpdCBlYXN5IGZvciBhIHVzZXIgc2lnbmluZyBpbiB0byBzcGVjaWZ5IHdoZXRoZXIgdGhlaXIgc2Vzc2lvbiBzaG91bGQgYmVcclxuICogcmVtZW1iZXJlZCBvciBub3QuIEl0IGFsc28gbWFrZXMgaXQgZWFzaWVyIHRvIG5ldmVyIHBlcnNpc3QgdGhlIGBBdXRoYCBzdGF0ZSBmb3IgYXBwbGljYXRpb25zXHJcbiAqIHRoYXQgYXJlIHNoYXJlZCBieSBvdGhlciB1c2VycyBvciBoYXZlIHNlbnNpdGl2ZSBkYXRhLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIHNldFBlcnNpc3RlbmNlKGF1dGgsIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcGVyc2lzdGVuY2UgLSBUaGUge0BsaW5rIFBlcnNpc3RlbmNlfSB0byB1c2UuXHJcbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgb25jZSB0aGUgcGVyc2lzdGVuY2UgY2hhbmdlIGhhcyBjb21wbGV0ZWRcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2V0UGVyc2lzdGVuY2UoYXV0aCwgcGVyc2lzdGVuY2UpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkuc2V0UGVyc2lzdGVuY2UocGVyc2lzdGVuY2UpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSBzaWduZWQtaW4gdXNlcidzIElEIHRva2VuLCB3aGljaCBpbmNsdWRlcyBzaWduLWluLFxyXG4gKiBzaWduLW91dCwgYW5kIHRva2VuIHJlZnJlc2ggZXZlbnRzLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBlcnJvci5cclxuICogQHBhcmFtIGNvbXBsZXRlZCAtIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIG9ic2VydmVyIGlzIHJlbW92ZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uSWRUb2tlbkNoYW5nZWQoYXV0aCwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkub25JZFRva2VuQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbn1cclxuLyoqXHJcbiAqIEFkZHMgYW4gb2JzZXJ2ZXIgZm9yIGNoYW5nZXMgdG8gdGhlIHVzZXIncyBzaWduLWluIHN0YXRlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBrZWVwIHRoZSBvbGQgYmVoYXZpb3IsIHNlZSB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cclxuICogQHBhcmFtIGVycm9yIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGVycm9yLlxyXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gb2JzZXJ2ZXIgaXMgcmVtb3ZlZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLm9uQXV0aFN0YXRlQ2hhbmdlZChuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgdGhlIGN1cnJlbnQgbGFuZ3VhZ2UgdG8gdGhlIGRlZmF1bHQgZGV2aWNlL2Jyb3dzZXIgcHJlZmVyZW5jZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1c2VEZXZpY2VMYW5ndWFnZShhdXRoKSB7XHJcbiAgICBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkudXNlRGV2aWNlTGFuZ3VhZ2UoKTtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2V0cyB0aGUgcHJvdmlkZWQgdXNlciBhcyB7QGxpbmsgQXV0aC5jdXJyZW50VXNlcn0gb24gdGhlXHJcbiAqIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQSBuZXcgaW5zdGFuY2UgY29weSBvZiB0aGUgdXNlciBwcm92aWRlZCB3aWxsIGJlIG1hZGUgYW5kIHNldCBhcyBjdXJyZW50VXNlci5cclxuICpcclxuICogVGhpcyB3aWxsIHRyaWdnZXIge0BsaW5rIG9uQXV0aFN0YXRlQ2hhbmdlZH0gYW5kIHtAbGluayBvbklkVG9rZW5DaGFuZ2VkfSBsaXN0ZW5lcnNcclxuICogbGlrZSBvdGhlciBzaWduIGluIG1ldGhvZHMuXHJcbiAqXHJcbiAqIFRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdXNlciB0byBiZSB1cGRhdGVkIGJlbG9uZ3MgdG8gYSBkaWZmZXJlbnQgRmlyZWJhc2VcclxuICogcHJvamVjdC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSBuZXcge0BsaW5rIFVzZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVDdXJyZW50VXNlcihhdXRoLCB1c2VyKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG59XHJcbi8qKlxyXG4gKiBTaWducyBvdXQgdGhlIGN1cnJlbnQgdXNlci5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzaWduT3V0KGF1dGgpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCkuc2lnbk91dCgpO1xyXG59XHJcbi8qKlxyXG4gKiBEZWxldGVzIGFuZCBzaWducyBvdXQgdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcG9ydGFudDogdGhpcyBpcyBhIHNlY3VyaXR5LXNlbnNpdGl2ZSBvcGVyYXRpb24gdGhhdCByZXF1aXJlcyB0aGUgdXNlciB0byBoYXZlIHJlY2VudGx5XHJcbiAqIHNpZ25lZCBpbi4gSWYgdGhpcyByZXF1aXJlbWVudCBpc24ndCBtZXQsIGFzayB0aGUgdXNlciB0byBhdXRoZW50aWNhdGUgYWdhaW4gYW5kIHRoZW4gY2FsbFxyXG4gKiB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVVzZXIodXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKS5kZWxldGUoKTtcclxufVxuXG5jbGFzcyBNdWx0aUZhY3RvclNlc3Npb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHR5cGUsIGNyZWRlbnRpYWwpIHtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21JZHRva2VuKGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi8sIGlkVG9rZW4pO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwobWZhUGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJzaWduaW5cIiAvKiBTSUdOX0lOICovLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gdGhpcy50eXBlID09PSBcImVucm9sbFwiIC8qIEVOUk9MTCAqL1xyXG4gICAgICAgICAgICA/ICdpZFRva2VuJ1xyXG4gICAgICAgICAgICA6ICdwZW5kaW5nQ3JlZGVudGlhbCc7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JTZXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBba2V5XTogdGhpcy5jcmVkZW50aWFsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKG9iaikge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5tdWx0aUZhY3RvclNlc3Npb24pIHtcclxuICAgICAgICAgICAgaWYgKChfYSA9IG9iai5tdWx0aUZhY3RvclNlc3Npb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChvYmoubXVsdGlGYWN0b3JTZXNzaW9uLnBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoX2IgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKG9iai5tdWx0aUZhY3RvclNlc3Npb24uaWRUb2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwge1xyXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbiwgaGludHMsIHNpZ25JblJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcclxuICAgICAgICB0aGlzLmhpbnRzID0gaGludHM7XHJcbiAgICAgICAgdGhpcy5zaWduSW5SZXNvbHZlciA9IHNpZ25JblJlc29sdmVyO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRXJyb3IoYXV0aEV4dGVybiwgZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xyXG4gICAgICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2U7XHJcbiAgICAgICAgY29uc3QgaGludHMgPSAoc2VydmVyUmVzcG9uc2UubWZhSW5mbyB8fCBbXSkubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICBfYXNzZXJ0KHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwoc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwoc2Vzc2lvbiwgaGludHMsIGFzeW5jIChhc3NlcnRpb24pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWZhUmVzcG9uc2UgPSBhd2FpdCBhc3NlcnRpb24uX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbik7XHJcbiAgICAgICAgICAgIC8vIENsZWFyIG91dCB0aGUgdW5uZWVkZWQgZmllbGRzIGZyb20gdGhlIG9sZCBsb2dpbiByZXNwb25zZVxyXG4gICAgICAgICAgICBkZWxldGUgc2VydmVyUmVzcG9uc2UubWZhSW5mbztcclxuICAgICAgICAgICAgZGVsZXRlIHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAvLyBVc2UgaW4gdGhlIG5ldyB0b2tlbiAmIHJlZnJlc2ggdG9rZW4gaW4gdGhlIG9sZCByZXNwb25zZVxyXG4gICAgICAgICAgICBjb25zdCBpZFRva2VuUmVzcG9uc2UgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNlcnZlclJlc3BvbnNlKSwgeyBpZFRva2VuOiBtZmFSZXNwb25zZS5pZFRva2VuLCByZWZyZXNoVG9rZW46IG1mYVJlc3BvbnNlLnJlZnJlc2hUb2tlbiB9KTtcclxuICAgICAgICAgICAgLy8gVE9ETzogd2Ugc2hvdWxkIGNvbGxhcHNlIHRoaXMgc3dpdGNoIHN0YXRlbWVudCBpbnRvIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uIGFuZCBoYXZlIGl0IHN1cHBvcnQgdGhlIFNJR05fSU4gY2FzZVxyXG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yLm9wZXJhdGlvblR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzaWduSW5cIiAvKiBTSUdOX0lOICovOlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgVXNlckNyZWRlbnRpYWxJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGVycm9yLm9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXV0aC5fdXBkYXRlQ3VycmVudFVzZXIodXNlckNyZWRlbnRpYWwudXNlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJlYXV0aGVudGljYXRlXCIgLyogUkVBVVRIRU5USUNBVEUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2VydChlcnJvci51c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBVc2VyQ3JlZGVudGlhbEltcGwuX2Zvck9wZXJhdGlvbihlcnJvci51c2VyLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZXNvbHZlU2lnbkluKGFzc2VydGlvbkV4dGVybikge1xyXG4gICAgICAgIGNvbnN0IGFzc2VydGlvbiA9IGFzc2VydGlvbkV4dGVybjtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5SZXNvbHZlcihhc3NlcnRpb24pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlcyBhIHtAbGluayBNdWx0aUZhY3RvclJlc29sdmVyfSBzdWl0YWJsZSBmb3IgY29tcGxldGlvbiBvZiBhXHJcbiAqIG11bHRpLWZhY3RvciBmbG93LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JFcnJvcn0gcmFpc2VkIGR1cmluZyBhIHNpZ24taW4sIG9yXHJcbiAqIHJlYXV0aGVudGljYXRpb24gb3BlcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNdWx0aUZhY3RvclJlc29sdmVyKGF1dGgsIGVycm9yKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCBhdXRoTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKTtcclxuICAgIGNvbnN0IGVycm9ySW50ZXJuYWwgPSBlcnJvcjtcclxuICAgIF9hc3NlcnQoZXJyb3IuY3VzdG9tRGF0YS5vcGVyYXRpb25UeXBlLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQoKF9hID0gZXJyb3JJbnRlcm5hbC5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIHJldHVybiBNdWx0aUZhY3RvclJlc29sdmVySW1wbC5fZnJvbUVycm9yKGF1dGhNb2R1bGFyLCBlcnJvckludGVybmFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBzdGFydEVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhRW5yb2xsbWVudDpzdGFydFwiIC8qIFNUQVJUX1BIT05FX01GQV9FTlJPTExNRU5UICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmZ1bmN0aW9uIGZpbmFsaXplRW5yb2xsUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OmZpbmFsaXplXCIgLyogRklOQUxJWkVfUEhPTkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gd2l0aGRyYXdNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OndpdGhkcmF3XCIgLyogV0lUSERSQVdfTUZBICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbmNsYXNzIE11bHRpRmFjdG9yVXNlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IodXNlcikge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxlZEZhY3RvcnMgPSBbXTtcclxuICAgICAgICB1c2VyLl9vblJlbG9hZCh1c2VySW5mbyA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VySW5mby5tZmFJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IHVzZXJJbmZvLm1mYUluZm8ubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKHVzZXIuYXV0aCwgZW5yb2xsbWVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21Vc2VyKHVzZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yVXNlckltcGwodXNlcik7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRTZXNzaW9uKCkge1xyXG4gICAgICAgIHJldHVybiBNdWx0aUZhY3RvclNlc3Npb25JbXBsLl9mcm9tSWR0b2tlbihhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGVucm9sbChhc3NlcnRpb25FeHRlcm4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgYXNzZXJ0aW9uID0gYXNzZXJ0aW9uRXh0ZXJuO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSAoYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCkpO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsaXplTWZhUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIGFzc2VydGlvbi5fcHJvY2Vzcyh0aGlzLnVzZXIuYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpKTtcclxuICAgICAgICAvLyBOZXcgdG9rZW5zIHdpbGwgYmUgaXNzdWVkIGFmdGVyIGVucm9sbG1lbnQgb2YgdGhlIG5ldyBzZWNvbmQgZmFjdG9ycy5cclxuICAgICAgICAvLyBUaGV5IG5lZWQgdG8gYmUgdXBkYXRlZCBvbiB0aGUgdXNlci5cclxuICAgICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGZpbmFsaXplTWZhUmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIFRoZSB1c2VyIG5lZWRzIHRvIGJlIHJlbG9hZGVkIHRvIGdldCB0aGUgbmV3IG11bHRpLWZhY3RvciBpbmZvcm1hdGlvblxyXG4gICAgICAgIC8vIGZyb20gc2VydmVyLiBVU0VSX1JFTE9BREVEIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIGFuZCBgZW5yb2xsZWRGYWN0b3JzYFxyXG4gICAgICAgIC8vIHdpbGwgYmUgdXBkYXRlZC5cclxuICAgICAgICByZXR1cm4gdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdW5lbnJvbGwoaW5mb09yVWlkKSB7XHJcbiAgICAgICAgY29uc3QgbWZhRW5yb2xsbWVudElkID0gdHlwZW9mIGluZm9PclVpZCA9PT0gJ3N0cmluZycgPyBpbmZvT3JVaWQgOiBpbmZvT3JVaWQudWlkO1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMudXNlciwgd2l0aGRyYXdNZmEodGhpcy51c2VyLmF1dGgsIHtcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgbWZhRW5yb2xsbWVudElkXHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgc2Vjb25kIGZhY3RvciBmcm9tIHRoZSB1c2VyJ3MgbGlzdC5cclxuICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IHRoaXMuZW5yb2xsZWRGYWN0b3JzLmZpbHRlcigoeyB1aWQgfSkgPT4gdWlkICE9PSBtZmFFbnJvbGxtZW50SWQpO1xyXG4gICAgICAgIC8vIERlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBiYWNrZW5kIGRlY2lkZWQgdG8gcmV2b2tlIHRoZSB1c2VyJ3Mgc2Vzc2lvbixcclxuICAgICAgICAvLyB0aGUgdG9rZW5SZXNwb25zZSBtYXkgYmUgZW1wdHkuIElmIHRoZSB0b2tlbnMgd2VyZSBub3QgdXBkYXRlZCAoYW5kIHRoZXlcclxuICAgICAgICAvLyBhcmUgbm93IGludmFsaWQpLCByZWxvYWRpbmcgdGhlIHVzZXIgd2lsbCBkaXNjb3ZlciB0aGlzIGFuZCBpbnZhbGlkYXRlXHJcbiAgICAgICAgLy8gdGhlIHVzZXIncyBzdGF0ZSBhY2NvcmRpbmdseS5cclxuICAgICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5jb2RlICE9PSBgYXV0aC8ke1widXNlci10b2tlbi1leHBpcmVkXCIgLyogVE9LRU5fRVhQSVJFRCAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IG11bHRpRmFjdG9yVXNlckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JVc2VyfSBjb3JyZXNwb25kaW5nIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGlzIHVzZWQgdG8gYWNjZXNzIGFsbCBtdWx0aS1mYWN0b3IgcHJvcGVydGllcyBhbmQgb3BlcmF0aW9ucyByZWxhdGVkIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBtdWx0aUZhY3Rvcih1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VyTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGlmICghbXVsdGlGYWN0b3JVc2VyQ2FjaGUuaGFzKHVzZXJNb2R1bGFyKSkge1xyXG4gICAgICAgIG11bHRpRmFjdG9yVXNlckNhY2hlLnNldCh1c2VyTW9kdWxhciwgTXVsdGlGYWN0b3JVc2VySW1wbC5fZnJvbVVzZXIodXNlck1vZHVsYXIpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtdWx0aUZhY3RvclVzZXJDYWNoZS5nZXQodXNlck1vZHVsYXIpO1xyXG59XG5cbmNvbnN0IFNUT1JBR0VfQVZBSUxBQkxFX0tFWSA9ICdfX3Nhayc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGJyb3dzZXIgcGVyc2lzdGVuY2UgdHlwZXM6IGxvY2FsIGFuZCBzZXNzaW9uLlxyXG4vLyBCb3RoIGhhdmUgdGhlIHNhbWUgaW1wbGVtZW50YXRpb24gYnV0IHVzZSBhIGRpZmZlcmVudCB1bmRlcmx5aW5nIHN0b3JhZ2VcclxuLy8gb2JqZWN0LlxyXG5jbGFzcyBCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdG9yYWdlUmV0cmlldmVyLCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlUmV0cmlldmVyID0gc3RvcmFnZVJldHJpZXZlcjtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG4gICAgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCBqc29uID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpzb24gPyBKU09OLnBhcnNlKGpzb24pIDogbnVsbCk7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHN0b3JhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVJldHJpZXZlcigpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiBfaXNTYWZhcmkodWEpIHx8IF9pc0lPUyh1YSk7XHJcbn1cclxuLy8gVGhlIHBvbGxpbmcgcGVyaW9kIGluIGNhc2UgZXZlbnRzIGFyZSBub3Qgc3VwcG9ydGVkXHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TJDEgPSAxMDAwO1xyXG4vLyBUaGUgSUUgMTAgbG9jYWxTdG9yYWdlIGNyb3NzIHRhYiBzeW5jaHJvbml6YXRpb24gZGVsYXkgaW4gbWlsbGlzZWNvbmRzXHJcbmNvbnN0IElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZID0gMTA7XHJcbmNsYXNzIEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKCkgPT4gd2luZG93LmxvY2FsU3RvcmFnZSwgXCJMT0NBTFwiIC8qIExPQ0FMICovKTtcclxuICAgICAgICB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyID0gKGV2ZW50LCBwb2xsKSA9PiB0aGlzLm9uU3RvcmFnZUV2ZW50KGV2ZW50LCBwb2xsKTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgLy8gU2FmYXJpIG9yIGlPUyBicm93c2VyIGFuZCBlbWJlZGRlZCBpbiBhbiBpZnJhbWUuXHJcbiAgICAgICAgdGhpcy5zYWZhcmlMb2NhbFN0b3JhZ2VOb3RTeW5jZWQgPSBfaWZyYW1lQ2Fubm90U3luY1dlYlN0b3JhZ2UoKSAmJiBfaXNJZnJhbWUoKTtcclxuICAgICAgICAvLyBXaGV0aGVyIHRvIHVzZSBwb2xsaW5nIGluc3RlYWQgb2YgZGVwZW5kaW5nIG9uIHdpbmRvdyBldmVudHNcclxuICAgICAgICB0aGlzLmZhbGxiYWNrVG9Qb2xsaW5nID0gX2lzTW9iaWxlQnJvd3NlcigpO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgIH1cclxuICAgIGZvckFsbENoYW5nZWRLZXlzKGNiKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgYWxsIGtleXMgd2l0aCBsaXN0ZW5lcnMgb24gdGhlbS5cclxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgLy8gR2V0IHZhbHVlIGZyb20gbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIC8vIElmIGxvY2FsIG1hcCB2YWx1ZSBkb2VzIG5vdCBtYXRjaCwgdHJpZ2dlciBsaXN0ZW5lciB3aXRoIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIERpZmZlcmVudGlhdGUgdGhpcyBzaW11bGF0ZWQgZXZlbnQgZnJvbSB0aGUgcmVhbCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjYihrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBvblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCA9IGZhbHNlKSB7XHJcbiAgICAgICAgLy8gS2V5IHdvdWxkIGJlIG51bGwgaW4gc29tZSBzaXR1YXRpb25zLCBsaWtlIHdoZW4gbG9jYWxTdG9yYWdlIGlzIGNsZWFyZWRcclxuICAgICAgICBpZiAoIWV2ZW50LmtleSkge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIF9vbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBrZXkgPSBldmVudC5rZXk7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhlIG1lY2hhbmlzbSBob3cgdGhpcyBldmVudCB3YXMgZGV0ZWN0ZWQuXHJcbiAgICAgICAgLy8gVGhlIGZpcnN0IGV2ZW50IHdpbGwgZGljdGF0ZSB0aGUgbWVjaGFuaXNtIHRvIGJlIHVzZWQuXHJcbiAgICAgICAgaWYgKHBvbGwpIHtcclxuICAgICAgICAgICAgLy8gRW52aXJvbm1lbnQgZGV0ZWN0cyBzdG9yYWdlIGNoYW5nZXMgdmlhIHBvbGxpbmcuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyIHRvIHByZXZlbnQgcG9zc2libGUgZXZlbnQgZHVwbGljYXRpb24uXHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBzdG9yYWdlIGV2ZW50IGxpc3RlbmVyLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgcG9sbGluZyBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNhZmFyaSBlbWJlZGRlZCBpZnJhbWUuIFN0b3JhZ2UgZXZlbnQgd2lsbCB0cmlnZ2VyIHdpdGggdGhlIGRlbHRhXHJcbiAgICAgICAgLy8gY2hhbmdlcyBidXQgbm8gY2hhbmdlcyB3aWxsIGJlIGFwcGxpZWQgdG8gdGhlIGlmcmFtZSBsb2NhbFN0b3JhZ2UuXHJcbiAgICAgICAgaWYgKHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBjdXJyZW50IGlmcmFtZSBwYWdlIHZhbHVlLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIC8vIFZhbHVlIG5vdCBzeW5jaHJvbml6ZWQsIHN5bmNocm9uaXplIG1hbnVhbGx5LlxyXG4gICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXZlbnQubmV3VmFsdWUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBWYWx1ZSBjaGFuZ2VkIGZyb20gY3VycmVudCB2YWx1ZS5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIGV2ZW50Lm5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnQgdmFsdWUgZGVsZXRlZC5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMubG9jYWxDYWNoZVtrZXldID09PSBldmVudC5uZXdWYWx1ZSAmJiAhcG9sbCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBkZXRlY3RlZCBhbmQgcHJvY2Vzc2VkLCBkbyBub3QgdHJpZ2dlciBsaXN0ZW5lcnMgYWdhaW4uXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdHJpZ2dlckxpc3RlbmVycyA9ICgpID0+IHtcclxuICAgICAgICAgICAgLy8gS2VlcCBsb2NhbCBtYXAgdXAgdG8gZGF0ZSBpbiBjYXNlIHN0b3JhZ2UgZXZlbnQgaXMgdHJpZ2dlcmVkIGJlZm9yZVxyXG4gICAgICAgICAgICAvLyBwb2xsLlxyXG4gICAgICAgICAgICBjb25zdCBzdG9yZWRWYWx1ZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKGtleSk7XHJcbiAgICAgICAgICAgIGlmICghcG9sbCAmJiB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gc3RvcmVkVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFJlYWwgc3RvcmFnZSBldmVudCB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGRldGVjdGVkLCBkbyBub3RoaW5nLlxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyB0byB0cmlnZ2VyIGluIHNvbWUgSUUgYnJvd3NlcnMgZm9yIHNvbWUgcmVhc29uLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGtleSwgc3RvcmVkVmFsdWUpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIGlmIChfaXNJRTEwKCkgJiZcclxuICAgICAgICAgICAgc3RvcmVkVmFsdWUgIT09IGV2ZW50Lm5ld1ZhbHVlICYmXHJcbiAgICAgICAgICAgIGV2ZW50Lm5ld1ZhbHVlICE9PSBldmVudC5vbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAvLyBJRSAxMCBoYXMgdGhpcyB3ZWlyZCBidWcgd2hlcmUgYSBzdG9yYWdlIGV2ZW50IHdvdWxkIHRyaWdnZXIgd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gY29ycmVjdCBrZXksIG9sZFZhbHVlIGFuZCBuZXdWYWx1ZSBidXQgbG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSBkb2VzXHJcbiAgICAgICAgICAgIC8vIG5vdCB5aWVsZCB0aGUgdXBkYXRlZCB2YWx1ZSB1bnRpbCBhIGZldyBtaWxsaXNlY29uZHMuIFRoaXMgZW5zdXJlc1xyXG4gICAgICAgICAgICAvLyB0aGlzIHJlY292ZXJzIGZyb20gdGhhdCBzaXR1YXRpb24uXHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQodHJpZ2dlckxpc3RlbmVycywgSUUxMF9MT0NBTF9TVE9SQUdFX1NZTkNfREVMQVkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdHJpZ2dlckxpc3RlbmVycygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5vdGlmeUxpc3RlbmVycyhrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgIGlmIChsaXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiBBcnJheS5mcm9tKGxpc3RlbmVycykpIHtcclxuICAgICAgICAgICAgICAgIGxpc3RlbmVyKHZhbHVlID8gSlNPTi5wYXJzZSh2YWx1ZSkgOiB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydFBvbGxpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZvckFsbENoYW5nZWRLZXlzKChrZXksIG9sZFZhbHVlLCBuZXdWYWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblN0b3JhZ2VFdmVudChuZXcgU3RvcmFnZUV2ZW50KCdzdG9yYWdlJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleSxcclxuICAgICAgICAgICAgICAgICAgICBvbGRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZVxyXG4gICAgICAgICAgICAgICAgfSksIFxyXG4gICAgICAgICAgICAgICAgLyogcG9sbCAqLyB0cnVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgX1BPTExJTkdfSU5URVJWQUxfTVMkMSk7XHJcbiAgICB9XHJcbiAgICBzdG9wUG9sbGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb2xsVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxUaW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhdHRhY2hMaXN0ZW5lcigpIHtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc3RvcmFnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgfVxyXG4gICAgZGV0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgLy8gV2hldGhlciBicm93c2VyIGNhbiBkZXRlY3Qgc3RvcmFnZSBldmVudCB3aGVuIGl0IGhhZCBhbHJlYWR5IGJlZW4gcHVzaGVkIHRvIHRoZSBiYWNrZ3JvdW5kLlxyXG4gICAgICAgICAgICAvLyBUaGlzIG1heSBoYXBwZW4gaW4gc29tZSBtb2JpbGUgYnJvd3NlcnMuIEEgbG9jYWxTdG9yYWdlIGNoYW5nZSBpbiB0aGUgZm9yZWdyb3VuZCB3aW5kb3dcclxuICAgICAgICAgICAgLy8gd2lsbCBub3QgYmUgZGV0ZWN0ZWQgaW4gdGhlIGJhY2tncm91bmQgd2luZG93IHZpYSB0aGUgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgLy8gVGhpcyB3YXMgZGV0ZWN0ZWQgaW4gaU9TIDcueCBtb2JpbGUgYnJvd3NlcnNcclxuICAgICAgICAgICAgaWYgKHRoaXMuZmFsbGJhY2tUb1BvbGxpbmcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgICAgIC8vIFBvcHVsYXRlIHRoZSBjYWNoZSB0byBhdm9pZCBzcHVyaW91c2x5IHRyaWdnZXJpbmcgb24gZmlyc3QgcG9sbC5cclxuICAgICAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmFkZChsaXN0ZW5lcik7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uZGVsZXRlKGxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHRoaXMubGlzdGVuZXJzKS5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5kZXRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gVXBkYXRlIGxvY2FsIGNhY2hlIG9uIGJhc2Ugb3BlcmF0aW9uczpcclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9zZXQoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0KGtleSkge1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgc3VwZXIuX2dldChrZXkpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgYXdhaXQgc3VwZXIuX3JlbW92ZShrZXkpO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgIH1cclxufVxyXG5Ccm93c2VyTG9jYWxQZXJzaXN0ZW5jZS50eXBlID0gJ0xPQ0FMJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSBgTE9DQUxgIHVzaW5nIGBsb2NhbFN0b3JhZ2VgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSA9IEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKCkgPT4gd2luZG93LnNlc3Npb25TdG9yYWdlLCBcIlNFU1NJT05cIiAvKiBTRVNTSU9OICovKTtcclxuICAgIH1cclxuICAgIF9hZGRMaXN0ZW5lcihfa2V5LCBfbGlzdGVuZXIpIHtcclxuICAgICAgICAvLyBMaXN0ZW5lcnMgYXJlIG5vdCBzdXBwb3J0ZWQgZm9yIHNlc3Npb24gc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2Vzc2lvbiBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3NcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZS50eXBlID0gJ1NFU1NJT04nO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiBgU0VTU0lPTmAgdXNpbmcgYHNlc3Npb25TdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSA9IEJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTaGltIGZvciBQcm9taXNlLmFsbFNldHRsZWQsIG5vdGUgdGhlIHNsaWdodGx5IGRpZmZlcmVudCBmb3JtYXQgb2YgYGZ1bGZpbGxlZGAgdnMgYHN0YXR1c2AuXHJcbiAqXHJcbiAqIEBwYXJhbSBwcm9taXNlcyAtIEFycmF5IG9mIHByb21pc2VzIHRvIHdhaXQgb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBfYWxsU2V0dGxlZChwcm9taXNlcykge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzLm1hcChhc3luYyAocHJvbWlzZSkgPT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gYXdhaXQgcHJvbWlzZTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHZhbHVlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChyZWFzb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZ1bGZpbGxlZDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWFzb25cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSBjbGFzcyBmb3IgcmVjZWl2aW5nIG1lc3NhZ2VzLlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgUmVjZWl2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoZXZlbnRUYXJnZXQpIHtcclxuICAgICAgICB0aGlzLmV2ZW50VGFyZ2V0ID0gZXZlbnRUYXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVyc01hcCA9IHt9O1xyXG4gICAgICAgIHRoaXMuYm91bmRFdmVudEhhbmRsZXIgPSB0aGlzLmhhbmRsZUV2ZW50LmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIE9idGFpbiBhbiBpbnN0YW5jZSBvZiBhIFJlY2VpdmVyIGZvciBhIGdpdmVuIGV2ZW50IHRhcmdldCwgaWYgbm9uZSBleGlzdHMgaXQgd2lsbCBiZSBjcmVhdGVkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBldmVudFRhcmdldCAtIEFuIGV2ZW50IHRhcmdldCAoc3VjaCBhcyB3aW5kb3cgb3Igc2VsZikgdGhyb3VnaCB3aGljaCB0aGUgdW5kZXJseWluZ1xyXG4gICAgICogbWVzc2FnZXMgd2lsbCBiZSByZWNlaXZlZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIF9nZXRJbnN0YW5jZShldmVudFRhcmdldCkge1xyXG4gICAgICAgIC8vIFRoZSByZXN1bHRzIGFyZSBzdG9yZWQgaW4gYW4gYXJyYXkgc2luY2Ugb2JqZWN0cyBjYW4ndCBiZSBrZXlzIGZvciBvdGhlclxyXG4gICAgICAgIC8vIG9iamVjdHMuIEluIGFkZGl0aW9uLCBzZXR0aW5nIGEgdW5pcXVlIHByb3BlcnR5IG9uIGFuIGV2ZW50IHRhcmdldCBhcyBhXHJcbiAgICAgICAgLy8gaGFzaCBtYXAga2V5IG1heSBub3QgYmUgYWxsb3dlZCBkdWUgdG8gQ09SUyByZXN0cmljdGlvbnMuXHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdJbnN0YW5jZSA9IHRoaXMucmVjZWl2ZXJzLmZpbmQocmVjZWl2ZXIgPT4gcmVjZWl2ZXIuaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkpO1xyXG4gICAgICAgIGlmIChleGlzdGluZ0luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBleGlzdGluZ0luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBuZXdJbnN0YW5jZSA9IG5ldyBSZWNlaXZlcihldmVudFRhcmdldCk7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlcnMucHVzaChuZXdJbnN0YW5jZSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld0luc3RhbmNlO1xyXG4gICAgfVxyXG4gICAgaXNMaXN0ZW5pbmd0byhldmVudFRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2ZW50VGFyZ2V0ID09PSBldmVudFRhcmdldDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogRmFucyBvdXQgYSBNZXNzYWdlRXZlbnQgdG8gdGhlIGFwcHJvcHJpYXRlIGxpc3RlbmVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogU2VuZHMgYW4ge0BsaW5rIFN0YXR1cy5BQ0t9IHVwb24gcmVjZWlwdCBhbmQgYSB7QGxpbmsgU3RhdHVzLkRPTkV9IG9uY2UgYWxsIGhhbmRsZXJzIGhhdmVcclxuICAgICAqIGZpbmlzaGVkIHByb2Nlc3NpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50IC0gVGhlIE1lc3NhZ2VFdmVudC5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGhhbmRsZUV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUV2ZW50ID0gZXZlbnQ7XHJcbiAgICAgICAgY29uc3QgeyBldmVudElkLCBldmVudFR5cGUsIGRhdGEgfSA9IG1lc3NhZ2VFdmVudC5kYXRhO1xyXG4gICAgICAgIGNvbnN0IGhhbmRsZXJzID0gdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIGlmICghKGhhbmRsZXJzID09PSBudWxsIHx8IGhhbmRsZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBoYW5kbGVycy5zaXplKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1lc3NhZ2VFdmVudC5wb3J0c1swXS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgIHN0YXR1czogXCJhY2tcIiAvKiBBQ0sgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IHByb21pc2VzID0gQXJyYXkuZnJvbShoYW5kbGVycykubWFwKGFzeW5jIChoYW5kbGVyKSA9PiBoYW5kbGVyKG1lc3NhZ2VFdmVudC5vcmlnaW4sIGRhdGEpKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9hbGxTZXR0bGVkKHByb21pc2VzKTtcclxuICAgICAgICBtZXNzYWdlRXZlbnQucG9ydHNbMF0ucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICBzdGF0dXM6IFwiZG9uZVwiIC8qIERPTkUgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgcmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIC0gVGhlIGV2ZW50IGhhbmRsZXIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIGV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9zdWJzY3JpYmUoZXZlbnRUeXBlLCBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5hZGQoZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgYW4gZXZlbnQgaGFuZGxlciBmcm9tIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byB1bnN1YnNjcmliZSBmcm9tLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIE9wdGlub2FsIGV2ZW50IGhhbmRsZXIsIGlmIG5vbmUgcHJvdmlkZWQsIHVuc3Vic2NyaWJlIGFsbCBoYW5kbGVycyBvbiB0aGlzIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgX3Vuc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSAmJiBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLmRlbGV0ZShldmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWV2ZW50SGFuZGxlciB8fCB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5SZWNlaXZlci5yZWNlaXZlcnMgPSBbXTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dlbmVyYXRlRXZlbnRJZChwcmVmaXggPSAnJywgZGlnaXRzID0gMTApIHtcclxuICAgIGxldCByYW5kb20gPSAnJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlnaXRzOyBpKyspIHtcclxuICAgICAgICByYW5kb20gKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZWZpeCArIHJhbmRvbTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciBzZW5kaW5nIG1lc3NhZ2VzIGFuZCB3YWl0aW5nIGZvciBhIGNvbXBsZXRpb24gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBTZW5kZXIge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG5ldyBTZXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgdGhlIGhhbmRsZXIgYW5kIHJlbW92ZSBpdCBmcm9tIG91ciB0cmFja2luZyBTZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byB1bnN1YnNjcmliZS5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgIGlmIChoYW5kbGVyLm1lc3NhZ2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZXIub25NZXNzYWdlKTtcclxuICAgICAgICAgICAgaGFuZGxlci5tZXNzYWdlQ2hhbm5lbC5wb3J0MS5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIFJlY2VpdmVyIGxvY2F0ZWQgYXQge0BsaW5rIHRhcmdldH0uXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFdlJ2xsIGZpcnN0IHdhaXQgYSBiaXQgZm9yIGFuIEFDSyAsIGlmIHdlIGdldCBvbmUgd2Ugd2lsbCB3YWl0IHNpZ25pZmljYW50bHkgbG9uZ2VyIHVudGlsIHRoZVxyXG4gICAgICogcmVjZWl2ZXIgaGFzIGhhZCBhIGNoYW5jZSB0byBmdWxseSBwcm9jZXNzIHRoZSBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gVHlwZSBvZiBldmVudCB0byBzZW5kLlxyXG4gICAgICogQHBhcmFtIGRhdGEgLSBUaGUgcGF5bG9hZCBvZiB0aGUgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dCAtIFRpbWVvdXQgZm9yIHdhaXRpbmcgb24gYW4gQUNLIGZyb20gdGhlIHJlY2VpdmVyLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHNldHRsZWQgcHJvbWlzZXMgZnJvbSBhbGwgdGhlIGhhbmRsZXJzIHRoYXQgd2VyZSBsaXN0ZW5pbmcgb24gdGhlIHJlY2VpdmVyLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBfc2VuZChldmVudFR5cGUsIGRhdGEsIHRpbWVvdXQgPSA1MCAvKiBBQ0sgKi8pIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlQ2hhbm5lbCA9IHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCcgPyBuZXcgTWVzc2FnZUNoYW5uZWwoKSA6IG51bGw7XHJcbiAgICAgICAgaWYgKCFtZXNzYWdlQ2hhbm5lbCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb25uZWN0aW9uX3VuYXZhaWxhYmxlXCIgLyogQ09OTkVDVElPTl9VTkFWQUlMQUJMRSAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIGxldCBjb21wbGV0aW9uVGltZXI7XHJcbiAgICAgICAgbGV0IGhhbmRsZXI7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoJycsIDIwKTtcclxuICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwucG9ydDEuc3RhcnQoKTtcclxuICAgICAgICAgICAgY29uc3QgYWNrVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZF9ldmVudFwiIC8qIFVOU1VQUE9SVEVEX0VWRU5UICovKSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBoYW5kbGVyID0ge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICBvbk1lc3NhZ2UoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUV2ZW50LmRhdGEuZXZlbnRJZCAhPT0gZXZlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZUV2ZW50LmRhdGEuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhY2tcIiAvKiBBQ0sgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgcmVjZWl2ZXIgc2hvdWxkIEFDSyBmaXJzdC5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhY2tUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21wbGV0aW9uVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidGltZW91dFwiIC8qIFRJTUVPVVQgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMDAgLyogQ09NUExFVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRvbmVcIiAvKiBET05FICovOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25jZSB0aGUgcmVjZWl2ZXIncyBoYW5kbGVycyBhcmUgZmluaXNoZWQgd2Ugd2lsbCBnZXQgdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29tcGxldGlvblRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUobWVzc2FnZUV2ZW50LmRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoYWNrVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGNvbXBsZXRpb25UaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiaW52YWxpZF9yZXNwb25zZVwiIC8qIElOVkFMSURfUkVTUE9OU0UgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVycy5hZGQoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBoYW5kbGVyLm9uTWVzc2FnZSk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgICAgIH0sIFttZXNzYWdlQ2hhbm5lbC5wb3J0Ml0pO1xyXG4gICAgICAgIH0pLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVNZXNzYWdlSGFuZGxlcihoYW5kbGVyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBMYXp5IGFjY2Vzc29yIGZvciB3aW5kb3csIHNpbmNlIHRoZSBjb21wYXQgbGF5ZXIgd29uJ3QgdHJlZSBzaGFrZSB0aGlzIG91dCxcclxuICogd2UgbmVlZCB0byBtYWtlIHN1cmUgbm90IHRvIG1lc3Mgd2l0aCB3aW5kb3cgdW5sZXNzIHdlIGhhdmUgdG9cclxuICovXHJcbmZ1bmN0aW9uIF93aW5kb3coKSB7XHJcbiAgICByZXR1cm4gd2luZG93O1xyXG59XHJcbmZ1bmN0aW9uIF9zZXRXaW5kb3dMb2NhdGlvbih1cmwpIHtcclxuICAgIF93aW5kb3coKS5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNXb3JrZXIoKSB7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBfd2luZG93KClbJ1dvcmtlckdsb2JhbFNjb3BlJ10gIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgdHlwZW9mIF93aW5kb3coKVsnaW1wb3J0U2NyaXB0cyddID09PSAnZnVuY3Rpb24nKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QWN0aXZlU2VydmljZVdvcmtlcigpIHtcclxuICAgIGlmICghKG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZWdpc3RyYXRpb24gPSBhd2FpdCBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWFkeTtcclxuICAgICAgICByZXR1cm4gcmVnaXN0cmF0aW9uLmFjdGl2ZTtcclxuICAgIH1cclxuICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9nZXRTZXJ2aWNlV29ya2VyQ29udHJvbGxlcigpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHJldHVybiAoKF9hID0gbmF2aWdhdG9yID09PSBudWxsIHx8IG5hdmlnYXRvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jb250cm9sbGVyKSB8fCBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRXb3JrZXJHbG9iYWxTY29wZSgpIHtcclxuICAgIHJldHVybiBfaXNXb3JrZXIoKSA/IHNlbGYgOiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERCX05BTUUgPSAnZmlyZWJhc2VMb2NhbFN0b3JhZ2VEYic7XHJcbmNvbnN0IERCX1ZFUlNJT04gPSAxO1xyXG5jb25zdCBEQl9PQkpFQ1RTVE9SRV9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlJztcclxuY29uc3QgREJfREFUQV9LRVlQQVRIID0gJ2ZiYXNlX2tleSc7XHJcbi8qKlxyXG4gKiBQcm9taXNlIHdyYXBwZXIgZm9yIElEQlJlcXVlc3RcclxuICpcclxuICogVW5mb3J0dW5hdGVseSB3ZSBjYW4ndCBjbGVhbmx5IGV4dGVuZCBQcm9taXNlPFQ+IHNpbmNlIHByb21pc2VzIGFyZSBub3QgY2FsbGFibGUgaW4gRVM2XHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBEQlByb21pc2Uge1xyXG4gICAgY29uc3RydWN0b3IocmVxdWVzdCkge1xyXG4gICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XHJcbiAgICB9XHJcbiAgICB0b1Byb21pc2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVxdWVzdC5yZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KHRoaXMucmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGdldE9iamVjdFN0b3JlKGRiLCBpc1JlYWRXcml0ZSkge1xyXG4gICAgcmV0dXJuIGRiXHJcbiAgICAgICAgLnRyYW5zYWN0aW9uKFtEQl9PQkpFQ1RTVE9SRV9OQU1FXSwgaXNSZWFkV3JpdGUgPyAncmVhZHdyaXRlJyA6ICdyZWFkb25seScpXHJcbiAgICAgICAgLm9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUpO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVEYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UoREJfTkFNRSk7XHJcbiAgICByZXR1cm4gbmV3IERCUHJvbWlzZShyZXF1ZXN0KS50b1Byb21pc2UoKTtcclxufVxyXG5mdW5jdGlvbiBfb3BlbkRhdGFiYXNlKCkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGluZGV4ZWREQi5vcGVuKERCX05BTUUsIERCX1ZFUlNJT04pO1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QocmVxdWVzdC5lcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCd1cGdyYWRlbmVlZGVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBkYiA9IHJlcXVlc3QucmVzdWx0O1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgZGIuY3JlYXRlT2JqZWN0U3RvcmUoREJfT0JKRUNUU1RPUkVfTkFNRSwgeyBrZXlQYXRoOiBEQl9EQVRBX0tFWVBBVEggfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignc3VjY2VzcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgLy8gU3RyYW5nZSBidWcgdGhhdCBvY2N1cnMgaW4gRmlyZWZveCB3aGVuIG11bHRpcGxlIHRhYnMgYXJlIG9wZW5lZCBhdCB0aGVcclxuICAgICAgICAgICAgLy8gc2FtZSB0aW1lLiBUaGUgb25seSB3YXkgdG8gcmVjb3ZlciBzZWVtcyB0byBiZSBkZWxldGluZyB0aGUgZGF0YWJhc2VcclxuICAgICAgICAgICAgLy8gYW5kIHJlLWluaXRpYWxpemluZyBpdC5cclxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjM0XHJcbiAgICAgICAgICAgIGlmICghZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhEQl9PQkpFQ1RTVE9SRV9OQU1FKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gTmVlZCB0byBjbG9zZSB0aGUgZGF0YWJhc2Ugb3IgZWxzZSB5b3UgZ2V0IGEgYGJsb2NrZWRgIGV2ZW50XHJcbiAgICAgICAgICAgICAgICBkYi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgX2RlbGV0ZURhdGFiYXNlKCk7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGF3YWl0IF9vcGVuRGF0YWJhc2UoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX3B1dE9iamVjdChkYiwga2V5LCB2YWx1ZSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5wdXQoe1xyXG4gICAgICAgIFtEQl9EQVRBX0tFWVBBVEhdOiBrZXksXHJcbiAgICAgICAgdmFsdWVcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0T2JqZWN0KGRiLCBrZXkpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgZmFsc2UpLmdldChrZXkpO1xyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbiAgICByZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGRhdGEudmFsdWU7XHJcbn1cclxuZnVuY3Rpb24gX2RlbGV0ZU9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIHRydWUpLmRlbGV0ZShrZXkpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuY29uc3QgX1BPTExJTkdfSU5URVJWQUxfTVMgPSA4MDA7XHJcbmNvbnN0IF9UUkFOU0FDVElPTl9SRVRSWV9DT1VOVCA9IDM7XHJcbmNsYXNzIEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJMT0NBTFwiIC8qIExPQ0FMICovO1xyXG4gICAgICAgIHRoaXMuX3Nob3VsZEFsbG93TWlncmF0aW9uID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9O1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZSA9IHt9O1xyXG4gICAgICAgIC8vIHNldFRpbWVvdXQgcmV0dXJuIHZhbHVlIGlzIHBsYXRmb3JtIHNwZWNpZmljXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzID0gMDtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlbmRlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIEZpcmUgJiBmb3JnZXQgdGhlIHNlcnZpY2Ugd29ya2VyIHJlZ2lzdHJhdGlvbiBhcyBpdCBtYXkgbmV2ZXIgcmVzb2x2ZVxyXG4gICAgICAgIHRoaXMuX3dvcmtlckluaXRpYWxpemF0aW9uUHJvbWlzZSA9XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKS50aGVuKCgpID0+IHsgfSwgKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuRGIoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZGIgPSBhd2FpdCBfb3BlbkRhdGFiYXNlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfd2l0aFJldHJpZXMob3ApIHtcclxuICAgICAgICBsZXQgbnVtQXR0ZW1wdHMgPSAwO1xyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYiA9IGF3YWl0IHRoaXMuX29wZW5EYigpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG9wKGRiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bUF0dGVtcHRzKysgPiBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZGIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiLmNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYiA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyBleHBvbmVudGlhbCBiYWNrb2ZmXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluZGV4ZWREQiBldmVudHMgZG8gbm90IHByb3BhZ2F0ZSBmcm9tIHRoZSBtYWluIHdpbmRvdyB0byB0aGUgd29ya2VyIGNvbnRleHQuICBXZSByZWx5IG9uIGFcclxuICAgICAqIHBvc3RNZXNzYWdlIGludGVyZmFjZSB0byBzZW5kIHRoZXNlIGV2ZW50cyB0byB0aGUgd29ya2VyIG91cnNlbHZlcy5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVNlcnZpY2VXb3JrZXJNZXNzYWdpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuIF9pc1dvcmtlcigpID8gdGhpcy5pbml0aWFsaXplUmVjZWl2ZXIoKSA6IHRoaXMuaW5pdGlhbGl6ZVNlbmRlcigpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcyB0aGUgd29ya2VyIHdlIHNob3VsZCBsaXN0ZW4gdG8gZXZlbnRzIGZyb20gdGhlIG1haW4gd2luZG93LlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplUmVjZWl2ZXIoKSB7XHJcbiAgICAgICAgdGhpcy5yZWNlaXZlciA9IFJlY2VpdmVyLl9nZXRJbnN0YW5jZShfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSk7XHJcbiAgICAgICAgLy8gUmVmcmVzaCBmcm9tIHBlcnNpc3RlbmNlIGlmIHdlIHJlY2VpdmUgYSBLZXlDaGFuZ2VkIG1lc3NhZ2UuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCBhc3luYyAoX29yaWdpbiwgZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBrZXlzID0gYXdhaXQgdGhpcy5fcG9sbCgpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAga2V5UHJvY2Vzc2VkOiBrZXlzLmluY2x1ZGVzKGRhdGEua2V5KVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIExldCB0aGUgc2VuZGVyIGtub3cgdGhhdCB3ZSBhcmUgbGlzdGVuaW5nIHNvIHRoZXkgZ2l2ZSB1cyBtb3JlIHRpbWVvdXQuXHJcbiAgICAgICAgdGhpcy5yZWNlaXZlci5fc3Vic2NyaWJlKFwicGluZ1wiIC8qIFBJTkcgKi8sIGFzeW5jIChfb3JpZ2luLCBfZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gW1wia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovXTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQXMgdGhlIG1haW4gd2luZG93LCB3ZSBzaG91bGQgbGV0IHRoZSB3b3JrZXIga25vdyB3aGVuIGtleXMgY2hhbmdlIChzZXQgYW5kIHJlbW92ZSkuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvU2VydmljZVdvcmtlckNvbnRhaW5lci9yZWFkeSB8IFNlcnZpY2VXb3JrZXJDb250YWluZXIucmVhZHl9XHJcbiAgICAgKiBtYXkgbm90IHJlc29sdmUuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVTZW5kZXIoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlcmUncyBhbiBhY3RpdmUgc2VydmljZSB3b3JrZXIuXHJcbiAgICAgICAgdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyID0gYXdhaXQgX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKTtcclxuICAgICAgICBpZiAoIXRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2VuZGVyID0gbmV3IFNlbmRlcih0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIpO1xyXG4gICAgICAgIC8vIFBpbmcgdGhlIHNlcnZpY2Ugd29ya2VyIHRvIGNoZWNrIHdoYXQgZXZlbnRzIHRoZXkgY2FuIGhhbmRsZS5cclxuICAgICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgdGhpcy5zZW5kZXIuX3NlbmQoXCJwaW5nXCIgLyogUElORyAqLywge30sIDgwMCAvKiBMT05HX0FDSyAqLyk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSByZXN1bHRzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnVsZmlsbGVkKSAmJlxyXG4gICAgICAgICAgICAoKF9iID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnZhbHVlLmluY2x1ZGVzKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovKSkpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogTGV0IHRoZSB3b3JrZXIga25vdyBhYm91dCBhIGNoYW5nZWQga2V5LCB0aGUgZXhhY3Qga2V5IGRvZXNuJ3QgdGVjaG5pY2FsbHkgbWF0dGVyIHNpbmNlIHRoZVxyXG4gICAgICogd29ya2VyIHdpbGwganVzdCB0cmlnZ2VyIGEgZnVsbCBzeW5jIGFueXdheS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIG5vdywgd2Ugb25seSBzdXBwb3J0IG9uZSBzZXJ2aWNlIHdvcmtlciBwZXIgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ga2V5IC0gU3RvcmFnZSBrZXkgd2hpY2ggY2hhbmdlZC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgbm90aWZ5U2VydmljZVdvcmtlcihrZXkpIHtcclxuICAgICAgICBpZiAoIXRoaXMuc2VuZGVyIHx8XHJcbiAgICAgICAgICAgICF0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgfHxcclxuICAgICAgICAgICAgX2dldFNlcnZpY2VXb3JrZXJDb250cm9sbGVyKCkgIT09IHRoaXMuYWN0aXZlU2VydmljZVdvcmtlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VuZGVyLl9zZW5kKFwia2V5Q2hhbmdlZFwiIC8qIEtFWV9DSEFOR0VEICovLCB7IGtleSB9LCBcclxuICAgICAgICAgICAgLy8gVXNlIGxvbmcgdGltZW91dCBpZiByZWNlaXZlciBoYXMgcHJldmlvdXNseSByZXNwb25kZWQgdG8gYSBwaW5nIGZyb20gdXMuXHJcbiAgICAgICAgICAgIHRoaXMuc2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlXHJcbiAgICAgICAgICAgICAgICA/IDgwMCAvKiBMT05HX0FDSyAqL1xyXG4gICAgICAgICAgICAgICAgOiA1MCAvKiBBQ0sgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGJlc3QgZWZmb3J0IGFwcHJvYWNoLiBJZ25vcmUgZXJyb3JzLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9pc0F2YWlsYWJsZSgpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoIWluZGV4ZWREQikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgX29wZW5EYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICBhd2FpdCBfcHV0T2JqZWN0KGRiLCBTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9kZWxldGVPYmplY3QoZGIsIFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGFzeW5jIF93aXRoUGVuZGluZ1dyaXRlKHdyaXRlKSB7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzKys7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgd3JpdGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMucGVuZGluZ1dyaXRlcy0tO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGFzeW5jIF9zZXQoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl93aXRoUGVuZGluZ1dyaXRlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBfcHV0T2JqZWN0KGRiLCBrZXksIHZhbHVlKSk7XHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9nZXQoa2V5KSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gKGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gZ2V0T2JqZWN0KGRiLCBrZXkpKSk7XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSBvYmo7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuICAgIGFzeW5jIF9yZW1vdmUoa2V5KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQZW5kaW5nV3JpdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IF9kZWxldGVPYmplY3QoZGIsIGtleSkpO1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm5vdGlmeVNlcnZpY2VXb3JrZXIoa2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9wb2xsKCkge1xyXG4gICAgICAgIC8vIFRPRE86IGNoZWNrIGlmIHdlIG5lZWQgdG8gZmFsbGJhY2sgaWYgZ2V0QWxsIGlzIG5vdCBzdXBwb3J0ZWRcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZ2V0QWxsUmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCBmYWxzZSkuZ2V0QWxsKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgREJQcm9taXNlKGdldEFsbFJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgaGF2ZSBwZW5kaW5nIHdyaXRlcyBpbiBwcm9ncmVzcyBhYm9ydCwgd2UnbGwgZ2V0IHBpY2tlZCB1cCBvbiB0aGUgbmV4dCBwb2xsXHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1dyaXRlcyAhPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGtleXMgPSBbXTtcclxuICAgICAgICBjb25zdCBrZXlzSW5SZXN1bHQgPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgZm9yIChjb25zdCB7IGZiYXNlX2tleToga2V5LCB2YWx1ZSB9IG9mIHJlc3VsdCkge1xyXG4gICAgICAgICAgICBrZXlzSW5SZXN1bHQuYWRkKGtleSk7XHJcbiAgICAgICAgICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLmxvY2FsQ2FjaGVba2V5XSkgIT09IEpTT04uc3RyaW5naWZ5KHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGxvY2FsS2V5IG9mIE9iamVjdC5rZXlzKHRoaXMubG9jYWxDYWNoZSkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubG9jYWxDYWNoZVtsb2NhbEtleV0gJiYgIWtleXNJblJlc3VsdC5oYXMobG9jYWxLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBEZWxldGVkXHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhsb2NhbEtleSwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2gobG9jYWxLZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBrZXlzO1xyXG4gICAgfVxyXG4gICAgbm90aWZ5TGlzdGVuZXJzKGtleSwgbmV3VmFsdWUpIHtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IG5ld1ZhbHVlO1xyXG4gICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2tleV07XHJcbiAgICAgICAgaWYgKGxpc3RlbmVycykge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGxpc3RlbmVyIG9mIEFycmF5LmZyb20obGlzdGVuZXJzKSkge1xyXG4gICAgICAgICAgICAgICAgbGlzdGVuZXIobmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHRoaXMuX3BvbGwoKSwgX1BPTExJTkdfSU5URVJWQUxfTVMpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XSA9IG5ldyBTZXQoKTtcclxuICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIGNhY2hlIHRvIGF2b2lkIHNwdXJpb3VzbHkgdHJpZ2dlcmluZyBvbiBmaXJzdCBwb2xsLlxyXG4gICAgICAgICAgICB2b2lkIHRoaXMuX2dldChrZXkpOyAvLyBUaGlzIGNhbiBoYXBwZW4gaW4gdGhlIGJhY2tncm91bmQgYXN5bmMgYW5kIHdlIGNhbiByZXR1cm4gaW1tZWRpYXRlbHkuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzW2tleV0uYWRkKGxpc3RlbmVyKTtcclxuICAgIH1cclxuICAgIF9yZW1vdmVMaXN0ZW5lcihrZXksIGxpc3RlbmVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XS5zaXplID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgaW5kZXhlZERCYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSA9IEluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0U2lnbkluUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBQT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46c3RhcnRcIiAvKiBTVEFSVF9QSE9ORV9NRkFfU0lHTl9JTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOmZpbmFsaXplXCIgLyogRklOQUxJWkVfUEhPTkVfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjYXB0Y2hhUGFyYW1zKGF1dGgpIHtcclxuICAgIHJldHVybiAoKGF3YWl0IF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEdFVCAqLywgXCIvdjEvcmVjYXB0Y2hhUGFyYW1zXCIgLyogR0VUX1JFQ0FQVENIQV9QQVJBTSAqLykpLnJlY2FwdGNoYVNpdGVLZXkgfHwgJycpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgcmV0dXJuIChfYiA9IChfYSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVswXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogZG9jdW1lbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2xvYWRKUyh1cmwpIHtcclxuICAgIC8vIFRPRE86IGNvbnNpZGVyIGFkZGluZyB0aW1lb3V0IHN1cHBvcnQgJiBjYW5jZWxsYXRpb25cclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcclxuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3NyYycsIHVybCk7XHJcbiAgICAgICAgZWwub25sb2FkID0gcmVzb2x2ZTtcclxuICAgICAgICBlbC5vbmVycm9yID0gZSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVycm9yID0gX2NyZWF0ZUVycm9yKFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGVycm9yLmN1c3RvbURhdGEgPSBlO1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgIGVsLmNoYXJzZXQgPSAnVVRGLTgnO1xyXG4gICAgICAgIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfZ2VuZXJhdGVDYWxsYmFja05hbWUocHJlZml4KSB7XHJcbiAgICByZXR1cm4gYF9fJHtwcmVmaXh9JHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKX1gO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9TT0xWRV9USU1FX01TID0gNTAwO1xyXG5jb25zdCBfRVhQSVJBVElPTl9USU1FX01TID0gNjAwMDA7XHJcbmNvbnN0IF9XSURHRVRfSURfU1RBUlQgPSAxMDAwMDAwMDAwMDAwO1xyXG5jbGFzcyBNb2NrUmVDYXB0Y2hhIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY291bnRlciA9IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcihjb250YWluZXIsIHBhcmFtZXRlcnMpIHtcclxuICAgICAgICBjb25zdCBpZCA9IHRoaXMuY291bnRlcjtcclxuICAgICAgICB0aGlzLl93aWRnZXRzLnNldChpZCwgbmV3IE1vY2tXaWRnZXQoY29udGFpbmVyLCB0aGlzLmF1dGgubmFtZSwgcGFyYW1ldGVycyB8fCB7fSkpO1xyXG4gICAgICAgIHRoaXMuY291bnRlcisrO1xyXG4gICAgICAgIHJldHVybiBpZDtcclxuICAgIH1cclxuICAgIHJlc2V0KG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5kZWxldGUoKSk7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5kZWxldGUoaWQpO1xyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2Uob3B0V2lkZ2V0SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgY29uc3QgaWQgPSBvcHRXaWRnZXRJZCB8fCBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZ2V0UmVzcG9uc2UoKSkgfHwgJyc7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICB2b2lkICgoX2EgPSB0aGlzLl93aWRnZXRzLmdldChpZCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5leGVjdXRlKCkpO1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxufVxyXG5jbGFzcyBNb2NrV2lkZ2V0IHtcclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIGFwcE5hbWUsIHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMucGFyYW1zID0gcGFyYW1zO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5kZWxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5yZXNwb25zZVRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNsaWNrSGFuZGxlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5leGVjdXRlKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdGhpcy5wYXJhbXMuc2l6ZSAhPT0gJ2ludmlzaWJsZSc7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlVG9rZW47XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyg1MCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2FsbGJhY2ssICdleHBpcmVkLWNhbGxiYWNrJzogZXhwaXJlZENhbGxiYWNrIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMucmVzcG9uc2VUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwaXJlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlZENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBfRVhQSVJBVElPTl9USU1FX01TKTtcclxuICAgICAgICB9LCBfU09MVkVfVElNRV9NUyk7XHJcbiAgICB9XHJcbiAgICBjaGVja0lmRGVsZXRlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncmVDQVBUQ0hBIG1vY2sgd2FzIGFscmVhZHkgZGVsZXRlZCEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcobGVuKSB7XHJcbiAgICBjb25zdCBjaGFycyA9IFtdO1xyXG4gICAgY29uc3QgYWxsb3dlZENoYXJzID0gJzEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsb3dlZENoYXJzLmxlbmd0aCkpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBSZUNhcHRjaGEgd2lsbCBsb2FkIHVzaW5nIHRoZSBzYW1lIGNhbGxiYWNrLCBzbyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gbmVlZHNcclxuLy8gdG8gYmUga2VwdCBhcm91bmRcclxuY29uc3QgX0pTTE9BRF9DQUxMQkFDSyA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgncmNiJyk7XHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVF9ERUxBWSA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5jb25zdCBSRUNBUFRDSEFfQkFTRSA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanM/JztcclxuLyoqXHJcbiAqIExvYWRlciBmb3IgdGhlIEdSZUNhcHRjaGEgbGlicmFyeS4gVGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUgb2YgdGhpcy5cclxuICovXHJcbmNsYXNzIFJlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ob3N0TGFuZ3VhZ2UgPSAnJztcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSAwO1xyXG4gICAgICAgIHRoaXMubGlicmFyeVNlcGFyYXRlbHlMb2FkZWQgPSAhIV93aW5kb3coKS5ncmVjYXB0Y2hhO1xyXG4gICAgfVxyXG4gICAgbG9hZChhdXRoLCBobCA9ICcnKSB7XHJcbiAgICAgICAgX2Fzc2VydChpc0hvc3RMYW5ndWFnZVZhbGlkKGhsKSwgYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3dpbmRvdygpLmdyZWNhcHRjaGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICB9LCBORVRXT1JLX1RJTUVPVVRfREVMQVkuZ2V0KCkpO1xyXG4gICAgICAgICAgICBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS10gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBfd2luZG93KClbX0pTTE9BRF9DQUxMQkFDS107XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZWNhcHRjaGEgPSBfd2luZG93KCkuZ3JlY2FwdGNoYTtcclxuICAgICAgICAgICAgICAgIGlmICghcmVjYXB0Y2hhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXcmFwIHRoZSBncmVwdGNoYSByZW5kZXIgZnVuY3Rpb24gc28gdGhhdCB3ZSBrbm93IGlmIHRoZSBkZXZlbG9wZXIgaGFzXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsZWQgaXQgc2VwYXJhdGVseVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gcmVjYXB0Y2hhLnJlbmRlcjtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5yZW5kZXIgPSAoY29udGFpbmVyLCBwYXJhbXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXRJZCA9IHJlbmRlcihjb250YWluZXIsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpZGdldElkO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gaGw7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlY2FwdGNoYSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke1JFQ0FQVENIQV9CQVNFfT8ke3F1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIG9ubG9hZDogX0pTTE9BRF9DQUxMQkFDSyxcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogJ2V4cGxpY2l0JyxcclxuICAgICAgICAgICAgICAgIGhsXHJcbiAgICAgICAgICAgIH0pfWA7XHJcbiAgICAgICAgICAgIF9sb2FkSlModXJsKS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobmV0d29ya1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBjbGVhcmVkT25lSW5zdGFuY2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyLS07XHJcbiAgICB9XHJcbiAgICBzaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpIHtcclxuICAgICAgICAvLyBXZSBjYW4gcmVzb2x2ZSBpbW1lZGlhdGVseSBpZjpcclxuICAgICAgICAvLyAgIOKAoiBncmVjYXB0Y2hhIGlzIGFscmVhZHkgZGVmaW5lZCBBTkQgKFxyXG4gICAgICAgIC8vICAgICAxLiB0aGUgcmVxdWVzdGVkIGxhbmd1YWdlIGNvZGVzIGFyZSB0aGUgc2FtZSBPUlxyXG4gICAgICAgIC8vICAgICAyLiB0aGVyZSBleGlzdHMgYWxyZWFkeSBhIFJlQ2FwdGNoYSBvbiB0aGUgcGFnZVxyXG4gICAgICAgIC8vICAgICAzLiB0aGUgbGlicmFyeSB3YXMgYWxyZWFkeSBsb2FkZWQgYnkgdGhlIGFwcFxyXG4gICAgICAgIC8vIEluIGNhc2VzICgyKSBhbmQgKDMpLCB3ZSBfY2FuJ3RfIHJlbG9hZCBhcyBpdCB3b3VsZCBicmVhayB0aGUgcmVjYXB0Y2hhc1xyXG4gICAgICAgIC8vIHRoYXQgYXJlIGFscmVhZHkgaW4gdGhlIHBhZ2VcclxuICAgICAgICByZXR1cm4gKCEhX3dpbmRvdygpLmdyZWNhcHRjaGEgJiZcclxuICAgICAgICAgICAgKGhsID09PSB0aGlzLmhvc3RMYW5ndWFnZSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyID4gMCB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5saWJyYXJ5U2VwYXJhdGVseUxvYWRlZCkpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGlzSG9zdExhbmd1YWdlVmFsaWQoaGwpIHtcclxuICAgIHJldHVybiBobC5sZW5ndGggPD0gNiAmJiAvXlxccypbYS16QS1aMC05XFwtXSpcXHMqJC8udGVzdChobCk7XHJcbn1cclxuY2xhc3MgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgYXN5bmMgbG9hZChhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNb2NrUmVDYXB0Y2hhKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgY2xlYXJlZE9uZUluc3RhbmNlKCkgeyB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUgPSAncmVjYXB0Y2hhJztcclxuY29uc3QgREVGQVVMVF9QQVJBTVMgPSB7XHJcbiAgICB0aGVtZTogJ2xpZ2h0JyxcclxuICAgIHR5cGU6ICdpbWFnZSdcclxufTtcclxuLyoqXHJcbiAqIEFuIHtAbGluayBodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS8gfCByZUNBUFRDSEF9LWJhc2VkIGFwcGxpY2F0aW9uIHZlcmlmaWVyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBSZWNhcHRjaGFWZXJpZmllciB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyT3JJZCAtIFRoZSByZUNBUFRDSEEgY29udGFpbmVyIHBhcmFtZXRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogVGhpcyBoYXMgZGlmZmVyZW50IG1lYW5pbmcgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIHJlQ0FQVENIQSBpcyBoaWRkZW4gb3IgdmlzaWJsZS4gRm9yIGFcclxuICAgICAqIHZpc2libGUgcmVDQVBUQ0hBIHRoZSBjb250YWluZXIgbXVzdCBiZSBlbXB0eS4gSWYgYSBzdHJpbmcgaXMgdXNlZCwgaXQgaGFzIHRvIGNvcnJlc3BvbmQgdG9cclxuICAgICAqIGFuIGVsZW1lbnQgSUQuIFRoZSBjb3JyZXNwb25kaW5nIGVsZW1lbnQgbXVzdCBhbHNvIG11c3QgYmUgaW4gdGhlIERPTSBhdCB0aGUgdGltZSBvZlxyXG4gICAgICogaW5pdGlhbGl6YXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtZXRlcnMgLSBUaGUgb3B0aW9uYWwgcmVDQVBUQ0hBIHBhcmFtZXRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIENoZWNrIHRoZSByZUNBUFRDSEEgZG9jcyBmb3IgYSBjb21wcmVoZW5zaXZlIGxpc3QuIEFsbCBwYXJhbWV0ZXJzIGFyZSBhY2NlcHRlZCBleGNlcHQgZm9yXHJcbiAgICAgKiB0aGUgc2l0ZWtleS4gRmlyZWJhc2UgQXV0aCBiYWNrZW5kIHByb3Zpc2lvbnMgYSByZUNBUFRDSEEgZm9yIGVhY2ggcHJvamVjdCBhbmQgd2lsbFxyXG4gICAgICogY29uZmlndXJlIHRoaXMgdXBvbiByZW5kZXJpbmcuIEZvciBhbiBpbnZpc2libGUgcmVDQVBUQ0hBLCBhIHNpemUga2V5IG11c3QgaGF2ZSB0aGUgdmFsdWVcclxuICAgICAqICdpbnZpc2libGUnLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoRXh0ZXJuIC0gVGhlIGNvcnJlc3BvbmRpbmcgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBJZiBub25lIGlzIHByb3ZpZGVkLCB0aGUgZGVmYXVsdCBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgaXMgdXNlZC4gQSBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2VcclxuICAgICAqIG11c3QgYmUgaW5pdGlhbGl6ZWQgd2l0aCBhbiBBUEkga2V5LCBvdGhlcndpc2UgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIHBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1BBUkFNUyksIGF1dGhFeHRlcm4pIHtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhcHBsaWNhdGlvbiB2ZXJpZmllciB0eXBlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJlbWFya3NcclxuICAgICAgICAgKiBGb3IgYSByZUNBUFRDSEEgdmVyaWZpZXIsIHRoaXMgaXMgJ3JlY2FwdGNoYScuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEU7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndpZGdldElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICB0aGlzLmlzSW52aXNpYmxlID0gdGhpcy5wYXJhbWV0ZXJzLnNpemUgPT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrID0gdGhpcy5tYWtlVG9rZW5DYWxsYmFjayh0aGlzLnBhcmFtZXRlcnMuY2FsbGJhY2spO1xyXG4gICAgICAgIHRoaXMuX3JlY2FwdGNoYUxvYWRlciA9IHRoaXMuYXV0aC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmdcclxuICAgICAgICAgICAgPyBuZXcgTW9ja1JlQ2FwdGNoYUxvYWRlckltcGwoKVxyXG4gICAgICAgICAgICA6IG5ldyBSZUNhcHRjaGFMb2FkZXJJbXBsKCk7XHJcbiAgICAgICAgdGhpcy52YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKTtcclxuICAgICAgICAvLyBUT0RPOiBGaWd1cmUgb3V0IGlmIHNkayB2ZXJzaW9uIGlzIG5lZWRlZFxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBXYWl0cyBmb3IgdGhlIHVzZXIgdG8gc29sdmUgdGhlIHJlQ0FQVENIQSBhbmQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVDQVBUQ0hBIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdmVyaWZ5KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgY29uc3QgaWQgPSBhd2FpdCB0aGlzLnJlbmRlcigpO1xyXG4gICAgICAgIGNvbnN0IHJlY2FwdGNoYSA9IHRoaXMuZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKTtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlY2FwdGNoYS5nZXRSZXNwb25zZShpZCk7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB0b2tlbkNoYW5nZSA9ICh0b2tlbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0b2tlbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjsgLy8gSWdub3JlIHRva2VuIGV4cGlyYXRpb25zLlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy50b2tlbkNoYW5nZUxpc3RlbmVycy5kZWxldGUodG9rZW5DaGFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuYWRkKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbnZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5leGVjdXRlKGlkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IG9uIHRoZSBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB3aWRnZXQgSUQuXHJcbiAgICAgKi9cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgcHJvbWlzZS4gU2luY2UgaXQncyBub3QgYXN5bmMgKHdlIHdhbnQgdG8gcmV0dXJuIHRoZVxyXG4gICAgICAgICAgICAvLyBfc2FtZV8gcHJvbWlzZSBpZiByZW5kZXJpbmcgaXMgc3RpbGwgb2NjdXJyaW5nKSwgdGhlIEFQSSBzdXJmYWNlIHNob3VsZFxyXG4gICAgICAgICAgICAvLyByZWplY3Qgd2l0aCB0aGUgZXJyb3IgcmF0aGVyIHRoYW4ganVzdCB0aHJvd1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnJlbmRlclByb21pc2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gdGhpcy5tYWtlUmVuZGVyUHJvbWlzZSgpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21pc2UgPSBudWxsO1xyXG4gICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfcmVzZXQoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy53aWRnZXRJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCkucmVzZXQodGhpcy53aWRnZXRJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDbGVhcnMgdGhlIHJlQ0FQVENIQSB3aWRnZXQgZnJvbSB0aGUgcGFnZSBhbmQgZGVzdHJveXMgdGhlIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuZGVzdHJveWVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIuY2xlYXJlZE9uZUluc3RhbmNlKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmNoaWxkTm9kZXMuZm9yRWFjaChub2RlID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUNoaWxkKG5vZGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB2YWxpZGF0ZVN0YXJ0aW5nU3RhdGUoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXksIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuaXNJbnZpc2libGUgfHwgIXRoaXMuY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBPUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICBtYWtlVG9rZW5DYWxsYmFjayhleGlzdGluZykge1xyXG4gICAgICAgIHJldHVybiB0b2tlbiA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih0b2tlbikpO1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZyh0b2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIGV4aXN0aW5nID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ2xvYmFsRnVuYyA9IF93aW5kb3coKVtleGlzdGluZ107XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbEZ1bmMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICBnbG9iYWxGdW5jKHRva2VuKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3NlcnROb3REZXN0cm95ZWQoKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5kZXN0cm95ZWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VSZW5kZXJQcm9taXNlKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIGlmICghdGhpcy53aWRnZXRJZCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3VhcmFudGVlZEVtcHR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmFudGVlZEVtcHR5KTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGd1YXJhbnRlZWRFbXB0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLndpZGdldElkID0gdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlbmRlcihjb250YWluZXIsIHRoaXMucGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldElkO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBfYXNzZXJ0KF9pc0h0dHBPckh0dHBzKCkgJiYgIV9pc1dvcmtlcigpLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXdhaXQgZG9tUmVhZHkoKTtcclxuICAgICAgICB0aGlzLnJlY2FwdGNoYSA9IGF3YWl0IHRoaXMuX3JlY2FwdGNoYUxvYWRlci5sb2FkKHRoaXMuYXV0aCwgdGhpcy5hdXRoLmxhbmd1YWdlQ29kZSB8fCB1bmRlZmluZWQpO1xyXG4gICAgICAgIGNvbnN0IHNpdGVLZXkgPSBhd2FpdCBnZXRSZWNhcHRjaGFQYXJhbXModGhpcy5hdXRoKTtcclxuICAgICAgICBfYXNzZXJ0KHNpdGVLZXksIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMuc2l0ZWtleSA9IHNpdGVLZXk7XHJcbiAgICB9XHJcbiAgICBnZXRBc3NlcnRlZFJlY2FwdGNoYSgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMucmVjYXB0Y2hhLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjYXB0Y2hhO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvbVJlYWR5KCkge1xyXG4gICAgbGV0IHJlc29sdmVyID0gbnVsbDtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG9jdW1lbnQgbm90IHJlYWR5LCB3YWl0IGZvciBsb2FkIGJlZm9yZSByZXNvbHZpbmcuXHJcbiAgICAgICAgLy8gU2F2ZSByZXNvbHZlciwgc28gd2UgY2FuIHJlbW92ZSBsaXN0ZW5lciBpbiBjYXNlIGl0IHdhcyBleHRlcm5hbGx5XHJcbiAgICAgICAgLy8gY2FuY2VsbGVkLlxyXG4gICAgICAgIHJlc29sdmVyID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJpZmljYXRpb25JZCwgb25Db25maXJtYXRpb24pIHtcclxuICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbklkID0gdmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm1hdGlvbiA9IG9uQ29uZmlybWF0aW9uO1xyXG4gICAgfVxyXG4gICAgY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHRoaXMudmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29uZmlybWF0aW9uKGF1dGhDcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgY29kZSB2aWEgU01TIHRvIHRoZSBnaXZlblxyXG4gKiBwaG9uZSBudW1iZXIsIGFuZCByZXR1cm5zIGEge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdH0uIEFmdGVyIHRoZSB1c2VyXHJcbiAqIHByb3ZpZGVzIHRoZSBjb2RlIHNlbnQgdG8gdGhlaXIgcGhvbmUsIGNhbGwge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtfVxyXG4gKiB3aXRoIHRoZSBjb2RlIHRvIHNpZ24gdGhlIHVzZXIgaW4uXHJcbiAqXHJcbiAqIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGEge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbiwge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICogVGhpcyBmdW5jdGlvbiBjYW4gd29yayBvbiBvdGhlciBwbGF0Zm9ybXMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGVcclxuICoge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfSAobGlrZSBSZWFjdCBOYXRpdmUpLCBidXQgeW91IG5lZWQgdG8gdXNlIGFcclxuICogdGhpcmQtcGFydHkge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9IGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IGZpcmViYXNlLmF1dGguUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIGEgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcihhdXRoSW50ZXJuYWwsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoSW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHVzZXIgYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyKHVzZXIsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBcInBob25lXCIgLyogUEhPTkUgKi8pO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIodXNlckludGVybmFsLmF1dGgsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiBsaW5rV2l0aENyZWRlbnRpYWwodXNlckludGVybmFsLCBjcmVkKSk7XHJcbn1cclxuLyoqXHJcbiAqIFJlLWF1dGhlbnRpY2F0ZXMgYSB1c2VyIHVzaW5nIGEgZnJlc2ggcGhvbmUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHJlbWFya3MgVXNlIGJlZm9yZSBvcGVyYXRpb25zIHN1Y2ggYXMge0BsaW5rIHVwZGF0ZVBhc3N3b3JkfSB0aGF0IHJlcXVpcmUgdG9rZW5zIGZyb20gcmVjZW50IHNpZ24taW4gYXR0ZW1wdHMuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlcih1c2VyLCBwaG9uZU51bWJlciwgYXBwVmVyaWZpZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgX3ZlcmlmeVBob25lTnVtYmVyKHVzZXJJbnRlcm5hbC5hdXRoLCBwaG9uZU51bWJlciwgZ2V0TW9kdWxhckluc3RhbmNlKGFwcFZlcmlmaWVyKSk7XHJcbiAgICByZXR1cm4gbmV3IENvbmZpcm1hdGlvblJlc3VsdEltcGwodmVyaWZpY2F0aW9uSWQsIGNyZWQgPT4gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VySW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBhIHZlcmlmaWNhdGlvbiBJRCB0byBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggdGhlIFNNUyBjb2RlIHRoYXQgaXMgc2VudC5cclxuICpcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF92ZXJpZnlQaG9uZU51bWJlcihhdXRoLCBvcHRpb25zLCB2ZXJpZmllcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgcmVjYXB0Y2hhVG9rZW4gPSBhd2FpdCB2ZXJpZmllci52ZXJpZnkoKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVjYXB0Y2hhVG9rZW4gPT09ICdzdHJpbmcnLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodmVyaWZpZXIudHlwZSA9PT0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEUsIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgbGV0IHBob25lSW5mb09wdGlvbnM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG9wdGlvbnNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJ3Nlc3Npb24nIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHBob25lSW5mb09wdGlvbnMuc2Vzc2lvbjtcclxuICAgICAgICAgICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcGhvbmVJbmZvT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwiZW5yb2xsXCIgLyogRU5ST0xMICovLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydEVucm9sbFBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBpZFRva2VuOiBzZXNzaW9uLmNyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVFbnJvbGxtZW50SW5mbzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVNlc3Npb25JbmZvLnNlc3Npb25JbmZvO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwic2lnbmluXCIgLyogU0lHTl9JTiAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1mYUVucm9sbG1lbnRJZCA9ICgoX2EgPSBwaG9uZUluZm9PcHRpb25zLm11bHRpRmFjdG9ySGludCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zLm11bHRpRmFjdG9yVWlkO1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChtZmFFbnJvbGxtZW50SWQsIGF1dGgsIFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIE1JU1NJTkdfTUZBX0lORk8gKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydFNpZ25JblBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgICAgICAgICBtZmFQZW5kaW5nQ3JlZGVudGlhbDogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1mYUVucm9sbG1lbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICBwaG9uZVNpZ25JbkluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjYXB0Y2hhVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5waG9uZVJlc3BvbnNlSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgeyBzZXNzaW9uSW5mbyB9ID0gYXdhaXQgc2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICBwaG9uZU51bWJlcjogcGhvbmVJbmZvT3B0aW9ucy5waG9uZU51bWJlcixcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gc2Vzc2lvbkluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgdmVyaWZpZXIuX3Jlc2V0KCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVwZGF0ZXMgdGhlIHVzZXIncyBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBSZWNhcHRjaGFWZXJpZmllcigncmVjYXB0Y2hhLWNvbnRhaW5lcicpO1xyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcignKzE2NTA1NTUwMTAxJywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiB0aGUgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBwaG9uZUNyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICogYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gQSBjcmVkZW50aWFsIGF1dGhlbnRpY2F0aW5nIHRoZSBuZXcgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVQaG9uZU51bWJlcih1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICBhd2FpdCBfbGluayQxKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBQaG9uZUF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyAncmVjYXB0Y2hhLWNvbnRhaW5lcicgaXMgdGhlIElEIG9mIGFuIGVsZW1lbnQgaW4gdGhlIERPTS5cclxuICogY29uc3QgYXBwbGljYXRpb25WZXJpZmllciA9IG5ldyBSZWNhcHRjaGFWZXJpZmllcigncmVjYXB0Y2hhLWNvbnRhaW5lcicpO1xyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcignKzE2NTA1NTUwMTAxJywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAqIC8vIE9idGFpbiB0aGUgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBwaG9uZUNyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBwaG9uZUNyZWRlbnRpYWwpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gYXV0aCAtIFRoZSBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UgaW4gd2hpY2ggc2lnbi1pbnMgc2hvdWxkIG9jY3VyLlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIC8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5QSE9ORS4gKi9cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBQaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcclxuICAgICAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBTdGFydHMgYSBwaG9uZSBudW1iZXIgYXV0aGVudGljYXRpb24gZmxvdyBieSBzZW5kaW5nIGEgdmVyaWZpY2F0aW9uIGNvZGUgdG8gdGhlIGdpdmVuIHBob25lXHJcbiAgICAgKiBudW1iZXIuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwaG9uZUluZm9PcHRpb25zIC0gVGhlIHVzZXIncyB7QGxpbmsgUGhvbmVJbmZvT3B0aW9uc30uIFRoZSBwaG9uZSBudW1iZXIgc2hvdWxkIGJlIGluXHJcbiAgICAgKiBFLjE2NCBmb3JtYXQgKGUuZy4gKzE2NTA1NTUwMTAxKS5cclxuICAgICAqIEBwYXJhbSBhcHBsaWNhdGlvblZlcmlmaWVyIC0gRm9yIGFidXNlIHByZXZlbnRpb24sIHRoaXMgbWV0aG9kIGFsc28gcmVxdWlyZXMgYVxyXG4gICAgICoge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbixcclxuICAgICAqIHtAbGluayBSZWNhcHRjaGFWZXJpZmllcn0uXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgQSBQcm9taXNlIGZvciBhIHZlcmlmaWNhdGlvbiBJRCB0aGF0IGNhbiBiZSBwYXNzZWQgdG9cclxuICAgICAqIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsfSB0byBpZGVudGlmeSB0aGlzIGZsb3cuLlxyXG4gICAgICovXHJcbiAgICB2ZXJpZnlQaG9uZU51bWJlcihwaG9uZU9wdGlvbnMsIGFwcGxpY2F0aW9uVmVyaWZpZXIpIHtcclxuICAgICAgICByZXR1cm4gX3ZlcmlmeVBob25lTnVtYmVyKHRoaXMuYXV0aCwgcGhvbmVPcHRpb25zLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgcGhvbmUgYXV0aCBjcmVkZW50aWFsLCBnaXZlbiB0aGUgdmVyaWZpY2F0aW9uIElEIGZyb21cclxuICAgICAqIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcn0gYW5kIHRoZSBjb2RlIHRoYXQgd2FzIHNlbnQgdG8gdGhlIHVzZXInc1xyXG4gICAgICogbW9iaWxlIGRldmljZS5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogQW4gYWx0ZXJuYXRpdmUgZmxvdyBpcyBwcm92aWRlZCB1c2luZyB0aGUgYHNpZ25JbldpdGhQaG9uZU51bWJlcmAgbWV0aG9kLlxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICAgICAqIC8vIE9idGFpbiB2ZXJpZmljYXRpb25Db2RlIGZyb20gdGhlIHVzZXIuXHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IGNvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtKHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbklkIC0gVGhlIHZlcmlmaWNhdGlvbiBJRCByZXR1cm5lZCBmcm9tIHtAbGluayBQaG9uZUF1dGhQcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcn0uXHJcbiAgICAgKiBAcGFyYW0gdmVyaWZpY2F0aW9uQ29kZSAtIFRoZSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyJ3MgbW9iaWxlIGRldmljZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSkge1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICBjb25zdCBjcmVkZW50aWFsID0gdXNlckNyZWRlbnRpYWw7XHJcbiAgICAgICAgcmV0dXJuIFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gd2hlbiBwYXNzZWQgYW4gZXJyb3IuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB3b3JrcyBmb3IgZXJyb3JzIGxpa2VcclxuICAgICAqIGBhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxzYC4gVGhpcyBpcyB1c2VmdWwgZm9yXHJcbiAgICAgKiByZWNvdmVyaW5nIHdoZW4gYXR0ZW1wdGluZyB0byBzZXQgYSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGJ1dCB0aGUgbnVtYmVyXHJcbiAgICAgKiBpbiBxdWVzdGlvbiBpcyBhbHJlYWR5IHRpZWQgdG8gYW5vdGhlciBhY2NvdW50LiBGb3IgZXhhbXBsZSwgdGhlIGZvbGxvd2luZ1xyXG4gICAgICogY29kZSB0cmllcyB0byB1cGRhdGUgdGhlIGN1cnJlbnQgdXNlcidzIHBob25lIG51bWJlciwgYW5kIGlmIHRoYXRcclxuICAgICAqIGZhaWxzLCBsaW5rcyB0aGUgdXNlciB3aXRoIHRoZSBhY2NvdW50IGFzc29jaWF0ZWQgd2l0aCB0aGF0IG51bWJlcjpcclxuICAgICAqXHJcbiAgICAgKiBgYGBqc1xyXG4gICAgICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAgICAgKiBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IHByb3ZpZGVyLnZlcmlmeVBob25lTnVtYmVyKG51bWJlciwgdmVyaWZpZXIpO1xyXG4gICAgICogdHJ5IHtcclxuICAgICAqICAgY29uc3QgY29kZSA9ICcnOyAvLyBQcm9tcHQgdGhlIHVzZXIgZm9yIHRoZSB2ZXJpZmljYXRpb24gY29kZVxyXG4gICAgICogICBhd2FpdCB1cGRhdGVQaG9uZU51bWJlcihcclxuICAgICAqICAgICAgIGF1dGguY3VycmVudFVzZXIsXHJcbiAgICAgKiAgICAgICBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCBjb2RlKSk7XHJcbiAgICAgKiB9IGNhdGNoIChlKSB7XHJcbiAgICAgKiAgIGlmIChlLmNvZGUgPT09ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnKSB7XHJcbiAgICAgKiAgICAgY29uc3QgY3JlZCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tRXJyb3IoZSk7XHJcbiAgICAgKiAgICAgYXdhaXQgbGlua1dpdGhDcmVkZW50aWFsKGF1dGguY3VycmVudFVzZXIsIGNyZWQpO1xyXG4gICAgICogICB9XHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogLy8gQXQgdGhpcyBwb2ludCwgYXV0aC5jdXJyZW50VXNlci5waG9uZU51bWJlciA9PT0gbnVtYmVyLlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIGVycm9yIHRvIGdlbmVyYXRlIGEgY3JlZGVudGlhbCBmcm9tLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKHBob25lTnVtYmVyICYmIHRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJwaG9uZVwiIC8qIFBIT05FICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5QSE9ORS4gKi9cclxuUGhvbmVBdXRoUHJvdmlkZXIuUEhPTkVfU0lHTl9JTl9NRVRIT0QgPSBcInBob25lXCIgLyogUEhPTkUgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaG9vc2VzIGEgcG9wdXAvcmVkaXJlY3QgcmVzb2x2ZXIgdG8gdXNlLiBUaGlzIHByZWZlcnMgdGhlIG92ZXJyaWRlICh3aGljaFxyXG4gKiBpcyBkaXJlY3RseSBwYXNzZWQgaW4pLCBhbmQgZmFsbHMgYmFjayB0byB0aGUgcHJvcGVydHkgc2V0IG9uIHRoZSBhdXRoXHJcbiAqIG9iamVjdC4gSWYgbmVpdGhlciBhcmUgYXZhaWxhYmxlLCB0aGlzIGZ1bmN0aW9uIGVycm9ycyB3LyBhbiBhcmd1bWVudCBlcnJvci5cclxuICovXHJcbmZ1bmN0aW9uIF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGgsIHJlc29sdmVyT3ZlcnJpZGUpIHtcclxuICAgIGlmIChyZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9nZXRJbnN0YW5jZShyZXNvbHZlck92ZXJyaWRlKTtcclxuICAgIH1cclxuICAgIF9hc3NlcnQoYXV0aC5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGF1dGguX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBJZHBDcmVkZW50aWFsIGV4dGVuZHMgQXV0aENyZWRlbnRpYWwge1xyXG4gICAgY29uc3RydWN0b3IocGFyYW1zKSB7XHJcbiAgICAgICAgc3VwZXIoXCJjdXN0b21cIiAvKiBDVVNUT00gKi8sIFwiY3VzdG9tXCIgLyogQ1VTVE9NICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikpO1xyXG4gICAgfVxyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgX2J1aWxkSWRwUmVxdWVzdChpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdGhpcy5wYXJhbXMucmVxdWVzdFVyaSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnBhcmFtcy5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHBvc3RCb2R5OiB0aGlzLnBhcmFtcy5wb3N0Qm9keSxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMucGFyYW1zLnRlbmFudElkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGFyYW1zLnBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIHJldHVybklkcENyZWRlbnRpYWw6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChpZFRva2VuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9zaWduSW4ocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKHBhcmFtcy5hdXRoLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5mdW5jdGlvbiBfcmVhdXRoKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKHVzZXIsIG5ldyBJZHBDcmVkZW50aWFsKHBhcmFtcyksIHBhcmFtcy5ieXBhc3NBdXRoU3RhdGUpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gX2xpbmskMSh1c2VyLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUG9wdXAgZXZlbnQgbWFuYWdlci4gSGFuZGxlcyB0aGUgcG9wdXAncyBlbnRpcmUgbGlmZWN5Y2xlOyBsaXN0ZW5zIHRvIGF1dGhcclxuICogZXZlbnRzXHJcbiAqL1xyXG5jbGFzcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZmlsdGVyLCByZXNvbHZlciwgdXNlciwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcclxuICAgICAgICB0aGlzLnVzZXIgPSB1c2VyO1xyXG4gICAgICAgIHRoaXMuYnlwYXNzQXV0aFN0YXRlID0gYnlwYXNzQXV0aFN0YXRlO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmZpbHRlciA9IEFycmF5LmlzQXJyYXkoZmlsdGVyKSA/IGZpbHRlciA6IFtmaWx0ZXJdO1xyXG4gICAgfVxyXG4gICAgZXhlY3V0ZSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0geyByZXNvbHZlLCByZWplY3QgfTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyID0gYXdhaXQgdGhpcy5yZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5vbkV4ZWN1dGlvbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIucmVnaXN0ZXJDb25zdW1lcih0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgY29uc3QgeyB1cmxSZXNwb25zZSwgc2Vzc2lvbklkLCBwb3N0Qm9keSwgdGVuYW50SWQsIGVycm9yLCB0eXBlIH0gPSBldmVudDtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgYXV0aDogdGhpcy5hdXRoLFxyXG4gICAgICAgICAgICByZXF1ZXN0VXJpOiB1cmxSZXNwb25zZSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiBzZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0ZW5hbnRJZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHBvc3RCb2R5OiBwb3N0Qm9keSB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHVzZXI6IHRoaXMudXNlcixcclxuICAgICAgICAgICAgYnlwYXNzQXV0aFN0YXRlOiB0aGlzLmJ5cGFzc0F1dGhTdGF0ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKGF3YWl0IHRoaXMuZ2V0SWRwVGFzayh0eXBlKShwYXJhbXMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWplY3QoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgIH1cclxuICAgIGdldElkcFRhc2sodHlwZSkge1xyXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic2lnbkluVmlhUG9wdXBcIiAvKiBTSUdOX0lOX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3NpZ25JbjtcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFQb3B1cFwiIC8qIExJTktfVklBX1BPUFVQICovOlxyXG4gICAgICAgICAgICBjYXNlIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xpbms7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIFJFQVVUSF9WSUFfUE9QVVAgKi86XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX3JlYXV0aDtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIF9mYWlsKHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNvbHZlKGNyZWQpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLnBlbmRpbmdQcm9taXNlLCAnUGVuZGluZyBwcm9taXNlIHdhcyBuZXZlciBzZXQnKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlLnJlc29sdmUoY3JlZCk7XHJcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpO1xyXG4gICAgfVxyXG4gICAgcmVqZWN0KGVycm9yKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXJBbmRDbGVhblVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50TWFuYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlci51bnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2xlYW5VcCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VUID0gbmV3IERlbGF5KDIwMDAsIDEwMDAwKTtcclxuLyoqXHJcbiAqIEF1dGhlbnRpY2F0ZXMgYSBGaXJlYmFzZSBjbGllbnQgdXNpbmcgYSBwb3B1cC1iYXNlZCBPQXV0aCBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBzdWNjZWVkcywgcmV0dXJucyB0aGUgc2lnbmVkIGluIHVzZXIgYWxvbmcgd2l0aCB0aGUgcHJvdmlkZXIncyBjcmVkZW50aWFsLiBJZiBzaWduIGluIHdhc1xyXG4gKiB1bnN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gZXJyb3Igb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbihhdXRoSW50ZXJuYWwsIFwic2lnbkluVmlhUG9wdXBcIiAvKiBTSUdOX0lOX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgcG9wLXVwIGJhc2VkXHJcbiAqIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSByZWF1dGhlbnRpY2F0aW9uIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGVcclxuICogcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gUmVhdXRoZW50aWNhdGUgdXNpbmcgYSBwb3B1cC5cclxuICogYXdhaXQgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIFJFQVVUSF9WSUFfUE9QVVAgKi8sIHByb3ZpZGVyLCByZXNvbHZlckludGVybmFsLCB1c2VySW50ZXJuYWwpO1xyXG4gICAgcmV0dXJuIGFjdGlvbi5leGVjdXRlTm90TnVsbCgpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgYXV0aGVudGljYXRlZCBwcm92aWRlciB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgcG9wLXVwIGJhc2VkIE9BdXRoIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZSBsaW5raW5nIGlzIHN1Y2Nlc3NmdWwsIHRoZSByZXR1cm5lZCByZXN1bHQgd2lsbCBjb250YWluIHRoZSB1c2VyIGFuZCB0aGUgcHJvdmlkZXIncyBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgc29tZSBvdGhlciBwcm92aWRlci5cclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKTtcclxuICogLy8gTGluayB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBhd2FpdCBsaW5rV2l0aFBvcHVwKHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGxpbmtXaXRoUG9wdXAodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbih1c2VySW50ZXJuYWwuYXV0aCwgXCJsaW5rVmlhUG9wdXBcIiAvKiBMSU5LX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKlxyXG4gKi9cclxuY2xhc3MgUG9wdXBPcGVyYXRpb24gZXh0ZW5kcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZmlsdGVyLCBwcm92aWRlciwgcmVzb2x2ZXIsIHVzZXIpIHtcclxuICAgICAgICBzdXBlcihhdXRoLCBmaWx0ZXIsIHJlc29sdmVyLCB1c2VyKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgaWYgKFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbikge1xyXG4gICAgICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24uY2FuY2VsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlTm90TnVsbCgpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICBfYXNzZXJ0KHJlc3VsdCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkV4ZWN1dGlvbigpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLmZpbHRlci5sZW5ndGggPT09IDEsICdQb3B1cCBvcGVyYXRpb25zIG9ubHkgaGFuZGxlIG9uZSBldmVudCcpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKCk7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gYXdhaXQgdGhpcy5yZXNvbHZlci5fb3BlblBvcHVwKHRoaXMuYXV0aCwgdGhpcy5wcm92aWRlciwgdGhpcy5maWx0ZXJbMF0sIC8vIFRoZXJlJ3MgYWx3YXlzIG9uZSwgc2VlIGNvbnN0cnVjdG9yXHJcbiAgICAgICAgZXZlbnRJZCk7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93LmFzc29jaWF0ZWRFdmVudCA9IGV2ZW50SWQ7XHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHdlYiBzdG9yYWdlIHN1cHBvcnQgYW5kIG9yaWdpbiB2YWxpZGF0aW9uIF9hZnRlcl8gdGhlIHBvcHVwIGlzXHJcbiAgICAgICAgLy8gbG9hZGVkLiBUaGVzZSBvcGVyYXRpb25zIGFyZSBzbG93ICh+MSBzZWNvbmQgb3Igc28pIFJhdGhlciB0aGFuXHJcbiAgICAgICAgLy8gd2FpdGluZyBvbiB0aGVtIGJlZm9yZSBvcGVuaW5nIHRoZSB3aW5kb3csIG9wdGltaXN0aWNhbGx5IG9wZW4gdGhlIHBvcHVwXHJcbiAgICAgICAgLy8gYW5kIGNoZWNrIGZvciBzdG9yYWdlIHN1cHBvcnQgYXQgdGhlIHNhbWUgdGltZS4gSWYgc3RvcmFnZSBzdXBwb3J0IGlzXHJcbiAgICAgICAgLy8gbm90IGF2YWlsYWJsZSwgdGhpcyB3aWxsIGNhdXNlIHRoZSB3aG9sZSB0aGluZyB0byByZWplY3QgcHJvcGVybHkuIEl0XHJcbiAgICAgICAgLy8gd2lsbCBhbHNvIGNsb3NlIHRoZSBwb3B1cCwgYnV0IHNpbmNlIHRoZSBwcm9taXNlIGhhcyBhbHJlYWR5IHJlamVjdGVkLFxyXG4gICAgICAgIC8vIHRoZSBwb3B1cCBjbG9zZWQgYnkgdXNlciBwb2xsIHdpbGwgcmVqZWN0IGludG8gdGhlIHZvaWQuXHJcbiAgICAgICAgdGhpcy5yZXNvbHZlci5fb3JpZ2luVmFsaWRhdGlvbih0aGlzLmF1dGgpLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlamVjdChlKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnJlc29sdmVyLl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQodGhpcy5hdXRoLCBpc1N1cHBvcnRlZCA9PiB7XHJcbiAgICAgICAgICAgIGlmICghaXNTdXBwb3J0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwid2ViLXN0b3JhZ2UtdW5zdXBwb3J0ZWRcIiAvKiBXRUJfU1RPUkFHRV9VTlNVUFBPUlRFRCAqLykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSGFuZGxlIHVzZXIgY2xvc3VyZS4gTm90aWNlIHRoaXMgZG9lcyAqbm90KiB1c2UgYXdhaXRcclxuICAgICAgICB0aGlzLnBvbGxVc2VyQ2FuY2VsbGF0aW9uKCk7XHJcbiAgICB9XHJcbiAgICBnZXQgZXZlbnRJZCgpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmF1dGhXaW5kb3cpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hc3NvY2lhdGVkRXZlbnQpIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBjYW5jZWwoKSB7XHJcbiAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEVYUElSRURfUE9QVVBfUkVRVUVTVCAqLykpO1xyXG4gICAgfVxyXG4gICAgY2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRoV2luZG93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFdpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb2xsSWQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnBvbGxJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBwb2xsVXNlckNhbmNlbGxhdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwb2xsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAoKF9iID0gKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud2luZG93KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGVyZSBpcyBzdWZmaWNpZW50IHRpbWUgZm9yIHdoYXRldmVyIGFjdGlvbiB0b1xyXG4gICAgICAgICAgICAgICAgLy8gY29tcGxldGUuIFRoZSB3aW5kb3cgY291bGQgaGF2ZSBjbG9zZWQgYnV0IHRoZSBzaWduIGluIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGwgY291bGQgc3RpbGwgYmUgaW4gZmxpZ2h0LlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIiAvKiBQT1BVUF9DTE9TRURfQllfVVNFUiAqLykpO1xyXG4gICAgICAgICAgICAgICAgfSwgMjAwMCAvKiBBVVRIX0VWRU5UICovKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBvbGxJZCA9IHdpbmRvdy5zZXRUaW1lb3V0KHBvbGwsIF9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VULmdldCgpKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHBvbGwoKTtcclxuICAgIH1cclxufVxyXG4vLyBPbmx5IG9uZSBwb3B1cCBpcyBldmVyIHNob3duIGF0IG9uY2UuIFRoZSBsaWZlY3ljbGUgb2YgdGhlIGN1cnJlbnQgcG9wdXBcclxuLy8gY2FuIGJlIG1hbmFnZWQgLyBjYW5jZWxsZWQgYnkgdGhlIGNvbnN0cnVjdG9yLlxyXG5Qb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24gPSBudWxsO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBQRU5ESU5HX1JFRElSRUNUX0tFWSA9ICdwZW5kaW5nUmVkaXJlY3QnO1xyXG4vLyBXZSBvbmx5IGdldCBvbmUgcmVkaXJlY3Qgb3V0Y29tZSBmb3IgYW55IG9uZSBhdXRoLCBzbyBqdXN0IHN0b3JlIGl0XHJcbi8vIGluIGhlcmUuXHJcbmNvbnN0IHJlZGlyZWN0T3V0Y29tZU1hcCA9IG5ldyBNYXAoKTtcclxuY2xhc3MgUmVkaXJlY3RBY3Rpb24gZXh0ZW5kcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgcmVzb2x2ZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgc3VwZXIoYXV0aCwgW1xyXG4gICAgICAgICAgICBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogTElOS19WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBSRUFVVEhfVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcInVua25vd25cIiAvKiBVTktOT1dOICovXHJcbiAgICAgICAgXSwgcmVzb2x2ZXIsIHVuZGVmaW5lZCwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgICAgICB0aGlzLmV2ZW50SWQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdmVycmlkZSB0aGUgZXhlY3V0ZSBmdW5jdGlvbjsgaWYgd2UgYWxyZWFkeSBoYXZlIGEgcmVkaXJlY3QgcmVzdWx0LCB0aGVuXHJcbiAgICAgKiBqdXN0IHJldHVybiBpdC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZXhlY3V0ZSgpIHtcclxuICAgICAgICBsZXQgcmVhZHlPdXRjb21lID0gcmVkaXJlY3RPdXRjb21lTWFwLmdldCh0aGlzLmF1dGguX2tleSgpKTtcclxuICAgICAgICBpZiAoIXJlYWR5T3V0Y29tZSkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGFzUGVuZGluZ1JlZGlyZWN0ID0gYXdhaXQgX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzKHRoaXMucmVzb2x2ZXIsIHRoaXMuYXV0aCk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBoYXNQZW5kaW5nUmVkaXJlY3QgPyBhd2FpdCBzdXBlci5leGVjdXRlKCkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgcmVhZHlPdXRjb21lID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgcmVhZHlPdXRjb21lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UncmUgbm90IGJ5cGFzc2luZyBhdXRoIHN0YXRlLCB0aGUgcmVhZHkgb3V0Y29tZSBzaG91bGQgYmUgc2V0IHRvXHJcbiAgICAgICAgLy8gbnVsbC5cclxuICAgICAgICBpZiAoIXRoaXMuYnlwYXNzQXV0aFN0YXRlKSB7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5zZXQodGhpcy5hdXRoLl9rZXkoKSwgKCkgPT4gUHJvbWlzZS5yZXNvbHZlKG51bGwpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlYWR5T3V0Y29tZSgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgb25BdXRoRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIFNJR05fSU5fVklBX1JFRElSRUNUICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IFwidW5rbm93blwiIC8qIFVOS05PV04gKi8pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBpcyBhIHNlbnRpbmVsIHZhbHVlIGluZGljYXRpbmcgdGhlcmUncyBubyBwZW5kaW5nIHJlZGlyZWN0XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShudWxsKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXZlbnQuZXZlbnRJZCkge1xyXG4gICAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hdXRoLl9yZWRpcmVjdFVzZXJGb3JJZChldmVudC5ldmVudElkKTtcclxuICAgICAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc3VwZXIub25BdXRoRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgb25FeGVjdXRpb24oKSB7IH1cclxuICAgIGNsZWFuVXAoKSB7IH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiBfZ2V0QW5kQ2xlYXJQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXIsIGF1dGgpIHtcclxuICAgIGNvbnN0IGtleSA9IHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKTtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcik7XHJcbiAgICBpZiAoIShhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBoYXNQZW5kaW5nUmVkaXJlY3QgPSAoYXdhaXQgcGVyc2lzdGVuY2UuX2dldChrZXkpKSA9PT0gJ3RydWUnO1xyXG4gICAgYXdhaXQgcGVyc2lzdGVuY2UuX3JlbW92ZShrZXkpO1xyXG4gICAgcmV0dXJuIGhhc1BlbmRpbmdSZWRpcmVjdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVyLCBhdXRoKSB7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJQZXJzaXN0ZW5jZShyZXNvbHZlcikuX3NldChwZW5kaW5nUmVkaXJlY3RLZXkoYXV0aCksICd0cnVlJyk7XHJcbn1cclxuZnVuY3Rpb24gX2NsZWFyUmVkaXJlY3RPdXRjb21lcygpIHtcclxuICAgIHJlZGlyZWN0T3V0Y29tZU1hcC5jbGVhcigpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKSB7XHJcbiAgICByZXR1cm4gX3BlcnNpc3RlbmNlS2V5TmFtZShQRU5ESU5HX1JFRElSRUNUX0tFWSwgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGhhbmRsZSB0aGUgcmVzdWx0cyBhbmQgZXJyb3JzIGZvciB0aGlzIG9wZXJhdGlvbiwgcmVmZXIgdG8ge0BsaW5rIGdldFJlZGlyZWN0UmVzdWx0fS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgc2NvcGVzIHRvIHRoZSBwcm92aWRlcjpcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiAvLyBBcyB0aGlzIEFQSSBjYW4gYmUgdXNlZCBmb3Igc2lnbi1pbiwgbGlua2luZyBhbmQgcmVhdXRoZW50aWNhdGlvbixcclxuICogLy8gY2hlY2sgdGhlIG9wZXJhdGlvblR5cGUgdG8gZGV0ZXJtaW5lIHdoYXQgdHJpZ2dlcmVkIHRoaXMgcmVkaXJlY3RcclxuICogLy8gb3BlcmF0aW9uLlxyXG4gKiBjb25zdCBvcGVyYXRpb25UeXBlID0gcmVzdWx0Lm9wZXJhdGlvblR5cGU7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIGF1dGhJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KGF1dGhJbnRlcm5hbCwgcHJvdmlkZXIsIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBTSUdOX0lOX1ZJQV9SRURJUkVDVCAqLyk7XHJcbn1cclxuLyoqXHJcbiAqIFJlYXV0aGVudGljYXRlcyB0aGUgY3VycmVudCB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCB7QGxpbmsgT0F1dGhQcm92aWRlcn0gdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIGFnYWluIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIC8vIEFsbG93IHRoZSByZXNvbHZlciB0byBlcnJvciBiZWZvcmUgcGVyc2lzdGluZyB0aGUgcmVkaXJlY3QgdXNlclxyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbC5hdXRoKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHRvIHRoZSB1c2VyIGFjY291bnQgdXNpbmcgYSBmdWxsLXBhZ2UgcmVkaXJlY3QgZmxvdy5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhSZWRpcmVjdChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9saW5rV2l0aFJlZGlyZWN0KHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgLy8gQWxsb3cgdGhlIHJlc29sdmVyIHRvIGVycm9yIGJlZm9yZSBwZXJzaXN0aW5nIHRoZSByZWRpcmVjdCB1c2VyXHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9hc3NlcnRMaW5rZWRTdGF0dXMoZmFsc2UsIHVzZXJJbnRlcm5hbCwgcHJvdmlkZXIucHJvdmlkZXJJZCk7XHJcbiAgICBhd2FpdCBfc2V0UGVuZGluZ1JlZGlyZWN0U3RhdHVzKHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbC5hdXRoKTtcclxuICAgIGNvbnN0IGV2ZW50SWQgPSBhd2FpdCBwcmVwYXJlVXNlckZvclJlZGlyZWN0KHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gcmVzb2x2ZXJJbnRlcm5hbC5fb3BlblJlZGlyZWN0KHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgXCJsaW5rVmlhUmVkaXJlY3RcIiAvKiBMSU5LX1ZJQV9SRURJUkVDVCAqLywgZXZlbnRJZCk7XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybnMgYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGZyb20gdGhlIHJlZGlyZWN0LWJhc2VkIHNpZ24taW4gZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgc2lnbi1pbiBzdWNjZWVkZWQsIHJldHVybnMgdGhlIHNpZ25lZCBpbiB1c2VyLiBJZiBzaWduLWluIHdhcyB1bnN1Y2Nlc3NmdWwsIGZhaWxzIHdpdGggYW5cclxuICogZXJyb3IuIElmIG5vIHJlZGlyZWN0IG9wZXJhdGlvbiB3YXMgY2FsbGVkLCByZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfVxyXG4gKiB3aXRoIGEgbnVsbCBgdXNlcmAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIpIHtcclxuICAgIGF3YWl0IF9jYXN0QXV0aChhdXRoKS5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlciwgZmFsc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlckV4dGVybiwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc29sdmVyID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUmVkaXJlY3RBY3Rpb24oYXV0aEludGVybmFsLCByZXNvbHZlciwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICBpZiAocmVzdWx0ICYmICFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBkZWxldGUgcmVzdWx0LnVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3BlcnNpc3RVc2VySWZDdXJyZW50KHJlc3VsdC51c2VyKTtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3NldFJlZGlyZWN0VXNlcihudWxsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlcikge1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoYCR7dXNlci51aWR9Ojo6YCk7XHJcbiAgICB1c2VyLl9yZWRpcmVjdEV2ZW50SWQgPSBldmVudElkO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9zZXRSZWRpcmVjdFVzZXIodXNlcik7XHJcbiAgICBhd2FpdCB1c2VyLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpO1xyXG4gICAgcmV0dXJuIGV2ZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIGFtb3VudCBvZiB0aW1lIHRvIHN0b3JlIHRoZSBVSURzIG9mIHNlZW4gZXZlbnRzOyB0aGlzIGlzXHJcbi8vIHNldCB0byAxMCBtaW4gYnkgZGVmYXVsdFxyXG5jb25zdCBFVkVOVF9EVVBMSUNBVElPTl9DQUNIRV9EVVJBVElPTl9NUyA9IDEwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJDb25zdW1lcihhdXRoRXZlbnRDb25zdW1lcikge1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmFkZChhdXRoRXZlbnRDb25zdW1lcik7XHJcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzRXZlbnRGb3JDb25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCwgYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5kZWxldGUoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgfVxyXG4gICAgb25FdmVudChldmVudCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWRcclxuICAgICAgICBpZiAodGhpcy5oYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBoYW5kbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZm9yRWFjaChjb25zdW1lciA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUV2ZW50VG9DYWNoZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgfHwgIWlzUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBzZWVuIGEgcmVkaXJlY3QgYmVmb3JlLCBvciB0aGlzIGlzIGEgcG9wdXAgZXZlbnQsXHJcbiAgICAgICAgICAgIC8vIGJhaWwgbm93XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCA9IHRydWU7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHdhc24ndCBoYW5kbGVkLCBoYW5nIG9uIHRvIGl0XHJcbiAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICB9XHJcbiAgICBzZW5kVG9Db25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKGV2ZW50LmVycm9yICYmICFpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gKChfYSA9IGV2ZW50LmVycm9yLmNvZGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGxpdCgnYXV0aC8nKVsxXSkgfHxcclxuICAgICAgICAgICAgICAgIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBJTlRFUk5BTF9FUlJPUiAqLztcclxuICAgICAgICAgICAgY29uc3VtZXIub25FcnJvcihfY3JlYXRlRXJyb3IodGhpcy5hdXRoLCBjb2RlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdW1lci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaXNFdmVudEZvckNvbnN1bWVyKGV2ZW50LCBjb25zdW1lcikge1xyXG4gICAgICAgIGNvbnN0IGV2ZW50SWRNYXRjaGVzID0gY29uc3VtZXIuZXZlbnRJZCA9PT0gbnVsbCB8fFxyXG4gICAgICAgICAgICAoISFldmVudC5ldmVudElkICYmIGV2ZW50LmV2ZW50SWQgPT09IGNvbnN1bWVyLmV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBjb25zdW1lci5maWx0ZXIuaW5jbHVkZXMoZXZlbnQudHlwZSkgJiYgZXZlbnRJZE1hdGNoZXM7XHJcbiAgICB9XHJcbiAgICBoYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKERhdGUubm93KCkgLSB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPj1cclxuICAgICAgICAgICAgRVZFTlRfRFVQTElDQVRJT05fQ0FDSEVfRFVSQVRJT05fTVMpIHtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMuY2xlYXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmhhcyhldmVudFVpZChldmVudCkpO1xyXG4gICAgfVxyXG4gICAgc2F2ZUV2ZW50VG9DYWNoZShldmVudCkge1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzLmFkZChldmVudFVpZChldmVudCkpO1xyXG4gICAgICAgIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA9IERhdGUubm93KCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXZlbnRVaWQoZSkge1xyXG4gICAgcmV0dXJuIFtlLnR5cGUsIGUuZXZlbnRJZCwgZS5zZXNzaW9uSWQsIGUudGVuYW50SWRdLmZpbHRlcih2ID0+IHYpLmpvaW4oJy0nKTtcclxufVxyXG5mdW5jdGlvbiBpc051bGxSZWRpcmVjdEV2ZW50KHsgdHlwZSwgZXJyb3IgfSkge1xyXG4gICAgcmV0dXJuICh0eXBlID09PSBcInVua25vd25cIiAvKiBVTktOT1dOICovICYmXHJcbiAgICAgICAgKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5jb2RlKSA9PT0gYGF1dGgvJHtcIm5vLWF1dGgtZXZlbnRcIiAvKiBOT19BVVRIX0VWRU5UICovfWApO1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVkaXJlY3RFdmVudChldmVudCkge1xyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIExJTktfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgIGNhc2UgXCJyZWF1dGhWaWFSZWRpcmVjdFwiIC8qIFJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgXCJ1bmtub3duXCIgLyogVU5LTk9XTiAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIGlzTnVsbFJlZGlyZWN0RXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UHJvamVjdENvbmZpZyhhdXRoLCByZXF1ZXN0ID0ge30pIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBHRVQgKi8sIFwiL3YxL3Byb2plY3RzXCIgLyogR0VUX1BST0pFQ1RfQ09ORklHICovLCByZXF1ZXN0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBJUF9BRERSRVNTX1JFR0VYID0gL15cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM31cXC5cXGR7MSwzfSQvO1xyXG5jb25zdCBIVFRQX1JFR0VYID0gL15odHRwcz8vO1xyXG5hc3luYyBmdW5jdGlvbiBfdmFsaWRhdGVPcmlnaW4oYXV0aCkge1xyXG4gICAgLy8gU2tpcCBvcmlnaW4gdmFsaWRhdGlvbiBpZiB3ZSBhcmUgaW4gYW4gZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICAgIGlmIChhdXRoLmNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgYXV0aG9yaXplZERvbWFpbnMgfSA9IGF3YWl0IF9nZXRQcm9qZWN0Q29uZmlnKGF1dGgpO1xyXG4gICAgZm9yIChjb25zdCBkb21haW4gb2YgYXV0aG9yaXplZERvbWFpbnMpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hEb21haW4oZG9tYWluKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAvLyBEbyBub3RoaW5nIGlmIHRoZXJlJ3MgYSBVUkwgZXJyb3I7IGp1c3QgY29udGludWUgc2VhcmNoaW5nXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gSW4gdGhlIG9sZCBTREssIHRoaXMgZXJyb3IgYWxzbyBwcm92aWRlcyBoZWxwZnVsIG1lc3NhZ2VzLlxyXG4gICAgX2ZhaWwoYXV0aCwgXCJ1bmF1dGhvcml6ZWQtZG9tYWluXCIgLyogSU5WQUxJRF9PUklHSU4gKi8pO1xyXG59XHJcbmZ1bmN0aW9uIG1hdGNoRG9tYWluKGV4cGVjdGVkKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXJsID0gX2dldEN1cnJlbnRVcmwoKTtcclxuICAgIGNvbnN0IHsgcHJvdG9jb2wsIGhvc3RuYW1lIH0gPSBuZXcgVVJMKGN1cnJlbnRVcmwpO1xyXG4gICAgaWYgKGV4cGVjdGVkLnN0YXJ0c1dpdGgoJ2Nocm9tZS1leHRlbnNpb246Ly8nKSkge1xyXG4gICAgICAgIGNvbnN0IGNlVXJsID0gbmV3IFVSTChleHBlY3RlZCk7XHJcbiAgICAgICAgaWYgKGNlVXJsLmhvc3RuYW1lID09PSAnJyAmJiBob3N0bmFtZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHdlJ3JlIG5vdCBwYXJzaW5nIGNocm9tZSBVUkxzIHByb3Blcmx5XHJcbiAgICAgICAgICAgIHJldHVybiAocHJvdG9jb2wgPT09ICdjaHJvbWUtZXh0ZW5zaW9uOicgJiZcclxuICAgICAgICAgICAgICAgIGV4cGVjdGVkLnJlcGxhY2UoJ2Nocm9tZS1leHRlbnNpb246Ly8nLCAnJykgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVybC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmIGNlVXJsLmhvc3RuYW1lID09PSBob3N0bmFtZTtcclxuICAgIH1cclxuICAgIGlmICghSFRUUF9SRUdFWC50ZXN0KHByb3RvY29sKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChJUF9BRERSRVNTX1JFR0VYLnRlc3QoZXhwZWN0ZWQpKSB7XHJcbiAgICAgICAgLy8gVGhlIGRvbWFpbiBoYXMgdG8gYmUgZXhhY3RseSBlcXVhbCB0byB0aGUgcGF0dGVybiwgYXMgYW4gSVAgZG9tYWluIHdpbGxcclxuICAgICAgICAvLyBvbmx5IGNvbnRhaW4gdGhlIElQLCBubyBleHRyYSBjaGFyYWN0ZXIuXHJcbiAgICAgICAgcmV0dXJuIGhvc3RuYW1lID09PSBleHBlY3RlZDtcclxuICAgIH1cclxuICAgIC8vIERvdHMgaW4gcGF0dGVybiBzaG91bGQgYmUgZXNjYXBlZC5cclxuICAgIGNvbnN0IGVzY2FwZWREb21haW5QYXR0ZXJuID0gZXhwZWN0ZWQucmVwbGFjZSgvXFwuL2csICdcXFxcLicpO1xyXG4gICAgLy8gTm9uIGlwIGFkZHJlc3MgZG9tYWlucy5cclxuICAgIC8vIGRvbWFpbi5jb20gPSAqLmRvbWFpbi5jb20gT1IgZG9tYWluLmNvbVxyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKCdeKC4rXFxcXC4nICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnfCcgKyBlc2NhcGVkRG9tYWluUGF0dGVybiArICcpJCcsICdpJyk7XHJcbiAgICByZXR1cm4gcmUudGVzdChob3N0bmFtZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVCA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG4vKipcclxuICogUmVzZXQgdW5sYW9kZWQgR0FwaSBtb2R1bGVzLiBJZiBnYXBpLmxvYWQgZmFpbHMgZHVlIHRvIGEgbmV0d29yayBlcnJvcixcclxuICogaXQgd2lsbCBzdG9wIHdvcmtpbmcgYWZ0ZXIgYSByZXRyaWFsLiBUaGlzIGlzIGEgaGFjayB0byBmaXggdGhpcyBpc3N1ZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpIHtcclxuICAgIC8vIENsZWFyIGxhc3QgZmFpbGVkIGdhcGkubG9hZCBzdGF0ZSB0byBmb3JjZSBuZXh0IGdhcGkubG9hZCB0byBmaXJzdFxyXG4gICAgLy8gbG9hZCB0aGUgZmFpbGVkIGdhcGkuaWZyYW1lcyBtb2R1bGUuXHJcbiAgICAvLyBHZXQgZ2FwaXguYmVhY29uIGNvbnRleHQuXHJcbiAgICBjb25zdCBiZWFjb24gPSBfd2luZG93KCkuX19fanNsO1xyXG4gICAgLy8gR2V0IGN1cnJlbnQgaGludC5cclxuICAgIGlmIChiZWFjb24gPT09IG51bGwgfHwgYmVhY29uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWFjb24uSCkge1xyXG4gICAgICAgIC8vIEdldCBnYXBpIGhpbnQuXHJcbiAgICAgICAgZm9yIChjb25zdCBoaW50IG9mIE9iamVjdC5rZXlzKGJlYWNvbi5IKSkge1xyXG4gICAgICAgICAgICAvLyBSZXF1ZXN0ZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uciA9IGJlYWNvbi5IW2hpbnRdLnIgfHwgW107XHJcbiAgICAgICAgICAgIC8vIExvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5MID0gYmVhY29uLkhbaGludF0uTCB8fCBbXTtcclxuICAgICAgICAgICAgLy8gU2V0IHJlcXVlc3RlZCBtb2R1bGVzIHRvIGEgY29weSBvZiB0aGUgbG9hZGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBbLi4uYmVhY29uLkhbaGludF0uTF07XHJcbiAgICAgICAgICAgIC8vIENsZWFyIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICBpZiAoYmVhY29uLkNQKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJlYWNvbi5DUC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgZmFpbGVkIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICAgICAgICAgIGJlYWNvbi5DUFtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbG9hZEdhcGkoYXV0aCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYztcclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBydW4gd2hlbiBnYXBpLmxvYWQgaXMgcmVhZHkuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZEdhcGlJZnJhbWUoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkZXZlbG9wZXIgbWF5IGhhdmUgdHJpZWQgdG8gcHJldmlvdXNseSBydW4gZ2FwaS5sb2FkIGFuZCBmYWlsZWQuXHJcbiAgICAgICAgICAgIC8vIFJ1biB0aGlzIHRvIGZpeCB0aGF0LlxyXG4gICAgICAgICAgICByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKTtcclxuICAgICAgICAgICAgZ2FwaS5sb2FkKCdnYXBpLmlmcmFtZXMnLCB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2FwaS5pZnJhbWVzLmdldENvbnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb250aW1lb3V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFib3ZlIHJlc2V0IG1heSBiZSBzdWZmaWNpZW50LCBidXQgaGF2aW5nIHRoaXMgcmVzZXQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsdXJlIGVuc3VyZXMgdGhhdCBpZiB0aGUgZGV2ZWxvcGVyIGNhbGxzIGdhcGkubG9hZCBhZnRlciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIHJlLWVzdGFibGlzaGVkIGFuZCBiZWZvcmUgYW5vdGhlciBhdHRlbXB0IHRvIGVtYmVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGlmcmFtZSwgaXQgd291bGQgd29yayBhbmQgd291bGQgbm90IGJlIGJyb2tlbiBiZWNhdXNlIG9mIG91clxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWxlZCBhdHRlbXB0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgd2hlbiBnYXBpLmlmcmFtZXMuSWZyYW1lIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgdGltZW91dDogTkVUV09SS19USU1FT1VULmdldCgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKF9iID0gKF9hID0gX3dpbmRvdygpLmdhcGkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pZnJhbWVzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuSWZyYW1lKSB7XHJcbiAgICAgICAgICAgIC8vIElmIGdhcGkuaWZyYW1lcy5JZnJhbWUgYXZhaWxhYmxlLCByZXNvbHZlLlxyXG4gICAgICAgICAgICByZXNvbHZlKGdhcGkuaWZyYW1lcy5nZXRDb250ZXh0KCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICghISgoX2MgPSBfd2luZG93KCkuZ2FwaSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLmxvYWQpKSB7XHJcbiAgICAgICAgICAgIC8vIEdhcGkgbG9hZGVyIHJlYWR5LCBsb2FkIGdhcGkuaWZyYW1lcy5cclxuICAgICAgICAgICAgbG9hZEdhcGlJZnJhbWUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyBpZnJhbWUgY2FsbGJhY2sgd2hlbiB0aGlzIGlzIGNhbGxlZCBzbyBhcyBub3QgdG8gb3ZlcndyaXRlXHJcbiAgICAgICAgICAgIC8vIGFueSBwcmV2aW91cyBkZWZpbmVkIGNhbGxiYWNrLiBUaGlzIGhhcHBlbnMgaWYgdGhpcyBtZXRob2QgaXMgY2FsbGVkXHJcbiAgICAgICAgICAgIC8vIG11bHRpcGxlIHRpbWVzIGluIHBhcmFsbGVsIGFuZCBjb3VsZCByZXN1bHQgaW4gdGhlIGxhdGVyIGNhbGxiYWNrXHJcbiAgICAgICAgICAgIC8vIG92ZXJ3cml0aW5nIHRoZSBwcmV2aW91cyBvbmUuIFRoaXMgd291bGQgZW5kIHVwIHdpdGggYSBpZnJhbWVcclxuICAgICAgICAgICAgLy8gdGltZW91dC5cclxuICAgICAgICAgICAgY29uc3QgY2JOYW1lID0gX2dlbmVyYXRlQ2FsbGJhY2tOYW1lKCdpZnJhbWVmY2InKTtcclxuICAgICAgICAgICAgLy8gR0FwaSBsb2FkZXIgbm90IGF2YWlsYWJsZSwgZHluYW1pY2FsbHkgbG9hZCBwbGF0Zm9ybS5qcy5cclxuICAgICAgICAgICAgX3dpbmRvdygpW2NiTmFtZV0gPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBHQXBpIGxvYWRlciBzaG91bGQgYmUgcmVhZHkuXHJcbiAgICAgICAgICAgICAgICBpZiAoISFnYXBpLmxvYWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsb2FkR2FwaUlmcmFtZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2FwaSBsb2FkZXIgZmFpbGVkLCB0aHJvdyBlcnJvci5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gTG9hZCBHQXBpIGxvYWRlci5cclxuICAgICAgICAgICAgcmV0dXJuIF9sb2FkSlMoYGh0dHBzOi8vYXBpcy5nb29nbGUuY29tL2pzL2FwaS5qcz9vbmxvYWQ9JHtjYk5hbWV9YCkuY2F0Y2goZSA9PiByZWplY3QoZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAvLyBSZXNldCBjYWNoZWQgcHJvbWlzZSB0byBhbGxvdyBmb3IgcmV0cmlhbC5cclxuICAgICAgICBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG59XHJcbmxldCBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuZnVuY3Rpb24gX2xvYWRHYXBpKGF1dGgpIHtcclxuICAgIGNhY2hlZEdBcGlMb2FkZXIgPSBjYWNoZWRHQXBpTG9hZGVyIHx8IGxvYWRHYXBpKGF1dGgpO1xyXG4gICAgcmV0dXJuIGNhY2hlZEdBcGlMb2FkZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBJTkdfVElNRU9VVCA9IG5ldyBEZWxheSg1MDAwLCAxNTAwMCk7XHJcbmNvbnN0IElGUkFNRV9QQVRIID0gJ19fL2F1dGgvaWZyYW1lJztcclxuY29uc3QgRU1VTEFURURfSUZSQU1FX1BBVEggPSAnZW11bGF0b3IvYXV0aC9pZnJhbWUnO1xyXG5jb25zdCBJRlJBTUVfQVRUUklCVVRFUyA9IHtcclxuICAgIHN0eWxlOiB7XHJcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgdG9wOiAnLTEwMHB4JyxcclxuICAgICAgICB3aWR0aDogJzFweCcsXHJcbiAgICAgICAgaGVpZ2h0OiAnMXB4J1xyXG4gICAgfSxcclxuICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcclxuICAgIHRhYmluZGV4OiAnLTEnXHJcbn07XHJcbi8vIE1hcCBmcm9tIGFwaUhvc3QgdG8gZW5kcG9pbnQgSUQgZm9yIHBhc3NpbmcgaW50byBpZnJhbWUuIEluIGN1cnJlbnQgU0RLLCBhcGlIb3N0IGNhbiBiZSBzZXQgdG9cclxuLy8gYW55dGhpbmcgKG5vdCBmcm9tIGEgbGlzdCBvZiBlbmRwb2ludHMgd2l0aCBJRHMgYXMgaW4gbGVnYWN5KSwgc28gdGhpcyBpcyB0aGUgY2xvc2VzdCB3ZSBjYW4gZ2V0LlxyXG5jb25zdCBFSURfRlJPTV9BUElIT1NUID0gbmV3IE1hcChbXHJcbiAgICBbXCJpZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb21cIiAvKiBBUElfSE9TVCAqLywgJ3AnXSxcclxuICAgIFsnc3RhZ2luZy1pZGVudGl0eXRvb2xraXQuc2FuZGJveC5nb29nbGVhcGlzLmNvbScsICdzJ10sXHJcbiAgICBbJ3Rlc3QtaWRlbnRpdHl0b29sa2l0LnNhbmRib3guZ29vZ2xlYXBpcy5jb20nLCAndCddIC8vIHRlc3RcclxuXSk7XHJcbmZ1bmN0aW9uIGdldElmcmFtZVVybChhdXRoKSB7XHJcbiAgICBjb25zdCBjb25maWcgPSBhdXRoLmNvbmZpZztcclxuICAgIF9hc3NlcnQoY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBjb25zdCB1cmwgPSBjb25maWcuZW11bGF0b3JcclxuICAgICAgICA/IF9lbXVsYXRvclVybChjb25maWcsIEVNVUxBVEVEX0lGUkFNRV9QQVRIKVxyXG4gICAgICAgIDogYGh0dHBzOi8vJHthdXRoLmNvbmZpZy5hdXRoRG9tYWlufS8ke0lGUkFNRV9QQVRIfWA7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgYXBpS2V5OiBjb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTlxyXG4gICAgfTtcclxuICAgIGNvbnN0IGVpZCA9IEVJRF9GUk9NX0FQSUhPU1QuZ2V0KGF1dGguY29uZmlnLmFwaUhvc3QpO1xyXG4gICAgaWYgKGVpZCkge1xyXG4gICAgICAgIHBhcmFtcy5laWQgPSBlaWQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCBmcmFtZXdvcmtzID0gYXV0aC5fZ2V0RnJhbWV3b3JrcygpO1xyXG4gICAgaWYgKGZyYW1ld29ya3MubGVuZ3RoKSB7XHJcbiAgICAgICAgcGFyYW1zLmZ3ID0gZnJhbWV3b3Jrcy5qb2luKCcsJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYCR7dXJsfT8ke3F1ZXJ5c3RyaW5nKHBhcmFtcykuc2xpY2UoMSl9YDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfb3BlbklmcmFtZShhdXRoKSB7XHJcbiAgICBjb25zdCBjb250ZXh0ID0gYXdhaXQgX2xvYWRHYXBpKGF1dGgpO1xyXG4gICAgY29uc3QgZ2FwaSA9IF93aW5kb3coKS5nYXBpO1xyXG4gICAgX2Fzc2VydChnYXBpLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGNvbnRleHQub3Blbih7XHJcbiAgICAgICAgd2hlcmU6IGRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgdXJsOiBnZXRJZnJhbWVVcmwoYXV0aCksXHJcbiAgICAgICAgbWVzc2FnZUhhbmRsZXJzRmlsdGVyOiBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IElGUkFNRV9BVFRSSUJVVEVTLFxyXG4gICAgICAgIGRvbnRjbGVhcjogdHJ1ZVxyXG4gICAgfSwgKGlmcmFtZSkgPT4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IGlmcmFtZS5yZXN0eWxlKHtcclxuICAgICAgICAgICAgLy8gUHJldmVudCBpZnJhbWUgZnJvbSBjbG9zaW5nIG9uIG1vdXNlIG91dC5cclxuICAgICAgICAgICAgc2V0SGlkZU9uTGVhdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIE5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pO1xyXG4gICAgICAgIC8vIENvbmZpcm0gaWZyYW1lIGlzIGNvcnJlY3RseSBsb2FkZWQuXHJcbiAgICAgICAgLy8gVG8gZmFsbGJhY2sgb24gZmFpbHVyZSwgc2V0IGEgdGltZW91dC5cclxuICAgICAgICBjb25zdCBuZXR3b3JrRXJyb3JUaW1lciA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSwgUElOR19USU1FT1VULmdldCgpKTtcclxuICAgICAgICAvLyBDbGVhciB0aW1lciBhbmQgcmVzb2x2ZSBwZW5kaW5nIGlmcmFtZSByZWFkeSBwcm9taXNlLlxyXG4gICAgICAgIGZ1bmN0aW9uIGNsZWFyVGltZXJBbmRSZXNvbHZlKCkge1xyXG4gICAgICAgICAgICBfd2luZG93KCkuY2xlYXJUaW1lb3V0KG5ldHdvcmtFcnJvclRpbWVyKTtcclxuICAgICAgICAgICAgcmVzb2x2ZShpZnJhbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUaGlzIHJldHVybnMgYW4gSVRoZW5hYmxlLiBIb3dldmVyIHRoZSByZWplY3QgcGFydCBkb2VzIG5vdCBjYWxsXHJcbiAgICAgICAgLy8gd2hlbiB0aGUgaWZyYW1lIGlzIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgaWZyYW1lLnBpbmcoY2xlYXJUaW1lckFuZFJlc29sdmUpLnRoZW4oY2xlYXJUaW1lckFuZFJlc29sdmUsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KG5ldHdvcmtFcnJvcik7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEJBU0VfUE9QVVBfT1BUSU9OUyA9IHtcclxuICAgIGxvY2F0aW9uOiAneWVzJyxcclxuICAgIHJlc2l6YWJsZTogJ3llcycsXHJcbiAgICBzdGF0dXNiYXI6ICd5ZXMnLFxyXG4gICAgdG9vbGJhcjogJ25vJ1xyXG59O1xyXG5jb25zdCBERUZBVUxUX1dJRFRIID0gNTAwO1xyXG5jb25zdCBERUZBVUxUX0hFSUdIVCA9IDYwMDtcclxuY29uc3QgVEFSR0VUX0JMQU5LID0gJ19ibGFuayc7XHJcbmNvbnN0IEZJUkVGT1hfRU1QVFlfVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG5jbGFzcyBBdXRoUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3Iod2luZG93KSB7XHJcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgdGhpcy5hc3NvY2lhdGVkRXZlbnQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMud2luZG93KSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gX29wZW4oYXV0aCwgdXJsLCBuYW1lLCB3aWR0aCA9IERFRkFVTFRfV0lEVEgsIGhlaWdodCA9IERFRkFVTFRfSEVJR0hUKSB7XHJcbiAgICBjb25zdCB0b3AgPSBNYXRoLm1heCgod2luZG93LnNjcmVlbi5hdmFpbEhlaWdodCAtIGhlaWdodCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgY29uc3QgbGVmdCA9IE1hdGgubWF4KCh3aW5kb3cuc2NyZWVuLmF2YWlsV2lkdGggLSB3aWR0aCkgLyAyLCAwKS50b1N0cmluZygpO1xyXG4gICAgbGV0IHRhcmdldCA9ICcnO1xyXG4gICAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgQkFTRV9QT1BVUF9PUFRJT05TKSwgeyB3aWR0aDogd2lkdGgudG9TdHJpbmcoKSwgaGVpZ2h0OiBoZWlnaHQudG9TdHJpbmcoKSwgdG9wLFxyXG4gICAgICAgIGxlZnQgfSk7XHJcbiAgICAvLyBDaHJvbWUgaU9TIDcgYW5kIDggaXMgcmV0dXJuaW5nIGFuIHVuZGVmaW5lZCBwb3B1cCB3aW4gd2hlbiB0YXJnZXQgaXNcclxuICAgIC8vIHNwZWNpZmllZCwgZXZlbiB0aG91Z2ggdGhlIHBvcHVwIGlzIG5vdCBuZWNlc3NhcmlseSBibG9ja2VkLlxyXG4gICAgY29uc3QgdWEgPSBnZXRVQSgpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAobmFtZSkge1xyXG4gICAgICAgIHRhcmdldCA9IF9pc0Nocm9tZUlPUyh1YSkgPyBUQVJHRVRfQkxBTksgOiBuYW1lO1xyXG4gICAgfVxyXG4gICAgaWYgKF9pc0ZpcmVmb3godWEpKSB7XHJcbiAgICAgICAgLy8gRmlyZWZveCBjb21wbGFpbnMgd2hlbiBpbnZhbGlkIFVSTHMgYXJlIHBvcHBlZCBvdXQuIEhhY2t5IHdheSB0byBieXBhc3MuXHJcbiAgICAgICAgdXJsID0gdXJsIHx8IEZJUkVGT1hfRU1QVFlfVVJMO1xyXG4gICAgICAgIC8vIEZpcmVmb3ggZGlzYWJsZXMgYnkgZGVmYXVsdCBzY3JvbGxpbmcgb24gcG9wdXAgd2luZG93cywgd2hpY2ggY2FuIGNyZWF0ZVxyXG4gICAgICAgIC8vIGlzc3VlcyB3aGVuIHRoZSB1c2VyIGhhcyBtYW55IEdvb2dsZSBhY2NvdW50cywgZm9yIGluc3RhbmNlLlxyXG4gICAgICAgIG9wdGlvbnMuc2Nyb2xsYmFycyA9ICd5ZXMnO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb3B0aW9uc1N0cmluZyA9IE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpLnJlZHVjZSgoYWNjdW0sIFtrZXksIHZhbHVlXSkgPT4gYCR7YWNjdW19JHtrZXl9PSR7dmFsdWV9LGAsICcnKTtcclxuICAgIGlmIChfaXNJT1NTdGFuZGFsb25lKHVhKSAmJiB0YXJnZXQgIT09ICdfc2VsZicpIHtcclxuICAgICAgICBvcGVuQXNOZXdXaW5kb3dJT1ModXJsIHx8ICcnLCB0YXJnZXQpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG51bGwpO1xyXG4gICAgfVxyXG4gICAgLy8gYWJvdXQ6YmxhbmsgZ2V0dGluZyBzYW5pdGl6ZWQgY2F1c2luZyBicm93c2VycyBsaWtlIElFL0VkZ2UgdG8gZGlzcGxheVxyXG4gICAgLy8gYnJpZWYgZXJyb3IgbWVzc2FnZSBiZWZvcmUgcmVkaXJlY3RpbmcgdG8gaGFuZGxlci5cclxuICAgIGNvbnN0IG5ld1dpbiA9IHdpbmRvdy5vcGVuKHVybCB8fCAnJywgdGFyZ2V0LCBvcHRpb25zU3RyaW5nKTtcclxuICAgIF9hc3NlcnQobmV3V2luLCBhdXRoLCBcInBvcHVwLWJsb2NrZWRcIiAvKiBQT1BVUF9CTE9DS0VEICovKTtcclxuICAgIC8vIEZsYWt5IG9uIElFIGVkZ2UsIGVuY2Fwc3VsYXRlIHdpdGggYSB0cnkgYW5kIGNhdGNoLlxyXG4gICAgdHJ5IHtcclxuICAgICAgICBuZXdXaW4uZm9jdXMoKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiBuZXcgQXV0aFBvcHVwKG5ld1dpbik7XHJcbn1cclxuZnVuY3Rpb24gb3BlbkFzTmV3V2luZG93SU9TKHVybCwgdGFyZ2V0KSB7XHJcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcclxuICAgIGVsLmhyZWYgPSB1cmw7XHJcbiAgICBlbC50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICBjb25zdCBjbGljayA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50Jyk7XHJcbiAgICBjbGljay5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCB3aW5kb3csIDEsIDAsIDAsIDAsIDAsIGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCAxLCBudWxsKTtcclxuICAgIGVsLmRpc3BhdGNoRXZlbnQoY2xpY2spO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVUkwgZm9yIEF1dGhlbnRpY2F0aW9uIHdpZGdldCB3aGljaCB3aWxsIGluaXRpYXRlIHRoZSBPQXV0aCBoYW5kc2hha2VcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBXSURHRVRfUEFUSCA9ICdfXy9hdXRoL2hhbmRsZXInO1xyXG4vKipcclxuICogVVJMIGZvciBlbXVsYXRlZCBlbnZpcm9ubWVudFxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNvbnN0IEVNVUxBVE9SX1dJREdFVF9QQVRIID0gJ2VtdWxhdG9yL2F1dGgvaGFuZGxlcic7XHJcbmZ1bmN0aW9uIF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIHJlZGlyZWN0VXJsLCBldmVudElkLCBhZGRpdGlvbmFsUGFyYW1zKSB7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmF1dGhEb21haW4sIGF1dGgsIFwiYXV0aC1kb21haW4tY29uZmlnLXJlcXVpcmVkXCIgLyogTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmFwaUtleSwgYXV0aCwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBJTlZBTElEX0FQSV9LRVkgKi8pO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogYXV0aC5jb25maWcuYXBpS2V5LFxyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZSxcclxuICAgICAgICBhdXRoVHlwZSxcclxuICAgICAgICByZWRpcmVjdFVybCxcclxuICAgICAgICB2OiBTREtfVkVSU0lPTixcclxuICAgICAgICBldmVudElkXHJcbiAgICB9O1xyXG4gICAgaWYgKHByb3ZpZGVyIGluc3RhbmNlb2YgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKSB7XHJcbiAgICAgICAgcHJvdmlkZXIuc2V0RGVmYXVsdExhbmd1YWdlKGF1dGgubGFuZ3VhZ2VDb2RlKTtcclxuICAgICAgICBwYXJhbXMucHJvdmlkZXJJZCA9IHByb3ZpZGVyLnByb3ZpZGVySWQgfHwgJyc7XHJcbiAgICAgICAgaWYgKCFpc0VtcHR5KHByb3ZpZGVyLmdldEN1c3RvbVBhcmFtZXRlcnMoKSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zLmN1c3RvbVBhcmFtZXRlcnMgPSBKU09OLnN0cmluZ2lmeShwcm92aWRlci5nZXRDdXN0b21QYXJhbWV0ZXJzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPIHNldCBhZGRpdGlvbmFsUGFyYW1zIGZyb20gdGhlIHByb3ZpZGVyIGFzIHdlbGw/XHJcbiAgICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYWRkaXRpb25hbFBhcmFtcyB8fCB7fSkpIHtcclxuICAgICAgICAgICAgcGFyYW1zW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAocHJvdmlkZXIgaW5zdGFuY2VvZiBCYXNlT0F1dGhQcm92aWRlcikge1xyXG4gICAgICAgIGNvbnN0IHNjb3BlcyA9IHByb3ZpZGVyLmdldFNjb3BlcygpLmZpbHRlcihzY29wZSA9PiBzY29wZSAhPT0gJycpO1xyXG4gICAgICAgIGlmIChzY29wZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBwYXJhbXMuc2NvcGVzID0gc2NvcGVzLmpvaW4oJywnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoYXV0aC50ZW5hbnRJZCkge1xyXG4gICAgICAgIHBhcmFtcy50aWQgPSBhdXRoLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGVpZCBhcyBlbmRpcG9pbnRJZFxyXG4gICAgLy8gVE9ETzogbWF5YmUgc2V0IGZ3IGFzIEZyYW1ld29ya3Muam9pbihcIixcIilcclxuICAgIGNvbnN0IHBhcmFtc0RpY3QgPSBwYXJhbXM7XHJcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhwYXJhbXNEaWN0KSkge1xyXG4gICAgICAgIGlmIChwYXJhbXNEaWN0W2tleV0gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zRGljdFtrZXldO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBgJHtnZXRIYW5kbGVyQmFzZShhdXRoKX0/JHtxdWVyeXN0cmluZyhwYXJhbXNEaWN0KS5zbGljZSgxKX1gO1xyXG59XHJcbmZ1bmN0aW9uIGdldEhhbmRsZXJCYXNlKHsgY29uZmlnIH0pIHtcclxuICAgIGlmICghY29uZmlnLmVtdWxhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGBodHRwczovLyR7Y29uZmlnLmF1dGhEb21haW59LyR7V0lER0VUX1BBVEh9YDtcclxuICAgIH1cclxuICAgIHJldHVybiBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRPUl9XSURHRVRfUEFUSCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBzcGVjaWFsIHdlYiBzdG9yYWdlIGV2ZW50XHJcbiAqXHJcbiAqL1xyXG5jb25zdCBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSA9ICd3ZWJTdG9yYWdlU3VwcG9ydCc7XHJcbmNsYXNzIEJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5pZnJhbWVzID0ge307XHJcbiAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXMgPSB7fTtcclxuICAgICAgICB0aGlzLl9yZWRpcmVjdFBlcnNpc3RlbmNlID0gYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBfZ2V0UmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICAvLyBXcmFwcGluZyBpbiBhc3luYyBldmVuIHRob3VnaCB3ZSBkb24ndCBhd2FpdCBhbnl3aGVyZSBpbiBvcmRlclxyXG4gICAgLy8gdG8gbWFrZSBzdXJlIGVycm9ycyBhcmUgcmFpc2VkIGFzIHByb21pc2UgcmVqZWN0aW9uc1xyXG4gICAgYXN5bmMgX29wZW5Qb3B1cChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgZGVidWdBc3NlcnQoKF9hID0gdGhpcy5ldmVudE1hbmFnZXJzW2F1dGguX2tleSgpXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hbmFnZXIsICdfaW5pdGlhbGl6ZSgpIG5vdCBjYWxsZWQgYmVmb3JlIF9vcGVuUG9wdXAoKScpO1xyXG4gICAgICAgIGNvbnN0IHVybCA9IF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpO1xyXG4gICAgICAgIHJldHVybiBfb3BlbihhdXRoLCB1cmwsIF9nZW5lcmF0ZUV2ZW50SWQoKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICAgICAgX3NldFdpbmRvd0xvY2F0aW9uKF9nZXRSZWRpcmVjdFVybChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIF9nZXRDdXJyZW50VXJsKCksIGV2ZW50SWQpKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBtYW5hZ2VyLCBwcm9taXNlIH0gPSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICAgICAgaWYgKG1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobWFuYWdlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z0Fzc2VydChwcm9taXNlLCAnSWYgbWFuYWdlciBpcyBub3Qgc2V0LCBwcm9taXNlIHNob3VsZCBiZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuaW5pdEFuZEdldE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2tleV0gPSB7IHByb21pc2UgfTtcclxuICAgICAgICAvLyBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCwgdGhlIGtleSBzaG91bGQgYmUgcmVtb3ZlZCBzbyB0aGF0IHRoZVxyXG4gICAgICAgIC8vIG9wZXJhdGlvbiBjYW4gYmUgcmV0cmllZCBsYXRlci5cclxuICAgICAgICBwcm9taXNlLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdEFuZEdldE1hbmFnZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGF3YWl0IF9vcGVuSWZyYW1lKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQXV0aEV2ZW50TWFuYWdlcihhdXRoKTtcclxuICAgICAgICBpZnJhbWUucmVnaXN0ZXIoJ2F1dGhFdmVudCcsIChpZnJhbWVFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KGlmcmFtZUV2ZW50ID09PSBudWxsIHx8IGlmcmFtZUV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZnJhbWVFdmVudC5hdXRoRXZlbnQsIGF1dGgsIFwiaW52YWxpZC1hdXRoLWV2ZW50XCIgLyogSU5WQUxJRF9BVVRIX0VWRU5UICovKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogQ29uc2lkZXIgc3BsaXR0aW5nIHJlZGlyZWN0IGFuZCBwb3B1cCBldmVudHMgZWFybGllciBvblxyXG4gICAgICAgICAgICBjb25zdCBoYW5kbGVkID0gbWFuYWdlci5vbkV2ZW50KGlmcmFtZUV2ZW50LmF1dGhFdmVudCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHN0YXR1czogaGFuZGxlZCA/IFwiQUNLXCIgLyogQUNLICovIDogXCJFUlJPUlwiIC8qIEVSUk9SICovIH07XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2F1dGguX2tleSgpXSA9IHsgbWFuYWdlciB9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lc1thdXRoLl9rZXkoKV0gPSBpZnJhbWU7XHJcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkKGF1dGgsIGNiKSB7XHJcbiAgICAgICAgY29uc3QgaWZyYW1lID0gdGhpcy5pZnJhbWVzW2F1dGguX2tleSgpXTtcclxuICAgICAgICBpZnJhbWUuc2VuZChXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSwgeyB0eXBlOiBXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSB9LCByZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzU3VwcG9ydGVkID0gKF9hID0gcmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0WzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVldO1xyXG4gICAgICAgICAgICBpZiAoaXNTdXBwb3J0ZWQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY2IoISFpc1N1cHBvcnRlZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIElOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9LCBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSKTtcclxuICAgIH1cclxuICAgIF9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAoIXRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0pIHtcclxuICAgICAgICAgICAgdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSA9IF92YWxpZGF0ZU9yaWdpbihhdXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV07XHJcbiAgICB9XHJcbiAgICBnZXQgX3Nob3VsZEluaXRQcm9hY3RpdmVseSgpIHtcclxuICAgICAgICAvLyBNb2JpbGUgYnJvd3NlcnMgYW5kIFNhZmFyaSBuZWVkIHRvIG9wdGltaXN0aWNhbGx5IGluaXRpYWxpemVcclxuICAgICAgICByZXR1cm4gX2lzTW9iaWxlQnJvd3NlcigpIHx8IF9pc1NhZmFyaSgpIHx8IF9pc0lPUygpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSBzdWl0YWJsZSBmb3IgYnJvd3NlclxyXG4gKiBiYXNlZCBhcHBsaWNhdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyO1xuXG5jbGFzcyBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwge1xyXG4gICAgY29uc3RydWN0b3IoZmFjdG9ySWQpIHtcclxuICAgICAgICB0aGlzLmZhY3RvcklkID0gZmFjdG9ySWQ7XHJcbiAgICB9XHJcbiAgICBfcHJvY2VzcyhhdXRoLCBzZXNzaW9uLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIHN3aXRjaCAoc2Vzc2lvbi50eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbnJvbGxcIiAvKiBFTlJPTEwgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVFbnJvbGwoYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsLCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduaW5cIiAvKiBTSUdOX0lOICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpbmFsaXplU2lnbkluKGF1dGgsIHNlc3Npb24uY3JlZGVudGlhbCk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVidWdGYWlsKCd1bmV4cGVjdGVkIE11bHRpRmFjdG9yU2Vzc2lvblR5cGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIHtAaW5oZXJpdGRvYyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufVxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCBleHRlbmRzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgc3VwZXIoXCJwaG9uZVwiIC8qIFBIT05FICovKTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9maW5hbGl6ZUVucm9sbChhdXRoLCBpZFRva2VuLCBkaXNwbGF5TmFtZSkge1xyXG4gICAgICAgIHJldHVybiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgIHBob25lVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5jcmVkZW50aWFsLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZmluYWxpemVTaWduSW4oYXV0aCwgbWZhUGVuZGluZ0NyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gZmluYWxpemVTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsLFxyXG4gICAgICAgICAgICBwaG9uZVZlcmlmaWNhdGlvbkluZm86IHRoaXMuY3JlZGVudGlhbC5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHsgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyBhIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufSB0byBjb25maXJtIG93bmVyc2hpcCBvZiB0aGUgcGhvbmUgc2Vjb25kIGZhY3Rvci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVBdXRoQ3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBwcm92aWRlZCBieSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0uXHJcbiAgICAgKiBAcmV0dXJucyBBIHtAbGluayBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9ufSB3aGljaCBjYW4gYmUgdXNlZCB3aXRoXHJcbiAgICAgKiB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlci5yZXNvbHZlU2lnbklufVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXNzZXJ0aW9uKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwuX2Zyb21DcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgcGhvbmUgc2Vjb25kIGZhY3RvcjogYHBob25lYC5cclxuICovXHJcblBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IuRkFDVE9SX0lEID0gJ3Bob25lJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4xOS4xMVwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBBdXRoSW50ZXJvcCB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmludGVybmFsTGlzdGVuZXJzID0gbmV3IE1hcCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0VWlkKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgcmV0dXJuICgoX2EgPSB0aGlzLmF1dGguY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS51aWQpIHx8IG51bGw7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRUb2tlbihmb3JjZVJlZnJlc2gpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAgICAgaWYgKCF0aGlzLmF1dGguY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFjY2Vzc1Rva2VuID0gYXdhaXQgdGhpcy5hdXRoLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oZm9yY2VSZWZyZXNoKTtcclxuICAgICAgICByZXR1cm4geyBhY2Nlc3NUb2tlbiB9O1xyXG4gICAgfVxyXG4gICAgYWRkQXV0aFRva2VuTGlzdGVuZXIobGlzdGVuZXIpIHtcclxuICAgICAgICB0aGlzLmFzc2VydEF1dGhDb25maWd1cmVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuaGFzKGxpc3RlbmVyKSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHVuc3Vic2NyaWJlID0gdGhpcy5hdXRoLm9uSWRUb2tlbkNoYW5nZWQodXNlciA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgbGlzdGVuZXIoKChfYSA9IHVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW4pIHx8IG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2V0KGxpc3RlbmVyLCB1bnN1YnNjcmliZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuZ2V0KGxpc3RlbmVyKTtcclxuICAgICAgICBpZiAoIXVuc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICBhc3NlcnRBdXRoQ29uZmlndXJlZCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlLCBcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi8pO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlUHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbExpc3RlbmVycy5zaXplID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoLl9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRWZXJzaW9uRm9yUGxhdGZvcm0oY2xpZW50UGxhdGZvcm0pIHtcclxuICAgIHN3aXRjaCAoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgICAgICBjYXNlIFwiTm9kZVwiIC8qIE5PREUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnbm9kZSc7XHJcbiAgICAgICAgY2FzZSBcIlJlYWN0TmF0aXZlXCIgLyogUkVBQ1RfTkFUSVZFICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3JuJztcclxuICAgICAgICBjYXNlIFwiV29ya2VyXCIgLyogV09SS0VSICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ3dlYndvcmtlcic7XHJcbiAgICAgICAgY2FzZSBcIkNvcmRvdmFcIiAvKiBDT1JET1ZBICovOlxyXG4gICAgICAgICAgICByZXR1cm4gJ2NvcmRvdmEnO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuLyoqIEBpbnRlcm5hbCAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckF1dGgoY2xpZW50UGxhdGZvcm0pIHtcclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiYXV0aFwiIC8qIEFVVEggKi8sIChjb250YWluZXIsIHsgb3B0aW9uczogZGVwcyB9KSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXBwID0gY29udGFpbmVyLmdldFByb3ZpZGVyKCdhcHAnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2hlYXJ0YmVhdCcpO1xyXG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhdXRoRG9tYWluIH0gPSBhcHAub3B0aW9ucztcclxuICAgICAgICByZXR1cm4gKChhcHAsIGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlcikgPT4ge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiAhYXBpS2V5LmluY2x1ZGVzKCc6JyksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogSU5WQUxJRF9BUElfS0VZICovLCB7IGFwcE5hbWU6IGFwcC5uYW1lIH0pO1xyXG4gICAgICAgICAgICAvLyBBdXRoIGRvbWFpbiBpcyBvcHRpb25hbCBpZiBJZFAgc2lnbiBpbiBpc24ndCBiZWluZyB1c2VkXHJcbiAgICAgICAgICAgIF9hc3NlcnQoIShhdXRoRG9tYWluID09PSBudWxsIHx8IGF1dGhEb21haW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGF1dGhEb21haW4uaW5jbHVkZXMoJzonKSksIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBUkdVTUVOVF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcclxuICAgICAgICAgICAgICAgIGFwaUtleSxcclxuICAgICAgICAgICAgICAgIGF1dGhEb21haW4sXHJcbiAgICAgICAgICAgICAgICBjbGllbnRQbGF0Zm9ybSxcclxuICAgICAgICAgICAgICAgIGFwaUhvc3Q6IFwiaWRlbnRpdHl0b29sa2l0Lmdvb2dsZWFwaXMuY29tXCIgLyogQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgICAgICB0b2tlbkFwaUhvc3Q6IFwic2VjdXJldG9rZW4uZ29vZ2xlYXBpcy5jb21cIiAvKiBUT0tFTl9BUElfSE9TVCAqLyxcclxuICAgICAgICAgICAgICAgIGFwaVNjaGVtZTogXCJodHRwc1wiIC8qIEFQSV9TQ0hFTUUgKi8sXHJcbiAgICAgICAgICAgICAgICBzZGtDbGllbnRWZXJzaW9uOiBfZ2V0Q2xpZW50VmVyc2lvbihjbGllbnRQbGF0Zm9ybSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY29uc3QgYXV0aEluc3RhbmNlID0gbmV3IEF1dGhJbXBsKGFwcCwgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLCBjb25maWcpO1xyXG4gICAgICAgICAgICBfaW5pdGlhbGl6ZUF1dGhJbnN0YW5jZShhdXRoSW5zdGFuY2UsIGRlcHMpO1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aEluc3RhbmNlO1xyXG4gICAgICAgIH0pKGFwcCwgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyKTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogUFVCTElDICovKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEF1dGggY2FuIG9ubHkgYmUgaW5pdGlhbGl6ZWQgYnkgZXhwbGljaXRseSBjYWxsaW5nIGdldEF1dGgoKSBvciBpbml0aWFsaXplQXV0aCgpXHJcbiAgICAgICAgICogRm9yIHdoeSB3ZSBkbyB0aGlzLCBTZWUgZ28vZmlyZWJhc2UtbmV4dC1hdXRoLWluaXRcclxuICAgICAgICAgKi9cclxuICAgICAgICAuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJFWFBMSUNJVFwiIC8qIEVYUExJQ0lUICovKVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJlY2F1c2UgYWxsIGZpcmViYXNlIHByb2R1Y3RzIHRoYXQgZGVwZW5kIG9uIGF1dGggZGVwZW5kIG9uIGF1dGgtaW50ZXJuYWwgZGlyZWN0bHksXHJcbiAgICAgICAgICogd2UgbmVlZCB0byBpbml0aWFsaXplIGF1dGgtaW50ZXJuYWwgYWZ0ZXIgYXV0aCBpcyBpbml0aWFsaXplZCB0byBtYWtlIGl0IGF2YWlsYWJsZSB0byBvdGhlciBmaXJlYmFzZSBwcm9kdWN0cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICAuc2V0SW5zdGFuY2VDcmVhdGVkQ2FsbGJhY2soKGNvbnRhaW5lciwgX2luc3RhbmNlSWRlbnRpZmllciwgX2luc3RhbmNlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYXV0aEludGVybmFsUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoXCJhdXRoLWludGVybmFsXCIgLyogQVVUSF9JTlRFUk5BTCAqLyk7XHJcbiAgICAgICAgYXV0aEludGVybmFsUHJvdmlkZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgfSkpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJhdXRoLWludGVybmFsXCIgLyogQVVUSF9JTlRFUk5BTCAqLywgY29udGFpbmVyID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGNvbnRhaW5lci5nZXRQcm92aWRlcihcImF1dGhcIiAvKiBBVVRIICovKS5nZXRJbW1lZGlhdGUoKSk7XHJcbiAgICAgICAgcmV0dXJuIChhdXRoID0+IG5ldyBBdXRoSW50ZXJvcChhdXRoKSkoYXV0aCk7XHJcbiAgICB9LCBcIlBSSVZBVEVcIiAvKiBQUklWQVRFICovKS5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkVYUExJQ0lUXCIgLyogRVhQTElDSVQgKi8pKTtcclxuICAgIHJlZ2lzdGVyVmVyc2lvbihuYW1lLCB2ZXJzaW9uLCBnZXRWZXJzaW9uRm9yUGxhdGZvcm0oY2xpZW50UGxhdGZvcm0pKTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgJ2VzbTIwMTcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyB0aGUgQXV0aCBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIHByb3ZpZGVkIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfS5cclxuICogSWYgbm8gaW5zdGFuY2UgZXhpc3RzLCBpbml0aWFsaXplcyBhbiBBdXRoIGluc3RhbmNlIHdpdGggcGxhdGZvcm0tc3BlY2lmaWMgZGVmYXVsdCBkZXBlbmRlbmNpZXMuXHJcbiAqXHJcbiAqIEBwYXJhbSBhcHAgLSBUaGUgRmlyZWJhc2UgQXBwLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBdXRoKGFwcCA9IGdldEFwcCgpKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRpYWxpemVBdXRoKGFwcCwge1xyXG4gICAgICAgIHBvcHVwUmVkaXJlY3RSZXNvbHZlcjogYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcixcclxuICAgICAgICBwZXJzaXN0ZW5jZTogW1xyXG4gICAgICAgICAgICBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLFxyXG4gICAgICAgICAgICBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZVxyXG4gICAgICAgIF1cclxuICAgIH0pO1xyXG59XHJcbnJlZ2lzdGVyQXV0aChcIkJyb3dzZXJcIiAvKiBCUk9XU0VSICovKTtcblxuZXhwb3J0IHsgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCBhcyAkLCBBY3Rpb25Db2RlT3BlcmF0aW9uIGFzIEEsIHByb2RFcnJvck1hcCBhcyBCLCBBVVRIX0VSUk9SX0NPREVTX01BUF9ET19OT1RfVVNFX0lOVEVSTkFMTFkgYXMgQywgaW5pdGlhbGl6ZUF1dGggYXMgRCwgY29ubmVjdEF1dGhFbXVsYXRvciBhcyBFLCBGYWN0b3JJZCBhcyBGLCBBdXRoQ3JlZGVudGlhbCBhcyBHLCBFbWFpbEF1dGhDcmVkZW50aWFsIGFzIEgsIE9BdXRoQ3JlZGVudGlhbCBhcyBJLCBQaG9uZUF1dGhDcmVkZW50aWFsIGFzIEosIGluTWVtb3J5UGVyc2lzdGVuY2UgYXMgSywgRW1haWxBdXRoUHJvdmlkZXIgYXMgTCwgRmFjZWJvb2tBdXRoUHJvdmlkZXIgYXMgTSwgR29vZ2xlQXV0aFByb3ZpZGVyIGFzIE4sIE9wZXJhdGlvblR5cGUgYXMgTywgUGhvbmVBdXRoUHJvdmlkZXIgYXMgUCwgR2l0aHViQXV0aFByb3ZpZGVyIGFzIFEsIFJlY2FwdGNoYVZlcmlmaWVyIGFzIFIsIFNpZ25Jbk1ldGhvZCBhcyBTLCBPQXV0aFByb3ZpZGVyIGFzIFQsIFNBTUxBdXRoUHJvdmlkZXIgYXMgVSwgVHdpdHRlckF1dGhQcm92aWRlciBhcyBWLCBzaWduSW5Bbm9ueW1vdXNseSBhcyBXLCBzaWduSW5XaXRoQ3JlZGVudGlhbCBhcyBYLCBsaW5rV2l0aENyZWRlbnRpYWwgYXMgWSwgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCBhcyBaLCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4gYXMgXywgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSBhcyBhLCBjb25maXJtUGFzc3dvcmRSZXNldCBhcyBhMCwgYXBwbHlBY3Rpb25Db2RlIGFzIGExLCBjaGVja0FjdGlvbkNvZGUgYXMgYTIsIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlIGFzIGEzLCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQgYXMgYTQsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGE1LCBzZW5kU2lnbkluTGlua1RvRW1haWwgYXMgYTYsIGlzU2lnbkluV2l0aEVtYWlsTGluayBhcyBhNywgc2lnbkluV2l0aEVtYWlsTGluayBhcyBhOCwgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwgYXMgYTksIF9nZXRSZWRpcmVjdFJlc3VsdCBhcyBhQSwgX2NsZWFyUmVkaXJlY3RPdXRjb21lcyBhcyBhQiwgX2Nhc3RBdXRoIGFzIGFDLCBVc2VySW1wbCBhcyBhRCwgQXV0aEltcGwgYXMgYUUsIF9nZXRDbGllbnRWZXJzaW9uIGFzIGFGLCBfZ2VuZXJhdGVFdmVudElkIGFzIGFHLCBBdXRoUG9wdXAgYXMgYUgsIEZldGNoUHJvdmlkZXIgYXMgYUksIFNBTUxBdXRoQ3JlZGVudGlhbCBhcyBhSiwgc2VuZEVtYWlsVmVyaWZpY2F0aW9uIGFzIGFhLCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCBhcyBhYiwgQWN0aW9uQ29kZVVSTCBhcyBhYywgcGFyc2VBY3Rpb25Db2RlVVJMIGFzIGFkLCB1cGRhdGVQcm9maWxlIGFzIGFlLCB1cGRhdGVFbWFpbCBhcyBhZiwgdXBkYXRlUGFzc3dvcmQgYXMgYWcsIGdldElkVG9rZW4gYXMgYWgsIGdldElkVG9rZW5SZXN1bHQgYXMgYWksIHVubGluayBhcyBhaiwgZ2V0QWRkaXRpb25hbFVzZXJJbmZvIGFzIGFrLCByZWxvYWQgYXMgYWwsIGdldE11bHRpRmFjdG9yUmVzb2x2ZXIgYXMgYW0sIG11bHRpRmFjdG9yIGFzIGFuLCBfaXNJT1M3T3I4IGFzIGFvLCBkZWJ1Z0Fzc2VydCBhcyBhcCwgX2lzSU9TIGFzIGFxLCBfaXNBbmRyb2lkIGFzIGFyLCBfZmFpbCBhcyBhcywgX2dldFJlZGlyZWN0VXJsIGFzIGF0LCBfZ2V0UHJvamVjdENvbmZpZyBhcyBhdSwgX2NyZWF0ZUVycm9yIGFzIGF2LCBfYXNzZXJ0IGFzIGF3LCBfZ2V0SW5zdGFuY2UgYXMgYXgsIF9wZXJzaXN0ZW5jZUtleU5hbWUgYXMgYXksIEF1dGhFdmVudE1hbmFnZXIgYXMgYXosIGJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGFzIGIsIHNpZ25JbldpdGhQb3B1cCBhcyBjLCBsaW5rV2l0aFBvcHVwIGFzIGQsIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwIGFzIGUsIHNpZ25JbldpdGhSZWRpcmVjdCBhcyBmLCBsaW5rV2l0aFJlZGlyZWN0IGFzIGcsIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0IGFzIGgsIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UgYXMgaSwgZ2V0UmVkaXJlY3RSZXN1bHQgYXMgaiwgYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciBhcyBrLCBsaW5rV2l0aFBob25lTnVtYmVyIGFzIGwsIFBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IgYXMgbSwgZ2V0QXV0aCBhcyBuLCBQcm92aWRlcklkIGFzIG8sIHNldFBlcnNpc3RlbmNlIGFzIHAsIG9uSWRUb2tlbkNoYW5nZWQgYXMgcSwgcmVhdXRoZW50aWNhdGVXaXRoUGhvbmVOdW1iZXIgYXMgciwgc2lnbkluV2l0aFBob25lTnVtYmVyIGFzIHMsIG9uQXV0aFN0YXRlQ2hhbmdlZCBhcyB0LCB1cGRhdGVQaG9uZU51bWJlciBhcyB1LCB1c2VEZXZpY2VMYW5ndWFnZSBhcyB2LCB1cGRhdGVDdXJyZW50VXNlciBhcyB3LCBzaWduT3V0IGFzIHgsIGRlbGV0ZVVzZXIgYXMgeSwgZGVidWdFcnJvck1hcCBhcyB6IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC02ZGU0Y2JiOS5qcy5tYXBcbiIsImltcG9ydCB7IGJvZHksIGhlYWRlciwgY3Vyc29yLCBjb3JvbmFDaXJjbGUsIGV5ZXMgfSBmcm9tICcuL2N1cnNvckFuZENvcm9uYSc7XG5cbmNvbnN0IGluc3RydWN0aW9uc1BUYWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaW5zdHJ1Y3Rpb25zIHAnKTtcblxuY29uc3Qgc2Vjb25kc0ZvckVhY2hTdGFnZSA9IFsxMSwgMTQsIDEzLCAxOCwgMTMsIDE2LCAyMCwgMThdO1xuLy8gXG5jb25zdCBmaWd1cmVzUGVyU3RhZ2UgPSBbNywgMTAsIDEwLCAxNCwgMTAsIDIwLCAyMCwgMjBdO1xuXG5jb25zdCBwRmFpbHVyZSA9IFwieW91IGZhaWxlZCBhbmQgYSBuZXcgdmFyaWFudCBpcyBzcHJlYWRpbmcgbm93LCBidXQgZG9uJ3Qgd29ycnksIHlvdSBjYW4gdHJ5IGFnYWluIGFuZCBwcmV2ZW50IGEgd29ybGQgY2F0YXN0cm9waGVcIjtcbmNvbnN0IHBGYWlsdXJlQW5vbiA9IFwiWW91IGZhaWxlZCBhbmQgYSBuZXcgdmFyaWFudCBpcyBzcHJlYWRpbmcgbm93LCBidXQgZG9uJ3Qgd29ycnksIHlvdSBjYW4gdHJ5IGFnYWluIGFuZCBwcmV2ZW50IGEgd29ybGQgY2F0YXN0cm9waGVcIjtcblxuY29uc3QgcCA9IFtcblwidmFjY2luYXRlIHdvcmxkJ3MgcG9wdWxhdGlvbiBhbmQgaGVscCBmaWdodCB0aGUgY29yb25hdmlydXMgZGlzZWFzZS4gSWYgeW91J2xsIGZhaWwsIGEgbmV3IHZhcmlhbnQgd2lsbCBhcnJpdmUuLi5cIixcblwieW91IG1hZGUgaXQhIEJ1dCB0aGUgcG9wdWxhdGlvbiBncmV3IGFuZCB5b3UgbmVlZCB0byB2YWNjaW5hdGUgbW9yZSBwZW9wbGUgbm93IVwiLFxuXCJ5b3UgbWFkZSBpdCBhZ2FpbiEgTm93IGxldHMgc2VlIGlmIHlvdSBjYW4gZG8gaXQgZXZlbiBmYXN0ZXIhXCIsXG5cImdyZWF0IGpvYiEgQnV0IGJhdHMgYXJlIGNhbW1pbmcuIENhbiB5b3UgdmFjY2luYXRlIHRoZW0gdG9vP1wiLFxuXCJ5b3UgYXJlIGF3ZXNvbWUhIE5vdyBsZXRzIHNlZSBpZiB5b3UgY2FuIGRvIGl0IHdpdGggcGVvcGxlIHRoYXQgYXJlIGluIGEgaHVycnkhXCIsXG5cImFtYXppbmcgd29yayEgQ2FuIHlvdSBhbHNvIHZhY2NpbmF0ZSBlYWNoIHBlcnNvbiBpbiBvbmx5IG9uZSBzZWNvbmQ/XCIsXG5cInRoZSBDb3JvbmEgY2FuJ3QgYmVhdCB5b3UhIExldHMgdHJ5IGl0IG5vdyB3aXRoIHRoZSBiYXRzIGFuZCBmYXN0ZXIhXCIsXG5cInlvdSdyZSBhbG1vc3QgYXQgdGhlIGVuZCBvZiB5b3VyIGpvdXJueSwgb25seSBvbmUgc3RhZ2UgdG8gZ28hXCIsXG5cInlvdSBkaWQgaXQhIFlvdSBzYXZlZCBodW1hbml0eSEgWW91IGVuZGVkIHRoZSBjb3JvbmF2aXJ1cyBkaXNlYXNlIGFuZCBtYWRlIFhYWCBwb2ludC5cIlxuXVxuXG5jb25zdCBwQW5vbiA9IFtcbiAgICBcIlZhY2NpbmF0ZSB3b3JsZCdzIHBvcHVsYXRpb24gYW5kIGhlbHAgZmlnaHQgdGhlIGNvcm9uYXZpcnVzIGRpc2Vhc2UuIElmIHlvdSdsbCBmYWlsLCBhIG5ldyB2YXJpYW50IHdpbGwgYXJyaXZlLi4uXCIsXG4gICAgXCJZb3UgbWFkZSBpdCEgQnV0IHRoZSBwb3B1bGF0aW9uIGdyZXcgYW5kIHlvdSBuZWVkIHRvIHZhY2NpbmF0ZSBtb3JlIHBlb3BsZSBub3chXCIsXG4gICAgXCJZb3UgbWFkZSBpdCBhZ2FpbiEgTm93IGxldHMgc2VlIGlmIHlvdSBjYW4gZG8gaXQgZXZlbiBmYXN0ZXIhXCIsXG4gICAgXCJHcmVhdCBqb2IhIEJ1dCBiYXRzIGFyZSBjYW1taW5nLiBDYW4geW91IHZhY2NpbmF0ZSB0aGVtIHRvbz9cIixcbiAgICBcIllvdSBhcmUgYXdlc29tZSEgTm93IGxldHMgc2VlIGlmIHlvdSBjYW4gZG8gaXQgd2l0aCBwZW9wbGUgdGhhdCBhcmUgaW4gYSBodXJyeSFcIixcbiAgICBcIkFtYXppbmcgd29yayEgQ2FuIHlvdSBhbHNvIHZhY2NpbmF0ZSBlYWNoIHBlcnNvbiBpbiBvbmx5IG9uZSBzZWNvbmQ/XCIsXG4gICAgXCJUaGUgQ29yb25hIGNhbid0IGJlYXQgeW91ISBMZXRzIHRyeSBpdCBub3cgd2l0aCB0aGUgYmF0cyFcIixcbiAgICBcIllvdSdyZSBhbG1vc3QgYXQgdGhlIGVuZCBvZiB5b3VyIGpvdXJueSwgb25seSBvbmUgc3RhZ2UgdG8gZ28hXCIsXG4gICAgXCJZb3UgZGlkIGl0ISBZb3Ugc2F2ZWQgaHVtYW5pdHkhIFlvdSBlbmRlZCB0aGUgY29yb25hdmlydXMgZGlzZWFzZSBhbmQgbWFkZSBYWFggcG9pbnQuXCJcbl1cblxuZXhwb3J0IHsgaW5zdHJ1Y3Rpb25zUFRhZywgc2Vjb25kc0ZvckVhY2hTdGFnZSwgZmlndXJlc1BlclN0YWdlLCBwRmFpbHVyZSwgcEZhaWx1cmVBbm9uLCBwLCBwQW5vbiB9OyIsImNvbnN0IGluc3RydWN0aW9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0cnVjdGlvbnMnKTtcbmNvbnN0IG1lZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lZGFsJyk7XG5jb25zdCBtZWRhbFNwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbWVkYWwgc3BhbicpO1xuY29uc3Qgc2F2ZWROaWNrbmFtZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduYW1lJyk7Ly9uYW1lIHRoYXQgd2FzIHNhdmVkIGZyb20gbGFzdCBnYW1lXG5cbi8vUHV0dGluZyB0aGUgbmFtZSBmcm9tIHRoZSBsb2NhbFN0b3JhZ2UgaW4gdGhlIG5pY2tuYW1lRm9ybSAoVGhlIGZvcm0gdGhhdCBhcHBlYXJzIGF0IHRoZSBob21lcGFnZSlcbmlmKChzYXZlZE5pY2tuYW1lICE9ICcnKSAmJiAoc2F2ZWROaWNrbmFtZSAhPSBudWxsKSkge1xuICAgIGRvY3VtZW50LmZvcm1zLm5pY2tuYW1lRm9ybS5uaWNrbmFtZS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBsb2NhbFN0b3JhZ2UubmFtZSk7XG4gICAgZG9jdW1lbnQuZm9ybXMubmlja25hbWVGb3JtLm5pY2tuYW1lLnN0eWxlLmNvbG9yID0gXCIjNTU1NTU1XCI7XG4gICAgLy9hbmQgaWYgYmVzdFNjb3JlIGV4aXN0cywgSSdsbCBtYWtlIGl0IGFwcGVhciB3aXRoIHRoZSBtZWRhbCBhdCB0aGUgdG9wIG9mIHRoZSBzY3JlZW5cbiAgICBpZiAoKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKSAhPSBudWxsKSAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpICE9ICcnKSAmJiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpICE9IDApKSB7XG4gICAgICAgIG1lZGFsU3Bhbi50ZXh0Q29udGVudCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKTtcbiAgICAgICAgbWVkYWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfSBcbiAgICBcbn1cblxuXG5leHBvcnQgeyBpbnN0cnVjdGlvbnMsIG1lZGFsLCBtZWRhbFNwYW4sIHNhdmVkTmlja25hbWUgfTsiLCJpbXBvcnQgeyBpbml0aWFsaXplQXBwIH0gZnJvbSBcImZpcmViYXNlL2FwcFwiO1xuXG5pbXBvcnQge1xuICAgIGdldEZpcmVzdG9yZSwgY29sbGVjdGlvbiwgZ2V0RG9jcywgb25TbmFwc2hvdCwgc2V0RG9jLCBhZGREb2MsIGRlbGV0ZURvYywgZG9jLCBcbiAgICBxdWVyeSwgd2hlcmUsIG9yZGVyQnksIHNlcnZlclRpbWVzdGFtcCwgZ2V0RG9jLCB1cGRhdGVEb2Ncbn0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuXG5pbXBvcnQge1xuICAgIGdldEF1dGgsIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgdXBkYXRlUHJvZmlsZSwgc2lnbk91dCwgc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQsIHNlbmRQYXNzd29yZFJlc2V0RW1haWwsIG9uQXV0aFN0YXRlQ2hhbmdlZFxufSBmcm9tIFwiZmlyZWJhc2UvYXV0aFwiO1xuXG5pbXBvcnQgeyBpbnN0cnVjdGlvbnNQVGFnLCBzZWNvbmRzRm9yRWFjaFN0YWdlLCBmaWd1cmVzUGVyU3RhZ2UsIHBGYWlsdXJlLCBwRmFpbHVyZUFub24sIHAsIHBBbm9uIH0gZnJvbSAnLi9zdG9yeUxpbmUnO1xuXG5pbXBvcnQgeyBpbnN0cnVjdGlvbnMsIG1lZGFsLCBtZWRhbFNwYW4sIHNhdmVkTmlja25hbWUgfSBmcm9tICcuL2xvY2FsU3RvcmFnZSc7XG5cblxuY29uc3QgZmlyZWJhc2VDb25maWcgPSB7XG4gICAgYXBpS2V5OiBcIkFJemFTeUFROGJ3VjJNQ3Buc3lUYXNYWkxLbnMzb3M1ZGtSMWRlOFwiLFxuICAgIGF1dGhEb21haW46IFwiY29yb25hLWdhbWUtZmJmNmQuZmlyZWJhc2VhcHAuY29tXCIsXG4gICAgcHJvamVjdElkOiBcImNvcm9uYS1nYW1lLWZiZjZkXCIsXG4gICAgc3RvcmFnZUJ1Y2tldDogXCJjb3JvbmEtZ2FtZS1mYmY2ZC5hcHBzcG90LmNvbVwiLFxuICAgIG1lc3NhZ2luZ1NlbmRlcklkOiBcIjI2MDcyMzUwMTk4XCIsXG4gICAgYXBwSWQ6IFwiMToyNjA3MjM1MDE5ODp3ZWI6MDllOWNjODZmY2Y1MmVkYTFjMWJkN1wiXG59O1xuXG5jb25zdCBhcHAgPSBpbml0aWFsaXplQXBwKGZpcmViYXNlQ29uZmlnKTtcbmNvbnN0IGF1dGggPSBnZXRBdXRoKCk7XG5jb25zdCBkYXRhYmFzZSA9IGdldEZpcmVzdG9yZSgpO1xuY29uc3QgY29sbGVjdGlvblJlZiA9IGNvbGxlY3Rpb24oZGF0YWJhc2UsICduaWNrbmFtZXNDb2xsZWN0aW9uJyk7XG5cblxubGV0IGN1cnJlbnRTdGFnZSA9IDA7XG4vL0kgY2FuJ3QgaW1wb3J0IFwibGV0IGN1cnJlbnRTdGFnZSA9IDBcIiBiZWNhdXNlIEkgY2FuIGltcG9ydCBvbmx5IGNvbnN0IHZhcmlhYmxlcyxcbi8vc28gSSBpbXBvcnQgdGhlIGZ1bmN0aW9uIHVzZXJzQ3VycmVudFN0YWdlLCB3aGljaCB3aWxsIGxldCBzaWduSW5BbmRSZWdpc3RlckZvcm0uanMga25vd1xuLy9pbiB3aGljaCBzdGFnZSB3ZSBhcmUgbm93IChpdCB3aWxsIGJlIGNhbGxlZCBpbiBldmVyeSBzdGFnZSBjaGFuZ2UgZnJvbSBzdGFydEdhbWUuanMpXG5jb25zdCB1c2Vyc0N1cnJlbnRTdGFnZSA9IChzdGFnZSkgPT4gY3VycmVudFN0YWdlID0gc3RhZ2U7IFxuXG5jb25zdCByZWdpc3RlckJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcmVnaXN0ZXJcIik7XG5jb25zdCByZWdpc3RlckZvcm1Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3JlZ2lzdGVyRm9ybUNvbnRhaW5lclwiKTtcbmNvbnN0IHJlZ2lzdGVyRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcmVnaXN0ZXJGb3JtXCIpO1xuY29uc3QgcmVnaXN0ZXJGb3JtSW5wdXRGaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmVnaXN0ZXJGb3JtQ29udGFpbmVyICNyZWdpc3RlckZvcm0gaW5wdXQnKTtcbmNvbnN0IHJlZ2lzdGVyRm9ybVBGaWVsZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcjcmVnaXN0ZXJGb3JtQ29udGFpbmVyICNyZWdpc3RlckZvcm0gcCcpO1xuY29uc3QgcmVnaXN0ZXJMYXN0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZWdpc3RlckZvcm1Db250YWluZXIgI3JlZ2lzdGVyRm9ybSAjbGFzdE5hbWUnKTtcbmNvbnN0IHJlZ2lzdGVyRmlyc3ROYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlZ2lzdGVyRm9ybUNvbnRhaW5lciAjcmVnaXN0ZXJGb3JtICNmaXJzdE5hbWUnKTtcbmNvbnN0IGxhc3ROYW1lUCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNyZWdpc3RlckZvcm1Db250YWluZXIgI3JlZ2lzdGVyRm9ybSAjbGFzdE5hbWVQJyk7XG5jb25zdCBmaXJzdE5hbWVQID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3JlZ2lzdGVyRm9ybUNvbnRhaW5lciAjcmVnaXN0ZXJGb3JtICNmaXJzdE5hbWVQJyk7XG5jb25zdCBzaWduSW5CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2lnbkluJyk7XG5jb25zdCBzaWduSW5Gb3JtQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpZ25JbkZvcm1Db250YWluZXInKTtcbmNvbnN0IHNpZ25JbkZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2lnbkluRm9ybScpO1xuY29uc3QgY2xvc2VYID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi54XCIpOy8vdGhlIFggZm9yIHNpZ25JbkZvcm1Db250YWluZXIgYW5kIHJlZ2lzdGVyRm9ybUNvbnRhaW5lclxuY29uc3QgaW5zdHJ1Y3Rpb25zUCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0cnVjdGlvbnMgcCcpO1xuY29uc3Qgbmlja25hbWVGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luc3RydWN0aW9ucyBmb3JtJyk7XG5jb25zdCBuaWNrbmFtZUZvcm1MYWJlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpbnN0cnVjdGlvbnMgZm9ybSBsYWJlbCcpO1xuY29uc3Qgbmlja25hbWVGb3JtVGV4dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luc3RydWN0aW9ucyBmb3JtICNuaWNrbmFtZScpO1xuY29uc3QgYnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luc3RydWN0aW9ucyBmb3JtICNzdGFydEJ1dHRvbicpO1xuY29uc3Qgc2lnbk91dEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWduT3V0Jyk7XG5jb25zdCBob3VyZ2xhc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjaG91cmdsYXNzJyk7XG5jb25zdCBmb3Jnb3RQYXNzd29yZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWduSW5Gb3JtQ29udGFpbmVyICNzaWduSW5Gb3JtIHAnKTsgXG5jb25zdCBmb3Jnb3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZvcmdvdENvbnRhaW5lclwiKTtcbmNvbnN0IGZvcmdvdEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2ZvcmdvdENvbnRhaW5lciAjZm9yZ290Rm9ybVwiKTtcbmNvbnN0IGNsb3NlWDIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLngyXCIpOyAvL3RoZSBYIGZvciBmb3Jnb3RDb250YWluZXJcbmNvbnN0IGJhY2tUb0dhbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYmFja1RvR2FtZScpO1xuY29uc3QgZW1haWxTZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VtYWlsU2VudCcpO1xuY29uc3QgZW1haWxTZW50UCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbWFpbFNlbnQgcCcpO1xuY29uc3QgcXVpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNxdWl0Jyk7XG5cbmNvbnN0IHJlZ2lzdGVyQnV0dG9uRXZlbnQgPSAoKSA9PiB7XG4gICAgcmVnaXN0ZXJGb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGNsb3NlWC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbn1cblxucmVnaXN0ZXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlZ2lzdGVyQnV0dG9uRXZlbnQpO1xuXG5jb25zdCBzaWduSW5CdXR0b25FdmVudCA9ICgpID0+IHtcbiAgICBzaWduSW5Gb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGNsb3NlWC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbn1cblxuc2lnbkluQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaWduSW5CdXR0b25FdmVudCk7XG5cblxuY2xvc2VYLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgc2lnbkluRm9ybUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHNpZ25JbkZvcm0ucmVzZXQoKTsgLy9jbGVhbmluZyB0aGUgZm9ybVxuICAgIHJlZ2lzdGVyRm9ybUNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHJlZ2lzdGVyRm9ybS5yZXNldCgpOyAvL2NsZWFuaW5nIHRoZSBmb3JtXG4gICAgY2xvc2VYLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgYmFja1RvR2FtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIC8vY2xlYW5pbmcgdGhlIGJhY2tncm91bmQgcmVkIGNvbG9yIG9mIHRoZSByZWdpc3RlckZvcm1JbnB1dEZpZWxkcyAoaWYgdGhlIHVzZXIgdHlwZWQgYW4gZXJyb3IpXG4gICAgcmVnaXN0ZXJGb3JtSW5wdXRGaWVsZHMuZm9yRWFjaChpbnB1dEZpZWxkID0+IHtcbiAgICAgICAgaW5wdXRGaWVsZC5jbGFzc0xpc3QucmVtb3ZlKCdpbnZhbGlkJyk7XG4gICAgfSk7XG4gICAgLy9jbGVhbmluZyB0aGUgcmVkIGNvbG9yIDxwPiB0YWcgb2YgdGhlIHJlZ2lzdGVyRm9ybUlucHV0RmllbGRzIChpZiB0aGUgdXNlciB0eXBlZCBhbiBlcnJvcilcbiAgICByZWdpc3RlckZvcm1QRmllbGRzLmZvckVhY2gocEZpZWxkID0+IHtcbiAgICAgICAgcEZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcbiAgICB9KTtcbn0pO1xuXG5xdWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGxvY2F0aW9uLnJlbG9hZCgpXG59KTtcbiAgICBcbi8vdGhlIHJlZ2V4IG9mIGV2ZXJ5IHJlZ2lzdGVyRm9ybSBpbnB1dCBmaWVsZFxuY29uc3QgcmVnID0ge1xuICAgIGZpcnN0TmFtZTovXlthLXpBLVpdKygoKCAtICl8KCAtKXwoLSApfC18ICk/W2EtekEtWl0rKSokLyxcbiAgICBsYXN0TmFtZTovXlthLXpBLVpdKygoKCAtICl8KCAtKXwoLSApfC18ICk/W2EtekEtWl0rKSokLyxcbiAgICBuaWNrbmFtZVJlZ2lzdGVyZWRVc2VyOi9eW2EtekEtWjAtOV0rKCA/KF98LXxcXC4pPyA/W2EtekEtWjAtOV0rKSokLyxcbiAgICBlbWFpbDovXihbXFx3XFxkXFwuLV0rKUAoW1xcd1xcZC1dKylcXC4oW2EtekEtWl17MiwxMn0pKFxcLlthLXpBLVpdezIsOH0pPyQvLFxuICAgIHBhc3N3b3JkOi9eW1xcd1xcZC1AXFwuXXs4LDIwfSQvXG59O1xuXG5cblxuLy9hZGRpbmcgcmVkIGJhY2tncm91bmQgYW5kIHJlZCB0ZXh0IGZvciBlcnJvcnMgaW4gcmVnaXN0ZXIgZm9ybVxucmVnaXN0ZXJGb3JtSW5wdXRGaWVsZHMuZm9yRWFjaChpbnB1dEZpZWxkID0+IHtcblxuICAgIGNvbnN0IGlkSW5wdXQgPSBpbnB1dEZpZWxkLmdldEF0dHJpYnV0ZSgnaWQnKTsgLy9maW5kaW5nIHRoZSBpZCBvZiB0aGUgaW5wdXQgXG5cbiAgICBpbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCBlID0+IHtcblxuICAgICAgICBpZiAoaW5wdXRGaWVsZC5nZXRBdHRyaWJ1dGUoJ2lkJykgIT09ICdzdWJtaXRSZWdpc3RlckZvcm0nKSB7XG4gICAgICAgICAgICAvL3dlIHdpbGwgY2hlY2sgaWYgdGhlIHZhbHVlIHRoYXQgdGhlIHVzZXIgZW50ZXJlZCBtYXRjaCB0aGUgZmllbGRzJyByZWdleCwgd2l0aCB0ZXN0KCkgbWV0aG9kLlxuICAgICAgICAgICAgLy9maXJzdCB3ZSB3aWxsIHNheSB3aGF0IHdpbGwgaGFwcGVuZWQgaWYgdGhlcmUgaXNuJ3QgYSBtYXRjaFxuICAgICAgICAgICAgaWYocmVnW2UudGFyZ2V0Lm5hbWVdLnRlc3QoZS50YXJnZXQudmFsdWUpID09IGZhbHNlKSB7IC8vZS50YXJnZXQubmFtZSBpcyB0aGUgbmFtZSBvZiB0aGUgaW5wdXQgZmllbGQuIGUudGFyZ2V0LnZhbHVlIGlzIHRoZSB0ZXh0IHRoZSB1c2VyIGVudGVyZWRcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgIT09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRGaWVsZC5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkJyk7IC8vdGhlIGludmFsaWQgY2xhc3MgbWFrZSB0aGUgYmFja2dyb3VuZCBvZiB0aGUgaW5wdXQgcmVkXG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvL25vdyB3ZSB3aWxsIHNheSB3aGF0IHRvIGRvIHdpdGggdGhlIDxwPiB0YWcgdGhhdCBmaXRzIHRoZSBpbnB1dFxuICAgICAgICAgICAgICAgICAgICByZWdpc3RlckZvcm1QRmllbGRzLmZvckVhY2gocEZpZWxkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKChpbnB1dEZpZWxkLmdldEF0dHJpYnV0ZSgnbmFtZScpID09ICdmaXJzdE5hbWUnIHx8IGlucHV0RmllbGQuZ2V0QXR0cmlidXRlKCduYW1lJykgPT0gJ2xhc3ROYW1lJykgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICgocmVnaXN0ZXJMYXN0TmFtZS5jbGFzc0xpc3QuY29udGFpbnMoJ2ludmFsaWQnKSA9PSB0cnVlKSAmJiAocmVnaXN0ZXJGaXJzdE5hbWUuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnZhbGlkJykgPT0gdHJ1ZSkpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkUCA9IHBGaWVsZC5nZXRBdHRyaWJ1dGUoJ2lkJyk7Ly9sb29raW5nIGZvciB0aGUgaWQgb2YgdGhlIDxwPiB0YWdzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkUCA9PSAoaWRJbnB1dCArICdQJykpIHsgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcEZpZWxkLmNsYXNzTGlzdC5hZGQoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfSBlbHNlIHsgLy9pZiB0aGUgdmFsdWUgdGhhdCB0aGUgdXNlciBlbnRlcmVkIG1hdGNoIHRoZSByZWdleFxuICAgICAgICAgICAgICAgIGlucHV0RmllbGQuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xuXG4gICAgICAgICAgICAgICAgcmVnaXN0ZXJGb3JtUEZpZWxkcy5mb3JFYWNoKHBGaWVsZCA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoKGlucHV0RmllbGQuZ2V0QXR0cmlidXRlKCduYW1lJykgPT0gJ2ZpcnN0TmFtZScgfHwgaW5wdXRGaWVsZC5nZXRBdHRyaWJ1dGUoJ25hbWUnKSA9PSAnbGFzdE5hbWUnKSAmJlxuICAgICAgICAgICAgICAgICAgICAoKHJlZ2lzdGVyTGFzdE5hbWUuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnZhbGlkJykgPT0gdHJ1ZSkgfHwgKHJlZ2lzdGVyRmlyc3ROYW1lLmNsYXNzTGlzdC5jb250YWlucygnaW52YWxpZCcpID09IHRydWUpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJycpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKChpbnB1dEZpZWxkLmdldEF0dHJpYnV0ZSgnbmFtZScpID09ICdmaXJzdE5hbWUnIHx8IGlucHV0RmllbGQuZ2V0QXR0cmlidXRlKCduYW1lJykgPT0gJ2xhc3ROYW1lJykgJiZcbiAgICAgICAgICAgICAgICAgICAgKChyZWdpc3Rlckxhc3ROYW1lLmNsYXNzTGlzdC5jb250YWlucygnaW52YWxpZCcpID09IGZhbHNlKSAmJiAocmVnaXN0ZXJGaXJzdE5hbWUuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbnZhbGlkJykgPT0gZmFsc2UpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWVQLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZVAuY2xhc3NMaXN0LnJlbW92ZSgnaW52YWxpZCcpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaWRQID0gcEZpZWxkLmdldEF0dHJpYnV0ZSgnaWQnKTsvL2xvb2tpbmcgZm9yIHRoZSBpZCBvZiB0aGUgPHA+IHRhZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZFAgPT0gKGlkSW5wdXQgKyAnUCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcEZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmFsaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gXG4gICAgICAgIFxuICAgIH0pO1xufSk7XG5cblxuXG5yZWdpc3RlckZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIFxuICAgIC8vYSBmdW5jdGlvbiB0aGF0IHdpbGwgcmV0dXJuIHRydWUgaWYgdGhlIGlucHV0cyBoYXMgJ2ludmFsaWQnIGNsYXNzXG4gICAgLy9hZnRlcndhcmRzIGl0IHdpbGwgY2hlY2sgaWYgc29tZSBvZiB0aGUgZm9ybSdzIDxwPiB0YWdzIGhhcyAnaW52YWxpZCcgY2xhc3NcbiAgICBjb25zdCBjbGFzc0xpc3RDaGVjayA9IChlbGVtZW50KSA9PiB7XG4gICAgICAgIHJldHVybiBlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucygnaW52YWxpZCcpO1xuICAgIH1cblxuICAgIC8vc29tZSgpIG1ldGhvZCB3b3JrcyBvbiBhcnJheSBvciBOb2RlTGlzdCwgYnV0IHJlZ2lzdGVyRm9ybUlucHV0RmllbGRzIGFuZCByZWdpc3RlckZvcm1QRmllbGRzXG4gICAgLy9hcmUgSFRNTCBDb2xsZWN0aW9uLCBzbyBmaXJzdCBpJ20gY2hhbmdpbmcgdGhlbSB0byBhbiBhcnJheSBhbmQgdGhlbiBJIGFkZCBzb21lKCkgbWV0aG9kIFxuICAgIGlmKChBcnJheS5mcm9tKHJlZ2lzdGVyRm9ybUlucHV0RmllbGRzKS5zb21lKGNsYXNzTGlzdENoZWNrKSkgfHwgKEFycmF5LmZyb20ocmVnaXN0ZXJGb3JtUEZpZWxkcykuc29tZShjbGFzc0xpc3RDaGVjaykpKXsgLy9jaGVja2luZyBpZiBzb21lIG9mIHRoZSBpbnB1dCBmaWVsZHMgY29udGFpbiAnaW52YWxpZCcgY2xhc3NcbiAgICAgICAgY29uc29sZS5sb2coJ2RvIG5vdGhpbmcnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNvbnN0IGVtYWlsID0gcmVnaXN0ZXJGb3JtLmVtYWlsLnZhbHVlO1xuICAgICAgICBjb25zdCBwYXNzd29yZCA9IHJlZ2lzdGVyRm9ybS5wYXNzd29yZC52YWx1ZTtcbiAgICAgICAgY29uc3QgcmVnaXN0ZXJlZE5pY2tuYW1lID0gcmVnaXN0ZXJGb3JtLm5pY2tuYW1lUmVnaXN0ZXJlZFVzZXIudmFsdWU7XG4gICAgICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhkYXRhYmFzZSwgJ25pY2tuYW1lc0NvbGxlY3Rpb24nLCByZWdpc3RlcmVkTmlja25hbWUpO1xuXG5cbiAgICAgICAgLy9XZSB3YW4ndCB0aGUgTmlja25hbWUgdG8gYmUgdW5pcXVlLCBzbyB3ZSdsbCB1c2UgZ2V0RG9jIGluIG9yZGVyIHRvIGNoZWNrIGlmIHRoZVxuICAgICAgICAvL25pY2tuYW1lc0NvbGxlY3Rpb24gYWxyZWFkeSBoYXMgdGhlIHJlZ2lzdGVyZWROaWNrbmFtZSBpbiBpdFxuICAgICAgICBnZXREb2MoZG9jUmVmKSBcbiAgICAgICAgICAgIC50aGVuKChmaXJlRG9jKSA9PiB7IC8vZmlyZURvYyBpcyB0aGUgbmFtZSB0aGF0IEkgZ2F2ZSB0byB0aGUgZG9jLCBiZWNhdXNlIEkgZGlkbid0IHdhbnQgdG8gY29uZnVzZSB0aGUgYnJvd3NlciB3aXRoIHRoZSBkb2MgZnVuY3Rpb24gKHRoYXQgYmVsb25ncyB0byBmaXJlYmFzZSlcbiAgICAgICAgICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBpZiAoZmlyZURvYy5kYXRhKCkgPT0gbnVsbCkgeyAvL2l0IG1lYW5zIHRoYXQgdGhlcmUgaXNuJ3QgYW55IHVzZXIgd2l0aCB0aGlzIE5pY2tuYW1lXG4gICAgICAgICAgICAgICAgICAgIC8vc28gd2UnbGwgY29udGludWUgd2l0aCB0aGUgcmVnaXN0cmF0aW9uIG9mIHRoZSBuZXcgdXNlcjpcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkvL2ZpcmViYXNlIG1ldGhvZFxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGNyZWQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyAoJyB1c2VyIHJlZ2lzdGVyZWQ6ICcsIGNyZWQudXNlcik7Ly9uZXcgdXNlcidzIGluZm8pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2NvcmUnLCAwKTsvL2FkZGluZyBzY29yZSB0byBsb2NhbCBzdG9yYWdlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25hbWUnLCByZWdpc3RlcmVkTmlja25hbWUpOy8vYWRkaW5nIHRoZSByZWdpc3RlcmVkTmlja25hbWUgdG8gdGhlIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYmVzdFNjb3JlJywgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Njb3JlJywgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB1cGRhdGVQcm9maWxlKGF1dGguY3VycmVudFVzZXIsIHsgZGlzcGxheU5hbWU6IHJlZ2lzdGVyZWROaWNrbmFtZSB9KSkgLy91cGRhdGVQcm9maWxlIGlzIGEgZmlyZWJhc2UgbWV0aG9kLCB3aGljaCBjcmVhdGVzIHRoZSB1c2VyJ3MgZGlzcGxheU5hbWUuIE9ubHkgXCJyZWdpc3RlcmVkTmlja25hbWVcIiBpcyBhIHZhcmllbnQgdGhhdCBJIGNyZWF0ZWQuIFxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmZvcm1zLm5pY2tuYW1lRm9ybS5uaWNrbmFtZS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLCBhdXRoLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lKTsvL0kgZGVmaW5lZCB0aGF0LCBzbyB0aGVyZSB3b24ndCBiZSBhIG1pc3Rha2Ugd2hlbiB0aGUgdXNlciB3aWxsIHN0YXJ0IHBsYXlpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyAoJ25pY2tuYW1lOiAnICsgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSArIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnIGVtYWlsOiAnICsgYXV0aC5jdXJyZW50VXNlci5lbWFpbCArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgdXNlcklEOiAnICsgYXV0aC5jdXJyZW50VXNlci51aWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3NldHRpbmcgYSBuZXcgZG9jICh3aXRoIHVzZXIncyBOaWNrbmFtZSkgdG8gZmlyZWJhc2UgZGF0YWJhc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXREb2MoZG9jUmVmLCB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOaWNrbmFtZTogcmVnaXN0ZXJlZE5pY2tuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnV2UgaGF2ZSBzZXQgdGhlIG5ldyBkb2NzJyk7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7ICAvL2NhdGNoIGZvciBzZXREb2NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydCgnVGhlcmUgd2FzIGEgcHJvYmxlbSBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RG9jKGRvYyhkYXRhYmFzZSwgJ3VzZXJzU2NvcmUnLCBhdXRoLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lKSwgeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2NvcmU6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE5pY2tuYW1lOiByZWdpc3RlcmVkTmlja25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdXZSBoYXZlIHNldCB0aGUgb3RoZXIgZG9jcycpOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJGb3JtLnJlc2V0KCk7Ly9jbGVhbmluZyB0aGUgZm9ybVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJGb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lRm9ybUxhYmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5pY2tuYW1lRm9ybVRleHRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWdpc3RlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduSW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2VYLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNQVGFnLnRleHRDb250ZW50ID0gcmVnaXN0ZXJlZE5pY2tuYW1lICsgJywgJyArIHBbY3VycmVudFN0YWdlXTsgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxN3B4JztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmNvbG9yID0gJyM1NTUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduT3V0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaChlcnIgPT4geyAgLy9jYXRjaCBmb3Igc2V0RG9jXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1RoZXJlIHdhcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QuJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdXJnbGFzcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7ICAvL2NhdGNoIGZvciBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIubWVzc2FnZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmstcmVxdWVzdC1mYWlsZWQnKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2knbSBwdXR0aW5nIHRoZSBhbGVydCBpbnNpZGUgc2V0VGltZW91dCwgc28gaXQgd2lsbCB3b3JrIGFmdGVyIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoZSBob3VyZ2xhc3MgZGlzYXBwZXJhcyBhbmQgbm90IGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiTmV0d29yayByZXF1ZXN0IGZhaWxlZCwgcGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbiBvciB0cnkgYWdhaW4gbGF0ZXIuXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ2VtYWlsLWFscmVhZHktaW4tdXNlJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVtYWlsIGFscmVhZHkgaW4gdXNlLCBwbGVhc2UgY2hvb3NlIGEgZGlmZmVyZW50IG9uZS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnd2Vhay1wYXNzd29yZCcpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJQYXNzd29yZCBzaG91bGQgYmUgYXQgbGVhc3QgNiBjaGFyYWN0ZXJzLlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwiVGhlcmUgd2FzIGEgcHJvYmxlbSBwcm9jZXNzaW5nIHlvdXIgcmVxdWVzdC5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsgLy9pZiB0aGUgTmlja25hbWUgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05pY2tuYW1lIGFscmVhZHkgZXhpc3RzOicsIGZpcmVEb2MuZGF0YSgpKTtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoJ1RoaXMgbmlja25hbWUgaXMgYWxyZWFkeSB0YWtlbiwgcGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCBvbmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGVyciA9PiB7IC8vY2F0Y2ggZm9yIGdldERvY1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBtZXNzYWdlIGZvciBnZXREb2M6JywgZXJyLm1lc3NhZ2UpO1xuICAgICAgICBcbiAgICAgICAgICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCJUaGVyZSB3YXMgYSBwcm9ibGVtIHByb2Nlc3NpbmcgeW91ciByZXF1ZXN0LiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiKTtcbiAgICAgICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICAgICAgfSlcbiAgICB9XG59KTtcblxuXG5zaWduSW5Gb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBlbWFpbCA9IHNpZ25JbkZvcm0uZW1haWwudmFsdWU7XG4gICAgY29uc3QgcGFzc3dvcmQgPSBzaWduSW5Gb3JtLnBhc3N3b3JkLnZhbHVlO1xuICAgIGhvdXJnbGFzcy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcblxuICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZClcbiAgICAudGhlbihjcmVkID0+IHtcbiAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHNpZ25JbkZvcm0ucmVzZXQoKTsgLy9jbGVhbmluZyB0aGUgZm9ybVxuICAgICAgICBjb25zb2xlLmxvZygndXNlciBzaWduZWQgaW46ICcsIGNyZWQudXNlciwgJ25pY2tuYW1lOiAnLCBhdXRoLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lKTsvL2NyZWQudXNlciBzaG93cyB1cyB0aGUgdXNlcidzIGRldGFpbHNcbiAgICAgICAgaW5zdHJ1Y3Rpb25zUFRhZy50ZXh0Q29udGVudCA9IGF1dGguY3VycmVudFVzZXIuZGlzcGxheU5hbWUgKyAnLCAnICsgcFtjdXJyZW50U3RhZ2VdO1xuICAgICAgICBkb2N1bWVudC5mb3Jtcy5uaWNrbmFtZUZvcm0ubmlja25hbWUuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSk7Ly9JIGRlZmluZWQgdGhhdCwgc28gdGhlcmUgd29uJ3QgYmUgYSBtaXN0YWtlIHdoZW4gdGhlIHVzZXIgd2lsbCBzdGFydCBwbGF5aW5nXG4gICAgICAgIHNpZ25JbkZvcm1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgbmlja25hbWVGb3JtTGFiZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgbmlja25hbWVGb3JtVGV4dElucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHJlZ2lzdGVyQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHNpZ25JbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaWduT3V0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjbG9zZVguc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzE3cHgnO1xuICAgICAgICBidXR0b24uc3R5bGUuY29sb3IgPSAnIzU1NSc7XG4gICAgICAgIGJhY2tUb0dhbWUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgbWVkYWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzY29yZScpOy8vSSdtIGRvaW5nIGl0IGFmdGVyIGNsZWFyKCksIGJlY2F1c2UgaXQgY2xlYW5zIHRoZSBzY29yZSAoc28gaXQgd29uJ3QgYXBwZWFyIGlmIEknbGwgZG8gY29uc29sZS5sb2coKSlcbiAgICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpOy8vSSdtIGRvaW5nIGl0IGFmdGVyIGNsZWFyKCksIGJlY2F1c2UgaXQgY2xlYW5zIHRoZSBiZXN0U2NvcmUgKHNvIGl0IHdvbid0IGFwcGVhciBpZiBJJ2xsIGRvIGNvbnNvbGUubG9nKCkpXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSk7Ly9hZGRpbmcgdGhlIHJlZ2lzdGVyZWROaWNrbmFtZSB0byB0aGUgbG9jYWwgc3RvcmFnZVxuICAgICAgICAvL05vdyBJJ2xsIHNldCB0aGUgdXNlcidzIGJlc3RTY29yZSBmcm9tIGZpcmViYXNlIGludG8gdGhlIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgZ2V0RG9jKGRvYyhkYXRhYmFzZSwgJ3VzZXJzU2NvcmUnLCBhdXRoLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lKSlcbiAgICAgICAgICAgIC50aGVuKChkb2N1bSkgPT4ge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdiZXN0U2NvcmUnLCBkb2N1bS5kYXRhKCkuU2NvcmUpOy8vYWRkaW5nIHRoZSByZWdpc3RlcmVkTmlja25hbWUgdG8gdGhlIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvL2FuZCBpZiBiZXN0U2NvcmUgZXhpc3RzLCBJJ2xsIG1ha2UgaXQgYXBwZWFyIHdpdGggdGhlIG1lZGFsIGF0IHRoZSB0b3Agb2YgdGhlIHNjcmVlblxuICAgICAgICAgICAgICAgIGlmICgobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpICE9IG51bGwpICYmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJykgIT0gJycpICYmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJykgIT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVkYWxTcGFuLnRleHRDb250ZW50ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2Jlc3RTY29yZScpO1xuICAgICAgICAgICAgICAgICAgICBtZWRhbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvL2lmIHRoZXJlIGFyZW4ndCBhbnkgc2NvcmVzXG4gICAgICAgICAgICAgICAgICAgIG1lZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuICAgICAgICAgICAgfSlcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgICBob3VyZ2xhc3Muc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgY29uc29sZS5sb2coZXJyLm1lc3NhZ2UpO1xuXG4gICAgICAgIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygnd3JvbmctcGFzc3dvcmQnKSl7XG4gICAgICAgICAgICAvL2knbSBwdXR0aW5nIHRoZSBhbGVydCBpbnNpZGUgc2V0VGltZW91dCwgc28gaXQgd2lsbCB3b3JrIGFmdGVyIFxuICAgICAgICAgICAgLy90aGUgaG91cmdsYXNzIGRpc2FwcGVyYXMgYW5kIG5vdCBiZWZvcmVcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiV3JvbmcgcGFzc3dvcmQuXCIpO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfSBlbHNlIGlmIChlcnIubWVzc2FnZS5pbmNsdWRlcygndXNlci1ub3QtZm91bmQnKSl7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlVzZXIgbm90IGZvdW5kLlwiKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmstcmVxdWVzdC1mYWlsZWQnKSl7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGVydChcIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQuXCIpO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiU2lnbmluZyBpbiBlcnJvciwgcGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIik7XG4gICAgICAgICAgICB9LCAzMDApO1xuICAgICAgICB9XG5cbiAgICB9KVxuXG59KTtcblxuXG5cbi8vV2hlbiB0aGUgdXNlciBjbGljayB0aGUgc2VudGFuY2UgXCJGb3Jnb3QgeW91ciBwYXNzd29yZD9cIjpcbmZvcmdvdFBhc3N3b3JkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgZm9yZ290Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIHNpZ25JbkZvcm1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjbG9zZVguc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjbG9zZVgyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAvL3RoZSBYIGZvciBmb3Jnb3RDb250YWluZXJcbiAgICBiYWNrVG9HYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xufSk7XG5cblxuY2xvc2VYMi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGZvcmdvdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHNpZ25JbkZvcm1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgY2xvc2VYLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGNsb3NlWDIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBiYWNrVG9HYW1lLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGZvcmdvdEZvcm0ucmVzZXQoKTtcbn0pO1xuXG5iYWNrVG9HYW1lLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGZvcmdvdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIHNpZ25JbkZvcm1Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjbG9zZVguc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBjbG9zZVgyLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgYmFja1RvR2FtZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGZvcmdvdEZvcm0ucmVzZXQoKTtcbn0pO1xuXG5cbmZvcmdvdEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZm9yZ290RW1haWxWYWx1ZSA9IGZvcmdvdEZvcm0uZW1haWwudmFsdWU7XG4gICAgY29uc29sZS5sb2coZm9yZ290RW1haWxWYWx1ZSk7XG4gICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGVtYWlsU2VudFAuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9uSXNPbicpO1xuICAgIGVtYWlsU2VudFAuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uUmVtb3ZlZCcpO1xuXG4gICAgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCBmb3Jnb3RFbWFpbFZhbHVlKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgaG91cmdsYXNzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIC8vIFBhc3N3b3JkIHJlc2V0IGVtYWlsIHNlbnQhXG4gICAgICAgIGNvbnNvbGUubG9nKFwiRW1haWwgc2VudCFcIik7XG4gICAgICAgIGVtYWlsU2VudC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBlbWFpbFNlbnRQLnN0eWxlLmFuaW1hdGlvbiA9ICdlbWFpbFNlbnQgMi41cyBlYXNlIGZvcndhcmRzIG5vcm1hbCc7IFxuXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgZW1haWxTZW50LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBlbWFpbFNlbnRQLmNsYXNzTGlzdC5hZGQoJ2FuaW1hdGlvblJlbW92ZWQnKTtcbiAgICAgICAgICAgIGVtYWlsU2VudFAuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uSXNPbicpOy8vaXQgd2lsbCByZXNldCB0aGUgZW1haWxTZW50IGFuaW1hdGlvblxuICAgICAgICB9LCAyNTAwKTtcblxuICAgICAgICBmb3Jnb3RGb3JtLnJlc2V0KCk7XG4gICAgICAgIGZvcmdvdENvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaWduSW5Gb3JtQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBjbG9zZVguc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNsb3NlWDIuc3R5bGUuZGlzcGxheSA9ICdub25lJzsgLy90aGUgWCBmb3IgZm9yZ290Q29udGFpbmVyXG4gICAgICAgIGJhY2tUb0dhbWUuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIGhvdXJnbGFzcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlO1xuICAgICAgICBjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKTtcbiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ25ldHdvcmstcmVxdWVzdC1mYWlsZWQnKSkge1xuICAgICAgICAgICAgLy9pJ20gcHV0dGluZyB0aGUgYWxlcnQgaW5zaWRlIHNldFRpbWVvdXQsIHNvIGl0IHdpbGwgd29yayBhZnRlciBcbiAgICAgICAgICAgIC8vdGhlIGhvdXJnbGFzcyBkaXNhcHBlcmFzIGFuZCBub3QgYmVmb3JlXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGVydChcIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQsIHBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24gb3IgdHJ5IGFnYWluIGxhdGVyLlwiKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnaW52YWxpZC1lbWFpbCcpKSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGVydChcIkludmFsaWQgZW1haWwsIHBsZWFzZSB2ZXJpZnkgeW91ciBlbWFpbCBiZWxvdyBhbmQgcmVzZW5kIGl0LlwiKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndXNlci1ub3QtZm91bmQnKSkge1xuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgYWxlcnQoXCJBY2NvdW50IGRvZXMgbm90IGV4aXN0LlwiKTtcbiAgICAgICAgICAgIH0sIDMwMCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBhbGVydChcIlRoZXJlIHdhcyBhIHByb2JsZW0gcHJvY2Vzc2luZyB5b3VyIHJlcXVlc3QuXCIpO1xuICAgICAgICAgICAgfSwgMzAwKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cblxuc2lnbk91dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBzaWduT3V0QnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgcmVnaXN0ZXJCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdpbmxpbmUtYmxvY2snO1xuICAgIHNpZ25JbkJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgbG9jYWxTdG9yYWdlLmNsZWFyKCk7IC8vY2xlYXJzIGFsbCBsb2NhbFN0b3JhZ2UgaXRlbXNcbiAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpOy8vcHJldmVudGluZyB0aGUgY2xlYXJlZCBuYW1lIHRvIGFwcGVhciBpbiB0aGUgY29uc29sZSAoaWYgd2Ugd2lsbCBkbyBjb25zb2xlLmxvZygpKVxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdzY29yZScpOy8vcHJldmVudGluZyB0aGUgY2xlYXJlZCBzY29yZSB0byBhcHBlYXIgaW4gdGhlIGNvbnNvbGUgKGlmIHdlIHdpbGwgZG8gY29uc29sZS5sb2coKSlcblxuICAgIC8vIGlmICh1bnN1YnNjcmliZSAhPSBudWxsKSB7XG4gICAgLy8gICAgIHVuc3Vic2NyaWJlKCk7XG4gICAgLy8gfVxuXG4gICAgc2lnbk91dChhdXRoKVxuICAgIC50aGVuICgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0aGUgdXNlciBsb2dnZWQgb3V0Jyk7XG4gICAgICAgIGluc3RydWN0aW9uc1BUYWcudGV4dENvbnRlbnQgPSBwQW5vbltjdXJyZW50U3RhZ2VdO1xuICAgICAgICBtZWRhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBuaWNrbmFtZUZvcm1MYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgIG5pY2tuYW1lRm9ybUxhYmVsLnN0eWxlLnJpZ2h0ID0gJzNweCc7XG4gICAgICAgIG5pY2tuYW1lRm9ybVRleHRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ2lubGluZS1ibG9jayc7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmNvbG9yID0gJ2J1dHRvbnRleHQnO1xuICAgICAgICBkb2N1bWVudC5mb3Jtcy5uaWNrbmFtZUZvcm0ubmlja25hbWUuc2V0QXR0cmlidXRlKFwidmFsdWVcIiwgJycpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICB9KVxufSk7XG5cblxuLy9jaGVja2luZyBpZiB0aGUgdXNlciBzaWduZWQgaW4gKGl0J3MgaW1wb3J0YW50IGZvciBjYXNlcyB3aGVyZSB0aGUgdXNlciByZWZyZXNoZXMgdGhlIHBhZ2UpXG5sZXQgc3RhdHVzID0gMDtcblxub25BdXRoU3RhdGVDaGFuZ2VkKGF1dGgsICh1c2VyKSA9PiB7XG4gICAgaWYgKHVzZXIpIHsgLy9pZiBBdXRoIHVzZXIgZXhpc3RzLCB3ZSB3YW50IHRoZSBzaWduT3V0IGJ1dHRvbiB0byBiZSBvbiwgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgZ2FtZSAoaW5zdGVhZCBvZiB0aGUgcmVnaXN0ZXIgYW5kIHNpZ25JbiBidXR0b25zKVxuICAgICAgICBzdGF0dXMgPSAxO1xuICAgICAgICBjb25zb2xlLmxvZyhzdGF0dXMsIHVzZXIpO1xuICAgICAgICByZWdpc3RlckJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaWduSW5CdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJzsgXG4gICAgICAgIHNpZ25PdXRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGluc3RydWN0aW9uc1BUYWcudGV4dENvbnRlbnQgPSBhdXRoLmN1cnJlbnRVc2VyLmRpc3BsYXlOYW1lICsgJywgJyArIHBbY3VycmVudFN0YWdlXTtcbiAgICAgICAgbmlja25hbWVGb3JtTGFiZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgbmlja25hbWVGb3JtVGV4dElucHV0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIGJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxN3B4JztcbiAgICAgICAgYnV0dG9uLnN0eWxlLmNvbG9yID0gJyM1NTUnO1xuICAgIH0gZWxzZSB7IC8vaWYgdGhlcmUgaXNuJ3QgYW55IHVzZXJcbiAgICAgICAgc3RhdHVzID0gMDtcbiAgICAgICAgY29uc29sZS5sb2coc3RhdHVzLCB1c2VyKTtcbiAgICB9XG59KVxuXG5cblxuZXhwb3J0IHsgZmlyZWJhc2VDb25maWcsIGFwcCwgYXV0aCwgZGF0YWJhc2UsIHVzZXJzQ3VycmVudFN0YWdlLCByZWdpc3RlckJ1dHRvbiwgcmVnaXN0ZXJCdXR0b25FdmVudCwgcmVnaXN0ZXJGb3JtQ29udGFpbmVyLCByZWdpc3RlckZvcm0sIHJlZ2lzdGVyRm9ybUlucHV0RmllbGRzLCByZWdpc3RlckZvcm1QRmllbGRzLCByZWdpc3Rlckxhc3ROYW1lLCByZWdpc3RlckZpcnN0TmFtZSwgbGFzdE5hbWVQLCBmaXJzdE5hbWVQLCBzaWduSW5CdXR0b24sIHNpZ25JbkJ1dHRvbkV2ZW50LCBzaWduSW5Gb3JtQ29udGFpbmVyLCBzaWduSW5Gb3JtLCBjbG9zZVgsIGluc3RydWN0aW9uc1AsIG5pY2tuYW1lRm9ybSwgbmlja25hbWVGb3JtTGFiZWwsIG5pY2tuYW1lRm9ybVRleHRJbnB1dCwgYnV0dG9uLCBzaWduT3V0QnV0dG9uLCBob3VyZ2xhc3MsIHJlZywgc3RhdHVzLCBxdWl0IH07IiwiaW1wb3J0IHsgYm9keSwgaGVhZGVyLCBjdXJzb3IsIGNvcm9uYUNpcmNsZSwgZXllcyB9IGZyb20gJy4vY3Vyc29yQW5kQ29yb25hJztcbmltcG9ydCB7IHNlY29uZHNGb3JFYWNoU3RhZ2UsIHBGYWlsdXJlLCBwRmFpbHVyZUFub24sIHAsIHBBbm9uIH0gZnJvbSAnLi9zdG9yeUxpbmUnO1xuXG5cbmNvbnN0IHRyaWFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRyaWFsJyk7XG5cbmxldCBzdG9wID0gMDtcbmNvbnN0IHN0b3BXb3JraW5nID0gKGJpbmFyeSkgPT4gc3RvcCA9IGJpbmFyeTsgLy93ZSBjYW4ndCBleHBvcnQgXCJzdG9wXCIgYXMgbGV0LCBzbyB3ZSBtYWtlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYSBmdW5jdGlvbiB0aGF0IHdlIGNhbiBleHBvcnQsIGFuZCBpdCdsbFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NoYW5nZSB0aGUgdmFsdWUgb2Ygc3RvcFxuXG5sZXQgb3VyVmlld1BvcnRXaWR0aCA9IGJvZHkuY2xpZW50V2lkdGg7IC8vY2xpZW50V2lkdGggc2hvd3MgdGhlIHdpZHRoIG9mIHRoZSBlbGVtZW50IHdlIGNob29zZVxuLy9jb25zdCBvdXJWaWV3UG9ydEhlaWdodCA9IGJvZHkuY2xpZW50SGVpZ2h0O1xuY29uc29sZS5sb2cgKCdvdXJWaWV3UG9ydFdpZHRoOiAnICsgb3VyVmlld1BvcnRXaWR0aCArICcgb3VyVmlld1BvcnRIZWlnaHQ6ICcgK2JvZHkuY2xpZW50SGVpZ2h0KVxuXG4vL0lmIHNvbWVvbmUgY2hhbmdlcyB0aGUgc2NyZWVuIHNpemUsIHdlIHdhbid0IHRvIHByZXZlbnQgYnVnczpcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgb3VyVmlld1BvcnRXaWR0aCA9IGJvZHkuY2xpZW50V2lkdGg7XG59KTtcblxuXG5cbi8vdGhlIGJ1dHRvbidzIGV2ZW50IGxpc3RlbmVyIHdpbGwgY2FsbCB0aGlzIGZ1bmN0aW9uLCB3aGljaCB3aWxsIG1vdmUgdGhlIGZpZ3VyZXMgaW4gcmFuZG9tIGRpcmVjdGlvbnNcbmNvbnN0IG1vdmUgPSAoZmlndXJlLCBzcGVlZCkgPT4ge1xuICAgIC8vbWFraW5nIHJhbmRvbiBpbnRlZ2VycyBmb3IgdGhlIGZpZ3VyZXMgdG8gbW92ZSBpbiBkaWZmZXJlbnQgZGlyZWN0aW9uc1xuICAgIGxldCByYW5kb21JbnRYID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDIgLSAoLTIpICsgMSkpIC0yOyAvL3RoaXMgY29uc3Qgd2lsbCBnaXZlIGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiAtMiBhbmQgKzJcbiAgICBsZXQgcmFuZG9tSW50WSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgyIC0gKC0yKSArIDEpKSAtMjsgLy90aGlzIGNvbnN0IHdpbGwgZ2l2ZSBhIHJhbmRvbSBpbnRlZ2VyIGJldHdlZW4gLTIgYW5kICsyXG4gICAgaWYgKHJhbmRvbUludFggPT0gMCAmJiByYW5kb21JbnRZID09IDApe1xuICAgICAgICByYW5kb21JbnRYID0gMjtcbiAgICB9XG4gICBcbiAgICAvL2NvbnN0IGN1cnJlbnRGaWd1cmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjJytmaWd1cmUpO1xuXG4gICAgLy90aGUgd2F5IHRoZSBmaWd1cmVzIG1vdmVcbiAgICBjb25zdCBmaWd1cmVNb3ZlbWVudCA9IChyYW5kb21JbnRYLCByYW5kb21JbnRZKSA9PiB7XG4gICAgICAgXG4gICAgICAgIGlmIChzdG9wID09IDEpe1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChtb3ZlbWVudEludGVydmFsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vNCBydWxlcyBmb3IgdGhlIGNvcm5lcnMnIGNhc2VzOlxuICAgICAgICBpZiAoKGZpZ3VyZS5vZmZzZXRUb3AgPD0gMSkgJiYgKGZpZ3VyZS5vZmZzZXRMZWZ0ID49IChib2R5LmNsaWVudFdpZHRoIC01NiAtIDEpKSkge1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLnRvcCA9ICgoYm9keS5jbGllbnRIZWlnaHQgLTU2IC0gMikgKyAncHgnKTtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS5sZWZ0ID0gJzJweCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKGZpZ3VyZS5vZmZzZXRUb3AgPD0gMSkgJiYgKGZpZ3VyZS5vZmZzZXRMZWZ0IDw9IDEpKSB7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUudG9wID0gKChib2R5LmNsaWVudEhlaWdodCAtNTYgLSAyKSArICdweCcpO1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLmxlZnQgPSAoKG91clZpZXdQb3J0V2lkdGggLTU2IC0yKSArICdweCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChmaWd1cmUub2Zmc2V0VG9wID49IChib2R5LmNsaWVudEhlaWdodCAtNTYgLSAxKSkgJiYgKGZpZ3VyZS5vZmZzZXRMZWZ0IDw9IDEpKSB7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUudG9wID0gJzJweCc7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUubGVmdCA9ICgob3VyVmlld1BvcnRXaWR0aCAtNTYgLTIpICsgJ3B4Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoKGZpZ3VyZS5vZmZzZXRUb3AgPj0gKGJvZHkuY2xpZW50SGVpZ2h0IC01NiAtIDEpKSAmJiAoZmlndXJlLm9mZnNldExlZnQgPj0gKGJvZHkuY2xpZW50V2lkdGggLTU2IC0gMSkpKSB7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUudG9wID0gJzJweCc7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUubGVmdCA9ICcycHgnO1xuICAgICAgICB9XG4gICAgICAgIC8vZm91ciBcImlmXCIgcnVsZXMgZm9yIGNhc2VzIHRoYXQgdGhlIGZpZ3VyZXMgcmVhY2ggdGhlIHNjcmVlbiBlZGdlczpcbiAgICAgICAgZWxzZSBpZiAoZmlndXJlLm9mZnNldFRvcCA8PSAxKSB7IC8vb2Zmc2V0VG9wIHNob3dzIHRoZSBsb2NhdGlvbiBjb21wYXJpbmcgdG8gdGhlIGZhdGhlciAodGhlIGJvZHkpLiBXZSBuZWVkIHRoYXQgb2Zmc2V0VG9wIHdpbGwgYmUgMCBvciAxIChhbmQgbm90IG9ubHkgb2Zmc2V0VG9wPTApLCBiZWNhdXNlIHNvbWV0aW1lcyB0aGUgZmlndXJlcyBkbyAyIHN0ZXBzICgyIHBpeGVscykgYXQgYSB0aW1lXG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUudG9wID0gKChib2R5LmNsaWVudEhlaWdodCAtNTYgLSAyKSArICdweCcpOy8vTWludXMgMiwgYmVjYXVzZSB0aGUgZmlndXJlcyB3aWxsIGJlIHN0dWNrZWQgaWYgd2Ugd2lsbCBzZW5kIHRoZW0gdG8gb3VyVmlld1BvcnRIZWlnaHRNaW51czEgb3Igb3VyVmlld1BvcnRIZWlnaHQuIEFuZCBtaW51cyA1NiBiZWNhdXNlIG9mIHRoZSBzaXplIG9mIHRoZSBmaWd1cmVzICh3ZSB3YW50IHRoZW0gdG8gZGlzYXBwZWFyIGF0IHRoZSBlZGdlIG9mIHRoZSBzY3JlZW4gYW5kIG5vdCA1NnB4IGFmdGVyIGl0KVxuICAgICAgICAgICAgZmlndXJlLnN0eWxlLmxlZnQgPSAoYm9keS5jbGllbnRXaWR0aCAtNTYgLSBwYXJzZUludChmaWd1cmUuc3R5bGUubGVmdCkpICsgJ3B4JztcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSBpZiAoZmlndXJlLm9mZnNldFRvcCA+PSAoYm9keS5jbGllbnRIZWlnaHQgLTU2IC0gMSkpIHtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS50b3AgPSAnMnB4JztcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS5sZWZ0ID0gKGJvZHkuY2xpZW50V2lkdGggLTU2IC0gcGFyc2VJbnQoZmlndXJlLnN0eWxlLmxlZnQpKSArICdweCc7XG4gICAgICAgIH0gXG4gICAgICAgIGVsc2UgaWYgKGZpZ3VyZS5vZmZzZXRMZWZ0IDw9IDEpIHtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS5sZWZ0ID0gKChvdXJWaWV3UG9ydFdpZHRoIC01NiAtMikgKyAncHgnKTtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS50b3AgPSAoYm9keS5jbGllbnRIZWlnaHQgLTU2IC0gcGFyc2VJbnQoZmlndXJlLnN0eWxlLnRvcCkpICsgJ3B4JztcbiAgICAgICAgfSBcbiAgICAgICAgZWxzZSBpZiAoZmlndXJlLm9mZnNldExlZnQgPj0gKGJvZHkuY2xpZW50V2lkdGggLTU2IC0gMSkpIHtcbiAgICAgICAgICAgIGZpZ3VyZS5zdHlsZS5sZWZ0ID0gJzJweCc7XG4gICAgICAgICAgICBmaWd1cmUuc3R5bGUudG9wID0gKGJvZHkuY2xpZW50SGVpZ2h0IC01NiAtIHBhcnNlSW50KGZpZ3VyZS5zdHlsZS50b3ApKSArICdweCc7XG4gICAgICAgIH0gXG4gICAgICAgIC8vaWYgdGhlIGZpZ3VyZSBpcyBub3QgaW4gdGhlIGVkZ2Ugb3IgaW4gdGhlIGNvcm5lcixcbiAgICAgICAgLy90aGVuIHRoYXQncyB0aGUgd2F5IGl0IHdpbGwgbW92ZSBvbiBzY3JlZW46XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZmlndXJlLnN0eWxlLnRvcCA9IHBhcnNlSW50KGZpZ3VyZS5zdHlsZS50b3ApICsgcmFuZG9tSW50WSArICdweCc7IC8vdGhlIG1ldGhvZCBwYXJzZUludCB0YWtlcyBvbmx5IHRoZSBudW1iZXIgKGFuZCBsZWF2ZXMgb3V0IHRoZSBzdHJpbmcgJ3B4JyBhdHRhY2hlZCB0byBpdDopIFxuICAgICAgICAgICAgZmlndXJlLnN0eWxlLmxlZnQgPSBwYXJzZUludChmaWd1cmUuc3R5bGUubGVmdCkgKyByYW5kb21JbnRYICsgJ3B4JztcbiAgICAgICAgfVxuICAgICAgICAvL2NvbnNvbGUubG9nKGZpZ3VyZS5zdHlsZS5iYWNrZ3JvdW5kICsgJyBYOiAnKyBmaWd1cmUuc3R5bGUubGVmdCArICcgWTogJyArIGZpZ3VyZS5zdHlsZS50b3ApO1xuXG4gICAgfVxuICAgIFxuICAgIC8vbm93IHdlJ2xsIGNhbGwgdGhlIGZpZ3VyZU1vdmVtZW50IGZ1bmN0aW9uLCBidXQgdGhlIGludGVydmFsIGZvciB0aGlzIGZ1bmN0aW9uXG4gICAgLy93aWxsIGJlIGhpZ2hlciBmcmVxdWVuY3kgZm9yIGZpZ3VyZXMgMTEtMTQgKHRoZSBiYXRzKS4gXG4gICAgbGV0IG1vdmVtZW50SW50ZXJ2YWw7XG4gICAgY29uc3QgYmF0QXJyYXkgPSBbMTEsIDEyLCAxMywgMTRdO1xuICAgIC8vd2Ugd2lsbCB1c2Ugc29tZSgpIG1ldGhvZCwgd2hpY2ggY2hlY2tzIGlmICBhdCBsZWFzdCBvbmUgZWxlbWVudCBpbiB0aGUgYXJyYXlcbiAgICAvL3Bhc3NlcyB0aGUgdGVzdCBpbXBsZW1lbnRlZCBpbnNpZGUgc29tZSgpXG4gICAgaWYgKGJhdEFycmF5LnNvbWUoZWxlbWVudCA9PiBmaWd1cmUuc3R5bGUuYmFja2dyb3VuZC5pbmNsdWRlcyhlbGVtZW50KSkpIHtcbiAgICAgICAgbW92ZW1lbnRJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IGZpZ3VyZU1vdmVtZW50KHJhbmRvbUludFgsIHJhbmRvbUludFkpLCA5KTtcbiAgICB9IGVsc2UgaWYgKHNwZWVkID09ICdmYXN0JykgeyAvL2ZvciBjYXNlcyB0aGF0IGFyZSBub3QgYmF0c1xuICAgICAgICBtb3ZlbWVudEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmlndXJlTW92ZW1lbnQocmFuZG9tSW50WCwgcmFuZG9tSW50WSksIDEyKTtcbiAgICAgICAgY29uc29sZS5sb2coXCJnb2luZyBmYXN0IG5vd1wiKTtcbiAgICB9IGVsc2UgaWYgKHNwZWVkID09ICdzbG93JykgeyAvL2ZvciBjYXNlcyB0aGF0IGFyZSBub3QgYmF0c1xuICAgICAgICBtb3ZlbWVudEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmlndXJlTW92ZW1lbnQocmFuZG9tSW50WCwgcmFuZG9tSW50WSksIDQwKTtcbiAgICB9IGVsc2UgeyAvL2ZvciBjYXNlcyB0aGF0IGFyZSBub3QgYmF0c1xuICAgICAgICBtb3ZlbWVudEludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gZmlndXJlTW92ZW1lbnQocmFuZG9tSW50WCwgcmFuZG9tSW50WSksIDIwKTtcbiAgICB9XG4gICAgXG5cbn07XG5cblxuY29uc3Qgc2xvdyA9ICdzbG93JztcblxuQXJyYXkuZnJvbSh0cmlhbCkuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICBlbGVtZW50LnN0eWxlLnRvcCA9IE1hdGgucmFuZG9tKCkqKGJvZHkuY2xpZW50SGVpZ2h0IC0gNTYpICsgJ3B4JzsgLy81NiBpcyB0aGUgc2l6ZSBvZiB0aGUgZmlndXJlcy4gYm9keS5jbGllbnRIZWlnaHQgZ2l2ZXMgdGhlIHZpZXdwb3J0IHNpemUgd2l0aG91dCB0aGUgc2Nyb2xsIGJhclxuICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IE1hdGgucmFuZG9tKCkqKGJvZHkuY2xpZW50V2lkdGggLSA1NikgKyAncHgnOyAvLzU2IGlzIHRoZSBzaXplIG9mIHRoZSBmaWd1cmVzLlxuICAgIG1vdmUoZWxlbWVudCwgc2xvdyk7XG59KTtcblxuXG5leHBvcnQgeyBzdG9wV29ya2luZywgb3VyVmlld1BvcnRXaWR0aCwgbW92ZSwgdHJpYWwsIHNsb3cgfTsiLCJpbXBvcnQgeyByZWdpc3RlckJ1dHRvbiwgcmVnaXN0ZXJCdXR0b25FdmVudCwgc2lnbkluQnV0dG9uLCBzaWduSW5CdXR0b25FdmVudCwgaW5zdHJ1Y3Rpb25zUCwgbmlja25hbWVGb3JtIH0gZnJvbSAnLi9zaWduSW5BbmRSZWdpc3RlckZvcm1zJztcclxuaW1wb3J0IHsgbWVkYWwgfSBmcm9tICcuL2xvY2FsU3RvcmFnZSc7XHJcbmltcG9ydCB7IGJvZHkgfSBmcm9tICcuL2N1cnNvckFuZENvcm9uYSc7XHJcbmltcG9ydCB7IG1vdmUsIHNsb3cgfSBmcm9tICcuL2ZpZ3VyZXNNb3ZlbWVudCc7XHJcblxyXG5cclxuXHJcbmNvbnN0IGluc3RydWN0aW9uc0g0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2luc3RydWN0aW9ucyBoNCcpO1xyXG5jb25zdCB0cmlhbDMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHJpYWwzJyk7XHJcbmNvbnN0IHRyaWFsNCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblxyXG5jb25zdCBtb2JpbGVBbmRUYWJsZXRzID0gKCkgPT4ge1xyXG4gICAgcmVnaXN0ZXJCdXR0b24ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlZ2lzdGVyQnV0dG9uRXZlbnQpO1xyXG4gICAgc2lnbkluQnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBzaWduSW5CdXR0b25FdmVudCk7XHJcbiAgICBtZWRhbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG5cclxuICAgIHRyaWFsNC5jbGFzc0xpc3QuYWRkKCd0cmlhbCcsICd0cmlhbDQnKTtcclxuICAgIGJvZHkuaW5zZXJ0QmVmb3JlKHRyaWFsNCwgdHJpYWwzKTtcclxuICAgIHRyaWFsNC5zdHlsZS50b3AgPSBNYXRoLnJhbmRvbSgpKihib2R5LmNsaWVudEhlaWdodCAtIDU2KSArICdweCc7IC8vNTYgaXMgdGhlIHNpemUgb2YgdGhlIGZpZ3VyZXMuIGJvZHkuY2xpZW50SGVpZ2h0IGdpdmVzIHRoZSB2aWV3cG9ydCBzaXplIHdpdGhvdXQgdGhlIHNjcm9sbCBiYXJcclxuICAgIHRyaWFsNC5zdHlsZS5sZWZ0ID0gTWF0aC5yYW5kb20oKSooYm9keS5jbGllbnRXaWR0aCAtIDU2KSArICdweCc7IC8vNTYgaXMgdGhlIHNpemUgb2YgdGhlIGZpZ3VyZXMuXHJcbiAgICBtb3ZlKHRyaWFsNCwgJ2Zhc3QnKTtcclxufVxyXG5cclxuXHJcbi8vbWVkaWFRdWVyeSBmb3IgcGhvbmVzIGFuZCB0YWJsZXRzIGluIHBvcnRyYWl0IG9yaWVudGF0aW9uXHJcbmNvbnN0IG1lZGlhcTEgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKG9yaWVudGF0aW9uOiBwb3J0cmFpdCknKTtcclxuLy9mb3IgY2FzZXMgd2hlbiB1c2VyIGxvYWRzIHRoZSBnYW1lIG9uIHBob25lXHJcbmNvbnN0IGZvclBob25lc0FuZFRhYmxldHMgPSAobXEpID0+IHtcclxuICAgIGlmIChtcS5tYXRjaGVzKSB7XHJcbiAgICAgICAgbW9iaWxlQW5kVGFibGV0cygpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mb3JQaG9uZXNBbmRUYWJsZXRzKG1lZGlhcTEpO1xyXG5cclxuXHJcbi8vZXZlbnRMaXN0ZW5lciBmb3Igc3RhdGUgY2hhbmdlc1xyXG5tZWRpYXExLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChlKSA9PiB7XHJcbiAgICBpZiAoZS5tYXRjaGVzKSB7XHJcbiAgICAgICAgbW9iaWxlQW5kVGFibGV0cygpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG5cclxuLy9DaGVja2luZyBpZiB0aGUgdXNlciBpcyBvbiBhIG1vYmlsZS90YWJsZXQgZGV2aWNlXHJcbi8vSSB0b29rIHRoaXMgY29kZSBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzM1MTQ3ODQvd2hhdC1pcy10aGUtYmVzdC13YXktdG8tZGV0ZWN0LWEtbW9iaWxlLWRldmljZVxyXG5pZigvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXBhZHxpcmlzfGtpbmRsZXxBbmRyb2lkfFNpbGt8bGdlIHxtYWVtb3xtaWRwfG1tcHxuZXRmcm9udHxvcGVyYSBtKG9ifGluKWl8cGFsbSggb3MpP3xwaG9uZXxwKGl4aXxyZSlcXC98cGx1Y2tlcnxwb2NrZXR8cHNwfHNlcmllcyg0fDYpMHxzeW1iaWFufHRyZW98dXBcXC4oYnJvd3NlcnxsaW5rKXx2b2RhZm9uZXx3YXB8d2luZG93cyAoY2V8cGhvbmUpfHhkYXx4aWluby9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgLy9uYXZpZ2F0b3IudXNlckFnZW50IHJldHVybnMgYSBzdHJpbmcgZm9yIHRoZSBjdXJyZW50IGJyb3dzZXIuIEl0IGNvbnRhaW5zIGluZm9ybWF0aW9uIGFib3V0IHRoZSBicm93c2VyIG5hbWUsIHZlcnNpb24gYW5kIHBsYXRmb3JtIGFuZCB0aGlzIHdheSB3ZSBjYW4ga25vdyBpZiBpdCdzIGEgbW9iaWxlIGRldmljZSBvciBub3QuIFNvIGluIHRoaXMgY2FzZSB3ZSBjaGVjayBpZiB0aGUgc3RyaW5nIG9mIG5hdmlnYXRvci51c2VyQWdlbnQgY29udGFpbnMgb25lIG9mIHRoZSByZWdleCBwYXR0ZXJucyBvbiB0aGUgbGVmdCAodGhlc2UgcGF0dGVybnMgYXBwZWFycyBpbiBtb2JpbGUgYW5kIHRhYmxldCBkZXZpY2VzKS4gV2UgY2FuIHJlYWQgbW9yZSBhYm91dCBpdCBpbjogaHR0cHM6Ly93d3cudzNzY2hvb2xzLmNvbS9qc3JlZi9qc3JlZl9yZWdleHBfdGVzdC5hc3BcclxuICAgIHx8IC8xMjA3fDYzMTB8NjU5MHwzZ3NvfDR0aHB8NTBbMS02XWl8Nzcwc3w4MDJzfGEgd2F8YWJhY3xhYyhlcnxvb3xzXFwtKXxhaShrb3xybil8YWwoYXZ8Y2F8Y28pfGFtb2l8YW4oZXh8bnl8eXcpfGFwdHV8YXIoY2h8Z28pfGFzKHRlfHVzKXxhdHR3fGF1KGRpfFxcLW18ciB8cyApfGF2YW58YmUoY2t8bGx8bnEpfGJpKGxifHJkKXxibChhY3xheil8YnIoZXx2KXd8YnVtYnxid1xcLShufHUpfGM1NVxcL3xjYXBpfGNjd2F8Y2RtXFwtfGNlbGx8Y2h0bXxjbGRjfGNtZFxcLXxjbyhtcHxuZCl8Y3Jhd3xkYShpdHxsbHxuZyl8ZGJ0ZXxkY1xcLXN8ZGV2aXxkaWNhfGRtb2J8ZG8oY3xwKW98ZHMoMTJ8XFwtZCl8ZWwoNDl8YWkpfGVtKGwyfHVsKXxlcihpY3xrMCl8ZXNsOHxleihbNC03XTB8b3N8d2F8emUpfGZldGN8Zmx5KFxcLXxfKXxnMSB1fGc1NjB8Z2VuZXxnZlxcLTV8Z1xcLW1vfGdvKFxcLnd8b2QpfGdyKGFkfHVuKXxoYWllfGhjaXR8aGRcXC0obXxwfHQpfGhlaVxcLXxoaShwdHx0YSl8aHAoIGl8aXApfGhzXFwtY3xodChjKFxcLXwgfF98YXxnfHB8c3x0KXx0cCl8aHUoYXd8dGMpfGlcXC0oMjB8Z298bWEpfGkyMzB8aWFjKCB8XFwtfFxcLyl8aWJyb3xpZGVhfGlnMDF8aWtvbXxpbTFrfGlubm98aXBhcXxpcmlzfGphKHR8dilhfGpicm98amVtdXxqaWdzfGtkZGl8a2VqaXxrZ3QoIHxcXC8pfGtsb258a3B0IHxrd2NcXC18a3lvKGN8ayl8bGUobm98eGkpfGxnKCBnfFxcLyhrfGx8dSl8NTB8NTR8XFwtW2Etd10pfGxpYnd8bHlueHxtMVxcLXd8bTNnYXxtNTBcXC98bWEodGV8dWl8eG8pfG1jKDAxfDIxfGNhKXxtXFwtY3J8bWUocmN8cmkpfG1pKG84fG9hfHRzKXxtbWVmfG1vKDAxfDAyfGJpfGRlfGRvfHQoXFwtfCB8b3x2KXx6eil8bXQoNTB8cDF8diApfG13YnB8bXl3YXxuMTBbMC0yXXxuMjBbMi0zXXxuMzAoMHwyKXxuNTAoMHwyfDUpfG43KDAoMHwxKXwxMCl8bmUoKGN8bSlcXC18b258dGZ8d2Z8d2d8d3QpfG5vayg2fGkpfG56cGh8bzJpbXxvcCh0aXx3dil8b3Jhbnxvd2cxfHA4MDB8cGFuKGF8ZHx0KXxwZHhnfHBnKDEzfFxcLShbMS04XXxjKSl8cGhpbHxwaXJlfHBsKGF5fHVjKXxwblxcLTJ8cG8oY2t8cnR8c2UpfHByb3h8cHNpb3xwdFxcLWd8cWFcXC1hfHFjKDA3fDEyfDIxfDMyfDYwfFxcLVsyLTddfGlcXC0pfHF0ZWt8cjM4MHxyNjAwfHJha3N8cmltOXxybyh2ZXx6byl8czU1XFwvfHNhKGdlfG1hfG1tfG1zfG55fHZhKXxzYygwMXxoXFwtfG9vfHBcXC0pfHNka1xcL3xzZShjKFxcLXwwfDEpfDQ3fG1jfG5kfHJpKXxzZ2hcXC18c2hhcnxzaWUoXFwtfG0pfHNrXFwtMHxzbCg0NXxpZCl8c20oYWx8YXJ8YjN8aXR8dDUpfHNvKGZ0fG55KXxzcCgwMXxoXFwtfHZcXC18diApfHN5KDAxfG1iKXx0MigxOHw1MCl8dDYoMDB8MTB8MTgpfHRhKGd0fGxrKXx0Y2xcXC18dGRnXFwtfHRlbChpfG0pfHRpbVxcLXx0XFwtbW98dG8ocGx8c2gpfHRzKDcwfG1cXC18bTN8bTUpfHR4XFwtOXx1cChcXC5ifGcxfHNpKXx1dHN0fHY0MDB8djc1MHx2ZXJpfHZpKHJnfHRlKXx2ayg0MHw1WzAtM118XFwtdil8dm00MHx2b2RhfHZ1bGN8dngoNTJ8NTN8NjB8NjF8NzB8ODB8ODF8ODN8ODV8OTgpfHczYyhcXC18ICl8d2ViY3x3aGl0fHdpKGcgfG5jfG53KXx3bWxifHdvbnV8eDcwMHx5YXNcXC18eW91cnx6ZXRvfHp0ZVxcLS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudC5zdWJzdHJpbmcoMCw1KSkpIHsgLy9JIGNoZWNrIGlmIHRoZSBmaXJzdCA1IGxldHRlcnMgb2YgdGhlIHN0cmluZyBvZiB0aGUgbmF2aWdhdG9yLnVzZXJBZ2VudCBjb250YWlucyBvbmUgb2YgdGhlIHJlZ2V4IHBhdHRlcm5zIG9uIHRoZSBsZWZ0LlxyXG4gICAgXHJcbiAgICBpbnN0cnVjdGlvbnNQLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IC8vVGhpcyBkb2Vzbid0IGFwcGVhciBpbiB0aGUgY3NzIGZpbGVcclxuICAgIG5pY2tuYW1lRm9ybS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAgIC8vVGhpcyBkb2Vzbid0IGFwcGVhciBpbiB0aGUgY3NzIGZpbGUgXHJcbiAgICBpbnN0cnVjdGlvbnNINC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsgLy9UaGlzIGRvZXNuJ3QgYXBwZWFyIGluIHRoZSBjc3MgZmlsZVxyXG4gICAgbW9iaWxlQW5kVGFibGV0cygpO1xyXG59XHJcblxyXG5cclxuZXhwb3J0IHsgaW5zdHJ1Y3Rpb25zSDQsIG1lZGlhcTEsIGZvclBob25lc0FuZFRhYmxldHMgfTsiLCIvL2ltcG9ydCBzdHlsZSBmcm9tICcuLi9jc3MvY3Vyc29yLmNzcyc7XG5pbXBvcnQgJy4uL2Nzcy9jdXJzb3IuY3NzJztcbmltcG9ydCBmaWd1cmUxIGZyb20gJy4uL2ltYWdlcy9maWd1cmUxLnN2Zyc7XG5pbXBvcnQgZmlndXJlMiBmcm9tICcuLi9pbWFnZXMvZmlndXJlMi5zdmcnO1xuaW1wb3J0IGZpZ3VyZTMgZnJvbSAnLi4vaW1hZ2VzL2ZpZ3VyZTMuc3ZnJztcbmltcG9ydCBmaWd1cmU0IGZyb20gJy4uL2ltYWdlcy9maWd1cmU0LnN2Zyc7XG5pbXBvcnQgZmlndXJlNSBmcm9tICcuLi9pbWFnZXMvZmlndXJlNS5zdmcnO1xuaW1wb3J0IGZpZ3VyZTYgZnJvbSAnLi4vaW1hZ2VzL2ZpZ3VyZTYuc3ZnJztcbmltcG9ydCBmaWd1cmU3IGZyb20gJy4uL2ltYWdlcy9maWd1cmU3LnN2Zyc7XG5pbXBvcnQgZmlndXJlOCBmcm9tICcuLi9pbWFnZXMvZmlndXJlOC5zdmcnO1xuaW1wb3J0IGZpZ3VyZTkgZnJvbSAnLi4vaW1hZ2VzL2ZpZ3VyZTkuc3ZnJztcbmltcG9ydCBmaWd1cmUxMCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTAuc3ZnJztcbmltcG9ydCBmaWd1cmUxMSBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTEuc3ZnJztcbmltcG9ydCBmaWd1cmUxMiBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTIuc3ZnJztcbmltcG9ydCBmaWd1cmUxMyBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTMuc3ZnJztcbmltcG9ydCBmaWd1cmUxNCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTQuc3ZnJztcbmltcG9ydCBmaWd1cmUxNSBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTUuc3ZnJztcbmltcG9ydCBmaWd1cmUxNiBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTYuc3ZnJztcbmltcG9ydCBmaWd1cmUxNyBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTcuc3ZnJztcbmltcG9ydCBmaWd1cmUxOCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTguc3ZnJztcbmltcG9ydCBmaWd1cmUxOSBmcm9tICcuLi9pbWFnZXMvZmlndXJlMTkuc3ZnJztcbmltcG9ydCBmaWd1cmUyMCBmcm9tICcuLi9pbWFnZXMvZmlndXJlMjAuc3ZnJztcbmltcG9ydCBzdGFycyBmcm9tICcuLi9pbWFnZXMvc3RhcnMuc3ZnJztcbmltcG9ydCBmYXZpY29uIGZyb20gJy4uL2ltYWdlcy9mYXZpY29uLmljbyc7XG5pbXBvcnQgeyBib2R5LCBoZWFkZXIsIGN1cnNvciwgY29yb25hQ2lyY2xlLCBleWVzIH0gZnJvbSAnLi9jdXJzb3JBbmRDb3JvbmEnO1xuaW1wb3J0IHsgZmlyZWJhc2VDb25maWcsIGFwcCwgYXV0aCwgZGF0YWJhc2UsIHVzZXJzQ3VycmVudFN0YWdlLCByZWdpc3RlckZvcm1Db250YWluZXIsIHJlZ2lzdGVyRm9ybSwgc2lnbkluRm9ybUNvbnRhaW5lciwgc2lnbkluRm9ybSwgY2xvc2VYLCByZWdpc3RlckJ1dHRvbiwgc2lnbkluQnV0dG9uLCBpbnN0cnVjdGlvbnNQLCBuaWNrbmFtZUZvcm0sIG5pY2tuYW1lRm9ybUxhYmVsLCBuaWNrbmFtZUZvcm1UZXh0SW5wdXQsIGJ1dHRvbiwgc2lnbk91dEJ1dHRvbiwgaG91cmdsYXNzLCByZWcsIHN0YXR1cywgcXVpdCB9IGZyb20gJy4vc2lnbkluQW5kUmVnaXN0ZXJGb3Jtcyc7XG5pbXBvcnQgeyBpbnN0cnVjdGlvbnNQVGFnLCBzZWNvbmRzRm9yRWFjaFN0YWdlLCBmaWd1cmVzUGVyU3RhZ2UsIHBGYWlsdXJlLCBwRmFpbHVyZUFub24sIHAsIHBBbm9uIH0gZnJvbSAnLi9zdG9yeUxpbmUnO1xuaW1wb3J0IHsgc3RvcFdvcmtpbmcsIG91clZpZXdQb3J0V2lkdGgsIG1vdmUsIHRyaWFsLCBzbG93IH0gZnJvbSAnLi9maWd1cmVzTW92ZW1lbnQnO1xuaW1wb3J0IHsgaW5zdHJ1Y3Rpb25zLCBtZWRhbCwgc2F2ZWROaWNrbmFtZSB9IGZyb20gJy4vbG9jYWxTdG9yYWdlJztcbmltcG9ydCB7IGRvYywgdXBkYXRlRG9jIH0gZnJvbSBcImZpcmViYXNlL2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgaW5zdHJ1Y3Rpb25zSDQsIG1lZGlhcTEsIGZvclBob25lc0FuZFRhYmxldHMgfSBmcm9tIFwiLi9tb2JpbGVcIjtcblxuY29uc3QgZm9vdGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9vdGVyJyk7XG5jb25zdCB0b3BFeWVzaGFkZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0b3BFeWVzaGFkZScpO1xuY29uc3QgYm90dG9tRXllc2hhZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjYm90dG9tRXllc2hhZGUnKTtcbmNvbnN0IHRpbnlDaXJjbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRpbnlDaXJjbGUnKTtcbmNvbnN0IGNvcm9uYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb3JvbmEnKTtcbmNvbnN0IHRpbnlDaXJjbGVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGlueUNpcmNsZUNvbnRhaW5lcicpO1xuY29uc3Qgc2lnbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWduJyk7XG5jb25zdCBoZWFkbGluZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNoZWFkbGluZScpOy8vLy8vLy8vLy8vLy8vLy8hISEhISEhISEhISEhISEhISEhXG5sZXQgbmlja25hbWU7XG5sZXQgc3RhZ2UgPSAwOy8vd2lsbCBnbyBpbnNpZGUgdGhlIGxldmVsIHRhZ1xubGV0IGZpZ3VyZXMgPSBbXTsgLy9maWd1cmUxLCBmaWd1cmUyLi4uXG5sZXQgZmlndXJlc0RpdnMgPSBbXTtcbmxldCBudW1zT2ZGaWdzID0gW107Ly9mb3IgZXhhbXBsZTogWzEsIDIsIDMsIDQsIDUsIDYsIDddIGRlcGVuZHMgb24gdGhlIG1heCBudW1iZXIgb2YgZmlndXJlcyBpbiBlYWNoIGxldmVsXG5sZXQgdXNlclNjb3JlID0gMDtcbmNvbnN0IGJvbnVzQXJyb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgI2JvbnVzQXJyb3cnKTtcbmxldCBzcGVlZDsgLy9maWd1cmVzJyBzcGVlZCAoQ29udHJvbHMgdGhlIGZyZXF1ZW5jeSBvZiB0aGUgaW50ZXJ2YWwgaW4gdGhlIGZ1bmN0aW9uIG1vdmUpXG5sZXQgY3VycmVudExldmVsQ2xpY2tzU3VjY2VzcyA9IDA7XG5cblxuLy9zdGFydGluZyB0aGUgZ2FtZVxuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgIFxuICAgIGUucHJldmVudERlZmF1bHQoKTsvL3ByZXZlbnQgcmVmcmVzaGluZyB0aGUgcGFnZSAoZHVlIHRvIHRoZSBmb3JtKVxuXG4gICAgc2lnbk91dEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIG1lZGFsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgcXVpdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIGhlYWRsaW5lLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cbiAgICAvL1RoZSB0cmlhbCBmaWd1cmVzIGF0IHRoZSBob21lIHBhZ2Ugd2lsbCBzdG9wIHdvcmtpbmdcbiAgICBBcnJheS5mcm9tKHRyaWFsKS5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlbGVtZW50KTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBcbiAgICAgICAgc3RvcFdvcmtpbmcoMSk7ICBcbiAgICB9KTtcblxuICAgIHN0b3BXb3JraW5nKDApO1xuXG4gICAgLy9maWxsaW5nIHVwIG51bXNPZkZpZ3MgYXJyYXkgYWNjb3JkaW5nIHRvIGZpZ3VyZXNQZXJTdGFnZSBhcnJheVxuICAgIGZvciAobGV0IHogPSAxOyB6IDw9IGZpZ3VyZXNQZXJTdGFnZVtzdGFnZV07IHorKyl7XG4gICAgICAgIGlmICgoc3RhZ2UgPT0gNSkgJiYgKHogPT0gMTEgfHwgeiA9PSAxMiB8fCB6ID09IDEzIHx8IHogPT0gMTQpKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiXCIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbnVtc09mRmlncy5wdXNoKHopO1xuICAgICAgICB9XG4gICAgfSBcblxuICAgICAgXG4gICAgLy9kZWZpbmluZyB0aGUgZmlndXJlcycgYXJyYXlzXG4gICAgbnVtc09mRmlncy5mb3JFYWNoKG51bSA9PiB7XG4gICAgICAgIC8vYWRkaW5nIGZpZ3VyZXMgaW50byB0aGUgZmlndXJlcyBhcnJheVxuICAgICAgICBmaWd1cmVzLnB1c2goJ2ZpZ3VyZScrbnVtKTtcbiAgICAgICAgXG4gICAgICAgIC8vY3JlYXRpbmcgZmlndXJlcyBkaXYgdGFncyBpbiB0aGUgaHRtbFxuICAgICAgICBjb25zdCBpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGkuY2xhc3NMaXN0LmFkZCgnZmlndXJlcycpO1xuICAgICAgICBpLnNldEF0dHJpYnV0ZSgnaWQnLCAnZmlndXJlJytudW0pO1xuICAgICAgICBib2R5Lmluc2VydEJlZm9yZShpLCBmb290ZXIpO1xuICAgICAgICBmaWd1cmVzRGl2cy5wdXNoKGkpO1xuXG4gICAgfSk7XG5cbiAgICBmaWd1cmVzLmZvckVhY2goZmlndXJlID0+IHtcblxuICAgICAgICBjb25zdCBjdXJyZW50RmlndXJlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignIycrZmlndXJlKTtcblxuICAgICAgICAvL2FkZGluZyBhIGJhY2tncm91bmQgaW1hZ2UgZm9yIGVhY2ggZmlndXJlOlxuICAgICAgICBjdXJyZW50RmlndXJlLnN0eWxlLmJhY2tncm91bmQgPSBgdXJsKCcuLyR7ZmlndXJlfS5zdmcnKWA7IFxuICAgICAgICAvL3B1dHRpbmcgdGhlIGZpZ3VyZXMgaW4gZGlmZmVyZW50IHBsYWNlcyBhdCBzdGFydGluZyBwb2ludFxuICAgICAgICBjdXJyZW50RmlndXJlLnN0eWxlLnRvcCA9IE1hdGgucmFuZG9tKCkqKGJvZHkuY2xpZW50SGVpZ2h0IC0gNTYpICsgJ3B4JzsgLy81NiBpcyB0aGUgc2l6ZSBvZiB0aGUgZmlndXJlcy4gYm9keS5jbGllbnRIZWlnaHQgZ2l2ZXMgdGhlIHZpZXdwb3J0IHNpemUgd2l0aG91dCB0aGUgc2Nyb2xsIGJhclxuICAgICAgICBjdXJyZW50RmlndXJlLnN0eWxlLmxlZnQgPSBNYXRoLnJhbmRvbSgpKihib2R5LmNsaWVudFdpZHRoIC0gNTYpICsgJ3B4JzsgLy81NiBpcyB0aGUgc2l6ZSBvZiB0aGUgZmlndXJlcy5cbiAgICAgICAgY3VycmVudEZpZ3VyZS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgLy9zdGFydGluZyB0byBtb3ZlIHRoZSBmaWd1cmVzIGluIGRpZmZlcmVudCBkaXJlY3Rpb25zOlxuICAgICAgICBpZiAoc3RhZ2UgPT0gNCB8fCBzdGFnZSA9PSA2IHx8IHN0YWdlID09IDcpe1xuICAgICAgICAgICAgc3BlZWQgPSAnZmFzdCc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzcGVlZCA9ICdyZWd1bGFyJztcbiAgICAgICAgfVxuICAgICAgICBtb3ZlKGN1cnJlbnRGaWd1cmUsIHNwZWVkKTtcblxuXG4gICAgICAgIC8vZnVuY3Rpb24gZm9yIGNsaWNraW5nIGEgZmlndXJlXG4gICAgICAgIGNvbnN0IHN0YXJzQW5kUG9pbnRzID0gKCkgPT4ge1xuICAgICAgICAgICAgY3VycmVudEZpZ3VyZS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJzQW5kUG9pbnRzKTtcbiAgICAgICAgICAgIGN1cnJlbnRGaWd1cmUuc3R5bGUuYmFja2dyb3VuZCA9ICd1cmwoLi9zdGFycy5zdmcpJztcbiAgICAgICAgICAgIGN1cnJlbnRGaWd1cmUuc3R5bGUuYW5pbWF0aW9uID0gJ2ZpcmV3b3JrcyAwLjc1cyBlYXNlIGZvcndhcmRzIG5vcm1hbCc7XG4gICAgICAgICAgICB1c2VyU2NvcmUgKz0gMTA7XG4gICAgICAgICAgICBjdXJyZW50TGV2ZWxDbGlja3NTdWNjZXNzICs9IDE7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50TGV2ZWxDbGlja3NTdWNjZXNzKTtcbiAgICAgICAgICAgIHNjb3JlLnRleHRDb250ZW50ID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNjb3JlID0gdXNlclNjb3JlO1xuXG4gICAgICAgICAgICAvL2RlbGV0aW5nIHRoZSBmaWd1cmUgZnJvbSB0aGUgRE9NXG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RmlndXJlLnJlbW92ZSgpOyBcbiAgICAgICAgICAgIH0sIDc1MSk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2FkZGluZyBldmVudExpc3RlbmVyIGZvciBlYWNoIGZpZ3VyZSBhbmQgYWRqdXN0aW5nIHRoZSBzY29yZVxuICAgICAgICBjdXJyZW50RmlndXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnNBbmRQb2ludHMpO1xuXG4gICAgICAgIC8vZnVuY3Rpb24gdGhhdCBwcmV2ZW50cyBjbGlja2luZyBvbiBmaWd1cmVzLCB3aGlsZSB0aGUgYW1idWxhbmNlcyBjb21lXG4gICAgICAgIGNvbnN0IHByZXZlbnRDbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGN1cnJlbnRGaWd1cmUucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzdGFyc0FuZFBvaW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICAvL2F0IHRoZSBlbmQgb2YgdGhlIHN0YWdlIHRoZSB1c2VyIHdvbid0IGJlIGFibGUgdG8gY2xpY2sgdGhlIGZpZ3VyZXNcbiAgICAgICAgc2V0VGltZW91dChwcmV2ZW50Q2xpY2ssIHNlY29uZHNGb3JFYWNoU3RhZ2Vbc3RhZ2VdKjEwMDApO1xuXG4gICAgfSlcblxuICAgICBcbiAgICAvL3B1dHRpbmcgdGhlIG5ldyBuaWNrbmFtZSBpbiBsb2NhbCBzdG9yYWdlIGFuZCByZW1vdmluZyBiZXN0IHNjb3JlIG9mIG9sZCB1c2Vyc1xuICAgIG5pY2tuYW1lID0gZG9jdW1lbnQuZm9ybXMubmlja25hbWVGb3JtLm5pY2tuYW1lLnZhbHVlO1xuXG4gICAgaWYgKChuaWNrbmFtZSAhPSAnJykgJiYgKG5pY2tuYW1lICE9IG51bGwpKSB7XG4gICAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpICE9IG5pY2tuYW1lKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnYmVzdFNjb3JlJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJyk7Ly9JdCdzIHBhcnQgb2YgdGhlIHJlbW92aW5nIG1ldGhvZCAoV2UgZG8gaXQgaW4gb3JkZXIgdG8gcHJldmVudCBjb25zb2xlLmxvZyB0byBzaG93IHRoZSBpdGVtIHRoYXQgd2UgaGF2ZSByZW1vdmVkKVxuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Njb3JlJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUnKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCduYW1lJywgbmlja25hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ25hbWUnLCBuaWNrbmFtZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKChuaWNrbmFtZSA9PSAnJykgfHwgKG5pY2tuYW1lID09IG51bGwpKSB7XG4gICAgICAgIGlmIChzdGFnZSA9PSAwKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCduYW1lJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2NvcmUnKTtcbiAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdiZXN0U2NvcmUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy93ZSB3aWxsIHJlbW92ZSBwYXJ0cyBvZiB0aGUgZm9ybSB0aGF0IHdlIHdvbid0IG5lZWQgYW55IG1vcmVcbiAgICBuaWNrbmFtZUZvcm1MYWJlbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIG5pY2tuYW1lRm9ybVRleHRJbnB1dC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIFxuICAgIC8vd2Ugd2lsbCByZW1vdmUgc2lnbkluLCBzaWduVXAgYW5kIHF1aXQgYnV0dG9uc1xuICAgIHNpZ24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICBxdWl0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgXG4gICAgLy93ZSB3aWxsIG1ha2UgdGhlIGJ1dHRvbiBiaWdnZXIgYW5kIHdpdGggbGlnaHRlciB0ZXh0IGNvbG9yXG4gICAgYnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzE3cHgnO1xuICAgIGJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjNTU1JztcblxuICAgIC8vdGhlIGNvcm9uYSBhcHBlYXJzXG4gICAgY29yb25hLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgfSlcbiAgICAvL3RoZSBzbWFsbCBjaXJjbGVzIG9mIHRoZSBjb3JvbmEgYXBwZWFyXG4gICAgdGlueUNpcmNsZUNvbnRhaW5lci5mb3JFYWNoKGVsZW1lbnQgPT4ge1xuICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcbiAgICB9KVxuICAgIFxuICAgIGluc3RydWN0aW9ucy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgLy90aGUgY29yb25hJ3MgZXllcyB3aWxsIGdldCBjbG9zZWQgYW5kIHR1cm4vbG9vayB0byB0aGUgb3RoZXIgc2lkZVxuICAgIHRvcEV5ZXNoYWRlLnN0eWxlLmFuaW1hdGlvbiA9ICdzaHV0VG9wRXllc2hhZGUgMi41cyAwLjY1cyBlYXNlIGluZmluaXRlIG5vcm1hbCc7XG4gICAgYm90dG9tRXllc2hhZGUuc3R5bGUuYW5pbWF0aW9uID0gJ3NodXRCb3R0b21FeWVzaGFkZSAyLjVzIDAuNjVzIGVhc2UgaW5maW5pdGUgbm9ybWFsJztcbiAgICBleWVzLnN0eWxlLmFuaW1hdGlvbiA9ICd0dXJuRXllcyA1cyAwLjkyNXMgZWFzZSBpbmZpbml0ZSBub3JtYWwnOyBcblxuICAgIC8vdGhlIHNjb3JlIHNlY3Rpb24gYXBwZWFyczpcbiAgICBoZWFkZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICBoZWFkZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JzsgXG4gICAgY29uc3Qgc2NvcmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgI3Njb3JlIHNwYW4nKTtcbiAgICBzY29yZS50ZXh0Q29udGVudCA9IHVzZXJTY29yZTtcbiAgICBsZXQgeSA9IDA7XG4gICAgLy90aGUgbmV4dCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBieTogd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZShvcGFjaXR5Q2hhbmdlKTtcbiAgICAvL2FuZCBpdCB3aWxsIHRlbGwgdGhlIGJyb3dzZXIgdGhhdCBJIHdpc2ggdG8gcGVyZm9ybSBhbiBhbmltYXRpb24gd2l0aCB0aGUgb3BhY2l0eVxuICAgIGNvbnN0IG9wYWNpdHlDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICAgIHkgPSB5ICsgMC4wMztcbiAgICAgICAgaGVhZGVyLnN0eWxlLm9wYWNpdHkgPSBgJHt5fWA7XG5cbiAgICAgICAgaWYgKGhlYWRlci5zdHlsZS5vcGFjaXR5IDwgJzEnKXtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShvcGFjaXR5Q2hhbmdlKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUob3BhY2l0eUNoYW5nZSk7XG5cblxuICAgIC8vdGhlIHRpbWVyIGFwcGVhcnNcbiAgICBjb25zdCB0aW1lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aW1lcicpO1xuICAgIHRpbWVyLnN0eWxlLmFuaW1hdGlvbiA9ICdub25lJzsvL2luIG9yZGVyIHRvIHJlc2V0IHRoZSBhbmltYXRpb24gb2YgdGhlIGVuZCBvZiB0aGUgbGV2ZWxcbiAgICB0aW1lci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25Jc09uJyk7Ly9icmluZ2luZyBiYWNrIHRoZSBvcmlnaW5hbCBjbGFzc05hbWVcbiAgICB0aW1lci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25SZW1vdmVkJyk7Ly9hIHRlbXBvcmFyeSBjbGFzc05hbWUgd2UgYWRkZWQgdG8gdGhlIHRpbWVyIGF0IHRoZSBlbmQgb2YgdGhlIGxldmVsIChub3cgd2UncmUgcmVtb3ZpbmcgaXQpXG4gICAgbGV0IHNlY29uZHMgPSBzZWNvbmRzRm9yRWFjaFN0YWdlW3N0YWdlXTtcbiAgICB0aW1lci50ZXh0Q29udGVudCA9IHNlY29uZHM7ICBcbiAgICB0aW1lci5zdHlsZS5hbmltYXRpb24gPSBgdGltZXJHcm93cyAxcyAke3NlY29uZHMrMX0gZWFzZSBub3JtYWxgO1xuICAgIFxuICAgIC8vdGhlIHN0YWdlIGFwcGVhcnMgb24gc2NyZWVuXG4gICAgY29uc3QgbGV2ZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgI2xldmVsIHNwYW4nKTtcbiAgICBsZXZlbC50ZXh0Q29udGVudCA9IHN0YWdlKzE7XG5cbiAgICAvL3Jlc2V0dGluZyB0aGUgYm9udXNBcnJvdyBhbmltYXRpb24gZnJvbSB0aGUgZW5kIG9mIHRoZSBsZXZlbCwgc28gaXQnbGwgYmUgYWJsZSB0byB3b3JrIGFnYWluXG4gICAgYm9udXNBcnJvdy5zdHlsZS5hbmltYXRpb24gPSAnbm9uZSc7XG4gICAgYm9udXNBcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25SZW1vdmVkJyk7XG4gICAgYm9udXNBcnJvdy5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25Jc09uJyk7XG5cblxuICAgIC8vZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCBmcm9tIHRoZSBjb3VudERvd24gZnVuY3Rpb24gXG4gICAgLy9hbmQgYWxzbyBmcm9tIHRoZSBjaGVjayBmdW5jdGlvblxuICAgIGNvbnN0IGNoZWNrQmFja2dyb3VuZCA9IChmaWd1cmVEaXYpID0+IHtcbiAgICAgICAgcmV0dXJuIGZpZ3VyZURpdi5zdHlsZS5iYWNrZ3JvdW5kLmluY2x1ZGVzKCdzdGFycy5zdmcnKTtcbiAgICB9XG5cblxuICAgIC8vY291bnREb3duIGZ1bmN0aW9uIGZvciB0aGUgdGltZXIgYW5kIGNoYW5naW5nIHRoZSBjb3JvbmEncyBjb2xvciB3aGVuIG5vdCBhbGwgZmlndXJlcyB3ZXJlIGNsaWNrZWRcbiAgICBjb25zdCBjb3VudERvd24gPSAoKSA9PiB7XG4gICAgICAgIHNlY29uZHMgPSBzZWNvbmRzIC0gMTsgIFxuICAgICAgICB0aW1lci50ZXh0Q29udGVudCA9IHNlY29uZHM7XG4gICAgfVxuXG4gICAgY29uc3QgY291bnREb3duSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChjb3VudERvd24sIDEwMDApOyAvL2Z1bmN0aW9uIGZvciB0aGUgdGltZXJcblxuICAgIFxuICAgIGxldCBsb2NhbE5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbmFtZScpO1xuXG5cbiAgICAvL2Z1bmN0aW9uIHRoYXQgd29ya3MgYWZ0ZXIgdGhlIHVzZXIgZmFpbGVkXG4gICAgY29uc3QgZmFpbGluZ1Byb2NlZHVyZSA9ICgpID0+IHtcblxuICAgICAgICBzdG9wV29ya2luZygxKTsgICBcblxuICAgICAgICAvL21ha2luZyB0aGUgY29sb3Igb2YgdGhlIGNvcm9uYSByYW5kb21seSBkaWZmZXJlbnRcbiAgICAgICAgbGV0IGggPSBNYXRoLnJhbmRvbSgpICogMzU5OyAvL3RoZSBIIG9nIHRoZSBoc2wgaXMgMC0zNTlcbiAgICAgICAgbGV0IHMgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoODAgLSAyNiArIDEpICsgMjYpOy8vSSBkZWNpZGVkIHRoYXQgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIFMgaW4gaHNsIHdpbGwgYmUgYmV0d2VlbiAyNiBhbmQgODAgKGJlY2F1c2UgaSBkb24ndCBsaWtlIG1pbiBzYXR1cmF0aW9uIGFuZCBtYXggc2F0dXJhdGlvbilcbiAgICAgICAgbGV0IGwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoNzUgLSAzNSArIDEpICsgMzUpOy8vSSBkZWNpZGVkIHRoYXQgdGhlIHBlcmNlbnRhZ2Ugb2YgdGhlIEwgaW4gaHNsIHdpbGwgYmUgYmV0d2VlbiAzNSBhbmQgNzUgKG5vdCB0b28gbGlnaHQgYW5kIG5vdCB0b28gZGFyaylcbiAgICAgICAgdGlueUNpcmNsZXMuZm9yRWFjaChjaXJjbGUgPT4ge1xuICAgICAgICAgICAgY2lyY2xlLnN0eWxlLmJhY2tncm91bmQgPSBgaHNsKCR7aH0sICR7c30lLCAke2x9JSlgO1xuICAgICAgICB9KTsgICBcbiAgICAgICAgXG4gICAgICAgIC8vcmVtb3ZpbmcgdGhlIG9yaWdpbmFsIGNsYXNzIGZyb20gdGhlIHRpbWVyLCByZXNldHMgaXRzIGFuaW1hdGlvblxuICAgICAgICAvL2FuZCBsZXRzIHRoZSBhbmltYXRpb24gd29yayBhZ2FpbiBuZXh0IGxldmVsIChhZnRlciBhZGRpbmcgdGhlIG9sZCBjbGFzc05hbWUgYmFjaylcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aW1lci5zdHlsZS5hbmltYXRpb24gPSAnbm9uZSc7XG4gICAgICAgICAgICB0aW1lci5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25SZW1vdmVkJyk7XG4gICAgICAgICAgICB0aW1lci5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25Jc09uJyk7XG4gICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICBcbiAgICAgICAgZmlndXJlc0RpdnMuZm9yRWFjaChmaWd1cmVEaXYgPT4ge1xuXG4gICAgICAgICAgICBpZiAoZmlndXJlRGl2LnN0eWxlLmJhY2tncm91bmQuaW5jbHVkZXMoJ2ZpZ3VyZScpKXtcbiAgICAgICAgICAgICAgICBmaWd1cmVEaXYuc3R5bGUudG9wID0gcGFyc2VJbnQoZmlndXJlRGl2LnN0eWxlLnRvcCkgKyAncHgnOyAvL3RoZSBtZXRob2QgcGFyc2VJbnQgdGFrZXMgb25seSB0aGUgbnVtYmVyIChhbmQgbGVhdmVzIG91dCB0aGUgc3RyaW5nICdweCcgYXR0YWNoZWQgdG8gaXQpIFxuICAgICAgICAgICAgICAgIGZpZ3VyZURpdi5zdHlsZS5sZWZ0ID0gcGFyc2VJbnQoZmlndXJlRGl2LnN0eWxlLmxlZnQpICsgJ3B4JztcblxuICAgICAgICAgICAgICAgIC8vY3JlYXRpbmcgYW1idWxhbmNlcyBhbmQgcHV0dGluZyB0aGVtIDgwcHggbGVmdCB0byBlYWNoIGZpZ3VyZVxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBpLmNsYXNzTGlzdC5hZGQoJ2FtYnVsYW5jZScpO1xuICAgICAgICAgICAgICAgIGJvZHkuaW5zZXJ0QmVmb3JlKGksIGZvb3Rlcik7XG4gICAgICAgICAgICAgICAgaS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XG4gICAgICAgICAgICAgICAgaS5zdHlsZS50b3AgPSBmaWd1cmVEaXYuc3R5bGUudG9wO1xuICAgICAgICAgICAgICAgIGkuc3R5bGUubGVmdCA9IChwYXJzZUludChmaWd1cmVEaXYuc3R5bGUubGVmdCkgLSA4MCkgKyBcInB4XCI7XG5cblxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZ3VyZUVudGVyc0FtYnVsYW5jZSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHogPSAwO1xuICAgICAgICAgICAgICAgICAgICBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoeiA8IDIwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWd1cmVEaXYuc3R5bGUudG9wID0gcGFyc2VJbnQoZmlndXJlRGl2LnN0eWxlLnRvcCkgKyAxICsgJ3B4J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHogKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSwgNSAgXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy9tb3ZpbmcgdGhlIGFtYnVsYW5jZSBmcm9tIHRoZSBsZWZ0IG9mIHRoZSBmaWd1cmUgdG93YXJkcyB0aGUgZmlndXJlXG4gICAgICAgICAgICAgICAgY29uc3QgbW92aW5nQW1idWxhbmNlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIHBhcnNlSW50KGkuc3R5bGUubGVmdCkgPCBwYXJzZUludChmaWd1cmVEaXYuc3R5bGUubGVmdCkgKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkuc3R5bGUubGVmdCA9IChwYXJzZUludChpLnN0eWxlLmxlZnQpICsgMSkgKyAncHgnO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAvL21vdmluZ0FtYnVsYW5jZVBhcnQyIHdpbGwgY2FsbCB0aGlzIGZ1bmN0aW9uOlxuICAgICAgICAgICAgICAgIGNvbnN0IG1vdmVSaWdodCA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaS5zdHlsZS5sZWZ0ID0gKHBhcnNlSW50KGkuc3R5bGUubGVmdCkgKyAxKSArICdweCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vbW92aW5nIHRoZSBhbWJ1bGFuY2UgZnJvbSB0aGUgZmlndXJlIHRvIHRoZSByaWdodCBzaWRlIG9mIHRoZSBzY3JlZW5cbiAgICAgICAgICAgICAgICBjb25zdCBtb3ZpbmdBbWJ1bGFuY2VQYXJ0MiA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYocGFyc2VJbnQoaS5zdHlsZS5sZWZ0KSA8IG91clZpZXdQb3J0V2lkdGgpe1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbW92aW5nUmlnaHQgPSBzZXRJbnRlcnZhbChtb3ZlUmlnaHQsIDEwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGkuc3R5bGUuYW5pbWF0aW9uID0gJ2Rpc2FwcGVhcnMgM3MgZWFzZSBmb3J3YXJkcyBub3JtYWwnO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCkgPT4gY2xlYXJJbnRlcnZhbChtb3ZpbmdSaWdodCksIDMwMDApO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZpZ3VyZUVudGVyc0FtYnVsYW5jZSwgMTIwMCk7XG4gICAgICAgICAgICAgICAgZmlndXJlRGl2LnN0eWxlLmFuaW1hdGlvbiA9ICdmaWd1cmVCZWNvbWVzTWluaSAwLjVzIDEuMnMgZWFzZSBmb3J3YXJkcyBub3JtYWwnO1xuICAgICAgICAgICAgICAgIHNldEludGVydmFsKG1vdmluZ0FtYnVsYW5jZSwgMTUpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQobW92aW5nQW1idWxhbmNlUGFydDIsIDE3MDApO1xuICAgICAgICAgICAgICAgIC8vY2xlYW5pbmcgYWxsIGZpZ3VyZXMgYW5kIGZpZ3VyZXMgYXJyYXlzIGFmdGVyIHRoZXkgZW50ZXJlZCB0aGUgYW1idWxhbmNlXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZ3VyZXNEaXZzLmZvckVhY2goZmlndXJlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZ3VyZS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgZmlndXJlcyA9IFtdOyBcbiAgICAgICAgICAgICAgICAgICAgZmlndXJlc0RpdnMgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbnVtc09mRmlncyA9IFtdO1xuICAgICAgICAgICAgICAgIH0sIDE3MDApO1xuICAgICAgICAgICAgICAgIC8vY2xlYW5pbmcgdGhlIGFtYnVsYW5jZXMgYWZ0ZXIgdGhleSBmaW5pc2hlZCB0aGVpciB3b3JrXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFtYnVsYW5jZXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYW1idWxhbmNlJyk7XG4gICAgICAgICAgICAgICAgICAgIGFtYnVsYW5jZXMuZm9yRWFjaChhbWJ1bGFuY2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYW1idWxhbmNlLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH0sIDQ3MDApO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgfSlcblxuICAgICAgICAvL2JyaW5naW5nIGJhY2sgdGhlIGluc3RyYWN0aW9uJ3MgYm94XG4gICAgICAgIGNvbnN0IGJyaW5naW5nQmFja0luc3RydWN0aW9ucyA9ICgpID0+IHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYoKGxvY2FsTmFtZSA9PSAnJykgfHwgKGxvY2FsTmFtZSA9PSBudWxsKSl7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zUFRhZy50ZXh0Q29udGVudCA9IFwiWW91IGZhaWxlZCBhbmQgYSBuZXcgdmFyaWFudCBpcyBzcHJlYWRpbmcgbm93LCBidXQgZG9uJ3Qgd29ycnksIHlvdSBjYW4gdHJ5IGFnYWluIGFuZCBwcmV2ZW50IGEgd29ybGQgY2F0YXN0cm9waGUuXCI7XG4gICAgICAgICAgICB9IGVsc2UgeyAgICBcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNQVGFnLnRleHRDb250ZW50ID0gbG9jYWxOYW1lICsgJywnICsgXCIgeW91IGZhaWxlZCBhbmQgYSBuZXcgdmFyaWFudCBpcyBzcHJlYWRpbmcgbm93LCBidXQgZG9uJ3Qgd29ycnksIHlvdSBjYW4gdHJ5IGFnYWluIGFuZCBwcmV2ZW50IGEgd29ybGQgY2F0YXN0cm9waGUuXCI7IFxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUub3BhY2l0eSA9ICcwJztcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5zdHlsZS50b3AgPSAnY2FsYygzMCUgKyA0cHgpJztcbiAgICAgICAgICAgIGluc3RydWN0aW9ucy5zdHlsZS5hbmltYXRpb24gPSAnaW5zdHJ1Y3Rpb25zQXBwZWFycyAyLjVzIGVhc2UgZm9yd2FyZHMgbm9ybWFsJztcbiAgICAgICAgICAgIHF1aXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7Ly9xdWl0IGJ1dHRvbiBhcHBlYXJzXG4gICAgICAgICAgICBxdWl0LnN0eWxlLmFuaW1hdGlvbiA9ICdpbnN0cnVjdGlvbnNBcHBlYXJzIDIuNXMgZWFzZSBmb3J3YXJkcyBub3JtYWwnOyAgICAgICAgICAgXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldFRpbWVvdXQoYnJpbmdpbmdCYWNrSW5zdHJ1Y3Rpb25zLCAyMDAwKTtcblxuICAgICAgICBcbiAgICAgICAgdXNlclNjb3JlID0gdXNlclNjb3JlIC0gKGN1cnJlbnRMZXZlbENsaWNrc1N1Y2Nlc3MgKiAxMCk7Ly9UYWtpbmcgYmFjayB0aGUgc2NvcmVzIG9mIHRoaXMgbGV2ZWxcbiAgICAgICAgY29uc29sZS5sb2coJ3VzZXJTY29yZScgKyB1c2VyU2NvcmUpXG4gICAgICAgIGN1cnJlbnRMZXZlbENsaWNrc1N1Y2Nlc3MgPSAwO1xuICAgICAgICAvL3Njb3JlLnRleHRDb250ZW50ID0gdXNlclNjb3JlO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2NvcmUgPSB1c2VyU2NvcmU7Ly9DaGFuZ2luZyB0aGUgc2NvcmVzIGJhY2sgaW4gdGhlIGxvY2FsU3RvcmFnZVxuICAgIH1cbiAgIFxuXG4gICAgLy9mdW5jdGlvbiB0aGF0IGNoZWNrcyBpZiBhbGwgdGhlIGZpZ3VyZXMgd2VyZSBjbGlja2VkIG9yIGlmIHRoZSB0aW1lIG9mIHRoZSBsZXZlbCBlbmRlZFxuICAgIGNvbnN0IGVuZExldmVsQ2hlY2sgPSAoKSA9PiB7XG4gICAgICAgIGlmIChmaWd1cmVzRGl2cy5ldmVyeShjaGVja0JhY2tncm91bmQpKSB7ICAvL1wiZXZlcnlcIiByZXR1cm5zIHRydWUgaWYgdGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSBmb3IgYWxsIGVsZW1lbnRzIGluIHRoZSBhcnJheSAoaWYgYWxsIGZpZ3VyZXMgYmVjYW1lIHN0YXJzKVxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChlbmRMZXZlbCk7XG4gICAgICAgICAgICBzdG9wV29ya2luZygxKTsgLy90aGUgc3RhcnMgd2lsbCBzdG9wIG1vdmluZ1xuICAgICAgICAgICAgc3RhZ2UgKz0gMTtcbiAgICAgICAgICAgIHVzZXJzQ3VycmVudFN0YWdlKHN0YWdlKTsvL3VwZGF0aW5nIFwiY3VycmVudFN0YWdlXCIgdmFyaWFibGUsIHdoaWNoIGlzIGxvY2F0ZWQgaW4gc3RvcnlMaW5lLmpzIFxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudERvd25JbnRlcnZhbCk7IC8vdGhlIGNsb2NrIHdpbGwgc3RvcFxuICAgICAgICAgICAgdGltZXIuc3R5bGUuYW5pbWF0aW9uID0gJ25vbmUnO1xuICAgICAgICAgICAgdGltZXIuY2xhc3NMaXN0LmFkZCgnYW5pbWF0aW9uUmVtb3ZlZCcpO1xuICAgICAgICAgICAgdGltZXIuY2xhc3NMaXN0LnJlbW92ZSgnYW5pbWF0aW9uSXNPbicpOy8vcmVtb3ZpbmcgdGhpcyBjbGFzcyByZXNldHMgdGhlIGFuaW1hdGlvbiBmb3IgdGhpcyBlbGVtZW50IGFuZCBsZXRzIHVzIHVzZSBpdCBhZ2FpbiBhZnRlciBhZGRpbmcgdGhpcyBjbGFzcyBiYWNrXG5cbiAgICAgICAgICAgIGlmIChzZWNvbmRzICE9IDApIHtcbiAgICAgICAgICAgICAgICB0aW1lci5zdHlsZS5hbmltYXRpb24gPSBgdGltZXJHcm93c0FnYWluIDFzICR7c2Vjb25kc30gZWFzZSBub3JtYWxgO1xuXG4gICAgICAgICAgICAgICAgYm9udXNBcnJvdy5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgICAgICAgICAgICAgIGJvbnVzQXJyb3cuc3R5bGUuYW5pbWF0aW9uID0gYGFycm93R3Jvd3MgMXMgJHtzZWNvbmRzfSBlYXNlIG5vcm1hbGA7XG4gICAgICAgICAgICAgICAgYm9udXNBcnJvdy5jbGFzc0xpc3QuYWRkKCdhbmltYXRpb25SZW1vdmVkJyk7XG4gICAgICAgICAgICAgICAgYm9udXNBcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdhbmltYXRpb25Jc09uJyk7Ly9yZW1vdmluZyB0aGlzIGNsYXNzIHJlc2V0cyB0aGUgYW5pbWF0aW9uIGZvciB0aGlzIGVsZW1lbnQgYW5kIGxldHMgdXMgdXNlIGl0IGFnYWluIGFmdGVyIGFkZGluZyB0aGlzIGNsYXNzIGJhY2tcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgYm9udXNBcnJvdy5zdHlsZS5vcGFjaXR5ID0gJzAnO1xuICAgICAgICAgICAgICAgIH0sIChzZWNvbmRzKjEwMDApKTtcblxuICAgICAgICAgICAgICAgIGxldCBib251cyA9IChzZWNvbmRzICogMTApO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSAxO1xuICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCk9PntcbiAgICAgICAgICAgICAgICAgICAgY291bnQgPSBjb3VudCArIGk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudCA8PSBib251cyl7XG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyU2NvcmUgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjb3JlLnRleHRDb250ZW50ID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNjb3JlID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2FsU3RvcmFnZS5iZXN0U2NvcmUgPCB1c2VyU2NvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuYmVzdFNjb3JlID0gdXNlclNjb3JlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PSAxKSB7IC8vaWYgdGhlcmUgaXMgYW4gQXV0aCB1c2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZURvYyhkb2MoZGF0YWJhc2UsICd1c2Vyc1Njb3JlJywgYXV0aC5jdXJyZW50VXNlci5kaXNwbGF5TmFtZSksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFNjb3JlOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnYmVzdFNjb3JlJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Njb3JlIHVwZGF0ZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVyci5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBcbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vY2xlYW5pbmcgdGhlIGZpZ3VyZXMgYXJyYXlzIChpbiBvcmRlciB0byBnZXQgcmVhZHkgZm9yIG5leHQgbGV2ZWwpOlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgZmlndXJlcyA9IFtdOyBcbiAgICAgICAgICAgICAgICBmaWd1cmVzRGl2cyA9IFtdO1xuICAgICAgICAgICAgICAgIG51bXNPZkZpZ3MgPSBbXTtcbiAgICAgICAgICAgIH0sIDc1MSk7IC8vYWZ0ZXIgdGhlIGxhc3QgZmlyZXdvcmsgZW5kZWQgaXRzIHdvcmtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9oaWRpbmcgdGhlIGNvcm9uYVxuICAgICAgICAgICAgY29yb25hLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy9icmluZ2luZyBiYWNrIHRoZSBpbnN0cmFjdGlvbidzIGJveFxuICAgICAgICAgICAgaWYoKGxvY2FsTmFtZSA9PSAnJykgfHwgKGxvY2FsTmFtZSA9PSBudWxsKSl7XG4gICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zUFRhZy50ZXh0Q29udGVudCA9IHBBbm9uW3N0YWdlXTsgLy9wQW5vbiBpcyB0aGUgdGV4dCBhcHBlYXJzIGluIHN0b3J5TGluZS5qc1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnNQVGFnLnRleHRDb250ZW50ID0gbG9jYWxOYW1lICsgJywgJyArIHBbc3RhZ2VdOyAvLy8vcCBpcyB0aGUgdGV4dCBhcHBlYXJzIGluIHN0b3J5TGluZS5qc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICBpbnN0cnVjdGlvbnMuc3R5bGUuYW5pbWF0aW9uID0gJ2luc3RydWN0aW9uc0FwcGVhcnMgMnMgZWFzZSBmb3J3YXJkcyBub3JtYWwnOyBcbiAgICAgICAgICAgIHF1aXQuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7Ly9xdWl0IGJ1dHRvbiBhcHBlYXJzXG4gICAgICAgICAgICBxdWl0LnN0eWxlLmFuaW1hdGlvbiA9ICdpbnN0cnVjdGlvbnNBcHBlYXJzIDJzIGVhc2UgZm9yd2FyZHMgbm9ybWFsJztcblxuICAgICAgICAgICAgLy9EZWZpbmluZyB0aGUgYmVzdFNjb3JlIGluIHRoZSBsb2NhbFN0b3JhZ2UsIGFmdGVyIGNvbXBsZXRpbmcgdGhlIGxldmVsIHN1Y2Nlc3NmdWxseVxuICAgICAgICAgICAgaWYgKChsb2NhbFN0b3JhZ2UuYmVzdFNjb3JlID09ICcnKSB8fCAobG9jYWxTdG9yYWdlLmJlc3RTY29yZSA9PSBudWxsKSkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5iZXN0U2NvcmUgPSB1c2VyU2NvcmU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxvY2FsU3RvcmFnZS5iZXN0U2NvcmUgPCB1c2VyU2NvcmUpIHtcbiAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UuYmVzdFNjb3JlID0gdXNlclNjb3JlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudExldmVsQ2xpY2tzU3VjY2VzcyA9IDA7XG5cblxuICAgICAgICB9IGVsc2UgaWYgKHNlY29uZHMgPT0gMCAmJiBmaWd1cmVzRGl2cy5ldmVyeShjaGVja0JhY2tncm91bmQpID09IGZhbHNlKSB7IC8vaWYgbm90IGFsbCBmaWd1cmVzIGJlY2FtZSBzdGFycyBhbmQgdGhlIHNlY29uZHMgZW5kZWRcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoZW5kTGV2ZWwpO1xuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjb3VudERvd25JbnRlcnZhbCk7IC8vdGhlIGNsb2NrIHdpbGwgc3RvcFxuICAgICAgICAgICAgZmFpbGluZ1Byb2NlZHVyZSgpOy8vZnVuY3Rpb24gdGhhdCBicmluZ3MgdGhlIGFtYnVsYW5jZXNcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgY29uc3QgZW5kTGV2ZWwgPSBzZXRJbnRlcnZhbChlbmRMZXZlbENoZWNrLCAxKTsgXG5cbn0pO1xuXG5cblxuXG5cblxuXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJnIiwiZ2xvYmFsVGhpcyIsInRoaXMiLCJGdW5jdGlvbiIsImUiLCJ3aW5kb3ciLCJzY3JpcHRVcmwiLCJpbXBvcnRTY3JpcHRzIiwibG9jYXRpb24iLCJkb2N1bWVudCIsImN1cnJlbnRTY3JpcHQiLCJzcmMiLCJzY3JpcHRzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJsZW5ndGgiLCJFcnJvciIsInJlcGxhY2UiLCJwIiwiYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJoZWFkZXIiLCJjdXJzb3IiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0QXR0cmlidXRlIiwicGFnZVkiLCJwYWdlWCIsImNvcm9uYUNpcmNsZSIsImFuZ2xlIiwiZm9yRWFjaCIsImVsZW1lbnQiLCJpIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImluc2VydEJlZm9yZSIsIm5leHRTaWJsaW5nIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJuIiwidG9wIiwiYm90dG9tIiwicmlnaHQiLCJsZWZ0IiwiY29udGFpbmVyQW5nbGUiLCJtIiwibCIsImN1cnJlbnRDb250YWluZXIiLCJhcHBlbmQiLCJleWVzIiwieiIsInkiLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwiYyIsImNoYXJDb2RlQXQiLCJiYXNlNjQiLCJieXRlVG9DaGFyTWFwXyIsImNoYXJUb0J5dGVNYXBfIiwiYnl0ZVRvQ2hhck1hcFdlYlNhZmVfIiwiY2hhclRvQnl0ZU1hcFdlYlNhZmVfIiwiRU5DT0RFRF9WQUxTX0JBU0UiLCJFTkNPREVEX1ZBTFMiLCJFTkNPREVEX1ZBTFNfV0VCU0FGRSIsIkhBU19OQVRJVkVfU1VQUE9SVCIsImF0b2IiLCJlbmNvZGVCeXRlQXJyYXkiLCJpbnB1dCIsIndlYlNhZmUiLCJBcnJheSIsImlzQXJyYXkiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsInB1c2giLCJqb2luIiwiZW5jb2RlU3RyaW5nIiwiYnRvYSIsImRlY29kZVN0cmluZyIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsIkRlZmVycmVkIiwiY29uc3RydWN0b3IiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJ3cmFwQ2FsbGJhY2siLCJjYWxsYmFjayIsImVycm9yIiwidmFsdWUiLCJjYXRjaCIsIm5hdmlnYXRvciIsImlzTW9iaWxlQ29yZG92YSIsInRlc3QiLCJpc0Jyb3dzZXJFeHRlbnNpb24iLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImlkIiwiaXNSZWFjdE5hdGl2ZSIsImlzSUUiLCJ1YSIsImluZGV4T2YiLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJjdXN0b21EYXRhIiwic3VwZXIiLCJuYW1lIiwiT2JqZWN0Iiwic2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsIkVycm9yRmFjdG9yeSIsImNyZWF0ZSIsInNlcnZpY2UiLCJzZXJ2aWNlTmFtZSIsImVycm9ycyIsImRhdGEiLCJmdWxsQ29kZSIsInRlbXBsYXRlIiwiUEFUVEVSTiIsIl8iLCJrZXkiLCJyZXBsYWNlVGVtcGxhdGUiLCJmdWxsTWVzc2FnZSIsImEiLCJiIiwiYUtleXMiLCJrZXlzIiwiYktleXMiLCJrIiwiaW5jbHVkZXMiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsInF1ZXJ5c3RyaW5nUGFyYW1zIiwicGFyYW1zIiwiZW50cmllcyIsImFycmF5VmFsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicXVlcnlzdHJpbmdEZWNvZGUiLCJxdWVyeXN0cmluZyIsIm9iaiIsInNwbGl0IiwidG9rZW4iLCJkZWNvZGVVUklDb21wb25lbnQiLCJleHRyYWN0UXVlcnlzdHJpbmciLCJ1cmwiLCJxdWVyeVN0YXJ0IiwiZnJhZ21lbnRTdGFydCIsInN1YnN0cmluZyIsIk9ic2VydmVyUHJveHkiLCJleGVjdXRvciIsIm9uTm9PYnNlcnZlcnMiLCJvYnNlcnZlcnMiLCJ1bnN1YnNjcmliZXMiLCJvYnNlcnZlckNvdW50IiwidGFzayIsImZpbmFsaXplZCIsInRoZW4iLCJuZXh0IiwiZm9yRWFjaE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJjbG9zZSIsImNvbXBsZXRlIiwic3Vic2NyaWJlIiwibmV4dE9yT2JzZXJ2ZXIiLCJtZXRob2RzIiwibWV0aG9kIiwiaW1wbGVtZW50c0FueU1ldGhvZHMiLCJub29wIiwidW5zdWIiLCJ1bnN1YnNjcmliZU9uZSIsImJpbmQiLCJmaW5hbEVycm9yIiwiZm4iLCJzZW5kT25lIiwiY29uc29sZSIsImVyciIsIl9kZWxlZ2F0ZSIsInByb21pc2lmeVJlcXVlc3QiLCJyZXF1ZXN0IiwiZXJyb3JNZXNzYWdlIiwib25zdWNjZXNzIiwiZXZlbnQiLCJ0YXJnZXQiLCJyZXN1bHQiLCJvbmVycm9yIiwiX2EiLCJEQldyYXBwZXIiLCJfZGIiLCJvYmplY3RTdG9yZU5hbWVzIiwidHJhbnNhY3Rpb24iLCJzdG9yZU5hbWVzIiwibW9kZSIsIlRyYW5zYWN0aW9uV3JhcHBlciIsImNhbGwiLCJjcmVhdGVPYmplY3RTdG9yZSIsInN0b3JlTmFtZSIsIm9wdGlvbnMiLCJPYmplY3RTdG9yZVdyYXBwZXIiLCJfdHJhbnNhY3Rpb24iLCJvbmNvbXBsZXRlIiwib25hYm9ydCIsIm9iamVjdFN0b3JlIiwiX3N0b3JlIiwiaW5kZXgiLCJJbmRleFdyYXBwZXIiLCJjcmVhdGVJbmRleCIsImtleXBhdGgiLCJnZXQiLCJwdXQiLCJkZWxldGUiLCJjbGVhciIsIl9pbmRleCIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsInR5cGUiLCJtdWx0aXBsZUluc3RhbmNlcyIsInNlcnZpY2VQcm9wcyIsImluc3RhbnRpYXRpb25Nb2RlIiwib25JbnN0YW5jZUNyZWF0ZWQiLCJzZXRJbnN0YW50aWF0aW9uTW9kZSIsInNldE11bHRpcGxlSW5zdGFuY2VzIiwic2V0U2VydmljZVByb3BzIiwicHJvcHMiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIkRFRkFVTFRfRU5UUllfTkFNRSIsIlByb3ZpZGVyIiwiY29udGFpbmVyIiwiY29tcG9uZW50IiwiaW5zdGFuY2VzIiwiTWFwIiwiaW5zdGFuY2VzRGVmZXJyZWQiLCJpbnN0YW5jZXNPcHRpb25zIiwib25Jbml0Q2FsbGJhY2tzIiwiaWRlbnRpZmllciIsIm5vcm1hbGl6ZWRJZGVudGlmaWVyIiwibm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyIiwiaGFzIiwiZGVmZXJyZWQiLCJzZXQiLCJpc0luaXRpYWxpemVkIiwic2hvdWxkQXV0b0luaXRpYWxpemUiLCJpbnN0YW5jZSIsImdldE9ySW5pdGlhbGl6ZVNlcnZpY2UiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJnZXRJbW1lZGlhdGUiLCJvcHRpb25hbCIsImdldENvbXBvbmVudCIsInNldENvbXBvbmVudCIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwiY2xlYXJJbnN0YW5jZSIsImFzeW5jIiwic2VydmljZXMiLCJmcm9tIiwidmFsdWVzIiwiYWxsIiwiZmlsdGVyIiwibWFwIiwiSU5URVJOQUwiLCJfZGVsZXRlIiwiaXNDb21wb25lbnRTZXQiLCJnZXRPcHRpb25zIiwiaW5pdGlhbGl6ZSIsIm9wdHMiLCJvbkluaXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsIlNldCIsImV4aXN0aW5nSW5zdGFuY2UiLCJpbnZva2VPbkluaXRDYWxsYmFja3MiLCJjYWxsYmFja3MiLCJDb21wb25lbnRDb250YWluZXIiLCJwcm92aWRlcnMiLCJhZGRDb21wb25lbnQiLCJwcm92aWRlciIsImdldFByb3ZpZGVyIiwiYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJnZXRQcm92aWRlcnMiLCJMb2dMZXZlbCIsImxldmVsU3RyaW5nVG9FbnVtIiwiREVCVUciLCJWRVJCT1NFIiwiSU5GTyIsIldBUk4iLCJFUlJPUiIsIlNJTEVOVCIsImRlZmF1bHRMb2dMZXZlbCIsIkNvbnNvbGVNZXRob2QiLCJkZWZhdWx0TG9nSGFuZGxlciIsImxvZ1R5cGUiLCJhcmdzIiwibG9nTGV2ZWwiLCJub3ciLCJEYXRlIiwidG9JU09TdHJpbmciLCJMb2dnZXIiLCJfbG9nTGV2ZWwiLCJfbG9nSGFuZGxlciIsIl91c2VyTG9nSGFuZGxlciIsInZhbCIsIlR5cGVFcnJvciIsInNldExvZ0xldmVsIiwibG9nSGFuZGxlciIsInVzZXJMb2dIYW5kbGVyIiwiZGVidWciLCJsb2ciLCJpbmZvIiwid2FybiIsIlBsYXRmb3JtTG9nZ2VyU2VydmljZUltcGwiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIiLCJsaWJyYXJ5IiwidmVyc2lvbiIsImxvZ1N0cmluZyIsIm5hbWUkbyIsInZlcnNpb24kMSIsImxvZ2dlciIsIlBMQVRGT1JNX0xPR19TVFJJTkciLCJfYXBwcyIsIl9jb21wb25lbnRzIiwiX2FkZENvbXBvbmVudCIsImFwcCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsIkVSUk9SX0ZBQ1RPUlkiLCJGaXJlYmFzZUFwcEltcGwiLCJjb25maWciLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJhc3NpZ24iLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwiaXNEZWxldGVkIiwiYXBwTmFtZSIsIlNES19WRVJTSU9OIiwiZ2V0QXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJtYXRjaCIsInZlcnNpb25NaXNtYXRjaCIsIndhcm5pbmciLCJTVE9SRV9OQU1FIiwiZGJQcm9taXNlIiwiZ2V0RGJQcm9taXNlIiwidXBncmFkZUNhbGxiYWNrIiwiZGIiLCJvbGRWZXJzaW9uIiwiaW5kZXhlZERCIiwib3BlbiIsIm9udXBncmFkZW5lZWRlZCIsIm5ld1ZlcnNpb24iLCJvcmlnaW5hbEVycm9yTWVzc2FnZSIsIndyaXRlSGVhcnRiZWF0c1RvSW5kZXhlZERCIiwiaGVhcnRiZWF0T2JqZWN0IiwidHgiLCJjb21wdXRlS2V5IiwiYXBwSWQiLCJIZWFydGJlYXRTZXJ2aWNlSW1wbCIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIkhlYXJ0YmVhdFN0b3JhZ2VJbXBsIiwiX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UiLCJyZWFkIiwiYWdlbnQiLCJkYXRlIiwiZ2V0VVRDRGF0ZVN0cmluZyIsImxhc3RTZW50SGVhcnRiZWF0RGF0ZSIsImhlYXJ0YmVhdHMiLCJzb21lIiwic2luZ2xlRGF0ZUhlYXJ0YmVhdCIsImhiVGltZXN0YW1wIiwidmFsdWVPZiIsIm92ZXJ3cml0ZSIsImhlYXJ0YmVhdHNUb1NlbmQiLCJ1bnNlbnRFbnRyaWVzIiwiaGVhcnRiZWF0c0NhY2hlIiwibWF4U2l6ZSIsInNsaWNlIiwiaGVhcnRiZWF0RW50cnkiLCJmaW5kIiwiaGIiLCJkYXRlcyIsImNvdW50Qnl0ZXMiLCJwb3AiLCJleHRyYWN0SGVhcnRiZWF0c0ZvckhlYWRlciIsImhlYWRlclN0cmluZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJfY2FuVXNlSW5kZXhlZERCUHJvbWlzZSIsInJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2siLCJwcmVFeGlzdCIsIkRCX0NIRUNLX05BTUUiLCJzZWxmIiwiZGVsZXRlRGF0YWJhc2UiLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiY29tbW9uanNHbG9iYWwiLCJlc20iLCJnb29nIiwiYWEiLCJiYSIsImVhIiwiTWF0aCIsInJhbmRvbSIsImZhIiwiaGEiLCJhcHBseSIsImFyZ3VtZW50cyIsImlhIiwiZCIsInVuc2hpZnQiLCJxIiwidG9TdHJpbmciLCJqYSIsInQiLCJaIiwiVmIiLCJmIiwiaCIsInYiLCJzIiwibyIsImxhIiwibmEiLCJNIiwiaGFzT3duUHJvcGVydHkiLCJkYSIsInNoaWZ0IiwibWEiLCJxYSIsImNvbmNhdCIsInJhIiwic2EiLCJ4IiwidGEiLCJ0cmltIiwiZXhlYyIsInciLCJ2YSIsIndhIiwidXNlckFnZW50IiwieGEiLCJ5YSIsInphIiwiQWEiLCJDYSIsIk5hIiwiSGEiLCJJYSIsIkphIiwiS2EiLCJ0b0xvd2VyQ2FzZSIsIkxhIiwiTWEiLCJkb2N1bWVudE1vZGUiLCJPYSIsIlBhIiwiUWEiLCJwYXJzZUZsb2F0IiwiU2EiLCJHYSIsIlJhIiwibWF4IiwicGFyc2VJbnQiLCJVYSIsIlZhIiwiZGVmaW5lUHJvcGVydHkiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGVmYXVsdFByZXZlbnRlZCIsIkEiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJzdGF0ZSIsInBvaW50ZXJJZCIsInBvaW50ZXJUeXBlIiwiY2hhbmdlZFRvdWNoZXMiLCJzcmNFbGVtZW50Iiwibm9kZU5hbWUiLCJmcm9tRWxlbWVudCIsInRvRWxlbWVudCIsIldhIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsIkIiLCJYYSIsIllhIiwibGlzdGVuZXIiLCJwcm94eSIsImNhcHR1cmUiLCJjYSIsIlphIiwiJGEiLCJiYiIsInNwbGljZSIsImFiIiwiY2IiLCJmYiIsIm9uY2UiLCJnYiIsIk4iLCJpYiIsImpiIiwibWIiLCJrYiIsImF0dGFjaEV2ZW50IiwibGIiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiTyIsIm5iIiwib2IiLCJkZXRhY2hFdmVudCIsInBiIiwiaGFuZGxlRXZlbnQiLCJDIiwiUCIsIkkiLCJEIiwicWIiLCJyYiIsInNiIiwidGIiLCJBYiIsInZiIiwiaiIsIndiIiwicmVzZXQiLCJ5YiIsInNldFRpbWVvdXQiLCJ6YiIsIkRiIiwiQmIiLCJDYiIsIkViIiwiRmIiLCJTIiwiY2xlYXJUaW1lb3V0IiwiR2IiLCJOdW1iZXIiLCJIYiIsInN0YXJ0IiwiSWIiLCJFIiwiSmIiLCJLYiIsIkxiIiwiTWIiLCJGIiwicGFyc2UiLCJQYiIsIkgiLCJSYiIsIlNiIiwiVGIiLCJVYiIsIlNUQVRfRVZFTlQiLCJzdGF0IiwiSiIsInNpemUiLCJLIiwiV2IiLCJOT19FUlJPUiIsInhiIiwiVElNRU9VVCIsIlhiIiwiWWIiLCJaYiIsIiRiIiwiY2MiLCJMIiwiT1BFTiIsImFjIiwiYmMiLCJkYyIsIlgiLCJWIiwiZWMiLCJXIiwiWSIsIiQiLCJVIiwiZmMiLCJYTUxIdHRwUmVxdWVzdCIsImdjIiwiaGMiLCJpYyIsImpjIiwia2MiLCJsYyIsIm1jIiwibmMiLCJyIiwiRyIsIk5iIiwicWMiLCJCYSIsInRjIiwidmMiLCJzYyIsIndjIiwicmMiLCJpc05hTiIsInN1YnN0ciIsInhjIiwiZWIiLCJwYyIsInVjIiwiYWJvcnQiLCJ5YyIsInpjIiwiQWMiLCJCYyIsIkNjIiwia2EiLCJRIiwiRGEiLCJFYSIsImdldFJlc3BvbnNlSGVhZGVyIiwiRGMiLCJSIiwib2EiLCJFYyIsIkZjIiwiR2MiLCJIYyIsIkljIiwiS2MiLCJUIiwiSmMiLCJMYyIsImdhIiwib2MiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsInN0cmVhbSIsIk9iIiwiY2FuY2VsIiwiUWIiLCJNYyIsIk9jIiwiUGMiLCJRYyIsIlJjIiwiU2MiLCJUYyIsImRkIiwiWmMiLCJVYyIsIiRjIiwiZmxvb3IiLCJhYnMiLCJkZWNvZGVVUkkiLCJlbmNvZGVVUkkiLCJjZCIsIlZjIiwiV2MiLCJYYyIsIlljIiwiTmMiLCJlZCIsImdkIiwiaGQiLCJQZXJmb3JtYW5jZU5hdmlnYXRpb25UaW1pbmciLCJwZXJmb3JtYW5jZSIsImdldEVudHJpZXNCeVR5cGUiLCJuZXh0SG9wUHJvdG9jb2wiLCJqZCIsImtkIiwibGQiLCJtZCIsIm9kIiwib25sb2FkIiwib250aW1lb3V0IiwicGQiLCJxZCIsInJlYWR5U3RhdGUiLCJyZCIsInN0YXR1cyIsInJlc3BvbnNlVHlwZSIsInJlc3BvbnNlVGV4dCIsInJlc3BvbnNlIiwic3RhdHVzVGV4dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIkhlYWRlcnMiLCJ1ZCIsInRkIiwic2QiLCJzZW5kIiwiaGVhZGVycyIsImNyZWRlbnRpYWxzIiwiY2FjaGUiLCJmZXRjaCIsIlJlcXVlc3QiLCJhcnJheUJ1ZmZlciIsIlRhIiwiUmVhZGFibGVTdHJlYW0iLCJnZXRSZWFkZXIiLCJ0ZXh0IiwiVWludDhBcnJheSIsImRvbmUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwidmQiLCJ3ZCIsInhkIiwieWQiLCJwYSIsInpkIiwiQ2QiLCJEZCIsIkVkIiwiRmEiLCJwcm90b2NvbCIsIkFkIiwibW96UmVzcG9uc2VBcnJheUJ1ZmZlciIsIkdkIiwiRmQiLCJIZCIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsIklkIiwieG1sSHR0cEZhY3RvcnkiLCJzdXBwb3J0c0Nyb3NzRG9tYWluWGhyIiwiY29uY3VycmVudFJlcXVlc3RMaW1pdCIsImZhc3RIYW5kc2hha2UiLCJmb3JjZUxvbmdQb2xsaW5nIiwiZGV0ZWN0QnVmZmVyaW5nUHJveHkiLCJKZCIsIktkIiwic2VuZEJlYWNvbiIsIkltYWdlIiwiTGQiLCJNZCIsIlFkIiwiUGQiLCJyb3VuZCIsIm1pbiIsIk9kIiwiUmQiLCJOZCIsIm5kIiwiYWQiLCJiZCIsImhvc3RuYW1lIiwicG9ydCIsIlNkIiwiVGQiLCJtZXNzYWdlVXJsUGFyYW1zIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwiaHR0cEhlYWRlcnNPdmVyd3JpdGVQYXJhbSIsInNlbmRSYXdKc29uIiwiaHR0cFNlc3Npb25JZFBhcmFtIiwiVWQiLCJfX3NtX18iLCJWZCIsInRvVXBwZXJDYXNlIiwiRm9ybURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ0aW1lb3V0IiwiQmQiLCJfX2RhdGFfXyIsImNyZWF0ZVdlYkNoYW5uZWwiLCJIVFRQX0VSUk9SIiwiQ09NUExFVEUiLCJFdmVudFR5cGUiLCJDTE9TRSIsIk1FU1NBR0UiLCJsaXN0ZW4iLCJsaXN0ZW5PbmNlIiwiZ2V0TGFzdEVycm9yIiwiZ2V0TGFzdEVycm9yQ29kZSIsImdldFN0YXR1cyIsImdldFJlc3BvbnNlSnNvbiIsImdldFJlc3BvbnNlVGV4dCIsImNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQiLCJnZXRTdGF0RXZlbnRUYXJnZXQiLCJFcnJvckNvZGUiLCJFdmVudCIsIlN0YXQiLCJ1YiIsIlBST1hZIiwiTk9QUk9YWSIsIkZldGNoWG1sSHR0cEZhY3RvcnkiLCJXZWJDaGFubmVsIiwiWGhySW8iLCJ1aWQiLCJpc0F1dGhlbnRpY2F0ZWQiLCJ0b0tleSIsImlzRXF1YWwiLCJVTkFVVEhFTlRJQ0FURUQiLCJHT09HTEVfQ1JFREVOVElBTFMiLCJGSVJTVF9QQVJUWSIsIk1PQ0tfVVNFUiIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJVTkFWQUlMQUJMRSIsIkRBVEFfTE9TUyIsInVzZXIiLCJnZXRUb2tlbiIsImludmFsaWRhdGVUb2tlbiIsImVucXVldWVSZXRyeWFibGUiLCJzaHV0ZG93biIsImN1cnJlbnRVc2VyIiwiZm9yY2VSZWZyZXNoIiwiYXV0aCIsImFkZEF1dGhUb2tlbkxpc3RlbmVyIiwiYWNjZXNzVG9rZW4iLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImdldFVpZCIsImdldEF1dGhIZWFkZXJWYWx1ZUZvckZpcnN0UGFydHkiLCJ0dCIsImFwcENoZWNrIiwiYWRkVG9rZW5MaXN0ZW5lciIsInJlbW92ZVRva2VuTGlzdGVuZXIiLCJudCIsInByZXZpb3VzVmFsdWUiLCJzZXF1ZW5jZU51bWJlckhhbmRsZXIiLCJ3cml0ZVNlcXVlbmNlTnVtYmVyIiwic3QiLCJjcnlwdG8iLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsIml0Iiwic3RhdGljIiwicnQiLCJvdCIsImV2ZXJ5IiwiYXQiLCJzZWNvbmRzIiwibmFub3NlY29uZHMiLCJmcm9tTWlsbGlzIiwiZ2V0VGltZSIsInRvRGF0ZSIsInRvTWlsbGlzIiwiX2NvbXBhcmVUbyIsInRvSlNPTiIsInBhZFN0YXJ0IiwiY3QiLCJ0aW1lc3RhbXAiLCJjb21wYXJlVG8iLCJ0b01pY3Jvc2Vjb25kcyIsInRvVGltZXN0YW1wIiwiaHQiLCJsdCIsImZ0IiwiZHQiLCJzZWdtZW50cyIsIm9mZnNldCIsImxlbiIsImNvbXBhcmF0b3IiLCJjaGlsZCIsImxpbWl0IiwiY29uc3RydWN0IiwicG9wRmlyc3QiLCJwb3BMYXN0IiwiZmlyc3RTZWdtZW50IiwibGFzdFNlZ21lbnQiLCJpc0VtcHR5IiwiaXNQcmVmaXhPZiIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJ0b0FycmF5IiwiX3QiLCJjYW5vbmljYWxTdHJpbmciLCJ3dCIsIm10IiwiaXNWYWxpZElkZW50aWZpZXIiLCJpc0tleUZpZWxkIiwiZ3QiLCJmaWVsZHMiLCJzb3J0IiwiY292ZXJzIiwicHQiLCJiaW5hcnlTdHJpbmciLCJTeW1ib2wiLCJpdGVyYXRvciIsInRvQmFzZTY0IiwidG9VaW50OEFycmF5IiwiYXBwcm94aW1hdGVCeXRlU2l6ZSIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiSXQiLCJSZWdFeHAiLCJUdCIsIm5hbm9zIiwiRXQiLCJBdCIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIlJ0IiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwiYnQiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJQdCIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCJWdCIsImRhdGFiYXNlSWQiLCJwZXJzaXN0ZW5jZUtleSIsImhvc3QiLCJzc2wiLCJhdXRvRGV0ZWN0TG9uZ1BvbGxpbmciLCJ1c2VGZXRjaFN0cmVhbXMiLCJ2dCIsInByb2plY3RJZCIsImRhdGFiYXNlIiwiaXNEZWZhdWx0RGF0YWJhc2UiLCJTdCIsIkR0IiwieHQiLCJwYXRoIiwiZnJvbVN0cmluZyIsImVtcHR5UGF0aCIsImNvbGxlY3Rpb25Hcm91cCIsImhhc0NvbGxlY3Rpb25JZCIsImdldENvbGxlY3Rpb25Hcm91cCIsImdldENvbGxlY3Rpb25QYXRoIiwiTXQiLCJIdCIsIk90IiwiYm9vbGVhblZhbHVlIiwiYnl0ZXNWYWx1ZSIsInJlZmVyZW5jZVZhbHVlIiwiZ2VvUG9pbnRWYWx1ZSIsImxhdGl0dWRlIiwibG9uZ2l0dWRlIiwiaW50ZWdlclZhbHVlIiwiZG91YmxlVmFsdWUiLCJhcnJheVZhbHVlIiwiRnQiLCIkdCIsIkJ0IiwiTHQiLCJVdCIsImZyb21OYW1lIiwiR3QiLCJLdCIsIlF0IiwianQiLCJXdCIsInp0IiwiWHQiLCJmaWVsZCIsImdldEZpZWxkc01hcCIsInNldEFsbCIsImFwcGx5Q2hhbmdlcyIsImNsb25lIiwiWnQiLCJ0ZSIsImRvY3VtZW50VHlwZSIsInJlYWRUaW1lIiwiZG9jdW1lbnRTdGF0ZSIsImVtcHR5IiwiY29udmVydFRvRm91bmREb2N1bWVudCIsImNvbnZlcnRUb05vRG9jdW1lbnQiLCJjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQiLCJzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJzZXRIYXNMb2NhbE11dGF0aW9ucyIsInNldFJlYWRUaW1lIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJoYXNQZW5kaW5nV3JpdGVzIiwiaXNWYWxpZERvY3VtZW50IiwiaXNGb3VuZERvY3VtZW50IiwiaXNOb0RvY3VtZW50IiwiaXNVbmtub3duRG9jdW1lbnQiLCJtdXRhYmxlQ29weSIsInVlIiwiYWUiLCJkb2N1bWVudEtleSIsImxhcmdlc3RCYXRjaElkIiwiY2UiLCJoZSIsIm9yZGVyQnkiLCJmaWx0ZXJzIiwic3RhcnRBdCIsImVuZEF0IiwibGUiLCJmZSIsIm9wIiwiZGlyIiwiaW5jbHVzaXZlIiwicG9zaXRpb24iLCJfZSIsInZlIiwiRGUiLCJ3ZSIsImlzRG9jdW1lbnRLZXkiLCJnZSIsInllIiwiRWUiLCJBZSIsIlJlIiwiYmUiLCJwZSIsIkllIiwibWF0Y2hlcyIsIlRlIiwibnVsbFZhbHVlIiwiUGUiLCJWZSIsIlNlIiwiQ2UiLCJleHBsaWNpdE9yZGVyQnkiLCJsaW1pdFR5cGUiLCJOZSIsImtlIiwiTWUiLCJCZSIsIkZlIiwiT2UiLCJrZXlGaWVsZCIsIkxlIiwicWUiLCJHZSIsIktlIiwiZGUiLCJRZSIsIldlIiwiemUiLCJIZSIsIkplIiwiWWUiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsIkN0IiwiWGUiLCJaZSIsIm5uIiwic24iLCJybiIsIm9uIiwidW4iLCJlbiIsImNuIiwidG4iLCJhbiIsImVsZW1lbnRzIiwiaG4iLCJkbiIsInRyYW5zZm9ybVJlc3VsdHMiLCJfbiIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJpc05vbmUiLCJ3biIsIm1uIiwiZ24iLCJFbiIsImJuIiwiZmllbGRUcmFuc2Zvcm1zIiwiQW4iLCJwcmVjb25kaXRpb24iLCJSbiIsInluIiwiUG4iLCJUbiIsInBuIiwiSW4iLCJmaWVsZE1hc2siLCJWbiIsInZuIiwiU24iLCJjb3VudCIsIkRuIiwiQ24iLCJObiIsImtuIiwibWFwS2V5Rm4iLCJlcXVhbHNGbiIsImlubmVyIiwiaW5uZXJTaXplIiwiTW4iLCJyb290IiwiRm4iLCJFTVBUWSIsImluc2VydCIsImNvcHkiLCJCTEFDSyIsInJlbW92ZSIsIm1pbktleSIsIm1heEtleSIsImlub3JkZXJUcmF2ZXJzYWwiLCJyZXZlcnNlVHJhdmVyc2FsIiwiZ2V0SXRlcmF0b3IiLCJPbiIsImdldEl0ZXJhdG9yRnJvbSIsImdldFJldmVyc2VJdGVyYXRvciIsImdldFJldmVyc2VJdGVyYXRvckZyb20iLCJpc1JldmVyc2UiLCJub2RlU3RhY2siLCJnZXROZXh0IiwiaGFzTmV4dCIsInBlZWsiLCJjb2xvciIsIlJFRCIsImZpeFVwIiwicmVtb3ZlTWluIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrTWF4RGVwdGgiLCJjaGVjayIsInBvdyIsIiRuIiwiZmlyc3QiLCJsYXN0IiwiZm9yRWFjaEluUmFuZ2UiLCJmb3JFYWNoV2hpbGUiLCJmaXJzdEFmdGVyT3JFcXVhbCIsIkJuIiwidW5pb25XaXRoIiwiaXRlciIsIlVuIiwicW4iLCJHbiIsIktuIiwiUW4iLCJqbiIsIlduIiwiem4iLCJIbiIsIkpuIiwiWW4iLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJYbiIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwiWm4iLCJyZW1vdmVkVGFyZ2V0SWRzIiwidHMiLCJ0YXJnZXRJZCIsImVzIiwidGFyZ2V0SWRzIiwiY2F1c2UiLCJucyIsInJzIiwiZXQiLCJzcyIsImlzIiwidXQiLCJmb3JFYWNoVGFyZ2V0IiwicmVtb3ZlVGFyZ2V0IiwibmV3Tm9Eb2N1bWVudCIsInl0IiwicHVycG9zZSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJvcyIsImFzYyIsImRlc2MiLCJ1cyIsImluIiwiYXMiLCJjcyIsImhzIiwibHMiLCJmcyIsImZyb21UaW1lc3RhbXAiLCJkcyIsIl9zIiwiTHMiLCJ3cyIsIm1zIiwiSXMiLCJncyIsInBzIiwiVHMiLCJ2cyIsImRvY3VtZW50cyIsIlNzIiwic3RydWN0dXJlZFF1ZXJ5IiwicGFyZW50IiwiY29sbGVjdGlvbklkIiwiYWxsRGVzY2VuZGFudHMiLCJ1bmFyeUZpbHRlciIsIk1zIiwiZmllbGRGaWx0ZXIiLCJrcyIsImNvbXBvc2l0ZUZpbHRlciIsIndoZXJlIiwiZGlyZWN0aW9uIiwiTnMiLCJiZWZvcmUiLCJEcyIsInlzIiwieHMiLCJPcyIsInhlIiwiJHMiLCJGcyIsInJlZHVjZSIsImZpZWxkUGF0aCIsImZyb21TZXJ2ZXJGb3JtYXQiLCJOYU4iLCJCcyIsImZpZWxkUGF0aHMiLCJ3aSIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsInRvUHJvbWlzZSIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiSWkiLCJWaSIsImJhdGNoSWQiLCJsb2NhbFdyaXRlVGltZSIsImJhc2VNdXRhdGlvbnMiLCJtdXRhdGlvbnMiLCJhcHBseVRvUmVtb3RlRG9jdW1lbnQiLCJtdXRhdGlvblJlc3VsdHMiLCJhcHBseVRvTG9jYWxWaWV3IiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJ2aSIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsImRvY1ZlcnNpb25zIiwiU2kiLCJtdXRhdGlvbiIsImdldEtleSIsIkRpIiwic2VxdWVuY2VOdW1iZXIiLCJsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uIiwid2l0aFNlcXVlbmNlTnVtYmVyIiwid2l0aFJlc3VtZVRva2VuIiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJDaSIsIkp0IiwiTGkiLCJVZSIsInppIiwiZWUiLCJuZSIsInNlIiwiaWUiLCJyZSIsIm9lIiwicnIiLCJvciIsImFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRFbnRyaWVzIiwiYWRkRmllbGRJbmRleCIsImRlbGV0ZUZpZWxkSW5kZXgiLCJnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCIsImdldEZpZWxkSW5kZXgiLCJnZXRGaWVsZEluZGV4ZXMiLCJnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUiLCJ1cGRhdGVDb2xsZWN0aW9uR3JvdXAiLCJ1cGRhdGVJbmRleEVudHJpZXMiLCJfciIsImNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQiLCJwZXJjZW50aWxlVG9Db2xsZWN0IiwibWF4aW11bVNlcXVlbmNlTnVtYmVyc1RvQ29sbGVjdCIsIkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFIiwiREVGQVVMVF9NQVhfU0VRVUVOQ0VfTlVNQkVSU19UT19DT0xMRUNUIiwiREVGQVVMVCIsIkRJU0FCTEVEIiwiRXIiLCJWciIsIkhyIiwiaW5kZXhNYW5hZ2VyIiwiZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXkiLCJnZXRFbnRyeSIsIlVzIiwicXMiLCJHcyIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsIktzIiwiUXMiLCIkZSIsImpzIiwiV3MiLCJnZXRBbGxGcm9tQ29sbGVjdGlvbiIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5IiwibmV3SW52YWxpZERvY3VtZW50IiwiSnIiLCJmcm9tQ2FjaGUiLCJ6cyIsIkhzIiwiZG9jQ2hhbmdlcyIsImRvYyIsIllyIiwiWXMiLCJYcyIsIlpzIiwidGkiLCJlaSIsIlhyIiwicGVyc2lzdGVuY2UiLCJuaSIsInNpIiwiaWkiLCJyaSIsIm9pIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsImdldFRhcmdldENhY2hlIiwiZ2V0QnVuZGxlQ2FjaGUiLCJ1aSIsImdldEluZGV4TWFuYWdlciIsImdldE11dGF0aW9uUXVldWUiLCJhaSIsInNldEluZGV4TWFuYWdlciIsImNvbGxlY3RHYXJiYWdlIiwicnVuVHJhbnNhY3Rpb24iLCJjb2xsZWN0IiwidG8iLCJnZXRBbGxNdXRhdGlvbkJhdGNoZXMiLCJjaSIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJubyIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJybyIsImdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkIiwidW8iLCJyZWZlcmVuY2VEZWxlZ2F0ZSIsImFvIiwiZ2V0VGFyZ2V0RGF0YSIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwibG8iLCJqZSIsImhpIiwid28iLCJfaSIsImdldEJ1bmRsZU1ldGFkYXRhIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiY3JlYXRlVGltZSIsImdldE5hbWVkUXVlcnkiLCJzYXZlTmFtZWRRdWVyeSIsInF1ZXJ5IiwiYnVuZGxlZFF1ZXJ5IiwibW8iLCJvdmVybGF5cyIsIm1pIiwiZ2V0T3ZlcmxheSIsInNhdmVPdmVybGF5cyIsInJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbiIsImdldE92ZXJsYXlzRm9yQ29sbGVjdGlvbkdyb3VwIiwiZ28iLCJnaSIsInlvIiwieWkiLCJwaSIsImFkZFJlZmVyZW5jZSIsIlRpIiwicmVtb3ZlUmVmZXJlbmNlIiwiRWkiLCJBaSIsIlJpIiwiYmkiLCJQaSIsImNvbnRhaW5zS2V5IiwicG8iLCJjaGVja0VtcHR5IiwiYWRkTXV0YXRpb25CYXRjaCIsImxvb2t1cE11dGF0aW9uQmF0Y2giLCJnZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJ4aSIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJOaSIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwicGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2siLCJJbyIsImtpIiwiZG9jcyIsImFkZEVudHJ5IiwicmVtb3ZlRW50cnkiLCJnZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwIiwiTWkiLCJuZXdDaGFuZ2VCdWZmZXIiLCJUbyIsImdldFNpemUiLCJjaGFuZ2VzIiwiY2hhbmdlc0FwcGxpZWQiLCJhc3NlcnROb3RBcHBsaWVkIiwiZ2V0RnJvbUNhY2hlIiwiZ2V0QWxsRnJvbUNhY2hlIiwiRW8iLCJPaSIsImxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJoaWdoZXN0VGFyZ2V0SWQiLCJGaSIsIiRpIiwidGFyZ2V0Q291bnQiLCJCaSIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsImFsbG9jYXRlVGFyZ2V0SWQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJhZGRUYXJnZXREYXRhIiwidXBkYXRlVGFyZ2V0RGF0YSIsInJlbW92ZVRhcmdldERhdGEiLCJyZW1vdmVUYXJnZXRzIiwicmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQiLCJnZXRUYXJnZXRDb3VudCIsImFkZE1hdGNoaW5nS2V5cyIsInJlbW92ZU1hdGNoaW5nS2V5cyIsIkFvIiwiVWkiLCJzdGFydGVkIiwic2V0RGF0YWJhc2VEZWxldGVkTGlzdGVuZXIiLCJzZXROZXR3b3JrRW5hYmxlZCIsImdldERvY3VtZW50T3ZlcmxheUNhY2hlIiwiUm8iLCJxaSIsIkdpIiwicmFpc2VPbkNvbW1pdHRlZEV2ZW50IiwiS2kiLCJvbkNvbW1pdHRlZExpc3RlbmVycyIsImFkZE9uQ29tbWl0dGVkTGlzdGVuZXIiLCJjdXJyZW50U2VxdWVuY2VOdW1iZXIiLCJibyIsIlFpIiwiamkiLCJmcm9tUGF0aCIsIkhpIiwidXBkYXRlTGltYm9Eb2N1bWVudCIsIk5vIiwiYWN0aXZlVGFyZ2V0SWRzIiwiWGkiLCJaaSIsIllpIiwidXBkYXRlVGltZU1zIiwiTW8iLCJGciIsIiRyIiwib25saW5lU3RhdGVIYW5kbGVyIiwiYWRkUGVuZGluZ011dGF0aW9uIiwidXBkYXRlTXV0YXRpb25TdGF0ZSIsImFkZExvY2FsUXVlcnlUYXJnZXQiLCJ1cGRhdGVRdWVyeVN0YXRlIiwicmVtb3ZlTG9jYWxRdWVyeVRhcmdldCIsImlzTG9jYWxRdWVyeVRhcmdldCIsImNsZWFyUXVlcnlTdGF0ZSIsImdldEFsbEFjdGl2ZVF1ZXJ5VGFyZ2V0cyIsImlzQWN0aXZlUXVlcnlUYXJnZXQiLCJoYW5kbGVVc2VyQ2hhbmdlIiwic2V0T25saW5lU3RhdGUiLCJub3RpZnlCdW5kbGVMb2FkZWQiLCJPbyIsIkJyIiwiRm8iLCJMciIsIlVyIiwicXIiLCJHciIsIktyIiwiUXIiLCIkbyIsIkJhdGNoR2V0RG9jdW1lbnRzIiwiQ29tbWl0IiwiUnVuUXVlcnkiLCJCbyIsImpyIiwiV3IiLCJ6ciIsIm9uTWVzc2FnZSIsIlpyIiwiZW8iLCJMbyIsImRhdGFiYXNlSW5mbyIsInNvIiwiaW8iLCJvbyIsImNvIiwiaG8iLCJmb3J3YXJkQ2hhbm5lbFJlcXVlc3RUaW1lb3V0TXMiLCJxbyIsIkdvIiwiS28iLCJ0aW1lcklkIiwiZm8iLCJfbyIsImVucXVldWVBZnRlckRlbGF5Iiwic2tpcERlbGF5IiwiUW8iLCJhdXRoQ3JlZGVudGlhbHNQcm92aWRlciIsImFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciIsIlBvIiwiVm8iLCJ2byIsIlNvIiwiRG8iLCJDbyIsInhvIiwia28iLCJVbyIsImVucXVldWVBbmRGb3JnZXQiLCJqbyIsInRhcmdldENoYW5nZSIsInRhcmdldENoYW5nZVR5cGUiLCJkb2N1bWVudENoYW5nZSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwiUnMiLCJhZGRUYXJnZXQiLCJDcyIsImxhYmVscyIsIldvIiwiem8iLCJsYXN0U3RyZWFtVG9rZW4iLCJIbyIsInN0cmVhbVRva2VuIiwiVnMiLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwiSm8iLCJZbyIsIlhvIiwid3JpdGVzIiwidXBkYXRlIiwidXBkYXRlTWFzayIsInZlcmlmeSIsInVwZGF0ZVRyYW5zZm9ybXMiLCJzZXRUb1NlcnZlclZhbHVlIiwiYXBwZW5kTWlzc2luZ0VsZW1lbnRzIiwicmVtb3ZlQWxsRnJvbUFycmF5IiwiaW5jcmVtZW50IiwiY3VycmVudERvY3VtZW50IiwiYnMiLCJhdXRoQ3JlZGVudGlhbHMiLCJhcHBDaGVja0NyZWRlbnRpYWxzIiwiWm8iLCJ0dSIsInRlcm1pbmF0ZSIsImFzeW5jUXVldWUiLCJldSIsIm51Iiwic3UiLCJpdSIsInJ1Iiwib3UiLCJ1dSIsImF1IiwibG9jYWxTdG9yZSIsImRhdGFzdG9yZSIsInJlbW90ZVN5bmNlciIsImN1IiwiaHUiLCJsdSIsImZ1IiwiZHUiLCJfdSIsIkF1Iiwid3UiLCJyZWplY3RMaXN0ZW4iLCJhcHBseVJlbW90ZUV2ZW50IiwiUnUiLCJtdSIsImd1IiwieXUiLCJwdSIsImFwcGx5U3VjY2Vzc2Z1bFdyaXRlIiwiSXUiLCJ4biIsInJlamVjdEZhaWxlZFdyaXRlIiwiVHUiLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsInN0b3AiLCJidSIsInRhcmdldFRpbWVNcyIsInJlbW92YWxDYWxsYmFjayIsInRpbWVySGFuZGxlIiwiaGFuZGxlRGVsYXlFbGFwc2VkIiwiUHUiLCJWdSIsImtleWVkTWFwIiwic29ydGVkU2V0IiwidnUiLCJ0cmFjayIsIlN1Iiwib2xkRG9jcyIsIm11dGF0ZWRLZXlzIiwic3luY1N0YXRlQ2hhbmdlZCIsImV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzIiwiZW1wdHlTZXQiLCJEdSIsImxpc3RlbmVycyIsIkN1IiwicXVlcmllcyIsIm9ubGluZVN0YXRlIiwia3UiLCJPdSIsIk11Iiwib25FcnJvciIsIkZ1IiwiaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyIsIkV1IiwiZnJvbUluaXRpYWxEb2N1bWVudHMiLCJxdSIsIkd1IiwiS3UiLCIkdSIsIkJ1IiwiTHUiLCJVdSIsIlF1IiwianUiLCJXdSIsInNuYXBzaG90IiwienUiLCJIdSIsIkp1IiwiWXUiLCJ2aWV3IiwiWHUiLCJyZW1vdGVTdG9yZSIsImV2ZW50TWFuYWdlciIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJadSIsImlzUHJpbWFyeUNsaWVudCIsInRyYWNrUmVtb3ZhbHMiLCJKcyIsInN5bmNocm9uaXplVGFicyIsImdjU2NoZWR1bGVyIiwiaW5pdGlhbFVzZXIiLCJXaSIsImNyZWF0ZURhdGFzdG9yZSIsImNyZWF0ZVJlbW90ZVN0b3JlIiwiY3JlYXRlRXZlbnRNYW5hZ2VyIiwic3luY0VuZ2luZSIsImNyZWF0ZVN5bmNFbmdpbmUiLCJtdXRlZCIsImNsaWVudElkIiwiYXV0aENyZWRlbnRpYWxMaXN0ZW5lciIsImFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyIiwic2V0Q3JlZGVudGlhbENoYW5nZUxpc3RlbmVyIiwic2V0QXBwQ2hlY2tUb2tlbkNoYW5nZUxpc3RlbmVyIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsImlzU2h1dHRpbmdEb3duIiwiZW50ZXJSZXN0cmljdGVkTW9kZSIsImVucXVldWVBbmRGb3JnZXRFdmVuV2hpbGVSZXN0cmljdGVkIiwib25saW5lQ29tcG9uZW50cyIsIm9mZmxpbmVDb21wb25lbnRzIiwiZ2V0Q29uZmlndXJhdGlvbiIsIm9uTGlzdGVuIiwib25Vbmxpc3RlbiIsIk51Iiwic291cmNlIiwieHUiLCJpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzIiwiY2FjaGVTaXplQnl0ZXMiLCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nIiwiZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nIiwiX2F1dGhDcmVkZW50aWFscyIsIl9hcHBDaGVja0NyZWRlbnRpYWxzIiwiX3BlcnNpc3RlbmNlS2V5IiwiX3NldHRpbmdzIiwiX3NldHRpbmdzRnJvemVuIiwiX2RhdGFiYXNlSWQiLCJfYXBwIiwiX2luaXRpYWxpemVkIiwiX3Rlcm1pbmF0ZWQiLCJfdGVybWluYXRlVGFzayIsIl9zZXRTZXR0aW5ncyIsImNsaWVudCIsInNlc3Npb25JbmRleCIsImlhbVRva2VuIiwiX2dldFNldHRpbmdzIiwiX2ZyZWV6ZVNldHRpbmdzIiwiX3Rlcm1pbmF0ZSIsInNldHRpbmdzIiwiY29udmVydGVyIiwiX2tleSIsImZpcmVzdG9yZSIsIl9wYXRoIiwiX2MiLCJ3aXRoQ29udmVydGVyIiwiX3F1ZXJ5IiwidmlzaWJpbGl0eVN0YXRlIiwiZW5xdWV1ZSIsInN0YWNrIiwiY3JlYXRlQW5kU2NoZWR1bGUiLCJfcXVldWUiLCJfZmlyZXN0b3JlQ2xpZW50IiwiX2ludGVybmFsUGF0aCIsIl9ieXRlU3RyaW5nIiwiX21ldGhvZE5hbWUiLCJpc0Zpbml0ZSIsIl9sYXQiLCJfbG9uZyIsInRvTXV0YXRpb24iLCJ3aCIsIm1ldGhvZE5hbWUiLCJjb250YWlucyIsIm1lcmdlIiwibWVyZ2VGaWVsZHMiLCJsaCIsImNoIiwiZmgiLCJtaCIsIl90b0ZpZWxkVHJhbnNmb3JtIiwiYWgiLCJoaCIsImZyb21EYXRlIiwiZ2V0UHJvdG90eXBlT2YiLCJfaCIsImRoIiwic2VhcmNoIiwiZ2giLCJfZmlyZXN0b3JlIiwiX3VzZXJEYXRhV3JpdGVyIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsInJlZiIsInloIiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsInBoIiwiSWgiLCJUaCIsIl9maXJlc3RvcmVJbXBsIiwibWV0YWRhdGEiLCJFaCIsInNlcnZlclRpbWVzdGFtcHMiLCJZaCIsIlhoIiwibGwiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiY29udmVydERvY3VtZW50S2V5IiwiaWwiLCJ0b0ZpcmVzdG9yZSIsIldoIiwiaGwiLCJub25lIiwiX19yZXN0IiwiZ2V0T3duUHJvcGVydHlTeW1ib2xzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJwcm9kRXJyb3JNYXAiLCJfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkiLCJsb2dDbGllbnQiLCJfbG9nRXJyb3IiLCJtc2ciLCJfZmFpbCIsImF1dGhPckNvZGUiLCJyZXN0IiwiY3JlYXRlRXJyb3JJbnRlcm5hbCIsIl9jcmVhdGVFcnJvciIsImZ1bGxQYXJhbXMiLCJfZXJyb3JGYWN0b3J5IiwiX2Fzc2VydCIsImFzc2VydGlvbiIsImRlYnVnRmFpbCIsImZhaWx1cmUiLCJkZWJ1Z0Fzc2VydCIsImluc3RhbmNlQ2FjaGUiLCJfZ2V0SW5zdGFuY2UiLCJjbHMiLCJfZ2V0Q3VycmVudFVybCIsImhyZWYiLCJfZ2V0Q3VycmVudFNjaGVtZSIsIkRlbGF5Iiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiX2VtdWxhdG9yVXJsIiwiZW11bGF0b3IiLCJzdGFydHNXaXRoIiwiRmV0Y2hQcm92aWRlciIsImZldGNoSW1wbCIsImhlYWRlcnNJbXBsIiwicmVzcG9uc2VJbXBsIiwiUmVzcG9uc2UiLCJTRVJWRVJfRVJST1JfTUFQIiwiREVGQVVMVF9BUElfVElNRU9VVF9NUyIsIl9hZGRUaWRJZk5lY2Vzc2FyeSIsInRlbmFudElkIiwiX3BlcmZvcm1BcGlSZXF1ZXN0IiwiY3VzdG9tRXJyb3JNYXAiLCJfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmciLCJhcGlLZXkiLCJfZ2V0QWRkaXRpb25hbEhlYWRlcnMiLCJsYW5ndWFnZUNvZGUiLCJfZ2V0RmluYWxUYXJnZXQiLCJhcGlIb3N0IiwicmVmZXJyZXJQb2xpY3kiLCJmZXRjaEZuIiwiX2NhbkluaXRFbXVsYXRvciIsImVycm9yTWFwIiwibmV0d29ya1RpbWVvdXQiLCJOZXR3b3JrVGltZW91dCIsInJhY2UiLCJjbGVhck5ldHdvcmtUaW1lb3V0IiwianNvbiIsIl9tYWtlVGFnZ2VkRXJyb3IiLCJvayIsInNlcnZlckVycm9yQ29kZSIsInNlcnZlckVycm9yTWVzc2FnZSIsImF1dGhFcnJvciIsIl9lcnJvcldpdGhDdXN0b21NZXNzYWdlIiwiX3BlcmZvcm1TaWduSW5SZXF1ZXN0Iiwic2VydmVyUmVzcG9uc2UiLCJfc2VydmVyUmVzcG9uc2UiLCJiYXNlIiwiYXBpU2NoZW1lIiwidGltZXIiLCJlcnJvclBhcmFtcyIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJfdG9rZW5SZXNwb25zZSIsInV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyIsInV0Y1RpbWVzdGFtcCIsInRvVVRDU3RyaW5nIiwic2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzIiwiX3BhcnNlVG9rZW4iLCJhbGdvcml0aG0iLCJwYXlsb2FkIiwic2lnbmF0dXJlIiwiZGVjb2RlZCIsImJhc2U2NERlY29kZSIsIl9sb2dvdXRJZkludmFsaWRhdGVkIiwiYnlwYXNzQXV0aFN0YXRlIiwiaXNVc2VySW52YWxpZGF0ZWQiLCJzaWduT3V0IiwiUHJvYWN0aXZlUmVmcmVzaCIsImlzUnVubmluZyIsImVycm9yQmFja29mZiIsIl9zdGFydCIsInNjaGVkdWxlIiwiX3N0b3AiLCJnZXRJbnRlcnZhbCIsIndhc0Vycm9yIiwiaW50ZXJ2YWwiLCJzdHNUb2tlbk1hbmFnZXIiLCJleHBpcmF0aW9uVGltZSIsIml0ZXJhdGlvbiIsImdldElkVG9rZW4iLCJVc2VyTWV0YWRhdGEiLCJjcmVhdGVkQXQiLCJsYXN0TG9naW5BdCIsIl9pbml0aWFsaXplVGltZSIsImxhc3RTaWduSW5UaW1lIiwiY3JlYXRpb25UaW1lIiwiX2NvcHkiLCJfcmVsb2FkV2l0aG91dFNhdmluZyIsImlkVG9rZW4iLCJnZXRBY2NvdW50SW5mbyIsInVzZXJzIiwiY29yZUFjY291bnQiLCJfbm90aWZ5UmVsb2FkTGlzdGVuZXIiLCJuZXdQcm92aWRlckRhdGEiLCJwcm92aWRlclVzZXJJbmZvIiwicHJvdmlkZXJJZCIsInJhd0lkIiwiZGlzcGxheU5hbWUiLCJwaG90b1VSTCIsInBob3RvVXJsIiwicHJvdmlkZXJEYXRhIiwib3JpZ2luYWwiLCJuZXdEYXRhIiwib2xkSXNBbm9ueW1vdXMiLCJpc0Fub255bW91cyIsIm5ld0lzQW5vbnltb3VzIiwicGFzc3dvcmRIYXNoIiwidXBkYXRlcyIsImxvY2FsSWQiLCJlbWFpbFZlcmlmaWVkIiwiU3RzVG9rZW5NYW5hZ2VyIiwicmVmcmVzaFRva2VuIiwiaXNFeHBpcmVkIiwidXBkYXRlRnJvbVNlcnZlclJlc3BvbnNlIiwiZXhwaXJlc0luIiwicGFyc2VkVG9rZW4iLCJleHAiLCJpYXQiLCJfdG9rZW5FeHBpcmVzSW4iLCJ1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uIiwicmVmcmVzaCIsImNsZWFyUmVmcmVzaFRva2VuIiwib2xkVG9rZW4iLCJ0b2tlbkFwaUhvc3QiLCJhY2Nlc3NfdG9rZW4iLCJleHBpcmVzX2luIiwicmVmcmVzaF90b2tlbiIsInJlcXVlc3RTdHNUb2tlbiIsImV4cGlyZXNJblNlYyIsIm9iamVjdCIsIm1hbmFnZXIiLCJfYXNzaWduIiwiX2Nsb25lIiwiX3BlcmZvcm1SZWZyZXNoIiwiYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQiLCJVc2VySW1wbCIsIm9wdCIsInByb2FjdGl2ZVJlZnJlc2giLCJyZWxvYWRVc2VySW5mbyIsInJlbG9hZExpc3RlbmVyIiwiX3BlcnNpc3RVc2VySWZDdXJyZW50IiwiX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCIsImdldElkVG9rZW5SZXN1bHQiLCJ1c2VySW50ZXJuYWwiLCJjbGFpbXMiLCJhdXRoX3RpbWUiLCJmaXJlYmFzZSIsInNpZ25JblByb3ZpZGVyIiwiYXV0aFRpbWUiLCJpc3N1ZWRBdFRpbWUiLCJzaWduSW5TZWNvbmRGYWN0b3IiLCJyZWxvYWQiLCJ1c2VySW5mbyIsIl9vblJlbG9hZCIsIl9zdGFydFByb2FjdGl2ZVJlZnJlc2giLCJfc3RvcFByb2FjdGl2ZVJlZnJlc2giLCJ0b2tlbnNSZWZyZXNoZWQiLCJkZWxldGVBY2NvdW50IiwiX3JlZGlyZWN0RXZlbnRJZCIsIl9iIiwiX2QiLCJfZiIsIl9nIiwicGxhaW5PYmplY3RUb2tlbk1hbmFnZXIiLCJmcm9tSlNPTiIsImlkVG9rZW5SZXNwb25zZSIsIkluTWVtb3J5UGVyc2lzdGVuY2UiLCJzdG9yYWdlIiwiX2FkZExpc3RlbmVyIiwiX2xpc3RlbmVyIiwiX3JlbW92ZUxpc3RlbmVyIiwiaW5NZW1vcnlQZXJzaXN0ZW5jZSIsIl9wZXJzaXN0ZW5jZUtleU5hbWUiLCJQZXJzaXN0ZW5jZVVzZXJNYW5hZ2VyIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJzZXRDdXJyZW50VXNlciIsIl9zZXQiLCJibG9iIiwiX2dldCIsIl9mcm9tSlNPTiIsInJlbW92ZUN1cnJlbnRVc2VyIiwiX3JlbW92ZSIsInNhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0IiwibmV3UGVyc2lzdGVuY2UiLCJnZXRDdXJyZW50VXNlciIsInBlcnNpc3RlbmNlSGllcmFyY2h5IiwiYXZhaWxhYmxlUGVyc2lzdGVuY2VzIiwiX2lzQXZhaWxhYmxlIiwic2VsZWN0ZWRQZXJzaXN0ZW5jZSIsInVzZXJUb01pZ3JhdGUiLCJtaWdyYXRpb25IaWVyYXJjaHkiLCJfc2hvdWxkQWxsb3dNaWdyYXRpb24iLCJfZ2V0QnJvd3Nlck5hbWUiLCJfaXNJRU1vYmlsZSIsIl9pc0ZpcmVmb3giLCJfaXNCbGFja0JlcnJ5IiwiX2lzV2ViT1MiLCJfaXNTYWZhcmkiLCJfaXNDaHJvbWVJT1MiLCJfaXNBbmRyb2lkIiwiX2lzSU9TIiwiX2lzTW9iaWxlQnJvd3NlciIsIl9nZXRDbGllbnRWZXJzaW9uIiwiY2xpZW50UGxhdGZvcm0iLCJmcmFtZXdvcmtzIiwicmVwb3J0ZWRQbGF0Zm9ybSIsIkF1dGhJbXBsIiwiaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyIiwiZW11bGF0b3JDb25maWciLCJvcGVyYXRpb25zIiwiYXV0aFN0YXRlU3Vic2NyaXB0aW9uIiwiU3Vic2NyaXB0aW9uIiwiaWRUb2tlblN1YnNjcmlwdGlvbiIsInJlZGlyZWN0VXNlciIsImlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQiLCJfaXNJbml0aWFsaXplZCIsIl9kZWxldGVkIiwiX2luaXRpYWxpemF0aW9uUHJvbWlzZSIsIl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJsYXN0Tm90aWZpZWRVaWQiLCJhcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmciLCJjbGllbnRWZXJzaW9uIiwic2RrQ2xpZW50VmVyc2lvbiIsIl9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlIiwicG9wdXBSZWRpcmVjdFJlc29sdmVyIiwicXVldWUiLCJwZXJzaXN0ZW5jZU1hbmFnZXIiLCJfc2hvdWxkSW5pdFByb2FjdGl2ZWx5IiwiX2luaXRpYWxpemUiLCJpbml0aWFsaXplQ3VycmVudFVzZXIiLCJhc3NlcnRlZFBlcnNpc3RlbmNlIiwiX2N1cnJlbnRVc2VyIiwiX3VwZGF0ZUN1cnJlbnRVc2VyIiwic3RvcmVkVXNlciIsImF1dGhEb21haW4iLCJnZXRPckluaXRSZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciIsInJlZGlyZWN0VXNlckV2ZW50SWQiLCJzdG9yZWRVc2VyRXZlbnRJZCIsInRyeVJlZGlyZWN0U2lnbkluIiwiZGlyZWN0bHlTZXRDdXJyZW50VXNlciIsInJlbG9hZEFuZFNldEN1cnJlbnRVc2VyT3JDbGVhciIsInJlZGlyZWN0UmVzb2x2ZXIiLCJfY29tcGxldGVSZWRpcmVjdEZuIiwiX3NldFJlZGlyZWN0VXNlciIsInVzZURldmljZUxhbmd1YWdlIiwibmF2aWdhdG9yTGFuZ3VhZ2UiLCJsYW5ndWFnZXMiLCJsYW5ndWFnZSIsIl9nZXRVc2VyTGFuZ3VhZ2UiLCJ1c2VyRXh0ZXJuIiwibm90aWZ5QXV0aExpc3RlbmVycyIsInJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyIiwic2V0UGVyc2lzdGVuY2UiLCJfZ2V0UGVyc2lzdGVuY2UiLCJfdXBkYXRlRXJyb3JNYXAiLCJvbkF1dGhTdGF0ZUNoYW5nZWQiLCJjb21wbGV0ZWQiLCJyZWdpc3RlclN0YXRlTGlzdGVuZXIiLCJvbklkVG9rZW5DaGFuZ2VkIiwicmVkaXJlY3RNYW5hZ2VyIiwicmVzb2x2ZXIiLCJfcmVkaXJlY3RQZXJzaXN0ZW5jZSIsImN1cnJlbnRVaWQiLCJzdWJzY3JpcHRpb24iLCJhZGRPYnNlcnZlciIsImFjdGlvbiIsIl9sb2dGcmFtZXdvcmsiLCJmcmFtZXdvcmsiLCJfZ2V0RnJhbWV3b3JrcyIsImhlYXJ0YmVhdHNIZWFkZXIiLCJnZXRIZWFydGJlYXRzSGVhZGVyIiwiX2Nhc3RBdXRoIiwiY3JlYXRlU3Vic2NyaWJlIiwiQXV0aENyZWRlbnRpYWwiLCJzaWduSW5NZXRob2QiLCJfZ2V0SWRUb2tlblJlc3BvbnNlIiwiX2F1dGgiLCJfbGlua1RvSWRUb2tlbiIsIl9pZFRva2VuIiwiX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlciIsIkVtYWlsQXV0aENyZWRlbnRpYWwiLCJfZW1haWwiLCJfcGFzc3dvcmQiLCJfdGVuYW50SWQiLCJwYXNzd29yZCIsIm9vYkNvZGUiLCJfZnJvbUVtYWlsQW5kUGFzc3dvcmQiLCJfZnJvbUVtYWlsQW5kQ29kZSIsInNpZ25JbldpdGhQYXNzd29yZCIsInJldHVyblNlY3VyZVRva2VuIiwic2lnbkluV2l0aEVtYWlsTGluayQxIiwidXBkYXRlRW1haWxQYXNzd29yZCIsInNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nIiwic2lnbkluV2l0aElkcCIsIk9BdXRoQ3JlZGVudGlhbCIsInBlbmRpbmdUb2tlbiIsImNyZWQiLCJub25jZSIsIm9hdXRoVG9rZW4iLCJvYXV0aFRva2VuU2VjcmV0Iiwic2VjcmV0IiwiYnVpbGRSZXF1ZXN0IiwiYXV0b0NyZWF0ZSIsInJlcXVlc3RVcmkiLCJwb3N0Qm9keSIsIlZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8iLCJQaG9uZUF1dGhDcmVkZW50aWFsIiwidmVyaWZpY2F0aW9uSWQiLCJ2ZXJpZmljYXRpb25Db2RlIiwidGVtcG9yYXJ5UHJvb2YiLCJzaWduSW5XaXRoUGhvbmVOdW1iZXIkMSIsIl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCIsImxpbmtXaXRoUGhvbmVOdW1iZXIkMSIsIm9wZXJhdGlvbiIsInZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmciLCJzZXNzaW9uSW5mbyIsIkFjdGlvbkNvZGVVUkwiLCJhY3Rpb25MaW5rIiwic2VhcmNoUGFyYW1zIiwicGFyc2VNb2RlIiwiY29udGludWVVcmwiLCJsaW5rIiwiZG91YmxlRGVlcExpbmsiLCJpT1NEZWVwTGluayIsInBhcnNlRGVlcExpbmsiLCJFbWFpbEF1dGhQcm92aWRlciIsIlBST1ZJREVSX0lEIiwiZW1haWxMaW5rIiwiYWN0aW9uQ29kZVVybCIsInBhcnNlTGluayIsIkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EIiwiRU1BSUxfTElOS19TSUdOX0lOX01FVEhPRCIsIkZlZGVyYXRlZEF1dGhQcm92aWRlciIsImRlZmF1bHRMYW5ndWFnZUNvZGUiLCJjdXN0b21QYXJhbWV0ZXJzIiwic2V0RGVmYXVsdExhbmd1YWdlIiwic2V0Q3VzdG9tUGFyYW1ldGVycyIsImN1c3RvbU9BdXRoUGFyYW1ldGVycyIsImdldEN1c3RvbVBhcmFtZXRlcnMiLCJCYXNlT0F1dGhQcm92aWRlciIsInNjb3BlcyIsImFkZFNjb3BlIiwic2NvcGUiLCJnZXRTY29wZXMiLCJGYWNlYm9va0F1dGhQcm92aWRlciIsIl9mcm9tUGFyYW1zIiwiRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QiLCJ1c2VyQ3JlZGVudGlhbCIsImNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0IiwidG9rZW5SZXNwb25zZSIsIm9hdXRoQWNjZXNzVG9rZW4iLCJjcmVkZW50aWFsIiwiR29vZ2xlQXV0aFByb3ZpZGVyIiwiR09PR0xFX1NJR05fSU5fTUVUSE9EIiwib2F1dGhJZFRva2VuIiwiR2l0aHViQXV0aFByb3ZpZGVyIiwiR0lUSFVCX1NJR05fSU5fTUVUSE9EIiwiVHdpdHRlckF1dGhQcm92aWRlciIsIlRXSVRURVJfU0lHTl9JTl9NRVRIT0QiLCJVc2VyQ3JlZGVudGlhbEltcGwiLCJvcGVyYXRpb25UeXBlIiwiX2Zyb21JZFRva2VuUmVzcG9uc2UiLCJwcm92aWRlcklkRm9yUmVzcG9uc2UiLCJfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkiLCJNdWx0aUZhY3RvckVycm9yIiwiX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5IiwiX2Zyb21FcnJvckFuZE9wZXJhdGlvbiIsIl9zaWduSW5XaXRoQ3JlZGVudGlhbCIsInNlbmRQYXNzd29yZFJlc2V0RW1haWwiLCJhY3Rpb25Db2RlU2V0dGluZ3MiLCJhdXRoTW9kdWxhciIsInJlcXVlc3RUeXBlIiwiZHluYW1pY0xpbmtEb21haW4iLCJjYW5IYW5kbGVDb2RlSW5BcHAiLCJoYW5kbGVDb2RlSW5BcHAiLCJpT1MiLCJidW5kbGVJZCIsImlPU0J1bmRsZUlkIiwiYW5kcm9pZCIsInBhY2thZ2VOYW1lIiwiYW5kcm9pZEluc3RhbGxBcHAiLCJpbnN0YWxsQXBwIiwiYW5kcm9pZE1pbmltdW1WZXJzaW9uQ29kZSIsIm1pbmltdW1WZXJzaW9uIiwiYW5kcm9pZFBhY2thZ2VOYW1lIiwiX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCIsInNlbmRPb2JDb2RlIiwic2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxIiwiV2Vha01hcCIsIlNUT1JBR0VfQVZBSUxBQkxFX0tFWSIsIkJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIiwic3RvcmFnZVJldHJpZXZlciIsInNldEl0ZW0iLCJyZW1vdmVJdGVtIiwiZ2V0SXRlbSIsIkJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIiwibG9jYWxTdG9yYWdlIiwicG9sbCIsIm9uU3RvcmFnZUV2ZW50IiwibG9jYWxDYWNoZSIsInBvbGxUaW1lciIsInNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCIsIl9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSIsIl9pc0lmcmFtZSIsImZhbGxiYWNrVG9Qb2xsaW5nIiwiZm9yQWxsQ2hhbmdlZEtleXMiLCJuZXdWYWx1ZSIsIm9sZFZhbHVlIiwiX29sZFZhbHVlIiwibm90aWZ5TGlzdGVuZXJzIiwiZGV0YWNoTGlzdGVuZXIiLCJzdG9wUG9sbGluZyIsInN0b3JlZFZhbHVlIiwidHJpZ2dlckxpc3RlbmVycyIsInN0YXJ0UG9sbGluZyIsInNldEludGVydmFsIiwiU3RvcmFnZUV2ZW50IiwiY2xlYXJJbnRlcnZhbCIsImF0dGFjaExpc3RlbmVyIiwiYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UiLCJCcm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIiwic2Vzc2lvblN0b3JhZ2UiLCJicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIiwiUmVjZWl2ZXIiLCJldmVudFRhcmdldCIsImhhbmRsZXJzTWFwIiwicmVjZWl2ZXJzIiwicmVjZWl2ZXIiLCJpc0xpc3RlbmluZ3RvIiwibmV3SW5zdGFuY2UiLCJtZXNzYWdlRXZlbnQiLCJldmVudElkIiwiZXZlbnRUeXBlIiwiaGFuZGxlcnMiLCJwb3J0cyIsInBvc3RNZXNzYWdlIiwicHJvbWlzZXMiLCJoYW5kbGVyIiwib3JpZ2luIiwiZnVsZmlsbGVkIiwicmVhc29uIiwiX2FsbFNldHRsZWQiLCJfc3Vic2NyaWJlIiwiZXZlbnRIYW5kbGVyIiwiX3Vuc3Vic2NyaWJlIiwiX2dlbmVyYXRlRXZlbnRJZCIsInByZWZpeCIsImRpZ2l0cyIsIlNlbmRlciIsInJlbW92ZU1lc3NhZ2VIYW5kbGVyIiwibWVzc2FnZUNoYW5uZWwiLCJwb3J0MSIsIk1lc3NhZ2VDaGFubmVsIiwiY29tcGxldGlvblRpbWVyIiwiYWNrVGltZXIiLCJwb3J0MiIsImZpbmFsbHkiLCJfd2luZG93IiwiX2lzV29ya2VyIiwiREJfT0JKRUNUU1RPUkVfTkFNRSIsIkRCX0RBVEFfS0VZUEFUSCIsIkRCUHJvbWlzZSIsImdldE9iamVjdFN0b3JlIiwiaXNSZWFkV3JpdGUiLCJfb3BlbkRhdGFiYXNlIiwia2V5UGF0aCIsIl9kZWxldGVEYXRhYmFzZSIsIl9wdXRPYmplY3QiLCJfZGVsZXRlT2JqZWN0IiwiSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSIsInBlbmRpbmdXcml0ZXMiLCJzZW5kZXIiLCJzZXJ2aWNlV29ya2VyUmVjZWl2ZXJBdmFpbGFibGUiLCJhY3RpdmVTZXJ2aWNlV29ya2VyIiwiX3dvcmtlckluaXRpYWxpemF0aW9uUHJvbWlzZSIsImluaXRpYWxpemVTZXJ2aWNlV29ya2VyTWVzc2FnaW5nIiwibnVtQXR0ZW1wdHMiLCJfb3BlbkRiIiwiaW5pdGlhbGl6ZVJlY2VpdmVyIiwiaW5pdGlhbGl6ZVNlbmRlciIsIl9vcmlnaW4iLCJrZXlQcm9jZXNzZWQiLCJfcG9sbCIsIl9kYXRhIiwic2VydmljZVdvcmtlciIsInJlYWR5IiwiYWN0aXZlIiwiX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIiLCJyZXN1bHRzIiwiX3NlbmQiLCJjb250cm9sbGVyIiwid3JpdGUiLCJfd2l0aFBlbmRpbmdXcml0ZSIsIl93aXRoUmV0cmllcyIsIm5vdGlmeVNlcnZpY2VXb3JrZXIiLCJnZXRPYmplY3QiLCJnZXRBbGxSZXF1ZXN0IiwiZ2V0QWxsIiwia2V5c0luUmVzdWx0IiwiZmJhc2Vfa2V5IiwibG9jYWxLZXkiLCJpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIiwiX2dlbmVyYXRlQ2FsbGJhY2tOYW1lIiwiUGhvbmVBdXRoUHJvdmlkZXIiLCJ2ZXJpZnlQaG9uZU51bWJlciIsInBob25lT3B0aW9ucyIsImFwcGxpY2F0aW9uVmVyaWZpZXIiLCJ2ZXJpZmllciIsInJlY2FwdGNoYVRva2VuIiwicGhvbmVJbmZvT3B0aW9ucyIsInNlc3Npb24iLCJzdGFydEVucm9sbFBob25lTWZhIiwicGhvbmVFbnJvbGxtZW50SW5mbyIsInBob25lU2Vzc2lvbkluZm8iLCJtZmFFbnJvbGxtZW50SWQiLCJtdWx0aUZhY3RvckhpbnQiLCJtdWx0aUZhY3RvclVpZCIsInN0YXJ0U2lnbkluUGhvbmVNZmEiLCJtZmFQZW5kaW5nQ3JlZGVudGlhbCIsInBob25lU2lnbkluSW5mbyIsInBob25lUmVzcG9uc2VJbmZvIiwic2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZSIsIl9yZXNldCIsIl92ZXJpZnlQaG9uZU51bWJlciIsIl9mcm9tVmVyaWZpY2F0aW9uIiwiX2Zyb21Ub2tlblJlc3BvbnNlIiwiUEhPTkVfU0lHTl9JTl9NRVRIT0QiLCJJZHBDcmVkZW50aWFsIiwiX2J1aWxkSWRwUmVxdWVzdCIsInNlc3Npb25JZCIsInJldHVybklkcENyZWRlbnRpYWwiLCJfc2lnbkluIiwiX3JlYXV0aCIsInBhcnNlZCIsInN1YiIsIl9mb3JPcGVyYXRpb24iLCJfcmVhdXRoZW50aWNhdGUiLCJfbGluayIsIl9saW5rJDEiLCJBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24iLCJwZW5kaW5nUHJvbWlzZSIsImV4ZWN1dGUiLCJvbkV4ZWN1dGlvbiIsInJlZ2lzdGVyQ29uc3VtZXIiLCJ1cmxSZXNwb25zZSIsImdldElkcFRhc2siLCJ1bnJlZ2lzdGVyQW5kQ2xlYW5VcCIsInVucmVnaXN0ZXJDb25zdW1lciIsImNsZWFuVXAiLCJfUE9MTF9XSU5ET1dfQ0xPU0VfVElNRU9VVCIsIlBvcHVwT3BlcmF0aW9uIiwiYXV0aFdpbmRvdyIsInBvbGxJZCIsImN1cnJlbnRQb3B1cEFjdGlvbiIsIl9vcGVuUG9wdXAiLCJhc3NvY2lhdGVkRXZlbnQiLCJfb3JpZ2luVmFsaWRhdGlvbiIsIl9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQiLCJpc1N1cHBvcnRlZCIsInBvbGxVc2VyQ2FuY2VsbGF0aW9uIiwiY2xvc2VkIiwicmVkaXJlY3RPdXRjb21lTWFwIiwiUmVkaXJlY3RBY3Rpb24iLCJyZWFkeU91dGNvbWUiLCJoYXNQZW5kaW5nUmVkaXJlY3QiLCJwZW5kaW5nUmVkaXJlY3RLZXkiLCJyZXNvbHZlclBlcnNpc3RlbmNlIiwiX2dldEFuZENsZWFyUGVuZGluZ1JlZGlyZWN0U3RhdHVzIiwib25BdXRoRXZlbnQiLCJfcmVkaXJlY3RVc2VyRm9ySWQiLCJfZ2V0UmVkaXJlY3RSZXN1bHQiLCJyZXNvbHZlckV4dGVybiIsImF1dGhJbnRlcm5hbCIsInJlc29sdmVyT3ZlcnJpZGUiLCJfd2l0aERlZmF1bHRSZXNvbHZlciIsIkF1dGhFdmVudE1hbmFnZXIiLCJjYWNoZWRFdmVudFVpZHMiLCJjb25zdW1lcnMiLCJxdWV1ZWRSZWRpcmVjdEV2ZW50IiwiaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IiwibGFzdFByb2Nlc3NlZEV2ZW50VGltZSIsImF1dGhFdmVudENvbnN1bWVyIiwiaXNFdmVudEZvckNvbnN1bWVyIiwic2VuZFRvQ29uc3VtZXIiLCJzYXZlRXZlbnRUb0NhY2hlIiwib25FdmVudCIsImhhc0V2ZW50QmVlbkhhbmRsZWQiLCJoYW5kbGVkIiwiY29uc3VtZXIiLCJpc051bGxSZWRpcmVjdEV2ZW50IiwiaXNSZWRpcmVjdEV2ZW50IiwiZXZlbnRJZE1hdGNoZXMiLCJldmVudFVpZCIsIklQX0FERFJFU1NfUkVHRVgiLCJIVFRQX1JFR0VYIiwibWF0Y2hEb21haW4iLCJleHBlY3RlZCIsImN1cnJlbnRVcmwiLCJVUkwiLCJjZVVybCIsImVzY2FwZWREb21haW5QYXR0ZXJuIiwiTkVUV09SS19USU1FT1VUIiwicmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzIiwiYmVhY29uIiwiX19fanNsIiwiaGludCIsIkNQIiwiY2FjaGVkR0FwaUxvYWRlciIsIl9sb2FkR2FwaSIsImxvYWRHYXBpSWZyYW1lIiwiZ2FwaSIsImxvYWQiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIklmcmFtZSIsImNiTmFtZSIsImVsIiwiY2hhcnNldCIsImFwcGVuZENoaWxkIiwibG9hZEdhcGkiLCJQSU5HX1RJTUVPVVQiLCJJRlJBTUVfQVRUUklCVVRFUyIsIndpZHRoIiwiaGVpZ2h0IiwidGFiaW5kZXgiLCJFSURfRlJPTV9BUElIT1NUIiwiZ2V0SWZyYW1lVXJsIiwiZWlkIiwiZnciLCJCQVNFX1BPUFVQX09QVElPTlMiLCJyZXNpemFibGUiLCJzdGF0dXNiYXIiLCJ0b29sYmFyIiwiQXV0aFBvcHVwIiwiX2dldFJlZGlyZWN0VXJsIiwiYXV0aFR5cGUiLCJyZWRpcmVjdFVybCIsImFkZGl0aW9uYWxQYXJhbXMiLCJ0aWQiLCJwYXJhbXNEaWN0IiwiZ2V0SGFuZGxlckJhc2UiLCJXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWSIsImJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJldmVudE1hbmFnZXJzIiwib3JpZ2luVmFsaWRhdGlvblByb21pc2VzIiwic2NyZWVuIiwiYXZhaWxIZWlnaHQiLCJhdmFpbFdpZHRoIiwic2Nyb2xsYmFycyIsIm9wdGlvbnNTdHJpbmciLCJhY2N1bSIsInN0YW5kYWxvbmUiLCJfaXNJT1NTdGFuZGFsb25lIiwiY2xpY2siLCJjcmVhdGVFdmVudCIsImluaXRNb3VzZUV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsIm9wZW5Bc05ld1dpbmRvd0lPUyIsIm5ld1dpbiIsImZvY3VzIiwiX29wZW4iLCJpbml0QW5kR2V0TWFuYWdlciIsImlmcmFtZSIsImNvbnRleHQiLCJtZXNzYWdlSGFuZGxlcnNGaWx0ZXIiLCJDUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIiLCJhdHRyaWJ1dGVzIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJhdXRob3JpemVkRG9tYWlucyIsIl9nZXRQcm9qZWN0Q29uZmlnIiwiZG9tYWluIiwiX3ZhbGlkYXRlT3JpZ2luIiwiQXV0aEludGVyb3AiLCJpbnRlcm5hbExpc3RlbmVycyIsImFzc2VydEF1dGhDb25maWd1cmVkIiwidW5zdWJzY3JpYmUiLCJ1cGRhdGVQcm9hY3RpdmVSZWZyZXNoIiwiZGVwcyIsImF1dGhJbnN0YW5jZSIsImhpZXJhcmNoeSIsIl9pbml0aWFsaXplQXV0aEluc3RhbmNlIiwiX2luc3RhbmNlSWRlbnRpZmllciIsIl9pbnN0YW5jZSIsImdldFZlcnNpb25Gb3JQbGF0Zm9ybSIsImluc3RydWN0aW9uc1BUYWciLCJzZWNvbmRzRm9yRWFjaFN0YWdlIiwiZmlndXJlc1BlclN0YWdlIiwicEFub24iLCJpbnN0cnVjdGlvbnMiLCJtZWRhbCIsIm1lZGFsU3BhbiIsInNhdmVkTmlja25hbWUiLCJmb3JtcyIsIm5pY2tuYW1lRm9ybSIsIm5pY2tuYW1lIiwidGV4dENvbnRlbnQiLCJkaXNwbGF5IiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJpbml0aWFsaXplQXBwIiwic3RvcmFnZUJ1Y2tldCIsIm1lc3NhZ2luZ1NlbmRlcklkIiwiaW5pdGlhbGl6ZUF1dGgiLCJnZXRBdXRoIiwiZ2V0RmlyZXN0b3JlIiwiY3VycmVudFN0YWdlIiwiY29sbGVjdGlvbiIsInJlZ2lzdGVyQnV0dG9uIiwicmVnaXN0ZXJGb3JtQ29udGFpbmVyIiwicmVnaXN0ZXJGb3JtIiwicmVnaXN0ZXJGb3JtSW5wdXRGaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVnaXN0ZXJGb3JtUEZpZWxkcyIsInJlZ2lzdGVyTGFzdE5hbWUiLCJyZWdpc3RlckZpcnN0TmFtZSIsImxhc3ROYW1lUCIsImZpcnN0TmFtZVAiLCJzaWduSW5CdXR0b24iLCJzaWduSW5Gb3JtQ29udGFpbmVyIiwic2lnbkluRm9ybSIsImNsb3NlWCIsImluc3RydWN0aW9uc1AiLCJuaWNrbmFtZUZvcm1MYWJlbCIsIm5pY2tuYW1lRm9ybVRleHRJbnB1dCIsInNpZ25PdXRCdXR0b24iLCJob3VyZ2xhc3MiLCJmb3Jnb3RQYXNzd29yZCIsImZvcmdvdENvbnRhaW5lciIsImZvcmdvdEZvcm0iLCJjbG9zZVgyIiwiYmFja1RvR2FtZSIsImVtYWlsU2VudCIsImVtYWlsU2VudFAiLCJxdWl0IiwicmVnaXN0ZXJCdXR0b25FdmVudCIsInNpZ25JbkJ1dHRvbkV2ZW50IiwiaW5wdXRGaWVsZCIsInBGaWVsZCIsInJlZyIsImZpcnN0TmFtZSIsImxhc3ROYW1lIiwibmlja25hbWVSZWdpc3RlcmVkVXNlciIsImlkSW5wdXQiLCJnZXRBdHRyaWJ1dGUiLCJjbGFzc0xpc3RDaGVjayIsInJlZ2lzdGVyZWROaWNrbmFtZSIsImRvY1JlZiIsImdldERvYyIsImZpcmVEb2MiLCJzaWduVXAiLCJjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJwcm9maWxlUmVxdWVzdCIsInVwZGF0ZVByb2ZpbGUkMSIsInBhc3N3b3JkUHJvdmlkZXIiLCJ1cGRhdGVQcm9maWxlIiwic2V0RG9jIiwiTmlja25hbWUiLCJhbGVydCIsIlNjb3JlIiwiZm9udFNpemUiLCJzaWduSW5XaXRoQ3JlZGVudGlhbCIsInNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIiwiZG9jdW0iLCJmb3Jnb3RFbWFpbFZhbHVlIiwiYW5pbWF0aW9uIiwidHJpYWwiLCJzdG9wV29ya2luZyIsImJpbmFyeSIsIm91clZpZXdQb3J0V2lkdGgiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsIm1vdmUiLCJmaWd1cmUiLCJzcGVlZCIsInJhbmRvbUludFgiLCJyYW5kb21JbnRZIiwibW92ZW1lbnRJbnRlcnZhbCIsImZpZ3VyZU1vdmVtZW50Iiwib2Zmc2V0VG9wIiwib2Zmc2V0TGVmdCIsImJhY2tncm91bmQiLCJpbnN0cnVjdGlvbnNINCIsInRyaWFsMyIsInRyaWFsNCIsIm1vYmlsZUFuZFRhYmxldHMiLCJtZWRpYXExIiwibWF0Y2hNZWRpYSIsImZvb3RlciIsInRvcEV5ZXNoYWRlIiwiYm90dG9tRXllc2hhZGUiLCJ0aW55Q2lyY2xlcyIsImNvcm9uYSIsInRpbnlDaXJjbGVDb250YWluZXIiLCJzaWduIiwiaGVhZGxpbmUiLCJzdGFnZSIsImZpZ3VyZXMiLCJmaWd1cmVzRGl2cyIsIm51bXNPZkZpZ3MiLCJ1c2VyU2NvcmUiLCJib251c0Fycm93IiwiY3VycmVudExldmVsQ2xpY2tzU3VjY2VzcyIsIm9wYWNpdHkiLCJudW0iLCJjdXJyZW50RmlndXJlIiwic3RhcnNBbmRQb2ludHMiLCJzY29yZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm9wYWNpdHlDaGFuZ2UiLCJjaGVja0JhY2tncm91bmQiLCJmaWd1cmVEaXYiLCJjb3VudERvd25JbnRlcnZhbCIsImxvY2FsTmFtZSIsImVuZExldmVsIiwidXNlcnNDdXJyZW50U3RhZ2UiLCJib251cyIsImJlc3RTY29yZSIsIm9oIiwicmgiLCJ1cGRhdGVEb2MiLCJjaXJjbGUiLCJtb3ZlUmlnaHQiLCJtb3ZpbmdSaWdodCIsImFtYnVsYW5jZSIsImZhaWxpbmdQcm9jZWR1cmUiXSwic291cmNlUm9vdCI6IiJ9